!function(s){function e(e){for(var t,a,n=e[0],o=e[1],r=e[2],l=0,i=[];l<n.length;l++)a=n[l],c[a]&&i.push(c[a][0]),c[a]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(s[t]=o[t]);for(f&&f(e);i.length;)i.shift()();return d.push.apply(d,r||[]),u()}function u(){for(var e,t=0;t<d.length;t++){for(var a=d[t],n=!0,o=1;o<a.length;o++){var r=a[o];0!==c[r]&&(n=!1)}n&&(d.splice(t--,1),e=l(l.s=a[0]))}return e}var a={},c={3:0},d=[];function l(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=s,l.c=a,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(a,n,function(e){return t[e]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var t=window.webpackJsonp=window.webpackJsonp||[],n=t.push.bind(t);t.push=e,t=t.slice();for(var o=0;o<t.length;o++)e(t[o]);var f=n;d.push([1070,1,0]),u()}(Array(29).concat([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(a(2),n(a(8))),i=n(a(50)),s=n(a(79)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(32));function n(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this,e))||"object"!==c(n)&&"function"!=typeof n?m(a):n).state={progressButtons:i.default.getProgressButtons(),buttonText:e.buttonText,disableBackClick:!1,disableNext:e.disableNext||e.actionTaken,disableNextClick:!1,actionTaken:e.actionTaken,next:e.next,hideNext:e.hideNext,ignoreAllowEdit:e.ignoreAllowEdit,shouldHideBack:!!e.shouldHideBack&&e.shouldHideBack},t.enableButtons=t.enableButtons.bind(m(m(t))),t.clickNext=t.clickNext.bind(m(m(t))),t.clickBack=t.clickBack.bind(m(m(t))),t.onBack=t.onBack.bind(m(m(t))),t.onNext=t.onNext.bind(m(m(t))),t.onError=t.onError.bind(m(m(t))),t.onNavigationConfirmed=t.onNavigationConfirmed.bind(m(m(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){i.default.addEnableProgressButtonsListener(this.enableButtons),i.default.addNavigationConfirmedListener(this.onNavigationConfirmed),s.default.addGlobalErrorListener(this.onError)}},{key:"componentWillUnmount",value:function(){i.default.removeEnableProgressButtonsListener(this.enableButtons),i.default.removeNavigationConfirmedListener(this.onNavigationConfirmed),s.default.removeGlobalErrorListener(this.onError)}},{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({buttonText:e.buttonText,disableNext:e.disableNext||e.actionTaken,actionTaken:e.actionTaken,next:e.next,hideNext:e.hideNext,ignoreAllowEdit:e.ignoreAllowEdit})}},{key:"enableButtons",value:function(){this.setState({disableBackClick:!1,disableNextClick:!1})}},{key:"clickNext",value:function(){this.refs.btnNext&&!this.refs.btnNext.disabled&&this.onNext()}},{key:"clickBack",value:function(){this.refs.btnBack&&!this.refs.btnBack.disabled&&this.onBack()}},{key:"onBack",value:function(){var e=this;this.setState({disableBackClick:!0},function(){return e.props.back?e.props.back():u.onNavigationInitiated(null,"progressButtons")})}},{key:"onError",value:function(e){this.setState({disableBackClick:!1,disableNextClick:!1})}},{key:"onNavigationConfirmed",value:function(e,t){"progressButtons"===t&&setTimeout(function(){u.go("back")},0)}},{key:"onNext",value:function(){var e=this;this.setState({disableNextClick:!0},function(){return e.state.next?e.state.next():u.go("next")})}},{key:"render",value:function(){var e=l.default.project().allowedToEdit,t=null,a=null,n=this.state.buttonText?this.state.buttonText:"Save & Continue",o=this.state.progressButtons;return o&&(o.canGoBack&&!this.state.shouldHideBack&&(t=r.default.createElement("div",{className:"pull-left back"},r.default.createElement("button",{ref:"btnBack",className:"btn btn-block btn-progress",type:"button",disabled:!!this.props.disableBack||this.state.disableBackClick,onClick:this.onBack},"Back"))),o.canGoNext&&!this.state.hideNext&&(a=r.default.createElement("div",{className:o.buttons.centerNext?"centered":"pull-right forward"},r.default.createElement("button",{ref:"btnNext",className:"btn btn-progress"+(this.state.actionTaken?" action-taken":""),type:"button",disabled:!e&&!this.state.ignoreAllowEdit||!!this.state.disableNext||this.state.disableNextClick,onClick:this.onNext},n)))),r.default.createElement("div",{className:"progress-buttons-container"},r.default.createElement("div",{className:"progress-buttons"},r.default.createElement("span",null,t,a)))}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=o},,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),f=n(a(32)),l=o(a(50)),p=n(a(10)),m=o(a(8));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={data:t.props.data?t.props.data:null,form:t.props.form?t.props.form:null},t.checkFormData=t.checkFormData.bind(d(d(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){l.default.addNavigationInitiatedListener(this.checkFormData)}},{key:"componentWillUnmount",value:function(){l.default.removeNavigationInitiatedListener(this.checkFormData)}},{key:"componentWillReceiveProps",value:function(e){e.form&&this.setState({form:e.form}),e.data&&this.setState({data:e.data})}},{key:"checkFormData",value:function(a,n){var e=this.state.data&&!this.state.data().unChanged,t=this.state.form&&this.state.form.hasChanged(),o="pricingTabs"===n?"tab":"page",r=m.default.project(),l=this.state.data&&this.state.data().secondaryReason;if(r.allowedToEdit&&(t||e))setTimeout(function(){p.showConfirmationModal("You have unsaved changes.","You have made changes to your book. If you leave this "+o.toLowerCase()+" without saving, all changes will be lost.","Leave "+o,"Stay on "+o,function(e,t){e?f.onNavigationConfirmed(a,n):f.enableProgressButtons()})},0);else if(r.allowedToEdit&&l){var i=this.state.data(),s=i.title,u=i.message,c=i.leave,d=i.stay;setTimeout(function(){p.showConfirmationModal(s,u,c,d,function(e,t){e&&f.onNavigationConfirmed(a,n)})},0)}else f.onNavigationConfirmed(a,n)}},{key:"render",value:function(){return null}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=h},,,,,,,,,,,,function(e,b,g){"use strict";(function(v){Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var r=a(g(18)),E=t(g(1096)),l=g(7),e=a(g(16)),i=g(44),S=t(g(57));function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var o=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this)))._init(),e._hasCurrentUserPublished=!1,e._hasUserSeries=!1,e._reportNotFoundMessages={},e._setNotFoundMessages(),e._setStagedDummyData(),e}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.EventEmitter),a=t,(n=[{key:"addCouponColumnHoverListener",value:function(e){this.addListener(m,e)}},{key:"removeCouponColumnHoverListener",value:function(e){this.removeListener(m,e)}},{key:"addChartLoadedListener",value:function(e){this.addListener(p,e)}},{key:"removeChartLoadedListener",value:function(e){this.removeListener(p,e)}},{key:"addReportMetadataLoadedListener",value:function(e){this.addListener(h,e)}},{key:"removeReportMetadataLoadedListener",value:function(e){this.removeListener(h,e)}},{key:"addReportDataLoadedListener",value:function(e){this.addListener(y,e)}},{key:"removeReportDataLoadedListener",value:function(e){this.removeListener(y,e)}},{key:"getReportDefinition",value:function(t,a){var e=null;return this.reportDefinitions&&(e=this.reportDefinitions.find(function(e){return e.key===t+(a?"Detail":"")})),e}},{key:"getSalesYears",value:function(){var e=(0,l.bn_moment)().year(),t=this._firstSaleDate?this._firstSaleDate.year():null,a=[];if(t)for(var n=e;t<=n;n--)a.push(n.toString());else a.push(e.toString());return a}},{key:"getPaymentYears",value:function(){var e=(0,l.bn_moment)().year(),t=this._firstPaymentDate?this._firstPaymentDate.year():null,a=[];if(t)for(var n=e;t<=n;n--)a.push(n.toString());else a.push(e.toString());return a}},{key:"getReportNotFoundMessage",value:function(e){return this._reportNotFoundMessages[e]}},{key:"hasUserPublishedBefore",value:function(){return this._hasCurrentUserPublished}},{key:"hasUserSeries",value:function(){return this._hasUserSeries}},{key:"getReportPeriodStartDate",value:function(e,t){var a,n=t?(0,l.bn_moment)(t):null;return a=e===S.PERIOD_TYPES.DAILY?(0,l.bn_moment)().subtract(6,"days"):e===S.PERIOD_TYPES.SEVEN_DAY?(0,l.bn_moment)().subtract(8,"days"):e===S.PERIOD_TYPES.THIRTY_DAY?(0,l.bn_moment)().subtract(31,"days"):e===S.PERIOD_TYPES.WEEKLY?1<(0,l.bn_moment)().weekday()?(0,l.bn_moment)().subtract(4,"weeks").startOf("week"):(0,l.bn_moment)().subtract(5,"weeks").startOf("week"):e===S.PERIOD_TYPES.QUARTERLY?(0,l.bn_moment)().subtract(3,"months"):e===S.PERIOD_TYPES.SEMI_ANNUALLY?(0,l.bn_moment)().subtract(6,"months"):e===S.PERIOD_TYPES.ANNUALLY?(0,l.bn_moment)().subtract(1,"year"):2<(0,l.bn_moment)().date()?(0,l.bn_moment)().subtract(4,"months").startOf("month"):(0,l.bn_moment)().subtract(5,"months").startOf("month"),n&&e!==S.PERIOD_TYPES.WEEKLY?a.isSame(n,"day")?a:n:a}},{key:"getReportPeriodEndDate",value:function(e,t){var a,n=t?(0,l.bn_moment)(t):null;return a=e===S.PERIOD_TYPES.DAILY||e===S.PERIOD_TYPES.SEVEN_DAY||e===S.PERIOD_TYPES.THIRTY_DAY||e===S.PERIOD_TYPES.QUARTERLY||e===S.PERIOD_TYPES.SEMI_ANNUALLY||e===S.PERIOD_TYPES.ANNUALLY?(0,l.bn_moment)().subtract(2,"days"):e===S.PERIOD_TYPES.WEEKLY?1<(0,l.bn_moment)().weekday()?(0,l.bn_moment)().endOf("week"):(0,l.bn_moment)().subtract(1,"weeks").endOf("week"):2<(0,l.bn_moment)().date()?(0,l.bn_moment)().endOf("month"):(0,l.bn_moment)().subtract(1,"months").endOf("month"),n&&e!==S.PERIOD_TYPES.WEEKLY?a.isSame(n,"day")?a:n:a}},{key:"getEmptyGraphData",value:function(e){return this._hasCurrentUserPublished?this._formatDummyGraph(e):this._formatDummyGraph(e,this._stagedDummyData)}},{key:"formatSalesGraphData",value:function(e,t){return this.hasUserPublishedBefore()?this._formatGraph(e,t):this.getEmptyGraphData(e)}},{key:"getEmptySeriesSalesGraphData",value:function(e){var t;return this._hasCurrentUserPublished&&this._hasUserSeries?t=this._formatDummyGraph(e):this._hasCurrentUserPublished&&!this._hasUserSeries?t=this._formatDummyGraph(e,this._stagedDummyData):this._hasCurrentUserPublished||this._hasUserSeries?!this._hasCurrentUserPublished&&this._hasUserSeries&&(t=this._formatDummyGraph(e,this._stagedDummyData)):t=this._formatDummyGraph(e,this._stagedDummyData),t}},{key:"formatSeriesSalesGraphData",value:function(e,t,a){var n;return this.hasUserPublishedBefore()&&this.hasUserSeries()?n=this._formatGraph(e,t,a):this.hasUserPublishedBefore()&&!this.hasUserSeries()?n=this.getEmptySeriesSalesGraphData(e):this.hasUserPublishedBefore()||this.hasUserSeries()?!this.hasUserPublishedBefore()&&this.hasUserSeries()&&(n=this.getEmptySeriesSalesGraphData(e)):n=this.getEmptySeriesSalesGraphData(e),n}},{key:"_formatGraph",value:function(e,t,a){var n,o=t.reportsRecord.length,r=t.reportsRecord[0]?t.reportsRecord[0].saleDate:null,l=t.reportsRecord[o-1]?t.reportsRecord[o-1].saleDate:null,i=this.getReportPeriodStartDate(e,r),s=this.getReportPeriodEndDate(e,l),u=this._getDateHelpers(e,a),c=0,d=0,f=0,p=0,m=function(e){var t=0;return v(e.saleDate).isSame(i,u.comparerType)?t=0:v(e.saleDate).isBefore(i,u.comparerType)?t=-1:v(e.saleDate).isAfter(i,u.comparerType)&&(t=1),t},h={series:[],categories:[],currencySymbol:t.royaltyCurrencySymbol};if(t.reportType===S.REPORT_TYPES.SERIES_SALES_BY_BOOK)for(var y=0;y<t.reportsRecord.length;y++)t.reportsRecord[y].totalFreeUnitsSold&&(f=+t.reportsRecord[y].totalFreeUnitsSold),t.reportsRecord[y].totalPaidUnitsSold&&(d=+t.reportsRecord[y].totalPaidUnitsSold),p=parseFloat(t.reportsRecord[y].totalRoyalty),c=t.reportsRecord[y].totalUnitsSold,h.series.push({totalRoyalty:this._formatRoyalty(p),unitsSold:parseInt(c),unitsPaid:d,unitsFree:f,seriesNumber:t.reportsRecord[y].seriesNumber}),h.categories.push(t.reportsRecord[y].seriesNumber);else for(;i.isSameOrBefore(s,u.comparerType);){for(var b=E.between(t.reportsRecord,m),g=f=d=c=p=0;g<b.length;g++)p+=parseFloat(b[g].totalRoyalty),c+=parseInt(b[g].totalUnitsSold),b[g].totalFreeUnitsSold&&(f+=+b[g].totalFreeUnitsSold),b[g].totalPaidUnitsSold&&(d+=+b[g].totalPaidUnitsSold);n=u.getFormatPeriod(i),h.series.push({totalRoyalty:this._formatRoyalty(p),unitsSold:c,unitsPaid:d,unitsFree:f,date:n.format("MM-DD-YYYY")}),h.categories.push(u.getCategoryFormat(i)),i=i.add(1,u.mathType)}return h}},{key:"_formatDummyGraph",value:function(e,a){for(var t=this.getReportPeriodStartDate(e),n=this.getReportPeriodEndDate(e),o=this._getDateHelpers(e),r={series:[],categories:[],currencySymbol:"$"};t.isSameOrBefore(n,o.comparerType);){var l=Array.apply(null,Array(5));r.series=l.map(function(e,t){return a?a[t]:{totalRoyalty:0,unitsSold:0,unitsPaid:0,unitsFree:0}}),r.categories.push(o.getCategoryFormat(t)),t=t.add(1,o.mathType)}return r}},{key:"_getDateHelpers",value:function(e,t){var a={comparerType:"day",mathType:"days",getFormatPeriod:function(e){return e},getCategoryFormat:function(e){return t?a.getFormatPeriod(e).format("M/D/YY"):a.getFormatPeriod(e).format("M/D")}};return e===S.PERIOD_TYPES.WEEKLY?(a.comparerType="week",a.mathType="weeks",a.getFormatPeriod=function(e){return e.startOf(a.comparerType)},a.getCategoryFormat=function(e){return t?a.getFormatPeriod(e).format("M/D/YY"):a.getFormatPeriod(e).format("M/D")}):e===S.PERIOD_TYPES.MONTHLY||e===S.PERIOD_TYPES.QUARTERLY||e===S.PERIOD_TYPES.SEMI_ANNUALLY||e===S.PERIOD_TYPES.ANNUALLY?(a.comparerType="month",a.mathType="months",a.getFormatPeriod=function(e){return e.startOf(a.comparerType)},a.getCategoryFormat=function(e){return t?a.getFormatPeriod(e).format("M/D/YY"):a.getFormatPeriod(e).format("MMM")}):e===S.PERIOD_TYPES.THIRTY_DAY&&(a.comparerType="day",a.mathType="days",a.getFormatPeriod=function(e){return e},a.getCategoryFormat=function(e){return t?a.getFormatPeriod(e).format("M/D/YY"):a.getFormatPeriod(e).format("D")}),a}},{key:"_formatRoyalty",value:function(e){var t=0;return 1<e?t=Math.floor(e):0<e&&(t=parseFloat(e.toFixed(2))),t}},{key:"_setStagedDummyData",value:function(){this._stagedDummyData=[{totalRoyalty:50,unitsSold:66,unitsPaid:66,unitsFree:0},{totalRoyalty:100,unitsSold:65,unitsPaid:0,unitsFree:65},{totalRoyalty:135,unitsSold:64,unitsPaid:50,unitsFree:14},{totalRoyalty:199,unitsSold:67,unitsPaid:55,unitsFree:12},{totalRoyalty:240,unitsSold:65,unitsPaid:65,unitsFree:0}]}},{key:"_setNotFoundMessages",value:function(){this._reportNotFoundMessages.recentSales="You don't have any recent sales information in the last 2 days.",this._reportNotFoundMessages.salesByWeek="You don't have any sales for the selected week.",this._reportNotFoundMessages.salesByMonth="You don't have any sales for the selected month.",this._reportNotFoundMessages.salesByYear="You don't have any sales for the selected dates. Please change the date fields above to see sales data.",this._reportNotFoundMessages.customDate="You don't have any sales for the selected dates. Please change the date fields above to see sales data."}},{key:"_init",value:function(){this._reportDefinitions=null,this._firstSaleDate=null,this._firstPaymentDate=null,this._bookPublicationDate=null}},{key:"_trackUserInfo",value:function(e){this._hasCurrentUserPublished=!(!e.data||!e.data.user)&&e.data.user.hasPublished}},{key:"handleActions",value:function(e){switch(e.type){case r.default.SalesReporting.HOVERING_COUPON_SALE:this.showCouponColumnHover();break;case r.default.SalesReporting.LOAD_CHART:this.onLoadChart(e.args);break;case r.default.SalesReporting.LOAD_REPORT_METADATA:this.onLoadReportMetadata(e.args);break;case r.default.SalesReporting.LOAD_REPORT_DATA:this.onLoadReportData(e.args);break;case r.default.AuthenticatedUser.LOAD_USER:this._trackUserInfo(e.args);break;case r.default.ProjectsSearch.LOAD_SERIES_NAMES:this.onLoadSeriesNames(e.args);break;case r.default.SalesReporting.CLEAR_REPORT_METADATA:this.onClearMetadata();break;case r.default.AuthenticatedUser.LOG_OUT_USER:this.onClearMetadata(),this._hasCurrentUserPublished=!1,this._hasUserSeries=!1}}},{key:"onLoadSeriesNames",value:function(e){var t=this;this._seriesNames=[],0<e.length&&e.map(function(e){return t._seriesNames.push(e.seriesName)}),this._hasUserSeries=0<this._seriesNames.length}},{key:"onLoadChart",value:function(e){this.emit(p,e.requestId,e.chartConfig)}},{key:"onLoadReportMetadata",value:function(e){this._reportDefinitions=e.metadata.definition,this._firstSaleDate=e.metadata.salesStartDate?(0,l.bn_moment)(e.metadata.salesStartDate,"MM/DD/YYYY"):this._firstSaleDate,this._firstPaymentDate=e.metadata.paymentStartDate?(0,l.bn_moment)(e.metadata.paymentStartDate,"MM/DD/YYYY"):this._firstPaymentDate,this.emit(h,e.metadata)}},{key:"onLoadReportData",value:function(e){e.data.reportType=e.reportType,this._bookPublicationDate=e.data.minimumDate?(0,l.bn_moment)(e.data.minimumDate,"YYYY-MM-DD"):this._bookPublicationDate,this.emit(y,e.requestId,e.data)}},{key:"onClearMetadata",value:function(){this._init()}},{key:"showCouponColumnHover",value:function(){this.emit(m)}},{key:"reportDefinitions",get:function(){return this._reportDefinitions}},{key:"firstSaleDate",get:function(){return this._firstSaleDate}},{key:"bookPublicationDate",get:function(){return this._bookPublicationDate}},{key:"firstPaymentDate",get:function(){return this._firstPaymentDate}}])&&s(a.prototype,n),o&&s(a,o),t}());o.dispatchToken=e.default.register(o.handleActions.bind(o));var f=o;b.default=f;var p="chartLoaded",m="hovering",h="reportMetadataLoaded",y="reportDataLoaded"}).call(this,g(117))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(44),o=s(a(16)),r=s(a(18)),l=s(a(244)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(15));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,a){return t&&d(e.prototype,t),a&&d(e,a),e}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y="cartChanged",b="eprotectUpdated",g="onCartChangedError",v="cartChangeStarted",E="checkoutInitialized",S="checkoutStateChanged",k="shippingMethodsError",P="paymentMethodsError",w="projectAdded",O="shippingMethodChanged",C="shippingMethodsLoaded",N="billingAddressCountriesLoaded",_="billingAddressStatesLoaded",T="orderSubmitted",D="orderSubmitted2faError",j="cvvPromptRequired",M="checkoutError";function L(e){if(e.shippingGroups&&0<e.shippingGroups.length&&e.shippingGroups[0].shippingAddress){var t=e.shippingGroups[0].shippingAddress;t.phoneNumber&&0!==t.phoneNumber.trim().length||(e.shippingGroups.length=0)}if(e.paymentGroups&&0<e.paymentGroups.length&&e.paymentGroups[0].billingAddress){var a=e.paymentGroups[0].billingAddress;a.phoneNumber&&0!==a.phoneNumber.trim().length||(e.paymentGroups.length=0)}}var A=new(function(e){function t(){var e;return c(this,t),(e=p(this,m(t).call(this)))._cart=null,e._numItems=null,e._deliveryOptions=null,e._checkoutState=null,e._eprotect=null,e._messageHeader=null,e._messageBody=null,e._messageLinkText=null,e._messageLink=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,n.EventEmitter),f(t,[{key:"addCartChangedListener",value:function(e){this.addListener(y,e)}},{key:"removeCartChangedListener",value:function(e){this.removeListener(y,e)}},{key:"addEprotectUpdatedListener",value:function(e){this.addListener(b,e)}},{key:"removeEprotectUpdatedListener",value:function(e){this.removeListener(b,e)}},{key:"addCartChangedErrorListener",value:function(e){this.addListener(g,e)}},{key:"removeCartChangedErrorListener",value:function(e){this.removeListener(g,e)}},{key:"addCheckoutInitializedListener",value:function(e){this.addListener(E,e)}},{key:"removeCheckoutInitializedListener",value:function(e){this.removeListener(E,e)}},{key:"addCheckoutStateChangedListener",value:function(e){this.addListener(S,e)}},{key:"removeCheckoutStateChangedListener",value:function(e){this.removeListener(S,e)}},{key:"addCartChangeStartedListener",value:function(e){this.addListener(v,e)}},{key:"removeCartChangeStartedListener",value:function(e){this.removeListener(v,e)}},{key:"addProjectAddedListener",value:function(e,t){this.addListener(w+e,t)}},{key:"removeProjectAddedListener",value:function(e,t){this.removeListener(w+e,t)}},{key:"addShippingMethodsLoadedListener",value:function(e){this.addListener(C,e)}},{key:"removeShippingMethodsLoadedListener",value:function(e){this.removeListener(C,e)}},{key:"addShippingMethodChangedListener",value:function(e){this.addListener(O,e)}},{key:"removeShippingMethodChangedListener",value:function(e){this.removeListener(O,e)}},{key:"addBillingAddressCountriesLoadedListener",value:function(e){this.addListener(N,e)}},{key:"removeBillingAddressCountriesLoadedListener",value:function(e){this.removeListener(N,e)}},{key:"addBillingAddressStatesLoadedListener",value:function(e){this.addListener(_,e)}},{key:"removeBillingAddressStatesLoadedListener",value:function(e){this.removeListener(_,e)}},{key:"addOrderSubmittedListener",value:function(e){this.addListener(T,e)}},{key:"removeOrderSubmittedListener",value:function(e){this.removeListener(T,e)}},{key:"addOrderSubmitted2faErrorListener",value:function(e){this.addListener(D,e)}},{key:"removeOrderSubmitted2faErrorListener",value:function(e){this.removeListener(D,e)}},{key:"addCvvPromptRequiredListener",value:function(e){this.addListener(j,e)}},{key:"removeCvvPromptRequiredListener",value:function(e){this.removeListener(j,e)}},{key:"addCheckoutErrorListener",value:function(e){this.addListener(M,e)}},{key:"removeCheckoutErrorListener",value:function(e){this.removeListener(M,e)}},{key:"addShippingAddressUpdateErrorListener",value:function(e){this.addListener(k,e)}},{key:"removeShippingAddressUpdateErrorListener",value:function(e){this.removeListener(k,e)}},{key:"addPayment2faUpdateErrorListener",value:function(e){this.addListener(P,e)}},{key:"removePayment2faUpdateErrorListener",value:function(e){this.removeListener(P,e)}},{key:"cart",value:function(){return this._cart}},{key:"getEprotect",value:function(){return this._eprotect}},{key:"checkoutState",value:function(){return this._checkoutState}},{key:"hasPODProjectsOnly",value:function(){return void 0!==this.cart()&&0!==this.cart().projects.length&&void 0===this.cart().projects.find(function(e){return e.projectType!==i.POD})}},{key:"numItems",value:function(){return this._numItems}},{key:"getDefaultShippingAddress",value:function(){var e=this.cart();return null==e?new l.default:void 0!==e.shippingGroups&&0<e.shippingGroups.length?e.shippingGroups[0].shippingAddress:new l.default}},{key:"handleActions",value:function(e){switch(e.type){case r.default.Cart.ADD_PROJECT:this.onAddProject(e.args);break;case r.default.Cart.REMOVE_PROJECT:this.onRemoveProject(e.args);break;case r.default.Cart.CHANGE_CART:this.onChangeCart(e.args);break;case r.default.Cart.UPDATE_EPROTECT:this.onUpdateEprotect(e.args);break;case r.default.Cart.CHANGE_CART_ERROR:this.onChangeCartError(e.args);break;case r.default.Cart.UPDATE_SHIPPING_ADDRESS:this.onShippingAddressUpdated(e.args);break;case r.default.Cart.UPDATE_SHIPPING_ADDRESS_ERROR:this.onShippingAddressUpdateerror(e.args);break;case r.default.Cart.LOAD_SHIPPING_METHODS:this.emit(C,e.args.shippingMethods);break;case r.default.Cart.UPDATE_SHIPPING_METHOD:this.onShippingMethodUpdated(e.args);break;case r.default.Cart.UPDATE_PAYMENT_METHOD:this.onPaymentUpdated(e.args);break;case r.default.Cart.UPDATE_PAYMENT_2FA_ERRORS:this.onPaymentUpdateerror(e.args);break;case r.default.Cart.BEGIN_EDITING_SHIPPING_ADDRESS_SECTION:this.onBeginEditingShippingAddressSection(e.args);break;case r.default.Cart.CANCEL_EDITING_SHIPPING_ADDRESS_SECTION:this.onCancelEditing(e.args);break;case r.default.Cart.BEGIN_EDITING_PAYMENT_SECTION:this.onBeginEditingPaymentSection(e.args);break;case r.default.Cart.CANCEL_EDITING_PAYMENT_SECTION:this.onCancelEditing(e.args);break;case r.default.Cart.START_CHANGE_CART:this.emit(v);break;case r.default.Cart.INIT_CHECKOUT:this.onInitCheckout(e.args);break;case r.default.Cart.LOAD_BILLING_ADDRESS_COUNTRIES:this.emit(N,e.args.countries);break;case r.default.Cart.LOAD_BILLING_ADDRESS_STATES:this.emit(_,e.args.states);break;case r.default.Cart.SUBMIT_ORDER:this.onOrderSubmitted(e.args);break;case r.default.Cart.SUBMIT_ORDER_2FA_ERRORS:this.onOrderSubmitted2faError(e.args);break;case r.default.Cart.CVV_PROMPT_REQUIRED:this.emit(j,e.args.message);break;case r.default.Cart.CHECKOUT_ERROR:this.emit(M,e.args.errors)}}},{key:"onAddProject",value:function(e){this.emit(w+e.projectId),this.onChangeCart(e)}},{key:"onRemoveProject",value:function(t){var e;-1<(e=this._cart.items.findIndex(function(e){return t.projectId===e.id}))&&(this._cart.items.splice(e,1),this.onChangeCart({cart:this._cart}))}},{key:"onInitCheckout",value:function(e){this._cart=e.cart,L(this._cart),this._initializeCheckoutState(),this.emit(E)}},{key:"onOrderSubmitted",value:function(e){e.summary.bnPressPromo?(this._messageHeader=e.summary.bnPressPromo.cartNCheckoutPromoMessage,this._messageBody=e.summary.bnPressPromo.cartNCheckoutTerms,this._messageLinkText=e.summary.bnPressPromo.loadingPageTerms,this._messageLink=e.summary.bnPressPromo.atgPromoDescription):(this._messageHeader=null,this._messageBody=null,this._messageLinkText=null,this._messageLink=null),this.emit(T,e)}},{key:"onOrderSubmitted2faError",value:function(e){this.emit(D,e)}},{key:"getPromoMessage",value:function(){return{messageHeader:this._messageHeader,messageBody:this._messageBody,messageLinkText:this._messageLinkText,messageLink:this._messageLink}}},{key:"onChangeCart",value:function(e){var t=this;this._cart=e.cart,L(this._cart),this._numItems=0,this._cart.projects.map(function(e){t._numItems+=Number(e.totalQuantity)}),this.emit(y,e.cart)}},{key:"onUpdateEprotect",value:function(e){this._eprotect=e.eProtectId.data,this.emit(b,e.eProtectId.data)}},{key:"onChangeCartError",value:function(e){this.emit(g,{errors:e.errors})}},{key:"onShippingAddressUpdated",value:function(e){this.onChangeCart(e),this._checkoutState.isShippingEntryRequired?this._checkoutState=new x(x.DISPLAY,x.ENTRY_REQUIRED,x.NOT_READY):this._initializeCheckoutState(),this.emit(S,this._checkoutState)}},{key:"onShippingAddressUpdateerror",value:function(e){this.emit(k,e)}},{key:"onPaymentUpdateerror",value:function(e){this.emit(P,e)}},{key:"onShippingMethodUpdated",value:function(e){this.emit(O,{shippingMethodId:e.cart.shippingMethodId}),this.onChangeCart(e),this._initializeCheckoutState(),this.emit(S,this._checkoutState)}},{key:"onPaymentUpdated",value:function(e){this._cart=e.cart,L(this._cart),this._initializeCheckoutState(),this.emit(S,this._checkoutState)}},{key:"onBeginEditingShippingAddressSection",value:function(){this._checkoutState=new x(x.EDITING,this._checkoutState.deliveryStatus,this._checkoutState.paymentStatus),this.emit(S,this._checkoutState)}},{key:"onBeginEditingPaymentSection",value:function(e){this._checkoutState=new x(x.DISPLAY,x.DISPLAY,x.EDITING),this.emit(S,this._checkoutState)}},{key:"onCancelEditing",value:function(e){this._initializeCheckoutState(),this.emit(S,this._checkoutState)}},{key:"_initializeCheckoutState",value:function(){var e=this._cart,t=new x;e.shippingGroups&&e.shippingGroups.length?e.shippingGroups[0].shippingMethod&&e.shippingGroups[0].shippingMethod.length?e.paymentGroups&&e.paymentGroups.length?(t.shippingStatus=x.DISPLAY,t.deliveryStatus=x.DISPLAY,t.paymentStatus=x.DISPLAY):(t.shippingStatus=x.DISPLAY,t.deliveryStatus=x.DISPLAY,t.paymentStatus=x.ENTRY_REQUIRED):(t.shippingStatus=x.DISPLAY,t.deliveryStatus=x.ENTRY_REQUIRED,t.paymentStatus=x.NOT_READY):(t.shippingStatus=x.ENTRY_REQUIRED,t.deliveryStatus=x.NOT_READY,t.paymentStatus=x.NOT_READY),this._checkoutState=t}}]),t}());A.dispatchToken=o.default.register(A.handleActions.bind(A));var B=A;t.default=B;var x=function(){function n(e,t,a){c(this,n),this.shippingStatus=e||n.DISPLAY,this.deliveryStatus=t||n.DISPLAY,this.paymentStatus=a||n.DISPLAY}return f(n,[{key:"isShippingReady",get:function(){return this.shippingStatus!==n.NOT_READY}},{key:"isDeliveryReady",get:function(){return this.deliveryStatus!==n.NOT_READY}},{key:"isPaymentReady",get:function(){return this.paymentStatus!==n.NOT_READY}},{key:"isShippingDisplay",get:function(){return this.shippingStatus===n.DISPLAY}},{key:"isDeliveryDisplay",get:function(){return this.deliveryStatus===n.DISPLAY}},{key:"isPaymentDisplay",get:function(){return this.paymentStatus===n.DISPLAY}},{key:"isShippingEntryRequired",get:function(){return this.shippingStatus===n.ENTRY_REQUIRED}},{key:"isDeliveryEntryRequired",get:function(){return this.deliveryStatus===n.ENTRY_REQUIRED}},{key:"isPaymentEntryRequired",get:function(){return this.paymentStatus===n.ENTRY_REQUIRED}},{key:"isShippingEditing",get:function(){return this.shippingStatus===n.EDITING}},{key:"isDeliveryEditing",get:function(){return this.deliveryStatus===n.EDITING}},{key:"isPaymentEditing",get:function(){return this.paymentStatus===n.EDITING}},{key:"isShippingEditingOrEntryRequired",get:function(){return this.shippingStatus===n.EDITING||this.shippingStatus===n.ENTRY_REQUIRED}},{key:"isDeliveryEditingOrEntryRequired",get:function(){return this.deliveryStatus===n.EDITING||this.deliveryStatus===n.ENTRY_REQUIRED}},{key:"isPaymentEditingOrEntryRequired",get:function(){return this.paymentStatus===n.EDITING||this.paymentStatus===n.ENTRY_REQUIRED}},{key:"isAnyEditing",get:function(){return this.isShippingEditing||this.isDeliveryEditing||this.isPaymentEditing}},{key:"allowCheckout",get:function(){return this.isShippingDisplay&&this.isDeliveryDisplay&&this.isPaymentDisplay}}]),n}();x.NOT_READY="NotReady",x.ENTRY_REQUIRED="EntryRequired",x.DISPLAY="Display",x.EDITING="Editing"},,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FILTER_CHOOSER_TYPES=t.DAY_SELECTOR=t.BOOK_TYPES=t.PERIOD_TYPES=t.RANGE=t.REPORT_TYPES=void 0;t.REPORT_TYPES={PAYMENTS:"payments",RECENT_SALES:"recentSales",WEEKLY:"salesByWeek",MONTHLY:"salesByMonth",TITLE:"salesByTitle",CUSTOM:"customDate",GRAPH_DAILY:"graphByDay",GRAPH_THIRTY_DAY:"graphThirtyDay",GRAPH_WEEKLY:"graphByWeek",GRAPH_MONTHLY:"graphByMonth",SERIES_SALES_BY_DAY:"seriesGraphByDay",SERIES_SALES_BY_MONTH:"seriesGraphByMonth",SERIES_SALES_BY_BOOK:"seriesGraphByTitle",SUMMARY:"summary"};t.RANGE={sevenDay:{value:7,units:"day",defaultStartDateFromMaxEndDate:6},weekly:{value:7,units:"day",defaultStartDateFromMaxEndDate:6},thirtyDay:{value:30,units:"day",defaultStartDateFromMaxEndDate:30},quarterly:{value:2,units:"month",defaultStartDateFromMaxEndDate:2},semiAnnually:{value:5,units:"month",defaultStartDateFromMaxEndDate:5},annually:{value:11,units:"month",defaultStartDateFromMaxEndDate:11}};t.PERIOD_TYPES={DAILY:"daily",SEVEN_DAY:"sevenDay",WEEKLY:"weekly",MONTHLY:"monthly",THIRTY_DAY:"thirtyDay",QUARTERLY:"quarterly",SEMI_ANNUALLY:"semiAnnually",ANNUALLY:"annually"};t.BOOK_TYPES={ALL:"ALL",EBOOK:"EBOOK",PRINT:"SPB"};t.DAY_SELECTOR={TODAY:"today",YESTERDAY:"yesterday"};t.FILTER_CHOOSER_TYPES={ALL:"all",BOOK_TYPE:"bookType",PERIOD:"period"}},,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(44),n=o(a(16)),l=o(a(18));o(a(64)),function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(a(15));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this)))._allData=null,e._lineGraphData=null,e._mapData=null,e._allDoughnutData=null,e._purchasePreviewData=null,e._consumptionData=null,e._consumptionBarData=null,e._averageTime=null,e._bookPageVisitor=null,e._avarageCompletionRate=null,e._otherAuthorsData=null,e._barGraphData=null,e._bestBookData=null,e}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.EventEmitter),a=t,(n=[{key:"averageCompletionRate",value:function(){return this._averageCompletionRate}},{key:"searchData",value:function(){return this._searchData}},{key:"allData",value:function(){return this._allData}},{key:"LineGraphData",value:function(){return this._lineGraphData}},{key:"mapData",value:function(){return this._mapData}},{key:"allDoughnutData",value:function(){return this._allDoughnutData}},{key:"purchasePreviewData",value:function(){return this._purchasePreviewData}},{key:"consumptionData",value:function(){return this._consumptionData}},{key:"consumptionBarData",value:function(){return this._consumptionBarData}},{key:"averageTime",value:function(){return this._averageTime}},{key:"bookPageVisitor",value:function(){return this._bookPageVisitor}},{key:"otherAuthersData",value:function(){return this._otherAuthorsData}},{key:"barGraphData",value:function(){return this._barGraphData}},{key:"bestBookData",value:function(){return this._bestBookData}},{key:"handleActions",value:function(e){switch(e.type){case l.default.Project.LOAD_EAA_RESULT:this.onAllResultLoaded(e.args);break;case l.default.Project.LOAD_EAA_LINE_RESULT:this.onAllLineResultLoaded(e.args);break;case l.default.Project.LOAD_EAA_DOUGHNUT_RESULT:this.onDoughnutLoaded(e.args);break;case l.default.Project.LOAD_EAA_MAP_RESULT:this.mapLoaded(e.args);break;case l.default.Project.LOAD_EAA_CONSUMPTION_RESULT:this.consumptionLoaded(e.args);break;case l.default.Project.LOAD_SITEDATA_PURCHASEPREVIEW:this.purchasePreviewLoaded(e.args);break;case l.default.Project.LOAD_EAA_CONSUMPTION_BAR_RESULT:this.consumptionBarLoaded(e.args);break;case l.default.Project.AVERAGE_TIME_TO_OPEN:this.onAverageTimeToOpenLoaded(e.args);break;case l.default.Project.BOOK_PAGE_VISITOR_BY_DOMAIN:this.onBookPageVisitorLoaded(e.args);break;case l.default.Analytics.BOOK_COMPLETION_RATE_AVERAGE:this.onBookReadingCompletionDataLoaded(e.args);break;case l.default.Project.CUSTOMER_DATA_OTHER_AUTHORS:this.onCustomerDataOtherAuthorsLoaded(e.args);break;case l.default.Project.LOAD_BAR_GRAPH:this.onBarGraphResultLoaded(e.args);break;case l.default.Project.BEST_BOOK:this.onBestBookLoaded(e.args)}}},{key:"onAllResultLoaded",value:function(e){this._allData={result:e},this.emit(y)}},{key:"onAllLineResultLoaded",value:function(e){this._lineGraphData={result:e},this.emit(b)}},{key:"mapLoaded",value:function(e){this._mapData={result:e},this.emit(m)}},{key:"onDoughnutLoaded",value:function(e){this._allDoughnutData={result:e},this.emit(g)}},{key:"purchasePreviewLoaded",value:function(e){this._purchasePreviewData={result:e},this.emit(v)}},{key:"consumptionLoaded",value:function(e){this._consumptionData={result:e},this.emit(h)}},{key:"consumptionBarLoaded",value:function(e){this._consumptionBarData={result:e},this.emit(P)}},{key:"onAverageTimeToOpenLoaded",value:function(e){this._averageTime={result:e},this.emit(E)}},{key:"onBookPageVisitorLoaded",value:function(e){this._bookPageVisitor={result:e},this.emit(S)}},{key:"onBookReadingCompletionDataLoaded",value:function(e){this._averageCompletionRate={result:e},this.emit(k)}},{key:"onBarGraphResultLoaded",value:function(e){this._barGraphData={result:e},this.emit(O)}},{key:"onBestBookLoaded",value:function(e){this._bestBookData={result:e},this.emit(C)}},{key:"onCustomerDataOtherAuthorsLoaded",value:function(e){this._otherAuthorsData={result:e},this.emit(w)}},{key:"addMapListener",value:function(e){this.addListener(m,e)}},{key:"removeMapListener",value:function(e){this.removeListener(m,e)}},{key:"addDoughnutBooksResultLoadedListener",value:function(e){this.addListener(g,e)}},{key:"removeDoughnutBooksResultLoadedListener",value:function(e){this.removeListener(g,e)}},{key:"addConsumptionListener",value:function(e){this.addListener(h,e)}},{key:"removeConsumptionListener",value:function(e){this.removeListener(h,e)}},{key:"addResultLoadedListener",value:function(e){this.addListener(y,e)}},{key:"removeResultLoadedListener",value:function(e){this.removeListener(y,e)}},{key:"addLineGraphListener",value:function(e){this.addListener(b,e)}},{key:"removeLineGraphListener",value:function(e){this.removeListener(b,e)}},{key:"addPurchasePreviewLoadedListener",value:function(e){this.addListener(v,e)}},{key:"removePurchasePreviewLoadedListener",value:function(e){this.removeListener(v,e)}},{key:"addAverageTimeToOpenListener",value:function(e){this.addListener(E,e)}},{key:"removeAverageTimeToOpenListener",value:function(e){this.removeListener(E,e)}},{key:"addBookPageVisitorListener",value:function(e){this.addListener(S,e)}},{key:"removeBookPageVisitorListener",value:function(e){this.removeListener(S,e)}},{key:"addBookReadingCompletionLoadedListener",value:function(e){this.addListener(k,e)}},{key:"removeBookReadingCompletionLoadedListener",value:function(e){this.removeListener(k,e)}},{key:"addConsumptionBarListener",value:function(e){this.addListener(P,e)}},{key:"removeConsumptionBarListener",value:function(e){this.removeListener(P,e)}},{key:"addCustomerDataForOtherAuthorsListener",value:function(e){this.addListener(w,e)}},{key:"removeCustomerDataForOtherAuthorsListener",value:function(e){this.removeListener(w,e)}},{key:"addBarGraphLoadedListener",value:function(e){this.addListener(O,e)}},{key:"removeBarGraphLoadedListener",value:function(e){this.removeListener(O,e)}},{key:"addBestBookLoadedListener",value:function(e){this.addListener(C,e)}},{key:"removeBestBookLoadedListener",value:function(e){this.removeListener(C,e)}}])&&s(a.prototype,n),o&&s(a,o),t}());f.setMaxListeners(0),f.dispatchToken=n.default.register(f.handleActions.bind(f));var p=f;t.default=p;var m="mapResultLoaded",h="consumptionResultLoaded",y="allResultLoaded",b="allLineResultLoaded",g="doughnutresultloaded",v="purchasePreviewLoaded",E="averageTimeToOpen",S="bookPageVisitor",k="bookCompletionRateLoaded",P="consumptionBarResultLoaded",w="customerDataOtherAuthors",O="barGraphLoaded",C="bestBookLoaded"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.provideContributorAccess=function(e){o.provideContributorAccess(e,function(e){r.default.dispatch({type:n.default.Project.ADD_CONTRIBUTOR,args:e})})},t.updateContributorAccess=function(e){o.updateContributorAccess(e,function(e){r.default.dispatch({type:n.default.Project.UPDATE_CONTRIBUTOR,args:e})})},t.getContributorDetails=function(e){o.getContributorDetails(e,function(e){r.default.dispatch({type:n.default.Project.GET_CONTRIBUTOR,args:e})})},t.getAccessEnumValue=function(){o.getAccessEnumValue(function(e){r.default.dispatch({type:n.default.Project.CONTRIBUTOR_ACCESS_LIST,args:e})})},t.getEaaSubscription=function(){o.getEaaSubscription(function(e){r.default.dispatch({type:n.default.Project.EAA_SUBSCRIPTION,args:e})})},t.getEaaSubscriptionPlan=function(){o.getEaaSubscriptionPlan(function(e){r.default.dispatch({type:n.default.Project.EAA_SUBSCRIPTION_PLAN,args:e})})},t.deleteContributor=function(e){o.deleteContributor(e,function(e){r.default.dispatch({type:n.default.Project.DELETE_CONTRIBUTOR,args:e})})};var n=l(a(18)),o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(1097)),r=l(a(16));function l(e){return e&&e.__esModule?e:{default:e}}},,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(13)),l=n(a(0)),i=n(a(1));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,l.default.Component),a=t,(n=[{key:"componentDidMount",value:function(){(0,r.default)('[data-toggle="popover"]').popover()}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.container,n=(e.info,e.isHtml),o=e.placement,r=e.text;e.toggle;return l.default.createElement("a",{"aria-label":"tooltip",className:(0,i.default)("tooltip-component",t),"data-container":a||"body","data-content":r,"data-html":n||!1,"data-placement":o||"top","data-toggle":"popover","data-trigger":"focus",role:"button",tabIndex:"0"})}}])&&s(a.prototype,n),o&&s(a,o),t}();(t.default=f).propTypes={text:l.default.PropTypes.string.isRequired}},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Assets=t.Promote=t.Summary=t.Series=t.Search=t.Coupon=t.Base=void 0;t.Base="projects";t.Coupon="coupon";t.Search="search";t.Series="series";t.Summary="summary";t.Promote="promote-book";t.Assets="promote-book/design"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_LABELS=t.FILTER_LABELS=t.STATUS_PARAMS=t.FILTER_PARAMS=t.SORT_PARAMS=void 0;t.SORT_PARAMS={ascending:"asc",descending:"desc",newest:"newest",oldest:"oldest",default:"newest"};t.FILTER_PARAMS={all:"ALL",eBook:"EBOOK",print:"SPB",personal:"POD",default:"ALL"};t.STATUS_PARAMS={all:"ALL",inProgress:"NEW",inReview:"PROCESSING_DROPSHIP",readyToOrder:"DROPSHIP_READY",publishing:"PROCESSING_ONSALE",onSale:"ONSALE",editing:"EDITING",takingOffSale:"PROCESSING_OFFSALE",offSale:"OFFSALE",needsAttention:"ERROR",correcting:"CORRECTING",recentlyDeleted:"RECENTLY_DELETED",default:"ALL"};t.FILTER_LABELS={ALL:"All",EBOOK:"eBooks",SPB:"Print Books",POD:"Personal Print Books"};t.STATUS_LABELS={ALL:"All",NEW:"In Progress",PROCESSING_DROPSHIP:"In Review",DROPSHIP_READY:"Ready to Order",PROCESSING_ONSALE:"Publishing",ONSALE:"On Sale",EDITING:"Editing",PROCESSING_OFFSALE:"Taking Off Sale",OFFSALE:"Off Sale",ERROR:"Needs Attention",CORRECTING:"Correcting",RECENTLY_DELETED:"Recently Deleted"}},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reset=function(){r.default.dispatch({type:l.default.ProjectGroups.RESET_PROJECT_GROUPS,args:{}})},t.query=function(e,t,a){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=4<arguments.length?arguments[4]:void 0;i.queryProjectGroups(e,t,a,n,o,function(e){r.default.dispatch({type:l.default.ProjectGroups.CHANGE_PROJECT_GROUPS,args:e})})},t.loadExistingTitles=function(){i.loadExistingTitles(function(e){r.default.dispatch({type:l.default.ProjectGroups.LOAD_EXISTING_TITLES,args:{titles:e}})})},t.clone=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]&&arguments[2];e.preOrder=a&&e.preOrder,i.clone(e,function(e){r.default.dispatch({type:l.default.ProjectGroups.CLONE_PROJECT_IN_GROUP,args:{project:e,navigate:t}})})},t.setSaleStatus=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]&&arguments[2];i.setSaleStatus(e,t,!1,a,function(e){e.shouldRefresh=!0,r.default.dispatch({type:l.default.Project.REFRESH_PROJECT,args:{project:e}})},function(e){return r.default.dispatch({type:l.default.Project.SET_SALE_STATUS_ERROR,args:{response:e}}),!0})},t.addProjectToCart=function(t){n.addProject(t,function(e){r.default.dispatch({type:l.default.Cart.ADD_PROJECT,args:{projectId:t,cart:e}}),i.queryGroupedProject(t,function(e){r.default.dispatch({type:l.default.Project.REFRESH_PROJECT,args:{project:e}})})})},t.toggleProjects=function(e){r.default.dispatch({type:l.default.ProjectGroups.TOGGLE,args:{toggle:e}})};var r=s(a(16)),l=s(a(18)),i=o(a(518)),n=o(a(497));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=v(a(109)),o=v(a(189)),r=v(a(530)),l=v(a(33)),i=v(a(208)),s=v(a(338)),u=v(a(1083)),c=v(a(532)),d=v(a(533)),f=v(a(249)),p=v(a(534)),m=v(a(83)),h=v(a(122)),y=v(a(1084)),b=v(a(339)),g=v(a(1085));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}e.exports={AnalyticsPaths:n,AuthenticationPaths:o,AuthorPaths:r,BuildABookPaths:l,CartPaths:i,CheckoutPaths:s,HtmlCheatSheetPaths:u,LandingPagesPaths:c,OrderConfirmationPaths:d,OrderHistoryPaths:f,ProfilePaths:p,ProjectPaths:m,SalesReportingPaths:h,UtilitiesPaths:y,VendorPaths:b,ManageContributorsPaths:g}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageAnalyticsSubscription=t.SiteDataEntireList=t.ReadingDataEntireList=t.EntireList=t.SiteData=t.ReadingData=t.Base=void 0;t.Base="analytics";t.ReadingData="reading-data";t.SiteData="site-data";t.EntireList="new-purchasers";t.ReadingDataEntireList="time-to-open";t.SiteDataEntireList="page-visits-by-domain";t.ManageAnalyticsSubscription="manage"},,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Weekly=t.PreOrder=t.Monthly=t.CustomDate=t.Reports=t.Base=void 0;t.Base="sales";t.Reports="reports";t.CustomDate="customDate";t.Monthly="salesByMonth";t.PreOrder="preOrder";t.Weekly="salesByWeek"},,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(44),n=o(a(16)),l=o(a(18));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this)))._contributorData=null,e._accessEnumList=null,e._contributorDetails=null,e._contributorUpdated=null,e._contributorDeleted=null,e._eaaSubscription=null,e._eaaSubscriptionPlan=null,e}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.EventEmitter),a=t,(n=[{key:"eaaSubscription",value:function(){return this._eaaSubscription}},{key:"eaaSubscriptionPlan",value:function(){return this._eaaSubscriptionPlan}},{key:"contributorDetails",value:function(){return this._contributorDetails}},{key:"contributorData",value:function(){return this._contributorData}},{key:"contributorUpdated",value:function(){return this._contributorUpdated}},{key:"contributorDeleted",value:function(){return this._contributorDeleted}},{key:"accessEnumList",value:function(){return this._accessEnumList}},{key:"handleActions",value:function(e){switch(e.type){case l.default.Project.ADD_CONTRIBUTOR:this.onContributorAdded(e.args);break;case l.default.Project.UPDATE_CONTRIBUTOR:this.onContributorUpdated(e.args);break;case l.default.Project.DELETE_CONTRIBUTOR:this.onContributorDeleted(e.args);break;case l.default.Project.GET_CONTRIBUTOR:this.onGettingContributor(e.args);break;case l.default.Project.CONTRIBUTOR_ACCESS_LIST:this.getAccessEnumList(e.args);break;case l.default.Project.EAA_SUBSCRIPTION:this.onEaaSubscription(e.args);break;case l.default.Project.EAA_SUBSCRIPTION_PLAN:this.onEaaSubscriptionPlan(e.args)}}},{key:"onGettingContributor",value:function(e){this._contributorDetails={result:e},this.emit(y)}},{key:"onContributorAdded",value:function(e){this._contributorData={result:e},this.emit(h)}},{key:"onContributorUpdated",value:function(e){this._contributorUpdated={result:e},this.emit(g)}},{key:"onContributorDeleted",value:function(e){this._contributorDeleted={result:e},this.emit(b)}},{key:"getAccessEnumList",value:function(e){this._accessEnumList={result:e},this.emit(m)}},{key:"onEaaSubscription",value:function(e){this._eaaSubscription={result:e},this.emit(v)}},{key:"onEaaSubscriptionPlan",value:function(e){this._eaaSubscriptionPlan={result:e},this.emit(E)}},{key:"addGetContributorAddLoadedListener",value:function(e){this.addListener(y,e)}},{key:"removeGetContributorAddLoadedListener",value:function(e){this.removeListener(y,e)}},{key:"addContributorDeletedLoadedListener",value:function(e){this.addListener(b,e)}},{key:"removeContributorDeletedLoadedListener",value:function(e){this.removeListener(b,e)}},{key:"addContributorUpdatedLoadedListener",value:function(e){this.addListener(g,e)}},{key:"removeContributorUpdatedLoadedListener",value:function(e){this.removeListener(g,e)}},{key:"addContributorAddLoadedListener",value:function(e){this.addListener(h,e)}},{key:"removeContributorAddLoadedListener",value:function(e){this.removeListener(h,e)}},{key:"addAcessEnumListLoadedListener",value:function(e){this.addListener(m,e)}},{key:"removeAcessEnumListLoadedListener",value:function(e){this.removeListener(m,e)}},{key:"addEaaSubscriptionListener",value:function(e){this.addListener(v,e)}},{key:"removeEaaSubscriptionListener",value:function(e){this.removeListener(v,e)}},{key:"addEaaSubscriptionPlanListener",value:function(e){this.addListener(E,e)}},{key:"removeEaaSubscriptionPlanListener",value:function(e){this.removeListener(E,e)}}])&&s(a.prototype,n),o&&s(a,o),t}());f.setMaxListeners(0),f.dispatchToken=n.default.register(f.handleActions.bind(f));var p=f;t.default=p;var m="accessEnumList",h="contributorAdded",y="contributorDetails",b="contributorDeleted",g="contributorUpdated",v="eaaSubscription",E="eaaSubscriptionPlan"},,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(44),l=n(a(16)),i=n(a(18)),s=n(a(8)),c=(n(a(52)),n(a(519)));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m="projectGroupsChanged",h="projectGroupsProjectDeleted",y="projectSearchProjectDeleted",b="existingTitlesLoaded",g="toggleProjects",v=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=d(this,f(t).call(this)))._totalCount=null,e._totalProjectsCount=null,e._totalSeriesCount=null,e._projectGroups=null,e._cloneCandidate=null,e._warnings=null,e._deletedProjectCount=null,e}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r.EventEmitter),a=t,(n=[{key:"addProjectGroupsChangedListener",value:function(e){this.addListener(m,e)}},{key:"removeProjectGroupsChangedListener",value:function(e){this.removeListener(m,e)}},{key:"addProjectGroupsProjectDeletedFromGroupListener",value:function(e){this.addListener(h,e)}},{key:"removeProjectGroupsProjectDeletedFromGroupListener",value:function(e){this.removeListener(h,e)}},{key:"addProjectSearchProjectDeletedFromGroupListener",value:function(e){this.addListener(y,e)}},{key:"removeProjectSearchProjectDeletedFromGroupListener",value:function(e){this.removeListener(y,e)}},{key:"addProjectGroupsToggledListener",value:function(e){this.addListener(g,e)}},{key:"removeProjectGroupsToggledListener",value:function(e){this.removeListener(g,e)}},{key:"addExistingTitlesLoadedListener",value:function(e){this.addListener(b,e)}},{key:"removeExistingTitlesLoadedListener",value:function(e){this.removeListener(b,e)}},{key:"findProjectById",value:function(t){var a=null;return this._projectGroups.forEach(function(e){e.projects.forEach(function(e){e.id===t&&(a=e)})}),a}},{key:"handleActions",value:function(e){switch(e.type){case i.default.ProjectGroups.RESET_PROJECT_GROUPS:this.onResetProjectGroups(e.args);break;case i.default.ProjectGroups.CHANGE_PROJECT_GROUPS:this.onChangeProjectGroups(e.args);break;case i.default.ProjectGroups.LOAD_EXISTING_TITLES:this.onLoadExistingTitles(e.args);break;case i.default.Project.DELETE_PROJECT:l.default.waitFor([s.default.dispatchToken]),this.onProjectDeleted(e.args);break;case i.default.Project.DELETE_SEARCH_PROJECT:l.default.waitFor([s.default.dispatchToken]),this.onProjectSearchDeleted(e.args);break;case i.default.Project.REFRESH_PROJECT:this.onRefreshProject(e.args);break;case i.default.Project.TOGGLE_PROJECTS:this.emit(g,e.args)}}},{key:"onResetProjectGroups",value:function(e){this._totalCount=null,this._totalProjectsCount=null,this._deletedProjectCount=null,this._projectGroups=null,this._warnings=null}},{key:"onChangeProjectGroups",value:function(e){this._totalCount=e.totalCount,e.series?(this._projectGroups=e.series,this._totalSeriesCount=e.totalCount):(this._projectGroups=e.projectGroups,this._warnings=e.warnings),this._totalProjectsCount=e.totalProjectsCount,this._deletedProjectCount=e.deletedProjectCount,this.emit(m)}},{key:"onRefreshProject",value:function(t){var e=t.project;if(this._projectGroups&&e)if(this._projectGroups[0]instanceof c.default)for(var a=0;a<this._projectGroups.length;a++){var n=this._projectGroups[a],o=n.projects.findIndex(function(e){return e.id===t.project.id});if(0<=o)return n.projects.splice(o,1,t.project),void this.emit(m)}else for(var r=0;r<this.projectGroups.length;r++)for(var l=this._projectGroups[r],i=0;i<l.seriesNumbers.length;i++){var s=l.seriesNumbers[i].projects,u=s.findIndex(function(e){return e.id===t.project.id});if(0<=u)return s.splice(u,1,t.project),void this.emit(m)}}},{key:"onProjectDeleted",value:function(e){this.emit(h)}},{key:"onProjectSearchDeleted",value:function(e){this.emit(y)}},{key:"onLoadExistingTitles",value:function(e){this.emit(b,e.titles)}},{key:"totalCount",get:function(){return this._totalCount}},{key:"totalProjectsCount",get:function(){return this._totalProjectsCount}},{key:"deletedProjectCount",get:function(){return this._deletedProjectCount}},{key:"totalSeriesCount",get:function(){return this._totalSeriesCount}},{key:"projectGroups",get:function(){return this._projectGroups}},{key:"warnings",get:function(){return this._warnings}}])&&u(a.prototype,n),o&&u(a,o),t}());v.dispatchToken=l.default.register(v.handleActions.bind(v));var E=v;t.default=E},,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n},l=a(2);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"upload-button"},r.default.createElement("div",{className:"centered"},r.default.createElement(l.Link,{to:this.props.url,className:"btn btn-progress",type:"button"},"Skip to Upload Your ",this.props.plural?"Files":"File")))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(n(a(1)),n(a(1495)));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e,t=this;return e=this.props.options.map(function(e){return r.default.createElement(l.default,{key:e.key,options:e,selected:t.props.selected})}),r.default.createElement("div",null,e)}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCustomDateSalesReportPath=function(e,t,a,n,o,r,l,i){var s=d(u.CustomDate);e&&(s+="&fullSpan=true");t&&(s+=i?"&f_searchText=series:"+t+encodeURI("|")+i:"&f_searchText="+t);r&&(s+="&sort="+r+"&descending=true");l&&(s+="&f_groupByTitle=true");return s+c(a,n,o)},t.getPreOrderReportPath=function(e,t,a){var n=d(u.PreOrder);return(n+="&drilldown=Y")+"&f_title="+e+"&f_ean="+a+"&f_fromDate="+t+"&p_f_fromDate="+t},t.getSalesReportTypePath=d,t.getSummaryUrl=function(e){return"/"+n.Base+"/"+e+"/"+n.Summary},t.getWeeklySalesReportPath=t.getMonthlySalesReportPath=void 0;var n=o(a(33)),u=o(a(122));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}var c=function(e,t,a){var n="";return e&&(n+="&f_format="+e),t&&a&&(n+="&f_fromDate="+t+"&f_toDate="+a),n};function d(e){return"/"+u.Base+"/"+u.Reports+"?reportType="+e}t.getMonthlySalesReportPath=function(e,t,a,n){var o=d(u.Monthly),r="&p_f_year="+n;return(o+="&drilldown=Y")+c(e,t,a)+r};t.getWeeklySalesReportPath=function(e,t,a,n){var o=d(u.Weekly),r="&p_f_year="+n;return(o+="&drilldown=Y")+c(e,t,a)+r}},,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignIn=t.ResetPassword=t.Referral=t.Contributor=t.ForgotPassword=t.CreateAccount=void 0;t.CreateAccount="create-account";t.ForgotPassword="forgot-password";t.Contributor="Contributor";t.Referral="referral";t.ResetPassword="reset-password";t.SignIn="sign-in"},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(13)),s=o(a(34)),u=(o(a(4)),n(a(339))),c=n(a(146)),d=(n(a(48)),o(a(45)));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={isVendorIncomplete:null,isDismissed:!1,citizen:d.default.loaded?d.default.citizen:null,paymentObj:!1},t.scrollToMessage=t.scrollToMessage.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){if(d.default.vendorFormDetail){var e=!!d.default.vendorFormDetail.payment&&d.default.vendorFormDetail.payment;this.setState({paymentObj:e})}}},{key:"componentDidMount",value:function(){if(d.default.vendorFormDetail){var e=!!d.default.vendorFormDetail.payment&&d.default.vendorFormDetail.payment;"Approved"!=e.wFileStatus&&"Submitted (Pending Approval)"!=e.wFileStatus||(0,i.default)(".vendor-notifier").attr("style","display: none")}}},{key:"scrollToMessage",value:function(){window.scrollTo(0,2100)}},{key:"render",value:function(){return!1!==this.state.paymentObj&&"Update Required"==this.state.paymentObj.wFileStatus||this.props.status===c.AccountStatus.NEW||this.props.status===c.AccountStatus.SALES_EXISTING||this.props.status===c.AccountStatus.EXISTING?(this.props.status==c.AccountStatus.NEW&&(e=r.default.createElement("span",null,"Your vendor registration is incomplete. To sell a book you must be a verified vendor. ",r.default.createElement(l.Link,{to:"/"+u.Base},r.default.createElement("span",{onClick:this.scrollToMessage},"Complete Vendor Registration")))),this.props.status==c.AccountStatus.EXISTING&&(e=r.default.createElement("span",null,"Re-submit ","yes"===d.default.citizen?"W-9":"W-8"," form due to your recent personal information update. Expect potential delays in processing based on volume. ",r.default.createElement(l.Link,{to:"/"+u.Base},r.default.createElement("span",{onClick:this.scrollToMessage},"Update tax forms now.")))),this.props.status==c.AccountStatus.SALES_EXISTING&&(e="yes"===d.default.citizen?r.default.createElement("span",null,"Further payments cannot be processed until W9 form is resubmitted due to your recent personal information update. ",r.default.createElement(l.Link,{to:"/"+u.Base},r.default.createElement("span",{className:"next-line",onClick:this.scrollToMessage},"Update tax forms now."))):r.default.createElement("span",null,"Further payments cannot be processed until W8 form is resubmitted due to your recent personal information update. ",r.default.createElement(l.Link,{to:"/"+u.Base},r.default.createElement("span",{className:"next-line",onClick:this.scrollToMessage},"Update tax forms now.")))),!1!==this.state.paymentObj&&"Update Required"==this.state.paymentObj.wFileStatus&&(e="yes"===d.default.citizen?r.default.createElement("span",null,"Your Form W-9 has expired. Re-submit to maintain your reduced rate of tax withholding. Expect potential delays in processing based on volume ",r.default.createElement(l.Link,{to:"/"+u.Base},r.default.createElement("span",{className:"next-line",onClick:this.scrollToMessage},"Update tax forms now."))):r.default.createElement("span",null,"Your Form W-8 has expired or is about to expire. Re-submit to maintain your reduced rate of tax withholding. Expect potential delays in processing based on volume. ",r.default.createElement(l.Link,{to:"/"+u.Base},r.default.createElement("span",{className:"next-line",onClick:this.scrollToMessage},"Update tax forms now.")))),r.default.createElement("div",null,r.default.createElement(s.default,{messages:[e],type:"error-white vendor-notifier",onClose:this.onErrorAlertClosed}))):null;var e}}])&&p(t.prototype,a),n&&p(t,n),o}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadChart=function(e,t,a){var n=u++;return l.loadChart(e,t,a,function(e){o.default.dispatch({type:r.default.SalesReporting.LOAD_CHART,args:{requestId:n,chartConfig:e}})}),n},t.loadReportMetadata=function(){l.loadReportMetadata(function(e){o.default.dispatch({type:r.default.SalesReporting.LOAD_REPORT_METADATA,args:{metadata:e}})})},t.showCouponColumnHover=function(){o.default.dispatch({type:r.default.SalesReporting.HOVERING_COUPON_SALE})},t.loadReportData=t.clearReportMetadata=void 0;var o=s(a(16)),r=s(a(18)),l=n(a(1643)),i=n(a(57));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}t.clearReportMetadata=function(){o.default.dispatch({type:r.default.SalesReporting.CLEAR_REPORT_METADATA})};t.loadReportData=function(t,e){var a=u++,n=t;t===i.REPORT_TYPES.GRAPH_THIRTY_DAY&&(n=i.REPORT_TYPES.GRAPH_DAILY);return l.loadReportData(n,e,function(e){o.default.dispatch({type:r.default.SalesReporting.LOAD_REPORT_DATA,args:{requestId:a,reportType:t,data:e}})}),a};var u=1},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(22));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=u(this,c(a).call(this,e))).state={data:e.data,includePaymentId:e.includePaymentId,includeUnitsSold:e.includeUnitsSold},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,r.default.Component),t=a,(n=[{key:"componentWillReceiveProps",value:function(e){e.data&&e.data!==this.props.data&&this.setState({data:e.data,includePaymentId:e.includePaymentId,includeUnitsSold:e.includeUnitsSold})}},{key:"render",value:function(){var e=this.state.data;return e?r.default.createElement("div",{className:(0,l.default)("report-totals",this.props.className)},this.state.includeUnitsSold&&r.default.createElement("div",{className:"report-total"},r.default.createElement("span",{className:"total-label"},"TOTAL PAID UNITS"),"Â Â ",r.default.createElement("span",{className:"total-value"},i.formatWithCommas(e.netPaidUnitsSold))),this.state.includeUnitsSold&&r.default.createElement("div",{className:"separator"},"|"),this.state.includeUnitsSold&&r.default.createElement("div",{className:"report-total"},r.default.createElement("span",{className:"total-label"},"TOTAL FREE UNITS"),"Â Â ",r.default.createElement("span",{className:"total-value"},i.formatWithCommas(e.netFreeUnitsSold))),this.state.includeUnitsSold&&r.default.createElement("div",{className:"separator"},"|"),r.default.createElement("div",{className:"report-total"},r.default.createElement("span",{className:"total-label"},"TOTAL ROYALTY"),"Â Â ",r.default.createElement("span",{className:"total-value"},i.formatCurrency(parseFloat(e.netRoyalty),e.royaltyCurrency))),this.state.includePaymentId&&r.default.createElement("div",{className:"separator"},"|"),this.state.includePaymentId&&r.default.createElement("div",{className:"report-total"},r.default.createElement("span",{className:"total-label"},"PAYMENT ID"),"Â Â ",r.default.createElement("span",{className:"total-value"},e.paymentId))):null}}])&&s(t.prototype,n),o&&s(t,o),a}();t.default=f},,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forgotPasswordTokenCheck=function(e){n.forgotPasswordTokenCheck(e,function(e){i.default.dispatch({type:s.default.AuthenticatedUser.FORGOT_PASSWORD_TOKEN_CHECK,args:{data:e}})})},t.forgotPasswordUpdate=function(e){n.forgotPasswordUpdate(e,function(e){i.default.dispatch({type:s.default.AuthenticatedUser.FORGOT_PASSWORD_UPDATE,args:{data:e}})})},t.forgotPassword=function(e){n.forgotPassword(e,function(e){i.default.dispatch({type:s.default.AuthenticatedUser.FORGOT_PASSWORD,args:{data:e}})})},t.forgotPasswordQuestion=function(e){return m.apply(this,arguments)},t.forgotPasswordAnswerCheck=function(e,t,a){return h.apply(this,arguments)},t.createAccount=function(e,a){n.createAccount(e,function(n){var o=localStorage.getItem("authorShareKey");if(o&&n.user&&!n.errors){var e,t=a.authorFirstName+" "+a.authorLastName+"'s";e=(a.authorFirstName,a.authorFirstName),l.showConfirmationModal(" ","Would you like to stay in to your new account or sign in to "+t+" account?","Sign In As "+e,"Stay In My New Account",function(e,t){if(e){var a=new Date;return a.setTime(a.getTime()+864e5),r.logoutUser(1),void setTimeout(function(){c.browserHistory.replace("/sign-in?authorShareKey="+o)},3e3)}localStorage.removeItem("authorShareKey"),i.default.dispatch({type:s.default.AuthenticatedUser.USER_ACCOUNT_CREATE,args:{data:n}})})}else i.default.dispatch({type:s.default.AuthenticatedUser.USER_ACCOUNT_CREATE,args:{data:n}})})},t.getContributorDetails=function(e){n.getContributorDetails(e,function(e){i.default.dispatch({type:s.default.AuthenticatedUser.GET_AUTHOR_PROFILE,args:{data:e}})})},t.signIn=function(e){return y.apply(this,arguments)};var i=d(a(16)),s=d(a(18)),n=o(a(1081)),r=o(a(26)),u=o(a(531)),l=o(a(10)),c=(d(a(82)),a(2));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,a,n,o,r,l){try{var i=e[r](l),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,o)}function p(i){return function(){var e=this,l=arguments;return new Promise(function(t,a){var n=i.apply(e,l);function o(e){f(n,t,a,o,r,"next",e)}function r(e){f(n,t,a,o,r,"throw",e)}o(void 0)})}}function m(){return(m=p(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.forgotPasswordQuestion(t);case 3:a=e.sent,i.default.dispatch({type:s.default.AuthenticatedUser.FORGOT_PASSWORD_QUESTION,args:{data:a}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),i.default.dispatch({type:s.default.AuthenticatedUser.FORGOT_PASSWORD_QUESTION,args:{data:{question:null}}});case 10:case"end":return e.stop()}},e,this,[[0,7]])}))).apply(this,arguments)}function h(){return(h=p(regeneratorRuntime.mark(function e(t,a,n){var o,r,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){i.default.dispatch({type:s.default.AuthenticatedUser.FORGOT_PASSWORD_ANSWER_CHECK,args:{data:{token:null,valid:!1,message:e.errors}}})},e.prev=1,r={email:t,question:a,answer:n},e.next=5,u.forgotPasswordAnswerCheck(r);case 5:(l=e.sent).errors&&0<l.errors.length?o(l):i.default.dispatch({type:s.default.AuthenticatedUser.FORGOT_PASSWORD_ANSWER_CHECK,args:{data:{token:l.token,valid:!0}}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o(e.t0);case 12:case"end":return e.stop()}},e,this,[[1,9]])}))).apply(this,arguments)}function y(){return(y=p(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.signIn(t);case 3:(a=e.sent).user&&a.errors,i.default.dispatch({type:s.default.AuthenticatedUser.LOAD_USER,args:{data:a}}),a.errors&&a.errors.warnings&&(n=a.errors.warnings,!0,i.default.dispatch({type:s.default.Modal.SHOW_MODAL,modalType:"InformationModal",params:{content:n,isHtml:!0},callback:null})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i.default.dispatch({type:s.default.AuthenticatedUser.LOAD_USER,args:{data:e.t0}});case 12:case"end":return e.stop()}},e,this,[[0,9]])}))).apply(this,arguments)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0;t.Base="cart"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("svg",{style:{height:"0"}},r.default.createElement("defs",null,this.props.children))}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("linearGradient",{id:this.props.id,x1:this.props.x1,y1:this.props.y1,x2:this.props.x2,y2:this.props.y2},this.props.stopOffsets.map(function(e,t){return r.default.createElement("stop",{key:"offset-"+t,offset:e})}))}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAddress=function(n,a){function o(e,t){a?a({canceled:e,address:t}):l.default.dispatch({type:s.default.AddressValidation.ADDRESS_VALIDATION,args:{canceled:e,address:t}})}if("840"===n.country||"US"===n.country)return void o(!1,null);i.validateAddress(n,function(e){var t=null,a=null;if(e.suggestedAddresses&&e.suggestedAddresses.address&&0<e.suggestedAddresses.address.length&&(t=e.suggestedAddresses.address),"1"===e.statusCode||"2"===e.statusCode){if(!t)return void o(!1,null);if(1===t.length&&c(t[0].addressLine1,n.addressLine1)&&c(t[0].addressLine2,n.addressLine2)&&c(t[0].city,n.city)&&c(t[0].state,n.state)&&c(t[0].zip,n.zip))return void o(!1,null);a=1===t.length?"The following address may be more accurate.":"One of the following addresses may be more accurate."}else t=(a="3"===e.statusCode?"The address may require a Floor, Apt # or Suite #.":"4"===e.statusCode?"The street number could not be found.":"5"===e.statusCode?"The address is not unique. If possible, please provide more information.":"0"===e.statusCode||"6"===e.statusCode?"The address seems to be invalid. If possible, please correct.":"However, an error occurred with the USPS service. If your address is correct you can choose to continue with it.",null);u.showAddressValidationModal(a,t,n,function(e,t){e?o(!1,t):o(!0,null)})})},t.validateAddressAtgStyle=function(o,a){function r(e,t){a?a({canceled:e,address:t}):l.default.dispatch({type:s.default.AddressValidation.ADDRESS_VALIDATION,args:{canceled:e,address:t}})}if("840"!==o.country&&"US"!==o.country)return void r(!1,null);i.validateAddressAtgStyle(o,function(e){var t=[],a=null,n=null;if((n=e.verifyAddress).suggestions&&0<n.suggestions.length&&(t=n.suggestions),"Verified"===n.verificationType||"InteractionRequired"===n.verificationType){if(!(0<t.length))return void r(!1,null);if(1===t.length&&c(t[0].address1,o.address1)&&c(t[0].address2,o.address2)&&c(t[0].city,o.city)&&c(t[0].state,o.state)&&c(t[0].postalCode,o.postalCode))return void r(!1,null);a=1===t.length?"The following address may be more accurate.":"One of the following addresses may be more accurate."}else"StreetPartial"===n.verificationType||"PremisesPartial"===n.verificationType?a="The address may require a Floor, Apt # or Suite #.":"Multiple"===n.verificationType?a="The address is not unique. If possible, please provide more information.":t=(a="No matches"===n.verificationType?"The address seems to be invalid. If possible, please correct.":"However, an error occurred with the USPS service. If your address is correct you can choose to continue with it.",null);u.showAddressValidationModal(a,t,o,function(e,t){e?r(!1,t):r(!0,null)})})};var l=o(a(16)),i=n(a(1124)),s=o(a(18)),u=n(a(10));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return!e&&!t||!(!e||!t)&&e===t}},,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(0)),l=(n=a(1292))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(d);var f=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s(this,u(a).call(this,e)))._handlerByEvent=new Map,t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,r.Component),t=a,(n=[{key:"componentDidMount",value:function(){var n=this;l.default.initialize(this._container,this.props.option),Object.keys(d).forEach(function(e){var t=n.props[d[e]];if(t){var a=function(){return t(n._container)};n._handlerByEvent.set(e,a),n._container.addEventListener(e,a,!1)}})}},{key:"componentWillUnmount",value:function(){var a=this;Object.keys(this._handlerByEvent).forEach(function(e,t){a._container.removeEventListener(t,e,!1)}),this._handlerByEvent.clear(),l.default.destroy(this._container)}},{key:"setScrollTop",value:function(e){return!!this._container&&(this._container.scrollTop=e,l.default.update(this._container),!0)}},{key:"setScrollLeft",value:function(e){return!!this._container&&(this._container.scrollLeft=e,l.default.update(this._container),!0)}},{key:"render",value:function(){var t=this,e=this.props.children,a=window.innerHeight-300;return r.default.createElement("div",{className:"scrollbar-container",style:{maxHeight:a},ref:function(e){t._container=e}},e)}}])&&i(t.prototype,n),o&&i(t,o),a}();(t.default=f).defaultProps={option:void 0,onScrollY:void 0,onScrollX:void 0,onScrollUp:void 0,onScrollDown:void 0,onScrollLeft:void 0,onScrollRight:void 0,onYReachStart:void 0,onYReachEnd:void 0,onXReachStart:void 0,onXReachEnd:void 0},f.propTypes={children:r.PropTypes.node.isRequired,option:r.PropTypes.object,onScrollY:r.PropTypes.func,onScrollX:r.PropTypes.func,onScrollUp:r.PropTypes.func,onScrollDown:r.PropTypes.func,onScrollLeft:r.PropTypes.func,onScrollRight:r.PropTypes.func,onYReachStart:r.PropTypes.func,onYReachEnd:r.PropTypes.func,onXReachStart:r.PropTypes.func,onXReachEnd:r.PropTypes.func}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(8)),i=n(a(14)),s=n(a(10));n(a(15)),o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={isEBookPreviewReady:!1,hasEBookPreviewFailed:!1,eBookPreviewUrl:"",cacheBusta:(new Date).getTime()},t.onPreviewLoaded=t.onPreviewLoaded.bind(p(p(t))),t.onEBookPreviewFailed=t.onEBookPreviewFailed.bind(p(p(t))),t.onEBookPreviewReady=t.onEBookPreviewReady.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){l.default.addPreviewReadyListener(this.onEBookPreviewReady),l.default.addPreviewFailedListener(this.onEBookPreviewFailed)}},{key:"componentWillUnmount",value:function(){l.default.removePreviewReadyListener(this.onEBookPreviewReady),l.default.removePreviewFailedListener(this.onEBookPreviewFailed)}},{key:"componentDidMount",value:function(){var e=l.default.project();e.isEBook&&(this.props.sample?i.previewEBookSample(e):i.previewEBook(e))}},{key:"onPreviewLoaded",value:function(){this.props.onLoaded&&this.props.onLoaded()}},{key:"onEBookPreviewReady",value:function(e){var t=this.props.XUserId,a=e.url+"&X-USER-ID="+t;this.setState({isEBookPreviewReady:!0,hasEBookPreviewFailed:!1,eBookPreviewUrl:a})}},{key:"onEBookPreviewFailed",value:function(e){var n=this;this.setState({hasEBookPreviewFailed:!0,reason:e.failReason}),setTimeout(function(){s.showEBookPreviewRefreshModal(function(e,t){if(e){var a=l.default.project();t?n.props.sample?i.previewEBookSample(a,!0):i.previewEBook(a,!0):(n.props.sample?window.open("/api/project/"+a.id+"/download/sample?t="+n.state.cacheBusta):window.open("/api/project/"+a.id+"/download/interior?t="+n.state.cacheBusta),n.onPreviewLoaded())}})},0)}},{key:"render",value:function(){if(!l.default.project().isEBook)return r.default.createElement("div",{className:"no-viewer-message"},"We are unable to display your PDF proof.",r.default.createElement("br",null),"Please download your PDF to review your proof before approving.");if(this.state.hasEBookPreviewFailed)return null;var e=null,t="localhost"==location.hostname?"https://press-dev.barnesandnoble.com"+this.state.eBookPreviewUrl:this.state.eBookPreviewUrl;return this.state.isEBookPreviewReady&&(e=r.default.createElement("iframe",{src:this.props.isSampleSelect?t+"&viewMode=SELECTION":t,width:"100%",height:"100%",title:"preview",onLoad:this.onPreviewLoaded})),e}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserCanViewPdf=function(){return n().acrobatInstalled},t.supportsPdfOnLoadEvent=function(){var e=navigator?navigator.userAgent.toLowerCase():"other";return!(-1<e.indexOf("msie")||-1<e.indexOf("trident"))};var r=null,l=null,n=function(){var e=function(){return l=l||(-1<(e=navigator?navigator.userAgent.toLowerCase():"other").indexOf("chrome")?"chrome":-1<e.indexOf("safari")?"safari":-1<e.indexOf("msie")||-1<e.indexOf("trident")?"ie":-1<e.indexOf("firefox")?"firefox":e);var e},t=function(e){try{return new window.ActiveXObject(e)}catch(e){}},a=function(e){for(var t in navigator.plugins){var a=navigator.plugins[t];if(a.name===e)return a}},n=function(e){return navigator.platform.toLowerCase()===e};function o(){return!!(r=r||("ie"===e()?t("AcroPDF.PDF")||t("PDF.PdfCtrl"):a("Adobe Acrobat")||a("Chrome PDF Viewer")||a("WebKit built-in PDF")||a("Edge PDF Viewer")||n("ipad")||n("iphone")))}return{acrobatInstalled:o()||"firefox"===e()}}},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ssn=function(n){return{key:"ssn",test:function(e,t,a){if(!e||0===e.length||e===n)return null;return/^[0-9][0-9][0-9][-]?[0-9][0-9][-]?[0-9][0-9][0-9][0-9]$/.test(e)?null:"SSN must be 9 digits (XXX-XX-XXXX)"}}},t.routingNumber=function(){return{key:"routingNumber",test:function(e,t,a){var n;if(!e||0===e.length)return null;if(9!==e.length)return n="Routing Number must be 9 digits";for(var o=0,r=[3,7,1,3,7,1,3,7],l=parseInt(e.charAt(8)),i=0;i<8;i++)o+=parseInt(e.charAt(i))*r[i];return o=10*Math.ceil(o/10)-o,n="Must be a valid Routing Number",o===l?null:n}}},t.ein=function(n){return{key:"ein",test:function(e,t,a){if(!e||0===e.length||e===n)return null;return/^[0-9][0-9][-]?[0-9][0-9][0-9][0-9][0-9][0-9][0-9]$/.test(e)?null:"EIN must be 9 digits (XX-XXXXXXX)"}}},t.phoneNumber=function(){return{key:"phoneNumber",dependsOn:{controlKeys:["country"]},test:function(e,t,a){if(!e||0===e.length)return null;var n=a.country?a.country.value():null,o=/^\+?\d?\d?-?\(?\d{3}\)?-?\d{3}-?\d{4}$/.test(e);return"554"!==n&&"372"!==n||(o=/^\+?\d?\d?-?\(?\d{2,3}\)?-?\d{2,3}-?\d{2,4}$/.test(e)),o?null:"Must be a valid phone number."}}},t.postalCode=function(){return{key:"postalCode",dependsOn:{controlKeys:["country"]},test:function(e,t,a){if(!e||0===e.length)return null;var n=a.country?a.country.value():null,o=!0,r=null;return"840"===n?(o=/^[0-9]{5}$/.test(e)||/^[0-9]{5}-[0-9]{4}$/.test(e),r="ZIP codes in the United States must be 5 digits (with optional 4 digit extension)."):"36"===n?(o=/^[0-9]{4}$/.test(e),r="Postal codes in Australia must have 4 digits"):"56"===n?(o=/^[0-9]{4}$/.test(e),r="Postal codes in Belgium must be 4 digits."):"124"===n?(o=/^[a-zA-Z][0-9][a-zA-Z] [0-9][a-zA-Z][0-9]$/.test(e),r="Postal codes in Canada are alphanumeric and must be 6 characters (ANA NAN)."):"250"===n?(o=/^[0-9]{5}$/.test(e),r="Postal codes in France must be 5 digits."):"276"===n?(o=/^[0-9]{5}$/.test(e),r="Postal codes in Germany must have 5 digits"):"380"===n?(o=/^[0-9]{5}$/.test(e),r="Postal codes in Italy must be 5 digits."):"528"===n?(o=/^[0-9]{4}\s[a-zA-Z]{2}$/.test(e),r="Postal codes in The Netherlands must be 4 digits followed by a space and 2 letters (NNNN AA)."):"554"===n?(o=/^[0-9]{4}$/.test(e),r="Postal codes in New Zealand must have 4 digits."):"724"===n?(o=/^[0-9]{5}$/.test(e),r="Postal codes in Spain must be 5 digits."):"826"===n?(o=/^[a-zA-Z0-9]{2}[a-zA-Z0-9]?[a-zA-Z0-9]? [a-zA-Z0-9]{3}$/.test(e),r="Postal codes in the United Kingdom must be 2 to 4 alphanumeric characters followed by a space and 3 alphanumeric characters."):"372"===n&&(o=/^[a-zA-Z0-9]{3} [a-zA-Z0-9]{4}$/.test(e),r="Postal codes in Ireland are alphanumeric and must be 7 characters (XXX XXXX)."),o?null:r}}},t.tin=function(l){return{key:"tin",dependsOn:{controlKeys:["country"]},test:function(e,t,a){if(!e||0===e.length||e===l)return null;var n=a.country?a.country.value():null,o=!0,r=null;return"840"===n?(o=/^\d{9}$/.test(e),r="TIN must be 9 digits."):"36"===n?(o=/^\d{8,9}$/.test(e),r="TIN / TFN in Australia must be 8 or 9 digits."):"56"===n?(o=/^\d{11}$/.test(e),r="TIN in Belgium must be 11 digits."):"124"===n?(o=/^\d{9}$/.test(e),r="TIN in Canada must be 9 digits."):"250"===n?(o=/^\d{13}$/.test(e),r="TIN in France must be 13 digits."):"276"===n?(o=/^\d{11}$/.test(e),r="TIN in Germany must be 11 digits."):"380"===n?(o=/^[a-zA-Z0-9]{16}$/.test(e),r="TIN in Italy must be 16 alphanumeric characters."):"528"===n?(o=/^\d{9}$/.test(e),r="TIN in The Netherlands must be 9 digits."):"554"===n?(o=/^\d{8,9}$/.test(e),r="TIN / IRD number in New Zealand must be 8 or 9 digits."):"724"===n?(o=/^[a-zA-Z0-9]{9}$/.test(e),r="TIN in Spain must be 9 alphanumeric characters."):"826"===n?(o=/^\d{10}$/.test(e)||/^[a-zA-Z]{2}\d{6}[a-zA-Z]$/.test(e),r="TIN in the UK must be a 10 digit UTR or 9 alphanumeric NINO."):"372"===n&&(o=/^\d{7}[a-zA-Z]{1,2}$/.test(e),r="TIN / PPS No. in Ireland must be 7 digits followed by 1 or 2 letters."),o?null:r}}},t.vat=function(){return{key:"vat",dependsOn:{controlKeys:["country"]},test:function(e,t,a){if(!e||0===e.length)return null;var n=a.country?a.country.value():null,o=!0,r=null;return"36"===n?(o=/^\d{11}$/.test(e),r="VAT Registration Number / ABN in Australia must be 11 digits."):"56"===n?(o=/^(BE|be)[0-1]\d{9}$/.test(e),r="VAT Registration Numbers in Belgium must be BE followed by 10 digits (BENNNNNNNNNN)."):"124"===n?(o=/^[A-Za-z0-9]{15}$/.test(e),r="VAT Registration Number in Canada must be 15 alphanumeric characters."):"250"===n?(o=/^(FR|fr)\d{11}$/.test(e),r="VAT Registration Numbers in France must be FR followed by 11 digits (FRNNNNNNNNNNN)."):"276"===n?(o=/^(DE|de)\d{9}$/.test(e),r="VAT Registration Numbers in Germany must be DE followed by 9 digits (DENNNNNNNNN)."):"380"===n?(o=/^(IT|it)\d{11}$/.test(e),r="VAT Registration Numbers in Italy must be IT followed by 11 digits (ITNNNNNNNNNNN)."):"528"===n?(o=/^(NL|nl)\d{9}(B|b)\d{2}$/.test(e),r="VAT Registration Numbers in The Netherlands must be NL followed by 9 digits then B followed by 2 digits (NLXXXXXXXXXBXX)."):"554"===n?(o=/^\d{13}$/.test(e),r="VAT Registration Number / NZ Business Number in New Zealand must be 13 digits."):"724"===n?(o=/^(ES|es)[A-Za-z][0-9]{7}[0-9A-Za-z]$/.test(e)||/^(ES|es)[0-9]{8}[A-Za-z]$/.test(e),r="VAT in Spain must be ES then 9 characters (ESX12345678/ES12345678X/ESX1234567X) where X is alphabetical."):"826"===n?(o=/^(GB|gb)\d{9}$/.test(e),r="VAT Registration Numbers in the United Kingdom must be GB followed by 9 digits (GBNNNNNNNNN)."):"372"===n&&(o=/^(IE|ie)\d{7}[a-zA-Z]{1,2}$/.test(e)||/^(IE|ie)\d{1}[a-zA-Z]{1}\d{5}[a-zA-Z]{1}$/.test(e),r="VAT Registration Number in Ireland must be IE followed by 8 or 9 alphanumeric characters (IENNNNNNNA / IENNNNNNNAA / IENANNNNNA)."),o?null:r}}},t.accountNumber=function(i){return{key:"accountNumber",dependsOn:{controlKeys:["bankCountry"]},test:function(e,t,a){if(!e||0===e.length||e===i)return null;var n=a.citizen?a.citizen.value():null,o=!0,r=null,l=a.bankCountry?a.bankCountry.value():null;return"yes"===n||"no"===n&&"US"===l?(o=/^[0-9]{5,18}$/.test(e),r="Account numbers in the United States must be 5 to 18 digits."):"no"===n&&("AU"===l?(o=/^[a-zA-Z0-9]{6,10}$/.test(e),r="Account numbers in Australia must be 6 to 10 alphanumeric characters."):"BE"===l?(o=/^[a-zA-Z0-9]{7}$/.test(e),r="Account numbers in Belgium must be 7 alphanumeric characters."):"CA"===l?(o=/^\d{7,16}$/.test(e),r="Account numbers in Canada must be 7 to 16 digits."):"FR"===l?(o=/^[a-zA-Z0-9]{11}$/.test(e),r="Account numbers in France must be 11 alphanumeric characters."):"DE"===l?(o=/^[a-zA-Z0-9]{10}$/.test(e),r="Account numbers in Germany must be 10 alphanumeric characters."):"IT"===l?(o=/^[a-zA-Z0-9]{12}$/.test(e),r="Account numbers in Italy must be 12 alphanumeric characters."):"NL"===l?(o=/^[a-zA-Z0-9]{10}$/.test(e),r="Account numbers in The Netherlands must be 10 alphanumeric characters."):"NZ"===l?(o=/^\d{15,16}$/.test(e),r="Account numbers in New Zealand must be 15 to 16 digits."):"ES"===l?(o=/^[a-zA-Z0-9]{10}$/.test(e),r="Account numbers in Spain must be 10 alphanumeric characters."):"GB"===l?(o=/^[a-zA-Z0-9]{8}$/.test(e),r="Account numbers in the United Kingdom must be 8 alphanumeric characters."):"IE"===l&&(o=/^\d{8,14}$/.test(e),r="Account numbers in Ireland must be 8 to 14 digits.")),o?null:r}}},t.iban=function(l){return{key:"iban",dependsOn:{controlKeys:["bankCountry"]},test:function(e,t,a){if(!e||0===e.length||e===l)return null;var n=a.bankCountry?a.bankCountry.value():null,o=!0,r=null;return"AU"===n?(o=/^\d{6}$/.test(e),r="BSB (Bank-State-Branch) numbers in Australia must be 6 digits."):"BE"===n?(o=/^(BE|be)\d{14}$/.test(e),r="IBAN codes in Belgium must be BE followed by 14 digits (BENNNNNNNNNNNNNN)."):"CA"===n?(o=/^\d{8,9}$/.test(e),r="Routing numbers in Canada must be 8 to 9 digits."):"FR"===n?(o=/^(FR|fr)\d{12}[0-9a-zA-Z]{11}\d{2}$/.test(e),r="IBAN codes in France must be FR followed by 12 digits, then 11 alphanumeric characters and 2 digits (FRNNNNNNNNNNNNXXXXXXXXXXXNN)."):"DE"===n?(o=/^(DE|de)\d{20}$/.test(e),r="IBAN codes in Germany must be DE followed by 20 digits (DENNNNNNNNNNNNNNNNNNNN)."):"IT"===n?(o=/^(IT|it)\d{2}[a-zA-Z]\d{10}[0-9a-zA-Z]{12}$/.test(e),r="IBAN codes in Italy must be IT followed by 2 digits, then 1 letter, 10 digits, and 12 alphanumeric characters (ITNNANNNNNNNNNNXXXXXXXXXXXX)."):"NL"===n?(o=/^(NL|nl)\d{2}[a-zA-Z]{4}\d{10}$/.test(e),r="IBAN codes in The Netherlands must be NL followed by 2 digits, then 4 letters and 10 digits (NLNNAAAANNNNNNNNNN)."):"NZ"===n?(o=/^\d{6}$/.test(e),r="BSB (Bank-State-Branch) numbers in New Zealand must be 6 digits."):"ES"===n?(o=/^(ES|es)\d{22}$/.test(e),r="IBAN codes in Spain must be ES followed by 22 digits (ESNNNNNNNNNNNNNNNNNNNNNN)."):"GB"===n?(o=/^(GB|gb)\d{2}[a-zA-Z]{4}\d{14}$/.test(e),r="IBAN codes in the United Kingdom must be GB followed by 2 digits, then 4 letters and 14 digits (GBNNAAAANNNNNNNNNNNNNN)."):"IE"===n&&(o=/^(IE|ie)\d{2}[a-zA-Z]{4}\d{14}$/.test(e),r="IBAN codes in Ireland must be IE followed by 2 digits, then 4 letters and 14 digits (IENNAAAANNNNNNNNNNNNNN)."),o?null:r}}},t.swift=function(){return{key:"swift",dependsOn:{controlKeys:["bankCountry"]},test:function(e,t,a){if(!e||0===e.length)return null;var n=a.bankCountry?a.bankCountry.value():null,o=!0,r=null;return"AU"===n?(o=/^[A-Za-z]{4}(AU|au)[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/.test(e),r="SWIFT codes in Australia must be 4 letters followed by AU, then 2 alphanumeric characters and optionally 3 alphanumeric characters (AAAAAUXXXXX)."):"BE"===n?(o=/^[A-Za-z]{4}(BE|be)[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/.test(e),r="SWIFT codes in Belgium must be 4 letters followed by BE, then 2 alphanumeric characters and optionally 3 alphanumeric characters (AAAABEXXXXX)."):"CA"===n?(o=/^[A-Za-z]{4}(CA|ca)[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/.test(e),r="SWIFT codes in Canada must be 4 letters followed by CA, then 2 alphanumeric characters and optionally 3 alphanumeric characters (AAAACAXXXXX)."):"FR"===n?(o=/^[A-Za-z]{4}(FR|fr)[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/.test(e),r="SWIFT codes in France must be 4 letters followed by FR, then 2 alphanumeric characters and optionally 3 alphanumeric characters (AAAAFRXXXXX)."):"DE"===n?(o=/^[A-Za-z]{4}(DE|de)[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/.test(e),r="SWIFT codes in Germany must be 4 letters followed by DE, then 2 alphanumeric characters and optionally 3 alphanumeric characters (AAAADEXXXXX)."):"IT"===n?(o=/^[A-Za-z]{4}(IT|it)[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/.test(e),r="SWIFT codes in Italy must be 4 letters followed by IT, then 2 alphanumeric characters and optionally 3 alphanumeric characters (AAAAITXXXXX)."):"NL"===n?(o=/^[A-Za-z]{4}(NL|nl)[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/.test(e),r="SWIFT codes in The Netherlands must be 4 letters followed by NL, then 2 alphanumeric characters and optionally 3 alphanumeric characters (AAAANLXXXXX)."):"NZ"===n?(o=/^[A-Za-z]{4}(NZ|nz)[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/.test(e),r="SWIFT codes in New Zealand must be 4 letters followed by NZ, then 2 alphanumeric characters and optionally 3 alphanumeric characters (AAAANZXXXXX)."):"ES"===n?(o=/^[A-Za-z]{4}(ES|es)[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/.test(e),r="SWIFT codes in Spain must be 4 letters followed by ES, then 2 alphanumeric characters and optionally 3 alphanumeric characters (AAAAESXXXXX)."):"GB"===n?(o=/^[A-Za-z]{4}(GB|gb)[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/.test(e),r="SWIFT codes in the United Kingdom must be 4 letters followed by GB, then 2 alphanumeric characters and optionally 3 alphanumeric characters (AAAAGBXXXXX)."):"IE"===n&&(o=/^[A-Za-z]{4}(IE|ie)[A-Za-z0-9]{2}([A-Za-z0-9]{1,3})?$/.test(e),r="SWIFT codes in Ireland must be 4 letters followed by IE, then 2 alphanumeric characters and optionally 3 alphanumeric characters (AAAAIEXXXXX)."),o?null:r}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFeatureProtectedComponent=void 0;var i=n(a(0)),s=n(a(4));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.createFeatureProtectedComponent=function(o,r,l){return function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=c(this,d(a).call(this,e)),s.default.getUser(),t.state={shouldRender:!0},s.default.hasPermissions(r)||(t.state.shouldRender=!1,l&&window.location.replace(l)),t}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,i.default.Component),u((t=a).prototype,[{key:"render",value:function(){return this.state.shouldRender?i.default.createElement(o,this.props):null}}]),n&&u(t,n),a}()}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(82)),i=a(2),s=n(a(189)),u=n(a(26)),c=o(a(4)),d=n(a(83)),f=n(a(122)),p=n(a(530)),m=o(a(3)),h=n(a(11)),y=n(a(17));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=v(o).call(this,e))||"object"!==b(n)&&"function"!=typeof n?S(a):n).state={authentication:null,isUserLoaded:!1,retrieveUser:y.hasFeatureFlag(h.RETRIEVE_USER)},t.pluckReturnUrl=t.pluckReturnUrl.bind(S(S(t))),t.onUserChanged=t.onUserChanged.bind(S(S(t))),t.onUnauthorizedUser=t.onUnauthorizedUser.bind(S(S(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.props.route.authentication?this.props.route.authentication:null;t?this.setState({authentication:t},function(){u.load(e.state.retrieveUser)}):u.load(this.state.retrieveUser)}},{key:"componentWillReceiveProps",value:function(e,t){var a=this;null===c.default.getUser()?this.setState({isUserLoaded:!1},function(){return a._checkUserStatus(e.route.authentication)}):this._checkUserStatus(e.route.authentication)}},{key:"componentWillMount",value:function(){c.default.addChangeListener(this.onUserChanged),c.default.addUnauthorizedUserListener(this.onUnauthorizedUser)}},{key:"componentWillUnmount",value:function(){c.default.removeChangeListener(this.onUserChanged),c.default.removeUnauthorizedUserListener(this.onUnauthorizedUser)}},{key:"onUserChanged",value:function(){var e,t=this,a=!1,n=c.default.getUser();if("login"===this.state.authentication&&(null!==n&&((e=this.pluckReturnUrl())?i.browserHistory.replace(e):n&&n.authorShareKey?null!=n.accessList?"PROJECTS_SERIES"==n.accessList[0]?i.browserHistory.replace("/"+d.Base):"SALES_REPORTS"==n.accessList[0]?i.browserHistory.replace("/"+f.Base):"PROMOTIONS"==n.accessList[0]?i.browserHistory.replace("/"+d.Coupon):"AUTHOR_PAGES"==n.accessList[0]&&i.browserHistory.replace("/"+p.Base):i.browserHistory.replace("/"):i.browserHistory.replace("/"+d.Base)),a=!0),"authenticated"===this.state.authentication)if(null===n){var o,r="/"+s.SignIn;o=this.props.location.search?this.props.location.pathname+this.props.location.search:this.props.location.pathname,this.props.location.hash&&(o+=this.props.location.hash),a=!1,i.browserHistory.replace(r+"?return="+o)}else a=!0;"unauthenticated"===this.state.authentication&&(a=!0),setTimeout(function(){t.setState({isUserLoaded:a})},0)}},{key:"onUnauthorizedUser",value:function(e){window.location=e}},{key:"pluckReturnUrl",value:function(){var e=window.location.search;return(1<e.length?l.default.parse(e.substring(1)):{}).return?window.location.hash?decodeURIComponent(e.substr(8))+window.location.hash:decodeURIComponent(e.substr(8)):null}},{key:"_checkUserStatus",value:function(e){var t=this;e!==this.state.authentication?this.setState({authentication:e},function(){return u.load(t.state.retrieveUser)}):u.load(this.state.retrieveUser)}},{key:"render",value:function(){return this.state.isUserLoaded?r.default.createElement("div",null,this.props.children):r.default.createElement("div",null,r.default.createElement(m.default,null))}}])&&g(t.prototype,a),n&&g(t,n),o}();t.default=k},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyPageCheckout=t.Base=void 0;t.Base="checkout";t.EmptyPageCheckout="emptypagecheckout"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0;t.Base="vendor-account"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=b(a(0)),l=b(a(1)),n=(b(a(90)),b(a(13)),a(535)),o=b(a(1100)),i=y(a(68)),s=b(a(74)),u=b(a(209)),c=b(a(210)),d=b(a(51)),f=y(a(22)),p=a(15),m=b(a(3)),h=y(a(75));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P=(0,n.createChart)(o.default),w=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=E(o).call(this,e))||"object"!==g(n)&&"function"!=typeof n?k(a):n).state={currencyFormat:"",categories:"",series:"",year:"",ean:"",title:"",data:"",yearEnabled:!0,isFreeFilterEnabled:!0,revenue:null,currentFilterType:"ALL",loading:!0,noLineGraphData:!1},t.onAllLineResultLoaded=t.onAllLineResultLoaded.bind(k(k(t))),t.onFilterAllYear=t.onFilterAllYear.bind(k(k(t))),t.onFilterForRequestedYear=t.onFilterForRequestedYear.bind(k(k(t))),t.parseYearsData=t.parseYearsData.bind(k(k(t))),t.parseAllYearsData=t.parseAllYearsData.bind(k(k(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){s.default.addLineGraphListener(this.onAllLineResultLoaded)}},{key:"componentWillUnmount",value:function(){s.default.removeLineGraphListener(this.onAllLineResultLoaded)}},{key:"componentDidMount",value:function(){var e={aggregate:encodeURIComponent(this.props.title)};i.getAllLineGraphDetails(e)}},{key:"getHeaderStyles",value:function(e,t,a,n){return n=d.default.hasUserPublishedBefore()&&n,(0,l.default)(e,{"active-selection":t===a})}},{key:"parseYearsData",value:function(){var e,t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=[],o=this.state.data.result.months.map(function(e){var t=0;e.years.map(function(e){t+=parseInt(e.count)});var a={date:e.month.substring(0,3),y:t};return n.push(a.date),a});t.map(function(a,e){0==o.filter(function(e){var t=e.date;e.y;return a===t.substring(0,3)}).length&&o.splice(e,0,{date:a,y:null})}),e=!n.length,0==this.state.data.result.newBuyers&&0==this.state.data.result.revenue&&(e=!0);var a=[{data:o,name:this.state.currentFilterType}];this.setState({categories:t,series:a,revenue:this.state.data.result.revenue,noLineGraphData:e})}},{key:"parseAllYearsData",value:function(){var o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=this.state.data.result.years.map(function(e,t){var a=e.year,n=e.months.map(function(e){var t=parseInt(e.count);return{date:e.month.substring(0,3),y:t}});return o.map(function(a,e){0==n.filter(function(e){var t=e.date;e.y;return a===t.substring(0,3)}).length&&n.splice(e,0,{date:a,y:null})}),{data:n,name:a}}),t=!1;0==this.state.data.result.newBuyers&&0==this.state.data.result.revenue&&(t=!0),this.setState({categories:o,series:e,revenue:this.state.data.result.revenue,noLineGraphData:t})}},{key:"onAllLineResultLoaded",value:function(){var e=this,t=s.default.LineGraphData();h.getEaaSubscription(),this.setState({data:t,noLineGraphData:!1}),setTimeout(function(){e.setState({loading:!1})},2e3),this.state.currentFilterType==p.ALL?this.parseAllYearsData():this.parseYearsData()}},{key:"onFilterAllYear",value:function(e){this.setState({loading:!0});var t={aggregate:encodeURIComponent(this.props.title)};i.getAllLineGraphDetails(t),this.state.yearEnabled&&e!==this.state.year&&this.setState({currentFilterType:p.ALL})}},{key:"onFilterForRequestedYear",value:function(e){this.setState({loading:!0});var t={yearRequested:e,aggregate:encodeURIComponent(this.props.title)};i.getAllLineGraphDetails(t),this.state.yearEnabled&&e!==this.state.year&&this.setState({currentFilterType:e})}},{key:"render",value:function(){var e=this;this.state.data&&document.getElementById("app").classList.remove("analyticLineGraphHeight"),document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0].getElementsByTagName("input")[0].value="";var t=(new Date).getFullYear(),a=(new Date).getFullYear()-1,n=(new Date).getFullYear()-2,o="ALL"==this.state.currentFilterType?n+" - "+t:this.state.currentFilterType.toString();return r.default.createElement("div",null,this.state.data&&r.default.createElement("div",{className:"customer-graph-content line-graph-reference"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"modal-header col-sm-6 col-xs-12 col-md-6 "},r.default.createElement("h4",null,this.props.title," ")),r.default.createElement("div",{className:"col-sm-6 col-xs-12 col-md-6 filterpadding"},r.default.createElement("div",{className:"widget analytics-margin"},r.default.createElement("div",{className:"widget widget-panel-content"},r.default.createElement("div",{className:"controls clearfix"},r.default.createElement("ul",{className:"book-type"},r.default.createElement("li",{className:this.getHeaderStyles("See_All",this.state.currentFilterType,"ALL",this.state.yearEnabled),onClick:function(){return e.onFilterAllYear("ALL")}},"See All"),r.default.createElement("li",{className:this.getHeaderStyles("nineteen",this.state.currentFilterType,t,this.state.yearEnabled),onClick:function(){return e.onFilterForRequestedYear(t)}},t),r.default.createElement("li",{className:this.getHeaderStyles("eighteen",this.state.currentFilterType,a,this.state.yearEnabled),onClick:function(){return e.onFilterForRequestedYear(a)}},a),r.default.createElement("li",{className:this.getHeaderStyles("seventeen",this.state.currentFilterType,n,this.state.yearEnabled),onClick:function(){return e.onFilterForRequestedYear(n)}},n))))))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-sm-6 "},"Â "),r.default.createElement("table",{className:"col-sm-6 col-xs-12 col-md-6 filterpadding"},r.default.createElement("tbody",null,r.default.createElement("tr",{className:"blueFont"},r.default.createElement("th",null,this.state.data.result.newBuyers.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),r.default.createElement("th",null,"$",f.formatCurrency(parseFloat(this.state.data.result.revenue)))),r.default.createElement("tr",null,r.default.createElement("td",null,"NEW BUYERS"),r.default.createElement("td",null,"REVENUE"))))),r.default.createElement("div",{className:"widget-information"},r.default.createElement("div",null,r.default.createElement(u.default,null,r.default.createElement(c.default,{id:"srGradient-0",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]}),r.default.createElement(c.default,{id:"srGradient-1",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]}),r.default.createElement(c.default,{id:"srGradient-2",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]})),"ALL"==this.state.currentFilterType.toString()&&r.default.createElement("div",null,r.default.createElement(P,{type:"text",format:"text",categories:this.state.categories,series:this.state.series,removeUnusedSeries:!0,disabled:this.state.noLineGraphData})),this.state.currentFilterType.toString()==t&&r.default.createElement("div",{className:"yeartype-current"},r.default.createElement(P,{type:"text",format:"text",categories:this.state.categories,series:this.state.series,removeUnusedSeries:!0,disabled:this.state.noLineGraphData})),this.state.currentFilterType.toString()==a&&r.default.createElement("div",{className:"yeartype-old"},r.default.createElement(P,{type:"text",format:"text",categories:this.state.categories,series:this.state.series,removeUnusedSeries:!0,disabled:this.state.noLineGraphData})),this.state.currentFilterType.toString()==n&&r.default.createElement("div",{className:"yeartype-oldest"},r.default.createElement(P,{type:"text",format:"text",categories:this.state.categories,series:this.state.series,removeUnusedSeries:!0,disabled:this.state.noLineGraphData})),this.state.noLineGraphData&&r.default.createElement("div",{className:"textAlignCenter"},"No new customers in ",o)))),this.state.loading&&r.default.createElement("div",{className:"spinner-area"},r.default.createElement(m.default,null)))}}])&&v(t.prototype,a),n&&v(t,n),o}();t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(n(a(13)),n(a(188))),i=n(a(148));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){o(t,e,a[e])})}return t}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?p(a):n).getInitialState=t.getInitialState.bind(p(p(t))),t.state=t.getInitialState(),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){i.default.setOptions({colors:this.props.colors}),this.chart=i.default.chart(this.refs.chart,{chart:u({},this.state.chart),credits:{enabled:!1},legend:{enabled:!1},title:u({},this.state.title),tooltip:{enabled:!1},plotOptions:{pie:{dataLabels:{enabled:!1,softConnector:!1,connectorWidth:0}}},series:[{colorByPoint:!0,innerSize:this.props.innersize,data:this.state.data,enableMouseTracking:!1}]})}},{key:"componentWillReceiveProps",value:function(e){var t=this.chart,a=t.series[0];this.props.title!==e.title&&t.setTitle({text:l.default.renderToString(e.title)},"",!0),this.props.data!==e.data&&a.setData(e.data,!0)}},{key:"getInitialState",value:function(){var e={colors:this.props.colors,chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",height:this.props.height,width:this.props.width},data:this.props.data,title:{text:null,useHTML:!0,verticalAlign:"middle"}};return this.props.title&&(e.title.text=l.default.renderToString(this.props.title)),e}},{key:"render",value:function(){var e={height:this.props.height,width:this.props.width};return r.default.createElement("div",{ref:"chart",style:e})}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(a(0)),i=a(2),s=o(a(1)),r=n(a(55)),u=n(a(208)),c=o(a(1112)),d=o(a(6)),f=o(a(12)),p=(n(a(15)),o(a(8)));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n).state={item:t.props.item,checkout:t.props.checkout,promotionMessage:null},t.removeItem=t.removeItem.bind(g(g(t))),t.changeQuantity=t.changeQuantity.bind(g(g(t))),t.makeClick=t.makeClick.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,l.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){this.state.checkout||e===this.props||(this.refs.proofQuantity&&this.refs.proofQuantity.setValue(e.item.proofQuantity),this.refs.eanQuantity&&this.refs.eanQuantity.setValue(e.item.eanQuantity),this.setState({item:e.item}))}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"removeItem",value:function(){var e=this.state.item;r.updateProject(e.projectId,0)}},{key:"changeQuantity",value:function(e){r.updateProject(this.state.item.projectId,e)}},{key:"render",value:function(){var e=this.state,t=e.checkout,a=e.item,n=e.promotionMessage,o=this.props.canGetPromotions,r=0<parseInt(a.proofQuantity)&&o;return l.default.createElement("div",{className:"cart-item clearfix"},l.default.createElement("div",{className:"item clearfix"},l.default.createElement("div",{className:"cover-image"},a.thumbnail&&l.default.createElement("img",{src:a.thumbnail,width:"100%",className:"img-responsive",alt:"cover image"}),!a.thumbnail&&l.default.createElement("img",{src:"img/projects/cover-default.png",width:"100%",alt:"cover image",className:"img-responsive"})),l.default.createElement("div",{className:"details"},l.default.createElement("h1",null,a.title),l.default.createElement("ul",{className:"list-unstyled"},a.author&&l.default.createElement("li",null,"By ",a.author),a.coverType&&a.trimSize&&l.default.createElement("li",null,p.default.projectConstants("coverFormat",a.coverType).label," | ",p.default.projectConstants("pageSize",a.trimSize).label.replace(/\\/g,"")),!t&&l.default.createElement("li",null,"Price Per Copy: ",l.default.createElement("strong",null,"$",a.pricePerBook)),!t&&r&&l.default.createElement("li",null,"Discounted Price: ",l.default.createElement("strong",null,"$",a.proofPricePerBook?a.proofPricePerBook:"0.00")),t&&0<Number(a.eanQuantity)&&l.default.createElement("li",null,"Qty: ",a.eanQuantity," @ $",a.pricePerBook," ",l.default.createElement("strong",null,"Total: $",a.eanTotalPrice)),r&&t&&0<Number(a.proofQuantity)&&l.default.createElement("li",null,"Qty: ",a.proofQuantity," @ $",a.proofPricePerBook," ",l.default.createElement("strong",null,"Total: $",a.proofTotalPrice))),t&&l.default.createElement(i.Link,{to:"/"+u.Base},"Edit in Cart"),o&&!t&&0<a.remainingProofs&&n&&l.default.createElement("div",{className:"copies-count hidden-xs"},l.default.createElement("p",null,n)))),!t&&l.default.createElement("div",null,n&&l.default.createElement("div",{className:"copies-count visible-xs-block"},l.default.createElement("p",null,n)),l.default.createElement("div",{className:"cart-list-titles show-mobile"},l.default.createElement("ul",{className:"list-inline"},l.default.createElement("li",{className:"quantity"},"Quantity"),l.default.createElement("li",{className:"total"},"Total"))),l.default.createElement("div",{className:"quantity"},l.default.createElement(c.default,{quantity:a.totalQuantity,changeQuantity:this.changeQuantity}),l.default.createElement("div",{className:"remove-item",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.removeItem},l.default.createElement("p",null,"Remove")),r&&l.default.createElement("div",{className:"item-discounted-quantity"},l.default.createElement(d.default,null,l.default.createElement(f.default,{name:"itemDiscountedQuantity",ref:"proofQuantity",initValue:a.proofQuantity,disabled:!0,readOnly:!0,disableValidationMessages:!0})),l.default.createElement("span",null,"@ ",a.proofPricePerBook?a.proofPricePerBook:"0.00")),r&&l.default.createElement("div",{className:(0,s.default)("item-full-quantity",{"more-margin":!r})},l.default.createElement(d.default,null,l.default.createElement(f.default,{name:"itemFullQuantity",ref:"eanQuantity",initValue:a.eanQuantity,disabled:!0,readOnly:!0,disableValidationMessages:!0})),l.default.createElement("span",null,"@ ",a.pricePerBook))),l.default.createElement("div",{className:"total"},l.default.createElement("div",{className:"item-total"},l.default.createElement("p",null,"$",a.totalPrice)),r&&l.default.createElement("div",{className:"item-discounted-price"},l.default.createElement("p",null,"$",a.proofTotalPrice?a.proofTotalPrice:"0.00")),r&&l.default.createElement("div",{className:(0,s.default)("item-full-price",{"more-margin":!r})},l.default.createElement("p",null,"$",a.eanTotalPrice?a.eanTotalPrice:"0.00")))))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(a(0)),u=a(2),r=a(24),c=n(a(338)),d=(n(a(251)),n(a(11)),o(a(1113))),f=o(a(80)),p=n(a(22)),l=(n(a(55)),o(a(52)));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?b(a):n).state={checkoutState:l.default.checkoutState(),cart:e.cart,ordering:e.ordering},t.onCartChanged=t.onCartChanged.bind(b(b(t))),t.onCheckoutStateChanged=t.onCheckoutStateChanged.bind(b(b(t))),t.onSubmitOrder=t.onSubmitOrder.bind(b(b(t))),t.onDebounceSubmitOrder=(0,r.debounce)(5e3,!0,t.onSubmitOrder),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,s.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){l.default.addCheckoutStateChangedListener(this.onCheckoutStateChanged),l.default.addCartChangedListener(this.onCartChanged)}},{key:"componentWillUnmount",value:function(){l.default.removeCheckoutStateChangedListener(this.onCheckoutStateChanged),l.default.removeCartChangedListener(this.onCartChanged)}},{key:"onCheckoutStateChanged",value:function(){this.setState({checkoutState:l.default.checkoutState()})}},{key:"onCartChanged",value:function(e){this.setState({cart:e})}},{key:"onSubmitOrder",value:function(){this.state.checkoutState.allowCheckout&&this.props.submitOrder&&this.props.submitOrder()}},{key:"render",value:function(){var e,t=this.state,a=t.cart,n=t.checkoutState,o=this.props.canGetPromotions,r=a.promotions,l=r&&o,i=l?r.atgPromoDescription:"";return e=this.props.checkout?s.default.createElement("a",{className:"btn btn-block btn-checkout",disabled:!n.allowCheckout||this.props.ordering,onClick:this.onDebounceSubmitOrder},"Submit Order"):s.default.createElement(u.Link,{to:"/"+c.Base+"?checkoutPage=true",className:"btn btn-block btn-checkout"},"Continue ",s.default.createElement("span",{className:"visible-xs-inline-block"}," To Checkout")),s.default.createElement("div",{className:"order-totals"},s.default.createElement("h3",null,"Order Summary"),s.default.createElement("div",{className:"order-details"},s.default.createElement("table",null,s.default.createElement("tbody",null,s.default.createElement("tr",null,s.default.createElement("td",null,"Sub Total"),s.default.createElement("td",null,p.formatPrice(a.cartItemTotal))),l&&s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement("span",{className:"discountLabel"},"Discounts"),s.default.createElement(f.default,{isHtml:!0,info:!0,text:i})),s.default.createElement("td",null,"-",p.formatPrice(a.discountTotal))),s.default.createElement(d.default,{cart:this.state.cart,checkout:this.props.checkout}),s.default.createElement("tr",null,s.default.createElement("td",null,"Estimated Shipping"),s.default.createElement("td",null,this.props.checkout?p.formatPrice(a.shipping):"$-.--")),s.default.createElement("tr",null,s.default.createElement("td",null,"Estimated Tax"),s.default.createElement("td",null,this.props.checkout?p.formatPrice(a.orderTaxTotal):"$-.--")),s.default.createElement("tr",{className:"order-total"},s.default.createElement("td",null,"Order Total:"),s.default.createElement("td",null,this.props.checkout?p.formatPrice(a.orderTotal):p.formatPrice(a.cartItemTotalMinusDiscount))))),e))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(26));n(a(4));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={user:e.user},t.onHandleLogout=t.onHandleLogout.bind(d(d(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.default.Component),t=o,(a=[{key:"onHandleLogout",value:function(){l.logoutUser()}},{key:"render",value:function(){var e=this.state,t=e.user;e.isActingAs;return t&&t.isImposter?r.default.createElement("div",{className:"act-as-container"},r.default.createElement("div",{className:"act-as-alert"},"You are currently acting as ",t.firstName+" "+t.lastName,". ",r.default.createElement("a",{onClick:this.onHandleLogout},"Sign out"))):t&&t.authorShareKey?r.default.createElement("div",{className:"act-as-contributor"},r.default.createElement("div",{className:"act-as-alert"},"Signed in as a Contributor. ",r.default.createElement("a",{onClick:this.onHandleLogout},"Sign out"))):null}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var p=o(a(0)),r=a(7),l=(a(2),n(a(48))),i=n(a(26)),m=o(a(4)),s=(n(a(28)),o(a(30))),h=(n(a(11)),n(a(17))),u=(n(a(31)),o(a(79))),y=o(a(61)),c=o(a(6)),d=o(a(12)),f=n(a(9)),b=o(a(1));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=E(o).call(this,e))||"object"!==g(n)&&"function"!=typeof n?k(a):n).state={content:s.default.getFooterContent(),windowWidth:window.innerWidth,check:!1,message:"",currentPage:window.location.pathname,emailpreferenceMessage:!1},t.onHandleLogout=t.onHandleLogout.bind(k(k(t))),t.onWindowResize=t.onWindowResize.bind(k(k(t))),t.onMailToAlert=t.onMailToAlert.bind(k(k(t))),t.onSubmit=t.onSubmit.bind(k(k(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,p.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){u.default.addWindowResizeListener(this.onWindowResize),s.default.addMailToAlertLoadedListener(this.onMailToAlert),this.setState({currentPage:window.location.pathname})}},{key:"componentWillUnmount",value:function(){u.default.removeWindowResizeListener(this.onWindowResize),s.default.removeMailToAlertLoadedListener(this.onMailToAlert),clearInterval(this.intervalId)}},{key:"componentDidMount",value:function(){var e=this;this.intervalId=setInterval(function(){e.state.currentPage!==window.location.pathname&&e.setState({currentPage:window.location.pathname,emailpreferenceMessage:!1})},500)}},{key:"onSubmit",value:function(){var e=this.refs.emailPreferenceFooter.gather().email;this.setState({loaded:!1},function(){l.loadMailToAlertSettings(e)})}},{key:"onMailToAlert",value:function(){var e=s.default.getMailToAlert();this.setState({emailpreferenceMessage:e.result.settings.success,currentPage:window.location.pathname})}},{key:"onHandleLogout",value:function(){i.logoutUser()}},{key:"onWindowResize",value:function(){this.setState({windowWidth:window.innerWidth})}},{key:"buildGroup",value:function(e,t,a){if(!e||!e.links||0===e.links.length)return null;var n=null;"*empty*"===e.heading?n=p.default.createElement("p",{className:"heading3-replace"},"Â "):e.heading&&0<e.heading.length&&(n=p.default.createElement("h3",null,e.heading));768<=this.state.windowWidth?this.state.content.desktop:this.state.content.mobile;return p.default.createElement("div",{className:t},n,p.default.createElement("ul",{className:"links"},this.buildLinks(e.links,a)))}},{key:"buildLinks",value:function(e,t){var a=!!m.default.getUser(),n=[],o=1,r='<img src= "img/exlamation.png" />  '+this.state.message,l=!0,i=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value,f=t+":"+o++;d.onlyIfSignedIn&&!a||d.onlyIfSignedOut&&a||(d.featureFlag&&!h.hasFeatureFlag(d.featureFlag)||("_blank"===d.target&&n.push(p.default.createElement("li",{key:f},p.default.createElement("a",{href:d.href,target:"_blank"},d.img&&p.default.createElement("img",{alt:d.alt,src:d.img}),"Â ",d.label))),"Sign Out"===d.label?n.push(p.default.createElement("li",{key:f},p.default.createElement("a",{onClick:this.onHandleLogout},d.label))):"BNPressSupport@bn.com"===d.label&&this.state.check?n.push(p.default.createElement("li",{key:f},p.default.createElement("a",{href:d.href},d.img&&p.default.createElement(y.default,{isHtml:"true",info:!0,text:r,trigger:"hover"},p.default.createElement("img",{alt:d.alt,src:d.img})),"Â ",d.label))):"Your Privacy Choices"===d.label?n.push(p.default.createElement("li",{key:f},p.default.createElement("a",{href:d.href,id:"clarip-do-not-sell-link"},d.label," ",p.default.createElement("img",{alt:"Your Privacy Choices",height:"15px",src:"img/opt-out.png"})))):n.push(p.default.createElement("li",{key:f},p.default.createElement("a",{href:d.href},d.img&&p.default.createElement("img",{alt:d.alt,src:d.img}),"Â ",d.label)))))}}catch(e){i=!0,s=e}finally{try{l||null==c.return||c.return()}finally{if(i)throw s}}return n}},{key:"render",value:function(){if(!this.state.content)return p.default.createElement("footer",{ref:"footer",className:"app-footer"});var e=768<=this.state.windowWidth,t=e?this.state.content.desktop:this.state.content.mobile,a=e?"desktop":"mobile",n=t.copyright.replace("{year}",(0,r.bn_moment)().year());return p.default.createElement("footer",{className:"app-footer "+a+(this.props.minimal?" minimal":" full"),ref:"footer"},!this.props.minimal&&p.default.createElement("div",{className:"upper-area"},p.default.createElement("div",{className:(0,b.default)("sections clearfix",{"additional-email-form":!this.state.emailpreferenceMessage},{"additional-email-success":this.state.emailpreferenceMessage})},p.default.createElement("div",{className:"section site-links clearfix"},this.state.check&&!e?this.buildGroup(t.siteLinks.group7,"group-1",a):this.buildGroup(t.siteLinks.group1,"group-1",a),this.buildGroup(t.siteLinks.group2,"group-2",a),this.buildGroup(t.siteLinks.group3,"group-3",a),p.default.createElement("div",{className:"container-group4-group5"},p.default.createElement("div",{className:"container-group4"},this.state.check?this.buildGroup(t.siteLinks.group6,"group-4",a):this.buildGroup(t.siteLinks.group4,"group-4",a)),p.default.createElement("div",{className:"container-group5"},this.buildGroup(t.siteLinks.group5,"group-5",a))),p.default.createElement("div",{className:"container-email-preference"},p.default.createElement("div",{className:"group-6"},p.default.createElement("h3",null,"Stay In The Know"),this.state.emailpreferenceMessage&&p.default.createElement("p",{className:"email-pref-success-message"},"Thank you for submitting your email address."),!this.state.emailpreferenceMessage&&p.default.createElement("p",null,"Submit your email to receive exclusive B&N Press updates & special offers. You can view our Privacy Policy ",p.default.createElement("a",{className:"underline-link",href:"https://bn.clarip.com/privacycenter/?brand=barnesandnoble",target:"_blank"},"here"),". Unsubscribe from our emails at any time."),!this.state.emailpreferenceMessage&&p.default.createElement(c.default,{ref:"emailPreferenceFooter",onSubmit:this.onSubmit},p.default.createElement("div",{className:"input-email-pref"},p.default.createElement(d.default,{name:"email",ref:"email",label:"Email Address",maxLength:50,rules:[f.required("Please enter an email address."),f.pattern(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Please enter a valid email address.",!0)]})),p.default.createElement("div",{className:"button-container-email-pref"},p.default.createElement("button",{className:"btn submit-email-pref glyphicon glyphicon-menu-right","data-action":"submit"})))))))),p.default.createElement("div",{className:"lower-area"},p.default.createElement("div",{className:"sections"},p.default.createElement("div",{className:"layout clearfix"},p.default.createElement("div",{className:"section legal-links"},p.default.createElement("ul",{className:"links"},this.buildLinks(t.legalLinks,a))),p.default.createElement("div",{className:"section copyright clearfix"},p.default.createElement("div",{dangerouslySetInnerHTML:{__html:n}}))))))}}])&&v(t.prototype,a),n&&v(t,n),o}();t.default=P},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postalCodeUS=function(e){var t={key:"postalCodeUS",test:function(e,t,a){if(!e||0===e.length)return null;var n=/^[0-9]{5}$/.test(e)||/^[0-9]{5}-[0-9]{4}$/.test(e);return n?null:"Zip / Postal Codes in United States must be 5 digits (with optional 4 digit extension)"}};void 0!==e&&(t.onlyAfterCommit=e);return t},t.postalCode=function(e){var t={key:"postalCode",dependsOn:{controlKeys:["country"]},test:function(e,t,a){if(!e||0===e.length)return null;var n=a.country?a.country.value():"840",o=!0,r=null;return"840"===n?(o=/^[0-9]{5}$/.test(e)||/^[0-9]{5}-[0-9]{4}$/.test(e),r="Zip / Postal Codes in United States must be 5 digits (with optional 4 digit extension)"):"826"===n?(o=/^[a-zA-Z0-9]{2}[a-zA-Z0-9]?[a-zA-Z0-9]? [a-zA-Z0-9]{3}$/.test(e),r="Postcodes in the United Kingdom must have a 2 to 4 character code, followed by a space and a 3 character code"):"56"===n?(o=/^[0-9]{4}$/.test(e),r="Zip / Postal Codes in Belgium must have 4 digits"):"250"===n?(o=/^[0-9]{5}$/.test(e),r="Zip / Postal Codes in France must have 5 digits"):"724"===n?(o=/^[0-9]{5}$/.test(e),r="Zip / Postal Codes in Spain must have 5 digits"):"380"===n?(o=/^[0-9]{5}$/.test(e),r="Zip / Postal Codes in Italy must have 5 digits"):"528"===n?(o=/^[0-9]{4}\s[a-zA-Z]{2}$/.test(e),r="Zip / Postal Codes in Netherlands must have 4 digits followed by a space and 2 letters (NNNN AA)"):"276"===n&&(o=/^[0-9]{5}$/.test(e),r="Zip / Postal Codes in Germany must have 5 digits"),o?null:r}};void 0!==e&&(t.onlyAfterCommit=e);return t},t.phoneNumber=function(){return{key:"phone",onlyAfterCommit:!0,test:function(e,t,a){if(!e||0===e.length)return null;return/^\+?\d?\d?-?\(?\d{3}\)?-?\d{3}-?\d{4}$/.test(e)?null:"Must be a valid phone number."}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(44),n=o(a(16)),l=o(a(18));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f="validation",p=new(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.EventEmitter),a=t,(n=[{key:"addValidationListener",value:function(e){this.addListener(f,e)}},{key:"removeValidationListener",value:function(e){this.removeListener(f,e)}},{key:"handleActions",value:function(e){switch(e.type){case l.default.AddressValidation.ADDRESS_VALIDATION:this.addressValidation(e.args)}}},{key:"addressValidation",value:function(e){this.emit(f,e)}}])&&s(a.prototype,n),o&&s(a,o),t}());n.default.register(p.handleActions.bind(p));var m=p;t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=a(0))&&n.__esModule?n:{default:n};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var r=function(e){function r(e,t){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(a=!(o=s(r).call(this,e,t))||"object"!==l(o)&&"function"!=typeof o?c(n):o).makeClick=a.makeClick.bind(c(c(a))),a}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(r,o.default.Component),t=r,(a=[{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"render",value:function(){return o.default.createElement("div",{className:"add-button",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.props.onClick},o.default.createElement("img",{className:"add-button-icon",src:"img/plus-icon.png",alt:"ADD BUTTON"}),o.default.createElement("span",{className:"add-button-label"},this.props.label))}}])&&i(t.prototype,a),n&&i(t,n),r}();(t.default=r).propTypes={label:o.default.PropTypes.string.isRequired}},,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1)),s=o(a(13)),i=o(a(595)),u=(o(a(64)),n(a(14))),c=n(a(15)),d=o(a(8)),f=(o(a(3)),o(a(61))),p=n(a(11)),m=n(a(17)),h=o(a(6)),y=o(a(27)),b=n(a(9)),g=o(a(23));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=S(o).call(this,e))||"object"!==v(n)&&"function"!=typeof n?P(a):n).state={formElements:[],metaData:[],price:"0.00",showPriceCalculator:!1,GrwValue:m.hasFeatureFlag(p.GRW_PAPER),valid:!1},t.buildIncrementOptions=t.buildIncrementOptions.bind(P(P(t))),t.buildFormControls=t.buildFormControls.bind(P(P(t))),t.buildRadioFormControl=t.buildRadioFormControl.bind(P(P(t))),t.buildSelectFormControl=t.buildSelectFormControl.bind(P(P(t))),t.getPriceQuote=t.getPriceQuote.bind(P(P(t))),t.loadBookSizeTypeForm=t.loadBookSizeTypeForm.bind(P(P(t))),t.loadBookSizeTypeMetaData=t.loadBookSizeTypeMetaData.bind(P(P(t))),t.onChange=t.onChange.bind(P(P(t))),t.onPriceQuoteCompleted=t.onPriceQuoteCompleted.bind(P(P(t))),t.checkClick=t.checkClick.bind(P(P(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.props.buildABook||d.default.onStartNewProject();var e=d.default.project();this.props.projectType&&(e.type=this.props.projectType),e.setBookSizeTypeFields(),this.loadBookSizeTypeMetaData(),window.addEventListener("click",this.checkClick),window.document.getElementById("app").classList.add("hide-extra-option")}},{key:"componentWillMount",value:function(){d.default.addBookSizeTypeCompleteListener(this.getPriceQuote),d.default.addBookSizeTypeMetaDataListener(this.loadBookSizeTypeForm),d.default.addProjectQuoteListener(this.onPriceQuoteCompleted)}},{key:"componentWillUnmount",value:function(){d.default.removeBookSizeTypeCompleteListener(this.getPriceQuote),d.default.removeBookSizeTypeMetaDataListener(this.loadBookSizeTypeForm),d.default.removeProjectQuoteListener(this.onPriceQuoteCompleted),window.document.getElementById("app").classList.remove("hide-extra-option"),window.removeEventListener("click",this.checkClick)}},{key:"checkClick",value:function(e){if(this.state.GrwValue){if("tooltip-component"==e.target.className)return!1;1==(0,s.default)('[id*="popover"]').length&&(0,s.default)(".tooltip-component-text").click()}}},{key:"getPriceQuote",value:function(){var e=d.default.project(),t=e.getBookSizeTypeParams(!1,!0);this.setState({showPriceCalculator:!1}),u.calculateQuotedBookPrice(e.type,t)}},{key:"loadBookSizeTypeForm",value:function(e){var o,r=this,l=[],i=d.default.project(),t=i.getInitialBookSizeAndTypeStatus(!0);e.fields.map(function(t){var e=[];if(t.onChange=function(e){return r.onChange({field:t.key,values:e})},t.options=e,t.ref=t.key,t.value=i[t.key+"Initial"],t.disabled=!o||null===o||!i.allowedToEdit||null!==i.status&&i.status!==c.PROJECT_STATUSES.NEW,"pageCount"!==t.key)for(var a in t.values)e.push({label:t.values[a].label.replace(/\\/g,""),value:t.values[a].key,disabled:!t.values[a].available}),null!==t.image&&t.value===t.values[a].key&&(t.image=t.values[a].image);if("pageCount"===t.key){var n=r.buildIncrementOptions(t.values,parseInt(t.value));t.disabled=!i.allowedToEdit||null!==i.status&&i.status!==c.PROJECT_STATUSES.NEW,t.options=n.options,t.value=n.selectedValue}l.push(t),o=t.value}),this.setState({formElements:l,valid:t},function(){r.state.valid&&setTimeout(function(){u.bookSizeTypeComplete()},0)}),(0,s.default)(document).ready(function(){(0,s.default)('input[type="radio"]:visible').keypress(function(e){13==(e.keyCode?e.keyCode:e.which)&&e.currentTarget.click()})}),"ULTRA_PREMIUM"==i.printColor&&window.document.getElementById("app")&&window.document.getElementById("app").classList.remove("hide-extra-option")}},{key:"loadBookSizeTypeMetaData",value:function(){var e=d.default.project().getBookSizeTypeParams(!1,!0);u.loadBookSizeTypeMetaData(e)}},{key:"buildFormControls",value:function(){var n=this;return this.state.formElements.map(function(e){var t,a=e;return n.state.GrwValue||"paperColor"!=e.key||4!=a.options.length||(a.options=a.options.filter(function(e){return"GROUNDWOOD"!==e.value})),"radio"===e.format&&(t=n.buildRadioFormControl(a)),"select"===e.format&&(t=n.buildSelectFormControl(e)),n.state.GrwValue?r.default.createElement("div",{className:e.standAlone?"single-row-control":"paperColor"==e.key?"bst-column bst-color-weight":"bst-column",key:e.key},!e.standAlone&&r.default.createElement("h2",null,"paperColor"==e.key?"Paper Color & Weight":e.label,"paperColor"==e.key&&r.default.createElement(f.default,{className:"heading3-replace",info:!0,isHtml:!0,placement:"left",text:"<b>Groundwood (38 lb):</b> Available for black & white printing</br>\n\t\t\t<a href='https://press.barnesandnoble.com/bnpress-blog/why-choose-groundwood-paper' target=\"_blank\" >Why Should I Use Groundwood Paper for My Book?</a></br>\n\t\t\t</br><b>Cream (50 lb):</b> Available for black & white printing</br>\n\t\t\t</br><b>White (50 lb):</b> Available for black & white printing and standard color printing</br>\n\t\t\t</br><b>White (70 lb): </b> Available for all color printing options"},r.default.createElement("span",{className:"tooltip-component"}))),e.image&&r.default.createElement("img",{className:(0,l.default)("img-responsive",{disabled:e.disabled}),src:e.image,alt:e.label}),t):r.default.createElement("div",{className:e.standAlone?"single-row-control":"paperColor"==e.key?"bst-column bst-color-weight":"bst-column",key:e.key},!e.standAlone&&r.default.createElement("h2",null,e.label),e.image&&r.default.createElement("img",{className:(0,l.default)("img-responsive",{disabled:e.disabled}),src:e.image,alt:e.label}),t)})}},{key:"buildIncrementOptions",value:function(e,t){var a,n=e.increment,o=e.maxPages,r=[];r.push({label:"18 - 50",value:50}),18<=t&&t<=50&&(a=50);for(var l=50;l<=o-n;l+=n){var i=l+1;i<t&&t<=l+n&&(a=l+n),r.push({label:i+" - "+(l+n),value:l+n})}return{options:r,selectedValue:a}}},{key:"buildRadioFormControl",value:function(e){return r.default.createElement(y.default,{name:e.key,disableValidationMessages:!0,options:e.options,unboundValue:e.value,onChange:e.onChange,initDisabled:e.disabled,readOnly:this.props.readOnly,fieldLayout:"vertical",radioLayout:"vertical",showRadiosWhenReadOnly:!0,rules:[b.requiredAllTheTime()]})}},{key:"buildSelectFormControl",value:function(e){return r.default.createElement(g.default,{name:e.key,label:e.label,disableValidationMessages:!0,options:e.options,unboundValue:e.value,onChange:e.onChange,initDisabled:e.disabled,readOnly:this.props.readOnly,rules:[b.requiredAllTheTime()]})}},{key:"onChange",value:function(t){this.state.formElements.find(function(e){return e.key===t.field});var e=d.default.project(),a=this.props.showPrintPriceCalculator;if(e[t.field+"Initial"]=t.values.newValue,"pageCount"!==t.field){var n=this.state.formElements.map(function(e){return e.key}),o=n.findIndex(function(e){return e===t.field});o!==n.length-1&&this.setState({price:"0.00"}),u.bookSizeTypeReset(n.splice(o+1),a)}this.loadBookSizeTypeMetaData()}},{key:"onPriceQuoteCompleted",value:function(){var e,t=d.default.project();e=t.isSPB?t.quotedPrice.printCost:t.quotedPrice.price,this.props.showPrintPriceCalculator&&(t.price=t.quotedPrice.floorPrice),this.setState({price:e})}},{key:"render",value:function(){var e=(new Date).getTime(),t=d.default.project();return r.default.createElement("div",{key:e},r.default.createElement("div",{className:"book-size-type-container"},r.default.createElement("div",null,r.default.createElement(h.default,{ref:"form",className:"bst-form clearfix"},this.buildFormControls()),!this.props.showPrintPriceCalculator&&r.default.createElement("div",{className:"book-price"},r.default.createElement("div",{className:"retail-price"},this.state.price),r.default.createElement("div",{className:"retail-price-sign"},"$"),r.default.createElement("div",{className:"retail-price-label"},"Printing Cost Per Book"),r.default.createElement("div",{className:"note-label"},r.default.createElement("p",null,t.isSPB?"You will be able to determine your suggested retail price later.":"Plus Tax & Shipping"))))),this.props.showGetStartedButtons&&r.default.createElement(i.default,{disabled:!t.getInitialBookSizeAndTypeStatus(!0)}))}}])&&E(t.prototype,a),n&&E(t,n),o}();t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var b=o(a(0)),r=a(2),l=n(a(26)),g=o(a(4)),i=n(a(32)),s=o(a(50)),v=n(a(11)),E=n(a(108)),u=n(a(31)),S=n(a(17));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this,e))||"object"!==c(n)&&"function"!=typeof n?m(a):n).state={user:g.default.getUser()},t.onClick=t.onClick.bind(m(m(t))),t.onHandleLogout=t.onHandleLogout.bind(m(m(t))),t.onNavigationConfirmed=t.onNavigationConfirmed.bind(m(m(t))),t.onUserLoad=t.onUserLoad.bind(m(m(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,b.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){g.default.addChangeListener(this.onUserLoad),s.default.addNavigationConfirmedListener(this.onNavigationConfirmed)}},{key:"componentWillUnmount",value:function(){g.default.removeChangeListener(this.onUserLoad),s.default.removeNavigationConfirmedListener(this.onNavigationConfirmed)}},{key:"onClick",value:function(e){this.props.buildABook?this.onSaveBeforeLeaving(e):this.onNavigate(e)}},{key:"onHandleLogout",value:function(){l.logoutUser(),this.props.mobile?u.mobileMenuLinkClicked():u.menuLinkClicked()}},{key:"onNavigate",value:function(e){r.browserHistory.push(e),this.props.mobile?u.mobileMenuLinkClicked():u.menuLinkClicked()}},{key:"onNavigationConfirmed",value:function(e,t){"NavMenuLinks"===t&&setTimeout(function(){r.browserHistory.push(e)},0)}},{key:"onSaveBeforeLeaving",value:function(e){i.onNavigationInitiated(e,"NavMenuLinks")}},{key:"onUserLoad",value:function(){this.setState({user:g.default.getUser()})}},{key:"render",value:function(){var e,t=this,a=g.default.hasEaaPermission()?g.default.hasEaaPermission():[];0<a.length&&(e=3==a.length?"/"+E.AnalyticsPaths.Base:g.default.hasEaaPermission().includes(v.CUSTOMER)?"/"+E.AnalyticsPaths.Base:g.default.hasEaaPermission().includes(v.READING)?"/"+E.AnalyticsPaths.Base+"/"+E.AnalyticsPaths.ReadingData:"/"+E.AnalyticsPaths.Base+"/"+E.AnalyticsPaths.SiteData);var n,o,r,l=this.props,i=l.loggedState,s=l.mobile,u=this.state.user,c=null,d=g.default.hasPermissions(v.AUTHOR_PROFILE)&&u&&u.authorAccess,f=u&&u.permissions&&u.permissions.includes("ADMIN_PERMISSION"),p=null,m=null,h=null,y=null;return n=b.default.createElement("span",null,b.default.createElement("li",{role:"separator",className:"divider"}),b.default.createElement("li",{role:"menuitem"},b.default.createElement("a",{onClick:function(){return t.onNavigate("/"+E.LandingPagesPaths.HowItWorks)}},"How It Works")),b.default.createElement("li",{role:"menuitem"},b.default.createElement("a",{onClick:function(){return t.onNavigate("/"+E.LandingPagesPaths.ReachMillionsOfReaders)}},"Reach Millions")),b.default.createElement("li",{role:"menuitem"},b.default.createElement("a",{onClick:function(){return t.onNavigate("/"+E.LandingPagesPaths.MakeMoreMoney)}},"Make Money")),b.default.createElement("li",{role:"menuitem"},b.default.createElement("a",{onClick:function(){return t.onNavigate("/"+E.LandingPagesPaths.PrintOnDemand)}},"Print Personal Books")),b.default.createElement("li",{role:"separator",className:"divider"})),o=b.default.createElement("span",null,b.default.createElement("li",{className:"sign-in-button",role:"menuitem",onClick:function(){return t.onNavigate("/"+E.AuthenticationPaths.SignIn)}},"Sign In"),b.default.createElement("li",null,b.default.createElement("a",{onClick:function(){return t.onNavigate("/"+E.AuthenticationPaths.CreateAccount)}},"Create Account")),!s||s&&i.timedOutUser?b.default.createElement("li",{role:"separator",className:"divider"}):null),u&&!i.loggedIn&&i.timedOutUser&&(m=b.default.createElement("span",{className:"not-you-text"},"Not ",i.loggedIn?u.firstName:i.timedOutUserName,"?")),r=b.default.createElement("li",{className:"sign-out-content",role:"menuitem"},m,b.default.createElement("span",{className:"sign-out-link",onClick:this.onHandleLogout},b.default.createElement("a",{href:"javascript:void(0)"},"Sign Out"))),u&&(i.loggedIn||i.timedOutUser)&&(y=b.default.createElement("span",{className:"sign-out-template "+(!i.loggedIn&&i.timedOutUser?"sign-out-template-timed-out":"")},!s&&b.default.createElement("li",{role:"separator",className:"divider"}),r),s?p=b.default.createElement("li",{role:"menuitem"},b.default.createElement("a",{className:"welcome-user-text",onClick:function(){return t.onNavigate("/"+E.ProfilePaths.Base)}},"Welcome, ",i.loggedIn?u.firstName||u.first_name:i.timedOutUserName)):(h={marginTop:12},c={marginTop:12})),b.default.createElement("ul",{id:"dropdown-menu",className:"dropdown-menu nav-menu-links "+(s?"dropdown-menu-mobile":""),role:"menu",ref:"dropdownMenu"},i.loggedIn?null:o,p,i.loggedIn||i.timedOutUser||!s?null:n,f&&b.default.createElement("li",{style:c,role:"menuitem"},b.default.createElement("a",{href:"/admin"},"Admin")),f&&b.default.createElement("li",{role:"separator",className:"divider"}),b.default.createElement("li",{style:h,role:"menuitem"},b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.onClick("/"+E.ProjectPaths.Base)}},"Projects")),S.hasFeatureFlag(v.TOP_NAV)&&b.default.createElement("li",{className:"dropdown-link",role:"menuitem"},b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.onClick("/"+E.ProjectPaths.Base+"/"+E.ProjectPaths.Promote)}}," Ad Banner Design Tool")),b.default.createElement("li",{className:"dropdown-link",role:"menuitem"},b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.onClick("/"+E.SalesReportingPaths.Base)}},"Sales Reports")),0<g.default.hasEaaPermission().length&&b.default.createElement("li",{className:"dropdown-link",role:"menuitem"},b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.onClick(e)}},"Analytics")),b.default.createElement("li",{className:"dropdown-link",role:"menuitem"},b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.onClick("/"+E.ProfilePaths.Base)}},"Profile")),b.default.createElement("li",{className:"dropdown-link",role:"menuitem"},b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.onClick("/"+E.VendorPaths.Base)}},"Vendor Account")),g.default.hasSharedAccessPermission(v.SHARED_ACCESS)&&b.default.createElement("li",{className:"dropdown-link",role:"menuitem"},b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.onClick("/"+E.ManageContributorsPaths.Base)}},"Manage Contributors")),0<g.default.hasEaaPermission().length&&b.default.createElement("li",{className:"dropdown-link",role:"menuitem"},b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.onClick("/analytics/"+E.AnalyticsPaths.ManageAnalyticsSubscription)}},"Analytics Subscription")),b.default.createElement("li",{className:"dropdown-link",role:"menuitem"},b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.onClick("/"+E.OrderHistoryPaths.Base)}},"Order History")),s&&d&&b.default.createElement("li",{className:"dropdown-link",role:"menuitem"},b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.onClick("/"+E.AuthorPaths.Base)}},"B&N Author Page")),b.default.createElement("li",{className:"dropdown-link",role:"menuitem"},b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.onClick("/"+E.LandingPagesPaths.BaseAuthor)}},"Author Tools & Tips")),b.default.createElement("li",{className:"dropdown-link",role:"menuitem"},b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.onClick("/"+E.LandingPagesPaths.AuthorPublishingServices)}},"Author Self-Publishing",b.default.createElement("br",null)," Services")),b.default.createElement("li",{className:"dropdown-link",role:"menuitem"},b.default.createElement("a",{href:"/"+E.LandingPagesPaths.Blog+"/"},"Blog")),g.default.hasPermissions(v.AD_READY)&&b.default.createElement("li",{className:"dropdown-link",role:"menuitem"},b.default.createElement("a",{href:"javascript:void(0)",onClick:function(){return t.onClick("/"+E.UtilitiesPaths.Base+"/"+E.UtilitiesPaths.AdReady)}},"ISBN Lookup")),(i.loggedIn||i.timedOutUser)&&s?n:null,y)}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=h},,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(14));function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.files=[],this.projectElementType=null}var t,a,n;return t=e,(a=[{key:"checkFileStatus",value:function(e,t,a){var n={id:e.id,projectType:e.projectType,projectElementType:t,fileType:a};o.getPreflightStatus(n)}},{key:"uploadFiles",value:function(e){var t=e.file[0],a=new FormData;return a.append("authenticity_token","gdrAe7DK9aHyYOSbFM9KgaumjDQUv2GVo+sHK4JmJV8="),a.append("file",t,t.name),a.append("projectElementType",e.projectElementType),a.append("projectId",e.projectId),a}}])&&r(t.prototype,a),n&&r(t,n),e}();t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(216));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"information-modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Formatting Guidelines for Microsoft Word Documents")),r.default.createElement(l.default,null,r.default.createElement("div",{id:"modalBody",className:"modal-body"},r.default.createElement("p",null,"Some tips for how best to format your Word document to improve the look of your eBook:"),r.default.createElement("ul",null,r.default.createElement("li",null,r.default.createElement("strong",null,"To create chapter headings"),", insert a Section Break at the beginning each Chapter. A chapter heading will be created for every Section Break in your document, so only use a Section Break where you want a chapter heading to be created. To insert a Section Break at the beginning of each chapter of your Word file, put the cursor at the beginning of each chapter and select [Page Layout > Breaks > Section Breaks > Next Page]. If you see extra chapter headings while reviewing your proof, it usually means you have extra Section Breaks in your Word document. To remove the extra Section Breaks, open up your original Word file on your computer and click [View > Draft] to display the Section Breaks, and then scroll through your document and delete all of the unwanted Section Breaks. When you're finished, re-upload your interior file."),r.default.createElement("li",null,r.default.createElement("strong",null,"Bold, italic, underline and strike-through")," are supported."),r.default.createElement("li",null,"Internal and external links are allowed in your eBook, but note that customers may not be able to link out to external links while reading on NOOK."),r.default.createElement("li",null,"To decrease the ",r.default.createElement("strong",null,"space between your paragraphs")," when you convert from Word to ePub, you should only include a single return between your paragraphs. Adding extra lines will cause very large spaces between paragraphs."),r.default.createElement("li",null,"To increase the ",r.default.createElement("strong",null,"space between your paragraphs"),", you can use the Word paragraph tool to increase the spaces without creating excessive space. Adding extra lines will cause very large spaces between paragraphs."),r.default.createElement("li",null,"To ",r.default.createElement("strong",null,"indent")," your paragraphs, do NOT use the Tab key to create the indents. It is better to set up a first line indent using the Word Paragraph tool."),r.default.createElement("li",null,"To create a ",r.default.createElement("strong",null,"bulleted list"),', use Microsoft Word\'s built-in bulleted list tool. Do not insert symbols to create bullet pointsâ€”most symbols will translate into a question mark ("?").'),r.default.createElement("li",null,"To create a ",r.default.createElement("strong",null,"numbered list")," or ",r.default.createElement("strong",null,"multi-level outline"),", use Microsoft Word's built-in numbered list tool."),r.default.createElement("li",null,"Use one of the following ",r.default.createElement("strong",null,"fonts"),": Times New Roman, Arial or Courier New."),r.default.createElement("li",null,"Use Caps Lock to type in ",r.default.createElement("strong",null,"capital letters")," if you want text to appear in all capital letters. Do not use the Word format for All Caps."),r.default.createElement("li",null,"If you want ",r.default.createElement("strong",null,"small caps"),", type in capital letters and change the font size for the text area that you want to appear in small caps. Do not use the Word format for Small Caps"),r.default.createElement("li",null,"Do not use ",r.default.createElement("strong",null,"columns"),"."),r.default.createElement("li",null,"Do not use ",r.default.createElement("strong",null,"superscripts")," and ",r.default.createElement("strong",null,"subscripts"),", as they will cause extra leading (space between the lines of text)."),r.default.createElement("li",null,"To indent a large portion of text, for example when creating block ",r.default.createElement("strong",null,"quotes"),", use Word margin controls."),r.default.createElement("li",null,r.default.createElement("strong",null,"Images")," can be formatted flush left, flush right or centred."),r.default.createElement("li",null,r.default.createElement("strong",null,"Text wraps")," should be above and below the images, not around the image."),r.default.createElement("li",null,"Avoid using most ",r.default.createElement("strong",null,"symbols"),"."),r.default.createElement("li",null,"Ensure that any ",r.default.createElement("strong",null,"fractions"),' are kept as "1/4." Word will automatically format the fractions to appear as symbols, which will not translate correctly into your eBook.'),r.default.createElement("li",null,"Ensure that any ",r.default.createElement("strong",null,"ordinal endings"),' are kept in line with the text ("1st") and not auto-formatted as superscript. Keeping them as superscript will produce added leading.'),r.default.createElement("li",null,"Make ",r.default.createElement("strong",null,"tables")," that can be viewed in portrait mode rather than landscape mode to make them fit on the page.")))))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1)),i=o(a(369)),s=(n(a(28)),o(a(30)),o(a(592))),u=o(a(595)),c=o(a(594)),d=o(a(64)),f=n(a(14)),p=n(a(15)),m=o(a(8));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E="eBook",S="print",k=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=b(o).call(this,e))||"object"!==h(n)&&"function"!=typeof n?v(a):n).state={activeTab:E,isProjectReady:!1,project:null,showPrintPriceCalculator:!1,valid:!1},t.onBookSizeTypeReset=t.onBookSizeTypeReset.bind(v(v(t))),t.onPriceChange=t.onPriceChange.bind(v(v(t))),t.onPriceQuoteCompleted=t.onPriceQuoteCompleted.bind(v(v(t))),t.onProjectChanged=t.onProjectChanged.bind(v(v(t))),t.onValidationChange=t.onValidationChange.bind(v(v(t))),t.getRoyaltyRates=t.getRoyaltyRates.bind(v(v(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){m.default.addBookSizeTypeResetListener(this.onBookSizeTypeReset),m.default.addProjectChangedListener(this.onProjectChanged),m.default.addProjectQuoteListener(this.onPriceQuoteCompleted),m.default.addRoyaltyPricesListener(this.getRoyaltyRates)}},{key:"componentWillUnmount",value:function(){m.default.removeBookSizeTypeResetListener(this.onBookSizeTypeReset),m.default.removeProjectChangedListener(this.onProjectChanged),m.default.removeProjectQuoteListener(this.onPriceQuoteCompleted),m.default.removeRoyaltyPricesListener(this.getRoyaltyRates)}},{key:"componentDidMount",value:function(){var e=new d.default;e.type=p.EBOOK,e.price="9.99",setTimeout(function(){f.updateProject(e,!1)},0),f.getEbookRoyaltyRates()}},{key:"onBookSizeTypeReset",value:function(){this.setState({valid:!1})}},{key:"onProjectChanged",value:function(){this.setState({isProjectReady:!0,project:m.default.project()})}},{key:"getRoyaltyRates",value:function(){var e=m.default.royalty();this.setState({lengthOfRoyaltyPrices:e.data.setting.length?e.data.setting.length:"",royaltyPricesSettingValue:e.data.setting[0].SettingValue})}},{key:"onPriceChange",value:function(e){m.default.project().price=e.newValue}},{key:"onPriceQuoteCompleted",value:function(){this.setState({showPrintPriceCalculator:!0,valid:!0})}},{key:"onTabClick",value:function(e){this.setState({activeTab:e,showPrintPriceCalculator:!1,valid:!1});var t=new d.default;e===S?t.type=p.PRINT:(t.type=p.EBOOK,t.price="9.99"),f.updateProject(t,!1)}},{key:"onValidationChange",value:function(e,t){var a=m.default.project().type===p.EBOOK?e:0<t&&e;this.setState({valid:a})}},{key:"render",value:function(){var e=this;if(!this.state.isProjectReady)return null;var t,a=this.state.activeTab===E,n=this.state.activeTab===S;return t=1<this.state.lengthOfRoyaltyPrices?a?"Earn royalties up to 65% when you publish direct on BN.com with B&N Press. Exclusivity is not required to publish with us, and there are no hidden fees, ever. Use the tool below to determine exactly how much you can make per book.":"Earn more than twice as much when you publish direct on BN.com with B&N Press. By avoiding third party distributors (re: no middle man) and taking advantage of our competitive printing costs, you keep more money for yourself. Use the tool below to determine your print cost and exactly how much you can make per book.":a?"With a flat "+this.state.royaltyPricesSettingValue+"% royalty rate, use the tool below to determine how much you can make per book sold.":"With over 20 trim sizes and multiple formatting options, use the tool below to determine your print cost and learn how much you can make per book.",r.default.createElement("div",null,r.default.createElement("ul",{className:"nav nav-tabs"},r.default.createElement("li",{className:(0,l.default)({active:a}),onClick:function(){return e.onTabClick(E)}},r.default.createElement("a",null,"eBook")),r.default.createElement("li",{className:(0,l.default)({active:n}),onClick:function(){return e.onTabClick(S)}},r.default.createElement("a",null,"Print Book"))),r.default.createElement("div",{className:"price-calculator"},r.default.createElement("div",{className:"price-tab"},r.default.createElement("p",null,t),a&&r.default.createElement(s.default,{project:this.state.project,onChange:this.onPriceChange,onValidationChange:this.onValidationChange}),n&&r.default.createElement("div",null,r.default.createElement("div",{className:"book-size-type-landing"},r.default.createElement(i.default,{showPrintPriceCalculator:!0,projectType:p.PRINT}),this.state.showPrintPriceCalculator&&r.default.createElement(c.default,{onChange:this.onPriceChange,onValidationChange:this.onValidationChange,pricedProjectCreator:!0}))),r.default.createElement(u.default,{pricedProjectCreator:!0,disabled:!this.state.valid}))))}}])&&y(t.prototype,a),n&&y(t,n),o}();t.default=k},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),i=n(a(1));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s(this,u(a).call(this,e))).state={progressProperties:t.props.progressProperties},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,l.default.Component),t=a,(n=[{key:"componentWillReceiveProps",value:function(e,t){e&&(this.state.progressProperties=e.progressProperties)}},{key:"render",value:function(){var e=this.state.progressProperties,t=e.stepCount,a=e.stepOne,n=e.stepTwo,o=e.stepThree,r=e.stepFour;return l.default.createElement("div",{className:(0,i.default)("progress-indicator","steps-"+t)},l.default.createElement("div",{className:(0,i.default)("step1",{active:a.active},{error:a.error},{complete:a.complete})},l.default.createElement("div",{className:"arrow"}),l.default.createElement("div",{className:"title"},a.title),a.check&&l.default.createElement("div",{className:"checkmark"})),l.default.createElement("div",{className:(0,i.default)("step2",{active:n.active},{error:n.error},{complete:n.complete})},l.default.createElement("div",{className:"arrow"}),l.default.createElement("div",{className:"title"},n.title),n.check&&l.default.createElement("div",{className:"checkmark"})),2<t&&l.default.createElement("div",{className:(0,i.default)("step3",{active:o.active},{error:o.error},{complete:o.complete})},l.default.createElement("div",{className:"arrow"}),l.default.createElement("div",{className:"title"},o.title),o.check&&l.default.createElement("div",{className:"checkmark"})),3<t&&l.default.createElement("div",{className:(0,i.default)("step4",{active:r.active},{error:r.error},{complete:r.complete})},l.default.createElement("div",{className:"title"},r.title),r.check&&l.default.createElement("div",{className:"checkmark"})))}}])&&r(t.prototype,n),o&&r(t,o),a}();t.default=d},function(e,t,a){"use strict";function n(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){o(t,e,a[e])})}return t}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function r(e,t,a,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this._drillDown=e,this._sort=t,this._descending=a,this._pageNum=n,this._limit=o,this._filters={},this._parentParams={}}var e,t,a;return e=r,(t=[{key:"addFilterMap",value:function(e){this._filters=n({},this._filters,e)}},{key:"addToParentParams",value:function(e){this._parentParams=n({},this._parentParams,e)}},{key:"clearFilters",value:function(){this._filters={}}},{key:"clearParentParams",value:function(){this._parentParams={}}},{key:"toJSON",value:function(){return n({},this.filters,this.parentParams,{page:this.page,drilldown:this.drilldown,limit:this.limit,sort:this.sort,descending:this.descending})}},{key:"descending",get:function(){return this._descending}},{key:"drilldown",get:function(){return this._drillDown}},{key:"filters",get:function(){return this._filters}},{key:"limit",get:function(){return this._limit}},{key:"page",get:function(){return this._pageNum}},{key:"parentParams",get:function(){return this._parentParams}},{key:"sort",get:function(){return this._sort}}])&&l(e.prototype,t),a&&l(e,a),r}();t.default=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0;t.Base="author-profile"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forgotPasswordTokenCheck=function(e,t){return n.get("/api/authentication/forgot-password-token-check?forgotPassToken="+e,{},t)},t.forgotPasswordUpdate=function(e,t){return n.post("/api/authentication/forgot-password-update",e,t)},t.forgotPassword=function(e,t){return n.post("/api/authentication/forgot-password",e,t)},t.forgotPasswordQuestion=function(e){return o.get("/api/authentication/forgot-password-question?email="+e,{})},t.forgotPasswordAnswerCheck=function(e){return o.post("/api/authentication/forgot-password-question-answer",e)},t.createAccount=function(e,t){return n.post("/api/authentication/create-account",e,t)},t.signIn=function(e,t){return o.post("/api/authentication/signin",e)},t.getContributorDetails=function(e,t){return o.get("/api/authentication/getContributor?queryParam="+e,{},t)};var n=r(a(130)),o=(r(a(67)),r(a(1082)));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyPage=t.TermsOfUse=t.ReferralProgramTerms=t.RoyaltyPaymentTerms=t.MembershipAgreement=t.ContentPolicy=t.BaseLegal=t.WhatsUnderTheCover=t.TitleSubTitleBasics=t.Advertising=t.BookCoverTemplateGenerator=t.AuthorPublishingServices=t.MetaDataBasics=t.CopyBasics=t.BNPressPathToPublication=t.AuthorPromotions=t.AuthorPlatformBasics=t.BaseAuthor=t.Blog=t.WhatsNew=t.Sitemap=t.ReachMillionsOfReaders=t.PrintOnDemand=t.Promotion=t.Message=t.MakeMoreMoney=t.HowItWorks=t.AboutUs=void 0;t.AboutUs="about-us";t.HowItWorks="how-it-works";t.MakeMoreMoney="make-more-money";t.Message="message";t.Promotion="promotion";t.PrintOnDemand="print-on-demand";t.ReachMillionsOfReaders="reach-millions-of-readers";t.Sitemap="sitemap";t.WhatsNew="whats-new";t.Blog="bnpress-blog";t.BaseAuthor="author-tools-and-tips";t.AuthorPlatformBasics="author-platform-basics";t.AuthorPromotions="author-promotions";t.BNPressPathToPublication="bn-press-path-to-publication";t.CopyBasics="copy-basics";t.MetaDataBasics="metadata-basics";t.AuthorPublishingServices="self-publishing-services";t.BookCoverTemplateGenerator="book-cover-template-generator";t.Advertising="advertising";t.TitleSubTitleBasics="title-subtitle-basics";t.WhatsUnderTheCover="whats-under-the-cover";t.BaseLegal="legal";t.ContentPolicy="content-policy";t.MembershipAgreement="membership-agreement";t.RoyaltyPaymentTerms="royalty-payment-terms";t.ReferralProgramTerms="referral-program-terms";t.TermsOfUse="terms-and-conditions";t.EmptyPage="emptypage"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0;t.Base="order-confirmation"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0;t.Base="my-profile"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createChart=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){o(t,e,a[e])})}return t}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.createChart=function(n){return function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=s(o).call(this,e))||"object"!==l(n)&&"function"!=typeof n?c(a):n).someVal="Val",t.getMaxChartValue=t.getMaxChartValue.bind(c(c(t))),t.updateChart=t.updateChart.bind(c(c(t))),t}var t,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,r.default.Component),i((t=o).prototype,[{key:"getMaxChartValue",value:function(e){for(var t=0,a=0,n=0;n<e.length;n++)for(var o=0;o<e[n].data.length;o++)t<(a=void 0!==e[n].data[o].y?e[n].data[o].y:e[n].data[o])&&(t=a);return t}},{key:"updateChart",value:function(o,t,r,l){var i=this,a=this,s=o.xAxis[0],u=o.yAxis[0],c=o.series[0],e=u.getExtremes(),d=0;if(r&&0<r.length&&(d=this.refs.refChart&&this.refs.refChart.getMaxChartValue?this.refs.refChart.getMaxChartValue(r):this.getMaxChartValue(r)),0===d&&(d=100),this.props.removeUnusedSeries)for(var n=o.series.length;n>r.length;)o.series[n-1].remove(!0,!0),n--;for(var f=[],p=0;p<s.categories.length;p++)f.push(0);u.setExtremes(e.min,e.max,!1);for(var m=0;m<o.series.length;m++)o.series[m].setData(f,!1);o.redraw(),setTimeout(function(){var n=a;f=[];for(var e=0;e<t.length;e++)f.push(0);s.setCategories(t,!1),c.setData(f,!1),o.redraw(),setTimeout(function(){var e=n;i.yAxisLabelFormatter=l,u.setExtremes(0,d,!1);for(var t=0;t<r.length;t++)if(t>=o.series.length){var a={};e.refs.refChart&&e.refs.refChart.getExtraSeriesAttributes&&(a=e.refs.refChart.getExtraSeriesAttributes(r[t])),o.addSeries(h({},r[t],{className:r[t].name,colorIndex:t},a),!1,!0)}else o.series[t].update({className:r[t].name}),o.series[t].setData(r[t].data,!1);o.redraw()},50)},550)}},{key:"render",value:function(){return r.default.createElement(n,{ref:"refChart",type:this.props.chartType,disabled:this.props.disabled,format:this.props.chartLabelFormat,categories:this.props.categories,series:this.props.series,applyColumnLabel:this.props.applyColumnLabel,formatXAxisLabel:this.props.formatXAxisLabel,formatYAxisLabel:this.props.formatYAxisLabel,formatLegendLabel:this.props.formatLegendLabel,formatTooltip:this.props.formatTooltip,updateChart:this.updateChart,onItemClicked:this.props.onItemClicked})}}]),a&&i(t,a),o}()}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var b=o(a(0)),r=(n(a(43)),n(a(1))),l=o(a(68)),c=n(a(74)),g=n(a(341)),v=o(a(57)),i=n(a(51)),E=n(a(1101)),S=n(a(61)),k=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?p(a):n).state={bookType:v.BOOK_TYPES.ALL,bookTypeEnabled:!0,isFreeFilterEnabled:!0,doughnutData:"",renderData:"",hasData:"",loadingDonut:!1,loading:!1,showInfoIcon:!0},t.getHeaderStyles=t.getHeaderStyles.bind(p(p(t))),t.onFilterAllDonughtBooks=t.onFilterAllDonughtBooks.bind(p(p(t))),t.onFilterEBooksDonught=t.onFilterEBooksDonught.bind(p(p(t))),t.onFilterPrintDonughtBooks=t.onFilterPrintDonughtBooks.bind(p(p(t))),t.onDoughnutLoaded=t.onDoughnutLoaded.bind(p(p(t))),t.isEmpty=t.isEmpty.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,b.Component),t=o,(a=[{key:"onFilterAllDonughtBooks",value:function(e){var t={ean:this.props.ean,projectType:"ALL"};l.getAllDoughnutData(t),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingDonut:!0})}},{key:"onFilterEBooksDonught",value:function(e){var t={ean:this.props.ean,projectType:"EBOOK"};l.getAllDoughnutData(t),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingDonut:!0})}},{key:"onFilterPrintDonughtBooks",value:function(e){var t={ean:this.props.ean,projectType:"SPB"};l.getAllDoughnutData(t),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingDonut:!0})}},{key:"getHeaderStyles",value:function(e,t,a,n){return n=i.default.hasUserPublishedBefore()&&n,(0,r.default)(e,{"active-selection":t===a})}},{key:"componentWillMount",value:function(){c.default.addDoughnutBooksResultLoadedListener(this.onDoughnutLoaded),this.setState({loading:!0})}},{key:"componentWillUnmount",value:function(){c.default.removeDoughnutBooksResultLoadedListener(this.onDoughnutLoaded)}},{key:"componentDidMount",value:function(){}},{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"onDoughnutLoaded",value:function(){var e=c.default.allDoughnutData();this.isEmpty(e.result)?this.setState({renderData:!0,hasData:!1,loadingDonut:!1,loading:!1}):this.setState({doughnutData:e,renderData:!1,hasData:!0,loadingDonut:!1,loading:!1});var t,a,n,o=[],r=0,l=0,i=0,s=[];if(this.state.hasData){for(var u=0;u<this.state.doughnutData.result.siteDataList.length;u++)r<=90?(r+=parseFloat(this.state.doughnutData.result.siteDataList[u].percent),t={name:this.state.doughnutData.result.siteDataList[u].channel,y:parseFloat(this.state.doughnutData.result.siteDataList[u].percent),colorIndex:u+7},o.push(t)):(l+=parseFloat(this.state.doughnutData.result.siteDataList[u].percent),n={name:this.state.doughnutData.result.siteDataList[u].channel,y:parseFloat(this.state.doughnutData.result.siteDataList[u].percent)},s.push(n)),i=o.length;0!==l?(this.setState({showInfoIcon:!0}),a={name:"Others",y:l,colorIndex:i+7},o.push(a)):this.setState({showInfoIcon:!1})}}},{key:"render",value:function(){var e,t,a,n,o,r,l=this,i=[],s=v.BOOK_TYPES,u=0,c=0,d=0,f=this.props.ean?this.props.ean:"None Provided";r=this.state.bookType==v.BOOK_TYPES.EBOOK?"eBooks":this.state.bookType==v.BOOK_TYPES.ALL?"All Books":"Print Books";var p=[];if(this.state.hasData){for(var m=0;m<this.state.doughnutData.result.siteDataList.length;m++)u<=90?(u+=parseFloat(this.state.doughnutData.result.siteDataList[m].percent),a={name:this.state.doughnutData.result.siteDataList[m].channel,y:parseFloat(this.state.doughnutData.result.siteDataList[m].percent),colorIndex:m+7},i.push(a)):(c+=parseFloat(this.state.doughnutData.result.siteDataList[m].percent),o={name:this.state.doughnutData.result.siteDataList[m].channel,y:parseFloat(this.state.doughnutData.result.siteDataList[m].percent)},p.push(o)),d=i.length;0!==c&&(n={name:"Others",y:c,colorIndex:d+7},i.push(n))}else e=[{y:0,colorIndex:4},{y:100,colorIndex:4}],t=b.default.createElement("span",null,b.default.createElement("p",null,"You currently don't have")," visitors by channel data");var h="";p.forEach(function(e){0<e.y&&(h+=e.name+"  :  <b>"+e.y+"%</b><br>")});var y='<b class="heading-gap-15">Others:</b><br>'+h;return b.default.createElement("div",{className:"analytics-margin-top site-donut"},b.default.createElement("div",null,b.default.createElement("div",{className:"row"},b.default.createElement("div",null,b.default.createElement("h3",{className:"tooltip-description"},"Your Book Detail Page Visitors by Channel "),b.default.createElement(S.default,{info:!0,text:"This graph shows you where your customers came from to arrive at your bookâ€™s product page on BN.com. The graph lists the percentage of customers by the different channels by which they arrived at your bookâ€™s BN.com product page.",trigger:"focus"},b.default.createElement("span",{className:"Whats-This"},"What's This?"))),b.default.createElement("div",{className:"widget"},b.default.createElement("div",{className:"controls clearfix"},b.default.createElement("ul",{className:"book-type"},b.default.createElement("li",{className:this.getHeaderStyles("all-books",this.state.bookType,s.ALL,this.state.bookTypeEnabled),onClick:function(){return l.onFilterAllDonughtBooks(s.ALL)}},"All Books"),b.default.createElement("li",{className:this.getHeaderStyles("ebook",this.state.bookType,s.EBOOK,this.state.bookTypeEnabled),onClick:function(){return l.onFilterEBooksDonught(s.EBOOK)}},"eBook"),b.default.createElement("li",{className:this.getHeaderStyles("print",this.state.bookType,s.PRINT,this.state.bookTypeEnabled),onClick:function(){return l.onFilterPrintDonughtBooks(s.PRINT)}},"Print"))))),b.default.createElement("div",{className:"Slide panel-body",id:"donutChart"},this.state.hasData&&b.default.createElement("div",{id:"donutInnerDiv",className:"doughnut doughnut-Align col-sm-12  col-md-12  col-xs-12"},this.state.showInfoIcon&&b.default.createElement(S.default,{className:"iconPosition",isHtml:"true",trigger:"hover",info:!0,text:y},b.default.createElement("span",{className:"icon-info"})),this.state.doughnutData&&b.default.createElement(E.default,{data:i,height:355,width:800}))),this.state.renderData&&b.default.createElement("div",{className:"panel-body donut-analytics"},b.default.createElement("div",{className:"doughnut col-sm-2 col-md-3 col-xs-12"}),b.default.createElement("div",{className:"doughnut col-sm-4 col-md-4 col-xs-12 edgeCaseCenterDoughnut"},b.default.createElement(g.default,{data:e,height:300,width:300,title:t,innersize:"75%",donutdata3:o}),!this.state.loadingDonut&&!this.props.loader&&b.default.createElement("div",null,(this.props.ean||this.state.bookType==v.BOOK_TYPES.EBOOK||this.state.bookType==v.BOOK_TYPES.PRINT)&&!this.state.loadingDonut&&!this.state.hasData&&b.default.createElement("div",{className:"edgeCaseMessage col-sm-12 col-md-8 col-xs-12 col-lg-6"},b.default.createElement("div",{className:"edgeCaseMessageStyle"},b.default.createElement("p",{className:"searchTermStyle"},"We found no data matching your search criteria"),b.default.createElement("p",null,"Search Term:",b.default.createElement("strong",null,f)),b.default.createElement("p",null,"Book Type:",b.default.createElement("strong",null,r)))))),b.default.createElement("div",{className:"doughnut col-sm-4 col-md-4 col-xs-12"}))),this.state.loadingDonut&&b.default.createElement("div",{className:"spinner-area"},b.default.createElement(k.default,null)),this.state.loading&&b.default.createElement("div",{className:"spinner-area"},b.default.createElement(k.default,{top:40})),this.props.loader&&b.default.createElement("div",{className:"spinner-area"},b.default.createElement(k.default,null)))}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=m},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={title:"United States of America with Territories",version:"1.1.2",type:"FeatureCollection",copyright:"Copyright (c) 2015 Highsoft AS, Based on data from Natural Earth",copyrightShort:"Natural Earth",copyrightUrl:"http://www.naturalearthdata.com",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG:102004"}},"hc-transform":{default:{crs:"+proj=lcc +lat_1=33 +lat_2=45 +lat_0=39 +lon_0=-96 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs",scale:.000151481324748,jsonres:15.5,jsonmarginX:-999,jsonmarginY:9851,xoffset:-2361356.09818,yoffset:1398996.77886},"us-all-hawaii":{xpan:190,ypan:417,hitZone:{type:"Polygon",coordinates:[[[1747,3920],[3651,2950],[3651,-999],[1747,-999],[1747,3920]]]},crs:"+proj=aea +lat_1=8 +lat_2=18 +lat_0=13 +lon_0=-157 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs",scale:.000123090941806,jsonres:15.5,jsonmarginX:-999,jsonmarginY:9851,xoffset:-338610.47557,yoffset:1022754.31736},"us-all-alaska":{rotation:-.0174532925199,xpan:5,ypan:357,hitZone:{type:"Polygon",coordinates:[[[-999,5188],[-707,5188],[1747,3920],[1747,-999],[-999,-999],[-999,5188]]]},crs:"+proj=tmerc +lat_0=54 +lon_0=-142 +k=0.9999 +x_0=500000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",scale:584397059179e-16,jsonres:15.5,jsonmarginX:-999,jsonmarginY:9851,xoffset:-1566154.00853,yoffset:1992671.14918},"us-all-guam":{xpan:407,ypan:429,hitZone:{type:"Polygon",coordinates:[[[5201,3248],[5821,3248],[5821,-999],[5201,-999],[5201,3248]]]},crs:"+proj=utm +zone=55 +datum=WGS84 +units=m +no_defs",scale:.000768626755974,jsonres:15.5,jsonmarginX:-999,jsonmarginY:9851,xoffset:242750.516342,yoffset:1510475.51646},"us-all-mariana-1":{xpan:508,ypan:431,hitZone:{type:"Polygon",coordinates:[[[6441,3248],[7185,3248],[7185,2860],[6441,2860],[6441,3248]]]},crs:"+proj=utm +zone=55 +datum=WGS84 +units=m +no_defs",scale:.000380973817952,jsonres:15.5,jsonmarginX:-999,jsonmarginY:9851,xoffset:347024.420016,yoffset:1688783.49701},"us-all-mariana-2":{xpan:493,ypan:457,hitZone:{type:"Polygon",coordinates:[[[6441,2860],[7185,2860],[7185,-999],[6441,-999],[6441,2860]]]},crs:"+proj=utm +zone=55 +datum=WGS84 +units=m +no_defs",scale:.000431730448719,jsonres:15.5,jsonmarginX:-999,jsonmarginY:9851,xoffset:296985.245592,yoffset:1570837.28512},"us-all-samoa":{xpan:444,ypan:444,hitZone:{type:"Polygon",coordinates:[[[5821,3248],[6441,3248],[6441,-999],[5821,-999],[5821,3248]]]},crs:"+proj=utm +zone=2 +south +datum=WGS84 +units=m +no_defs",scale:.00112350145421,jsonres:15.5,jsonmarginX:-999,jsonmarginY:9851,xoffset:518198.280846,yoffset:8424335.53129},"us-all-puerto":{xpan:408,ypan:398,hitZone:{type:"Polygon",coordinates:[[[5201,3799],[6441,3799],[6441,3248],[5201,3248],[5201,3799]]]},crs:"+proj=utm +zone=19 +datum=WGS84 +units=m +no_defs",scale:.000312505310304,jsonres:15.5,jsonmarginX:-999,jsonmarginY:9851,xoffset:689095.294503,yoffset:2049079.46444},"us-all-virgin-1":{xpan:485,ypan:396,hitZone:{type:"Polygon",coordinates:[[[6441,3799],[7185,3799],[7185,3523],[6441,3523],[6441,3799]]]},crs:"+proj=utm +zone=20 +datum=WGS84 +units=m +no_defs",scale:.000943787150157,jsonres:15.5,jsonmarginX:-999,jsonmarginY:9851,xoffset:284280.21988,yoffset:2036207.75691},"us-all-virgin-2":{xpan:494,ypan:414,hitZone:{type:"Polygon",coordinates:[[[6441,3523],[7185,3523],[7185,3248],[6441,3248],[6441,3523]]]},crs:"+proj=utm +zone=20 +datum=WGS84 +units=m +no_defs",scale:.000700442107172,jsonres:15.5,jsonmarginX:-999,jsonmarginY:9851,xoffset:298986.38408,yoffset:1968130.48611}},features:[{type:"Feature",id:"US.MA",properties:{"hc-group":"admin1","hc-middle-x":.36,"hc-middle-y":.47,"hc-key":"us-ma","hc-a2":"MA",labelrank:"0",hasc:"US.MA","woe-id":"2347580","state-fips":"25",fips:"US25","postal-code":"MA",name:"Massachusetts",country:"United States of America",region:"Northeast",longitude:"-71.99930000000001","woe-name":"Massachusetts",latitude:"42.3739","woe-label":"Massachusetts, US, United States",type:"State"},geometry:{type:"MultiPolygon",coordinates:[[[[9430,7889],[9476,7878],[9436,7864],[9417,7844],[9430,7889]]],[[[9314,7915],[9312,7927],[9304,7921],[9278,7938],[9254,7990],[9177,7968],[8997,7925],[8860,7896],[8853,7901],[8856,8080],[8922,8096],[9005,8115],[9005,8115],[9222,8166],[9242,8201],[9300,8236],[9318,8197],[9357,8186],[9312,8147],[9299,8081],[9324,8091],[9365,8074],[9428,7985],[9483,7974],[9525,8007],[9501,8067],[9535,8028],[9549,7982],[9504,7965],[9420,7906],[9411,7955],[9371,7921],[9373,7898],[9339,7878],[9327,7915],[9314,7915]]]]}},{type:"Feature",id:"US.WA",properties:{"hc-group":"admin1","hc-middle-x":.56,"hc-middle-y":.52,"hc-key":"us-wa","hc-a2":"WA",labelrank:"0",hasc:"US.WA","woe-id":"2347606","state-fips":"53",fips:"US53","postal-code":"WA",name:"Washington",country:"United States of America",region:"West",longitude:"-120.361","woe-name":"Washington",latitude:"47.4865","woe-label":"Washington, US, United States",type:"State"},geometry:{type:"MultiPolygon",coordinates:[[[[-77,9797],[-56,9768],[-91,9757],[-86,9712],[-136,9751],[-111,9756],[-77,9797]]],[[[-52,9689],[-85,9658],[-66,9645],[-43,9568],[-77,9588],[-74,9635],[-89,9664],[-52,9690],[-60,9697],[-61,9737],[-31,9701],[-12,9731],[-9,9774],[-33,9788],[-46,9839],[-32,9851],[926,9593],[767,8925],[779,8870],[774,8822],[398,8914],[378,8905],[289,8922],[163,8905],[94,8923],[38,8914],[-10,8925],[-22,8950],[-113,8979],[-207,8965],[-283,9014],[-271,9096],[-280,9134],[-321,9167],[-357,9171],[-365,9207],[-400,9226],[-436,9219],[-460,9259],[-436,9333],[-441,9279],[-416,9297],[-401,9347],[-434,9357],[-429,9395],[-369,9396],[-424,9436],[-424,9523],[-410,9624],[-433,9678],[-428,9749],[-385,9790],[-313,9713],[-183,9655],[-161,9666],[-146,9623],[-100,9637],[-95,9567],[-135,9518],[-77,9566],[-112,9491],[-89,9426],[-154,9433],[-175,9394],[-167,9449],[-222,9394],[-157,9376],[-124,9418],[-82,9426],[-82,9476],[-66,9527],[-18,9570],[-37,9644],[-24,9661],[-52,9689]]]]}},{type:"Feature",id:"US.CA",properties:{"hc-group":"admin1","hc-middle-x":.51,"hc-middle-y":.67,"hc-key":"us-ca","hc-a2":"CA",labelrank:"0",hasc:"US.CA","woe-id":"2347563","state-fips":"6",fips:"US06","postal-code":"CA",name:"California",country:"United States of America",region:"West",longitude:"-119.591","woe-name":"California",latitude:"36.7496","woe-label":"California, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[-833,8186],[-50,7955],[-253,7203],[32,6779],[261,6430],[593,5936],[620,5788],[660,5730],[598,5702],[559,5661],[555,5605],[510,5537],[489,5536],[476,5452],[519,5416],[492,5355],[451,5357],[-76,5426],[-69,5467],[-95,5476],[-84,5583],[-110,5649],[-224,5792],[-276,5799],[-265,5822],[-284,5881],[-342,5885],[-417,5946],[-422,5975],[-484,6035],[-539,6046],[-588,6077],[-659,6091],[-686,6135],[-647,6273],[-691,6316],[-672,6333],[-720,6428],[-742,6442],[-793,6601],[-820,6637],[-816,6709],[-775,6726],[-761,6756],[-778,6807],[-821,6819],[-855,6888],[-842,6929],[-853,6979],[-833,7041],[-810,7042],[-816,6985],[-764,6931],[-772,6991],[-797,7030],[-787,7089],[-738,7083],[-782,7126],[-806,7122],[-833,7050],[-892,7126],[-903,7243],[-983,7395],[-967,7420],[-969,7507],[-943,7553],[-936,7629],[-964,7712],[-999,7766],[-993,7813],[-890,7943],[-849,8038],[-844,8118],[-860,8134],[-833,8186]]]}},{type:"Feature",id:"US.OR",properties:{"hc-group":"admin1","hc-middle-x":.47,"hc-middle-y":.52,"hc-key":"us-or","hc-a2":"OR",labelrank:"0",hasc:"US.OR","woe-id":"2347596","state-fips":"41",fips:"US41","postal-code":"OR",name:"Oregon",country:"United States of America",region:"West",longitude:"-120.386","woe-name":"Oregon",latitude:"43.8333","woe-label":"Oregon, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[-50,7955],[-833,8186],[-851,8223],[-847,8281],[-817,8362],[-827,8415],[-793,8455],[-756,8527],[-714,8570],[-672,8648],[-594,8829],[-582,8877],[-494,9051],[-493,9108],[-468,9158],[-460,9216],[-396,9192],[-367,9202],[-359,9169],[-321,9167],[-280,9134],[-271,9096],[-283,9014],[-207,8965],[-113,8979],[-22,8950],[-10,8925],[38,8914],[94,8923],[163,8905],[289,8922],[378,8905],[398,8914],[774,8822],[785,8775],[821,8744],[823,8698],[776,8646],[718,8545],[624,8450],[615,8403],[662,8361],[616,8265],[510,7813],[-50,7955]]]}},{type:"Feature",id:"US.WI",properties:{"hc-group":"admin1","hc-middle-x":.41,"hc-middle-y":.38,"hc-key":"us-wi","hc-a2":"WI",labelrank:"0",hasc:"US.WI","woe-id":"2347608","state-fips":"55",fips:"US55","postal-code":"WI",name:"Wisconsin",country:"United States of America",region:"Midwest",longitude:"-89.5831","woe-name":"Wisconsin",latitude:"44.3709","woe-label":"Wisconsin, US, United States",type:"State"},geometry:{type:"MultiPolygon",coordinates:[[[[6206,8297],[6197,8237],[6159,8156],[6136,8180],[6161,8249],[6206,8297]]],[[[5575,7508],[5561,7544],[5494,7563],[5465,7670],[5479,7702],[5445,7758],[5431,7866],[5405,7892],[5360,7903],[5273,7994],[5217,8029],[5181,8035],[5136,8072],[5146,8117],[5144,8214],[5158,8253],[5117,8285],[5116,8322],[5147,8375],[5220,8422],[5214,8573],[5245,8603],[5303,8589],[5410,8635],[5449,8660],[5489,8656],[5481,8617],[5508,8583],[5554,8572],[5588,8553],[5611,8510],[5795,8473],[5849,8447],[5968,8437],[5993,8394],[6045,8372],[6042,8286],[6080,8287],[6071,8242],[6096,8224],[6058,8180],[6028,8078],[6049,8076],[6099,8156],[6129,8170],[6153,8151],[6124,8019],[6136,7996],[6101,7916],[6110,7860],[6082,7742],[6089,7679],[6116,7626],[6119,7543],[5780,7519],[5606,7509],[5575,7508]]]]}},{type:"Feature",id:"US.ME",properties:{"hc-group":"admin1","hc-middle-x":.43,"hc-middle-y":.4,"hc-key":"us-me","hc-a2":"ME",labelrank:"0",hasc:"US.ME","woe-id":"2347578","state-fips":"23",fips:"US23","postal-code":"ME",name:"Maine",country:"United States of America",region:"Northeast",longitude:"-69.1973","woe-name":"Maine",latitude:"45.148","woe-label":"Maine, US, United States",type:"State"},geometry:{type:"MultiPolygon",coordinates:[[[[9623,8727],[9643,8763],[9665,8747],[9641,8690],[9623,8727]]],[[[9225,8399],[9079,8830],[9115,8824],[9130,8917],[9168,8971],[9177,9035],[9160,9062],[9160,9140],[9176,9161],[9166,9236],[9238,9459],[9272,9467],[9292,9423],[9319,9415],[9428,9491],[9519,9435],[9630,9097],[9697,9099],[9717,9017],[9747,8995],[9778,9009],[9851,8939],[9818,8875],[9789,8883],[9784,8851],[9706,8811],[9712,8773],[9690,8747],[9669,8782],[9611,8766],[9590,8707],[9615,8647],[9554,8716],[9552,8761],[9517,8719],[9529,8622],[9505,8581],[9483,8586],[9467,8544],[9433,8531],[9420,8493],[9387,8524],[9346,8471],[9362,8439],[9314,8347],[9298,8291],[9235,8354],[9225,8399]]]]}},{type:"Feature",id:"US.MI",properties:{"hc-group":"admin1","hc-middle-x":.71,"hc-middle-y":.67,"hc-key":"us-mi","hc-a2":"MI",labelrank:"0",hasc:"US.MI","woe-id":"2347581","state-fips":"26",fips:"US26","postal-code":"MI",name:"Michigan",country:"United States of America",region:"Midwest",longitude:"-84.9479","woe-name":"Michigan",latitude:"43.4343","woe-label":"Michigan, US, United States",type:"State"},geometry:{type:"MultiPolygon",coordinates:[[[[6802,8561],[6808,8523],[6764,8521],[6774,8565],[6802,8561]]],[[[5863,9010],[5834,8966],[5759,8913],[5758,8947],[5863,9010]]],[[[6976,7443],[6815,7415],[6718,7400],[6716,7416],[6323,7372],[6364,7423],[6399,7509],[6417,7630],[6409,7695],[6330,7861],[6345,7903],[6322,7979],[6361,8059],[6352,8141],[6381,8159],[6381,8204],[6423,8217],[6453,8283],[6469,8252],[6460,8196],[6479,8180],[6501,8221],[6497,8298],[6533,8342],[6567,8348],[6542,8410],[6593,8461],[6646,8436],[6627,8469],[6669,8467],[6654,8434],[6698,8433],[6726,8400],[6837,8377],[6863,8359],[6884,8307],[6860,8285],[6902,8213],[6903,8115],[6872,8094],[6868,8040],[6821,8014],[6824,7934],[6868,7920],[6900,7950],[6937,8030],[6993,8059],[7042,8027],[7097,7866],[7128,7802],[7124,7704],[7066,7697],[7061,7631],[7021,7590],[7008,7500],[6976,7443]]],[[[5874,8741],[5900,8700],[5901,8651],[5938,8693],[6017,8689],[6049,8673],[6107,8596],[6174,8609],[6192,8589],[6244,8596],[6318,8663],[6430,8674],[6485,8705],[6529,8713],[6518,8645],[6560,8631],[6591,8646],[6609,8627],[6633,8653],[6688,8665],[6692,8589],[6745,8536],[6723,8521],[6631,8516],[6606,8530],[6598,8476],[6541,8514],[6480,8529],[6444,8521],[6426,8490],[6320,8470],[6302,8429],[6244,8388],[6264,8448],[6227,8437],[6192,8395],[6185,8444],[6096,8224],[6071,8242],[6080,8287],[6042,8286],[6045,8372],[5993,8394],[5968,8437],[5849,8447],[5795,8473],[5611,8510],[5588,8553],[5554,8572],[5623,8604],[5661,8642],[5731,8656],[5776,8696],[5805,8702],[5860,8764],[5868,8750],[5893,8802],[5958,8837],[6017,8829],[5931,8757],[5903,8703],[5900,8738],[5874,8741]]]]}},{type:"Feature",id:"US.NV",properties:{"hc-group":"admin1","hc-middle-x":.46,"hc-middle-y":.38,"hc-key":"us-nv","hc-a2":"NV",labelrank:"0",hasc:"US.NV","woe-id":"2347587","state-fips":"32",fips:"US32","postal-code":"NV",name:"Nevada",country:"United States of America",region:"West",longitude:"-117.02","woe-name":"Nevada",latitude:"39.4299","woe-label":"Nevada, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[-50,7955],[510,7813],[897,7727],[1073,7690],[929,6975],[818,6420],[777,6221],[752,6180],[669,6227],[631,6217],[631,6159],[611,6068],[614,5982],[593,5936],[261,6430],[32,6779],[-253,7203],[-50,7955]]]}},{type:"Feature",id:"US.NM",properties:{"hc-group":"admin1","hc-middle-x":.51,"hc-middle-y":.5,"hc-key":"us-nm","hc-a2":"NM",labelrank:"0",hasc:"US.NM","woe-id":"2347590","state-fips":"35",fips:"US35","postal-code":"NM",name:"New Mexico",country:"United States of America",region:"West",longitude:"-106.024","woe-name":"New Mexico",latitude:"34.5002","woe-label":"New Mexico, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[1841,6242],[3091,6104],[3083,6007],[3081,5975],[3072,5970],[2976,4810],[2181,4887],[2208,4823],[1830,4873],[1815,4756],[1630,4782],[1736,5514],[1841,6242]]]}},{type:"Feature",id:"US.CO",properties:{"hc-group":"admin1","hc-middle-x":.51,"hc-middle-y":.5,"hc-key":"us-co","hc-a2":"CO",labelrank:"0",hasc:"US.CO","woe-id":"2347564","state-fips":"8",fips:"US08","postal-code":"CO",name:"Colorado",country:"United States of America",region:"West",longitude:"-105.543","woe-name":"Colorado",latitude:"38.9998","woe-label":"Colorado, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[3091,6104],[1841,6242],[1966,7108],[1990,7269],[2964,7155],[3357,7124],[3339,6866],[3329,6696],[3290,6089],[3091,6104]]]}},{type:"Feature",id:"US.WY",properties:{"hc-group":"admin1","hc-middle-x":.51,"hc-middle-y":.5,"hc-key":"us-wy","hc-a2":"WY",labelrank:"0",hasc:"US.WY","woe-id":"2347609","state-fips":"56",fips:"US56","postal-code":"WY",name:"Wyoming",country:"United States of America",region:"West",longitude:"-107.552","woe-name":"Wyoming",latitude:"42.9999","woe-label":"Wyoming, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[2964,7155],[1990,7269],[1600,7329],[1643,7585],[1677,7785],[1750,8226],[1772,8355],[3056,8191],[3019,7770],[3010,7672],[3002,7575],[2964,7155]]]}},{type:"Feature",id:"US.KS",properties:{"hc-group":"admin1","hc-middle-x":.3,"hc-middle-y":.49,"hc-key":"us-ks","hc-a2":"KS",labelrank:"0",hasc:"US.KS","woe-id":"2347575","state-fips":"20",fips:"US20","postal-code":"KS",name:"Kansas",country:"United States of America",region:"Midwest",longitude:"-98.3309","woe-name":"Kansas",latitude:"38.5","woe-label":"Kansas, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[3339,6866],[4682,6826],[4769,6780],[4726,6705],[4767,6667],[4781,6624],[4824,6600],[4833,6050],[3290,6089],[3329,6696],[3339,6866]]]}},{type:"Feature",id:"US.NE",properties:{"hc-group":"admin1","hc-middle-x":.43,"hc-middle-y":.5,"hc-key":"us-ne","hc-a2":"NE",labelrank:"0",hasc:"US.NE","woe-id":"2347586","state-fips":"31",fips:"US31","postal-code":"NE",name:"Nebraska",country:"United States of America",region:"Midwest",longitude:"-99.68550000000001","woe-name":"Nebraska",latitude:"41.5002","woe-label":"Nebraska, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[4682,6826],[3339,6866],[3357,7124],[2964,7155],[3002,7575],[3010,7672],[4071,7611],[4148,7558],[4194,7574],[4297,7577],[4330,7551],[4409,7521],[4453,7479],[4469,7474],[4478,7398],[4515,7341],[4533,7291],[4529,7228],[4559,7206],[4571,7165],[4579,7031],[4592,6986],[4592,6981],[4592,6981],[4591,6981],[4591,6981],[4619,6915],[4682,6826]]]}},{type:"Feature",id:"US.OK",properties:{"hc-group":"admin1","hc-middle-x":.78,"hc-middle-y":.52,"hc-key":"us-ok","hc-a2":"OK",labelrank:"0",hasc:"US.OK","woe-id":"2347595","state-fips":"40",fips:"US40","postal-code":"OK",name:"Oklahoma",country:"United States of America",region:"South",longitude:"-97.1309","woe-name":"Oklahoma",latitude:"35.452","woe-label":"Oklahoma, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[3290,6089],[4833,6050],[4833,6017],[4835,5920],[4877,5632],[4875,5180],[4790,5207],[4714,5260],[4685,5235],[4632,5257],[4595,5233],[4559,5242],[4474,5191],[4405,5248],[4360,5237],[4347,5258],[4312,5234],[4304,5199],[4283,5247],[4248,5227],[4181,5268],[4121,5246],[4093,5310],[4007,5296],[3908,5334],[3856,5341],[3842,5388],[3753,5388],[3686,5437],[3707,5936],[3081,5975],[3083,6007],[3091,6104],[3290,6089]]]}},{type:"Feature",id:"US.MO",properties:{"hc-group":"admin1","hc-middle-x":.48,"hc-middle-y":.51,"hc-key":"us-mo","hc-a2":"MO",labelrank:"0",hasc:"US.MO","woe-id":"2347584","state-fips":"29",fips:"US29","postal-code":"MO",name:"Missouri",country:"United States of America",region:"Midwest",longitude:"-92.446","woe-name":"Missouri",latitude:"38.5487","woe-label":"Missouri, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[4835,5920],[4833,6017],[4833,6050],[4824,6600],[4781,6624],[4767,6667],[4726,6705],[4769,6780],[4682,6826],[4619,6915],[4591,6981],[4591,6981],[4592,6981],[4846,6977],[5120,6985],[5389,7006],[5449,6947],[5449,6947],[5449,6947],[5436,6893],[5454,6813],[5475,6774],[5540,6711],[5588,6679],[5616,6596],[5642,6567],[5672,6592],[5735,6561],[5692,6420],[5752,6350],[5792,6336],[5873,6276],[5898,6211],[5886,6165],[5918,6121],[5975,6097],[5976,6033],[5956,5988],[5932,6005],[5921,5968],[5911,5955],[5907,5967],[5890,5980],[5893,5966],[5901,5936],[5869,5898],[5888,5872],[5868,5834],[5731,5821],[5790,5904],[5767,5957],[4835,5920]]]}},{type:"Feature",id:"US.IL",properties:{"hc-group":"admin1","hc-middle-x":.56,"hc-middle-y":.45,"hc-key":"us-il","hc-a2":"IL",labelrank:"0",hasc:"US.IL","woe-id":"2347572","state-fips":"17",fips:"US17","postal-code":"IL",name:"Illinois",country:"United States of America",region:"Midwest",longitude:"-89.1991","woe-name":"Illinois",latitude:"39.946","woe-label":"Illinois, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[6119,7543],[6121,7488],[6192,7351],[6247,6739],[6226,6674],[6254,6638],[6266,6585],[6244,6520],[6222,6503],[6194,6422],[6176,6404],[6179,6328],[6159,6283],[6171,6241],[6102,6218],[6105,6131],[6015,6162],[5987,6157],[5962,6117],[5975,6097],[5918,6121],[5886,6165],[5898,6211],[5873,6276],[5792,6336],[5752,6350],[5692,6420],[5735,6561],[5672,6592],[5642,6567],[5616,6596],[5588,6679],[5540,6711],[5475,6774],[5454,6813],[5436,6893],[5449,6947],[5449,6947],[5449,6947],[5458,7004],[5496,7020],[5535,7098],[5536,7132],[5509,7160],[5523,7224],[5579,7232],[5646,7276],[5671,7332],[5672,7411],[5625,7441],[5575,7508],[5575,7508],[5606,7509],[5848,7523],[6119,7543]]]}},{type:"Feature",id:"US.IN",properties:{"hc-group":"admin1","hc-middle-x":.49,"hc-middle-y":.43,"hc-key":"us-in","hc-a2":"IN",labelrank:"0",hasc:"US.IN","woe-id":"2347573","state-fips":"18",fips:"US18","postal-code":"IN",name:"Indiana",country:"United States of America",region:"Midwest",longitude:"-86.1396","woe-name":"Indiana",latitude:"39.8874","woe-label":"Indiana, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[6192,7351],[6239,7329],[6323,7372],[6716,7416],[6718,7400],[6732,7296],[6797,6730],[6792,6683],[6808,6651],[6737,6617],[6682,6619],[6693,6572],[6657,6540],[6652,6507],[6622,6498],[6608,6438],[6583,6411],[6531,6450],[6485,6413],[6485,6390],[6444,6379],[6426,6401],[6359,6356],[6303,6376],[6269,6350],[6209,6363],[6179,6328],[6176,6404],[6194,6422],[6222,6503],[6244,6520],[6266,6585],[6254,6638],[6226,6674],[6247,6739],[6192,7351]]]}},{type:"Feature",id:"US.VT",properties:{"hc-group":"admin1","hc-middle-x":.42,"hc-middle-y":.43,"hc-key":"us-vt","hc-a2":"VT",labelrank:"0",hasc:"US.VT","woe-id":"2347604","state-fips":"50",fips:"US50","postal-code":"VT",name:"Vermont",country:"United States of America",region:"Northeast",longitude:"-72.7317","woe-name":"Vermont",latitude:"44.0886","woe-label":"Vermont, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[8922,8096],[8856,8080],[8807,8284],[8772,8287],[8772,8328],[8740,8402],[8748,8453],[8739,8514],[8720,8537],[8695,8646],[8811,8677],[9024,8736],[9020,8661],[9045,8629],[9033,8585],[8978,8526],[8986,8490],[8981,8392],[8964,8320],[8979,8261],[8979,8148],[9005,8115],[9005,8115],[8922,8096]]]}},{type:"Feature",id:"US.AR",properties:{"hc-group":"admin1","hc-middle-x":.47,"hc-middle-y":.43,"hc-key":"us-ar","hc-a2":"AR",labelrank:"0",hasc:"US.AR","woe-id":"2347562","state-fips":"5",fips:"US05","postal-code":"AR",name:"Arkansas",country:"United States of America",region:"South",longitude:"-92.14279999999999","woe-name":"Arkansas",latitude:"34.7563","woe-label":"Arkansas, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[4975,5016],[4971,5157],[4910,5157],[4875,5180],[4877,5632],[4835,5920],[5767,5957],[5790,5904],[5731,5821],[5868,5834],[5871,5791],[5827,5763],[5835,5714],[5798,5670],[5802,5602],[5762,5567],[5770,5547],[5730,5520],[5706,5470],[5709,5414],[5635,5340],[5647,5309],[5609,5297],[5620,5250],[5583,5215],[5607,5162],[5598,5120],[5618,5077],[5605,5041],[5563,5038],[4975,5016]]]}},{type:"Feature",id:"US.TX",properties:{"hc-group":"admin1","hc-middle-x":.69,"hc-middle-y":.52,"hc-key":"us-tx","hc-a2":"TX",labelrank:"0",hasc:"US.TX","woe-id":"2347602","state-fips":"48",fips:"US48","postal-code":"TX",name:"Texas",country:"United States of America",region:"South",longitude:"-98.7607","woe-name":"Texas",latitude:"31.131","woe-label":"Texas, US, United States",type:"State"},geometry:{type:"MultiPolygon",coordinates:[[[[4875,5180],[4910,5157],[4971,5157],[4975,5016],[4980,4752],[5033,4679],[5031,4646],[5105,4506],[5093,4447],[5059,4380],[5065,4253],[5047,4228],[5018,4172],[5032,4146],[4989,4147],[4854,4084],[4875,4116],[4831,4102],[4842,4162],[4778,4141],[4769,4106],[4839,4052],[4789,4023],[4801,4063],[4739,3976],[4638,3901],[4557,3881],[4544,3857],[4451,3804],[4448,3787],[4381,3749],[4308,3672],[4340,3735],[4307,3756],[4261,3721],[4306,3712],[4263,3655],[4221,3658],[4249,3617],[4213,3527],[4195,3545],[4141,3510],[4206,3511],[4178,3442],[4232,3206],[4272,3164],[4203,3135],[4114,3192],[4013,3198],[3979,3230],[3915,3245],[3878,3279],[3810,3292],[3795,3375],[3727,3467],[3715,3534],[3721,3603],[3677,3628],[3595,3762],[3548,3801],[3525,3881],[3477,3970],[3469,4021],[3393,4097],[3411,4119],[3365,4132],[3310,4204],[3150,4220],[3103,4248],[3082,4218],[3018,4214],[2959,4096],[2967,4083],[2896,4024],[2861,4031],[2754,4113],[2695,4134],[2651,4187],[2595,4230],[2567,4305],[2573,4370],[2512,4503],[2437,4557],[2309,4714],[2275,4731],[2239,4806],[2208,4823],[2181,4887],[2976,4810],[3072,5970],[3081,5975],[3707,5936],[3686,5437],[3753,5388],[3842,5388],[3856,5341],[3908,5334],[4007,5296],[4093,5310],[4121,5246],[4181,5268],[4248,5227],[4283,5247],[4304,5199],[4312,5234],[4347,5258],[4360,5237],[4405,5248],[4474,5191],[4559,5242],[4595,5233],[4632,5257],[4685,5235],[4714,5260],[4790,5207],[4875,5180]]],[[[4269,3610],[4220,3493],[4219,3420],[4245,3297],[4214,3394],[4222,3530],[4269,3610]]]]}},{type:"Feature",id:"US.RI",properties:{"hc-group":"admin1","hc-middle-x":.55,"hc-middle-y":.78,"hc-key":"us-ri","hc-a2":"RI",labelrank:"0",hasc:"US.RI","woe-id":"2347598","state-fips":"44",fips:"US44","postal-code":"RI",name:"Rhode Island",country:"United States of America",region:"Northeast",longitude:"-71.5082","woe-name":"Rhode Island",latitude:"41.6242","woe-label":"Rhode Island, US, United States",type:"State"},geometry:{type:"MultiPolygon",coordinates:[[[[9339,7878],[9325,7871],[9314,7915],[9327,7915],[9339,7878]]],[[[9177,7968],[9254,7990],[9278,7938],[9304,7921],[9320,7866],[9285,7851],[9279,7822],[9216,7790],[9212,7845],[9177,7968]]]]}},{type:"Feature",id:"US.AL",properties:{"hc-group":"admin1","hc-middle-x":.47,"hc-middle-y":.42,"hc-key":"us-al","hc-a2":"AL",labelrank:"0",hasc:"US.AL","woe-id":"2347559","state-fips":"1",fips:"US01","postal-code":"AL",name:"Alabama",country:"United States of America",region:"South",longitude:"-86.7184","woe-name":"Alabama",latitude:"32.8551","woe-label":"Alabama, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[6487,4443],[6440,4378],[6291,4361],[6336,4375],[6317,4398],[6267,4399],[6216,4788],[6236,5574],[6215,5600],[6213,5603],[6762,5652],[6912,5135],[6947,5053],[6998,4970],[6970,4930],[6958,4846],[6990,4774],[6983,4704],[7015,4637],[6436,4574],[6431,4541],[6487,4486],[6487,4443]]]}},{type:"Feature",id:"US.MS",properties:{"hc-group":"admin1","hc-middle-x":.51,"hc-middle-y":.48,"hc-key":"us-ms","hc-a2":"MS",labelrank:"0",hasc:"US.MS","woe-id":"2347583","state-fips":"28",fips:"US28","postal-code":"MS",name:"Mississippi",country:"United States of America",region:"South",longitude:"-89.71890000000001","woe-name":"Mississippi",latitude:"32.8657","woe-label":"Mississippi, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[6267,4399],[6164,4396],[6059,4360],[6017,4328],[5936,4451],[5955,4536],[5523,4510],[5540,4526],[5522,4581],[5545,4585],[5545,4642],[5565,4662],[5584,4738],[5636,4781],[5670,4868],[5629,4895],[5611,4977],[5627,5018],[5605,5041],[5618,5077],[5598,5120],[5607,5162],[5583,5215],[5620,5250],[5609,5297],[5647,5309],[5635,5340],[5709,5414],[5706,5470],[5730,5520],[5770,5547],[5762,5567],[6122,5592],[6215,5600],[6236,5574],[6216,4788],[6267,4399]]]}},{type:"Feature",id:"US.NC",properties:{"hc-group":"admin1","hc-middle-x":.62,"hc-middle-y":.5,"hc-key":"us-nc","hc-a2":"NC",labelrank:"0",hasc:"US.NC","woe-id":"2347592","state-fips":"37",fips:"US37","postal-code":"NC",name:"North Carolina",country:"United States of America",region:"South",longitude:"-78.866","woe-name":"North Carolina",latitude:"35.6152","woe-label":"North Carolina, US, United States",type:"State"},geometry:{type:"MultiPolygon",coordinates:[[[[8716,6394],[8720,6381],[8694,6389],[8694,6389],[8704,6391],[8705,6390],[8709,6392],[8712,6393],[8716,6394]]],[[[8727,6396],[8756,6332],[8852,6203],[8782,6278],[8722,6395],[8724,6396],[8727,6396]]],[[[7532,6183],[7623,6187],[7858,6219],[8691,6388],[8768,6281],[8670,6318],[8707,6291],[8620,6230],[8584,6234],[8581,6204],[8719,6244],[8742,6161],[8737,6222],[8760,6252],[8795,6220],[8797,6153],[8772,6164],[8750,6091],[8709,6073],[8638,6097],[8638,6070],[8551,6078],[8664,6053],[8635,6009],[8661,6003],[8610,5957],[8551,5988],[8590,5949],[8631,5940],[8676,5955],[8686,5995],[8721,5956],[8670,5890],[8565,5865],[8469,5764],[8443,5714],[8432,5616],[8368,5624],[8302,5600],[8029,5790],[7791,5756],[7782,5790],[7714,5830],[7457,5802],[7290,5724],[7210,5711],[7034,5685],[7038,5756],[7073,5762],[7085,5807],[7131,5847],[7188,5859],[7269,5928],[7298,5973],[7352,6010],[7365,5989],[7437,6050],[7464,6038],[7490,6093],[7523,6123],[7532,6183]]]]}},{type:"Feature",id:"US.VA",properties:{"hc-group":"admin1","hc-middle-x":.64,"hc-middle-y":.54,"hc-key":"us-va","hc-a2":"VA",labelrank:"0",hasc:"US.VA","woe-id":"2347605","state-fips":"51",fips:"US51","postal-code":"VA",name:"Virginia",country:"United States of America",region:"South",longitude:"-78.2431","woe-name":"Virginia",latitude:"37.7403","woe-label":"Virginia, US, United States",type:"State"},geometry:{type:"MultiPolygon",coordinates:[[[[8722,6395],[8696,6432],[8704,6391],[8694,6389],[8694,6389],[8686,6398],[8691,6388],[7858,6219],[7623,6187],[7532,6183],[7472,6170],[7116,6120],[7221,6173],[7268,6217],[7309,6294],[7363,6332],[7431,6411],[7470,6351],[7530,6341],[7567,6378],[7595,6360],[7649,6382],[7664,6419],[7690,6412],[7773,6459],[7767,6505],[7840,6674],[7857,6759],[7932,6729],[7974,6848],[7998,6837],[8048,6900],[8072,6952],[8076,7028],[8188,6969],[8198,7020],[8256,7009],[8251,6984],[8341,6945],[8347,6939],[8353,6939],[8367,6892],[8334,6870],[8323,6802],[8347,6786],[8385,6812],[8429,6763],[8484,6768],[8507,6740],[8571,6721],[8572,6647],[8536,6648],[8499,6683],[8431,6711],[8532,6636],[8597,6606],[8561,6578],[8558,6548],[8577,6545],[8611,6494],[8586,6478],[8526,6534],[8449,6533],[8518,6510],[8580,6459],[8619,6482],[8679,6482],[8727,6396],[8724,6396],[8722,6395]],[[8558,6548],[8552,6548],[8552,6548],[8552,6548],[8484,6605],[8532,6551],[8552,6548],[8552,6548],[8552,6548],[8557,6544],[8558,6548]]],[[[8709,6392],[8713,6400],[8716,6394],[8712,6393],[8709,6392]]],[[[8765,6797],[8756,6760],[8761,6796],[8765,6797]]],[[[8688,6764],[8691,6772],[8739,6789],[8726,6737],[8674,6599],[8696,6561],[8678,6528],[8652,6583],[8652,6652],[8688,6764]]]]}},{type:"Feature",id:"US.IA",properties:{"hc-group":"admin1","hc-middle-x":.35,"hc-middle-y":.49,"hc-key":"us-ia","hc-a2":"IA",labelrank:"0",hasc:"US.IA","woe-id":"2347574","state-fips":"19",fips:"US19","postal-code":"IA",name:"Iowa",country:"United States of America",region:"Midwest",longitude:"-93.3891","woe-name":"Iowa",latitude:"42.0423","woe-label":"Iowa, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[5575,7508],[5625,7441],[5672,7411],[5671,7332],[5646,7276],[5579,7232],[5523,7224],[5509,7160],[5536,7132],[5535,7098],[5496,7020],[5458,7004],[5449,6947],[5449,6947],[5449,6947],[5389,7006],[5120,6985],[4846,6977],[4592,6981],[4591,6981],[4579,7031],[4571,7165],[4559,7206],[4529,7228],[4533,7291],[4515,7341],[4478,7398],[4469,7474],[4453,7479],[4423,7540],[4459,7636],[4438,7663],[4433,7734],[4459,7735],[5137,7745],[5445,7758],[5479,7702],[5465,7670],[5494,7563],[5561,7544],[5577,7513],[5575,7508],[5575,7508]]]}},{type:"Feature",id:"US.MD",properties:{"hc-group":"admin1","hc-middle-x":.61,"hc-middle-y":.27,"hc-key":"us-md","hc-a2":"MD",labelrank:"0",hasc:"US.MD","woe-id":"2347579","state-fips":"24",fips:"US24","postal-code":"MD",name:"Maryland",country:"United States of America",region:"South",longitude:"-77.0454","woe-name":"Maryland",latitude:"39.3874","woe-label":"Maryland, US, United States",type:"State"},geometry:{type:"MultiPolygon",coordinates:[[[[8761,6796],[8769,6819],[8765,6797],[8761,6796]]],[[[8779,6915],[8779,6884],[8777,6914],[8777,6914],[8779,6915]]],[[[8739,6789],[8691,6772],[8688,6764],[8647,6746],[8650,6806],[8590,6833],[8592,6815],[8525,6862],[8581,6899],[8555,6926],[8511,6936],[8544,6974],[8512,6986],[8496,7036],[8530,7108],[8537,7165],[8497,7093],[8472,7099],[8469,7056],[8432,7052],[8471,7014],[8458,6959],[8483,6868],[8513,6820],[8462,6849],[8543,6778],[8548,6753],[8491,6782],[8433,6785],[8382,6834],[8354,6797],[8335,6827],[8370,6891],[8367,6916],[8385,6943],[8341,6945],[8251,6984],[8256,7009],[8198,7020],[8162,7087],[8101,7099],[8046,7067],[8043,7043],[8e3,7038],[7977,7057],[7949,7003],[7928,7007],[7857,6922],[7835,7053],[8176,7119],[8559,7201],[8650,6887],[8771,6913],[8770,6856],[8753,6848],[8739,6789]]]]}},{type:"Feature",id:"US.DE",properties:{"hc-group":"admin1","hc-middle-x":.91,"hc-middle-y":.77,"hc-key":"us-de","hc-a2":"DE",labelrank:"0",hasc:"US.DE","woe-id":"2347566","state-fips":"10",fips:"US10","postal-code":"DE",name:"Delaware",country:"United States of America",region:"South",longitude:"-75.41119999999999","woe-name":"Delaware",latitude:"38.8657","woe-label":"Delaware, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[8777,6914],[8771,6915],[8771,6913],[8650,6887],[8559,7201],[8589,7239],[8625,7239],[8601,7183],[8613,7145],[8652,7114],[8675,7051],[8735,6995],[8751,6999],[8779,6915],[8777,6914],[8777,6914]]]}},{type:"Feature",id:"US.PA",properties:{"hc-group":"admin1","hc-middle-x":.5,"hc-middle-y":.49,"hc-key":"us-pa","hc-a2":"PA",labelrank:"0",hasc:"US.PA","woe-id":"2347597","state-fips":"42",fips:"US42","postal-code":"PA",name:"Pennsylvania",country:"United States of America",region:"Northeast",longitude:"-77.60939999999999","woe-name":"Pennsylvania",latitude:"40.8601","woe-label":"Pennsylvania, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[8611,7549],[8632,7530],[8615,7490],[8627,7443],[8646,7444],[8739,7361],[8691,7310],[8673,7276],[8625,7239],[8589,7239],[8559,7201],[8176,7119],[7835,7053],[7630,7017],[7589,7253],[7589,7253],[7530,7595],[7556,7610],[7662,7693],[7674,7625],[8514,7797],[8573,7765],[8588,7712],[8673,7663],[8673,7663],[8611,7549]]]}},{type:"Feature",id:"US.NJ",properties:{"hc-group":"admin1","hc-middle-x":.68,"hc-middle-y":.64,"hc-key":"us-nj","hc-a2":"NJ",labelrank:"0",hasc:"US.NJ","woe-id":"2347589","state-fips":"34",fips:"US34","postal-code":"NJ",name:"New Jersey",country:"United States of America",region:"Northeast",longitude:"-74.4653","woe-name":"New Jersey",latitude:"40.0449","woe-label":"New Jersey, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[8611,7549],[8673,7663],[8759,7635],[8846,7608],[8840,7532],[8810,7504],[8805,7466],[8866,7456],[8875,7438],[8886,7281],[8853,7228],[8849,7172],[8812,7122],[8784,7047],[8766,7040],[8769,7097],[8716,7095],[8623,7151],[8610,7186],[8624,7231],[8676,7269],[8691,7310],[8739,7361],[8646,7444],[8627,7443],[8615,7490],[8632,7530],[8611,7549]]]}},{type:"Feature",id:"US.NY",properties:{"hc-group":"admin1","hc-middle-x":.54,"hc-middle-y":.49,"hc-key":"us-ny","hc-a2":"NY",labelrank:"0",hasc:"US.NY","woe-id":"2347591","state-fips":"36",fips:"US36","postal-code":"NY",name:"New York",country:"United States of America",region:"Northeast",longitude:"-75.32420000000001","woe-name":"New York",latitude:"43.1988","woe-label":"New York, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[8673,7663],[8588,7712],[8573,7765],[8514,7797],[7674,7625],[7662,7693],[7763,7795],[7803,7872],[7754,7932],[7747,7976],[7812,8010],[7918,8040],[7988,8041],[8031,8026],[8061,8043],[8133,8055],[8180,8080],[8224,8141],[8264,8164],[8243,8232],[8257,8274],[8225,8259],[8202,8296],[8230,8345],[8280,8379],[8297,8437],[8358,8526],[8422,8581],[8453,8585],[8695,8646],[8720,8537],[8739,8514],[8748,8453],[8740,8402],[8772,8328],[8772,8287],[8807,8284],[8856,8080],[8853,7901],[8860,7896],[8896,7702],[8912,7685],[8874,7645],[8896,7623],[8881,7575],[8930,7617],[8982,7620],[9002,7641],[9094,7671],[9134,7722],[9173,7697],[9177,7721],[9184,7702],[9231,7730],[9141,7649],[9083,7619],[9032,7570],[8936,7519],[8857,7498],[8812,7468],[8814,7503],[8840,7506],[8858,7554],[8843,7544],[8846,7608],[8759,7635],[8695,7656],[8673,7663],[8673,7663]]]}},{type:"Feature",id:"US.ID",properties:{"hc-group":"admin1","hc-middle-x":.51,"hc-middle-y":.75,"hc-key":"us-id","hc-a2":"ID",labelrank:"0",hasc:"US.ID","woe-id":"2347571","state-fips":"16",fips:"US16","postal-code":"ID",name:"Idaho",country:"United States of America",region:"West",longitude:"-114.133","woe-name":"Idaho",latitude:"43.7825","woe-label":"Idaho, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[926,9593],[1093,9555],[1036,9301],[1076,9210],[1061,9142],[1117,9085],[1172,8979],[1170,8959],[1219,8896],[1258,8897],[1253,8859],[1219,8796],[1204,8727],[1211,8698],[1177,8675],[1167,8620],[1200,8590],[1278,8630],[1303,8596],[1303,8522],[1338,8434],[1326,8419],[1347,8377],[1374,8375],[1391,8331],[1392,8280],[1415,8254],[1451,8281],[1508,8261],[1536,8282],[1614,8258],[1671,8261],[1686,8296],[1713,8295],[1750,8226],[1677,7785],[1643,7585],[1393,7629],[1073,7690],[897,7727],[510,7813],[616,8265],[662,8361],[615,8403],[624,8450],[718,8545],[776,8646],[823,8698],[821,8744],[785,8775],[774,8822],[779,8870],[767,8925],[926,9593]]]}},{type:"Feature",id:"US.SD",properties:{"hc-group":"admin1","hc-middle-x":.51,"hc-middle-y":.44,"hc-key":"us-sd","hc-a2":"SD",labelrank:"0",hasc:"US.SD","woe-id":"2347600","state-fips":"46",fips:"US46","postal-code":"SD",name:"South Dakota",country:"United States of America",region:"Midwest",longitude:"-100.255","woe-name":"South Dakota",latitude:"44.4711","woe-label":"South Dakota, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[3010,7672],[3019,7770],[3056,8191],[3059,8191],[3080,8436],[4231,8374],[4444,8372],[4429,8325],[4387,8283],[4419,8232],[4462,8203],[4459,7735],[4433,7734],[4438,7663],[4459,7636],[4423,7540],[4453,7479],[4409,7521],[4330,7551],[4297,7577],[4194,7574],[4148,7558],[4071,7611],[3010,7672]]]}},{type:"Feature",id:"US.CT",properties:{"hc-group":"admin1","hc-middle-x":.48,"hc-middle-y":.5,"hc-key":"us-ct","hc-a2":"CT",labelrank:"0",hasc:"US.CT","woe-id":"2347565","state-fips":"9",fips:"US09","postal-code":"CT",name:"Connecticut",country:"United States of America",region:"Northeast",longitude:"-72.7594","woe-name":"Connecticut",latitude:"41.6486","woe-label":"Connecticut, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[9216,7790],[9204,7796],[9095,7743],[9023,7721],[8972,7689],[8896,7623],[8874,7645],[8912,7685],[8896,7702],[8860,7896],[8997,7925],[9177,7968],[9212,7845],[9216,7790]]]}},{type:"Feature",id:"US.NH",properties:{"hc-group":"admin1","hc-middle-x":.38,"hc-middle-y":.57,"hc-key":"us-nh","hc-a2":"NH",labelrank:"0",hasc:"US.NH","woe-id":"2347588","state-fips":"33",fips:"US33","postal-code":"NH",name:"New Hampshire",country:"United States of America",region:"Northeast",longitude:"-71.6301","woe-name":"New Hampshire",latitude:"43.5993","woe-label":"New Hampshire, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[9298,8291],[9306,8288],[9300,8236],[9242,8201],[9222,8166],[9005,8115],[9005,8115],[8979,8148],[8979,8261],[8964,8320],[8981,8392],[8986,8490],[8978,8526],[9033,8585],[9045,8629],[9020,8661],[9024,8736],[9036,8814],[9079,8830],[9225,8399],[9235,8354],[9298,8291]]]}},{type:"Feature",id:"US.KY",properties:{"hc-group":"admin1","hc-middle-x":.65,"hc-middle-y":.5,"hc-key":"us-ky","hc-a2":"KY",labelrank:"0",hasc:"US.KY","woe-id":"2347576","state-fips":"21",fips:"US21","postal-code":"KY",name:"Kentucky",country:"United States of America",region:"South",longitude:"-85.5729","woe-name":"Kentucky",latitude:"37.3994","woe-label":"Kentucky, US, United States",type:"State"},geometry:{type:"MultiPolygon",coordinates:[[[[5893,5966],[5890,5980],[5907,5967],[5893,5966]]],[[[5921,5968],[5932,6005],[5956,5988],[5976,6033],[5975,6097],[5962,6117],[5987,6157],[6015,6162],[6105,6131],[6102,6218],[6171,6241],[6159,6283],[6179,6328],[6209,6363],[6269,6350],[6303,6376],[6359,6356],[6426,6401],[6444,6379],[6485,6390],[6485,6413],[6531,6450],[6583,6411],[6608,6438],[6622,6498],[6652,6507],[6657,6540],[6693,6572],[6682,6619],[6737,6617],[6808,6651],[6792,6683],[6797,6730],[6873,6741],[6900,6725],[6933,6672],[7001,6669],[7036,6641],[7069,6664],[7119,6643],[7198,6692],[7216,6653],[7270,6617],[7270,6617],[7270,6617],[7272,6548],[7358,6439],[7431,6411],[7363,6332],[7309,6294],[7268,6217],[7221,6173],[7116,6120],[7104,6113],[6814,6086],[6751,6077],[6516,6061],[6250,6032],[6200,6040],[6210,5991],[5921,5968]]],[[[7270,6617],[7271,6617],[7270,6617],[7270,6617],[7270,6617],[7270,6617]]]]}},{type:"Feature",id:"US.OH",properties:{"hc-group":"admin1","hc-middle-x":.45,"hc-middle-y":.53,"hc-key":"us-oh","hc-a2":"OH",labelrank:"0",hasc:"US.OH","woe-id":"2347594","state-fips":"39",fips:"US39","postal-code":"OH",name:"Ohio",country:"United States of America",region:"Midwest",longitude:"-82.67189999999999","woe-name":"Ohio",latitude:"40.0924","woe-label":"Ohio, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[6718,7400],[6815,7415],[6976,7443],[7095,7408],[7082,7394],[7173,7383],[7258,7426],[7329,7440],[7383,7503],[7530,7595],[7589,7253],[7561,7233],[7587,7158],[7558,7018],[7564,6981],[7504,6911],[7454,6903],[7419,6863],[7399,6809],[7416,6775],[7391,6755],[7354,6783],[7333,6723],[7346,6679],[7321,6631],[7271,6617],[7270,6617],[7216,6653],[7198,6692],[7119,6643],[7069,6664],[7036,6641],[7001,6669],[6933,6672],[6900,6725],[6873,6741],[6797,6730],[6732,7296],[6718,7400]]]}},{type:"Feature",id:"US.TN",properties:{"hc-group":"admin1","hc-middle-x":.43,"hc-middle-y":.54,"hc-key":"us-tn","hc-a2":"TN",labelrank:"0",hasc:"US.TN","woe-id":"2347601","state-fips":"47",fips:"US47","postal-code":"TN",name:"Tennessee",country:"United States of America",region:"South",longitude:"-86.3415","woe-name":"Tennessee",latitude:"35.7514","woe-label":"Tennessee, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[6215,5600],[6122,5592],[5762,5567],[5802,5602],[5798,5670],[5835,5714],[5827,5763],[5871,5791],[5868,5834],[5888,5872],[5869,5898],[5901,5936],[5893,5966],[5907,5967],[5911,5955],[5921,5968],[6210,5991],[6200,6040],[6250,6032],[6516,6061],[6751,6077],[6814,6086],[7104,6113],[7116,6120],[7472,6170],[7532,6183],[7523,6123],[7490,6093],[7464,6038],[7437,6050],[7365,5989],[7352,6010],[7298,5973],[7269,5928],[7188,5859],[7131,5847],[7085,5807],[7073,5762],[7038,5756],[7034,5685],[6918,5671],[6762,5652],[6213,5603],[6215,5600]]]}},{type:"Feature",id:"US.WV",properties:{"hc-group":"admin1","hc-middle-x":.35,"hc-middle-y":.56,"hc-key":"us-wv","hc-a2":"WV",labelrank:"0",hasc:"US.WV","woe-id":"2347607","state-fips":"54",fips:"US54","postal-code":"WV",name:"West Virginia",country:"United States of America",region:"South",longitude:"-80.7128","woe-name":"West Virginia",latitude:"38.6422","woe-label":"West Virginia, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[7270,6617],[7271,6617],[7321,6631],[7346,6679],[7333,6723],[7354,6783],[7391,6755],[7416,6775],[7399,6809],[7419,6863],[7454,6903],[7504,6911],[7564,6981],[7558,7018],[7587,7158],[7561,7233],[7589,7253],[7630,7017],[7835,7053],[7857,6922],[7928,7007],[7949,7003],[7977,7057],[8e3,7038],[8043,7043],[8046,7067],[8101,7099],[8162,7087],[8198,7020],[8188,6969],[8076,7028],[8072,6952],[8048,6900],[7998,6837],[7974,6848],[7932,6729],[7857,6759],[7840,6674],[7767,6505],[7773,6459],[7690,6412],[7664,6419],[7649,6382],[7595,6360],[7567,6378],[7530,6341],[7470,6351],[7431,6411],[7358,6439],[7272,6548],[7270,6617],[7270,6617],[7270,6617],[7270,6617],[7270,6617]]]}},{type:"Feature",id:"US.DC",properties:{"hc-group":"admin1","hc-middle-x":.57,"hc-middle-y":.14,"hc-key":"us-dc","hc-a2":"DC",labelrank:"9",hasc:"US.DC","woe-id":"2347567","state-fips":"11",fips:"US11","postal-code":"DC",name:"District of Columbia",country:"United States of America",region:"South",longitude:"-77.01130000000001","woe-name":"District of Columbia",latitude:"38.8922","woe-label":"District of Columbia, US, United States",type:"Federal District"},geometry:{type:"Polygon",coordinates:[[[8367,6916],[8366,6929],[8353,6939],[8347,6939],[8341,6945],[8385,6943],[8367,6916]]]}},{type:"Feature",id:"US.LA",properties:{"hc-group":"admin1","hc-middle-x":.34,"hc-middle-y":.46,"hc-key":"us-la","hc-a2":"LA",labelrank:"0",hasc:"US.LA","woe-id":"2347577","state-fips":"22",fips:"US22","postal-code":"LA",name:"Louisiana",country:"United States of America",region:"South",longitude:"-91.9991","woe-name":"Louisiana",latitude:"30.5274","woe-label":"Louisiana, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[6017,4328],[5915,4340],[5856,4368],[5812,4302],[5834,4283],[5904,4280],[5937,4313],[5992,4313],[5957,4259],[6001,4245],[6035,4298],[6067,4259],[5982,4181],[6027,4123],[6107,4114],[6148,4081],[6125,4035],[6070,4042],[6042,4077],[5966,4094],[5980,4115],[5902,4141],[5913,4064],[5876,4028],[5860,4066],[5811,4082],[5780,4036],[5724,4031],[5620,4068],[5631,4121],[5569,4128],[5532,4184],[5493,4173],[5494,4203],[5430,4175],[5437,4145],[5478,4154],[5526,4139],[5500,4112],[5431,4136],[5399,4121],[5305,4135],[5186,4176],[5128,4173],[5042,4153],[5047,4228],[5065,4253],[5059,4380],[5093,4447],[5105,4506],[5031,4646],[5033,4679],[4980,4752],[4975,5016],[5563,5038],[5605,5041],[5627,5018],[5611,4977],[5629,4895],[5670,4868],[5636,4781],[5584,4738],[5565,4662],[5545,4642],[5545,4585],[5522,4581],[5540,4526],[5523,4510],[5955,4536],[5936,4451],[6017,4328]]]}},{type:"Feature",id:"US.FL",properties:{"hc-group":"admin1","hc-middle-x":.77,"hc-middle-y":.5,"hc-key":"us-fl","hc-a2":"FL",labelrank:"0",hasc:"US.FL","woe-id":"2347568","state-fips":"12",fips:"US12","postal-code":"FL",name:"Florida",country:"United States of America",region:"South",longitude:"-81.6228","woe-name":"Florida",latitude:"28.1568","woe-label":"Florida, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[6487,4443],[6487,4486],[6431,4541],[6436,4574],[7015,4637],[7055,4568],[7649,4609],[7670,4559],[7699,4566],[7687,4660],[7713,4686],[7808,4673],[7822,4672],[7849,4570],[7908,4430],[8008,4269],[8125,4130],[8113,4109],[8144,4012],[8198,3936],[8297,3758],[8321,3651],[8331,3476],[8302,3361],[8313,3273],[8270,3209],[8291,3273],[8273,3290],[8230,3255],[8194,3260],[8141,3234],[8115,3258],[8115,3303],[8070,3379],[7979,3429],[7953,3420],[7907,3543],[7846,3536],[7839,3654],[7796,3674],[7819,3634],[7779,3640],[7675,3779],[7722,3884],[7712,3915],[7671,3899],[7670,3851],[7622,3872],[7618,3966],[7635,4045],[7626,4157],[7576,4229],[7525,4222],[7473,4277],[7425,4302],[7349,4395],[7265,4433],[7186,4403],[7198,4370],[7162,4370],[7148,4336],[7067,4277],[6979,4284],[6986,4316],[6958,4349],[6892,4391],[6798,4429],[6694,4444],[6468,4388],[6505,4431],[6487,4443]]]}},{type:"Feature",id:"US.GA",properties:{"hc-group":"admin1","hc-middle-x":.43,"hc-middle-y":.52,"hc-key":"us-ga","hc-a2":"GA",labelrank:"0",hasc:"US.GA","woe-id":"2347569","state-fips":"13",fips:"US13","postal-code":"GA",name:"Georgia",country:"United States of America",region:"South",longitude:"-83.4078","woe-name":"Georgia",latitude:"32.8547","woe-label":"Georgia, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[7713,4686],[7687,4660],[7699,4566],[7670,4559],[7649,4609],[7055,4568],[7015,4637],[6983,4704],[6990,4774],[6958,4846],[6970,4930],[6998,4970],[6947,5053],[6912,5135],[6762,5652],[6918,5671],[7034,5685],[7210,5711],[7290,5724],[7249,5641],[7323,5596],[7364,5593],[7401,5526],[7444,5475],[7523,5430],[7538,5402],[7600,5369],[7606,5340],[7651,5293],[7708,5272],[7750,5169],[7800,5140],[7844,5042],[7887,5035],[7901,5029],[7811,4893],[7836,4826],[7798,4798],[7817,4730],[7808,4673],[7713,4686]]]}},{type:"Feature",id:"US.SC",properties:{"hc-group":"admin1","hc-middle-x":.54,"hc-middle-y":.35,"hc-key":"us-sc","hc-a2":"SC",labelrank:"0",hasc:"US.SC","woe-id":"2347599","state-fips":"45",fips:"US45","postal-code":"SC",name:"South Carolina",country:"United States of America",region:"South",longitude:"-80.6471","woe-name":"South Carolina",latitude:"33.8578","woe-label":"South Carolina, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[8302,5600],[8236,5523],[8205,5458],[8206,5396],[8173,5348],[8140,5346],[8131,5311],[8056,5219],[7989,5173],[7913,5166],[7971,5149],[7887,5035],[7844,5042],[7800,5140],[7750,5169],[7708,5272],[7651,5293],[7606,5340],[7600,5369],[7538,5402],[7523,5430],[7444,5475],[7401,5526],[7364,5593],[7323,5596],[7249,5641],[7290,5724],[7457,5802],[7714,5830],[7782,5790],[7791,5756],[8029,5790],[8302,5600]]]}},{type:"Feature",id:"US.MN",properties:{"hc-group":"admin1","hc-middle-x":.38,"hc-middle-y":.6,"hc-key":"us-mn","hc-a2":"MN",labelrank:"0",hasc:"US.MN","woe-id":"2347582","state-fips":"27",fips:"US27","postal-code":"MN",name:"Minnesota",country:"United States of America",region:"Midwest",longitude:"-93.364","woe-name":"Minnesota",latitude:"46.0592","woe-label":"Minnesota, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[4333,9174],[4688,9173],[4690,9272],[4748,9253],[4770,9125],[4791,9104],[4854,9085],[4916,9083],[4938,9052],[4984,9060],[5024,9084],[5073,9082],[5132,9063],[5181,8985],[5194,9006],[5240,9014],[5304,8955],[5351,8941],[5438,8996],[5463,8964],[5570,8974],[5607,8949],[5668,8950],[5592,8895],[5514,8864],[5432,8802],[5349,8700],[5245,8603],[5214,8573],[5220,8422],[5147,8375],[5116,8322],[5117,8285],[5158,8253],[5144,8214],[5146,8117],[5136,8072],[5181,8035],[5217,8029],[5273,7994],[5360,7903],[5405,7892],[5431,7866],[5445,7758],[5137,7745],[4459,7735],[4462,8203],[4419,8232],[4387,8283],[4429,8325],[4444,8372],[4436,8472],[4402,8555],[4409,8628],[4397,8650],[4394,8777],[4347,8957],[4343,9053],[4353,9083],[4333,9174]]]}},{type:"Feature",id:"US.MT",properties:{"hc-group":"admin1","hc-middle-x":.55,"hc-middle-y":.53,"hc-key":"us-mt","hc-a2":"MT",labelrank:"0",hasc:"US.MT","woe-id":"2347585","state-fips":"30",fips:"US30","postal-code":"MT",name:"Montana",country:"United States of America",region:"West",longitude:"-110.044","woe-name":"Montana",latitude:"46.9965","woe-label":"Montana, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[1093,9555],[1689,9433],[3150,9234],[3084,8486],[3080,8436],[3059,8191],[3056,8191],[1772,8355],[1750,8226],[1713,8295],[1686,8296],[1671,8261],[1614,8258],[1536,8282],[1508,8261],[1451,8281],[1415,8254],[1392,8280],[1391,8331],[1374,8375],[1347,8377],[1326,8419],[1338,8434],[1303,8522],[1303,8596],[1278,8630],[1200,8590],[1167,8620],[1177,8675],[1211,8698],[1204,8727],[1219,8796],[1253,8859],[1258,8897],[1219,8896],[1170,8959],[1172,8979],[1117,9085],[1061,9142],[1076,9210],[1036,9301],[1093,9555]]]}},{type:"Feature",id:"US.ND",properties:{"hc-group":"admin1","hc-middle-x":.47,"hc-middle-y":.5,"hc-key":"us-nd","hc-a2":"ND",labelrank:"0",hasc:"US.ND","woe-id":"2347593","state-fips":"38",fips:"US38","postal-code":"ND",name:"North Dakota",country:"United States of America",region:"Midwest",longitude:"-100.302","woe-name":"North Dakota",latitude:"47.4675","woe-label":"North Dakota, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[3080,8436],[3084,8486],[3150,9234],[3468,9209],[4333,9174],[4353,9083],[4343,9053],[4347,8957],[4394,8777],[4397,8650],[4409,8628],[4402,8555],[4436,8472],[4444,8372],[4231,8374],[3080,8436]]]}},{type:"Feature",id:"US.AZ",properties:{"hc-group":"admin1","hc-middle-x":.51,"hc-middle-y":.45,"hc-key":"us-az","hc-a2":"AZ",labelrank:"0",hasc:"US.AZ","woe-id":"2347561","state-fips":"4",fips:"US04","postal-code":"AZ",name:"Arizona",country:"United States of America",region:"West",longitude:"-111.935","woe-name":"Arizona",latitude:"34.3046","woe-label":"Arizona, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[1630,4782],[1196,4850],[1092,4906],[418,5307],[451,5357],[492,5355],[519,5416],[476,5452],[489,5536],[510,5537],[555,5605],[559,5661],[598,5702],[660,5730],[620,5788],[593,5936],[614,5982],[611,6068],[631,6159],[631,6217],[669,6227],[752,6180],[777,6221],[818,6420],[1488,6297],[1841,6242],[1736,5514],[1630,4782]]]}},{type:"Feature",id:"US.UT",properties:{"hc-group":"admin1","hc-middle-x":.52,"hc-middle-y":.59,"hc-key":"us-ut","hc-a2":"UT",labelrank:"0",hasc:"US.UT","woe-id":"2347603","state-fips":"49",fips:"US49","postal-code":"UT",name:"Utah",country:"United States of America",region:"West",longitude:"-111.544","woe-name":"Utah",latitude:"39.5007","woe-label":"Utah, US, United States",type:"State"},geometry:{type:"Polygon",coordinates:[[[1841,6242],[1488,6297],[818,6420],[929,6975],[1073,7690],[1393,7629],[1643,7585],[1600,7329],[1990,7269],[1966,7108],[1841,6242]]]}},{type:"Feature",id:"US.HI",properties:{"hc-group":"admin1","hc-middle-x":.87,"hc-middle-y":.79,"hc-key":"us-hi","hc-a2":"HI",labelrank:"0",hasc:"US.HI","woe-id":"2347570","state-fips":"15",fips:"US15","postal-code":"HI",name:"Hawaii",country:"United States of America",region:"West",longitude:"-157.999","woe-name":"Hawaii",latitude:"21.4919","woe-label":"Hawaii, US, United States",type:"State"},geometry:{type:"MultiPolygon",coordinates:[[[[2871.1,2945.9],[2875.2,2942.7],[2879.9,2943.9],[2887,2943.5],[2908.4,2936],[2926.2,2927],[2959.3,2906.2],[2969.8,2895.8],[2975.6,2888.1],[2975.6,2868.8],[2976.2,2860.2],[2981.8,2860.4],[2989.5,2864.1],[2995.3,2860.2],[2998,2855.8],[2997.4,2846.7],[3000.1,2841.1],[3003.5,2836],[3013.7,2826.7],[3024.4,2822.1],[3028.7,2818.5],[3031,2814.1],[3030.4,2808.4],[3019,2794.3],[3010.1,2790.9],[2997.5,2778.6],[2988.9,2776],[2988.6,2773.6],[2981.4,2771.8],[2975.3,2767.2],[2953.3,2760.6],[2944.8,2762.6],[2939.9,2762.7],[2935.5,2761.3],[2924.6,2753.9],[2920.9,2749.4],[2913.7,2747.3],[2906.4,2742.2],[2896.2,2736.4],[2893.2,2735.4],[2884.5,2727],[2883,2723.6],[2883.3,2715.9],[2873.3,2705.7],[2870.1,2696.8],[2867.2,2693.6],[2858.8,2686.4],[2857,2687.4],[2857.1,2692],[2852.9,2695.4],[2844.7,2699.6],[2830,2708.8],[2817.8,2712.1],[2815.1,2719.8],[2812.5,2720.6],[2810.9,2726.2],[2809.3,2735.1],[2811.5,2745.8],[2816,2776.4],[2815.6,2781.7],[2812.9,2786.6],[2805.6,2807.3],[2801.6,2814.3],[2802.1,2818.9],[2799.7,2823.2],[2796.3,2833.9],[2792.8,2839.1],[2789.8,2841.4],[2785.4,2846.6],[2780.6,2859.9],[2784.8,2870.8],[2795.1,2879.5],[2796.2,2883.5],[2799,2885.8],[2807.4,2888.9],[2813.4,2898.4],[2817.9,2906.3],[2822.3,2911.4],[2825.4,2911.5],[2827.7,2920.9],[2826.3,2924.9],[2822.9,2928.1],[2815.9,2938.7],[2813,2947.9],[2812.4,2962.2],[2816.2,2969.6],[2818.8,2972],[2826,2972],[2844.7,2968],[2850,2958],[2857.7,2955],[2862.8,2952.2],[2866.3,2948],[2871.1,2945.9]]],[[[2685.2,3028],[2683.1,3024.1],[2677.4,3024.1],[2672.1,3025],[2662.7,3023],[2656.2,3022.3],[2651.9,3026.6],[2654.3,3029.7],[2658.6,3033.4],[2670.2,3040.4],[2675.5,3042.3],[2679.6,3041.9],[2684.7,3036.2],[2682.1,3030],[2685.2,3028]]],[[[2609.3,3070.6],[2599.6,3070.1],[2595.6,3075.8],[2594.6,3080.7],[2594.3,3089.5],[2593.6,3094],[2590.2,3096],[2581.9,3099.3],[2579.4,3103.3],[2581,3107.7],[2585.7,3110.1],[2594,3111.1],[2613.5,3108.3],[2622.3,3100.4],[2628.7,3093.1],[2631.3,3086.9],[2630,3083.4],[2625.7,3076.7],[2616.7,3072.6],[2609.3,3070.6]]],[[[2673.9,3132.2],[2675.6,3130.2],[2683.4,3127.1],[2684.3,3124.4],[2686.7,3123.7],[2687.2,3118.4],[2690,3115.9],[2695.5,3106.3],[2699,3106.6],[2701.3,3109.2],[2705.1,3109.1],[2716.1,3110.5],[2722.5,3115.1],[2725.7,3116.2],[2732.1,3116.5],[2743.2,3114.2],[2746.4,3112.2],[2747.4,3109.8],[2752.3,3104.5],[2758.6,3099.6],[2758.8,3097.7],[2762.9,3098.7],[2765.5,3096.6],[2767.9,3092.2],[2774.8,3091.2],[2781.6,3088],[2791.4,3084.8],[2795.9,3075.7],[2794.9,3067.4],[2791.3,3060.7],[2786.3,3059.3],[2782.2,3053.3],[2776.8,3053.2],[2766,3047.7],[2754.9,3048.2],[2751.2,3048],[2731.5,3038.5],[2721.5,3040.8],[2718.9,3040.1],[2710.5,3039.7],[2704.9,3044.9],[2701.6,3049.9],[2703.3,3051.3],[2703.4,3055.1],[2701.8,3068.9],[2700.2,3072.7],[2700.3,3077],[2699,3080.5],[2694.8,3083.7],[2688.7,3082.3],[2687.7,3079.4],[2685.2,3078.9],[2679.4,3082.6],[2675,3083.4],[2670.7,3086.1],[2667.9,3085.8],[2660.5,3094.3],[2655,3101.5],[2654.7,3106.1],[2652.7,3108.6],[2654.7,3118.8],[2656.5,3123.8],[2658.6,3127.1],[2661.1,3127.3],[2664.7,3132],[2668.7,3131.6],[2672.3,3133.2],[2673.9,3132.2]]],[[[2542.4,3172.8],[2550.3,3172.5],[2552.8,3171.9],[2554.4,3169.4],[2557.4,3169.4],[2586.4,3165],[2594.1,3164.7],[2596.9,3170.6],[2598.9,3171.1],[2601.5,3167.6],[2602.5,3163.6],[2612.6,3161],[2622.6,3161.3],[2627,3161.9],[2631.9,3163.6],[2637.2,3163.5],[2642.1,3162.2],[2644.1,3162.6],[2646.1,3160.1],[2650.7,3159.2],[2646.9,3152.3],[2640.8,3146.4],[2633.3,3142.2],[2625.8,3139.1],[2618.1,3137.5],[2610.3,3138.3],[2602.5,3139.8],[2587.1,3143.9],[2577.6,3147.2],[2554.7,3145.6],[2547.6,3144.5],[2537.6,3144.7],[2533.7,3146.2],[2531.4,3149.3],[2531.3,3153.2],[2535.1,3159.1],[2538.7,3160.4],[2541.9,3164.2],[2542.9,3168.2],[2540.2,3172.9],[2542.4,3172.8]]],[[[2414.1,3252.1],[2415.3,3248.5],[2417.5,3247.3],[2418.6,3243.6],[2422.1,3243.3],[2425.5,3238.6],[2425.5,3233.8],[2422.8,3232.6],[2424.3,3223.3],[2428.6,3221.7],[2432,3216.6],[2435,3215.5],[2437.4,3213.2],[2440.6,3217.4],[2437.6,3219.4],[2437.9,3221.8],[2440.1,3222.8],[2448,3221.2],[2445.1,3218.3],[2444.8,3211.6],[2448.1,3209.6],[2451.4,3205.2],[2450.5,3202.8],[2453.3,3197.1],[2461.8,3192],[2463,3190.8],[2453.8,3181.6],[2451.7,3180.9],[2451.1,3184.2],[2449.4,3185.6],[2439.8,3183.8],[2433.5,3180],[2429,3180.6],[2426.4,3184.7],[2416.6,3189.1],[2413.7,3194.2],[2413.7,3196.2],[2409.6,3193],[2411.6,3190.7],[2403.3,3190.2],[2404.6,3191.8],[2399.9,3193],[2399.1,3199.7],[2405.5,3202.8],[2406.3,3204.6],[2400.6,3208.2],[2398.9,3204.7],[2394.5,3208.7],[2395.9,3202.7],[2394.8,3202],[2388.7,3207.1],[2390.1,3203.7],[2397.6,3196.7],[2396.6,3193.5],[2393,3192],[2373.9,3188.4],[2369.7,3190.8],[2368,3197.9],[2365.9,3203.5],[2361.4,3209.6],[2357.7,3211.5],[2356.8,3217.1],[2355.5,3220.1],[2349.9,3224.5],[2347.5,3228.2],[2347.2,3238.6],[2345.9,3240.5],[2337.4,3247.6],[2345.9,3249.6],[2354.3,3250],[2368.8,3249.7],[2370.5,3253.5],[2374.1,3255.5],[2379.9,3260.1],[2379.6,3261.3],[2382.9,3267.5],[2390.2,3273.8],[2396.5,3275.6],[2400.5,3274.5],[2406.2,3268.8],[2409.8,3262],[2408.9,3258.2],[2414.1,3252.1]]],[[[1955.8,3294.7],[1953.2,3293.9],[1948.4,3296.6],[1946,3304.1],[1946.6,3308.8],[1948.8,3313.7],[1956.7,3321.5],[1963,3326.1],[1971.1,3330.6],[1973.3,3335.9],[1973.1,3339.8],[1976.7,3341.3],[1980.1,3341.2],[1983.8,3339.7],[1985.5,3336],[1981.3,3331.1],[1979.8,3326.6],[1981.2,3321],[1978.5,3317.4],[1972.1,3314.3],[1968.3,3313.2],[1961.2,3308.2],[1959.7,3305],[1955.8,3294.7]]],[[[2117.8,3386.1],[2120.7,3384.6],[2123.8,3384.8],[2127.6,3382.7],[2129.1,3379.5],[2132.9,3376.7],[2134.9,3369.7],[2136.6,3368.7],[2136.1,3360.5],[2134.2,3358],[2131.3,3350.1],[2128.4,3348.5],[2128,3342.6],[2128.8,3334.9],[2128,3329.3],[2123,3328.3],[2125.2,3324.9],[2121.7,3323.7],[2118.3,3320.9],[2116.9,3318.4],[2109.4,3313],[2107.3,3310.8],[2098.5,3314],[2089,3314.5],[2078.6,3316.4],[2076.9,3318],[2074,3315.9],[2073.1,3317.6],[2068.2,3320.6],[2065.1,3326.1],[2062.8,3326.7],[2060,3329.4],[2056.1,3330],[2050.6,3332.5],[2043.4,3334.4],[2041.2,3340.1],[2038.1,3343],[2038.3,3352.8],[2040.3,3353.5],[2048.5,3363],[2049.2,3368.3],[2052.4,3371.8],[2062.1,3374.2],[2067.8,3377.5],[2071.4,3380.6],[2076.1,3382.7],[2077.8,3384.8],[2086,3386.8],[2088.1,3384.2],[2095.7,3382.1],[2095.7,3385.2],[2099.3,3386.6],[2107.5,3385.9],[2111.6,3384.7],[2115.5,3387.5],[2117.8,3386.1]]]]}},{type:"Feature",id:"US.AK",properties:{"hc-group":"admin1","hc-middle-x":.53,"hc-middle-y":.33,"hc-key":"us-ak","hc-a2":"AK",labelrank:"0",hasc:"US.AK","woe-id":"2347560","state-fips":"2",fips:"US02","postal-code":"AK",name:"Alaska",country:"United States of America",region:"West",longitude:"-151.604","woe-name":"Alaska",latitude:"65.3609","woe-label":"Alaska, US, United States",type:"State"},geometry:{type:"MultiPolygon",coordinates:[[[[322,4275],[321,4280],[339,4292],[360,4283],[392,4281],[424,4297],[443,4318],[478,4297],[476,4285],[459,4279],[461,4263],[472,4263],[490,4288],[507,4272],[503,4256],[519,4248],[528,4258],[548,4257],[582,4240],[564,4217],[594,4212],[584,4202],[611,4198],[655,4200],[684,4194],[704,4174],[712,4178],[723,4165],[746,4156],[788,4155],[808,4136],[832,4134],[851,4144],[877,4147],[901,4136],[913,4120],[929,4117],[943,4100],[957,4101],[989,3159],[1039,3148],[1057,3163],[1084,3166],[1081,3138],[1107,3121],[1113,3108],[1167,3060],[1180,3028],[1208,3055],[1220,3056],[1229,3102],[1271,3127],[1297,3104],[1295,3091],[1335,3059],[1347,3039],[1367,3031],[1397,3002],[1477,2890],[1491,2875],[1490,2858],[1504,2853],[1511,2833],[1523,2836],[1613,2802],[1622,2783],[1617,2766],[1636,2722],[1622,2680],[1606,2663],[1592,2664],[1577,2702],[1585,2718],[1577,2755],[1555,2778],[1526,2764],[1520,2723],[1499,2746],[1510,2753],[1513,2796],[1473,2829],[1468,2844],[1424,2880],[1406,2878],[1414,2903],[1397,2917],[1390,2938],[1366,2963],[1364,2998],[1355,2976],[1348,2979],[1354,2974],[1334,2977],[1331,2984],[1344,2982],[1324,2991],[1283,3075],[1286,3041],[1310,2985],[1307,2971],[1288,2985],[1264,2982],[1266,2998],[1249,3031],[1245,3018],[1199,3046],[1202,3028],[1224,3026],[1254,2995],[1255,2977],[1229,2976],[1225,2963],[1169,2999],[1134,3041],[1085,3062],[1050,3083],[1069,3102],[1060,3119],[1025,3098],[969,3113],[977,3128],[953,3122],[899,3136],[842,3125],[826,3141],[792,3157],[802,3194],[788,3179],[783,3158],[761,3173],[742,3174],[759,3196],[727,3195],[706,3205],[716,3212],[705,3227],[679,3222],[658,3229],[636,3221],[637,3247],[620,3199],[631,3213],[642,3184],[628,3167],[614,3132],[576,3140],[552,3130],[545,3108],[537,3114],[509,3089],[521,3115],[493,3078],[478,3071],[455,3077],[433,3070],[426,3086],[455,3099],[483,3126],[457,3115],[438,3133],[464,3170],[478,3204],[473,3223],[491,3228],[524,3249],[543,3235],[554,3240],[588,3228],[544,3260],[549,3268],[527,3271],[524,3284],[490,3256],[469,3252],[424,3205],[428,3196],[407,3182],[408,3170],[377,3133],[343,3131],[339,3114],[317,3109],[309,3075],[334,3075],[352,3048],[305,3020],[308,3008],[287,2998],[271,2977],[246,2981],[222,2955],[212,2964],[200,2941],[186,2947],[152,2925],[163,2924],[146,2893],[133,2901],[107,2879],[96,2891],[89,2869],[73,2877],[24,2852],[40,2842],[7,2817],[-44,2808],[-61,2821],[-118,2794],[-130,2803],[-155,2792],[-167,2799],[-155,2816],[-167,2823],[-200,2781],[-223,2772],[-230,2808],[-252,2775],[-262,2795],[-286,2772],[-278,2800],[-223,2823],[-171,2853],[-115,2850],[-113,2838],[-84,2825],[-99,2845],[-80,2870],[-38,2892],[12,2907],[27,2896],[31,2922],[57,2946],[97,2964],[126,3051],[154,3072],[156,3089],[95,3074],[79,3099],[90,3123],[60,3099],[61,3072],[44,3066],[28,3121],[8,3111],[-6,3123],[-7,3147],[-37,3132],[-62,3132],[-69,3120],[-112,3131],[-85,3135],[-82,3162],[-87,3191],[-63,3208],[-76,3277],[-72,3305],[-89,3269],[-149,3267],[-172,3278],[-167,3295],[-184,3332],[-198,3342],[-212,3370],[-166,3383],[-134,3368],[-125,3345],[-109,3358],[-131,3376],[-161,3385],[-185,3401],[-173,3407],[-186,3433],[-191,3419],[-205,3460],[-194,3469],[-211,3484],[-189,3485],[-198,3504],[-175,3498],[-170,3526],[-130,3555],[-118,3553],[-108,3582],[-85,3606],[-61,3612],[-46,3602],[-34,3577],[-22,3576],[7,3591],[28,3609],[31,3600],[76,3594],[100,3613],[106,3664],[92,3688],[125,3701],[117,3734],[102,3721],[73,3725],[45,3711],[20,3709],[8,3729],[-28,3742],[-59,3740],[-101,3771],[-108,3789],[-98,3804],[-111,3837],[-95,3829],[-73,3837],[-119,3868],[-138,3897],[-124,3909],[-95,3914],[-87,3908],[-68,3921],[-2,3935],[36,3937],[67,3929],[47,3893],[52,3877],[111,3858],[119,3845],[140,3868],[162,3859],[147,3882],[128,3880],[135,3893],[119,3943],[132,3945],[139,3923],[133,3914],[145,3887],[163,3891],[175,3870],[196,3867],[201,3879],[179,3900],[152,3894],[142,3915],[154,3949],[129,3950],[86,3976],[89,4e3],[86,4032],[55,4092],[40,4106],[27,4135],[45,4151],[57,4180],[76,4171],[124,4160],[156,4170],[182,4190],[189,4216],[201,4233],[224,4253],[229,4246],[253,4268],[256,4258],[287,4258],[317,4277],[322,4275]],[[322,4275],[323,4272],[323,4272],[323,4272],[311,4248],[326,4263],[323,4272],[323,4272],[323,4272],[324,4274],[322,4275]]],[[[-905,2721],[-922,2724],[-904,2733],[-898,2724],[-905,2721]]],[[[-739,2715],[-724,2712],[-729,2702],[-734,2709],[-739,2715]]],[[[-645,2693],[-651,2700],[-684,2693],[-643,2725],[-634,2718],[-623,2738],[-597,2740],[-595,2719],[-626,2714],[-645,2693]]],[[[-439,2748],[-458,2742],[-469,2755],[-457,2762],[-439,2748]]],[[[-268,2722],[-267,2733],[-255,2724],[-252,2715],[-268,2722]]],[[[-303,2804],[-293,2800],[-290,2768],[-309,2757],[-338,2767],[-359,2754],[-385,2761],[-386,2779],[-369,2783],[-354,2800],[-335,2796],[-303,2804]]],[[[-59,2737],[-58,2733],[-70,2740],[-62,2746],[-59,2737]]],[[[1485,2651],[1482,2635],[1455,2672],[1458,2688],[1473,2659],[1485,2651]]],[[[1568,2687],[1567,2665],[1547,2678],[1548,2705],[1568,2687]]],[[[-81,2759],[-83,2747],[-107,2735],[-88,2750],[-81,2759]]],[[[-100,2783],[-114,2781],[-119,2759],[-135,2762],[-131,2784],[-100,2783]]],[[[1530,2716],[1542,2706],[1538,2690],[1528,2711],[1530,2716]]],[[[1427,2708],[1429,2706],[1439,2711],[1430,2683],[1427,2708]]],[[[1439,2743],[1430,2731],[1420,2735],[1421,2742],[1439,2743]]],[[[1555,2775],[1573,2753],[1578,2721],[1569,2699],[1529,2721],[1537,2731],[1531,2760],[1555,2775]]],[[[1408,2747],[1414,2765],[1435,2776],[1437,2763],[1408,2747]]],[[[1480,2788],[1503,2783],[1494,2762],[1468,2778],[1475,2803],[1480,2788]]],[[[1467,2811],[1469,2795],[1445,2798],[1451,2810],[1467,2811]]],[[[1495,2807],[1510,2793],[1504,2784],[1485,2797],[1482,2819],[1495,2807]]],[[[253,2834],[251,2826],[235,2816],[239,2829],[253,2834]]],[[[276,2825],[279,2820],[259,2824],[263,2832],[276,2825]]],[[[1448,2845],[1470,2828],[1458,2816],[1449,2816],[1448,2845]]],[[[333,2880],[345,2878],[321,2864],[319,2872],[333,2880]]],[[[1295,2870],[1295,2846],[1283,2843],[1288,2862],[1295,2870]]],[[[1246,2943],[1241,2926],[1234,2942],[1237,2951],[1246,2943]]],[[[345,2973],[360,2960],[353,2961],[333,2971],[345,2973]]],[[[370,2989],[380,3007],[393,2992],[407,2995],[413,2978],[404,2970],[365,2959],[347,2974],[353,2990],[370,2989]]],[[[389,3006],[380,3014],[397,3021],[396,3012],[389,3006]]],[[[-42,3112],[-58,3105],[-53,3120],[-31,3126],[-42,3112]]],[[[643,3141],[641,3133],[628,3129],[639,3150],[643,3141]]],[[[683,3167],[692,3162],[662,3126],[639,3113],[651,3133],[678,3156],[683,3167]]],[[[-250,3366],[-233,3350],[-243,3328],[-239,3312],[-272,3312],[-294,3323],[-315,3350],[-321,3371],[-293,3362],[-286,3369],[-250,3366]]],[[[712,3177],[732,3173],[708,3154],[714,3166],[712,3177]]],[[[655,3184],[659,3177],[651,3159],[646,3171],[655,3184]]],[[[-553,3496],[-557,3490],[-570,3515],[-566,3524],[-553,3496]]],[[[735,3177],[725,3175],[725,3181],[752,3187],[735,3177]]],[[[-478,2741],[-509,2724],[-476,2727],[-492,2716],[-574,2704],[-597,2711],[-551,2713],[-526,2758],[-501,2752],[-507,2737],[-487,2749],[-478,2741]]],[[[1452,2689],[1461,2728],[1438,2724],[1443,2751],[1435,2778],[1419,2778],[1414,2794],[1439,2796],[1449,2769],[1468,2766],[1516,2700],[1532,2652],[1522,2641],[1495,2679],[1475,2669],[1476,2693],[1452,2689]]],[[[1292,2882],[1302,2902],[1330,2883],[1354,2825],[1358,2769],[1323,2816],[1325,2832],[1311,2830],[1320,2852],[1308,2856],[1308,2872],[1292,2882]]],[[[362,2955],[355,2938],[381,2954],[386,2936],[380,2918],[395,2917],[382,2900],[349,2913],[366,2899],[363,2889],[337,2894],[303,2868],[278,2838],[275,2849],[298,2883],[281,2883],[271,2862],[256,2873],[259,2892],[247,2904],[253,2919],[284,2939],[295,2933],[298,2909],[306,2934],[302,2950],[318,2956],[321,2936],[329,2963],[348,2946],[340,2965],[362,2955]]],[[[1277,2920],[1294,2891],[1278,2884],[1270,2906],[1243,2925],[1247,2941],[1271,2972],[1321,2953],[1323,2931],[1299,2928],[1309,2919],[1325,2926],[1333,2899],[1320,2896],[1277,2920]]],[[[1355,2884],[1341,2912],[1326,2962],[1314,2989],[1331,2969],[1358,2968],[1379,2937],[1376,2926],[1357,2961],[1361,2939],[1379,2919],[1383,2888],[1350,2853],[1347,2875],[1355,2884]]],[[[-347,3767],[-339,3759],[-322,3764],[-307,3758],[-307,3734],[-290,3713],[-256,3692],[-266,3681],[-286,3692],[-315,3679],[-313,3698],[-337,3738],[-353,3750],[-371,3746],[-381,3757],[-379,3773],[-362,3796],[-362,3776],[-347,3767]]],[[[1402,2834],[1394,2792],[1400,2779],[1385,2761],[1377,2790],[1389,2804],[1373,2811],[1364,2838],[1379,2842],[1395,2828],[1402,2835],[1401,2839],[1383,2863],[1396,2866],[1441,2858],[1445,2825],[1422,2845],[1441,2817],[1439,2809],[1410,2805],[1402,2834]]]]}},{type:"Feature",id:"GU.3605",properties:{"hc-group":"admin1","hc-middle-x":.24,"hc-middle-y":.72,"hc-key":"gu-3605","hc-a2":"GU",labelrank:"20",hasc:"GU","alt-name":null,"woe-id":"23424832",subregion:null,fips:null,"postal-code":null,name:"Guam",country:"Guam","type-en":null,region:null,longitude:"144.789","woe-name":"Guam",latitude:"13.4733","woe-label":null,type:null},geometry:{type:"Polygon",coordinates:[[[5547.2,2927.7],[5514.9,2894.6],[5496.3,2840.2],[5483.2,2717.1],[5451.1,2669.3],[5428.3,2659.8],[5401.8,2659],[5380.1,2666.8],[5367.1,2690.7],[5349.7,2713.6],[5345.6,2720.2],[5338.2,2770.2],[5334.2,2779.1],[5328.1,2786.9],[5320.6,2793],[5311.1,2797.4],[5324.5,2810.5],[5333,2824],[5337.6,2840.8],[5339.1,2864.2],[5336.7,2875.1],[5330.3,2888.8],[5323.1,2900.4],[5309.5,2910.7],[5315.4,2920.6],[5325.5,2926.2],[5330.8,2919.1],[5348.7,2920.7],[5427,2965.2],[5445.1,2981.1],[5516.1,3021.4],[5529.9,3035],[5541.8,3050.8],[5552.3,3069.8],[5580.2,3158],[5588.6,3173.8],[5603.9,3188.2],[5625,3200.2],[5643,3201.5],[5650.3,3183.1],[5663.2,3153.7],[5685.9,3136.9],[5711.7,3129.3],[5734.3,3127.5],[5734.5,3112],[5715.5,3077.5],[5675.4,3020],[5629.7,2978.9],[5547.2,2927.7]]]}},{type:"Feature",id:"MP.TI",properties:{"hc-group":"admin1","hc-middle-x":.49,"hc-middle-y":.53,"hc-key":"mp-ti","hc-a2":"TI",labelrank:"20",hasc:"MP.TI","alt-name":null,"woe-id":"29389659",subregion:null,fips:"120","postal-code":"TI",name:"Tinian",country:"Northern Mariana Islands","type-en":null,region:null,longitude:"145.622","woe-name":"Tinian",latitude:"14.9995","woe-label":"Tinian, MP, Northern Mariana Islands",type:null},geometry:{type:"Polygon",coordinates:[[[6918.26,2947.39],[6905.54,2938],[6893.28,2946.48],[6890.39,2954.97],[6888.02,2972.99],[6884.41,2982.21],[6876.67,2992.63],[6875,2997.37],[6875.88,3004.97],[6883.36,3019.91],[6896.8,3037.05],[6910.81,3046.96],[6919.81,3040.36],[6923.12,3031.97],[6922.19,3023.68],[6920.07,3014.79],[6919.59,3004.69],[6922.14,2998.96],[6930.76,2988.62],[6932.48,2981.91],[6928.29,2965.11],[6918.26,2947.39]]]}},{type:"Feature",id:"MP.SA",properties:{"hc-group":"admin1","hc-middle-x":.4,"hc-middle-y":.52,"hc-key":"mp-sa","hc-a2":"SA",labelrank:"20",hasc:"MP.SA","alt-name":null,"woe-id":"29389658",subregion:null,fips:"110","postal-code":"SA",name:"Saipan",country:"Northern Mariana Islands","type-en":null,region:null,longitude:"145.744","woe-name":"Saipan",latitude:"15.1921","woe-label":"Saipan, MP, Northern Mariana Islands",type:null},geometry:{type:"Polygon",coordinates:[[[7007.25,3102.7],[7004.22,3096.76],[7000.28,3093.8],[6995.53,3094.1],[6989.88,3097.93],[6982.09,3090.8],[6978.11,3082.21],[6978.48,3073.09],[6983.18,3064.31],[6986.74,3055.6],[6977.81,3055.92],[6966.73,3059.86],[6963.74,3062.01],[6949.62,3058.74],[6944.21,3060.07],[6942.09,3069.26],[6943.24,3078.9],[6950.97,3103.02],[6951.75,3112.35],[6951.48,3119.6],[6952.66,3125.82],[6957.49,3131.77],[6960.86,3133.82],[6972.86,3138.57],[6975.05,3141.69],[6975.51,3149.24],[6976.81,3151.94],[6984.63,3155.78],[7001.18,3160.95],[7009.73,3167.36],[7018.16,3170.5],[7027.96,3169.14],[7032.47,3164.04],[7024.89,3156.14],[7017.64,3151.6],[7012.7,3144.45],[7001.86,3116.6],[7002.24,3110.94],[7007.25,3102.7]]]}},{type:"Feature",id:"MP.RO",properties:{"hc-group":"admin1","hc-middle-x":.58,"hc-middle-y":.49,"hc-key":"mp-ro","hc-a2":"RO",labelrank:"20",hasc:"MP.RO","alt-name":null,"woe-id":"29389660",subregion:null,fips:"100","postal-code":"RO",name:"Rota",country:"Northern Mariana Islands","type-en":null,region:null,longitude:"145.205","woe-name":"Rota",latitude:"14.1465","woe-label":"Rota, MP, Northern Mariana Islands",type:null},geometry:{type:"Polygon",coordinates:[[[6727.41,2713.17],[6721.71,2706.44],[6707.9,2699.67],[6700.33,2702.14],[6693.26,2708.01],[6680.29,2711.36],[6659.04,2708.97],[6647.46,2709.45],[6642.5,2714.19],[6650.83,2726.96],[6670.1,2739.28],[6691.22,2748.49],[6705.24,2752.06],[6739.09,2765.87],[6758.97,2767.5],[6766.5,2751.6],[6764.14,2742.88],[6760.28,2736.58],[6754.13,2732.77],[6744.6,2731.57],[6736.93,2728.62],[6731.82,2721.48],[6727.41,2713.17]]]}},{type:"Feature",id:"AS.6515",properties:{"hc-group":"admin1","hc-middle-x":.24,"hc-middle-y":.46,"hc-key":"as-6515","hc-a2":"EA",labelrank:"20",hasc:"AS.ET","alt-name":null,"woe-id":"24549646",subregion:null,fips:"60010","postal-code":null,name:"Eastern",country:"American Samoa","type-en":null,region:null,longitude:"-170.639","woe-name":"Eastern",latitude:"-14.272","woe-label":null,type:null},geometry:{type:"Polygon",coordinates:[[[6089.16,2898.15],[6132.49,2953.42],[6202.07,2969],[6279.8,2964.65],[6334.34,2944.81],[6362.13,2968.42],[6379,2956.79],[6376.66,2932.97],[6347.14,2919.86],[6237.91,2914.4],[6206.03,2905.67],[6160.35,2871.88],[6143.32,2848.81],[6127.17,2853.33],[6103.47,2849.62],[6101.68,2875.8],[6089.16,2898.15]]]}},{type:"Feature",id:"AS.6514",properties:{"hc-group":"admin1","hc-middle-x":.53,"hc-middle-y":.42,"hc-key":"as-6514","hc-a2":"WE",labelrank:"20",hasc:"AS.WT","alt-name":null,"woe-id":"24549645",subregion:null,fips:"60050","postal-code":null,name:"Western",country:"American Samoa","type-en":null,region:null,longitude:"-170.768","woe-name":"Western",latitude:"-14.3241","woe-label":null,type:null},geometry:{type:"Polygon",coordinates:[[[6143.32,2848.81],[6088.48,2774.48],[6038.01,2733.63],[6025.19,2748.22],[5948.3,2800.65],[5898.81,2826.08],[5883,2840.2],[5963.05,2888.09],[5993.24,2894.02],[6058.43,2892.7],[6089.16,2898.15],[6101.68,2875.8],[6103.47,2849.62],[6127.17,2853.33],[6143.32,2848.81]]]}},{type:"Feature",id:"PR.3614",properties:{"hc-group":"admin1","hc-middle-x":.41,"hc-middle-y":.5,"hc-key":"pr-3614","hc-a2":"PR",labelrank:"20",hasc:"PR.","alt-name":null,"woe-id":"23424935",subregion:null,fips:"72033","postal-code":null,name:"Puerto Rico",country:"Puerto Rico","type-en":null,region:null,longitude:"-66.44410000000001","woe-name":"Puerto Rico",latitude:"18.2448","woe-label":null,type:null},geometry:{type:"MultiPolygon",coordinates:[[[[6318.4,3489.6],[6314.7,3487.5],[6300.9,3488.2],[6281.7,3476.8],[6277,3481.1],[6259.9,3474.9],[6219.9,3464.7],[6211.9,3460.7],[6201.2,3463.9],[6185.3,3461.7],[6170.3,3463.5],[6162.2,3478.5],[6182.8,3479.7],[6193,3483.8],[6214.1,3498.2],[6255,3505.6],[6261.6,3504.6],[6279.5,3498.7],[6306.5,3498.2],[6313.2,3495.8],[6318.4,3489.6]]],[[[6326.1,3590],[6332.5,3580.8],[6325.5,3580.7],[6329.1,3577.1],[6319.3,3577.8],[6314.9,3584.4],[6311.4,3584.4],[6317.2,3571.1],[6315.3,3565.8],[6308,3576.8],[6286.2,3596.3],[6286.3,3598.2],[6298.9,3598.5],[6313.6,3595.9],[6326.1,3590]]],[[[5425.5,3673.4],[5479.4,3663],[5532.4,3670.6],[5539.7,3669.7],[5559,3663.3],[5566.6,3662.9],[5586.6,3667.6],[5615.6,3670.6],[5629.2,3669.1],[5642.9,3664.4],[5651.2,3666.1],[5684.2,3666.2],[5704.5,3660.5],[5747.9,3669.8],[5788.3,3658.3],[5811.6,3665.4],[5838.8,3657.2],[5844.5,3661.7],[5851.2,3660.7],[5856.9,3653.2],[5861.3,3651],[5870.1,3659.5],[5875.2,3658],[5873.6,3651],[5883.6,3645.9],[5888.7,3634],[5896.6,3633.6],[5913.4,3639.1],[5913.3,3643],[5904.8,3644],[5895.4,3648.6],[5881.5,3662.2],[5915.4,3652.2],[5937.9,3647.3],[5945.2,3650.7],[5949.6,3657.7],[5961.2,3655.4],[5984.8,3649.1],[5992.7,3654.6],[5998.9,3653.5],[6005.2,3648.9],[6021.8,3645.4],[6030.9,3640.7],[6040.3,3631],[6045.9,3633.8],[6049.6,3639.2],[6053.3,3635.5],[6048.7,3628.3],[6061.1,3633.6],[6070,3621.1],[6078.8,3616.6],[6085.5,3621.5],[6099.4,3611],[6117.3,3608.8],[6134.4,3622.3],[6138.8,3617.7],[6134.3,3591.1],[6133.6,3568.6],[6135.8,3562.3],[6133.8,3555.7],[6141.8,3550.1],[6148.8,3553.8],[6147.4,3548.8],[6155.3,3536.7],[6150,3532.8],[6149.4,3528.2],[6144.8,3527.7],[6139.7,3535.6],[6134,3535.4],[6132.2,3529.7],[6137.3,3523],[6132.5,3518.7],[6126.4,3519.7],[6117.7,3524],[6099.5,3516],[6089.4,3513.5],[6081,3509.5],[6072.2,3500.5],[6054.6,3472.1],[6053.4,3458],[6046.4,3448.6],[6032,3444.1],[6029.3,3440.8],[6034.9,3425.1],[6025,3415.7],[6006,3403.6],[5979.5,3393.9],[5967.9,3394],[5945.6,3397.1],[5939.4,3395.7],[5924.4,3389.4],[5905.1,3389.1],[5894.6,3386.3],[5864.8,3369.9],[5847.8,3368.8],[5843.8,3366.2],[5840.5,3373.5],[5847.3,3377.8],[5840.3,3384.5],[5830.4,3375.4],[5824.6,3373.6],[5798.2,3377.8],[5790.9,3387.4],[5779.8,3391.8],[5771.4,3391.1],[5759.5,3388.1],[5745,3377.8],[5734.6,3378.9],[5724.5,3386.5],[5716,3396.1],[5707.2,3401.7],[5690.4,3398.5],[5677.6,3394.1],[5660.8,3392.9],[5650.2,3386.5],[5644.1,3385.2],[5636,3389.3],[5628.7,3385.2],[5625.1,3391.2],[5616.3,3391.9],[5595.4,3388.8],[5576,3395.5],[5555,3395.2],[5555.3,3402.6],[5550.7,3404.8],[5543.8,3403.1],[5537.4,3399.1],[5537.4,3395],[5544.5,3395.1],[5538.6,3387],[5528.6,3381.3],[5506.2,3376],[5490.2,3376.4],[5474,3375.7],[5470.9,3364.7],[5461.3,3365.7],[5454,3370.9],[5442.3,3383],[5420.3,3385.2],[5407.9,3384.9],[5400.6,3387.2],[5393.5,3381],[5385.1,3376.5],[5377.6,3374.6],[5367.7,3375.8],[5345.6,3496.7],[5352.9,3504.2],[5355.8,3510.5],[5345.8,3521.9],[5335.7,3550.8],[5325,3609.8],[5338.1,3616.9],[5350.7,3627.1],[5351.3,3639],[5345.8,3648.3],[5345,3661.9],[5354.2,3674.3],[5379.7,3682],[5406.9,3681.4],[5425.5,3673.4]]]]}},{type:"Feature",id:"VI.3617",properties:{"hc-group":"admin1","hc-middle-x":.68,"hc-middle-y":.65,"hc-key":"vi-3617","hc-a2":"ST",labelrank:"20",hasc:"VI.ST","alt-name":null,"woe-id":"24549909",subregion:null,fips:"010","postal-code":null,name:"Saint Thomas",country:"United States Virgin Islands","type-en":null,region:null,longitude:"-64.9263","woe-name":"Saint Thomas Island",latitude:"18.3543","woe-label":"Saint Thomas Island, VI, US Virgin Islands",type:null},geometry:{type:"MultiPolygon",coordinates:[[[[6672.7,3575.9],[6666.1,3573.2],[6661.7,3573.9],[6655.9,3565],[6645.1,3551.7],[6642.1,3556.2],[6642.5,3562.6],[6646.1,3572.2],[6657.8,3585.3],[6663.4,3589.5],[6670.8,3583.6],[6672.7,3575.9]]],[[[6693.7,3671.2],[6750.6,3637.6],[6806.7,3604.9],[6829.3,3568],[6811.8,3565.4],[6798.1,3570.1],[6780.5,3563.8],[6769.2,3547.5],[6720.4,3566.3],[6703,3577.5],[6689.4,3605.1],[6682.7,3590.5],[6668.1,3600.8],[6634.7,3594.7],[6610.7,3599.5],[6592.4,3619.9],[6543.3,3605.7],[6518.5,3629.9],[6564.6,3653.5],[6603.7,3663.2],[6660.3,3660.5],[6683.4,3643.7],[6697.3,3648.1],[6672.4,3667.8],[6660.5,3681.6],[6693.7,3671.2]]],[[[6732.4,3685.9],[6726.4,3680],[6718.9,3690.4],[6715.1,3702.4],[6709.1,3709.7],[6721,3713],[6732.1,3704.6],[6732.4,3685.9]]]]}},{type:"Feature",id:"VI.6398",properties:{"hc-group":"admin1","hc-middle-x":.52,"hc-middle-y":.43,"hc-key":"vi-6398","hc-a2":"SJ",labelrank:"20",hasc:"VI.SJ","alt-name":null,"woe-id":"24549908",subregion:null,fips:"020","postal-code":null,name:"Saint John",country:"United States Virgin Islands","type-en":null,region:null,longitude:"-64.7461","woe-name":"Saint John Island",latitude:"18.3422","woe-label":"Saint John Island, VI, US Virgin Islands",type:null},geometry:{type:"Polygon",coordinates:[[[7101.2,3613],[7107.5,3596.4],[7086.2,3593],[7044.8,3607.1],[7033.7,3602.7],[7050.1,3580.5],[7039.6,3543],[6990,3570.1],[6912.4,3563.5],[6889.5,3584.8],[6912.9,3619.4],[6938.9,3630.2],[6966.6,3638.2],[6960.3,3650.2],[6974.2,3657.4],[7025.8,3643.1],[7050.7,3638.3],[7073.6,3628],[7101.2,3613]]]}},{type:"Feature",id:"VI.6399",properties:{"hc-group":"admin1","hc-middle-x":.36,"hc-middle-y":.46,"hc-key":"vi-6399","hc-a2":"SC",labelrank:"20",hasc:"VI.SC","alt-name":null,"woe-id":"24549907",subregion:null,fips:"030","postal-code":null,name:"Saint Croix",country:"United States Virgin Islands","type-en":null,region:null,longitude:"-64.77979999999999","woe-name":"Saint Croix Island",latitude:"17.735","woe-label":"Saint Croix Island, VI, US Virgin Islands",type:null},geometry:{type:"Polygon",coordinates:[[[6848.26,3400.7],[6872.45,3391.98],[6884.67,3385.41],[6895.26,3375.63],[6921.78,3397.15],[6963.22,3405.74],[7008.31,3402.91],[7045.5,3390.76],[7045.43,3382.55],[7015.7,3379.62],[6990.9,3371.76],[6942.22,3349.89],[6917.13,3342.34],[6679.73,3310.78],[6658,3303.37],[6666.64,3323.87],[6668.22,3341.31],[6667.5,3390.42],[6671.16,3405.54],[6680.68,3415.03],[6724.02,3401.35],[6748.58,3412.26],[6774.03,3428.15],[6801.54,3434],[6804.37,3430.84],[6848.26,3400.7]]]}},{type:"Feature",properties:{"hc-group":"__separator_lines__"},geometry:{type:"MultiLineString",coordinates:[[[-707,5188],[3651,2950]],[[1747,2584],[1747,3799]],[[5201,2584],[5201,3799]],[[5821,2584],[5821,3248]],[[6441,2584],[6441,3799]],[[7185,2584],[7185,3799]],[[5201,3248],[7185,3248]],[[5201,3799],[7185,3799]]]}}]};t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFeatureFlags=function(){return n.get("/api/feature_flags/all")};var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(130))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(13)),i=n(a(0)),s=a(2),u=n(a(343)),c=n(a(342)),d=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(83)),l=n(a(79));function n(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={ordering:e.ordering},t.onWindowChange=t.onWindowChange.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,i.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){l.default.addLayoutChangeListener(this.onWindowChange),l.default.addWindowResizeListener(this.onWindowChange)}},{key:"componentDidMount",value:function(){var e=this;this.props.checkout||(0,r.default)(this.refs.floatPane).affix({offset:{top:function(){return(0,r.default)(".sidebar").offset().top-30},bottom:function(){return(0,r.default)("footer").outerHeight()+100}},target:window}),setTimeout(function(){e.onWindowChange()},0)}},{key:"componentWillUnmount",value:function(){l.default.removeLayoutChangeListener(this.onWindowChange),l.default.removeWindowResizeListener(this.onWindowChange)}},{key:"onWindowChange",value:function(){if(!this.props.checkout){var e=(0,r.default)(".cart-checkout-wrapper .content"),t=(0,r.default)(".cart-checkout-wrapper .sidebar .float-pane");0<e.length&&0<t.length&&(e.outerHeight()<=t.outerHeight()?(t.addClass("affix-force-top"),e.css({"min-height":t.outerHeight()+"px"})):(t.removeClass("affix-force-top"),e.css({"min-height":"none"})))}}},{key:"render",value:function(){var e=null,t=this.props,a=t.checkout,n=t.cart,o="/"+d.Base;n&&n.projects.length&&(e=n.projects.map(function(e){return i.default.createElement(c.default,{checkout:a,key:e.projectId,item:e})}));var r=n&&n.promotions,l=r&&this.props.canGetPromotions?r.atgPromoDescription:"";return i.default.createElement("div",{className:"sidebar hidden-xs"},i.default.createElement("div",{ref:"floatPane",className:"float-pane"},i.default.createElement(u.default,{cart:n,checkout:a,submitOrder:this.props.submitOrder,ordering:this.props.ordering,canGetPromotions:this.props.canGetPromotions}),!a&&i.default.createElement("p",{className:"projects-link"},"Exit Cart and ",i.default.createElement(s.Link,{to:o,className:"underline-link"},"Go Back to Projects"))),a&&i.default.createElement("div",{className:"panel sidebar-cart"},i.default.createElement("div",{className:"panel-body"},i.default.createElement("h3",null,"Cart Summary"),i.default.createElement("p",{className:"sidebar-promotion",dangerouslySetInnerHTML:{__html:l}}),e)))}}])&&p(t.prototype,a),n&&p(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(55)),l=n(a(52)),i=n(a(47)),s=n(a(12)),u=o(a(346)),c=n(a(0)),d=o(a(9)),f=n(a(23));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={initAddress:e.initAddress,countryOptions:null,stateOptions:null,useShippingAddress:!e.initAddress,loaded:!1},t.onCountriesLoaded=t.onCountriesLoaded.bind(b(b(t))),t.onCountryChanged=t.onCountryChanged.bind(b(b(t))),t.onStatesLoaded=t.onStatesLoaded.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,c.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){l.default.addBillingAddressCountriesLoadedListener(this.onCountriesLoaded),l.default.addBillingAddressStatesLoadedListener(this.onStatesLoaded)}},{key:"componentDidMount",value:function(){r.loadBillingAddressCountries()}},{key:"componentWillUnmount",value:function(){l.default.removeBillingAddressCountriesLoadedListener(this.onCountriesLoaded),l.default.removeBillingAddressStatesLoadedListener(this.onStatesLoaded)}},{key:"onCountriesLoaded",value:function(e){this.setState({countryOptions:e});var t="US";this.props.initAddress&&this.props.initAddress.country&&(t=this.props.initAddress.country),r.loadBillingAddressStates(t)}},{key:"onCountryChanged",value:function(e){r.loadBillingAddressStates(e.newValue)}},{key:"onStatesLoaded",value:function(e){this.setState({stateOptions:e}),this.refs.state&&this.refs.state.setDisabled(0===e.length),this.state.loaded||(this.setState({loaded:!0}),this.props.onLoaded&&this.props.onLoaded())}},{key:"render",value:function(){var t=this;if(!this.state.stateOptions)return c.default.createElement("div",null);var o,r,e=this.state.initAddress;return c.default.createElement("div",{className:"billing-address-elements"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12"},c.default.createElement(i.default,{name:"useShippingAddress",label:"Use shipping address",initValue:this.state.useShippingAddress,onChange:function(e){return t.setState({useShippingAddress:e.newValue})}}))),this.state.useShippingAddress&&this.renderShippingAddress(),!this.state.useShippingAddress&&c.default.createElement("div",null,c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12"},c.default.createElement(f.default,{name:"country",ref:"country",label:"Country",initValue:e?e.country:"US",options:this.state.countryOptions,serverSideValidationKey:"country",onChange:this.onCountryChanged,rules:[d.required("Please select a country.")]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12"},c.default.createElement(s.default,{name:"firstName",ref:"firstName",label:"First Name",initValue:e?e.firstName:"",pattern:/^[a-zA-Z]*$|^[a-zA-Z][a-zA-Z0-9 \-.]*$/,serverSideValidationKey:"firstName",maxLength:33,rules:[d.required("Please enter your first name."),d.maxLength(33),(r="lastName",{key:"firstNameLength",dependsOn:{controlKeys:[r],onEveryChange:!0},test:function(e,t,a){if(!a[r])return null;var n=e.length+a[r].value().length;return n<=34?null:"The name on your card must be a maximum of 30 characters."}})]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12"},c.default.createElement(s.default,{name:"lastName",ref:"lastName",label:"Last Name",initValue:e?e.lastName:"",pattern:/^[a-zA-Z]*$|^[a-zA-Z][a-zA-Z0-9 \-.]*$/,serverSideValidationKey:"lastName",maxLength:33,rules:[d.required("Please enter your last name."),d.maxLength(33),(o="firstName",{key:"lastNameLength",dependsOn:{controlKeys:[o],onEveryChange:!0},test:function(e,t,a){if(!a[o])return null;var n=e.length+a[o].value().length;return n<=34?null:" "}})]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12"},c.default.createElement(s.default,{name:"address1",ref:"address1",pattern:/^[a-zA-Z0-9 \-./,]*$/,maxLength:35,label:"Street Address",initValue:e?e.address1:"",serverSideValidationKey:"address1",rules:[d.required("Please enter a street address."),d.maxLength(35)]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-md-6 col-sm-12"},c.default.createElement(s.default,{name:"address2",ref:"address2",pattern:/^[a-zA-Z0-9 \-./,]*$/,maxLength:35,label:"Apt/Suite (optional)",initValue:e?e.address2:"",serverSideValidationKey:"address2",rules:[d.maxLength(35)]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12"},c.default.createElement(s.default,{name:"city",ref:"city",label:"City",initValue:e?e.city:"",pattern:/^[a-zA-Z0-9 \-.]*$/,maxLength:30,serverSideValidationKey:"city",rules:[d.required("Please enter a city."),d.maxLength(30)]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-md-6 col-sm-12"},c.default.createElement(f.default,{name:"state",ref:"state",label:"State",initValue:e?e.state:"",initDisabled:0===this.state.stateOptions.length,options:this.state.stateOptions,serverSideValidationKey:"state",rules:[d.required("Please select a state.")]})),c.default.createElement("div",{className:"col-md-6 col-sm-12"},c.default.createElement(s.default,{name:"postalCode",ref:"postalCode",label:"Zip",initValue:e?e.postalCode:"",maxLength:10,serverSideValidationKey:"postalCode",rules:[d.required("Please enter a postal/zip code."),u.postalCode(!0),d.maxLength(10)]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12"},c.default.createElement(s.default,{name:"phoneNumber",ref:"phoneNumber",label:"Phone Number",initValue:e?e.phoneNumber:"",serverSideValidationKey:"phone",maxLength:15,rules:[d.required("Please enter a phone number."),d.maxLength(15)]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12"},c.default.createElement(s.default,{name:"companyName",ref:"companyName",initValue:e?e.companyName:"",pattern:/^[a-zA-Z0-9 \-.]*$/,label:"Company Name (optional)",serverSideValidationKey:"companyName"})))))}},{key:"renderShippingAddress",value:function(){var e=l.default.getDefaultShippingAddress();return c.default.createElement("div",{className:"row shipping-address"},c.default.createElement("div",{className:"col-xs-12"},c.default.createElement("address",null,e.firstName," ",e.lastName,c.default.createElement("br",null),e.address1,c.default.createElement("br",null),e.address2," ",e.address2?c.default.createElement("br",null):null,e.city,", ",e.state," ",e.postalCode,c.default.createElement("br",null),e.phoneNumber," ",c.default.createElement("br",null),e.company)))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1126)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(9));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?f(a):n).state={addresses:t.props.billingAddresses},t.onEdit=t.onEdit.bind(f(f(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,r.default.Component),t=o,(a=[{key:"onEdit",value:function(e){this.props.onEditBillingAddressItem&&this.props.onEditBillingAddressItem(e)}},{key:"render",value:function(){return r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(l.default,{name:"billingAddress",label:"Billing Address",options:this.state.addresses,onEdit:this.onEdit,rules:[i.required()]})))}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadStates=function(){return u()},t.getStates=u;var n=s(a(16)),o=s(a(18)),r=i(a(544)),l=i(a(1130));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}function u(e){l.getStates(void 0!==e?e:r.LOCATION_FILTER_PARAMS.NONE,"840",function(e){n.default.dispatch({type:o.default.Location.LOAD_STATES,args:{states:e,countryCode:"840"}})})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOCATION_FILTER_PARAMS=void 0;t.LOCATION_FILTER_PARAMS={MAILING:"Mailing",BILLING:"Billing",NONE:"None"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(44),n=o(a(16)),l=o(a(18));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f="onStatesLoaded",p=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this)))._states=[],e._countryCode="",e}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.EventEmitter),a=t,(n=[{key:"addStatesLoadedListener",value:function(e){this.addListener(f,e)}},{key:"removeStatesLoadedListener",value:function(e){this.removeListener(f,e)}},{key:"getStates",value:function(){return this._states}},{key:"getCurrentCountry",value:function(){return this._countryCode}},{key:"handleActions",value:function(e){switch(e.type){case l.default.Location.LOAD_STATES:this.onStatesLoaded(e.args)}}},{key:"onStatesLoaded",value:function(e){this._states=e.states,this._countryCode="",this.emit(f)}}])&&s(a.prototype,n),o&&s(a,o),t}());p.dispatchToken=n.default.register(p.handleActions.bind(p));var m=p;t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e="MULTI-PROMOTIONS"==this.props.status?["PROMOTIONS:","PROMOS:"]:null;return r.default.createElement("div",{className:(0,l.default)("status-strip",{"table-strip":this.props.tableStatusStrip})},r.default.createElement("span",{className:"state-bar "+this.props.status.toLowerCase()}),e&&r.default.createElement("span",null,r.default.createElement("span",{className:"left-status full-text"},e[0]),r.default.createElement("span",{className:"left-status short-text"},e[1])),!e&&r.default.createElement("span",{className:"left-status"},this.props.leftContent),r.default.createElement("span",{className:"center-status"},this.props.centerContent),r.default.createElement("span",{className:"right-status"},this.props.rightContent))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(n(a(1)),n(a(1146))),i=n(a(1274));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?f(a):n).state={categories:t.props.categories||[]},t.onMouseLeave=t.onMouseLeave.bind(f(f(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){this.props!==e&&this.setState({categories:e.categories,selectedCategories:e.selectedCategories})}},{key:"componentWillMount",value:function(){window.addEventListener("mouseup",this.onMouseLeave)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.onMouseLeave)}},{key:"onMouseLeave",value:function(){this.refs.draggableCategories.state.dragging&&this.refs.draggableCategories._dragEnd()}},{key:"render",value:function(){return this.props.onCategoryDelete?r.default.createElement("div",{className:"category-list selected-categories"},this.props.showSelectedCategoriesHeader&&r.default.createElement("div",{className:"selected-categories-header"},r.default.createElement("div",{className:"checkbox-cell"}),r.default.createElement("div",{className:"category-cell"},r.default.createElement("strong",null,"Selected Categories"))),r.default.createElement(l.default,{ref:"draggableCategories",items:this.renderSelectedCategories(),onSort:this.props.onSort,type:"vertical"})):r.default.createElement("table",{className:"table category-list search-results"},!this.props.hideHeader&&r.default.createElement("thead",null,r.default.createElement("tr",null,r.default.createElement("th",{className:"checkbox-cell"}),r.default.createElement("th",null,r.default.createElement("strong",null,"Categories")),this.props.onCategoryDelete&&r.default.createElement("th",null))),r.default.createElement("tbody",null,this.renderCategoryResults()))}},{key:"renderCategoryResults",value:function(){var t=this;return this.state.categories.map(function(e){return r.default.createElement(i.default,{category:e,selectedCategories:t.props.selectedCategories,onCategorySelect:t.props.onCategorySelect,key:"result-"+e.categoryId})})}},{key:"renderSelectedCategories",value:function(){var t=this,a=0;return this.state.categories.map(function(e){return{content:r.default.createElement(i.default,{category:e,isPrimary:!a++,onCategoryDelete:t.props.onCategoryDelete,key:"selected-"+e.categoryId}),category:e}})}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n,l){"use strict";(function(s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=t(l(0)),c=l(7),d=t(l(1291)),f=t(l(76)),p=t(l(593)),m=t(l(6)),h=t(l(12)),o=t(l(8)),r=e(l(14)),i=e(l(10)),y=t(l(27)),b=e(l(9));function e(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function t(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function l(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a=this;var o=!!(t=!(n=E(l).call(this,e))||"object"!==g(n)&&"function"!=typeof n?k(a):n).props.editCurrentPrice&&t.props.editCurrentPrice,r=null;return t.props.createNewPrice||!t.props.project.price||o?o&&(r=Number(t.props.editablePrice.price).toFixed(2)):r=Number(t.props.project.price).toFixed(2),t.state={endDate:t.props.editCurrentPrice?t.props.editablePrice.endDate:null,endDateSelect:t.props.editCurrentPrice&&t.props.editablePrice.endDate?"endDateSelected":"endDateNotSelected",id:(new Date).getTime(),retailPrice:r,retailAndDistribution:null,royalty:null,royaltyPercentage:null,startDate:t.props.editCurrentPrice?t.props.editablePrice.startDate:null,valid:!1},t.requestId=0,t._setPercentageAndCosts=t._setPercentageAndCosts.bind(k(k(t))),t.onAddEndDate=t.onAddEndDate.bind(k(k(t))),t.onProjectCalculateBookPriceStarted=t.onProjectCalculateBookPriceStarted.bind(k(k(t))),t.onProjectCalculateBookPrice=t.onProjectCalculateBookPrice.bind(k(k(t))),t.onRetailPriceChange=t.onRetailPriceChange.bind(k(k(t))),t.onValidationChange=t.onValidationChange.bind(k(k(t))),t.onViewPriceScheduleDetails=t.onViewPriceScheduleDetails.bind(k(k(t))),t.setEndDate=t.setEndDate.bind(k(k(t))),t.setStartDate=t.setStartDate.bind(k(k(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(l,u.default.Component),t=l,(a=[{key:"componentWillMount",value:function(){o.default.addProjectCalculateBookPriceStartedListener(this.onProjectCalculateBookPriceStarted),o.default.addProjectCalculateBookPriceListener(this.onProjectCalculateBookPrice)}},{key:"componentWillUnmount",value:function(){o.default.removeProjectCalculateBookPriceStartedListener(this.onProjectCalculateBookPriceStarted),o.default.removeProjectCalculateBookPriceListener(this.onProjectCalculateBookPrice)}},{key:"componentDidMount",value:function(){var e=this;this.refs.form.validateWithoutCommitting(),this.state.retailPrice&&setTimeout(function(){e.requestId++,r.calculateBookPrice(o.default.project(),e.state.retailPrice,e.requestId)}),this.props.editCurrentPrice&&this.setState({startDate:(0,c.bn_moment)(this.props.editablePrice.startDate)})}},{key:"onAddEndDate",value:function(e){this.setState({endDateSelect:e.newValue})}},{key:"onRetailPriceChange",value:function(e){e.newValue?(this.requestId++,r.calculateBookPrice(o.default.project(),e.newValue,this.requestId)):(this._setPercentageAndCosts(null),this.props.onValidationChange&&this.props.onValidationChange(!1))}},{key:"onValidationChange",value:function(e){this.props.onValidationChange&&this.props.onValidationChange(this.refs.form.valid())}},{key:"onViewPriceScheduleDetails",value:function(){i.showInformationModal("Select the date you want your price change to begin. Price changes will begin at approximately 12 AM EST on the future start date selected, and will go through approximately 11:59 PM EST on the end date, if you selected one. Price changes for today's date can take up to three hours.")}},{key:"onProjectCalculateBookPriceStarted",value:function(){this.props.onValidationChange&&this.props.onValidationChange(!1)}},{key:"onProjectCalculateBookPrice",value:function(e){e.requestId===this.requestId&&(this._setPercentageAndCosts(e.details),this.props.onValidationChange&&this.props.onValidationChange(this.refs.form.valid()),this.props.onChange&&this.props.onChange({newValue:e.details.price}))}},{key:"setEndDate",value:function(e){var t=this,a=e.newValue,n=(0,c.bn_moment)(a).format("MM-DD-YYYY"),o=(0,c.bn_moment)(this.state.startDate).format("MM-DD-YYYY");(0,c.bn_moment)(n,"MM-DD-YYYY").isBefore((0,c.bn_moment)(o,"MM-DD-YYYY"))&&(a=this.state.endDate),this.setState({endDate:a,id:(new Date).getTime()},function(){return t.onValidationChange})}},{key:"setStartDate",value:function(e){this.setState({id:(new Date).getTime(),startDate:e.newValue}),this.state.endDate&&e.newValue.isAfter(this.state.endDate,"day")&&this.setState({endDate:null}),this.onValidationChange()}},{key:"showInformationModal",value:function(e){i.showInformationModal(e)}},{key:"_setPercentageAndCosts",value:function(e){e?this.setState({retailPrice:e.price,retailAndDistribution:e.retailDistribution,royalty:e.royalty,royaltyPercentage:e.royaltyRate,valid:this.refs.form.valid()}):this.setState({retailPrice:null,retailAndDistribution:null,royalty:null,royaltyPercentage:null,valid:!1})}},{key:"render",value:function(){var e,t,a,n,o,r,l="Price will be in effect through approximately 11:59 PM EST on the end date selected.",i="Price changes will begin at approximately 12 AM EST on the future start date selected. Price changes for today's date can take up to three hours.";return this.state.retailPrice&&.99<=this.state.retailPrice?(n=Number(this.state.royalty).toFixed(2),o=this.state.royaltyPercentage,t=Number(this.state.retailAndDistribution).toFixed(2),a=o?(100-parseFloat(o)).toFixed(0):0):0==this.state.retailPrice&&(n=t="0.00"),e=[],0==this.state.retailPrice?e=[{name:"Royalty Per Book",y:1,price:"0.00",colorIndex:4}]:0<this.state.retailPrice&&(e=[{name:"Retail & Distribution",y:+t,price:t,colorIndex:1},{name:"Royalty Per Book",y:+n,price:n,colorIndex:2}]),r=u.default.createElement("span",null,"Author Royalty",u.default.createElement("br",null),"Per eBook",u.default.createElement("br",null),u.default.createElement("span",{className:"royalty-amount"},"$",n||"--.--")),this.state.endDate&&(l="Price will be in effect through approximately 11:59 PM EST on "+(0,c.bn_moment)(this.state.endDate).format("M/DD/YYYY")),this.state.startDate&&(i="Price changes will begin at approximately 12 AM EST on "+(0,c.bn_moment)(this.state.startDate).format("M/DD/YYYY"),(0,c.bn_moment)(this.state.startDate).format("M/DD/YYYY")===(0,c.bn_moment)().format("M/DD/YYYY")&&(i="Price changes can take up to three hours.")),u.default.createElement("div",{className:"panel-body"},u.default.createElement(m.default,{autoComplete:"off",ref:"form",className:"section-form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-sm-4 col-xs-12"},u.default.createElement("div",{className:"doughnut"},u.default.createElement(p.default,{data:e,title:r,height:250,width:250}))),u.default.createElement("div",{className:"col-sm-8 col-xs-12 data-section"},u.default.createElement("div",{className:"row horizontal-line-below"},u.default.createElement("div",{className:"col-xs-8 retail-price-labels"},u.default.createElement("div",{className:"retail-price-label"},"Retail Price"),u.default.createElement("a",{className:"desktop-details-link",onClick:this.showInformationModal.bind(this,u.default.createElement(d.default,null))},"See Details"),!this.props.readOnly&&u.default.createElement("div",{className:"dollar-sign-label"},"$")),u.default.createElement("div",{className:"col-xs-4 additional-label"},this.props.readOnly&&u.default.createElement("div",{className:"read-only-price"},"$",this.state.retailPrice),!this.props.readOnly&&u.default.createElement(h.default,{name:"retailPrice",label:"retail price",autoComplete:"off",labelAsPlaceholder:!0,onChange:this.onRetailPriceChange,initValue:this.state.retailPrice||0,pattern:/^\d{0,5}(\.\d{0,2}|)$/,rules:[b.required("Retail price is missing."),b.validRanges([{min:0,max:0},{min:.99,max:199.99}],"Must be $0 or $.99â€“$199.99.")]}),(this.props.createNewPrice||this.props.editCurrentPrice)&&u.default.createElement("div",{className:"current-price"},"Current Price: ",u.default.createElement("strong",null,"$",this.props.project.price))),u.default.createElement("div",{className:"row"},u.default.createElement("a",{className:"mobile-details-link",onClick:this.showInformationModal.bind(this,u.default.createElement(d.default,null))},"See Details"))),u.default.createElement("div",{className:"row data-row bold-row"},u.default.createElement("div",{className:"col-xs-8"},u.default.createElement("div",{className:"legend-box royalty-cost"}),"Author Royalty Per eBook"),u.default.createElement("div",{className:"col-xs-1 number-cell"},o||"0","%"),u.default.createElement("div",{className:"col-xs-3 number-cell"},"$",n||"--.--")),u.default.createElement("div",{className:"row data-row"},u.default.createElement("div",{className:"col-xs-8"},u.default.createElement("div",{className:"legend-box retail-distribution-cost"}),"Retail & Distribution"),u.default.createElement("div",{className:"col-xs-1 number-cell"},a||"0","%"),u.default.createElement("div",{className:"col-xs-3 number-cell"},"$",t||"--.--")),(this.props.createNewPrice||this.props.editCurrentPrice)&&u.default.createElement("div",null,u.default.createElement("div",{className:"row price-schedule-calendar"},u.default.createElement("div",{className:"retail-price-label"},"Price Schedule"),u.default.createElement("a",{className:"hidden-xs formatting-info-link",onClick:this.onViewPriceScheduleDetails},"See Details"),u.default.createElement(f.default,{key:this.state.id,name:"startDate",label:"Start Date",initValue:this.state.startDate?(0,c.bn_moment)(this.state.startDate):this.state.startDate,minDate:(0,c.bn_moment)(),note:i,onChange:this.setStartDate,rules:[b.required()],selectsStart:!0,startDate:(0,c.bn_moment)(this.state.startDate),endDate:(0,c.bn_moment)(this.state.endDate)})),u.default.createElement("div",{className:"row price-schedule-calendar end-date"},u.default.createElement(y.default,{name:"endDateRadio",label:"Do you want to set an end date for this price change?",disableValidationMessages:!0,options:[{value:"endDateSelected",label:"Yes, I will set an end date"},{value:"endDateNotSelected",label:"No, this price is ongoing"}],initValue:this.state.endDateSelect,onChange:this.onAddEndDate,labelColClass:"col-md-12",radioColClass:"col-md-12"}),"endDateSelected"===this.state.endDateSelect&&u.default.createElement("div",null,u.default.createElement(f.default,{key:this.state.id,name:"endDate",label:"End Date",initValue:this.state.endDate?(0,c.bn_moment)(this.state.endDate):this.state.endDate,minDate:this.state.startDate?s((0,c.bn_moment)(this.state.startDate).format("YYYY-MM-DD")):s((0,c.bn_moment)().format("YYYY-MM-DD")),note:l,onChange:this.setEndDate,rules:[b.required()],selectsEnd:!0,startDate:(0,c.bn_moment)(this.state.startDate),endDate:(0,c.bn_moment)(this.state.endDate)}),u.default.createElement("div",{className:"end-date-price"},u.default.createElement("p",null,"What is the price after the end date?"),u.default.createElement("div",{className:"dollar-sign-label"},"$"),u.default.createElement(h.default,{name:"endDatePrice",label:"",autoComplete:"off",labelAsPlaceholder:!0,initValue:this.props.editCurrentPrice?this.props.editablePrice.endDatePrice:null,pattern:/^\d{0,5}(\.\d{0,2}|)$/,rules:[b.required("Final Retail Price Missing"),b.validRanges([{min:0,max:0},{min:.99,max:199.99}],"Must be $0 or $.99 - $199.99")]})))))))))}}])&&v(t.prototype,a),n&&v(t,n),l}();n.default=a}).call(this,l(117))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(n(a(13)),n(a(188))),i=n(a(148));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){o(t,e,a[e])})}return t}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?p(a):n).getInitialState=t.getInitialState.bind(p(p(t))),t.state=t.getInitialState(),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){i.default.setOptions({colors:this.props.colors}),this.chart=i.default.chart(this.refs.chart,{chart:u({},this.state.chart),credits:{enabled:!1},legend:{enabled:!1},title:u({},this.state.title),tooltip:{borderWidth:0,borderRadius:0,useHTML:!0,formatter:function(){return'<span class="tooltip-custom">'+this.point.name+": <b>$"+this.point.price+"</b></span>"},shared:!0},plotOptions:{pie:{cursor:"pointer",dataLabels:{enabled:!1}}},series:[{colorByPoint:!0,innerSize:"70%",data:this.state.data}]})}},{key:"componentWillReceiveProps",value:function(e){var t=this.chart,a=t.series[0];this.props.title!==e.title&&t.setTitle({text:l.default.renderToString(e.title)},"",!0),this.props.data!==e.data&&a.setData(e.data,!0)}},{key:"getInitialState",value:function(){var e={colors:this.props.colors,chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",height:this.props.height,width:this.props.width},data:this.props.data,title:{text:null,useHTML:!0,verticalAlign:"middle"}};return this.props.title&&(e.title.text=l.default.renderToString(this.props.title)),e}},{key:"render",value:function(){var e={height:this.props.height,width:this.props.width};return r.default.createElement("div",{ref:"chart",style:e})}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(a(0)),i=o(a(593)),s=o(a(6)),u=o(a(12)),r=o(a(8)),c=(n(a(15)),n(a(9)));n(a(11)),n(a(17));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?h(a):n).state={retailPrice:null,retailAndDistribution:null,grossMargin:null,royalty:null,minimumRetailPrice:0,status:null,printingCost:0,quotedPrice:null,royaltyPercentage:null,valid:!1},t.retailAndDistributionPercentage=0,t.onRetailPriceChange=t.onRetailPriceChange.bind(h(h(t))),t.onValidationChange=t.onValidationChange.bind(h(h(t))),t.setPrice=t.setPrice.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,l.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.setPrice()}},{key:"componentWillMount",value:function(){r.default.addBookSizeTypeResetListener(this.setPrice),r.default.addProjectQuoteListener(this.setPrice)}},{key:"componentWillUnmount",value:function(){r.default.removeBookSizeTypeResetListener(this.setPrice),r.default.removeProjectQuoteListener(this.setPrice)}},{key:"onRetailPriceChange",value:function(e){this._calculatePercentagesAndCosts(e.newValue||null),this.props.onChange&&this.props.onChange(e)}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()}),this.props.onValidationChange(this.refs.form.valid(),this.refs.retailPrice.value())}},{key:"setPrice",value:function(){var e,t=this,a=r.default.project();((a.quotedPrice||a.price)&&0!==a.price||this.props.pricedProjectCreator)&&(e=Number(a.price&&0<a.price?a.price:a.quotedPrice.floorPrice).toFixed(2),this.refs.retailPrice.setValue(e),this.setState({minimumRetailPrice:Number(a.quotedPrice.floorPrice),pricingDescription:a.quotedPrice.pricingDescription,printingCost:Number(a.quotedPrice.printCost),quotedPrice:Number(a.quotedPrice.floorPrice),retailPrice:e,royaltyRate:a.quotedPrice.royaltyRate},function(){t._calculatePercentagesAndCosts(e),t.refs.form.validateWithoutCommitting()}))}},{key:"_calculatePercentagesAndCosts",value:function(e){var t;t=this.state.royaltyRate?(this.retailAndDistributionPercentage=1-this.state.royaltyRate,e*this.state.royaltyRate-this.state.printingCost):(this.retailAndDistributionPercentage=r.default.retailAndDistributionPercentage(e),e*(1-this.retailAndDistributionPercentage)-this.state.printingCost),this.setState({retailPrice:e,retailAndDistribution:e*this.retailAndDistributionPercentage,grossMargin:e*(1-this.retailAndDistributionPercentage),royalty:t,royaltyPercentage:t/e})}},{key:"render",value:function(){this.state.project;var e,t,a,n=0,o=0,r=0;return this.state.retailPrice&&this.state.retailPrice>=this.state.minimumRetailPrice&&(o=Number(this.state.retailAndDistribution).toFixed(2),t=Number(this.state.grossMargin).toFixed(2),n=Number(this.state.printingCost).toFixed(2),r=Number(this.state.royalty).toFixed(2),Number(100*this.state.royaltyPercentage).toFixed(0)),e=[{name:"Retail & Distribution",y:+o,price:o,colorIndex:1},{name:"Printing Cost",y:+n,price:n,colorIndex:3},{name:"Royalty Per Book",y:+r,price:r,colorIndex:2}],a=l.default.createElement("span",null,"Author Royalty",l.default.createElement("br",null),"Per Print Book",l.default.createElement("br",null),l.default.createElement("span",{className:"royalty-amount"},"$",r||"--.--")),l.default.createElement("div",{className:"panel-body"},l.default.createElement(s.default,{autoComplete:"off",ref:"form",className:"section-form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-4 col-xs-12"},l.default.createElement("div",{className:"doughnut"},l.default.createElement(i.default,{data:e,title:a,height:250,width:250}))),l.default.createElement("div",{className:"col-sm-8 col-xs-12 data-section"},l.default.createElement("div",{className:"row horizontal-line-below"},l.default.createElement("div",{className:"col-xs-8 retail-price-labels"},l.default.createElement("div",{className:"ed-price-description-heading"},this.state.pricingDescription),l.default.createElement("div",{className:"retail-price-label"},"Retail Price"),l.default.createElement("div",{className:"dollar-sign-label"},"$")),l.default.createElement("div",{className:"col-xs-4"},l.default.createElement(u.default,{name:"retailPrice",label:"Retail Price",ref:"retailPrice",autoComplete:"off",labelAsPlaceholder:!0,onChange:this.onRetailPriceChange,pattern:/^\d{0,5}(\.\d{0,2}|)$/,rules:[c.required("Retail price is missing."),c.validRanges([{min:this.state.minimumRetailPrice,max:250}],"Must be $"+Number(this.state.minimumRetailPrice).toFixed(2)+"â€“$250.")]}))),l.default.createElement("div",null,l.default.createElement("div",{className:"row bold-row data-row"},l.default.createElement("div",{className:"col-xs-8"},"Author Gross Margin (Before Costs)"),l.default.createElement("div",{className:"col-xs-1 number-cell"},Number(100*(1-this.retailAndDistributionPercentage)).toFixed(0),"%"),l.default.createElement("div",{className:"col-xs-3 number-cell"},"$",t||"--.--")),l.default.createElement("div",{className:"row data-row"},l.default.createElement("div",{className:"col-xs-8"},l.default.createElement("div",{className:"legend-box printing-cost"}),"Printing Cost"),l.default.createElement("div",{className:"col-xs-3 col-xs-offset-1 number-cell"},"$",Number(this.state.printingCost).toFixed(2)))),l.default.createElement("div",{className:"row data-row"},l.default.createElement("div",{className:"col-xs-8"},l.default.createElement("div",{className:"legend-box royalty-cost"}),"Author Royalty Per Print Book"),l.default.createElement("div",{className:"col-xs-1 number-cell"}),l.default.createElement("div",{className:"col-xs-3 number-cell"},"$",r||"--.--")),l.default.createElement("div",{className:"row horizontal-line-below"}),l.default.createElement("div",{className:"row data-row bold-row"},l.default.createElement("div",{className:"col-xs-8"},l.default.createElement("div",{className:"legend-box retail-distribution-cost"}),"Retail & Distribution"),l.default.createElement("div",{className:"col-xs-1 number-cell"},Number(100*this.retailAndDistributionPercentage).toFixed(0),"%"),l.default.createElement("div",{className:"col-xs-3 number-cell"},"$",o||"--.--"))))))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(1)),s=n(a(189)),u=n(a(33)),c=o(a(4)),d=o(a(8));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={disabled:t.props.disabled},t.onSubmit=t.onSubmit.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){this.props.disabled!==e.disabled&&this.setState({disabled:e.disabled})}},{key:"onSubmit",value:function(){var e=d.default.project().getBookSizeTypeParams(!0,!0),t="/"+u.Base+"/"+u.ChooseBookType+"?"+e,a=null!==c.default.getUser()?t:"/"+s.SignIn+"?return="+encodeURIComponent(t);l.browserHistory.push(a)}},{key:"render",value:function(){return r.default.createElement("div",{className:(0,i.default)("progress-buttons",{"hidden-xs ":!this.props.pricedProjectCreator})},r.default.createElement("div",{className:"centered"},r.default.createElement("button",{className:"btn btn-progress",disabled:this.state.disabled,onClick:this.onSubmit},"Get Started")))}}])&&p(t.prototype,a),n&&p(t,n),o}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"no-permission-height"},r.default.createElement("div",{className:"no-permission"},"You don't have access to this page."),r.default.createElement("div",{className:"no-permission-body"},"Please contact the author for access."))}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(13));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).maxHeight=0,t.onScroll=t.onScroll.bind(d(d(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){window.addEventListener("scroll",this.onScroll)}},{key:"componentDidMount",value:function(){this.maxHeight=(0,l.default)("#fixed-scroll-container").parent().parent().height()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onScroll)}},{key:"onScroll",value:function(){this.props.recalcHeight&&(this.maxHeight=(0,l.default)("#fixed-scroll-container").parent().parent().height());var e=(0,l.default)(window).scrollTop()-(0,l.default)("#fixed-scroll-container").offset().top;(0,l.default)("#fixed-scroll-container").offset().top<(0,l.default)(window).scrollTop()?(0,l.default)("#fixed-scroll-container").css({"padding-top":e+"px"}):(0,l.default)("#fixed-scroll-container").css({"padding-top":0}),(0,l.default)("#fixed-scroll-container").parent().parent().height()>this.maxHeight&&(e-=(0,l.default)("#fixed-scroll-container").parent().parent().height()-this.maxHeight,(0,l.default)("#fixed-scroll-container").css({"padding-top":e+"px"}))}},{key:"render",value:function(){return r.default.createElement("div",{id:"fixed-scroll-container",style:{height:"100%",width:"100%"}},this.props.children)}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(216));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"information-modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Barnes & Noble Press ePub Formatting Guide")),r.default.createElement(l.default,null,r.default.createElement("div",{className:"modal-body"},r.default.createElement("p",null,"Contents:"),r.default.createElement("ul",{className:"list-unstyled"},r.default.createElement("li",null,r.default.createElement("strong",null,"I. Introduction")),r.default.createElement("li",null,r.default.createElement("strong",null,"II. What is ePub?")),r.default.createElement("li",null,r.default.createElement("strong",null,"III. ePub requirements")),r.default.createElement("li",null,r.default.createElement("strong",null,"IV. OPF specifications")),r.default.createElement("li",null,r.default.createElement("strong",null,"V. NCX listing")),r.default.createElement("li",null,r.default.createElement("strong",null,"VI. Image optimization")),r.default.createElement("li",null,r.default.createElement("strong",null,"VII. Files")),r.default.createElement("li",null,r.default.createElement("strong",null,"VIII. CSS/Fonts")),r.default.createElement("li",null,r.default.createElement("strong",null,"IX. Special Characters")),r.default.createElement("li",null,r.default.createElement("strong",null,"X. General eBook Conventions"))),r.default.createElement("h4",null,r.default.createElement("strong",null,"I. Introduction")),r.default.createElement("p",null,"ePub is an open source, industry-standard format for eBooks. NOOK sells digital content that is in the ePub format. Because ePub is reflowable, customers can read files that are formatted in ePub on the NOOK dedicated eReading devices and on Android, iPad, iPhone, iPod, Windows 8, and PC and Mac via NOOKâ€™s free NOOK eReading software."),r.default.createElement("p",null,"Publishers looking to sell highly formatted eBooks should convert their eBooks to ePub before uploading them via Barnes & Noble Press to ensure optimum formatting."),r.default.createElement("p",null,"In this document, we provide background information on the ePub format and guidelines for optimizing your ePub to render well across the NOOK line of eReading products."),r.default.createElement("h4",null,r.default.createElement("strong",null,"II. What is ePub?")),r.default.createElement("p",null,"As defined by the International Digital Publishing Forum (IDPF),"),r.default.createElement("p",null,r.default.createElement("strong",null,'".epub"')," is the file extension of an XML format for reflowable digital books and publications. ",r.default.createElement("strong",null,'".epub"')," is composed of three open standards, the ",r.default.createElement("strong",null,"Open Publication Structure (OPS)"),", ",r.default.createElement("strong",null,"Open Packaging Format (OPF)")," and ",r.default.createElement("strong",null,"Open Container Format (OCF)"),", produced by the IDPF."),r.default.createElement("p",null,"More information on the ePub standard is available at the following websites:"),r.default.createElement("ul",null,r.default.createElement("li",null,r.default.createElement("a",{href:"http://www.idpf.org/epub/20/spec/OPS_2.0.1_draft.htm",target:"_blank"},"http://www.idpf.org/epub/20/spec/OPS_2.0.1_draft.htm")),r.default.createElement("li",null,r.default.createElement("a",{href:"http://idpf.org/epub/20/spec/OCF_2.0.1_draft.doc",target:"_blank"},"http://idpf.org/epub/20/spec/OCF_2.0.1_draft.doc"))),r.default.createElement("p",null,"Publishers not familiar with the ePub specification should follow the above links to learn more about the file format and container requirements."),r.default.createElement("h4",null,r.default.createElement("strong",null,"III. ePub Requirements")),r.default.createElement("p",null,'ePubs are essentially "zip" files with a different extension. By renaming the file name of an ePub from "xyz.epub" to "xyz.zip, it can be zipped, unzipped etc. There are three fixed elements to every ePub file:'),r.default.createElement("ol",null,r.default.createElement("li",null,"MIMETYPE file"),r.default.createElement("li",null,"META-INF folder"),r.default.createElement("li",null,"OEBPS folder")),r.default.createElement("p",null,"The MIMETYPE file occurs at the root level; both the META-INF and OEBPS folders occur below that. All other files can be organised as works best for the publisher. Two required files are CONTENT.OPF and TOC.NCX."),r.default.createElement("p",null,"ePubs should be validated using EPUBCHECK (the latest version as of this writing is 3.0), available at ",r.default.createElement("a",{href:"http://code.google.com/p/epubcheck/",target:"_blank"},"http://code.google.com/p/epubcheck/"),".  Instructions on how to use it are available here: ",r.default.createElement("a",{href:"http://code.google.com/p/epubcheck/wiki/Running",target:"_blank"},"http://code.google.com/p/epubcheck/wiki/Running"),"."),r.default.createElement("h4",null,r.default.createElement("strong",null,"IV. OPF specifications")),r.default.createElement("p",null,'The basic OPF file contains metadata statements, a manifest of included files and a list of the "playing" order of the files. While additional information can be supplied in the OPF that controls the behaviour of other eBook readers, this is not a requirement for NOOK.'),r.default.createElement("p",null,r.default.createElement("strong",null,"Metadata")," - The metadata starts with these three required lines of code. Note the unique-identifier declared in the second statement - this should represent a unique identifier scheme in use in your organisation."),'<?xml version="1.0" encoding="UTF-8" ?>'.toString(),'<package version="2.0" unique-identifier="PrimaryID" xmlns="http://www.idpf.org/2007/opf">'.toString(),'<metadata xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:opf="http://www.idpf.org/2007/opf">'.toString(),r.default.createElement("p",null,"NOOK requires these statements:"),r.default.createElement("p",null,"TITLE ","<dc:title>title</dc:title>".toString()),r.default.createElement("p",null,"AUTHOR ","<dc:creator>author name</dc:creator>".toString()),r.default.createElement("p",null,"PUBLISHER ","<dc:publisher>publisher name</dc:publisher>".toString()),r.default.createElement("p",null,"PUB DATE ","<dc:date>date</dc:date>".toString()),r.default.createElement("p",null,"ID ",'<dc:identifier id="PrimaryID">identification code</dc:identifier>'.toString()),r.default.createElement("p",null,"LANGUAGE ","<dc:language>en</dc:language>".toString()),r.default.createElement("p",null,r.default.createElement("strong",null,"Manifest")," - The manifest identifies every file contained in the epub. If a file is not identified, it will not be accessible. Example of different file statements:"),r.default.createElement("ul",null,r.default.createElement("li",null,'<item id="pt" href="my_page.xpgt" media-type="application/vnd.adobe-page- template+xml"/>'.toString()),r.default.createElement("li",null,'<item id="style" href="mystyle.css" media-type="text/css"/>'.toString()),r.default.createElement("li",null,'<item id="image001" href="image001.jpg" media-type="image/jpeg"/>'.toString()),r.default.createElement("li",null,'<item id="image002" href="image002.png" media-type="image/png"/>'.toString()),r.default.createElement("li",null,'<item id="cover" href="cover_page.xhtml" media-type="application/xhtml+xml"/>'.toString()),r.default.createElement("li",null,'<item id="toc" href="content_page.xhtml" media-type="application/xhtml+xml"/>'.toString()),r.default.createElement("li",null,'<item id="ncx" href="toc.ncx" media-type="application/x-dtbncx+xml"/>'.toString())),r.default.createElement("p",null,'Note that item ID "toc" refers to the physical contents page while item ID "ncx" refers to the file that controls eBook navigation.'),r.default.createElement("p",null,r.default.createElement("strong",null,"Spine")," â€“ the spine controls the playing order of the eBook and determines which file precedes/follows another."),r.default.createElement("p",null,r.default.createElement("strong",null,"Guide")," â€“ the guide is a list of references defining structural elements of the eBook (TOC, List of Illustrations, Index, Copyright etc). Use of guide elements is optional for NOOK."),r.default.createElement("h4",null,r.default.createElement("strong",null,"V. NCX specifications")),r.default.createElement("p",null,"The NCX file contains the hierarchical table of contents and is represented by the Navigation Panel in Adobe Digital Editions. The listings in the NCX file are visible under the Table of Contents menu on NOOK. An NCX set to display in multiple levels will appear as:"),r.default.createElement("p",null,r.default.createElement("strong",null,"PART ONE")),r.default.createElement("p",null,r.default.createElement("strong",null,"Â Â Section One")),r.default.createElement("p",null,r.default.createElement("strong",null,"Â Â Â Â Chapter 1")),r.default.createElement("p",null,r.default.createElement("strong",null,"Â Â Â Â Chapter 2")),r.default.createElement("p",null,r.default.createElement("strong",null,"Â Â Section Two")),r.default.createElement("p",null,r.default.createElement("strong",null,"Â Â Â Â Chapter 1")),r.default.createElement("p",null,r.default.createElement("strong",null,"Â Â Â Â Chapter 2")),r.default.createElement("h4",null,r.default.createElement("strong",null,"VI. Image optimization")),r.default.createElement("p",null,"The screen sizes for the various models are as follows:"),r.default.createElement("p",null,r.default.createElement("strong",null,"NOOK:")," 600 x 800 pixels (B&W - eInk)"),r.default.createElement("p",null,r.default.createElement("strong",null,"NOOK Simple Touch/Glow:")," 600 x 800 pixels (B&W - eInk)"),r.default.createElement("p",null,r.default.createElement("strong",null,"NOOK Color:")," 600 x 1024 pixels (Color â€“ RGB)"),r.default.createElement("p",null,r.default.createElement("strong",null,"NOOK Tablet:")," 600 x 1024 pixels (Color â€“ RGB)"),r.default.createElement("p",null,r.default.createElement("strong",null,"NOOK HD:")," 900 x 1440 pixels (Color â€“ RGB)"),r.default.createElement("p",null,r.default.createElement("strong",null,"NOOK HD+:")," 1280 x 1920 pixels (Color â€“ RGB)"),r.default.createElement("p",null,"Images should be optimized for web delivery and can either be .png or .jpg. The choice of format is optional and should be based on a compromise of image quality and file size. Typically, .jpg supports a maximum of 16.7 million colors while .png supports 24-bit color. We recommend that cover images should be at least 1400 pixels on each side."),r.default.createElement("h4",null,r.default.createElement("strong",null,"VII. Files")),r.default.createElement("p",null,"Content should be organised into separate HTML or XHTML files. For example, Title_page.xhtml, Contents.xhtml, Copyright.xhtml, Dedication.xhtml, Chapter_One.xhtml, Chapter_Two.xhtml etc."),r.default.createElement("p",null,"Each file should be listed in the ","<manifest>".toString()," of the OPF file. Files contained in the ePub but not listed in the ","<manifest>".toString()," and files listed in the ","<manifest>".toString()," but not contained in the ePub will fail epubcheck and may interfere with NOOK performance."),r.default.createElement("h4",null,r.default.createElement("strong",null,"VIII. CSS/Fonts")),r.default.createElement("p",null,'When defining styles in the CSS, margins should be set as "pixels", not "ems" or "% of ems".  This will optimize the viewing area regardless of selected font or type size.'),r.default.createElement("p",null,"The page margins should be set at 30 pixels on the top and sides, with 20 pixels on the bottom. Embedded fonts are allowed: the publisher should own the right to include licensed fonts."),r.default.createElement("h4",null,r.default.createElement("strong",null,"IX. Roman and Special Characters")),r.default.createElement("p",null,"NOOK supports the WGL character set. The set can be references here:"),r.default.createElement("p",null,r.default.createElement("a",{href:"http://www.ascendercorp.com/pdf/WGL_Character_Set.pdf",target:"_blank"},"http://www.ascendercorp.com/pdf/WGL_Character_Set.pdf"),"."),r.default.createElement("p",null,r.default.createElement("strong",null,"X. General eBook Conventions")),r.default.createElement("ul",null,r.default.createElement("li",null,"Covers are not mandatory in the eBook, but a Title Page is."),r.default.createElement("li",null,"The page order does not need to follow the print book."),r.default.createElement("li",null,"Blank pages should be avoided."),r.default.createElement("li",null,"It is helpful to have a Contents Page in the eBook, even if there is not one present in the print version. The eBook Contents Page is linked to the individual chapters and helps with eBook navigation."),r.default.createElement("li",null,"Ideally, footnotes should be linked."),r.default.createElement("li",null,"A linked Index is not necessary, but there is usually a disclaimer indicating that the page references are from the print version."),r.default.createElement("li",null,"The Copyright page should show the eBook ISBN, not the print ISBN, if available."),r.default.createElement("li",null,"HTML tabular layout should only be used for tables and not page formatting."),r.default.createElement("li",null,"The text in tables rendered as images cannot be searched.")))))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(216));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"information-modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"HTML Formatting Guidelines")),r.default.createElement(l.default,null,r.default.createElement("div",{className:"modal-body"},r.default.createElement("p",null,"A few tips to improve how your HTML file will look when converted to an eBook:"),r.default.createElement("ul",null,r.default.createElement("li",null,"Ensure that your HTML file is well formatted and renders well in your browser."),r.default.createElement("li",null,"Avoid adding any extra spaces between lines of text."),r.default.createElement("li",null,"Our NOOK eReading devices support the character set listed in our ePub Formatting Guide (available in the ePub Formatting section).")),r.default.createElement("p",null,"Note: Currently ZIP files are not supported in Barnes & Noble Press. HTML files that you provide should only include text, not images."))))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(216));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"information-modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"TXT formatting Guidelines")),r.default.createElement(l.default,null,r.default.createElement("div",{className:"modal-body"},r.default.createElement("p",null,"In order to ensure that your TXT file converts well into eBook format, consider the following:"),r.default.createElement("ul",null,r.default.createElement("li",null,"Format your text in paragraphs."),r.default.createElement("li",null,"Avoid including hard line breaks within your paragraphs."),r.default.createElement("li",null,"Use two line breaks to separate paragraphs. The first line break will end the first paragraph. The second line break will create a space between the first paragraph and the second paragraph."),r.default.createElement("li",null,"HTML tags should not be used. The HTML tag will be included as text during the conversion. For example, if you type ","<b>bold</b>".toString(),", you will see the ","<b>".toString()," instead of seeing bold")))))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(a(0)),l=a(2),i=r(a(4)),s=(n(a(32)),r(a(217)),n(a(11))),u=n(a(10)),c=(n(a(25)),r(a(173))),d=(n(a(218)),n(a(15))),f=r(a(29)),p=r(a(8)),m=n(a(14)),h=r(a(39)),y=r(a(3)),b=r(a(50));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=E(r).call(this,e))||"object"!==g(n)&&"function"!=typeof n?k(a):n;var o=p.default.project();return t.state={showProgress:!0,projectLoaded:!1,projectLoadedDefault:!1,projectLoadedCustom:!1,projectLoadedSelect:!1,choice:(o.status,null===o.isDefaultSample?null:o.isDefaultSample)},t.onApproveChanged=t.onApproveChanged.bind(k(k(t))),t.onProjectChanged=t.onProjectChanged.bind(k(k(t))),t.onSubmit=t.onSubmit.bind(k(k(t))),t.onDefaultSampleSelected=t.onDefaultSampleSelected.bind(k(k(t))),t.onCustomSampleSelected=t.onCustomSampleSelected.bind(k(k(t))),t.onCustomChaptersSelected=t.onCustomChaptersSelected.bind(k(k(t))),t.onCustomNext=t.onCustomNext.bind(k(k(t))),t.onSelectedNext=t.onSelectedNext.bind(k(k(t))),t.onCustomBack=t.onCustomBack.bind(k(k(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(r,o.default.Component),t=r,(a=[{key:"componentDidMount",value:function(){var e=p.default.project().id;m.loadProject(e)}},{key:"componentWillMount",value:function(){p.default.addProjectChangedListener(this.onProjectChanged)}},{key:"componentWillUnmount",value:function(){p.default.removeProjectChangedListener(this.onProjectChanged)}},{key:"onProjectChanged",value:function(){""!=p.default.project()&&this.setState({projectLoaded:!0}),this.state.projectLoadedDefault&&b.default.go("next"),this.state.projectLoadedCustom&&b.default.onCustomSampleSelection(d.CUSTOM_SAMPLE),this.state.projectLoadedSelect&&b.default.onCustomSampleSelection(d.SELECTED_SAMPLE)}},{key:"onCustomNext",value:function(){var a=this,n=p.default.project();1==n.samplePreFlightCheckStatus&&n.isDefaultSample==d.SELECTED_SAMPLE?u.showConfirmationModal("Are you sure you want to change your sample preference?","Your previous sample will be removed if you change your sample preference.","Yes","No",function(e){e?a.state.choice==d.CUSTOM_SAMPLE&&(a.setState({projectLoaded:!1}),setTimeout(function(){var e=n.clone();e.isDefaultSample=d.CUSTOM_SAMPLE,m.updateProject(e);var t=n.id;m.loadProject(t),a.setState({projectLoadedCustom:!0})},2e3)):a.setState({showProgress:!1,choice:n.isDefaultSample})}):this.state.choice==d.CUSTOM_SAMPLE&&(this.setState({projectLoaded:!1}),setTimeout(function(){var e=n.clone();e.isDefaultSample=d.CUSTOM_SAMPLE,m.updateProject(e),a.setState({projectLoadedCustom:!0})},2e3))}},{key:"onSelectedNext",value:function(){var a=this,n=p.default.project();1==n.samplePreFlightCheckStatus&&n.isDefaultSample==d.CUSTOM_SAMPLE?u.showConfirmationModal("Are you sure you want to change your sample preference?","Your previous sample will be removed if you change your sample preference.","Yes","No",function(e){e?a.state.choice==d.SELECTED_SAMPLE&&(a.setState({projectLoaded:!1}),setTimeout(function(){var e=n.clone();e.isDefaultSample=d.SELECTED_SAMPLE,m.updateProject(e,!0);var t=n.id;m.loadProject(t),a.setState({projectLoadedSelect:!0})},2e3)):a.setState({showProgress:!1,choice:n.isDefaultSample})}):this.state.choice==d.SELECTED_SAMPLE&&(this.setState({projectLoaded:!1}),setTimeout(function(){var e=n.clone();e.isDefaultSample=d.SELECTED_SAMPLE,m.updateProject(e),a.setState({projectLoadedSelect:!0})},2e3))}},{key:"onCustomBack",value:function(){b.default.onGoingBack()}},{key:"onApproveChanged",value:function(){this.setState({checked:this.refs.approve.checked})}},{key:"onSubmit",value:function(){var a=this,n=p.default.project();if(1==n.samplePreFlightCheckStatus)u.showConfirmationModal("Are you sure you want to change your sample preference?",(n.isDefaultSample,d.SELECTED_SAMPLE,"Your previous sample will be removed if you change your sample preference."),"Yes","No",function(e){if(e){if(a.state.choice==d.DEFAULT_SAMPLE){a.setState({projectLoaded:!1});var t=n.clone();t.isDefaultSample=d.DEFAULT_SAMPLE,t.sampleApproved=!1,m.updateProject(t,"",!0),setTimeout(function(){var e=n.clone();e.isDefaultSample=d.DEFAULT_SAMPLE,e.sampleApproved=!1,m.updateProject(e);var t=n.id;m.loadProject(t),a.setState({projectLoadedDefault:!0})},2e3)}}else a.setState({showProgress:!1,choice:n.isDefaultSample})});else if(this.state.choice==d.DEFAULT_SAMPLE){this.setState({projectLoaded:!1});var e=n.clone();e.isDefaultSample=d.DEFAULT_SAMPLE,e.sampleApproved=!1,m.updateProject(e,"",!0),setTimeout(function(){var e=n.clone();e.isDefaultSample=d.DEFAULT_SAMPLE,e.sampleApproved=!1,m.updateProject(e),a.setState({projectLoadedDefault:!0})},2e3)}}},{key:"onDefaultSampleSelected",value:function(){this.setState({choice:d.DEFAULT_SAMPLE})}},{key:"onCustomSampleSelected",value:function(){this.setState({choice:d.CUSTOM_SAMPLE})}},{key:"onCustomChaptersSelected",value:function(){this.setState({choice:d.SELECTED_SAMPLE})}},{key:"render",value:function(){b.default.getSectionSubNavigationExists(),p.default.project().isEBook;var e=o.default.createElement("h1",null,"Letâ€™s Prepare Your Sample File"),t=o.default.createElement("p",null,"In this section, youâ€™ll be able to customize the sample your customer reads on the BN.com/NOOK product page. ",o.default.createElement(l.Link,{className:"preview-link",href:"https://help.barnesandnoble.com/app/answers/detail/a_id/4380",target:"_blank"}," Learn More")),a=[{icon:"default-sample-not-selected",iconSelected:"default-sample-selected",key:d.DEFAULT_SAMPLE,onSelectIcon:this.onDefaultSampleSelected,text:"Choose the Default Sample",subText:"Default Sample automatically includes the first 5% of your book as an excerpt on the bookâ€™s detail page."},{icon:"custom-sample-not-selected",iconSelected:"custom-sample-selected",key:d.CUSTOM_SAMPLE,onSelectIcon:this.onCustomSampleSelected,text:"Upload a Custom Sample",subText:"Custom Sample allows you to upload an excerpt that youâ€™ve selected from your book to appear on the bookâ€™s detail page."},{icon:"selectedChapter-sample-not-selected",iconSelected:"selectedChapter-sample-selected",key:d.SELECTED_SAMPLE,onSelectIcon:this.onCustomChaptersSelected,text:"Select Sample Chapters",subText:"Choose any number of consecutive chapters from your book to use as an excerpt on the bookâ€™s detail page."}];return o.default.createElement("div",null,i.default.hasCustomSamplingPermission(s.BAB_CUSTOM_SAMPLE)&&o.default.createElement("div",{className:"review"},!this.state.projectLoaded&&o.default.createElement(y.default,null),o.default.createElement("header",null,e,t),o.default.createElement("section",null,o.default.createElement("div",{className:"panel"},o.default.createElement("div",{className:"panel-body-sample-preference"},o.default.createElement("section",null,o.default.createElement("div",{className:"btn-container"},o.default.createElement(c.default,{options:a,selected:this.state.choice})))))),this.state.choice!=d.CUSTOM_SAMPLE&&this.state.choice!=d.SELECTED_SAMPLE&&o.default.createElement(f.default,{buttonText:"Save & Continue",disableNext:!this.state.choice,next:this.onSubmit}),(this.state.choice==d.CUSTOM_SAMPLE||this.state.choice==d.SELECTED_SAMPLE)&&o.default.createElement("div",{className:"progress-buttons-container"},o.default.createElement("div",{className:"progress-buttons"},o.default.createElement("span",null,o.default.createElement("div",{className:"pull-left back"},o.default.createElement("button",{ref:"btnBack",className:"btn btn-block btn-progress",type:"button",disabled:!1,onClick:this.onCustomBack},"Back")),o.default.createElement("div",{className:"pull-right forward"},o.default.createElement("button",{ref:"btnNext",className:"btn btn-progress"+(this.state.actionTaken?" action-taken":""),type:"button",disabled:"PROCESSING_ONSALE"==p.default.project().status||!this.state.choice,onClick:this.state.choice==d.SELECTED_SAMPLE?this.onSelectedNext:this.onCustomNext},"Save & Continue"))))),o.default.createElement(h.default,null)))}}])&&v(t.prototype,a),n&&v(t,n),r}();t.default=P},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(7),s=o(a(0)),u=a(2),c=o(a(34)),r=(o(a(385)),o(a(1507))),d=o(a(4)),l=o(a(50)),f=o(a(206)),p=n(a(11)),m=(o(a(632)),o(a(633)),o(a(634)),o(a(386)),n(a(10))),h=n(a(25)),y=n(a(33)),b=o(a(29)),g=n(a(14)),v=o(a(1508)),E=o(a(39)),S=o(a(3)),k=n(a(48)),P=o(a(8)),w=n(a(17));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var D=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=N(o).call(this,e))||"object"!==O(n)&&"function"!=typeof n?T(a):n).state={eBookSize:22,clientSideErrorNoFile:!1,errors:[],file:{},fileSize:!1,maxFiles:!1,rejected:!1,serverSideError:!1,successAlert:!1,valid:v.default.project().samplePreFlightCheckStatus,spinnerOn:!0,fixedFormatFFAPI:w.hasFeatureFlag(p.FIXED_FORMAT),eBookSizeActual:20},t.Attachments=new r.default,t.createAttachmentData=t.createAttachmentData.bind(T(T(t))),t.getAttachmentStatusError=t.getAttachmentStatusError.bind(T(T(t))),t.getAttachmentStatusSuccess=t.getAttachmentStatusSuccess.bind(T(T(t))),t.onDrop=t.onDrop.bind(T(T(t))),t.onDropAccepted=t.onDropAccepted.bind(T(T(t))),t.onDropRejected=t.onDropRejected.bind(T(T(t))),t.onMaxFilesExceeded=t.onMaxFilesExceeded.bind(T(T(t))),t.removeUploadErrors=t.removeUploadErrors.bind(T(T(t))),t.showUploadErrors=t.showUploadErrors.bind(T(T(t))),t.showProgressModal=t.showProgressModal.bind(T(T(t))),t.stopSpinner=t.stopSpinner.bind(T(T(t))),t.bindEvents(),t.eBookSize=t.eBookSize.bind(T(T(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(o,s.default.Component),t=o,(a=[{key:"bindEvents",value:function(){window.addEventListener("message",this.stopSpinner,!1)}},{key:"componentWillMount",value:function(){v.default.addSampleAttachmentReadyForPolling(this.createAttachmentData),v.default.addPollingAttachmentError(this.getAttachmentStatusError),v.default.addPollingAttachmentSuccess(this.getAttachmentStatusSuccess),v.default.addRemoveUploadError(this.removeUploadErrors),P.default.addEBookSizeListener(this.eBookSize)}},{key:"componentWillUnmount",value:function(){v.default.removeSampleAttachmentReadyForPolling(this.createAttachmentData),v.default.removePollingAttachmentError(this.getAttachmentStatusError),v.default.removePollingAttachmentSuccess(this.getAttachmentStatusSuccess),v.default.removeRemoveUploadError(this.removeUploadErrors),P.default.removeEBookSizeListener(this.eBookSize)}},{key:"componentDidMount",value:function(){var e=v.default.project().id;g.loadProject(e),null==v.default.project().sampleFilePath&&this.setState({spinnerOn:!1}),k.loadEBookSize(this.state.fixedFormatFFAPI)}},{key:"eBookSize",value:function(){var e=P.default.eBookSize().data.settings.setting.map(function(e){return parseInt(e.SettingValue)});this.setState({eBookSizeActual:e[0],eBookSize:e[0]+.1*e[0]})}},{key:"createAttachmentData",value:function(e){var t={id:e.projectId,projectType:e.projectType};this.Attachments.checkFileStatus(t,"SAMPLE")}},{key:"getAttachmentStatusError",value:function(e){this.setState({errors:e.preFlightCheckError,serverSideError:!0,valid:!1})}},{key:"getAttachmentStatusSuccess",value:function(e){var t=this,a={eventInfo:{eventName:"File Upload Continue Click",eventAction:"fileUploadContinueClick",timeStamp:new Date},category:{primaryCategory:"Build A Book"}};setTimeout(function(){h.omnitureActionInvoked(a,"onFileUploadContinueClick")},0),this.setState({valid:!0}),1<e.preFlightCheckError.length?"PRINT_COST_INCREASED_WARNING"===e.preFlightCheckError[1].preFlightEnum&&setTimeout(function(){t.showPriceChangeModal(e.preFlightCheckError[1].detail)},0):l.default.go("next")}},{key:"onDrop",value:function(e){this.setState({clientSideErrorNoFile:!1,errors:[],file:e,fileSize:!1,maxFiles:!1,rejected:!1,serverSideError:!1,successAlert:!1})}},{key:"onDropAccepted",value:function(e,t){this.setState({clientSideErrorNoFile:!1,maxFiles:!1,rejected:!1});var a=this.Attachments.uploadSampleFiles({projectId:v.default.project().id,fileSample:e,projectElementType:"SAMPLE"});if(v.default.project().isEBook)if(e[0].size>1024*this.state.eBookSize*1024||e[0].size<1e3){var n={fileEmpty:"ERROR: Uploaded File Exceeds the Maximum Limit of"+this.state.eBookSizeActual+" MB.",fileExists:"ERROR: Uploaded File Exceeds the Maximum Limit of "+this.state.eBookSizeActual+" MB. Please edit your file and try again, or use your previously approved file instead."};this.setState({fileSize:!0},this.showUploadErrors(n))}else g.uploadSampleAttachment(a,v.default.project(),"interior"),this.showProgressModal(e[0].name);else g.uploadSampleAttachment(a,v.default.project(),"interior"),this.showProgressModal(e[0].name)}},{key:"onDropRejected",value:function(){var e=v.default.project().isEBook?{fileEmpty:"We only accept epub, html, htm, doc, docx, txt or rtf files. Please edit your file and try again.",fileExists:"We only accept epub, html, htm, doc, docx, txt or rtf files. Please edit your file and try again, or use your previously approved file instead."}:{fileEmpty:"We only accept pdf, doc or docx files. Please edit your file and try again.",fileExists:"We only accept pdf, doc or docx files. Please edit your file and try again, or use your previously approved file instead."};this.setState({rejected:!0},this.showUploadErrors(e))}},{key:"onMaxFilesExceeded",value:function(e){this.setState({maxFiles:!0},this.showUploadErrors({fileEmpty:"You may only upload one file at a time. Please try again.",fileExists:"You may only upload one file at a time. Please try again or use your previously approved file instead."}))}},{key:"removeUploadErrors",value:function(){this.setState({fileSize:!1,maxFiles:!1,rejected:!1})}},{key:"showInformationModal",value:function(e){m.showInformationModal(e)}},{key:"showPriceChangeModal",value:function(e){m.showNotificationModal(e,"Change in Print Cost","OK",function(){return l.default.go("next")})}},{key:"showProgressModal",value:function(e){m.showUploadProgressModal(e)}},{key:"showUploadErrors",value:function(e){if(v.default.project().interiorFile)m.showUploadErrorModal(e.fileExists);else{var t={detail:e.fileEmpty};this.setState({clientSideErrorNoFile:!0,errors:[t]})}}},{key:"stopSpinner",value:function(e){var t=this;"spinnerOff"==e.data&&setTimeout(function(){t.setState({spinnerOn:!1})},2e3)}},{key:"render",value:function(){var e,t,a,n=v.default.project(),o="/"+y.Base+"/"+n.id+"/"+y.Cover+"/"+y.CoverFormatting;y.Base,n.id,y.Interior,y.InteriorFormatting,d.default.getUser();if(!n.isEBook&&!n.getBookSizeAndTypeStatus(!0))return null;if((this.state.serverSideError||this.state.clientSideErrorNoFile)&&(t=this.state.errors.map(function(e){return e.detail})),n.isEBook&&(e=["application/epub+zip","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/rtf","text/html","text/plain","text/rtf",".doc",".docx",".rtf",".txt",".html",".epub"]),n.preOrder){var r;if(n.isPrintPreOrder()){var l=(0,i.bn_moment)(n.uploadByDate).format("MMMM Do, YYYY");r="at least 10 business days before the publication date",null!==n.uploadByDate&&(r="by "+l)}else r="at least 72 hours before the publication date";a=s.default.createElement("span",null,"Note: You can skip this step if your interior file is not ready. You must upload your interior file ",r,". ",s.default.createElement(u.Link,{to:o},"Skip This Step")," for now.")}return s.default.createElement("div",null,this.state.spinnerOn&&s.default.createElement("div",{className:"spinner-container-absolute"},s.default.createElement(S.default,{backgroundColor:"rgba(255, 255, 255, 0)"})),d.default.hasCustomSamplingPermission(p.BAB_CUSTOM_SAMPLE)&&s.default.createElement("div",null,s.default.createElement("header",null,s.default.createElement("h1",null,"Upload Your Custom Sample File"),s.default.createElement("p",null,"Follow the steps below to upload and review your sample.")),s.default.createElement("section",null,n.preOrder&&!n.interiorPreFlightCheckStatus&&s.default.createElement(c.default,{messages:[a],type:"warning"}),(this.state.serverSideError||this.state.clientSideErrorNoFile)&&s.default.createElement(c.default,{messages:t,type:"error"}),s.default.createElement("div",{className:"panel"},s.default.createElement("div",{className:"panel-body interior-upload"},s.default.createElement(f.default,{accept:e.toString(),complete:v.default.project().samplePreFlightCheckStatus,error:this.state.rejected||this.state.fileSize||this.state.maxFiles||this.state.serverSideError,errorText:"Please edit and then re-upload your file",fileName:v.default.project().sampleFilePath,icon:"sprite icon-interior-not-selected",iconActive:"sprite icon-interior-selected",multiple:!1,onDrop:this.onDrop,onDropAccepted:this.onDropAccepted,onDropRejected:this.onDropRejected,onMaxFilesExceeded:this.onMaxFilesExceeded,disableClick:!v.default.project().allowedToEdit,text:"Drag & Drop Your Sample File Here",textDifferent:"Drag & Drop Your Sample File Here"})))),s.default.createElement(b.default,{disableNext:!this.state.valid}),s.default.createElement(E.default,null)))}}])&&C(t.prototype,a),n&&C(t,n),o}();t.default=D},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(0)),r=i(a(34)),s=i(a(4)),l=n(a(32)),u=i(a(217)),c=n(a(11)),d=n(a(10)),f=n(a(25)),p=n(a(218)),m=i(a(29)),h=i(a(8)),y=n(a(14)),b=i(a(39)),g=i(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=function(e){function i(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a=this,t=!(n=S(i).call(this,e))||"object"!==v(n)&&"function"!=typeof n?P(a):n;var o=p.browserCanViewPdf(),r=h.default.project(),l=s.default.getUser();return t.state={isPreOrder:r.isPrintPreOrder(),loaded:!r.isEBook&&!o,approved:r.sampleApproved,checked:r.sampleApproved,initialChecked:r.sampleApproved,canShowPdf:o,cacheBusta:(new Date).getTime(),warning:r.preflightWarningSample,projectLoaded:!0,XUserId:l.customerId},t.hasFormChanged=t.hasFormChanged.bind(P(P(t))),t.onApproveChanged=t.onApproveChanged.bind(P(P(t))),t.onPreviewLoaded=t.onPreviewLoaded.bind(P(P(t))),t.onProjectChanged=t.onProjectChanged.bind(P(P(t))),t.onSubmit=t.onSubmit.bind(P(P(t))),t.makeClick=t.makeClick.bind(P(P(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(i,o.default.Component),t=i,(a=[{key:"componentDidMount",value:function(){var e=this;h.default.project().isEBook||p.supportsPdfOnLoadEvent()||(this.loadTimeout=setTimeout(function(){e.onPreviewLoaded()},2e3))}},{key:"componentWillMount",value:function(){h.default.addProjectChangedListener(this.onProjectChanged)}},{key:"componentWillUnmount",value:function(){h.default.removeProjectChangedListener(this.onProjectChanged)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"hasFormChanged",value:function(){return{unChanged:this.state.initialChecked===this.state.checked,secondaryReason:!this.state.checked,title:"You have not approved your sample.",message:"You still need to approve your sample. If you leave this page now, you'll need to return later to approve it. Do you want to leave this page without approving?",leave:"Yes, leave page",stay:"No, stay on page"}}},{key:"onApproveChanged",value:function(){this.setState({checked:this.refs.approve.checked})}},{key:"onPreviewLoaded",value:function(){this.loadTimeout&&(clearTimeout(this.loadTimeout),this.loadTimeout=null),this.setState({loaded:!0})}},{key:"onProjectChanged",value:function(){var a=h.default.project();this.state.isPreOrder&&a.interiorApproved&&(a.allowedToPutOnSale||a.allowedToPostChanges)&&setTimeout(function(){d.showFinalFilesModal(a.uploadByDate,function(e,t){e?y.setSaleStatus(a.id,!0,!0,function(){return l.go("next")}):l.go("next")})},0)}},{key:"onSubmit",value:function(){this.setState({projectLoaded:!1},function(){});var e=h.default.project();if(this.state.approved)""!=e&&(this.setState({projectLoaded:!0},function(){}),l.go("next"));else if(e.isEBook){var t=e.clone();t.sampleApproved=!0,y.updateProject(t,!0,!0)}else y.approveSample(e.id,!1,!0);var a={eventInfo:{eventName:"Review File Continue Click",eventAction:"reviewFileContinueClick",timeStamp:new Date},category:{primaryCategory:"Build A Book"}};f.omnitureActionInvoked(a,"onReviewFileContinueClick")}},{key:"render",value:function(){var e,t=this,a=h.default.project(),n=a.isEBook;return this.state.warning&&(e=o.default.createElement("span",null,this.state.warning.detail)),o.default.createElement("div",null,s.default.hasCustomSamplingPermission(c.BAB_CUSTOM_SAMPLE)&&o.default.createElement("div",{className:"review"},e&&o.default.createElement(r.default,{messages:[e],type:"warning"}),!this.state.projectLoaded&&o.default.createElement(g.default,null),o.default.createElement("header",null,o.default.createElement("h1",null,"Review Your Sample File"),n&&o.default.createElement("div",null,o.default.createElement("p",null,"Please review the sample of your book below or download a digital proof before continuing. If satisfied, click the checkbox and click Save & Continue to move to the next section.")),o.default.createElement("div",{className:"upload-button"},o.default.createElement("div",{className:"centered"},o.default.createElement("a",{type:"button",className:"btn btn-progress",href:"/api/project/"+a.id+"/download/sample?t="+this.state.cacheBusta,target:"_blank"},n?"Download ePub":"Download Proof")))),o.default.createElement("section",null,o.default.createElement("div",{className:a.isEBook?"preview ebook show":"preview show"},!this.state.loaded&&o.default.createElement("div",{className:"spinner-area"},a.isEBook&&o.default.createElement(g.default,{top:180,spinnerTextStyle:{margin:"10px auto"},message:"It may take a moment to load your preview. Please do not refresh this page.<br/><br/>You can also download a copy of your file to review by clicking â€œDownload ePubâ€ above."}),!a.isEBook&&o.default.createElement(g.default,{top:180})),this.renderPrintPreview())),o.default.createElement("div",{className:"page-buttons"},o.default.createElement("div",{className:"approve"},o.default.createElement("input",{ref:"approve",id:"approve",type:"checkbox",className:"big-checkbox",tabIndex:"-1",onChange:this.onApproveChanged,checked:this.state.checked,disabled:this.state.approved}),o.default.createElement("label",{htmlFor:"approve",tabIndex:this.state.approved?"-1":"0",onKeyDown:this.makeClick},"I have reviewed and approved my sample.")),o.default.createElement(m.default,{buttonText:"Save & Continue",disableNext:!this.state.checked,next:this.onSubmit})),o.default.createElement(b.default,{data:function(){return t.hasFormChanged()}})))}},{key:"renderPrintPreview",value:function(){var e=h.default.project();if(!e.isEBook&&!this.state.canShowPdf)return o.default.createElement("div",{className:"no-viewer-message"},"We are unable to display your PDF proof.",o.default.createElement("br",null),"Please download your PDF to review your proof before approving.");return e.isEBook?o.default.createElement(u.default,{sample:!0,onLoaded:this.onPreviewLoaded,XUserId:this.state.XUserId}):o.default.createElement("iframe",{src:"/api/project/"+e.id+"/inline/sample?t="+this.state.cacheBusta,width:"100%",height:"100%",title:"preview",onLoad:this.onPreviewLoaded})}}])&&E(t.prototype,a),n&&E(t,n),i}();t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1)),i=o(a(62)),s=o(a(6)),u=o(a(12)),c=n(a(25)),d=n(a(9)),f=o(a(39)),p=n(a(48)),m=o(a(45));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=b(o).call(this,e))||"object"!==h(n)&&"function"!=typeof n?v(a):n).state={valid:!1,origValues:{publisherName:m.default.publisherName,publisherWebSite:m.default.publisherWebSite},disableInput:t.props.disableInput},t.hasFormChanged=t.hasFormChanged.bind(v(v(t))),t.setFormValues=t.setFormValues.bind(v(v(t))),t.onValidationChange=t.onValidationChange.bind(v(v(t))),t.submit=t.submit.bind(v(v(t))),t.onSubmit=t.onSubmit.bind(v(v(t))),t.onCancel=t.onCancel.bind(v(v(t))),t.makeClick=t.makeClick.bind(v(v(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting()}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"hasFormChanged",value:function(){var e=m.default.gatherPublisherData();return{unChanged:this.state.origValues.publisherName===e.publisherName&&this.state.origValues.publisherWebSite===e.publisherWebSite}}},{key:"onValidationChange",value:function(){var e=this.props.forBaB?this.refs.form.valid():this.refs.form.valid()&&!this.hasFormChanged().unChanged;this.setState({valid:e}),this.props.onValidationChange&&this.props.onValidationChange(e)}},{key:"submit",value:function(){var e=m.default.gatherPublisherData();this.props.onSubmit&&this.props.onSubmit(),p.updatePublisherInfo(m.default.gatherPublisherData(),!!this.props.forBaB),this.setState({origValues:{publisherName:e.publisherName,publisherWebSite:e.publisherWebSite}});var t={eventInfo:{eventName:"Submit for Verification Success",eventAction:"submitForVerificationSuccess",timeStamp:new Date},category:{primaryCategory:"Build A Book"}};c.omnitureActionInvoked(t,"onSubmitForVerificationSuccess")}},{key:"onSubmit",value:function(){this.submit()}},{key:"onCancel",value:function(){this.setFormValues(this.state.origValues),this.setState({hasChanged:!1})}},{key:"setFormValues",value:function(e){this.refs.publisherName.setValue(e.publisherName),this.refs.publisherWebSite.setValue(e.publisherWebSite)}},{key:"render",value:function(){var t=this,e=(m.default.hasPublisherDataChanged(),this.state.disableInput);return r.default.createElement("div",null,!this.props.forBaB&&r.default.createElement("div",{className:"section-header"},r.default.createElement("h2",null,"Publisher Name"),r.default.createElement("p",null,"If you don't have a publisher name, just enter your name.")),r.default.createElement("div",{className:"section-detail"},r.default.createElement(s.default,{ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6"},r.default.createElement(u.default,{ref:"publisherName",name:"publisherName",label:"Publisher Name",maxLength:50,initValue:m.default.publisherName,onChange:function(e){p.setPublisherName(e.newValue),t.onValidationChange()},rules:[d.required("Please enter a publisher name."),d.pattern(/^[a-zA-Z\d\s.,\-&']*[a-zA-Z]+[a-zA-Z\d\s.,\-&']*$/,"Invalid publisher name. Valid characters are: [A-Z], [0-9] and [. , & - ']. Must contain at least one letter.")]})),r.default.createElement("div",{className:"col-md-6"},r.default.createElement(u.default,{ref:"publisherWebSite",name:"publisherWebSite",label:"Publisher Website",maxLength:256,initValue:m.default.publisherWebSite,onChange:function(e){p.setPublisherWebsite(e.newValue),t.onValidationChange()},rules:[{key:"website",test:function(e,t,a){return e&&0!==e.length?(e=e.toLowerCase(),/^(http|https):\/\//.test(e)?/^[^ "]+$/.test(e)?e.includes("bnpress.com")||e.includes("bn.com")||e.includes("nookpress.com")||e.includes("barnesandnoble.com")?"Enter your publishing site, not BNpress.com or BN.com.":null:"Publisher website cannot contain spaces or double quotes.":"Publisher website must start with 'http://' or 'https://'."):null}}]})),!this.props.forBaB&&r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"save-or-cancel"},r.default.createElement(i.default,{buttonText:"Save Changes",click:this.onSubmit,disabled:!this.state.valid||e}),r.default.createElement("span",{className:(0,l.default)("cancel",{disabled:e}),tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onCancel,disabled:!this.state.valid&&e},"Cancel")))))),this.props.forBaB&&r.default.createElement(f.default,{data:function(){return t.hasFormChanged()}}))}}])&&y(t.prototype,a),n&&y(t,n),o}();t.default=E},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(a(0)),s=o(a(1)),u=o(a(13)),c=o(a(62)),d=o(a(6)),f=o(a(27)),p=o(a(80)),m=(o(a(47)),n(a(59))),h=n(a(25)),y=n(a(9)),b=n(a(32)),g=n(a(10)),v=n(a(211)),E=n(a(48)),S=n(a(146)),k=o(a(347)),R=o(a(45)),P=(o(a(73)),o(a(56))),w=n(a(11)),O=n(a(17)),C=(o(a(34)),o(a(4)),o(a(1521))),N=o(a(1522)),_=o(a(1523)),T=o(a(39));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,o=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function j(e,t,a,n,o,r,l){try{var i=e[r](l),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,o)}function M(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var r=PDFLib,F=r.PDFDocument,Y=r.TextAlignment,U=r.rgb,V=r.colorToComponents,W=r.PDFTextField,H=r.PDFCheckBox,i=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=L(o).call(this,e))||"object"!==D(n)&&"function"!=typeof n?B(a):n).state={valid:!1,citizen:R.default.loaded?R.default.vendorFormDetail.payment?"None"==R.default.vendorFormDetail.payment.idType?"no":"yes":t.props.profile?1==t.props.profile.domesticUser?"yes":"no":null:null,checkVendorObj:R.default.citizen?R.default.citizen:"NoCheck",vendorNumber:R.default.loaded?R.default.vendorNumber:null,addTaxInfoConfirmed:!1,addTaxInfoStatus:R.default.getAdditionalTaxInfoStatus(),userInfo:R.default.vendorFormDetail,paymentObj:!!R.default.vendorFormDetail.payment&&R.default.vendorFormDetail.payment,paymentObjFileStatus:R.default.vendorFormDetail.payment?R.default.vendorFormDetail.payment.wFileStatus:"true",inReviewApproved:R.default.vendorFormDetail.publisher?R.default.vendorFormDetail.publisher.hasBeenApproved:"",inReviewStatus:R.default.vendorFormDetail.publisher?R.default.vendorFormDetail.publisher.status:"",disableInput:t.props.disableInput,citizenshipSelected:!1,fileSize:!0,errorText:!1,turnTime:"",W8and9FeatureFlagValue:O.hasFeatureFlag(w.NEW_W_MANAGEMENT),loaded:!1,flagClick:!1,cancelTrue:!1,enableError:!1,addressForW9:"",CityStateZipW9:"",w9Date:new Date,firstNameW9:"",lastNameW9:""},t.addMessageForInReviewResubmitRequired=t.addMessageForInReviewResubmitRequired.bind(B(B(t))),t.getAddTaxFormType=t.getAddTaxFormType.bind(B(B(t))),t.resetButtonStates=t.resetButtonStates.bind(B(B(t))),t.submit=t.submit.bind(B(B(t))),t.savePaymentInfo=t.savePaymentInfo.bind(B(B(t))),t.onCitizenChanged=t.onCitizenChanged.bind(B(B(t))),t.onAddressValidationComplete=t.onAddressValidationComplete.bind(B(B(t))),t.onValidationChanged=t.onValidationChanged.bind(B(B(t))),t.onSubmit=t.onSubmit.bind(B(B(t))),t.onCancel=t.onCancel.bind(B(B(t))),t.onOpenW8Modal=t.onOpenW8Modal.bind(B(B(t))),t.onOpenW9Modal=t.onOpenW9Modal.bind(B(B(t))),t.onFormUploadStart=t.onFormUploadStart.bind(B(B(t))),t.onClick=t.onClick.bind(B(B(t))),t.fileFormUploadData=t.fileFormUploadData.bind(B(B(t))),t.onVendorInfoLoaded=t.onVendorInfoLoaded.bind(B(B(t))),t.onPrevOpenModal=t.onPrevOpenModal.bind(B(B(t))),t.turnAroundData=t.turnAroundData.bind(B(B(t))),t.makeClick=t.makeClick.bind(B(B(t))),t.w9Review=t.w9Review.bind(B(B(t))),t.tinReview=t.tinReview.bind(B(B(t))),t.fillForm=t.fillForm.bind(B(B(t))),t.windowTop=t.windowTop.bind(B(B(t))),t.setTaxTypePass=t.setTaxTypePass.bind(B(B(t))),t.verifyTin=t.verifyTin.bind(B(B(t))),t}var t,a,n,i,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(o,l.default.Component),t=o,(a=[{key:"readOnly",value:function(){return R.default.accountStatus===S.AccountStatus.PENDING||R.default.accountStatus===S.AccountStatus.REJECTED||R.default.businessStatus===S.BusinessStatus.ON_HOLD||R.default.businessStatus===S.BusinessStatus.TERMINATED}},{key:"componentWillMount",value:function(){R.default.addCitizenChangedListener(this.onCitizenChanged),k.default.addValidationListener(this.onAddressValidationComplete),P.default.addFormFileUploadListener(this.fileFormUploadData),R.default.addPaymentInfoLoadedListener(this.onVendorInfoLoaded),P.default.addTurnAroundListener(this.turnAroundData)}},{key:"componentDidMount",value:function(){m.onTurnAroundTime(),R.default.accountStatus===S.AccountStatus.ACTIVE||R.default.accountStatus===S.AccountStatus.IN_REVIEW?(this.throwOutValidation=!0,this.refs.form.validate()):this.refs.form.validateWithoutCommitting();var e=window.document.getElementById("container-modal");document.body.insertBefore(e,document.body.firstChild),(0,u.default)(document).ready(function(){(0,u.default)(window).keydown(function(e){if(13==e.keyCode)return e.preventDefault(),!1})})}},{key:"componentWillUnmount",value:function(){R.default.removeCitizenChangedListener(this.onCitizenChanged),k.default.removeValidationListener(this.onAddressValidationComplete),P.default.removeFormFileUploadListener(this.fileFormUploadData),P.default.removeTurnAroundListener(this.turnAroundData),window.document.getElementById("app").classList.remove("additional-modal"),window.document.getElementById("app").classList.remove("additional-modal-big"),window.document.getElementById("app").classList.remove("hide-image"),window.document.getElementById("app").classList.remove("hide-pdf"),window.document.getElementById("app").classList.remove("additional-error-modal"),R.default.removePaymentInfoLoadedListener(this.onVendorInfoLoaded)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"setTaxTypePass",value:function(e){this.setState({taxType:e})}},{key:"verifyTin",value:function(e){this.setState({errorss:e}),this.w9Review()}},{key:"onVendorInfoLoaded",value:function(e){var t=this;if("yes"==this.state.citizen){if(this.state.w9FileObj){var a=new FormData;a.append("file",this.state.w9FileObj,this.state.w9FileObj.name),m.uploadWForm(a,this.state.vendorNumber)}setTimeout(function(){document.getElementById("message").style.display="block"},1e3)}if("yes"!=this.state.citizen){var n=e;if("Not Submitted"==n.wFileStatus&&0==this.state.flagClick&&this.state.W8and9FeatureFlagValue&&this.state.cancelTrue){window.document.getElementById("app").classList.add("additional-error-modal"),"None"==n.idType&&this.setState({citizen:"no"}),setTimeout(function(){document.getElementById("message").style.display="block"},1e3);var o="yes"===this.state.citizen?"W-9":"W-8",r="yes"===this.state.citizen?"Barnes &amp; Noble Press requires all U.S. publishers, including non-profit or tax-exempt organizations, to provide their U.S. taxpayer identification number. If you provide Barnes &amp; Noble Press with your valid taxpayer identification information, tax withholding will not be deducted from your royalties. If the tax identity you provide us does not match IRS records, you may be subject to payment holds or U.S. tax withholding of up to 30%.":"US tax law requires that we withhold tax of 30% from sales payments if you are a non-US vendor. However, you may be entitled to a reduced rate of withholding or no withholding at all if certain conditions are met and you provide us with appropriate documentation.";setTimeout(function(){g.showConfirmationModal("You're Almost Done!",'<div style="font-size: 18px;">Upload a Form '+o+" to complete your vendor account</div><span><br>"+r+' <a href="#" id="popupIdClick">More information</a></span><br><br><div class="thirtyDayNotice"><span class="thirtyDayNoticeHeader">Please note: </span><span class="thirtyDayNoticeText">You have up to 30 days to submit your '+o+" information. Your vendor account can be submitted for approval independently and your books can go on sale before your tax form is submitted.</span></div>","OK","",function(e,t){e&&window.document.getElementById("app").classList.remove("additional-error-modal")}),document.getElementById("message").scrollIntoView(),t.setState({flagClick:!0,cancelTrue:!1})},1500),setTimeout(function(){document.getElementById("popupIdClick").addEventListener("click",t.onPrevOpenModal)},2e3)}}}},{key:"turnAroundData",value:function(e){this.setState({turnTime:e.setting[0]})}},{key:"addMessageForInReviewResubmitRequired",value:function(){var e=null;this.props.onError&&(e=R.default.isUSCitizen?R.default.isUSTaxpayerTypeForIndividual()||R.default.isUSTaxpayerTypeForOther()&&"SSN"===R.default.taxpayerIdType?"You must re-enter your SSN and bank account number.":"You must re-enter your EIN and bank account number.":"You must re-enter your TIN (if using one), IBAN and bank account number.",this.props.onError(e))}},{key:"showAdditionalTaxFormConfirmModal",value:function(){var t=this,e=this.getAddTaxFormType();g.showConfirmationModal("Change in Taxpayer Information","You have updated your Taxpayer Information. You will need to submit a new "+e+" form \t\t\t with the updated information.","OK","Cancel",function(e){e?t.setState({addTaxInfoConfirmed:!0},function(){return setTimeout(function(){return t.submit()},0)}):(E.resetVendorInfo(!0),t.props.onSubmitCancelled&&t.props.onSubmitCancelled(),t.resetButtonStates())})}},{key:"getAddTaxFormType",value:function(){return"yes"===this.state.citizen?"W-9":"W-8"}},{key:"resetButtonStates",value:function(){this.props.forBaB||(this.refs.cmdSave.enableButton(),1==this.state.paymentObj.uploadButtonEnabled&&this.refs.submitDigital.enableButton(),this.props.clearProgress&&this.props.clearProgress())}},{key:"submit",value:function(e){var t=this;if(this.setState({cancelTrue:!0}),this.readOnly())this.props.forBaB&&b.go("next");else{this.setState({errorMessages:[]}),!this.props.forBaB&&this.props.onSubmit&&this.props.onSubmit();var a=R.default.hasTaxInfoChanged(),n=R.default.hasBankInfoChanged(),o=R.default.getAdditionalTaxInfoStatus().exemptionRateSet;if(!(R.default.accountStatus===S.AccountStatus.IN_REVIEW&&!R.default.approved)||n&&(a||"no"===R.default.citizen&&G(R.default.tin)))if(o&&a&&!this.state.addTaxInfoConfirmed)this.showAdditionalTaxFormConfirmModal();else if(a||n){var r=R.default.gatherPaymentData(),l=[];if(R.default.approved||R.default.addMessagesForMaskedFieldsInTaxInfo(r,l),n&&R.default.addMessagesForMaskedFieldsInBankInfo(r,l),0<l.length)return this.setState({errorMessages:l,addTaxInfoConfirmed:!1}),this.props.onError&&this.props.onError(l[0]),void(this.props.forBaB||this.refs.cmdSave.enableButton());a?window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){r.recaptchaToken=e,v.validateAddressAtgStyle({address1:r.address.addressLine1,address2:r.address.addressLine2,city:r.address.city,state:r.address.state,postalCode:r.address.zip,country:"840"===r.address.country?"US":r.address.country,companyName:"",phoneNumber:r.address.phone,recaptchaToken:e})}).catch(function(){v.validateAddressAtgStyle({address1:r.address.addressLine1,address2:r.address.addressLine2,city:r.address.city,state:r.address.state,postalCode:r.address.zip,country:"840"===r.address.country?"US":r.address.country,companyName:"",phoneNumber:r.address.phone})}):n&&setTimeout(function(){return t.savePaymentInfo(e)},0);var i={eventInfo:{eventName:"Submit for Verification Success",eventAction:"submitForVerificationSuccess",timeStamp:new Date},category:{primaryCategory:"Build A Book"}};h.omnitureActionInvoked(i,"onSubmitForVerificationSuccess"),this.setState({addTaxInfoConfirmed:!1})}else this.props.forBaB?b.go("next"):this.resetButtonStates();else this.addMessageForInReviewResubmitRequired()}}},{key:"savePaymentInfo",value:function(e){var t=R.default.gatherPaymentData(e),a=!!this.props.forBaB;window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){t.recaptchaToken=e,E.updatePaymentInfo(t,a)}).catch(function(){E.updatePaymentInfo(t,a)})}),this.props.forBaB||this.refs.cmdSave.enableButton(),this.setState({addressForW9:t.address.addressLine1,CityStateZipW9:t.address.city+", "+t.address.state+" "+t.address.zip,firstNameW9:t.payment.firstName,lastNameW9:t.payment.lastName,recaptchaToken:e})}},{key:"onCitizenChanged",value:function(e){this.refs.citizen.setValue(e.citizen),this.setState({citizen:e.citizen,citizenshipSelected:!0})}},{key:"onValidationChanged",value:function(){if(this.throwOutValidation)this.throwOutValidation=!1;else{var e=this.refs.form.valid()&&this.refs.form.hasChanged();this.setState({valid:e}),this.props.onValidationChanged&&this.props.onValidationChanged(e)}}},{key:"fillForm",value:(i=regeneratorRuntime.mark(function e(){var t,a,n,o,r,l,i,s,u,c,d,f,p,m,h,y,b,g,v,E,S,k,P,w,O,C,N,_,T,D,j,M,L,A,B,x=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.w9DataTransferPDF,t=R.default.gatherPaymentData(),this.setState({w9DataTransferPDF:t}),"https://www2.nookassets.com/npassets-spb/cms/fw9.pdf",a=new Date,e.next=7,fetch("https://www2.nookassets.com/npassets-spb/cms/fw9.pdf").then(function(e){return e.arrayBuffer()});case 7:return n=e.sent,e.next=10,F.load(n);case 10:return o=e.sent,r=o.getForm(),o.removePage(5),o.removePage(4),o.removePage(3),o.removePage(2),o.removePage(1),(l=r.getFields()).forEach(function(e){e.constructor.name,e.getName();e.enableReadOnly()}),i=r.getTextField("topmostSubform[0].Page1[0].Address[0].f1_7[0]"),s=r.getTextField("topmostSubform[0].Page1[0].Address[0].f1_8[0]"),u=r.getTextField("topmostSubform[0].Page1[0].f1_1[0]"),c=r.getTextField("topmostSubform[0].Page1[0].SSN[0].f1_11[0]"),d=r.getTextField("topmostSubform[0].Page1[0].SSN[0].f1_12[0]"),f=r.getTextField("topmostSubform[0].Page1[0].SSN[0].f1_13[0]"),p=r.getTextField("topmostSubform[0].Page1[0].EmployerID[0].f1_14[0]"),m=r.getTextField("topmostSubform[0].Page1[0].EmployerID[0].f1_15[0]"),h=r.getTextField("topmostSubform[0].Page1[0].Exemptions[0].f1_5[0]"),y=r.getTextField("topmostSubform[0].Page1[0].Exemptions[0].f1_6[0]"),b=r.getTextField("topmostSubform[0].Page1[0].f1_10[0]"),g=r.getCheckBox("topmostSubform[0].Page1[0].FederalClassification[0].c1_1[0]"),v=r.getCheckBox("topmostSubform[0].Page1[0].FederalClassification[0].c1_1[1]"),E=r.getCheckBox("topmostSubform[0].Page1[0].FederalClassification[0].c1_1[2]"),S=r.getCheckBox("topmostSubform[0].Page1[0].FederalClassification[0].c1_1[3]"),k=r.getCheckBox("topmostSubform[0].Page1[0].FederalClassification[0].c1_1[4]"),P=r.getCheckBox("topmostSubform[0].Page1[0].FederalClassification[0].c1_1[5]"),w=r.getTextField("topmostSubform[0].Page1[0].FederalClassification[0].f1_3[0]"),O=r.getCheckBox("topmostSubform[0].Page1[0].FederalClassification[0].c1_1[6]"),C=r.getTextField("topmostSubform[0].Page1[0].FederalClassification[0].f1_4[0]"),this.state.w9DataTransferPDF.payment.taxFirstName?u.setText((this.state.w9DataTransferPDF.payment.taxFirstName?this.state.w9DataTransferPDF.payment.taxFirstName:"")+" "+(this.state.w9DataTransferPDF.payment.taxLastName?this.state.w9DataTransferPDF.payment.taxLastName:"")):this.state.w9DataTransferPDF.payment.taxCompanyName&&u.setText(this.state.w9DataTransferPDF.payment.taxCompanyName),"SoleProprietor"==this.state.w9DataTransferPDF.payment.taxPayerTypeId?g.check():"CCorporation"==this.state.w9DataTransferPDF.payment.taxPayerTypeId?v.check():"SCorporation"==this.state.w9DataTransferPDF.payment.taxPayerTypeId?E.check():"Partnership"==this.state.w9DataTransferPDF.payment.taxPayerTypeId?S.check():"10"==this.state.w9DataTransferPDF.payment.taxPayerTypeId?k.check():"27"==this.state.w9DataTransferPDF.payment.taxPayerTypeId||"28"==this.state.w9DataTransferPDF.payment.taxPayerTypeId||"26"==this.state.w9DataTransferPDF.payment.taxPayerTypeId?P.check():"Other"==this.state.w9DataTransferPDF.payment.taxPayerTypeId&&(O.check(),C.setText(this.state.w9DataTransferPDF.payment.taxPayerTypeText),C.setAlignment(Y.Left)),"27"==this.state.w9DataTransferPDF.payment.taxPayerTypeId&&w.setText("C"),"28"==this.state.w9DataTransferPDF.payment.taxPayerTypeId&&w.setText("S"),"26"==this.state.w9DataTransferPDF.payment.taxPayerTypeId&&w.setText("P"),w.setAlignment(Y.Left),i.setText((this.state.w9DataTransferPDF.address.addressLine1?this.state.w9DataTransferPDF.address.addressLine1:"")+" "+(this.state.w9DataTransferPDF.address.addressLine2?this.state.w9DataTransferPDF.address.addressLine2:"")),s.setText(this.state.w9DataTransferPDF.address.city+", "+this.state.w9DataTransferPDF.address.state+" "+this.state.w9DataTransferPDF.address.zip),h.setText(this.state.w9DataTransferPDF.payment.payeeCode),h.setAlignment(Y.Left),y.setText(this.state.w9DataTransferPDF.payment.fatcaCode),y.setAlignment(Y.Left),N=(N="XXXXXXXXX"!=this.state.w9DataTransferPDF.payment.govtIdNumber?this.state.w9DataTransferPDF.payment.govtIdNumber:this.state.tinNew).replace(/-|\s/g,""),"SSN"==this.state.w9DataTransferPDF.payment.idType&&(_=N.substring(0,3),T=N.substring(3,5),D=N.substring(5,9)),"EIN"==this.state.w9DataTransferPDF.payment.idType&&(j=N.substring(0,2),M=N.substring(2,9)),c.setText(_),d.setText(T),f.setText(D),p.setText(j),m.setText(M),b.setText(this.state.vendorNumber),b.setAlignment(Y.Left),(L=r.createTextField("custom.signature")).setText("Signature not required"),L.addToPage(o.getPage(0),{x:125,y:232,width:100,height:15,backgroundColor:U(1,.99,.87),borderWidth:0}),L.enableReadOnly(),(A=r.createTextField("custom.date")).setText(a.toLocaleDateString("en-US")),A.addToPage(o.getPage(0),{x:415,y:232,width:75,height:15,backgroundColor:U(1,.99,.87),borderWidth:0}),A.enableReadOnly(),l.forEach(function(e){var t=!1;if(e instanceof W&&e.getText()?t=!0:e instanceof H&&e.isChecked()&&(t=!0),t){var a=I(e.acroField.getWidgets(),1)[0].getAppearanceCharacteristics();a.setBackgroundColor(V(U(1,.99,.87))),a.setBorderColor(V(U(1,.99,.87)))}}),e.next=73,o.saveAsBase64({dataUri:!0});case 73:B=e.sent,document.querySelector("#iframe").src=B,fetch(B).then(function(e){return e.blob()}).then(function(e){var t=new File([e],"sample.pdf",{type:e.type});x.setState({w9FileObj:t})});case 76:case"end":return e.stop()}},e,this)}),r=function(){var e=this,l=arguments;return new Promise(function(t,a){var n=i.apply(e,l);function o(e){j(n,t,a,o,r,"next",e)}function r(e){j(n,t,a,o,r,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)})},{key:"tinReview",value:function(a,n){var o=this,e=this.state.w9DataTransferPDF.payment.idType;g.showVerifyTinW9Modal("Your TIN does not match our records. Please try again.",e,function(e,t){e?(o.setState({tinNew:t}),setTimeout(function(){o.w9Review(a,n)},500)):o.resetButtonStates()})}},{key:"w9Review",value:function(n,o){var r=this;window.document.getElementById("app").classList.add("additional-modal-big"),g.showConfirmationModal('<div class="text-align-center">Review and Submit Form W-9</div>','<div class="review-pdf-container"><h2 class="panel-group"></h2><ul style="float: left;width: 76%;"><li>Please review the Substitute Form W-9 provided below for accuracy before submission.</li><li><strong>Note:</strong> Given that this Substitute Form W-9 is solely utilized to validate your TIN for royalty payments, the "Signature of U.S. person" field in Part II is not required.</li></ul><div style="text-align: left;margin-top: 8px;margin-bottom: 8px;width: 18%;float: right;"><button class="btn btn-primary" style="padding: 14px;"  data-dismiss="modal" id="editW9Form" onClick={this.windowTop}> <span class="glyphicon glyphicon-pencil"></span>&nbsp; Edit Information</button></div><iframe src="" id="iframe" width="832" height="1125" ></iframe><div class="checkbox padding-left-20 padding-top-10 "><input type="checkbox" id="w9ReviewCheckbox" name="w9ReviewCheckbox" value="true"><label  for="w9ReviewCheckbox"> I have carefully reviewed all mandatory fields on this Form W-9 for accuracy</label></div><div class="checkbox padding-left-0 btn-group-justified"><input type="checkbox" id="w9ConfirmCheckbox" name="w9ConfirmCheckbox" value="true"><label  for="w9ConfirmCheckbox"> I certify that the information I am providing is accurate and my own</label></div> <div class="checkbox padding-left-0 btn-group-justified"><input type="checkbox" id="w9AgreeCheckbox" name="w9AgreeCheckbox" value="true"><label  for="w9AgreeCheckbox"> I agree to the terms stated in Part II: Certification in the substitute Form W-9 above</label></div></div>',"Submit","Cancel. I will complete my vendor account later",function(e,t){if(e){if(o){if(r.state.w9FileObj){var a=new FormData;a.append("file",r.state.w9FileObj,r.state.w9FileObj.name),m.uploadWForm(a,r.state.vendorNumber)}setTimeout(function(){document.getElementById("message").style.display="block"},1e3)}else r.submit(n);window.document.getElementById("app").classList.remove("additional-modal-big")}else r.resetButtonStates(),r.props.parentMethod&&r.props.parentMethod(),window.document.getElementById("app").classList.remove("additional-modal-big")}),this.fillForm()}},{key:"windowTop",value:function(){setTimeout(function(){window.scrollTo(0,0)},500)}},{key:"onSubmit",value:function(e){var t=this,a=R.default.hasTaxInfoChanged(),n=R.default.hasTaxwoPhoneChanged(),o=R.default.hasBankInfoChanged();if(a||o){var r=R.default.gatherPaymentData();this.setState({w9DataTransferPDF:r})}if(!this.readOnly()||(this.props.forBaB&&b.go("next"),"Pending"==R.default.accountStatus||1==this.state.paymentObj.uploadButtonEnabled))if("no"===this.state.citizen||a&&!n||!a&&o)this.submit();else{var l=R.default.gatherPaymentData();this.setState({w9DataTransferPDF:l}),setTimeout(function(){"Active"!=R.default.accountStatus&&"InReview"!=R.default.accountStatus&&"Pending"!=R.default.accountStatus||1!=t.state.paymentObj.uploadButtonEnabled||a||o?"Active"==R.default.accountStatus?t.tinReview(e):"InReview"==R.default.accountStatus&&"true"==t.state.inReviewApproved?t.tinReview(e):("InReview"==R.default.accountStatus&&t.state.inReviewApproved,t.w9Review(e)):t.tinReview(e,!0)},1e3)}}},{key:"onCancel",value:function(){E.resetVendorInfo(!0)}},{key:"onAddressValidationComplete",value:function(e){var t=this;if(e.canceled)return this.props.forBaB||this.refs.cmdSave.enableButton(),this.props.onSubmitCancelled&&this.props.onSubmitCancelled(),void(this.props.clearProgress&&this.props.clearProgress());setTimeout(function(){e.address&&t.refs.usTaxForm.applyAddress(e.address),t.props.onSubmit&&t.props.onSubmit(),t.savePaymentInfo()},0)}},{key:"onClick",value:function(e){this.open()}},{key:"open",value:function(){this.refs.fileInput.value=null}},{key:"onFormUploadStart",value:function(e){var n=this;e.preventDefault(),window.document.getElementById("app").classList.remove("additional-error-modal");var t=e.target.files,a=(t[0].size/1048576).toFixed(2),o=t[0].name,r="yes"===this.state.citizen?"W-9":"W-8",l=this.state.turnTime.SettingValue;this.setState({fileName:o,errorText:!1,enableError:!1}),2<a&&(window.document.getElementById("app").classList.add("additional-error-modal"),this.setState({fileSize:!1})),window.document.getElementById("app").classList.add("additional-modal"),2<a&&g.showConfirmationModal('<p class="text-align-center">Your File Is Too Large <i class="fa fa-exclamation-triangle yellow-warning" aria-hidden="true"></i></p>','<span class="w8-error w8-error-text-center">Please upload a file that does not exceed 2MB</span><br/><div class="icon-container"><span class="glyphicon glyphicon-file"></span><span class="file-name-size">'+o+'</span><span class="file-name-size error">('+a+" MB)</span></div>","OK","");var i=document.getElementById("fileInput");if(a<2){var s=0;for(t[s];s<t.length;s++){var u=t[s].type;"application/pdf"===u?(window.document.getElementById("app").classList.add("hide-image"),window.document.getElementById("app").classList.remove("hide-pdf"),c(t[s]),this.setState({fileObj:t[s]}),g.showConfirmationModal(" "+a<2?"Review Your "+r+" Form":'Your File Is Too Large <i class="fa fa-exclamation-triangle yellow-warning" aria-hidden="true"></i>'," "+a<2?'<form runat="server" id="view-container"><div id="canvas"><canvas id="the-canvas"></canvas></div><div id="image" ><img id="previewImage" src="#" alt="your image" /></div></form><h2 class="panel-group">Please Note:</h2><ul class="padding-left-20"><li>After clicking "Upload This File", you will not be able to upload a new file until this file has been reviewed by our Vendor Management team.</li><li>Incomplete forms will be returned to the sender and cause processing delays.</li><li>The current turnaround time to review files is approximately '+l+'.</li></ul><div class="checkbox padding-left-20 padding-top-10 "><input type="checkbox" id="uploadCheckbox1" name="uploadCheckbox1" value="true"><label class="font-bold" for="uploadCheckbox1"> I have filled out all the required fields of this form</label></div><div class="checkbox padding-left-0 btn-group-justified"><input type="checkbox" id="uploadCheckbox2" name="uploadCheckbox2" value="true"><label class="font-bold" for="uploadCheckbox2"> I have signed and dated this form</label></div>':'<span class="w8-error">Please upload a file that does not exceed 2MB</span><br/><div class="icon-container"><span class="glyphicon glyphicon-file"></span><span class="file-name-size">'+o+'</span><span class="file-name-size error">('+a+" MB)</span></div>"," "+a<2?"Upload This File":"OK"," "+a<2?"Cancel":"",function(e,t){if(e){var a=new FormData;a.append("file",n.state.fileObj,n.state.fileObj.name),m.uploadWForm(a,n.state.vendorNumber)}})):"image/png"==u||"image/jpeg"==u||"image/gif"==u?function(){window.document.getElementById("app").classList.add("hide-pdf"),window.document.getElementById("app").classList.remove("hide-image");var e=I(i.files,1)[0];e&&setTimeout(function(){g.showConfirmationModal(" "+a<2?"Review Your "+r+" Form":'Your File Is Too Large <i class="fa fa-exclamation-triangle yellow-warning" aria-hidden="true"></i>'," "+a<2?'<form runat="server" id="view-container"><div id="canvas"><canvas id="the-canvas"></canvas></div><div id="image" ><img id="previewImage" src="#" alt="your image" /></div></form><h2 class="panel-group">Please Note:</h2><ul class="padding-left-20"><li>After clicking "Upload This File", you will not be able to upload a new file until this file has been reviewed by our Vendor Management team.</li><li>Incomplete forms will be returned to the sender and cause processing delays.</li><li>The current turnaround time to review files is approximately '+l+'.</li></ul><div class="checkbox padding-left-20 padding-top-10 "><input type="checkbox" id="uploadCheckbox1" name="uploadCheckbox1" value="true"><label class="font-bold" for="uploadCheckbox1"> I have filled out all the required fields of this form</label></div><div class="checkbox padding-left-0 btn-group-justified"><input type="checkbox" id="uploadCheckbox2" name="uploadCheckbox2" value="true"><label class="font-bold" for="uploadCheckbox2"> I have signed and dated this form</label></div>':'<span class="w8-error">Please upload a file that does not exceed 2MB</span><br/><div class="icon-container"><span class="glyphicon glyphicon-file"></span><span class="file-name-size">'+o+'</span><span class="file-name-size error">('+a+" MB)</span></div>"," "+a<2?"Upload This File":"OK"," "+a<2?"Cancel":"",function(e,t){if(e){var a=new FormData;a.append("file",n.state.fileObj,n.state.fileObj.name),m.uploadWForm(a,n.state.vendorNumber)}}),n.setState({fileObj:e},function(){document.getElementById("previewImage").src=URL.createObjectURL(e)})},1e3)}():this.setState({enableError:!0})}}function c(e){var t,a=new FileReader;a.onload=(t=a,function(){var e=t.result;pdfjsLib.getDocument(e).promise.then(function(e){e.getPage(1).then(function(e){var t=e.getViewport({scale:1.2}),a=document.getElementById("the-canvas"),n=a.getContext("2d");a.height=t.height,a.width=t.width;var o={canvasContext:n,viewport:t};e.render(o)})})}),a.readAsDataURL(e)}}},{key:"fileFormUploadData",value:function(e){var t=e;t.data?(setTimeout(function(){document.getElementById("message").scrollIntoView()},500),this.setState({paymentObj:t.data,errorText:!1}),document.getElementById("confirmation-modal").removeAttribute("style"),window.document.getElementsByTagName("html")[0].classList.remove("confirm-grandparent-container"),(0,u.default)(".warning-dialogue").attr("style","display: none")):(this.setState({errorText:!0}),setTimeout(function(){window.document.getElementsByTagName("html")[0].classList.remove("confirm-grandparent-container"),document.getElementById("confirmation-modal").removeAttribute("style")},5e3))}},{key:"onPrevOpenModal",value:function(){"yes"==this.state.citizen?this.onOpenW9Modal():this.onOpenW8Modal(),document.getElementsByClassName("btn-primary")[0].click(),setTimeout(function(){window.document.getElementsByTagName("body")[0].classList.add("modal-open")},1e3)}},{key:"onOpenW8Modal",value:function(){g.showInformationModal(l.default.createElement("div",{className:"add-tax-form-modal-info"},l.default.createElement("h1",null,"Tax Information for Non-US Publishers"),l.default.createElement("p",null,"Barnes & Noble Press requires all publishers provide valid taxpayer identification information. This information is processed in the order received and note to expect potential delays due to volume. Tax withholding and specific requirements vary based on whether you are a U.S. person or non-U.S. person."),l.default.createElement("p",null,"According to the United States Internal Revenue Service (IRS), for federal purposes, you are considered a U.S. person if you are:"),l.default.createElement("ul",null,l.default.createElement("li",null,"An individual who is a U.S. citizen or U.S. resident alien;"),l.default.createElement("li",null,"A partnership, corporation, company, or association created or organized in the United States or under the laws of the United States;"),l.default.createElement("li",null,"An estate (other than a foreign estate); or")),l.default.createElement("p",null,"A domestic trust (as defined in Regulations section 301.7701-7)."),l.default.createElement("p",null,'If you are not a U.S. person, the rules that apply to you are found below in the section for "Non-U.S. Publishers."'),l.default.createElement("p",{className:"note"},"Note that the information on this page is not intended to be tax advice and may not be used to support tax positions. We recommend you consult with a tax advisor for any tax guidance."),l.default.createElement("h2",null,"NON-U.S. PUBLISHERS"),l.default.createElement("h3",null,"Tax Withholding"),l.default.createElement("p",null,"Tax withholding is calculated based on the gross amount of your payment, before taking into account any costs associated with receiving payment. "),l.default.createElement("p",null,"The U.S. IRS requires Barnes & Noble Press to collect up to 30% from royalty payments issued to non-U.S. entities. The tax withholding will automatically be deducted from your royalties when they are paid. "),l.default.createElement("p",null,"You may be eligible for a reduced rate of U.S. tax withholding if your country of permanent residence (the country where you claim to be a resident of for purposes of that country\\'s income tax) has an income tax treaty with the U.S. The link to information on tax treaty countries and applicable rates can be found on page 51 of the IRS \\'Publication 515\\' under the Tax Treaties section or you can click on the link below. "),l.default.createElement("ul",null,l.default.createElement("li",null,"Tax Treaties - ",l.default.createElement("a",{href:"https://www.irs.gov/individuals/international-taxpayers/tax-treaty-tables",className:"underline-link",target:"_blank"},"https://www.irs.gov/individuals/international-taxpayers/tax-treaty-tables"))),l.default.createElement("p",null,"If you provide a Form W-8BEN or W-8BEN-E to certify that you are a non-U.S. person, U.S. tax withholding will be reduced or will not be applied to your non-U.S. royalties from Barnes & Noble Press sales. If you do not certify that you are a non-U.S. person, you may be subject to U.S. tax withholding on your Barnes & Noble Press royalties. If you're uncertain which form to submit, consult with your tax adviser. "),l.default.createElement("h3",null,"Requirements"),l.default.createElement("p",null,"Barnes & Noble Press is required to collect a Form W-8BENor Form W-8BEN-E from all non-U.S. publishers who are receiving royalties. Visit the IRS website for detailed instructions on how to complete Form ",l.default.createElement("a",{href:"https://www.irs.gov/forms-pubs/form-w-8ben-certificate-of-foreign-status-of-beneficial-owner-for-united-states-tax-withholding",className:"underline-link",target:"_blank"},"W-8BEN")," and ",l.default.createElement("a",{href:"https://www.irs.gov/forms-pubs/about-form-w-8ben-e",className:"underline-link",target:"_blank"},"W-8BEN-E")),l.default.createElement("p",null,"The purpose of the form(s) is to:"),l.default.createElement("ul",null,l.default.createElement("li",null,"Establish that you are not a U.S. person"),l.default.createElement("li",null,"Claim that you are the beneficial owner of the income for which Form W-8BEN is being provided or a partner in a partnership subject to section 1446; and"),l.default.createElement("li",null,"If applicable, claim a reduced rate of, or exemption from, withholding as a resident of a foreign country with which the United States has an income tax treaty and who is eligible for treaty benefits.")),l.default.createElement("p",null,"Please submit Form W-8BEN or W-8BEN-E to provide us with your U.S. taxpayer identification and/or foreign taxpayer identification information. Please be sure to complete the following:"),l.default.createElement("ul",null,l.default.createElement("li",null,"Write your Barnes & Noble Press Vendor ID (PUBXXXXXXX) in the â€˜Reference number(s)â€™ section of the form."),l.default.createElement("li",null,"Be sure to enter your information in the correct fields and do not abbreviate any country names."),l.default.createElement("li",null,"If you are claiming treaty benefits for a reduced withholding rate, you must provide a U.S. TIN and/or your foreign tax identification number."),l.default.createElement("li",null,"Provide signature and date - ink or digital - in the appropriate section."),l.default.createElement("li",null,"Information in W-8 form MUST match exactly to that on website"),l.default.createElement("li",null,"For detailed instructions on how to complete Form W-8BEN, visit the IRS website: ",l.default.createElement("a",{href:"https://www.irs.gov/instructions/iw8ben",className:"underline-link",target:"_blank"},"https://www.irs.gov/instructions/iw8ben"))),this.state.W8and9FeatureFlagValue?l.default.createElement("p",null,"Upload a scanned version of the form by clicking the \"I'm Ready to Upload a ",l.default.createElement("span",{className:"no-wrap-text"},"yes"===this.state.citizen?"W-9":"W-8"),'" button. This is the fastest and most reliable way to submit your form.'):l.default.createElement("p",null,"Send a scanned version of the form electronically to ",l.default.createElement("a",{href:"mailto:VMTax@bn.com",className:"underline-link"},"VMTax@bn.com")),l.default.createElement("p",null,"Or send a hard copy to: "),l.default.createElement("address",null,"Barnes & Noble Press",l.default.createElement("br",null),"Attn: Vendor Maintenance",l.default.createElement("br",null),"1400 Old Country Road, 1st Floor",l.default.createElement("br",null),"Westbury, NY 11590",l.default.createElement("br",null)),l.default.createElement("p",null,"The W-8BEN form is for individuals only. If you're not an individual, you will need form W-8BEN-E. If you are uncertain which form to submit, consult with your tax adviser."),l.default.createElement("h3",null,"Affidavit of unchanged status"),l.default.createElement("p",null,"If you have received a message from Barnes & Noble Press directing you to send us an affidavit of unchanged status, please download the form, print it, sign it, and send it to the mailing address below. "),l.default.createElement("p",null,l.default.createElement("a",{href:"https://dispatch.barnesandnoble.com/content/dam/rncx/2015/pdf/4052%20Affadavit%20of%20Unchanged%20Status%20for%20W-8BEN.pdf",target:"_blank"},"Affidavit of unchanged status for W-8BEN")),l.default.createElement("p",null,l.default.createElement("a",{href:"https://dispatch.barnesandnoble.com/content/dam/rncx/2015/pdf/4052%20Affadavit%20of%20Unchanged%20Status%20for%20W-8BEN-E.pdf",target:"_blank"},"Affidavit of unchanged status for W-8BEN-E")),l.default.createElement("p",null,"Please send the hardcopy affidavit to:"),l.default.createElement("address",null,"Barnes & Noble Press",l.default.createElement("br",null),"Attn: Vendor Maintenance",l.default.createElement("br",null),"1400 Old Country Road, 1st Floor",l.default.createElement("br",null),"Westbury, NY 11590",l.default.createElement("br",null)),l.default.createElement("p",null,"Or email the signed copy to: ",l.default.createElement("a",{href:"mailto:VMTax@bn.com",className:"underline-link"},"VMTax@bn.com")),l.default.createElement("h3",null,"Tax Reporting"),l.default.createElement("p",null,"Your U.S. source income will be reported annually on IRS Form 1042-S. The form is issued on, or before, March 15th each year and is an informational statement of your royalties and any amounts withheld during the prior tax year. For example, any royalties paid to you from January 1, 2016 through December 31, 2016 will be reported on Form 1042-S, issued in March 2017."),l.default.createElement("p",null,"You may be responsible for paying taxes in your own country."))),setTimeout(function(){document.getElementById("message").scrollIntoView()},1e3)}},{key:"onOpenW9Modal",value:function(){g.showInformationModal(l.default.createElement("div",{className:"add-tax-form-modal-info"},l.default.createElement("h1",null,"Tax Information for US Publishers"),l.default.createElement("p",null,"Barnes & Noble Press requires all publishers provide valid taxpayer identification information. This information is processed in the order received and note to expect potential delays due to volume. Tax withholding and specific requirements vary based on whether you are a U.S. person or non-U.S. person."),l.default.createElement("p",null,"According to the United States Internal Revenue Service (IRS), for federal purposes, you are considered a U.S. person if you are:",l.default.createElement("ul",null,l.default.createElement("li",null,"An individual who is a U.S. citizen or U.S. resident alien;"),l.default.createElement("li",null,"A partnership, corporation, company, or association created or organized in the United States or under the laws of the United States;"),l.default.createElement("li",null,"An estate (other than a foreign estate); or"),l.default.createElement("li",null,"A domestic trust (as defined in Regulations section 301.7701-7)."))),l.default.createElement("p",null,"If you are a U.S. person, the rules that apply to you are found below in the section for â€œU.S. Publishers.â€"),l.default.createElement("p",null,l.default.createElement("i",null,"Note that the information on this page is not intended to be tax advice and may not be used to support tax positions. We recommend you consult with a tax advisor for any tax guidance.")),l.default.createElement("h2",null,"U.S. PUBLISHERS"),l.default.createElement("h3",null,"Requirements"),l.default.createElement("p",null,"Barnes & Noble Press requires all U.S. publishers, including non-profit or tax-exempt organizations, to provide their U.S. taxpayer identification number. For U.S. taxpayers, a TIN (taxpayer identification number) is required by the IRS for the administration of tax laws. In most cases, your TIN is either an Employer Identification Number (EIN) or a Social Security Number (SSN). Please submit Form W-9 to provide us with your U.S. taxpayer identification information."),l.default.createElement("p",null,"We make it easy for you by automatically generating a Substitute Form W-9 using the information you provide in the Taxpayer Information section of the My Vendor Account page. Please take note of the following:"),l.default.createElement("ul",null,l.default.createElement("li",null,"The information on Form W-9 must match precisely with the information on your My Vendor Account page."),l.default.createElement("li",null,"Before submitting, double-check that your information is accurate and correctly placed in the respective fields."),l.default.createElement("li",null,"Ensure that your Barnes & Noble Press Vendor ID (PUBXXXXXXX) is correctly entered in the 'List account number(s) here' section of the form."),l.default.createElement("li",null,"Given that this Substitute Form W-9 is solely utilized to validate your TIN for royalty pyaments, the â€˜Signature of U.S. personâ€™ field in Part II is not required."),l.default.createElement("li",null,"For detailed instructions on how to complete Form W-9, visit the IRS website: ",l.default.createElement("a",{href:"https://www.irs.gov/instructions/iw9",className:"underline-link",target:"_blank"},"https://www.irs.gov/instructions/iw9"))),l.default.createElement("p",null,'Once you\'ve reviewed the form, simply upload it by clicking the "Submit" button. This is the quickest and most dependable method for submitting your form.'),l.default.createElement("p",null,"Or send a hard copy to: "),l.default.createElement("address",null,"Barnes & Noble Press",l.default.createElement("br",null),"Attn: Vendor Maintenance ",l.default.createElement("br",null),"1400 Old Country Road, 1st Floor",l.default.createElement("br",null),"Westbury, NY 11590 ",l.default.createElement("br",null)),l.default.createElement("p",null,"If you are a U.S. person, but residing in a country outside of the U.S., you must also submit Form W-9 as described above."),l.default.createElement("h3",null,"Tax Withholding"),l.default.createElement("p",null,"If you provide Barnes & Noble Press with your valid taxpayer identification information, tax withholding will not be deducted from your royalties. If the tax identity you provide us does not match IRS records, you may be subject to payment holds or U.S. tax withholding of up to 30%."),l.default.createElement("h3",null,"Tax Reporting"),l.default.createElement("p",null,"Your royalties paid in the prior tax year will be reported on Form 1099MISC. Forms will be issued on or before January 31 each year and filed with the IRS. For example, any royalties paid to you from January 1, 2022 through December 31, 2022 will be reported on Form 1099MISC, issued in January 2023."),l.default.createElement("p",null,"You are responsible for filing all relevant income tax returns."))),setTimeout(function(){document.getElementById("message").scrollIntoView()},1e3)}},{key:"render",value:function(){var e=this.getAddTaxFormType(),t='<ul class="tooltip-bullets"><li>Your tax information is needed to report your income each year.</li><li>Once your taxpayer information is submitted, you will be required to upload a Form '+e+".</li><li>Taxpayer type and Taxpayer IDs (SSN, EIN, etc.) cannot be changed once submitted.</li><li>Any changes in personal information (Name, Address, etc.) requires you to submit a new Form "+e+".</li>",a=this.state.disableInput;return l.default.createElement("div",null,l.default.createElement("div",{id:"container-modal"},l.default.createElement("div",{id:"confirmation-modal"},1==this.state.errorText?l.default.createElement("div",{className:"add-tax-form-modal-info center-link error-msg-center"},l.default.createElement("div",{className:"error-color"},"An error occured in the upload. Please try again.")):l.default.createElement("div",{className:"add-tax-form-modal-info center-link"},l.default.createElement("div",{className:"row padding-top-10"},l.default.createElement("img",{src:"img/spinner.gif",alt:"spinner"})," "),l.default.createElement("div",{className:"padding-top-10"}," ",l.default.createElement("div",null,"Do not refresh or close this window",l.default.createElement("br",null),"while the file upload is in progress. ",l.default.createElement("br",null)," ",l.default.createElement("br",null)," This window will close on its own when",l.default.createElement("br",null)," the upload is complete. ")," ")))),l.default.createElement("div",{className:"section-detail"},l.default.createElement(d.default,{ref:"form",readOnly:this.readOnly(),onChange:this.onValidationChanged,onSubmit:this.onSubmit},l.default.createElement("div",{className:(0,s.default)("vendor-section",{"no-selection":!this.state.citizenshipSelected})},l.default.createElement("div",{className:"section-header first"},l.default.createElement("h2",null,"Citizenship Information")),l.default.createElement("div",{className:"section-form"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-12"},l.default.createElement(f.default,{ref:"citizen",name:"citizen",label:"Are you a U.S. citizen, resident or company?",fieldLayout:"horizontal",radioLayout:"horizontal",initDisabled:R.default.approved,options:x,initValue:"NoCheck"!==this.state.checkVendorObj?this.state.citizen:null,onChange:function(e){return E.setCitizen(e.newValue)},rules:[y.required()]}))))),"yes"===this.state.citizen&&("NoCheck"!==this.state.checkVendorObj||this.state.citizenshipSelected)&&l.default.createElement("div",null,l.default.createElement("div",{className:"vendor-section"},l.default.createElement("div",{className:"section-header with-extra-header-margin"},l.default.createElement("div",{className:(0,s.default)({"pull-left":!this.props.forBaB})},l.default.createElement("h2",null,"Taxpayer Information")),l.default.createElement("div",{className:(0,s.default)("tax-info-tooltip",{"pull-left":!this.props.forBaB})},l.default.createElement(p.default,{info:!0,isHtml:!0,text:t}))),l.default.createElement("div",{className:"section-form additional-container-tax"},l.default.createElement(C.default,{ref:"usTaxForm",setTaxTypePass:this.setTaxTypePass})),l.default.createElement("div",{className:"section-form"},l.default.createElement("div",{className:(0,s.default)("add-tax-form-info",{"hide-Vendor-container":this.state.W8and9FeatureFlagValue&&"true"==this.state.paymentObjFileStatus||"false"==this.state.inReviewApproved&&"InReview"==this.state.inReviewStatus}),id:"message"},l.default.createElement("div",{className:"thirtyDayNotice"}),l.default.createElement("h3",null,"W-9 Information"),l.default.createElement("p",null,"Barnes & Noble Press requires all U.S. publishers, including non-profit or tax-exempt organizations, to provide their U.S. taxpayer identification number. If you provide Barnes & Noble Press with your valid taxpayer identification information, tax withholding will not be deducted from your royalties. If the tax identity you provide us does not match IRS records, you may be subject to payment holds.Â ",l.default.createElement("a",{href:"#",onKeyDown:this.makeClick,onClick:this.onOpenW9Modal},"More info")),1==this.state.paymentObj.uploadButtonEnabled&&l.default.createElement("div",{className:"vendor-function-section additional-w9-vendor"},l.default.createElement("div",{className:"w-45"},l.default.createElement(c.default,{ref:"submitDigital",buttonText:"Review & Submit Digital Form W-9",click:this.onSubmit,"data-callback":"onSubmit",id:"submitDigital","data-action":"submit"}))),this.state.W8and9FeatureFlagValue&&l.default.createElement("p",{className:"add-tax-form-details "+(this.state.paymentObj&&"A new form with your updated personal information is required"==this.state.paymentObj.wFileStatusDetail||"Your form is expired. An updated form is required"==this.state.paymentObj.wFileStatusDetail?"submission-status":"")},l.default.createElement("strong",null,"Submission Status: "),this.state.paymentObj&&this.state.paymentObj.wFileStatusDetail?this.state.paymentObj.wFileStatusDetail:"No form has been uploaded",this.state.paymentObj&&this.state.paymentObj.wFileStatusDetail&&this.state.paymentObj.warning?l.default.createElement("span",null," ",l.default.createElement("span",null," Â Â "),l.default.createElement(p.default,{info:!0,isHtml:!0,text:"No form has been uploaded"==this.state.paymentObj.wFileStatusDetail?"We can only monitor forms that are submitted through this website. Forms sent separately via email or hard copies sent through postal mail cannot be tracked.":"A new form with your updated personal information is required"==this.state.paymentObj.wFileStatusDetail?"We detected an update in your personal information (i.e. name and address). A new form with matching information is required.":"Submit a new form to return to your previous withholding rate. If you choose not to submit a new W-8, please email BNPressSupport@bn.com to revert to a 30% withholding rate."})):!this.state.paymentObj&&!this.state.paymentObj.warning&&l.default.createElement("span",null," ",l.default.createElement("span",null," Â Â "),l.default.createElement(p.default,{info:!0,isHtml:!0,text:"We can only monitor forms that are submitted through this website. Forms sent separately via email or hard copies sent through postal mail cannot be tracked."})),"No form has been uploaded"==this.state.paymentObj.wFileStatusDetail&&l.default.createElement("span",null," ",l.default.createElement("span",null," Â Â "),l.default.createElement(p.default,{info:!0,isHtml:!0,text:"We can only monitor forms that are submitted through this website. Forms sent separately via email or hard copies sent through postal mail cannot be tracked."}))),l.default.createElement("p",{className:"add-tax-form-details"},l.default.createElement("strong",null,"Verified: "),this.state.addTaxInfoStatus.verified?"No"==this.state.addTaxInfoStatus.verified?"No (On Payment Hold)":this.state.addTaxInfoStatus.verified:"No")))),l.default.createElement("div",{className:"vendor-section"},l.default.createElement("div",{className:"section-header"},l.default.createElement("h2",null,"Banking Information")),l.default.createElement("div",{className:"section-form"},l.default.createElement(_.default,null)))),"no"===this.state.citizen&&("NoCheck"!==this.state.checkVendorObj||this.state.citizenshipSelected)&&l.default.createElement("div",null,l.default.createElement("div",{className:"vendor-section"},l.default.createElement("div",{className:"section-header with-extra-header-margin"},l.default.createElement("div",{className:(0,s.default)({"pull-left":!this.props.forBaB})},l.default.createElement("h2",null,"Taxpayer Information")),l.default.createElement("div",{className:(0,s.default)("tax-info-tooltip",{"pull-left":!this.props.forBaB})},l.default.createElement(p.default,{info:!0,isHtml:!0,text:t}))),l.default.createElement("div",{className:"section-form"},l.default.createElement(N.default,null)),l.default.createElement("div",{className:"section-form"},l.default.createElement("div",{className:(0,s.default)("add-tax-form-info",{"hide-Vendor-container":this.state.W8and9FeatureFlagValue&&"true"==this.state.paymentObjFileStatus}),id:"message"},l.default.createElement("div",{className:"thirtyDayNotice"},l.default.createElement("p",null,l.default.createElement("span",{className:"thirtyDayNoticeHeader"},"Please note: "),l.default.createElement("span",{className:"thirtyDayNoticeText"},"You have up to 30 days to submit your ","yes"===R.default.citizen?"W-9":"W-8"," information. Your vendor account can be submitted for approval independently and your books can go on sale before your tax form is submitted."))),l.default.createElement("h3",null,"W-8 Information"),l.default.createElement("p",null,"US tax law requires that we withhold tax of 30% from sales payments if you are a non-US vendor. However, you may be entitled to a reduced rate of withholding or no withholding at all if certain conditions are met and you provide us with appropriate documentation."),this.state.enableError&&l.default.createElement("p",{className:"vendor-filesize-error"},"Your file was not uploaded. We only accept pdf, jpg, jpeg, png or gif files. Please edit your file and try again."),this.state.W8and9FeatureFlagValue?l.default.createElement("div",{className:"vendor-function-section"},l.default.createElement("div",{className:"w-45"},l.default.createElement("button",{className:"btn btn-block btn-link btn-s vendor-form-information",onKeyDown:this.makeClick,onClick:this.onOpenW8Modal},"I Need More Information"),l.default.createElement("br",null),l.default.createElement("span",null)),l.default.createElement("span",{className:"or-vendor"},"OR"),l.default.createElement("div",{className:"w-45"},l.default.createElement("label",{tabIndex:"0","aria-disabled":this.state.paymentObj&&0==this.state.paymentObj.uploadButtonEnabled?"true":"false",onKeyDown:this.makeClick,className:"btn-block "+(this.state.paymentObj&&0==this.state.paymentObj.uploadButtonEnabled?" vendor-form-upload-disabled":" vendor-form-upload")},l.default.createElement("input",{className:"hidden",type:"file",ref:"fileInput",multiple:!1,disabled:!(!this.state.paymentObj||0!=this.state.paymentObj.uploadButtonEnabled),id:"fileInput",accept:z.ACCEPTED_FILE_TYPES,onChange:this.onFormUploadStart,onClick:this.onClick}),"I'm Ready to Upload a W-8"),l.default.createElement("span",{className:"btn-block small text text-center btn-span-info"},this.state.paymentObj&&0==this.state.paymentObj.uploadButtonEnabled?"Upload is disabled when a form has been submitted or already approved. To reenable, email BNPressSupport@bn.com":"Accepted formats: PDF, JPG, JPEG, PNG, GIF (max. 2MB)"))):l.default.createElement("div",{className:"vendor-function-section"},l.default.createElement("button",{className:"btn btn-primary",onKeyDown:this.makeClick,onClick:this.onOpenW8Modal},"More Information")),l.default.createElement("div",null),this.state.W8and9FeatureFlagValue&&l.default.createElement("p",{className:"add-tax-form-details "+(this.state.paymentObj&&"A new form with your updated personal information is required"==this.state.paymentObj.wFileStatusDetail||"Your form is expired. An updated form is required"==this.state.paymentObj.wFileStatusDetail?"submission-status":"")},l.default.createElement("strong",null,"Submission Status: "),this.state.paymentObj&&this.state.paymentObj.wFileStatusDetail?this.state.paymentObj.wFileStatusDetail:"No form has been uploaded",this.state.paymentObj&&this.state.paymentObj.wFileStatusDetail&&this.state.paymentObj.warning?l.default.createElement("span",null," ",l.default.createElement("span",null," Â Â "),l.default.createElement(p.default,{info:!0,isHtml:!0,text:"No form has been uploaded"==this.state.paymentObj.wFileStatusDetail?"We can only track scanned forms uploaded to this website. We cannot track forms sent separately via email or hard copies sent in the mail.":"A new form with your updated personal information is required"==this.state.paymentObj.wFileStatusDetail?"We detected an update in your personal information (i.e. name and address). A new form with matching information is required.":"Submit a new form to return to your previous withholding rate. If you choose not to submit a new W-8, please email BNPressSupport@bn.com to revert to a 30% withholding rate."})):!this.state.paymentObj&&!this.state.paymentObj.warning&&l.default.createElement("span",null," ",l.default.createElement("span",null," Â Â "),l.default.createElement(p.default,{info:!0,isHtml:!0,text:"We can only track scanned forms uploaded to this website. We cannot track forms sent separately via email or hard copies sent in the mail"})),"No form has been uploaded"==this.state.paymentObj.wFileStatusDetail&&l.default.createElement("span",null," ",l.default.createElement("span",null," Â Â "),l.default.createElement(p.default,{info:!0,isHtml:!0,text:"We can only track scanned forms uploaded to this website. We cannot track forms sent separately via email or hard copies sent in the mail"}))),l.default.createElement("p",{className:"add-tax-form-details"},l.default.createElement("strong",null,"Verified: "),this.state.addTaxInfoStatus.verified?this.state.addTaxInfoStatus.verified:"No "),l.default.createElement("p",{className:"add-tax-form-details"},l.default.createElement("strong",null,"Signed Date: "),this.state.addTaxInfoStatus.validFrom?this.state.addTaxInfoStatus.validFrom:"Pending "),l.default.createElement("p",{className:"add-tax-form-details"},l.default.createElement("strong",null,"Expiration Date: "),this.state.addTaxInfoStatus.expiryDate?this.state.addTaxInfoStatus.expiryDate:"Pending "),l.default.createElement("p",{className:"add-tax-form-details"},l.default.createElement("strong",null,"Withholding Rate: "),this.state.addTaxInfoStatus.exemptionRate?this.state.addTaxInfoStatus.exemptionRate:"On Payment Hold","On Payment Hold"==this.state.addTaxInfoStatus.exemptionRate&&l.default.createElement("span",null,l.default.createElement("span",null,"Â Â "),l.default.createElement(p.default,{info:!0,isHtml:!0,text:"You will not be paid for sales until your form has been submitted and verified."})),this.state.addTaxInfoStatus.exemptionRate?"":l.default.createElement("span",null,l.default.createElement("span",null,"Â Â "),l.default.createElement(p.default,{info:!0,isHtml:!0,text:"You will not be paid for sales until your form has been submitted and verified."})))))),l.default.createElement("div",{className:"vendor-section"},l.default.createElement("div",{className:"section-header"},l.default.createElement("h2",null,"Banking Information")),l.default.createElement("div",{className:"section-form"},l.default.createElement(_.default,null)))),!this.props.forBaB&&l.default.createElement("div",{className:"row last-row"},l.default.createElement("div",{className:"col-xs-12"},l.default.createElement("div",{className:"save-or-cancel"},l.default.createElement(c.default,{ref:"cmdSave",buttonText:"Submit For Verification",click:this.onSubmit,disabled:!this.state.valid||this.readOnly(),"data-sitekey":"6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v","data-callback":"onSubmit",id:"submitButtonNew","data-action":"submit"}),l.default.createElement("span",{tabIndex:"0",onKeyDown:this.makeClick,className:(0,s.default)("cancel",{disabled:a}),onClick:this.onCancel,disabled:!this.state.valid&&a},"Cancel")))))),this.props.forBaB&&l.default.createElement(T.default,null))}}])&&M(t.prototype,a),n&&M(t,n),o}();t.default=i;var x=[{value:"yes",label:"Yes"},{value:"no",label:"No"}];function G(e){return!e||0===e.length}var z={ACCEPTED_FILE_TYPES:".pdf,.png,.jpg,.jpeg,.gif"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(12)),i=o(a(23)),s=n(a(9)),u=n(a(221)),c=n(a(48)),d=o(a(45));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={stateOptions:d.default.stateOptions},t.onStateOptionsChanged=t.onStateOptionsChanged.bind(y(y(t))),t.onCountryChanged=t.onCountryChanged.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){d.default.addStateOptionsChangedListener(this.onStateOptionsChanged)}},{key:"componentWillUnmount",value:function(){d.default.removeStateOptionsChangedListener(this.onStateOptionsChanged)}},{key:"onStateOptionsChanged",value:function(){var e=this;setTimeout(function(){e.setState({stateOptions:d.default.stateOptions}),e.refs.state.setValue(d.default.state)},0)}},{key:"onCountryChanged",value:function(e){this.props.onCountryChanged&&this.props.onCountryChanged(e)}},{key:"applyAddress",value:function(e){this.refs.addressLine1.setValue(e.address1),this.refs.addressLine2.setValue(e.address2),this.refs.city.setValue(e.city),this.refs.state.setValue(e.state),this.refs.zip.setValue(e.postalCode)}},{key:"render",value:function(){var t=this;return r.default.createElement("div",{className:"tax-address-form"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(l.default,{ref:"addressLine1",name:"addressLine1",label:"Address Line 1",maxLength:240,initValue:d.default.addressLine1,onChange:function(e){return c.setAddressLine1(e.newValue)},rules:[s.required("Please enter a street address.")]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(l.default,{ref:"addressLine2",name:"addressLine2",label:"Address Line 2",maxLength:240,initValue:d.default.addressLine2,onChange:function(e){return c.setAddressLine2(e.newValue)}}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6"},r.default.createElement(i.default,{name:"country",label:"Country",initDisabled:d.default.approved&&"Active"!==d.default.accountStatus,options:d.default.taxCountryOptions,initValue:d.default.taxCountry,onChange:function(e){c.setTaxCountry(e.newValue),t.onCountryChanged(e)},rules:[s.required("Please enter a country.")]})),r.default.createElement("div",{className:"col-md-6"},r.default.createElement(i.default,{ref:"state",name:"state",label:"State",options:this.state.stateOptions,initValue:d.default.state,onChange:function(e){return c.setState(e.newValue)},rules:[s.required("Please select a state.")]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6"},r.default.createElement(l.default,{ref:"city",name:"city",label:"City",maxLength:35,initValue:d.default.city,onChange:function(e){return c.setCity(e.newValue)},rules:[s.required("Please enter a city.")]})),r.default.createElement("div",{className:"col-md-6"},r.default.createElement(l.default,{ref:"zip",name:"zip",label:"Zip / Postal Code",maxLength:10,initValue:d.default.zip,onChange:function(e){return c.setZip(e.newValue)},rules:[s.required("Please enter a Zip code or Postal code."),u.postalCode()]}))),!this.props.excludePhone&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6"},r.default.createElement(l.default,{name:"phone",label:"Phone Number",maxLength:18,initValue:d.default.phone,onChange:function(e){return c.setPhone(e.newValue)},rules:[s.required("Please enter a phone number."),s.pattern(/^\+?\d?\d?-?\(?\d{3}\)?-?\d{3}-?\d{4}$/,"Must be a valid phone number.")]}))))}}])&&p(t.prototype,a),n&&p(t,n),o}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n;(n=a(64))&&n.__esModule;function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=null,this.grouped=!1,e&&(this.title=e.title,this.grouped=e.grouped)}var e,a,n;return e=t,(a=[{key:"toProject",value:function(e){var t=e.clone();return t.title=this.title,t.grouped=this.grouped,t}}])&&o(e.prototype,a),n&&o(e,n),t}();t.default=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadOrderHistory=function(e,t,a,n,o){i.loadOrderHistory(e,t,a,n,o,function(e){r.default.dispatch({type:l.default.OrderHistory.LOAD_ORDER_HISTORY,args:{data:e}})})},t.cancelOrder=function(e){i.cancelOrder(e,function(e){r.default.dispatch({type:l.default.OrderHistory.CANCEL_ORDER_HISTORY,args:e})},function(e){return r.default.dispatch({type:l.default.OrderHistory.ORDER_HISTORY_ERROR,args:e}),!0})},t.loadOrderDetails=function(t){i.loadOrderDetails(t,function(e){e.orderNumber=t,r.default.dispatch({type:l.default.OrderHistory.LOAD_ORDER_DETAILS,args:{data:e}})})};var r=n(a(16)),l=n(a(18)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(1606));function n(e){return e&&e.__esModule?e:{default:e}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(44),n=o(a(16)),l=o(a(18));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f="loadOrders",p="loadOrderDetails",m="cancelOrderHistory",h="orderHistoryError",y=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this)))._orderGroups=null,e}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.EventEmitter),a=t,(n=[{key:"addOrdersLoadedListener",value:function(e){this.addListener(f,e)}},{key:"removeOrdersLoadedListener",value:function(e){this.removeListener(f,e)}},{key:"addOrderDetailsLoadedListener",value:function(e,t){this.addListener(p+e,t)}},{key:"removeOrderDetailsLoadedListener",value:function(e,t){this.removeListener(p+e,t)}},{key:"addCancelOrderDetailsLoadedListener",value:function(e){this.addListener(m,e)}},{key:"removeCancelOrderDetailsLoadedListener",value:function(e){this.removeListener(m,e)}},{key:"addOrderDetailsErrorLoadedListener",value:function(e){this.addListener(h,e)}},{key:"removeOrderDetailsErrorLoadedListener",value:function(e){this.removeListener(h,e)}},{key:"onChangeOrderHistory",value:function(e){this._totalCount=e.totalCount,this._orderGroups=e.orderGroups,this.emit(f)}},{key:"onCancelOrderHistory",value:function(e){this.emit(m)}},{key:"onOrderHistoryError",value:function(e){this.emit(h,e)}},{key:"onLoadOrderDetails",value:function(e){this.emit(p+e.data.orderNumber,e)}},{key:"handleActions",value:function(e){switch(e.type){case l.default.OrderHistory.LOAD_ORDER_DETAILS:this.onLoadOrderDetails(e.args);break;case l.default.OrderHistory.LOAD_ORDER_HISTORY:this.onChangeOrderHistory(e.args.data);break;case l.default.OrderHistory.CANCEL_ORDER_HISTORY:this.onCancelOrderHistory(e.args);break;case l.default.OrderHistory.ORDER_HISTORY_ERROR:this.onOrderHistoryError(e.args)}}},{key:"orderGroups",get:function(){return this._orderGroups}},{key:"totalCount",get:function(){return this._totalCount}}])&&s(a.prototype,n),o&&s(a,o),t}());y.dispatchToken=n.default.register(y.handleActions.bind(y));var b=y;t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(14)),i=n(a(8));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?f(a):n).state={loaded:!1},t.onProjectConstantsLoaded=t.onProjectConstantsLoaded.bind(f(f(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadProjectConstants()}},{key:"componentWillMount",value:function(){i.default.addProjectConstantsLoadedListener(this.onProjectConstantsLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeProjectConstantsLoadedListener(this.onProjectConstantsLoaded)}},{key:"onProjectConstantsLoaded",value:function(){var e=this;setTimeout(function(){e.setState({loaded:!0})},0)}},{key:"render",value:function(){return r.default.createElement("div",null,this.state.loaded&&r.default.createElement("div",null,this.props.children))}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var g=l(a(0)),v=a(7),E=a(2),S=l(a(1)),i=a(24),k=l(a(4)),P=n(a(33)),o=n(a(208)),r=l(a(52)),s=n(a(100)),w=l(a(1624)),O=n(a(11)),C=n(a(17)),N=l(a(646)),u=n(a(10)),c=n(a(25)),_=n(a(174)),T=l(a(388)),d=n(a(14)),f=n(a(86)),p=n(a(83)),m=l(a(8)),h=l(a(546));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var L={EBOOK:"eBOOK",SPB:"PRINT",POD:"PERSONAL"},A=function(e){function l(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a=this,t=!(n=D(l).call(this,e))||"object"!==y(n)&&"function"!=typeof n?M(a):n;var o=e.project,r=e.projects;return t.state={progressProperties:t.buildProgress(r?r[0]:o),isOrdering:!1,processingSaleStatus:!1,menuClosed:!0,selectedProject:0},t.onCouponLink=t.onCouponLink.bind(M(M(t))),t.onNewProjectClicked=t.onNewProjectClicked.bind(M(M(t))),t.onProjectAddedToCart=t.onProjectAddedToCart.bind(M(M(t))),t.onToggleMenu=t.onToggleMenu.bind(M(M(t))),t.renderCoupons=t.renderCoupons.bind(M(M(t))),t.showDeleteBookModal=t.showDeleteBookModal.bind(M(M(t))),t.showSearchDeleteBookModal=t.showSearchDeleteBookModal.bind(M(M(t))),t.showRecoverModal=t.showRecoverModal.bind(M(M(t))),t.showOrderCopyModal=t.showOrderCopyModal.bind(M(M(t))),t.showSaleModal=t.showSaleModal.bind(M(M(t))),t._selectedProject=t._selectedProject.bind(M(M(t))),t.makeClick=t.makeClick.bind(M(M(t))),t.debouncedAddOrderToCart=(0,i.debounce)(500,!0,t.showOrderCopyModal),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(l,g.default.Component),t=l,(a=[{key:"componentWillReceiveProps",value:function(e){if(this.props!==e){var t=e.projects?e.projects[this.state.selectedProject||0]:e.project;this.setState({progressProperties:this.buildProgress(t),processingSaleStatus:!1})}}},{key:"componentWillMount",value:function(){var t=this;this.props.isSeries?this.props.projects.forEach(function(e){r.default.addProjectAddedListener(e.id,t.onProjectAddedToCart)}):r.default.addProjectAddedListener(this.props.project.id,this.onProjectAddedToCart)}},{key:"componentWillUnmount",value:function(){var t=this;this.props.isSeries?this.props.projects.forEach(function(e){r.default.removeProjectAddedListener(e.id,t.onProjectAddedToCart)}):r.default.removeProjectAddedListener(this.props.project.id,this.onProjectAddedToCart)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onNewProjectClicked",value:function(){d.startNewProject();var e=this._selectedProject(),t=m.default.project();t.isGroupConfirmed=!0,t.grouped=!0,t.groupProjectId=e.id,t.preOrder=e.preOrder,t.title=e.title;var a={eventInfo:{eventName:"Start Different Version Click",eventAction:"startDifferentVersionClick",timeStamp:new Date},category:{primaryCategory:"My Projects"}};c.omnitureActionInvoked(a,"onStartDifferentVersionClick"),this.setState({clickTriggered:!0},function(){return d.updateProject(t,!1)})}},{key:"showSaleModal",value:function(){var n=this,o=this._selectedProject(),e=k.default.getUser(),t=o.projectCoupons;o.allowedToTakeOffSale?t&&0<t.length?u.showTakeOffSaleWithCouponModal(o.id,e,function(e,t){if(e){n.setState({processingSaleStatus:!0});var a={eventInfo:{eventName:"Take off Sale Click",eventAction:"takeOffSaleClick",timeStamp:new Date},category:{primaryCategory:"My Projects"}};c.omnitureActionInvoked(a,"onTakeOffSaleClick")}}):u.showTakeOffSaleModal(o.type,e,function(e,t){if(e){n.setState({processingSaleStatus:!0}),f.setSaleStatus(o.id,!1);var a={eventInfo:{eventName:"Take off Sale Click",eventAction:"takeOffSaleClick",timeStamp:new Date},category:{primaryCategory:"My Projects"}};c.omnitureActionInvoked(a,"onTakeOffSaleClick")}}):o.allowedToPutOnSale&&u.showPutOnSaleModal(function(e,t){if(e){n.setState({processingSaleStatus:!0}),f.setSaleStatus(o.id,!0);var a={eventInfo:{eventName:"Put on Sale Click",eventAction:"putOnSaleClick",timeStamp:new Date},category:{primaryCategory:"My Projects"}};c.omnitureActionInvoked(a,"onPutOnSaleClick")}})}},{key:"showOrderCopyModal",value:function(){var a=this,n=this._selectedProject(),e=k.default.getUser();n.allowedToOrder?(f.addProjectToCart(n.id),this.setState({isOrdering:!0})):u.showOrderCopyModal(function(e,t){e&&E.browserHistory.push(_.getSummaryUrl(n.id))}),e&&e.authorShareKey&&!k.default.hasContributorPageAccessPermission(O.ORDER_COPIES)&&setTimeout(function(){u.showOrderCopyCompleteBookModalNoAccess(n.title,null!==n.coverFormat?n.coverFormatByKey.label:"",null!==n.pageSize?n.pageSizeByKey.label:"",n.coverThumbnail,function(e,t){e?E.browserHistory.push("/"+o.Base):a.setState({isOrdering:!1})})},0)}},{key:"showDeleteBookModal",value:function(){var e,t="Delete",a=!0,n=this._selectedProject();n.allowedToDelete?e=C.hasFeatureFlag(O.UNARCHIVE)?'<p>Confirm that you want to delete this book.</p><p>&nbsp;</p> <p>You can view your recently deleted books by selecting "Recently Deleted" from the "Filter by Project Status" dropdown menu.</p> <p>&nbsp;</p><p>You will not be able to recover any lost assets after 30 days.</p>':"By confirming that you want to delete this project, all of your book information will be deleted entirely, and the book will not appear any longer in your Projects. You will not be able to recover any lost assets.":(a=!1,n.isPOD?e=g.default.createElement("div",null,g.default.createElement("span",null,"You're currently unable to delete this book due to one or more of the following reasons:"),g.default.createElement("ul",null,g.default.createElement("li",null,"Your book is under review"),g.default.createElement("li",null,"A copy of this title is in your cart or has been ordered"))):n.isSPB?e=g.default.createElement("div",null,g.default.createElement("span",null,"You're currently unable to delete this book due to one or more of the following reasons:"),g.default.createElement("ul",null,g.default.createElement("li",null,"Your book is under review"),g.default.createElement("li",null,"A copy of this title is in your cart or has been ordered"),g.default.createElement("li",null,"Your book is being processed for sale"),k.default.hasPermissions(O.CORRECTIONS)&&g.default.createElement("li",null,"Your book is being processed for correction"),g.default.createElement("li",null,"Your book is on sale and must first be taken off sale"))):n.isEBook&&(e=g.default.createElement("div",null,g.default.createElement("span",null,"You're currently unable to delete this book due to one or more of the following reasons:"),g.default.createElement("ul",null,g.default.createElement("li",null,"Your book is being processed for sale"),g.default.createElement("li",null,"Your book is on sale and must first be taken off sale")))),t="OK"),a?u.showConfirmationModal("Delete Book",e,t,"Cancel",function(e,t){e&&n.allowedToDelete&&d.deleteProject(n)}):u.showNotificationModal(e,"Delete Book");var o={eventInfo:{eventName:"Book Delete Click",eventAction:"bookDeleteClick",timeStamp:new Date},category:{primaryCategory:"My Projects"}};c.omnitureActionInvoked(o,"onBookDeleteClick")}},{key:"showSearchDeleteBookModal",value:function(){var a=this._selectedProject();u.showConfirmationModal("Delete Book","This book will be deleted. This action cannot be undone.","Delete","Cancel",function(e,t){e&&d.deleteSearchProject(a,"ARCHIVE")})}},{key:"showRecoverModal",value:function(){var a=this._selectedProject();u.showConfirmationModal("Recover Book","Confirm that you want to recover this book. You can view your recovered book in Projects.","Recover","Cancel",function(e,t){e&&d.deleteSearchProject(a,"UNARCHIVE")})}},{key:"onToggleMenu",value:function(){this.setState({menuClosed:!this.state.menuClosed})}},{key:"onProjectAddedToCart",value:function(){var a=this,e=this._selectedProject();setTimeout(function(){u.showOrderCopyCompleteBookModal(e.title,null!==e.coverFormat?e.coverFormatByKey.label:"",null!==e.pageSize?e.pageSizeByKey.label:"",e.coverThumbnail,function(e,t){e?E.browserHistory.push("/"+o.Base):a.setState({isOrdering:!1})})},0)}},{key:"buildProgress",value:function(e){var t={status:null,stepCount:4,stepOne:{active:!1,complete:!1,error:!1,check:!1,title:null},stepTwo:{active:!1,complete:!1,error:!1,check:!1,title:null},stepThree:{active:!1,complete:!1,error:!1,check:!1,title:null},stepFour:{active:!1,complete:!1,error:!1,check:!1,title:null}},a=e.status;return"NEW"===a||"ORDERED"===a?(t.status="IN PROGRESS",t.stepOne.active=!0):"PROCESSING_DROPSHIP"===a?(t.status="IN REVIEW",t.stepOne.complete=!0,t.stepTwo.active=!0):"DROPSHIP_READY"===a&&e.isSPB?(t.status="READY TO ORDER",t.stepOne.complete=!0,t.stepTwo.complete=!0,t.stepThree.active=!0):"DROPSHIP_READY"===a&&e.isPOD?(t.status="READY TO ORDER",t.stepOne.complete=!0,t.stepTwo.complete=!0,t.stepThree.complete=!0,t.stepFour.active=!0,t.stepFour.check=!0):"ERROR"===a?(t.status="NEEDS ATTENTION",t.stepOne.error=!0,t.error=!0):"PROCESSING_ONSALE"===a||"LSI_ONSALE"===a?(t.status="PUBLISHING",t.stepOne.complete=!0,t.stepTwo.complete=!0,t.stepThree.active=!0):"ONSALE"===a?(t.status=e.preOrder?"ON PRE-ORDER":"ON SALE",t.stepOne.complete=!0,t.stepTwo.complete=!0,t.stepThree.complete=!0,t.stepFour.active=!0,t.stepFour.check=!0):"EDITING"===a?(t.status="EDITING",t.stepOne.active=!0):"PROCESSING_OFFSALE"===a?(t.status="TAKING OFF SALE",t.stepOne.complete=!0,t.stepTwo.complete=!0,t.stepThree.active=!0):"OFFSALE"===a?t.status="OFF SALE":"CORRECTING"===a?(t.status="CORRECTING",t.stepOne.complete=!0,t.stepTwo.complete=!0,t.stepThree.active=!0):"ARCHIVED"===a&&(t.status="DELETED"),t}},{key:"onCouponLink",value:function(e,t){"VIEW"===e?this.props.isSearchResult?window.location.assign(p.Coupon+"/"+p.Summary):window.location.assign(p.Base+"/"+p.Coupon+"/"+p.Summary):"EDIT"===e&&(this.props.isSearchResult?window.location.assign(p.Coupon+"?id="+t):window.location.assign(p.Base+"/"+p.Coupon+"?id="+t))}},{key:"projectWithHighlightedSearchTerm",value:function(e,t){if(!e||0===e.length||!t)return t;var a=JSON.parse(JSON.stringify(t)),n=new RegExp(e,"ig");return t.title&&(a.title=g.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.title.replace(n,function(e){return'<span class="highlighted">'+e+"</span>"})}})),t.isbn&&(a.isbn=g.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.isbn.replace(n,function(e){return'<span class="highlighted">'+e+"</span>"})}})),t.author&&(a.author=g.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.author.replace(n,function(e){return'<span class="highlighted">'+e+"</span>"})}})),a}},{key:"_selectedProject",value:function(){return this.props.project||this.props.projects[this.state.selectedProject||0]}},{key:"renderCoupons",value:function(r){var l=this,i=[];if(2<r.length)return g.default.createElement(h.default,{key:"more-than-2-promos",status:"MULTI-PROMOTIONS",centerContent:"".concat(r.length," promotions applied."),rightContent:g.default.createElement("a",{onClick:function(){return l.onCouponLink("VIEW")}},"VIEW")});if(0<r.length&&r.length<=2){for(var e=function(e){var t=r[e];if(!t)return"break";var a=null,n="".concat((0,v.bn_moment)(t.startDate,"MM/DD/YYYY").format("MM/DD/YY")," - ").concat((0,v.bn_moment)(t.endDate,"MM/DD/YYYY").format("MM/DD/YY")),o=null;a="ACTIVE"===t.status?g.default.createElement("a",{onClick:function(){return l.onCouponLink("VIEW")}},"VIEW"):"ACTIVE"!==t.status&&(0,v.bn_moment)().isBefore((0,v.bn_moment)(t.lastDateToEdit,"MM/DD/YYYY"),"day")?g.default.createElement("a",{onClick:function(){return l.onCouponLink("EDIT",t.id)}},"EDIT"):g.default.createElement("a",{onClick:function(){return l.onCouponLink("VIEW")}},"VIEW"),o=t.promoType===s.PROMO_TYPE.BOGO||t.promoType===s.PROMO_TYPE.BOGO_FREE?100!=+t.discountPercentage&&t.discountPercentage?"".concat(s.PROMO_LABEL.BOGO," ").concat(+t.discountPercentage,"% OFF"):"".concat(s.PROMO_LABEL.BOGO," FREE"):+t.discountPercentage+"% OFF",i.push(g.default.createElement(h.default,{key:t.id,status:t.status,leftContent:o,centerContent:n,rightContent:a}))},t=0;t<2;t++){if("break"===e(t))break}return i}return null}},{key:"onNavigate",value:function(e){E.browserHistory.push(e)}},{key:"renderFormats",value:function(){var n=this;return g.default.createElement("ul",{className:"list-inline formats"},this.props.projects.map(function(e,t){var a=e.isEBook?"eBook":e.coverFormatByKey.label.replace(/w\/ Dust Jacket/,"DJ").replace(/w\/ Printed Case/,"PC")+" "+e.pageSizeByKey.label.replace(/\"/g,"").replace(/\s/g,"");return g.default.createElement("li",{key:t},n.state.selectedProject===t?a:g.default.createElement("a",{onClick:function(){return n.setState({selectedProject:t,progressProperties:n.buildProgress(n.props.projects[t])})}},a))}))}},{key:"render",value:function(){var e,t,a,n=this,o=this.props,r=o.isSearchResult,l=o.isSeries,i=this._selectedProject(),s=this.projectWithHighlightedSearchTerm(this.props.query,i),u=_.getSummaryUrl(i.id),c=null,d=new Date,f=new Date(i.lastUpdated),p=Math.abs(f-d),m=31-Math.ceil(p/864e5),h=!1;if(i.cover=i.coverThumbnail,!i.isSPB&&!i.isPOD||i.getBookSizeAndTypeStatus(!0)||(u="/"+P.Base+"/"+i.id+"/"+P.SizeAndType),"ARCHIVED"==i.status&&(h=m<=7),i.everOnSale&&(c=_.getCustomDateSalesReportPath(!0,i.isbn)),i.preOrder){var y=k.default.getUser(),b=y.approvalDate?y.approvalDate.format("MM-DD-YYYY"):null;c=_.getPreOrderReportPath(i.title,b,i.isbn)}return e=g.default.createElement("div",{className:(0,S.default)("glyphicon glyphicon-option-horizontal",{"project-list-menu":!r}),tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onToggleMenu},g.default.createElement("div",{className:(0,S.default)("dropdown",{open:!this.state.menuClosed})},g.default.createElement("ul",null,"ARCHIVED"!=i.status&&g.default.createElement("li",null,g.default.createElement(w.default,{text:"View Book Details",project:i,readOnly:!0})),!i.isPOD&&"ARCHIVED"!=i.status&&g.default.createElement("li",null,g.default.createElement(E.Link,{tabIndex:"0",onKeyDown:this.makeClick,to:i.everOnSale?c:null,className:(0,S.default)({disabled:!i.everOnSale})},"View Title Sales")),i.isSPB&&"ARCHIVED"!=i.status&&g.default.createElement("li",null,g.default.createElement("a",{tabIndex:"0",onKeyDown:this.makeClick,className:(0,S.default)({disabled:this.state.isOrdering||!i.allowedToOrder}),onClick:this.state.isOrdering||!i.allowedToOrder?null:this.showOrderCopyModal},"Order Copy")),"ARCHIVED"!=i.status&&g.default.createElement("li",null,g.default.createElement(w.default,{text:"Edit Book",project:i})),C.hasFeatureFlag(O.TOP_NAV)&&i.coverThumbnail&&g.default.createElement("li",null,g.default.createElement("a",{tabIndex:"0",onKeyDown:this.makeClick,onClick:function(){localStorage.setItem("cover_object",JSON.stringify(i)),document.body.scrollTop=document.documentElement.scrollTop=0,n.onNavigate("/projects/promote-book/design?pid="+i.id)}},"Design Banners")),"ARCHIVED"!=i.status&&g.default.createElement("li",null,g.default.createElement("a",{tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onNewProjectClicked},"+ New Version")),!i.isPOD&&"ARCHIVED"!=i.status&&g.default.createElement("li",null,g.default.createElement("a",{tabIndex:"0",onKeyDown:this.makeClick,className:(0,S.default)({disabled:null===i.productPageUrl}),href:null!==i.productPageUrl?i.productPageUrl:null,target:"_blank"},"BN.com")),"ARCHIVED"!=i.status&&g.default.createElement("li",null,g.default.createElement("a",{className:"project-delete-link",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.showDeleteBookModal},"Delete Book")),"ARCHIVED"==i.status&&g.default.createElement("li",null,g.default.createElement("a",{className:"project-delete-link",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.showSearchDeleteBookModal},"Delete Book")))),g.default.createElement("div",{className:(0,S.default)("dropdown-overlay",{active:!this.state.menuClosed}),onClick:this.onToggleMenu})),t=g.default.createElement("div",{className:"sale-button-container"},this.state.processingSaleStatus&&g.default.createElement("img",{className:"busy-spinner",src:"img/spinner.gif",alt:"spinner"}),!this.state.processingSaleStatus&&!i.isPOD&&(i.allowedToPutOnSale||"PROCESSING_ONSALE"===i.status||"LSI_ONSALE"===i.status)&&g.default.createElement("button",{className:"sale-button",disabled:"PROCESSING_ONSALE"===i.status||"LSI_ONSALE"===i.status,onClick:this.showSaleModal},"Put On Sale"),!this.state.processingSaleStatus&&!i.isPOD&&(i.allowedToTakeOffSale||"PROCESSING_OFFSALE"===i.status)&&g.default.createElement("button",{className:"sale-button",disabled:"PROCESSING_OFFSALE"===i.status,onClick:this.showSaleModal},"Take Off Sale"),i.isPOD&&i.allowedToOrder&&g.default.createElement("button",{className:"sale-button",onClick:this.debouncedAddOrderToCart,disabled:this.state.isOrdering},"Buy"),"ARCHIVED"==i.status&&g.default.createElement("div",null,g.default.createElement("div",{className:(0,S.default)("recently-deleted-days",{"color-red":h}),onClick:this.showRecoverModal},m," days left"),g.default.createElement("button",{className:"sale-button",onClick:this.showRecoverModal},"Recover"))),a=g.default.createElement("div",{className:(0,S.default)("project-status-container",{"needs-attention":this.state.progressProperties.error})},"ARCHIVED"!=i.status&&g.default.createElement(E.Link,{to:u},g.default.createElement(T.default,{progressProperties:this.state.progressProperties}),g.default.createElement("div",{className:"project-status"},g.default.createElement("p",null,this.state.progressProperties.status))),"ARCHIVED"==i.status&&g.default.createElement("div",null,g.default.createElement(T.default,{progressProperties:this.state.progressProperties}),g.default.createElement("div",{className:"project-status"},g.default.createElement("p",null,this.state.progressProperties.status)))),g.default.createElement("div",{className:(0,S.default)({result:r,series:l,project:!r})},g.default.createElement("div",{className:"top clearfix"},g.default.createElement("div",{className:"left-content"},!l&&g.default.createElement("div",{className:"type "+i.type.toLowerCase()},g.default.createElement("p",null,L[i.type])),g.default.createElement("div",{className:"cover-image"},i.coverThumbnail&&g.default.createElement(E.Link,{to:u,title:"cover image loader"},g.default.createElement(N.default,{icon:i.coverThumbnail,interval:"4500"})),!i.coverThumbnail&&g.default.createElement(E.Link,{to:u,title:"cover image"},g.default.createElement("img",{src:"img/projects/cover-default.png",width:"100%",alt:"cover image",className:"img-responsive"}))),this.props.seriesNumber&&g.default.createElement("div",{className:"number-in-series"},g.default.createElement("h2",null,"#",this.props.seriesNumber))),g.default.createElement("div",{className:"right-content"},r&&g.default.createElement("div",{className:"details"},l&&this.renderFormats(),g.default.createElement("h2",{className:"project-title"},s.title),i.author&&g.default.createElement("p",{className:"author"},"By ",s.author),!i.isEBook&&!l&&g.default.createElement("ul",{className:"list-inline"},i.coverFormat&&g.default.createElement("li",null,i.coverFormatByKey.label),i.pageSize&&g.default.createElement("li",null,i.pageSizeByKey.label),g.default.createElement("li",null,i.pageCount," pages")),g.default.createElement("ul",{className:(0,S.default)({"list-inline":!l,"list-unstyled":l})},g.default.createElement("li",null,"List Price: $",i.price?i.price:"--"),!i.isPOD&&"ONSALE"===i.status&&g.default.createElement("li",null,"On Sale: ",i.onSaleDate?(0,v.bn_moment)(i.onSaleDate).format("MMM D, YYYY"):"Pending")),i.isbn&&g.default.createElement("span",{className:"item"},i.isEbook?"EAN":"ISBN",": ",s.isbn,i.isbnTransferred?" (Transferred)":"")),!r&&g.default.createElement("div",{className:"details"},!r&&a,!i.isPOD&&g.default.createElement("div",{className:"margin-bottom"},g.default.createElement("dl",null,g.default.createElement("dt",null,i.isEBook?"EAN":"ISBN"),g.default.createElement("dd",null,s.isbn||"Pending"," ",i.isbnTransferred?" (Transferred)":""))),!i.isEBook&&g.default.createElement("span",{className:"item"},g.default.createElement("dl",null,g.default.createElement("dt",null,"Format"),g.default.createElement("dd",null,null!==i.coverFormat?i.coverFormatByKey.label:"Pending"),g.default.createElement("dt",null,"Size"),g.default.createElement("dd",null,null!==i.pageSize?i.pageSizeByKey.label:"Pending"),g.default.createElement("dt",null,"Page Count"),g.default.createElement("dd",null,i.pageCount))))),g.default.createElement("div",{className:"right-actions"},r&&a,e)),i.isEBook&&i.projectCoupons&&g.default.createElement("div",{className:"status-row"},this.renderCoupons(i.projectCoupons)),g.default.createElement("div",{className:"result-bottom"},r&&t),g.default.createElement("div",{className:"bottom"},g.default.createElement("div",{className:"price"},g.default.createElement("p",null,g.default.createElement("span",{className:"extra item"},"ListÂ "),"Price: ",g.default.createElement("strong",null,"$",i.price?i.price:"--"))),!i.isPOD&&("ONSALE"===i.status||"PROCESSING_ONSALE"===i.status||"LSI_ONSALE"===i.status)&&g.default.createElement("div",{className:"sale-status"},g.default.createElement("p",null,"On Sale: ",g.default.createElement("strong",null,i.onSaleDate&&"ONSALE"===i.status?(0,v.bn_moment)(i.onSaleDate).format("MMM D, YYYY"):"Pending"))),t))}}])&&b(t.prototype,a),n&&b(t,n),l}();t.default=A},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={interval:t.props.interval||5e3,loader:t.props.loader||"img/spinner.gif",spinner:!1,loaded:!1},t.onImageError=t.onImageError.bind(d(d(t))),t.onImageLoad=t.onImageLoad.bind(d(d(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){e.icon!==this.props.icon&&this.refs.imageLoader&&(this.refs.imageLoader.src=e.icon)}},{key:"componentDidMount",value:function(){this.refs.imageLoader.src=this.props.icon}},{key:"onImageLoad",value:function(){this.state.spinner||this.setState({loaded:!0})}},{key:"onImageError",value:function(){var t=this;this.setState({spinner:!0},function(){var e=t.refs.imageLoader;e.src=t.state.loader,setTimeout(function(){e.src=t.props.icon,t.setState({spinner:!1})},t.state.interval)})}},{key:"render",value:function(){return r.default.createElement("div",{className:"image-loader"},r.default.createElement("img",{className:(0,l.default)("img-responsive",{"image-loading":!this.state.loaded}),src:!0,ref:"imageLoader",alt:"Loader",onError:this.onImageError,onLoad:this.onImageLoad}),!this.state.loaded&&this.props.text&&r.default.createElement("p",null,this.props.text))}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),c=a(2),l=o(a(46)),i=o(a(1625)),s=o(a(1626)),u=o(a(1627)),d=n(a(84)),f=n(a(83)),p=n(a(60));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n).checkSearchParameters=t.checkSearchParameters.bind(g(g(t))),t.onFilterSearchSortSubmit=t.onFilterSearchSortSubmit.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,r.default.Component),t=o,(a=[{key:"checkSearchParameters",value:function(e,t,a,n){var o=void 0===this.props.query?"":this.props.query,r=this.props.sortOption,l=this.props.statusOption,i=this.props.filterOption,s="/"+f.Base,u=!1;return""===e?t!==r||a!==l||n!==i?"ALL"===a&&"ALL"===n&&"newest"===t?c.browserHistory.push(s):u=!0:"ALL"!==a||"ALL"!==n||"newest"!==t?u=!0:e!==o&&"newest"===t&&"ALL"===a&&"ALL"===n&&c.browserHistory.push(s):u=!0,u}},{key:"onFilterSearchSortSubmit",value:function(){var e=[],t=this.refs.projectSearch.getValue(),a=this.refs.projectSort.getValue(),n=this.props.isSeriesLayout?this.props.statusOption:this.refs.statusFilter.getValue(),o=this.props.isSeriesLayout?this.props.filterOption:this.refs.projectFilter.getValue(),r=this.checkSearchParameters(t,a,n,o),l="/"+f.Base+"/"+(this.props.isSeriesLayout?f.Series:f.Search)+"?";a!==d.SORT_PARAMS.default&&e.push("sort="+a),this.props.isSeriesLayout||(e.push("type="+o),e.push("status="+n),p.loadProjectSearches(o)),t&&0<t.length&&e.push("q="+encodeURIComponent(t));var i=l+e.join("&");r&&c.browserHistory.push(i)}},{key:"render",value:function(){return r.default.createElement("div",{className:"project-sort-options"},r.default.createElement(l.default,{ref:"projectSearch",initValue:this.props.query,onSubmit:this.onFilterSearchSortSubmit,disableValidationMessages:!0,filterOption:this.props.filterOption}),!this.props.isSeriesLayout&&r.default.createElement(s.default,{ref:"projectFilter",initValue:this.props.filterOption,onChange:this.onFilterSearchSortSubmit}),!this.props.isSeriesLayout&&r.default.createElement(u.default,{ref:"statusFilter",initValue:this.props.statusOption,onChange:this.onFilterSearchSortSubmit}),r.default.createElement(i.default,{ref:"projectSort",isSeriesLayout:this.props.isSeriesLayout,initValue:this.props.sortOption,onChange:this.props.onSortChange||this.onFilterSearchSortSubmit}))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),r=n(a(1)),i=a(24),s=a(7),u=n(a(76)),c=n(a(6)),d=n(a(23)),f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(57));function n(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={maxEndDate:(0,s.bn_moment)().subtract(2,"days"),maxStartDate:null},t.periodOptions=e.periodTypes&&2<e.periodTypes.length?e.periodTypes.map(function(e){return{label:e.text,value:e.type}}):[],t.seriesNameOptions=e.seriesNames&&e.seriesNames.length?e.seriesNames.map(function(e){return{label:e,value:e}}):[],t.updatingDate=!1,t.getHeaderStyles=t.getHeaderStyles.bind(b(b(t))),t.onBookTypeChange=t.onBookTypeChange.bind(b(b(t))),t.onPeriodChange=t.onPeriodChange.bind(b(b(t))),t.onDebounceBookTypeChange=(0,i.debounce)(700,!0,t.onDebounceBookTypeChange.bind(b(b(t)))),t.onDebouncePeriodChange=(0,i.debounce)(700,!0,t.onDebouncePeriodChange.bind(b(b(t)))),t.onDebounceDateChange=(0,i.debounce)(700,!0,t.onDebounceDateChange.bind(b(b(t)))),t.onDebounceSeriesChange=(0,i.debounce)(700,!0,t.onDebounceSeriesChange.bind(b(b(t)))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,l.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){e.period!==this.props.period&&e.showDates&&this.refs.startDate&&this._setDatesByPeriod(e.period),e.seriesNames!==this.props.seriesNames&&(this.seriesNameOptions=e.seriesNames&&e.seriesNames.length?e.seriesNames.map(function(e){return{label:e,value:e}}):[])}},{key:"componentDidMount",value:function(){this._setDatesByPeriod(f.PERIOD_TYPES.WEEKLY)}},{key:"getHeaderStyles",value:function(e,t,a,n){return(0,r.default)(e,{"active-selection":t===a},{disabled:!n})}},{key:"onBookTypeChange",value:function(e){this.onDebounceBookTypeChange(e)}},{key:"onDebounceBookTypeChange",value:function(e){e!==this.props.bookType&&this.props.onFilterChange&&this.props.onFilterChange({filterType:this.props.filterType,bookType:e,period:this.props.period,seriesName:this.props.seriesName,startDate:this.props.startDate,endDate:this.props.endDate})}},{key:"onDebounceDateChange",value:function(e,t){this.props.onFilterChange({filterType:this.props.filterType,bookType:this.props.bookType,period:this.props.period,seriesName:this.props.seriesName,startDate:e,endDate:t})}},{key:"onDebouncePeriodChange",value:function(e){e!==this.props.period&&this.props.onFilterChange&&this.props.onFilterChange({filterType:this.props.filterType,bookType:this.props.bookType,period:e,seriesName:this.props.seriesName,startDate:this.props.startDate,endDate:this.props.endDate})}},{key:"onDebounceSeriesChange",value:function(e){e!==this.props.seriesName&&this.props.onFilterChange&&this.props.onFilterChange({filterType:this.props.filterType,bookType:this.props.bookType,period:this.props.period,seriesName:e,startDate:this.props.startDate,endDate:this.props.endDate})}},{key:"onPeriodChange",value:function(e){this.onDebouncePeriodChange(e)}},{key:"onDateChange",value:function(e,t){if(this.updatingDate)this.updatingDate=!1;else{var a=this.props.period,n=null,o=null;this.updatingDate=!0,null!==e?((o=(n=e).clone().add(f.RANGE[a].value,f.RANGE[a].units).subtract(1,"day"))!==this.refs.endDate.value()&&this.refs.endDate.setValue(o),n!==this.refs.startDate.value()&&this.refs.startDate.setValue(n)):null!==t&&(n=(o=t).clone().subtract(f.RANGE[a].value,f.RANGE[a].units).add(1,"day"),a!==f.PERIOD_TYPES.QUARTERLY&&a!==f.PERIOD_TYPES.SEMI_ANNUALLY&&a!==f.PERIOD_TYPES.ANNUALLY||(n=n.clone().startOf("month")),o!==this.refs.endDate.value()&&this.refs.endDate.setValue(o),n!==this.refs.startDate.value()&&this.refs.startDate.setValue(n)),this.onDebounceDateChange((e||n).clone(),(t||o).clone())}}},{key:"onSeriesChange",value:function(e){this.onDebounceSeriesChange(e)}},{key:"_setDatesByPeriod",value:function(e){var t=this,a=f.RANGE[e],n=this.state.maxEndDate.clone(),o=n.clone().subtract(a.defaultStartDateFromMaxEndDate,a.units);this.setState({maxStartDate:o},function(){return t.refs.endDate&&t.refs.endDate.setValue(n)})}},{key:"render",value:function(){var t=this,e=this.state,a=e.maxStartDate,n=e.maxEndDate,o=f.FILTER_CHOOSER_TYPES,r=this.props.filterType;return l.default.createElement(c.default,{ref:"form"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"controls clearfix"},r!==o.PERIOD&&l.default.createElement("div",{className:"col-sm-10 col-xs-12"},l.default.createElement("ul",{className:"book-type"},this.props.bookTypes&&this.props.bookTypes.map(function(e){return l.default.createElement("li",{key:"bookType_"+e.type,className:t.getHeaderStyles(e.name,t.props.bookType,e.type,t.props.enabled),onClick:function(){return t.onBookTypeChange(e.type)}},e.text)}))),r!==o.BOOK_TYPE&&this.props.periodTypes&&this.props.periodTypes.length<=2&&l.default.createElement("div",{className:"col-sm-6 col-xs-12"},l.default.createElement("ul",{className:"period"},this.props.periodTypes&&this.props.periodTypes.map(function(e){return l.default.createElement("li",{key:"periodType_"+e.type,className:t.getHeaderStyles("",t.props.period,e.type,t.props.enabled)},l.default.createElement("a",{onClick:function(){return t.onPeriodChange(e.type)}},e.text))}))))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-4 col-xs-12"},this.props.seriesOptions&&l.default.createElement(d.default,{name:"seriesName",label:"Select a Series",onChange:function(e){return t.onSeriesChange(e.newValue)},options:this.seriesNameOptions,disableValidationMessages:!0})),l.default.createElement("div",{className:"col-sm-2 hidden-xs"}),r!==o.BOOK_TYPE&&this.props.periodTypes&&2<this.props.periodTypes.length&&l.default.createElement("div",{className:"col-sm-2 col-xs-12"},l.default.createElement(d.default,{name:"periodType",label:"Period",onChange:function(e){return t.onPeriodChange(e.newValue)},initValue:this.props.period,disableValidationMessages:!0,options:this.periodOptions})),this.props.showDates&&l.default.createElement("div",{className:"col-sm-2 col-xs-6 date-filter"},l.default.createElement(u.default,{name:"startDate",label:"Start Date",ref:"startDate",maxDate:a,onChange:function(e){return t.onDateChange(e.newValue,null)}})),this.props.showDates&&l.default.createElement("div",{className:"col-sm-2 col-xs-6 date-filter"},l.default.createElement(u.default,{name:"endDate",label:"End Date",ref:"endDate",maxDate:n,onChange:function(e){return t.onDateChange(null,e.newValue)}}))))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a(0)),r=n(a(13)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(100));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,c(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,s.default.Component),a=t,(n=[{key:"componentDidMount",value:function(){(0,r.default)('[data-toggle="popover"]').popover()}},{key:"render",value:function(){var e=this.props.coupon,t=null,a=null,n=!1,o="Coupon",r=!0,l="How are royalties calculated for promotions?";switch(e.promoType){case u.PROMO_TYPE.BOGO_FREE:o="BOGO 100% Off";break;case u.PROMO_TYPE.BOGO:o="BOGO ".concat(+e.discountPercentage,"% Off");break;case u.PROMO_TYPE.COUPON:o="Coupon Code",t=e.couponCode,a=+e.discountPercentage,n=!0;break;case"bn_coupon":o="",t=e.couponCode,r=n=!1,l="This was purchased using a BN.com promotion. Royalties are paid based on full list price rather than promotion price."}var i='<h3 style="font-family: Lato, sans-serif">'.concat(o,"</h3> ").concat(n?"<span>".concat(t,"<br/>").concat(a,"% Off<br/></span>"):"","\n\t<br/> ").concat(r?'<a href="https://help-press.barnesandnoble.com/hc/en-us/articles/5357559215131-Creating-Coupon-Codes-for-eBooks" target="_blank">'.concat(l,"</a>"):"<p>".concat(l,"</p>")," </div>");return s.default.createElement("a",{className:"coupon-link","data-toggle":"popover","data-container":"body","data-content":i,"data-html":"true","data-trigger":"focus","data-placement":"auto right",tabIndex:"0"},this.props.tagContent)}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=n(a(22)),$=a(7),Q=o(a(51)),i=o(a(148)),X=n(a(174)),s=o(a(13));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){c(t,e,a[e])})}return t}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?m(a):n).state={noDataMsgTp:!1,noFutureDataMsgTp:!1},t.yAxisLabelFormatter=function(e){return l.formatWithCommas(e.value.toString())},t.getInitialState=t.getInitialState.bind(m(m(t))),t.onBarItemClicked=t.onBarItemClicked.bind(m(m(t))),t.state=t.getInitialState(),t.clickCount=0,t.singleClickTimer="",t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var e=this,r=this;this.chart=i.default.chart(this.refs.chart,{chart:Z({type:"column",animation:!0,backgroundColor:null,events:{click:function(e){var t={date:this.series[0].searchPoint(e,!0).date,value:this.series[0].searchPoint(e,!0).y};r.props.categories.indexOf(this.series[0].searchPoint(e,!0).category);r.props.onBarItemClicked(t),r.props.isMobileView&&((0,s.default)(".tooltipClose").length?(0,s.default)(".tooltipClose").click(function(){r.chart.tooltip.hide()}):r.chart.tooltip.show())}}},this.state.options.chart),credits:{enabled:!1},legend:{enabled:!1},title:Z({},this.state.options.title),xAxis:{categories:this.state.options.categories,crosshair:!0,tickLength:0,title:{text:r.props.xAxisTitle?r.props.xAxisTitle:null},labels:{useHTML:!0,formatter:function(){var e=this.value;return r.props.bookGraph||r.props.formatXAxisLabel&&(e=r.props.formatXAxisLabel(this)),e}}},yAxis:{min:0,max:100,tickAmount:8,offset:8,allowDecimals:!1,title:{text:null},labels:{formatter:function(){return r.props.formatYAxisLabel?r.props.formatYAxisLabel(this):r.yAxisLabelFormatter(this)}},stackLabels:{style:{color:"black",fontSize:".9em",fontWeight:"bolder"},useHTML:!0,enabled:null!==this.props.stackable&&this.props.stackable,verticalAlign:"top",y:-20,formatter:function(){if(12<r.props.categories.length||window.innerWidth<768)return null;if(void 0===this.x||null===this.x)return this.x;if(r.props.applyColumnLabel){var e={seriesIndex:this.x};if(e.seriesIndex>=r.props.categories.length)return r.updateChart(r.props.categories,r.props.series,r.yAxisLabelFormatter);if(r.props.p_type&&"CustomDateRange"==r.props.p_type.name&&null==r.props.p_type.value)for(var t=0;t<r.props.series.length;t++){if(!r.props.series[t].data[this.x])return"";e[r.props.series[t].name]=r.props.series[t].data[this.x].y}else for(var a=0;a<r.props.series.length;a++)e[r.props.series[a].name]=r.props.series[a].data[this.x].y;return r.props.applyColumnLabel(this.x,e)}return"currency"===r.props.type&&r.props.format?r.props.format+l.formatWithCommas(this.total.toString()):l.formatWithCommas(this.total.toString())}}},tooltip:{enabled:this.props.toolTipEnable,shared:!0,useHTML:!0,valueDecimals:2,outside:!0,hideDelay:1e3,snap:0,followPointer:!!r.props.isMobileView,followTouchMove:!!r.props.isMobileView,formatter:function(){return this.points[0].point.title?""+this.points[0].point.title:""},style:{zIndex:99999999,pointerEvents:"auto"},positioner:function(e,t,a){var n=this.chart.plotBox.width,o=a.plotX,s=30;return a.plotX>e/2&&n-a.plotX>e?(o=a.plotX+10,s=25):n-a.plotX+20<e&&(o=a.plotX-e+65,s=e-35),setTimeout(function(){if(null!==document.getElementById("tooltip_caret")){var e="allow_left_"+(0,$.bn_moment)().unix(),t=document.createElement("style");t.type="text/css",t.innerHTML="."+e+"::after{ left : "+s+"px !important;}",document.getElementsByTagName("head")[0].appendChild(t);var a=document.getElementById("tooltip_caret").parentElement;a.className=e;var n=a.parentElement;n.className=n.className.replace(/\highcharts-tooltip-\b/g,""),200<s&&null!==document.getElementById("tooltip_caret").lastElementChild&&(document.getElementById("tooltip_caret").lastElementChild.style.right="-15px")}if(null!==document.getElementById("tooltip_caret_book")){var o="allow_left_book_"+(0,$.bn_moment)().unix(),r=document.createElement("style");r.type="text/css",r.innerHTML="."+o+"::after{ left : "+s+"px !important;} ."+o+"{ height:auto !important;min-height:105px;top:90px !important; } ",document.getElementsByTagName("head")[0].appendChild(r);var l=document.getElementById("tooltip_caret_book").parentElement;l.className=o,l.style.Height="auto";var i=l.parentElement;i.className=i.className.replace(/\highcharts-tooltip-\b/g,""),200<s&&(document.getElementById("tooltip_caret_book").lastElementChild.style.right="-15px")}}),{x:r.props.isMobileView?-7:o,y:r.props.isMobileView?0:-135}}},plotOptions:{column:{pointPadding:-.2,stacking:"normal",borderWidth:0,events:{click:function(){r.props.onBarItemClicked(e)}},maxPointWidth:this.props.maxPointWidth?this.props.maxPointWidth:null},series:{dataLabels:{enabled:null==this.props.stackable||!this.props.stackable,inside:!1,crop:!1,overflow:!1,allowOverlap:!!this.props.alwaysShowDesktopLabels,verticalAlign:"bottom",formatter:function(){if(12<r.props.categories.length||window.innerWidth<768)return null;if(void 0===this.y||null===this.y)return this.y;if(r.props.applyColumnLabel){for(var e={seriesIndex:this.series.index},t=0;t<r.props.series.length;t++)e[r.props.series[t].name]=r.props.series[t].data[this.point.index].y;return r.props.applyColumnLabel(this.point.index,e)}return"currency"===r.props.type&&r.props.format?r.props.format+l.formatWithCommas(this.y.toString()):l.formatWithCommas(this.y.toString())}},point:{events:{click:function(e){r.props.tooltipOnClick?this.series.chart.update({tooltip:{enabled:!this.series.chart.tooltip.options.enabled}}):r.onBarItemClicked(this)}}},seriesObjectValue:this.props.series}},responsive:{rules:[{condition:{minWidth:1100},yAxis:{stackLabels:{allowOverlap:!(!this.props.stackable||!this.props.alwaysShowDesktopLabels)}}}]},series:this.state.options.series})}},{key:"componentWillReceiveProps",value:function(e){this.props.series===e.series&&this.props.categories===e.categories&&this.props.isMobileView===e.isMobileView||(this.state=this.getInitialState(),this.updateChart(e.categories,e.series,this.yAxisLabelFormatter))}},{key:"getMaxChartValue",value:function(e){for(var t=0,a=0;a<e[0].data.length;a++){for(var n=0,o=0;o<e.length;o++)n+=void 0!==e[o].data[a].y?e[o].data[a].y:e[o].data[a];t<n&&(t=n)}return t}},{key:"onBarItemClicked",value:function(e){this.props.onBarItemClicked&&this.props.onBarItemClicked({date:e.date,value:e.y})}},{key:"getInitialState",value:function(){var e={options:{chart:{},title:{text:null}}};return this.props.title?e.options.title.text=this.props.title:e.options.chart.marginTop=30,this.props.subtitle&&(e.options.subtitle={text:this.props.subtitle}),e.options.categories=this.props.categories,e.options.series=this.props.series,e}},{key:"updateChart",value:function(t,Y,U){var V=this,W=this.chart;if(W){var a=W.xAxis[0],H=W.yAxis[0],n=W.series[0],e=H.getExtremes(),G=0,z=this.props.p_type,K=this.props.isFreeFilterEnabled,q=this.props.sortBy;if(Y&&0<Y.length)for(var o=0;o<Y[0].data.length;o++){for(var r=0,l=0;l<Y.length;l++)r+=void 0!==Y[l].data[o].y?Y[l].data[o].y:Y[l].data[o];G<r&&(G=r)}if(0===G)G=100;else{var i=Math.floor(100*Math.log(G)/Math.log(10)/100);this.props.isMobileView?G+=i<=1?5:2*Math.pow(10,i-1):G+=i<=1?30:2==i?2*Math.pow(10,i):2*Math.pow(10,i-.25)}for(var s=[],u=0;u<a.categories.length;u++)s.push(0);H.setExtremes(e.min,e.max,!1);for(var c=0;c<W.series.length;c++)W.series[c].setData(s,!1);W.redraw(),setTimeout(function(){s=[];for(var e=0;e<t.length;e++)s.push(0);a.setCategories(t,!1),n.setData(s,!1),W.redraw(),setTimeout(function(){V.yAxisLabelFormatter=U,H.setExtremes(0,G,!1);for(var e=0;e<Y.length;e++){var t=Z({},Y[e],{className:Y[e].name});if(e>=W.series.length)W.addSeries(t,!1,!0);else{if(Y[e].toolTipDataDetails&&0!==Y[e].toolTipDataDetails.length)for(var a=0;a<Y[e].data.length;a++){var n=Y[e].toolTipDataDetails[a],o=void 0,r=[],l=0,i=0,s=0,u=0,c=void 0,d=void 0,f=(0,$.bn_moment)(Y[e].data[a].date,"MM/DD/YYYY").format("MM-DD-YYYY"),p=void 0,m=void 0,h=void 0,y=void 0,b=void 0;if(V.props.format&&(b=V.props.format),f&&!V.props.bookGraph)"quarterly"==V.props.periodTypesCondition||"semiAnnually"==V.props.periodTypesCondition||"annually"==V.props.periodTypesCondition?(p=(0,$.bn_moment)(f,"MM-DD-YYYY").startOf("month").format("MM-DD-YYYY"),m=(0,$.bn_moment)(f,"MM-DD-YYYY").endOf("month").format("MM-DD-YYYY")):p=m=(0,$.bn_moment)(f,"MM-DD-YYYY").format("MM-DD-YYYY"),h=X.getCustomDateSalesReportPath(!0,V.props.seriesName,V.props.bookType,p,m,V.props.tabActive,!0);else if(f&&V.props.bookGraph){var g=V.props.getDateSpanSeries();p=g.fromDate,m=g.toDate,h=X.getCustomDateSalesReportPath(!0,V.props.seriesName,V.props.bookType,p,m,V.props.tabActive,!0,f)}y=V.props.isMobileView?'<div class="more_detail_mobile more_detail_commonStyle"><a class="link_color" href="'+h+'">More Details </a><span class="icon-close-modal tooltipClose"></span></div></div>':'<div class="more_detail_tooltip more_detail_commonStyle"><a class="link_color" href="javascript:void(0);">More Details</a></div></div>';var v=void 0;if(n&&0<n.length&&n.length<5&&V.props.isMobileView?(1==n.length&&(v='<div class="noTooltipData noData4"><span>-</span><span>-</span><span>-</span><span>-</span></div>'),2==n.length&&(v='<div class="noTooltipData noData3"><span>-</span><span>-</span><span>-</span></div>'),3==n.length&&(v='<div class="noTooltipData noData2"><span>-</span><span>-</span></div>'),4==n.length&&(v='<div class="noTooltipData noData1"><span>-</span></div>')):v="",n)for(var E=0;E<n.length;E++){var S=n[E].royalty,k=n[E].royalty.split(".");(1==k.length||k[1].length<3)&&(S=Number(S).toFixed(2));var P=void 0===S?0:S;l=Number(parseFloat(l)+parseFloat(P)).toFixed(2);var w=void 0===n[E].freeUnitsSold?0:n[E].freeUnitsSold,O=void 0===n[E].paidUnitsSold?0:n[E].paidUnitsSold;i=parseFloat(i)+parseFloat(w),s=parseFloat(s)+parseFloat(O),u=parseFloat(i)+parseFloat(s),o={seriesNbr:n[E].seriesNumber,title:n[E].title,royalty:P,freeUnitsSold:w,paidUnitsSold:O},r.push(o)}"royalty"==q?r.sort(function(e,t){return t.royalty-e.royalty}):r.sort(function(e,t){return t.paidUnitsSold-e.paidUnitsSold});var C=0,N=5;V.props.bookGraph&&(N=3);for(var _=0;_<r.length&&C<N;_++){var T=void 0;(0,$.bn_moment)((0,$.bn_moment)().subtract(2,"days")).format("MM-DD-YYYY");Q.default.bookPublicationDate&&(T=(0,$.bn_moment)(Q.default.bookPublicationDate,"MM/DD/YYYY").format("MM-DD-YYYY"));var D=(0,$.bn_moment)(Y[e].data[a].date,"MM/DD/YYYY").format("MM/DD/YYYY");if(T&&new Date(D).valueOf()<new Date(Q.default.bookPublicationDate).valueOf())if("quarterly"==z||"annually"==z||"semiAnnually"==z){var j=(0,$.bn_moment)(Q.default.bookPublicationDate,"MM/DD/YYYY").format("MMM");(0,$.bn_moment)(Y[e].data[a].date,"MM/DD/YYYY").format("MMM")===j?V.setState({noDataMsgTp:!1}):V.setState({noDataMsgTp:!0})}else V.setState({noDataMsgTp:!0});else new Date((0,$.bn_moment)().subtract(2,"days")).valueOf()<new Date(Y[e].data[a].date).valueOf()?V.setState({noFutureDataMsgTp:!0}):V.setState({noDataMsgTp:!1,noFutureDataMsgTp:!1});var M=r[_].title,L=void 0;if(20<M.length&&(M=M.substring(0,18)+"..."),L=V.props.isMobileView?(0,$.bn_moment)(Y[e].data[a].date,"MM/DD/YYYY").format("MMM D"):(0,$.bn_moment)(Y[e].data[a].date,"MM/DD/YYYY").format("MMM D, YYYY"),"quarterly"!=z&&"annually"!=z&&"semiAnnually"!=z||(L=(0,$.bn_moment)(Y[e].data[a].date,"MM/DD/YYYY").format("MMM, YYYY")),"totalRoyalty"===Y[e].name){var A=void 0;A=0<l?V.numberFormat(l):V.numberFormat(parseInt(l)),c=V.props.bookGraph?(d?d+=C%2==0?'<div class="gray-bg"><b>#'+r[_].seriesNbr+"</b> "+M+"</div>":'<div class="white-bg"><b>#'+r[_].seriesNbr+"</b> "+M+"</div>":d='<div class="gray-bg"><b>#'+r[_].seriesNbr+"</b> "+M+"</div>",V.props.isMobileView?'<div id="tooltip_caret_book" class="custom-tooltip"><div class="tp_header mrgBot">Royalty: <b>'+b+A+"</b>"+y+"</div>"+d+v:'<div id="tooltip_caret_book" class="custom-tooltip"><div class="tp_header mrgBot">Royalty: <b>'+b+A+"</b></div>"+d):(d?d+=C%2==0?'<div class="gray-bg"><span class="leftalign"><b>#'+r[_].seriesNbr+"</b> "+M+'</span> <span class="rightalign"> <span class="royalty"><b>'+b+V.numberFormat(r[_].royalty)+"</b></span></span></div>":'<div class="white-bg"><span class="leftalign"><b>#'+r[_].seriesNbr+"</b> "+M+'</span>  <span class="rightalign"> <span class="royalty"><b>'+b+V.numberFormat(r[_].royalty)+"</b><span></div>":d='<div class="gray-bg"><span class="leftalign"><b>#'+r[_].seriesNbr+"</b> "+M+'</span> <span class="rightalign"> <span class="royalty"><b>'+b+V.numberFormat(r[_].royalty)+"</b></span></div>",V.props.isMobileView?'<div id="tooltip_caret" class="custom-tooltip"><div class="tp_header mrgBot">Royalty '+L+": <b>"+b+A+"</b>"+y+"</div> "+d+v:'<div id="tooltip_caret" class="custom-tooltip"><div class="tp_header mrgBot">Royalty for '+L+": <b>"+b+A+"</b></div> "+d)}else if(V.props.bookGraph){var B="",x="mrgBot";K&&(x="",B='<div class="tp_unit mrgBot">Free: <b>'+V.numberFormat(i)+"</b> | Sold: <b>"+V.numberFormat(s)+"</b></div>"),d?d+=C%2==0?'<div class="gray-bg"><b>#'+r[_].seriesNbr+"</b> "+M+"</div>":'<div class="white-bg"><b>#'+r[_].seriesNbr+"</b> "+M+"</div>":d='<div class="gray-bg"><b>#'+r[_].seriesNbr+"</b> "+M+"</div>",c=V.props.isMobileView?'<div id="tooltip_caret_book" class="custom-tooltip"><div class="tp_header '+x+'">Units Sold: <b>'+V.numberFormat(u)+"</b>"+y+"</div> "+B+d+v:'<div id="tooltip_caret_book" class="custom-tooltip"><div class="tp_header '+x+'">Units Sold: <b>'+V.numberFormat(u)+"</b></div> "+B+d}else{var R="",I="",F="mrgBot";K&&(F="",R='<span class="text_left"> Free:</span> <span class="text_right"><b>'+V.numberFormat(r[_].freeUnitsSold)+"</b></span>",I='<div class="tp_unit mrgBot">Free: <b>'+V.numberFormat(i)+"</b> | Sold: <b>"+V.numberFormat(s)+"</b></div>"),d?d+=C%2==0?'<div class="gray-bg"><span class="leftalign"><b>#'+r[_].seriesNbr+"</b> "+M+'</span><span class="rightalign"><span class="freeUnit">'+R+'</span><span class="soldUnit"><span class="text_left"> Sold:</span> <span class="text_right"><b>'+V.numberFormat(r[_].paidUnitsSold)+"</b></span></span></span></div>":'<div class="white-bg"><span class="leftalign"><b>#'+r[_].seriesNbr+"</b> "+M+'</span><span class="rightalign"><span class="freeUnit">'+R+'</span><span class="soldUnit"><span class="text_left"> Sold:</span> <span class="text_right"><b>'+V.numberFormat(r[_].paidUnitsSold)+"</b></span></span></span></div>":d='<div class="gray-bg"><span class="leftalign"><b>#'+r[_].seriesNbr+"</b> "+M+'</span><span class="rightalign"><span class="freeUnit">'+R+'</span><span class="soldUnit"><span class="text_left"> Sold:</span> <span class="text_right"><b>'+V.numberFormat(r[_].paidUnitsSold)+"</b></span></span></span></div>",c=V.props.isMobileView?'<div id="tooltip_caret" class="custom-tooltip"><div class="tp_header '+F+'">Units Sold for '+L+": <b>"+V.numberFormat(u)+"</b>"+y+"</div>  "+I+d+v:'<div id="tooltip_caret" class="custom-tooltip"><div class="tp_header '+F+'">Units Sold for '+L+": <b>"+V.numberFormat(u)+"</b></div>  "+I+d}C++}V.props.bookGraph?V.state.noDataMsgTp?Y[e].data[a].title='<div id="tooltip_caret_book" class="tooltip_disable_dateFuture white-bg-date msg-center-book">No sales data is available for dates prior to publication.</div>':V.state.noFutureDataMsgTp?Y[e].data[a].title='<div id="tooltip_caret_book" class="tooltip_disable_dateFuture white-bg-date msg-center-book">No sales data is available for future dates.</div>':V.props.isMobileView?Y[e].data[a].title=c||"":Y[e].data[a].title=c?c+y:"":V.state.noDataMsgTp?Y[e].data[a].title='<div id="tooltip_caret" class="tooltip_disable_date white-bg-date msg-center">No sales data is available for dates prior to publication.</div>':V.state.noFutureDataMsgTp?Y[e].data[a].title='<div id="tooltip_caret" class="tooltip_disable_date white-bg-date msg-center">No sales data is available for future dates.</div>':V.props.isMobileView?Y[e].data[a].title=c||"":Y[e].data[a].title=c?c+y:""}W.series[e].update({className:Y[e].name}),W.series[e].setData(Y[e].data,!1)}}W.redraw()},50)},550)}}},{key:"numberDes",value:function(e,t){return t-e}},{key:"numberFormat",value:function(e){if(null==e||!e.toString().trim().length)return"";for(var t=e.toString().split("."),a=t[0],n=1<t.length?"."+t[1]:"",o=/(\d+)(\d{3})/;o.test(a);)a=a.replace(o,"$1,$2");return a+n}},{key:"render",value:function(){return r.default.createElement("div",{className:this.props.disabled?"disabled":""},r.default.createElement("div",{ref:"chart",className:"bar-chart"}))}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=h},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(1071)},function(e,t,a){"use strict";a(390);se(a(13)),se(a(458));var n,o=se(a(0)),r=se(a(43)),l=a(2),i=se(a(1072)),s=se(a(1073)),u=(ie(a(26)),ie(a(1079))),c=se(a(1092)),d=se(a(1104)),f=se(a(1108)),p=se(a(526)),m=se(a(1109)),h=se(a(1114)),y=se(a(1133)),b=se(a(1134)),g=se(a(1135)),v=se(a(1136)),E=ie(a(251)),S=ie(a(1137)),k=ie(a(11)),P=ie(a(1138)),w=se(a(1534)),O=ie(a(1535)),C=ie(a(1536)),N=se(a(1563)),_=se(a(1573)),T=ie(a(1602)),D=se(a(1603)),j=se(a(1604)),M=ie(a(108)),L=se(a(1610)),A=se(a(644)),B=se(a(1621)),x=se(a(1622)),R=se(a(1628)),I=se(a(1629)),F=se(a(1634)),Y=se(a(1635)),U=se(a(1636)),V=se(a(1654)),W=se(a(1682)),H=se(a(1683)),G=se(a(1684)),z=ie(a(1685)),K=se(a(1686)),q=se(a(1689)),$=se(a(1690)),Q=se(a(635)),X=se(a(637)),Z=se(a(636)),J=se(a(1692)),ee=se(a(1693)),te=se(a(596)),ae=se(a(1694)),ne=se(a(1695)),oe=se(a(1696)),re=se(a(1697)),le=se(a(1698));function ie(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function se(e){return e&&e.__esModule?e:{default:e}}document.addEventListener("DOMContentLoaded",function(e){n=document.getElementById("app"),r.default.render(o.default.createElement(l.Router,{routes:ue,history:l.browserHistory}),n)});var ue=o.default.createElement(l.Route,{path:"/",component:_.default},"// authentication routes",o.default.createElement(l.Route,{component:u.Authentication,authentication:"login"},o.default.createElement(l.Route,{component:N.default},o.default.createElement(l.Route,{path:M.AuthenticationPaths.CreateAccount,component:u.CreateAccount,title:z.CreateAccountSeo.title}),o.default.createElement(l.Route,{path:M.AuthenticationPaths.ForgotPassword,component:u.ForgotPassword,title:z.ForgotPasswordSeo.title}),o.default.createElement(l.Route,{path:M.AuthenticationPaths.Referral,component:u.ReferralURLHandler}),o.default.createElement(l.Route,{path:M.AuthenticationPaths.Contributor,component:u.ContributorURLHandler}),o.default.createElement(l.Route,{path:M.AuthenticationPaths.ResetPassword,component:u.ResetPassword,title:z.ResetPasswordSeo.title}),o.default.createElement(l.Route,{path:M.AuthenticationPaths.SignIn,component:u.SignIn,title:z.SignInSeo.title}))),"// landing routes",o.default.createElement(l.Route,{component:u.Authentication,authentication:"unauthenticated"},o.default.createElement(l.Route,{component:N.default},o.default.createElement(l.IndexRoute,{component:O.create(C.Index),title:z.BaseBetaSeo.title,description:z.BaseBetaSeo.description,keywords:z.BaseBetaSeo.keywords}),o.default.createElement(l.Route,{path:M.BuildABookPaths.BookCoverTemplateGenerator,component:P.BookCoverTemplateGenerator}),o.default.createElement(l.Route,{path:"email/preferences",component:f.default,title:z.EmailPreferences.title}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.AboutUs,component:O.create(C.AboutUs),title:z.AboutUsSeo.title,description:z.AboutUsSeo.description,keywords:z.AboutUsSeo.keywords}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.AuthorPromotions,component:O.create(C.AuthorPromotions),title:z.AuthorPromotionsSeo.title}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.HowItWorks,component:O.create(C.HowItWorks),title:z.HowItWorksSeo.title,description:z.HowItWorksSeo.description,keywords:z.HowItWorksSeo.keywords}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.EmptyPage,component:re.default,title:z.EmptyPageSeo.title}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.MakeMoreMoney,component:O.create(C.MakeMoreMoney),title:z.MakeMoreMoneySeo.title,description:z.MakeMoreMoneySeo.description,keywords:z.MakeMoreMoneySeo.keywords}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.Message,component:C.BroadcastMessage}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.Promotion,component:C.Promotion}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.PrintOnDemand,component:O.create(C.PrintOnDemand),title:z.PrintOnDemandSeo.title,description:z.PrintOnDemandSeo.description,keywords:z.PrintOnDemandSeo.keywords}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.ReachMillionsOfReaders,component:O.create(C.ReachMillionsOfReaders),title:z.ReachMillionsOfReadersSeo.title,description:z.ReachMillionsOfReadersSeo.description,keywords:z.ReachMillionsOfReadersSeo.keywords}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.Sitemap,component:O.create(C.Sitemap),title:z.SitemapSeo.title}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.WhatsNew,component:O.create(C.WhatsNew),title:z.WhatsNewSeo.title}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.BaseAuthor},o.default.createElement(l.IndexRoute,{component:O.create(C.AuthorIndex,T.LANDING_PAGE_INFO.AUTHOR_TOOLS_TIPS),title:z.BaseAuthorSeo.title,description:z.BaseAuthorSeo.description,keywords:z.BaseAuthorSeo.keywords}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.AuthorPlatformBasics,component:O.create(C.AuthorPlatformBasics,T.LANDING_PAGE_INFO.AUTHOR_TOOLS_TIPS),title:z.AuthorPlatformBasicsSeo.title,description:z.AuthorPlatformBasicsSeo.description,keywords:z.AuthorPlatformBasicsSeo.keywords}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.BNPressPathToPublication,component:O.create(C.BNPressPathToPublication,T.LANDING_PAGE_INFO.AUTHOR_TOOLS_TIPS),title:z.BNPressPathToPublicationSeo.title,description:z.BNPressPathToPublicationSeo.description,keywords:z.BNPressPathToPublicationSeo.keywords}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.CopyBasics,component:O.create(C.CopyBasics,T.LANDING_PAGE_INFO.AUTHOR_TOOLS_TIPS),title:z.CopyBasicsSeo.title,description:z.CopyBasicsSeo.description,keywords:z.CopyBasicsSeo.keywords}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.MetaDataBasics,component:O.create(C.MetaDataBasics,T.LANDING_PAGE_INFO.AUTHOR_TOOLS_TIPS),title:z.MetaDataBasicsSeo.title,description:z.MetaDataBasicsSeo.description,keywords:z.MetaDataBasicsSeo.keywords}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.TitleSubTitleBasics,component:O.create(C.TitleSubTitleBasics,T.LANDING_PAGE_INFO.AUTHOR_TOOLS_TIPS),title:z.TitleSubTitleBasicsSeo.title,description:z.TitleSubTitleBasicsSeo.description,keywords:z.TitleSubTitleBasicsSeo.keywords}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.WhatsUnderTheCover,component:O.create(C.WhatsUnderTheCover,T.LANDING_PAGE_INFO.AUTHOR_TOOLS_TIPS),title:z.WhatsUnderTheCoverSeo.title,description:z.WhatsUnderTheCoverSeo.description,keywords:z.WhatsUnderTheCoverSeo.keywords})),o.default.createElement(l.Route,{path:M.LandingPagesPaths.AuthorPublishingServices,component:O.create(C.PartnerServices,T.LANDING_PAGE_INFO.PARTNER_SERVICES),title:z.AuthorPublishingServicesSeo.title,description:z.AuthorPublishingServicesSeo.description}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.Advertising,component:O.create(C.Advertising,T.LANDING_PAGE_INFO.ADVERTISING),title:z.AdvertisingSeo.title}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.BaseLegal},o.default.createElement(l.Route,{path:M.LandingPagesPaths.ContentPolicy,component:C.ContentPolicy,title:z.ContentPolicySeo.title}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.MembershipAgreement,component:C.MembershipAgreement,title:z.MembershipAgreementSeo.title}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.RoyaltyPaymentTerms,component:C.RoyaltyPaymentTerms,title:z.RoyaltyPaymentTermsSeo.title}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.ReferralProgramTerms,component:C.ReferralProgramTerms,title:z.ReferralProgramTerms.title}),o.default.createElement(l.Route,{path:M.LandingPagesPaths.TermsOfUse,component:C.TermsOfUse,title:z.TermsOfUseSeo.title})))),"// authenticated routes",o.default.createElement(l.Route,{component:u.Authentication,authentication:"authenticated"},o.default.createElement(l.Route,{component:A.default},"// miscellaneous routes",o.default.createElement(l.Route,{component:N.default},o.default.createElement(l.Route,{path:M.AuthorPaths.Base,component:S.contributorPageAccessComponent(s.default,k.AUTHOR_PAGES,te.default),title:z.AuthorSeo.title}),o.default.createElement(l.Route,{path:M.CartPaths.Base,component:S.contributorPageAccessComponent(m.default,k.ORDER_COPIES,te.default),title:z.CartSeo.title}),o.default.createElement(l.Route,{path:M.ProfilePaths.Base,component:S.contributorPageAccessComponent(L.default,k.PROFILE,ae.default),title:z.ProfileSeo.title}),o.default.createElement(l.Route,{path:M.AnalyticsPaths.Base},o.default.createElement(l.IndexRoute,{component:c.default,title:z.AnalyticsSeo.title}),o.default.createElement(l.Route,{path:M.AnalyticsPaths.ReadingData,component:I.default,title:z.AnalyticsSeo.title}),o.default.createElement(l.Route,{path:M.AnalyticsPaths.SiteData,component:K.default,title:z.AnalyticsSeo.title}),o.default.createElement(l.Route,{path:M.AnalyticsPaths.EntireList,component:v.default,title:z.AnalyticsSeo.title}),o.default.createElement(l.Route,{path:M.AnalyticsPaths.ReadingDataEntireList,component:F.default,title:z.AnalyticsSeo.title}),o.default.createElement(l.Route,{path:M.AnalyticsPaths.ManageAnalyticsSubscription,component:oe.default,title:z.ManageAnalyticsSubscriptionSeo.title}),o.default.createElement(l.Route,{path:M.AnalyticsPaths.SiteDataEntireList,component:q.default,title:z.AnalyticsSeo.title})),o.default.createElement(l.Route,{path:M.ProjectPaths.Base},o.default.createElement(l.IndexRoute,{component:S.contributorPageAccessComponent(x.default,k.PROJECTS_SERIES,te.default),title:z.ProjectsSeo.title}),o.default.createElement(l.Route,{path:M.ProjectPaths.Search,component:W.default,title:z.ProjectSearchSeo.title}),o.default.createElement(l.Route,{path:M.ProjectPaths.Promote,component:H.default,title:z.ProjectAdBannerSeo.title}),o.default.createElement(l.Route,{path:M.ProjectPaths.Assets,component:G.default,title:z.ProjectAdBannerSeo.title}),o.default.createElement(l.Route,{path:M.ProjectPaths.Coupon,component:S.contributorPageAccessComponent(B.default,k.PROMOTIONS,te.default),title:z.ProjectCouponSeo.title},o.default.createElement(l.IndexRoute,{component:S.contributorPageAccessComponent(b.default,k.PROMOTIONS,te.default),title:z.ProjectCouponSeo.title}),o.default.createElement(l.Route,{path:"bn-promo",component:E.createFeatureProtectedComponent(S.contributorPageAccessComponent(y.default,k.PROMOTIONS,te.default),k.MERCHANDISING,"/"+M.ProjectPaths.Base+"/"+M.ProjectPaths.Coupon),title:z.ProjectCouponSeo.title}),o.default.createElement(l.Route,{path:"bn-promo-summary",component:E.createFeatureProtectedComponent(S.contributorPageAccessComponent(p.default,k.PROMOTIONS,te.default),k.MERCHANDISING,"/"+M.ProjectPaths.Base+"/"+M.ProjectPaths.Coupon),title:z.ProjectCouponSeo.title}),o.default.createElement(l.Route,{path:"summary",component:S.contributorPageAccessComponent(g.default,k.PROMOTIONS,te.default),title:z.ProjectCouponSeo.title})),o.default.createElement(l.Route,{path:M.ProjectPaths.Series,component:S.contributorPageAccessComponent(x.default,k.PROJECTS_SERIES,te.default),title:z.ProjectSeriesSeo.title})),o.default.createElement(l.Route,{path:M.OrderHistoryPaths.Base,component:S.contributorPageAccessComponent(j.default,k.ORDER_COPIES,te.default),title:z.OrderHistorySeo.title}),o.default.createElement(l.Route,{path:M.OrderConfirmationPaths.Base,component:S.contributorPageAccessComponent(D.default,k.ORDER_COPIES,te.default),title:z.OrderConfirmationSeo.title}),o.default.createElement(l.Route,{path:M.SalesReportingPaths.Base},o.default.createElement(l.IndexRoute,{component:S.contributorPageAccessComponent(U.default,k.SALES_REPORTS,te.default),title:z.SalesReportingDashboardSeo.title}),o.default.createElement(l.Route,{path:M.SalesReportingPaths.Reports,component:S.contributorPageAccessComponent(V.default,k.SALES_REPORTS,te.default),title:z.SalesReportingReportsSeo.title})),o.default.createElement(l.Route,{path:M.UtilitiesPaths.Base},o.default.createElement(l.Route,{path:M.UtilitiesPaths.AdReady,component:E.createFeatureProtectedComponent(i.default,k.AD_READY,"/"),title:z.AdReadySeo.title})),o.default.createElement(l.Route,{path:M.VendorPaths.Base,component:S.contributorPageAccessComponent($.default,k.PROFILE,ae.default),title:z.VendorAccountSeo.title}),"//ManageContributors",o.default.createElement(l.Route,{path:M.ManageContributorsPaths.Base,component:S.contributorPageAccessComponent(ee.default,k.PROFILE,ae.default),title:z.ManageContributorsSeo.title}),"// internal paths",o.default.createElement(l.Route,{path:"beta-features",component:d.default}),o.default.createElement(l.Route,{path:"sample-form",component:Y.default})),"// checkout route",o.default.createElement(l.Route,{path:M.CheckoutPaths.Base,component:S.contributorPageAccessComponent(h.default,k.ORDER_COPIES,te.default),title:z.CheckoutSeo.title}),o.default.createElement(l.Route,{path:M.CheckoutPaths.EmptyPageCheckout,component:le.default,title:z.EmptyPageCheckoutSeo.title}),"// static content",o.default.createElement(l.Route,{path:M.HtmlCheatSheetPaths.Base,component:w.default,title:z.HtmlCheatSheetSeo.title}),"// build a book routes",o.default.createElement(l.Route,{path:M.BuildABookPaths.Base,component:P.CommonComponents.Layout},"// welcome flow",o.default.createElement(l.IndexRedirect,{to:M.BuildABookPaths.ChooseBookType}),o.default.createElement(l.Route,{component:P.WelcomeComponents.Welcome},o.default.createElement(l.Route,{path:M.BuildABookPaths.ChooseBookType,component:S.contributorPageAccessComponent(P.WelcomeComponents.ChooseBookType,k.PROJECTS_SERIES,ne.default),title:z.ChooseBookTypeSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.ChooseExistingBook,component:S.contributorPageAccessComponent(P.WelcomeComponents.ChooseExistingBook,k.PROJECTS_SERIES,ne.default),title:z.ChooseExistingBookSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.CreateBookTitle,component:S.contributorPageAccessComponent(P.WelcomeComponents.CreateBookTitle,k.PROJECTS_SERIES,te.default),title:z.CreateBookTitleSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.SelectSaleStatus,component:S.contributorPageAccessComponent(P.WelcomeComponents.SelectSaleStatus,k.PROJECTS_SERIES,ne.default),title:z.SelectSaleStatusSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.SelectPreorderStatus,component:S.contributorPageAccessComponent(P.WelcomeComponents.SelectPreorderStatus,k.PROJECTS_SERIES,ne.default),title:z.SelectPreorderStatusSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.VendorRegistration,component:S.contributorPageAccessComponent(P.WelcomeComponents.VendorRegistration,k.PROJECTS_SERIES,ne.default),title:z.VendorRegistrationSeo.title})),"// project created routes",o.default.createElement(l.Route,{path:":id"},o.default.createElement(l.Route,{component:P.CommonComponents.Section},o.default.createElement(l.Route,{path:M.BuildABookPaths.Details,component:P.BookDetailComponents.BookDetails},o.default.createElement(l.Route,{path:M.BuildABookPaths.DetailsAbout,component:P.BookDetailComponents.About,title:z.DetailsAboutSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.DetailsAuthor,component:P.BookDetailComponents.Author,title:z.DetailsAuthorSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.DetailsCategories,component:P.BookDetailComponents.Categories,title:z.DetailsCategoriesSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.DetailsIsbn,component:P.BookDetailComponents.Isbn,title:z.DetailsIsbnSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.DetailsPricing,component:P.BookDetailComponents.Pricing,title:z.DetailsPricingSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.DetailsRights,component:P.BookDetailComponents.Rights,title:z.DetailsRightsSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.DetailsEditorials,component:P.BookDetailComponents.EditorialReviews,title:z.DetailsEditorialsSeo.title})),o.default.createElement(l.Route,{path:M.BuildABookPaths.SizeAndType,component:P.BookSizeType,title:z.SizeAndTypeSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.Cover,component:P.CoverComponents.Cover},o.default.createElement(l.Route,{path:M.BuildABookPaths.CoverType,component:P.CoverComponents.CoverType,title:z.CoverTypeSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.CoverFormatting,component:P.CoverComponents.CoverFormatting,title:z.CoverFormattingSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.CoverImages,component:P.CoverComponents.CoverImages,title:z.CoverImagesSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.CoverFonts,component:P.CoverComponents.CoverFonts,title:z.CoverFontsSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.CoverFileType,component:P.CoverComponents.CoverFileType,title:z.CoverFileTypeSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.CoverReview,component:P.CoverComponents.CoverReview,title:z.CoverReviewSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.CoverSpine,component:P.CoverComponents.CoverSpine,title:z.CoverSpineSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.CoverUpload,component:P.CoverComponents.CoverUpload,title:z.CoverUploadSeo.title})),o.default.createElement(l.Route,{path:M.BuildABookPaths.Interior,component:P.InteriorComponents.Interior},o.default.createElement(l.Route,{path:M.BuildABookPaths.InteriorFormatting,component:P.InteriorComponents.InteriorFormatting,title:z.InteriorFormattingSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.InteriorImages,component:P.InteriorComponents.InteriorImages,title:z.InteriorImagesSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.InteriorFonts,component:P.InteriorComponents.InteriorFonts,title:z.InteriorFontsSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.InteriorFileType,component:P.InteriorComponents.InteriorFileType,title:z.InteriorFileTypeSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.InteriorReview,component:P.InteriorComponents.InteriorReview,title:z.InteriorReviewSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.InteriorUpload,component:P.InteriorComponents.InteriorUpload,title:z.InteriorUploadSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.InteriorSamplePreference,component:Q.default,title:z.InteriorSamplePreferenceSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.InteriorUploadSample,component:Z.default,title:z.InteriorUploadSampleSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.InteriorSelectSample,component:J.default,title:z.InteriorSelectSampleSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.InteriorReviewSample,component:X.default,title:z.InteriorReviewSampleSeo.title})),o.default.createElement(l.Route,{path:M.BuildABookPaths.Summary,component:P.Summary,title:z.SummarySeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.Vendor,component:P.VendorComponents.Vendor},o.default.createElement(l.Route,{path:M.BuildABookPaths.VendorPublisher,component:P.VendorComponents.VendorPublisher,title:z.VendorPublisherSeo.title}),o.default.createElement(l.Route,{path:M.BuildABookPaths.VendorTaxAndBankInformation,component:P.VendorComponents.VendorTaxAndBankInformation,title:z.VendorTaxAndBankInformationSeo.title})))))),"// 404 route",o.default.createElement(l.Route,{component:N.default},o.default.createElement(l.Route,{path:"*",component:R.default,title:z.PageNotFoundSeo.title}))))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(6)),s=o(a(12)),u=(o(a(147)),o(a(121)),o(a(529))),c=n(a(60)),d=o(a(38)),f=n(a(9)),p=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n).state={valid:!1,loading:!1,content:null,error:null,isbn:e.location.query?e.location.query.q:null},t.onSubmit=t.onSubmit.bind(g(g(t))),t.onValidationChange=t.onValidationChange.bind(g(g(t))),t.onIsbnLookupLoaded=t.onIsbnLookupLoaded.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){d.default.addIsbnLookupLoadedListener(this.onIsbnLookupLoaded)}},{key:"componentDidMount",value:function(){this.state.isbn&&this.onSubmit()}},{key:"componentWillUnmount",value:function(){d.default.removeIsbnLookupLoadedListener(this.onIsbnLookupLoaded)}},{key:"onIsbnLookupLoaded",value:function(e){e.title?this.setState({loading:!1,content:e}):this.setState({loading:!1,error:"The ISBN you entered doesn't match any books in our database."})}},{key:"onSubmit",value:function(){var e=this.refs.form.gather();this.setState({loading:!0,content:null,error:!1,isbn:e.isbn},function(){c.lookupIsbn(e.isbn),l.browserHistory.push("/utilities/isbn-lookup?q="+e.isbn)})}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"render",value:function(){return r.default.createElement("div",{className:"left-sidebar-wrapper"},r.default.createElement("div",{className:"left-sidebar-container my-profile ad-ready"},r.default.createElement("header",{className:"sidelines"},r.default.createElement("h1",null,"ISBN Lookup")),r.default.createElement("div",{className:"panel"},r.default.createElement("div",{className:"panel-body"},r.default.createElement("div",{className:"my-profile-section"},r.default.createElement(i.default,{ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12 project-search"},r.default.createElement(s.default,{name:"isbn",ref:"isbn",label:"Search Projects by ISBN",pattern:/^\d*$/,maxLength:13,initValue:this.state.isbn,rules:[f.required("Please enter an ISBN to look up."),f.minLength(13,"ISBN must be 13 digits.")]}),r.default.createElement("div",{className:"glyphicon glyphicon-search",onClick:this.onSubmit}))))),this.state.content&&r.default.createElement("div",{className:"my-profile-section results"},r.default.createElement(u.default,{project:this.state.content})),this.state.error&&r.default.createElement("div",{className:"my-profile-section error"},r.default.createElement("p",null,this.state.error))),this.state.loading&&r.default.createElement(p.default,null))))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var b=o(a(0)),l=o(a(246)),g=o(a(1)),v=o(a(34)),E=o(a(1074)),i=n(a(1075)),r=o(a(1078)),S=o(a(6)),k=o(a(121)),P=o(a(147)),w=n(a(9)),O=o(a(3)),C=o(a(66)),s=n(a(22)),u=n(a(31)),N=o(a(4));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this,e))||"object"!==c(n)&&"function"!=typeof n?m(a):n).state={author:null,authorProfileUrl:"",authors:[],errors:[],loaded:!1,photoProcessing:!1,photosUploaded:0,page:_.SELECTING,valid:!1},t.onAuthorsLoaded=t.onAuthorsLoaded.bind(m(m(t))),t.onAuthorSaved=t.onAuthorSaved.bind(m(m(t))),t.onAuthorSubmitted=t.onAuthorSubmitted.bind(m(m(t))),t.onAuthorPhotoUpdated=t.onAuthorPhotoUpdated.bind(m(m(t))),t.onEdit=t.onEdit.bind(m(m(t))),t.onManageAuthors=t.onManageAuthors.bind(m(m(t))),t.onPhotoUploadStart=t.onPhotoUploadStart.bind(m(m(t))),t.onPreview=t.onPreview.bind(m(m(t))),t.onSubmit=t.onSubmit.bind(m(m(t))),t.onValidationChange=t.onValidationChange.bind(m(m(t))),t.inWords=t.inWords.bind(m(m(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,b.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){i.loadAuthors()}},{key:"componentWillMount",value:function(){r.default.addAuthorsLoadedListener(this.onAuthorsLoaded),r.default.addAuthorSavedListener(this.onAuthorSaved),r.default.addAuthorSubmittedListener(this.onAuthorSubmitted),r.default.addAuthorPhotoUpdateddListener(this.onAuthorPhotoUpdated)}},{key:"componentWillUnmount",value:function(){r.default.removeAuthorsLoadedListener(this.onAuthorsLoaded),r.default.removeAuthorSavedListener(this.onAuthorSaved),r.default.removeAuthorSubmittedListener(this.onAuthorSubmitted),r.default.addAuthorPhotoUpdateddListener(this.onAuthorPhotoUpdated)}},{key:"onAuthorsLoaded",value:function(){var e=r.default.getAuthors(),t=1===e.length?e[0]:null,a=t?this._pageFromAuthor(t):_.SELECTING;this.setState({authors:e,author:t,page:a,loaded:!0,errors:[]})}},{key:"onAuthorSaved",value:function(){this.setState({author:r.default.getAuthor(this.state.author.contributorId),loaded:!0,errors:[]})}},{key:"onAuthorSubmitted",value:function(){this.setState({author:r.default.getAuthor(this.state.author.contributorId),authors:r.default.getAuthors(),loaded:!0,errors:[]},function(){return setTimeout(function(){return u.toggleToast(!0,"Your information was submitted successfully.")},0)})}},{key:"onAuthorPhotoUpdated",value:function(){this.setState({author:r.default.getAuthor(this.state.author.contributorId),authors:r.default.getAuthors(),photosUploaded:this.state.photosUploaded+1,photoProcessing:!1},this.onValidationChange)}},{key:"onEdit",value:function(){this.setState({page:_.EDITING,valid:!0},s.smoothScrollToWindowTop)}},{key:"onManageAuthors",value:function(){this.setState({loaded:!1},function(){s.smoothScrollToWindowTop(),i.loadAuthors()})}},{key:"onPhotoUploadStart",value:function(e){var n=this;e.preventDefault();var o=e.target.files[0];if((0,l.default)(o,T.ACCEPTED_FILE_TYPES))if(o.size<T.MIN_FILE_SIZE||o.size>T.MAX_FILE_SIZE)this.setState({errors:["Your file must be between "+T.MIN_FILE_SIZE/1e3+" KB and "+T.SOFT_MAX_FILE_SIZE/1e6+" MB. Please edit your file and try again."]},function(){s.smoothScrollToWindowTop(),n.onValidationChange()});else{var r=new Image;r.src=window.URL.createObjectURL(o),r.onload=function(){var e=r.naturalWidth,t=r.naturalHeight;if(window.URL.revokeObjectURL(r.src),e<T.MIN_WIDTH||t<T.MIN_HEIGHT)n.setState({errors:["Your photo must be a minimum of "+T.MIN_WIDTH+"px (width) x "+T.MIN_HEIGHT+"px (height). Please edit your file and try again."]},function(){s.smoothScrollToWindowTop(),n.onValidationChange()});else{var a=new FormData;a.append("file",o,o.name),a.append("contributor_id",n.state.author.contributorId),n.setState({photoProcessing:!0,errors:[]},function(){i.uploadProfilePicture(a),n.onValidationChange()})}}}else this.setState({errors:["We only accept jpg and png files. Please edit your file and try again."]},function(){s.smoothScrollToWindowTop(),n.onValidationChange()})}},{key:"onPreview",value:function(){var e=this.state.author,t=this.refs.form.gather();e.shortBio=t.shortBio,e.longBio=t.longBio,this.setState({page:_.PREVIEWING,author:e,errors:[],loaded:!1},function(){i.saveAuthor(e),s.smoothScrollToWindowTop()})}},{key:"onSelectAuthor",value:function(t){var e=this,a=this.state.authors.find(function(e){return e.contributorId===t});this.setState({author:a,page:this._pageFromAuthor(a)},function(){s.smoothScrollToWindowTop(),e.state.page===_.EDITING&&setTimeout(e.refs.form.validateWithoutCommitting)})}},{key:"onSubmit",value:function(){var e=this;this.setState({page:_.SUBMITTED,loaded:!1},function(){s.smoothScrollToWindowTop(),i.submitAuthor(e.state.author.contributorId)})}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()&&this.state.author.imagePath&&!this.state.photoProcessing&&0===this.state.errors.length})}},{key:"_pageFromAuthor",value:function(e){var t=_.SELECTING;switch(this.setState({valid:!1}),e.status){case y.NEW:t=e.longBio&&e.shortBio?_.PREVIEWING:_.EDITING;break;case y.REJECTED:t=_.EDITING;break;case y.UPDATED:case y.SENT:t=_.SUBMITTED}return t}},{key:"inWords",value:function(e){var t=["","one ","two ","three ","four ","five ","six ","seven ","eight ","nine ","ten ","eleven ","twelve ","thirteen ","fourteen ","fifteen ","sixteen ","seventeen ","eighteen ","nineteen "],a=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];if(9<(e=e.toString()).length)return"overflow";var n=("000000000"+e).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);if(n){var o="";return o+=0!=n[1]?(t[Number(n[1])]||a[n[1][0]]+" "+t[n[1][1]])+"crore ":"",o+=0!=n[2]?(t[Number(n[2])]||a[n[2][0]]+" "+t[n[2][1]])+"lakh ":"",o+=0!=n[3]?(t[Number(n[3])]||a[n[3][0]]+" "+t[n[3][1]])+"thousand ":"",o+=0!=n[4]?(t[Number(n[4])]||a[n[4][0]]+" "+t[n[4][1]])+"hundred ":"",o+=0!=n[5]?(""!=o?"and ":"")+(t[Number(n[5])]||a[n[5][0]]+" "+t[n[5][1]]):""}}},{key:"_rowsPerColumn",value:function(e,t){if(5===e)return[2,2,1,0];if(6===e)return[2,2,2,0];var a=Math.floor(e/t),n=e%t;return Array.from({length:t},function(e){return 0<n--?a+1:a})}},{key:"renderAuthors",value:function(){var a=this,n=this.state.authors.slice(),e=this._rowsPerColumn(n.length,4).map(function(e){var t=n.slice(0,e);return n=n.slice(e),t});return b.default.createElement("div",{className:"row contributors"},e.map(function(e,t){return b.default.createElement("div",{key:t,className:"col-xs-3"},e.map(function(e){return b.default.createElement("div",{className:"contributor",key:e.contributorId},b.default.createElement("a",{onClick:function(){return a.onSelectAuthor(e.contributorId)}},e.lastName+(e.firstName&&", "+e.firstName)),e.status===y.SENT&&b.default.createElement("span",{className:"sprite success-xs"}),e.status===y.REJECTED&&b.default.createElement("span",{className:"sprite error-xs"}))}))}))}},{key:"render",value:function(){var e=this.state,t=e.author,a=e.authors,n=(e.valid,e.page),o=e.photosUploaded,r=e.photoProcessing,l=e.loaded,i=e.errors,s=t&&t.aboutAuthorPageUrl,u=b.default.createElement("a",{href:"https://help.barnesandnoble.com/app/answers/detail/a_id/4330",target:"_blank"},"Help Center"),c=n===_.EDITING,d=n===_.PREVIEWING,f=n===_.SUBMITTED,p=n===_.SELECTING,m=t&&!!t.imagePath&&!i.length&&!r,h=N.default.authorPagesCount(),y=this.inWords(h);return b.default.createElement("div",{className:"left-sidebar-wrapper"},l&&0<a.length&&b.default.createElement("div",{className:"left-sidebar-container my-profile author-profile"},!!i.length&&b.default.createElement(v.default,{dismissible:!0,messages:i,type:"error"}),b.default.createElement("header",{className:"sidelines"},b.default.createElement("h1",null,"B&N Author Page")),b.default.createElement("div",{className:"sidebar-left"},b.default.createElement(k.default,null),1<a.length&&b.default.createElement("div",{className:"btn btn-secondary btn-block hidden-xs",onClick:this.onManageAuthors},b.default.createElement("span",null,"Manage Authors")),b.default.createElement(P.default,{contentIdentifier:"profile"})),b.default.createElement("div",{className:"content-right"},b.default.createElement("div",{className:"panel"},p&&b.default.createElement("div",{className:"panel-body"},b.default.createElement("div",{className:"my-profile-section"},b.default.createElement("h2",null,"Select Author"),b.default.createElement("p",null,"Below is a list of Authors which have a minimum of 3 titles on sale. Please select the name you want to create an Author page for.",b.default.createElement("br",null),b.default.createElement("br",null),"Please note:"),b.default.createElement("ul",null,b.default.createElement("li",null,"At this time, you can create up to ",y," (",h,") Author Pages"),b.default.createElement("li",null,"Each author needs a minimum of 3 titles on sale"),b.default.createElement("li",null,"No public domain books"),b.default.createElement("li",null,"No adult content"),b.default.createElement("li",null,"Please visit our ",u," for more information and email us at ",b.default.createElement("a",{href:"mailto:BNPressSupport@bn.com",className:"underline-link"},"BNPressSupport@bn.com")," for any additional requests")),this.renderAuthors())),c&&b.default.createElement("div",{className:"panel-body"},b.default.createElement(S.default,{ref:"form",onValidationChange:this.onValidationChange},b.default.createElement("div",{className:"my-profile-section"},b.default.createElement("h2",null,(t.firstName?t.firstName+" ":"")+t.lastName),b.default.createElement("p",null,"Welcome to our new Author Pages feature for select B&N Press Authors! This feature enables you to customize your Author Page on BN.com. It is optional to participate, but we encourage you to fill out a few fields to enhance the customer experience on BN.com.",b.default.createElement("br",null),b.default.createElement("br",null),"Please note: Please write content that is evergreen that will not need to be updated frequently.",b.default.createElement("br",null),b.default.createElement("br",null),b.default.createElement("a",{href:"https://www.barnesandnoble.com/b/contributor/nora-roberts/_/N-2kig",target:"_blank"},"Example page here."))),b.default.createElement("div",{className:"my-profile-section"},b.default.createElement("h2",null,"Profile Picture"),b.default.createElement("p",null,"Please upload a photo (.jpg or .png file format) that is a minimum of",T.MIN_WIDTH,"px (width) x ",T.MIN_HEIGHT,"px (height) with your face centered in the photo."),b.default.createElement("div",{className:"photo-container"},!m&&b.default.createElement("img",{className:"author-photo",alt:"author profile picture",src:"img/author-photo.png"}),m&&b.default.createElement("img",{className:"author-photo actual",alt:"author profile picture",src:"/api/author/photo/"+t.contributorId+"?count="+o}),r&&b.default.createElement(O.default,{top:51,left:75})),b.default.createElement("label",{className:(0,g.default)("btn-upload",{disabled:r})},b.default.createElement("input",{type:"file",ref:"fileInput",multiple:!1,accept:T.ACCEPTED_FILE_TYPES,disabled:r,onChange:this.onPhotoUploadStart}),"Upload Photo")),b.default.createElement("div",{className:"my-profile-section"},b.default.createElement("h2",null,"Author Biography"),b.default.createElement("p",null,"Some points to consider. Please provide:"),b.default.createElement("ul",null,b.default.createElement("li",null,'Content that is "evergreen" that doesn\'t need to be updated frequently'),b.default.createElement("li",null,"Your genres"),b.default.createElement("li",null,"Bestselling titles or series"),b.default.createElement("li",null,"Up to 500 characters for the long biography"),b.default.createElement("li",null,"Please be sure to link back to this page from your fan pages")),b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement(C.default,{name:"longBio",label:"Biography",initValue:t.longBio,maxLength:500,showRemainingCharCount:!0,allowHtml:!0,rules:[w.required(),w.maxLength(500)]})))),b.default.createElement("div",{className:"my-profile-section"},b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("div",{className:"save-or-cancel"},b.default.createElement("button",{className:"btn",onClick:this.onPreview,disabled:!this.state.valid},"Preview"))))))),(d||f)&&b.default.createElement("div",{className:"panel-body"},b.default.createElement("div",{className:"my-profile-section"},d&&b.default.createElement("h2",null,"Profile Preview"),d?b.default.createElement("p",null,"This is a preview of what your Author Page will look like on BN.com.",b.default.createElement("br",null),b.default.createElement("br",null),"Please note: This is a beta feature. Please review all the information carefully. While it is in beta, you will not be able to edit the information once you hit submit."):b.default.createElement("p",null,"Welcome to our new Author Pages feature for select B&N Press Authors! Here is a preview of what your Author Page will look like on BN.com.",b.default.createElement("br",null),b.default.createElement("br",null),"Please note: This is a beta feature. While it is in beta, your profile page may take up two weeks to appear on BN.com and you will not be able to edit the information. ",b.default.createElement("br",null),b.default.createElement("br",null),"Author Page URL: ",s?b.default.createElement("a",{href:s},s):"When your profile page is live on BN.com, you will see the URL here."),b.default.createElement("div",{className:"author-profile-preview-container"},b.default.createElement(E.default,{author:t,cacheBusta:o})),d&&b.default.createElement(S.default,{ref:"preview-form",onSubmit:function(){return!1}},b.default.createElement("div",{className:"save-or-cancel center"},b.default.createElement("button",{className:"btn btn-cancel",type:"button",onClick:this.onEdit},"Edit"),b.default.createElement("button",{className:"btn btn-primary",onClick:this.onSubmit},"Submit")))))))),l&&0===a.length&&b.default.createElement("div",{className:"left-sidebar-container my-profile author-profile"},b.default.createElement("header",{className:"sidelines"},b.default.createElement("h1",null,"B&N Author Page")),b.default.createElement("p",{className:"empty-authors"},"We're sorry. It doesn't appear that you have any eligible author names. Please visit ",u," for more information. ")),!l&&b.default.createElement(O.default,{top:100}))}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=h;var y={NEW:"NEW",UPDATED:"UPDATED",SENT:"SENT",REJECTED:"REJECTED"},_={EDITING:"EDITING",PREVIEWING:"PREVIEWING",SELECTING:"SELECTING",SUBMITTED:"SUBMITTED"},T={ACCEPTED_FILE_TYPES:".png,.jpg,.jpeg",MIN_FILE_SIZE:5e3,MAX_FILE_SIZE:22e5,SOFT_MAX_FILE_SIZE:2e6,MIN_HEIGHT:700,MIN_WIDTH:480}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i(this,s(a).call(this,e))).state={cacheBusta:e.cacheBusta},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,r.default.Component),t=a,(n=[{key:"componentsWillReceiveProps",value:function(e){this.props.cacheBusta!==e.cacheBusta&&this.setState({cacheBusta:e.cacheBusta})}},{key:"render",value:function(){var e=this.props.author,t=this.state.cacheBusta,a=(e.firstName?e.firstName+" ":"")+e.lastName,n=(e.imagePath.includes("nookpresssvc")?"/api/author/photo/"+e.contributorId:e.imagePath)+"?count="+t;return r.default.createElement("div",{className:"author-preview"},r.default.createElement("div",{className:"author-bio"},r.default.createElement("div",{className:"author-photo-container"},r.default.createElement("div",{className:"author-photo-circle"},r.default.createElement("img",{className:"author-photo",alt:a,src:n}))),r.default.createElement("div",{className:"author-bio-container"},r.default.createElement("h1",{className:"author-name"},a),r.default.createElement("div",{className:"author-long-bio",dangerouslySetInnerHTML:{__html:e.longBio}}))),r.default.createElement("header",{className:"sidelines"},r.default.createElement("h1",null,"Bestsellers")),r.default.createElement("div",{className:"fadeout"}))}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAuthors=function(){r.loadAuthors(function(e){n.default.dispatch({type:o.default.AuthorProfile.LOAD_AUTHORS,args:{data:e}})})},t.saveAuthor=function(e){r.saveAuthor(e,function(e){n.default.dispatch({type:o.default.AuthorProfile.SAVE_AUTHOR,args:{data:e}})})},t.submitAuthor=function(e){r.submitAuthor(e,function(e){n.default.dispatch({type:o.default.AuthorProfile.SUBMIT_AUTHOR,args:{data:e}})})},t.uploadProfilePicture=function(e){r.uploadProfilePicture(e,function(e){n.default.dispatch({type:o.default.AuthorProfile.UPLOAD_PHOTO,args:{data:e}})},function(e){n.default.dispatch({type:o.default.AuthorProfile.UPLOAD_PHOTO_ERRORS,args:{errors:e}})})};var n=l(a(16)),o=l(a(18)),r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(1076));function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAuthors=function(t,e){n.loadAuthors(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.saveAuthor=function(e,t,a){n.saveAuthor(e,a).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.submitAuthor=function(e,t,a){n.submitAuthor(e,a).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.uploadProfilePicture=function(e,t,a){n.uploadProfilePicture(e,a).then(function(e){try{t(e)}catch(e){console.log(e)}})};var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(1077))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAuthors=function(e){return n.get("/api/author/profiles",{},e)},t.saveAuthor=function(e,t){return n.put("/api/author/save",{author:e},t)},t.submitAuthor=function(e,t){return n.post("/api/author/submit/"+e,{},t)},t.uploadProfilePicture=function(e,t){return n.post("/api/author/upload",e,t)};var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(67))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(44),n=o(a(16)),l=o(a(18));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this))).authors=[],e}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.EventEmitter),a=t,(n=[{key:"addAuthorsLoadedListener",value:function(e){this.addListener(m,e)}},{key:"removeAuthorsLoadedListener",value:function(e){this.removeListener(m,e)}},{key:"addAuthorSavedListener",value:function(e){this.addListener(h,e)}},{key:"removeAuthorSavedListener",value:function(e){this.removeListener(h,e)}},{key:"addAuthorSubmittedListener",value:function(e){this.addListener(y,e)}},{key:"removeAuthorSubmittedListener",value:function(e){this.removeListener(y,e)}},{key:"addAuthorPhotoUpdateddListener",value:function(e){this.addListener(b,e)}},{key:"removeAuthorPhotoUpdatedListener",value:function(e){this.removeListener(b,e)}},{key:"onLoadAuthors",value:function(e){this.authors=e.data,this.emit(m)}},{key:"onSaveAuthor",value:function(e){this._updateAuthor(e.data[0]),this.emit(h)}},{key:"onSubmitAuthor",value:function(e){this._updateAuthor(e.data[0]),this.emit(y)}},{key:"onPhotoUploaded",value:function(e){this._updateAuthor(e.data[0]),this.emit(b)}},{key:"onPhotoUploadedErrors",value:function(e){}},{key:"getAuthor",value:function(t){return this.authors.find(function(e){return e.contributorId===t})}},{key:"getAuthors",value:function(){return this.authors}},{key:"_updateAuthor",value:function(t){this.authors=this.authors.map(function(e){return e.contributorId===t.contributorId?t:e})}},{key:"handleActions",value:function(e){switch(e.type){case l.default.AuthorProfile.LOAD_AUTHORS:this.onLoadAuthors(e.args);break;case l.default.AuthorProfile.SAVE_AUTHOR:this.onSaveAuthor(e.args);break;case l.default.AuthorProfile.SUBMIT_AUTHOR:this.onSubmitAuthor(e.args);break;case l.default.AuthorProfile.UPLOAD_PHOTO:this.onPhotoUploaded(e.args);break;case l.default.AuthorProfile.UPLOAD_PHOTO_ERRORS:this.onPhotoUploadedErrors(e.args)}}}])&&s(a.prototype,n),o&&s(a,o),t}());n.default.register(f.handleActions.bind(f));var p=f;t.default=p;var m="authorsLoaded",h="authorSaved",y="authorSubmitted",b="authorPhotoUpdated"},function(e,t,a){"use strict";var n=c(a(337)),o=c(a(1080)),r=c(a(1086)),l=c(a(1088)),i=c(a(1089)),s=c(a(1090)),u=c(a(1091));function c(e){return e&&e.__esModule?e:{default:e}}e.exports={Authentication:n.default,CreateAccount:o.default,ForgotPassword:r.default,ReferralURLHandler:l.default,ContributorURLHandler:i.default,ResetPassword:s.default,SignIn:u.default}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(a(0)),r=a(2),i=l(a(34)),s=l(a(1)),u=n(a(26)),c=n(a(207)),d=l(a(4)),f=l(a(62)),p=l(a(6)),m=l(a(12)),h=n(a(108)),y=(l(a(82)),n(a(9))),b=l(a(23)),g=l(a(27)),v=l(a(3)),E=n(a(11)),S=n(a(17));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var N=[{value:"true",label:"Receive exclusive updates, special offers, and the latest news. Unsubscribe from our emails at any time."},{value:"false",label:"Opt-out from marketing email communications."}],_=function(e){function l(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a=this,t=!(n=w(l).call(this,e))||"object"!==k(n)&&"function"!=typeof n?C(a):n;var o=JSON.parse(localStorage.getItem("referral")),r=localStorage.getItem("authorShareKey");return t.state={errors:null,referralCode:o?o.referralCode:null,referralSource:o?o.referralSource:"Direct",securityQuestions:null,valid:!1,showValidationPane:!1,signinUrl:h.AuthenticationPaths.SignIn,authoreDetail:null,authorShareKey:r||null,emailPreferenceFeatureFlagValue:S.hasFeatureFlag(E.EMAIL_PREF),phoneNum:!1},t.onPasswordBlur=t.onPasswordBlur.bind(C(C(t))),t.onPasswordChange=t.onPasswordChange.bind(C(C(t))),t.onSecurityQuestionsLoaded=t.onSecurityQuestionsLoaded.bind(C(C(t))),t.onSubmit=t.onSubmit.bind(C(C(t))),t.onUserChanged=t.onUserChanged.bind(C(C(t))),t.onValidationChange=t.onValidationChange.bind(C(C(t))),t.onGettingContributorDetails=t.onGettingContributorDetails.bind(C(C(t))),t.mobileNumberChange=t.mobileNumberChange.bind(C(C(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(l,o.default.Component),t=l,(a=[{key:"componentDidMount",value:function(){var e=this.state.authorShareKey,t=h.AuthenticationPaths.SignIn;e&&(c.getContributorDetails(this.state.authorShareKey),t=t+"?authorShareKey="+e),this.setState({signinUrl:t}),u.loadSecurityQuestions()}},{key:"componentWillMount",value:function(){d.default.addChangeListener(this.onUserChanged),d.default.addSecurityQuestionsLoadedListener(this.onSecurityQuestionsLoaded),this.state.authorShareKey&&d.default.getAuthorProfileListener(this.onGettingContributorDetails)}},{key:"componentWillUnmount",value:function(){d.default.removeChangeListener(this.onUserChanged),d.default.removeSecurityQuestionsLoadedListener(this.onSecurityQuestionsLoaded),this.state.authorShareKey&&d.default.removeAuthorProfileListener(this.onGettingContributorDetails)}},{key:"onGettingContributorDetails",value:function(){var e=d.default.authoreDetail();e.author&&e.author.length&&this.setState({authoreDetail:e.author[0]})}},{key:"onPasswordChange",value:function(){this.setState({showValidationPane:!0})}},{key:"onPasswordBlur",value:function(){this.setState({showValidationPane:!1})}},{key:"onSecurityQuestionsLoaded",value:function(){var e=this;this.setState({loaded:!0,securityQuestions:d.default.getSecurityQuestions()},function(){e.refs.form.validateWithoutCommitting()})}},{key:"onSubmit",value:function(){if(this.refs.form.validate(),this.refs.form.valid()){this.setState({errors:null});var e=this.refs.form.gather();this.state.referralCode&&(e.referredBy=this.state.referralCode,e.referralSource=this.state.referralSource),this.state.authorShareKey&&(e.authorShareKey=this.state.authorShareKey),this.setState({showSpinner:!0}),c.createAccount(e,this.state.authoreDetail)}}},{key:"onUserChanged",value:function(t){null!==t&&(this.refs.cmdSave.enableButton(),t=Object.keys(t).map(function(e){return o.default.createElement("span",{key:e,dangerouslySetInnerHTML:{__html:t[e]}})}),this.setState({errors:t,showSpinner:!1}),window.scrollTo(0,0))}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"mobileNumberChange",value:function(e,t){var a=this,n=e.newValue;"cellPhoneNumber"==t?(""==n?this.setState({valid:this.refs.form.valid(),phoneNum:!1}):this.setState({valid:!1,phoneNum:!0}),this.refs.cellPhoneNumber.setValue(y.formatUSNumber(n))):("confirmcellPhoneNumber"==t&&this.refs.cellPhoneNumber.value()!==this.refs.confirmcellPhoneNumber.value()&&this.setState({valid:!1}),this.refs.confirmcellPhoneNumber.setValue(y.formatUSNumber(n))),this.refs.cellPhoneNumber.value()==this.refs.confirmcellPhoneNumber.value()&&this.refs.form.valid()&&this.setState({valid:!0}),setTimeout(function(){a.refs.form.validateWithoutCommitting()},0)}},{key:"render",value:function(){var n,t=this,e=this.state.valid,a=this.state.signinUrl;return o.default.createElement("div",{className:(0,s.default)("authentication-container",{"additional-email-perf-container":this.state.emailPreferenceFeatureFlagValue})},o.default.createElement("header",null,o.default.createElement("h1",null,"Create Account")),o.default.createElement("div",{className:"row"},o.default.createElement("p",{className:"text-center"},"Already have a B&N Account? Use it to ",o.default.createElement(r.Link,{to:"/"+a},"sign in to B&N Press."))),null!==this.state.errors&&o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement(i.default,{messages:[this.state.errors],type:"error"}))),this.state.loaded&&o.default.createElement(p.default,{ref:"form",name:"createAccount",className:"create-account-form",onValidationChange:this.onValidationChange},this.state.showSpinner&&o.default.createElement(v.default,null),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement(m.default,{name:"firstName",ref:"firstName",label:"First Name",maxLength:20,pattern:/^[a-zA-Z0-9 \-.]*$/,rules:[y.required("Please enter a first name")]}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement(m.default,{name:"lastName",ref:"lastName",label:"Last Name",maxLength:24,pattern:/^[a-zA-Z0-9 \-.]*$/,rules:[y.required("Please enter a last name")]}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement(m.default,{name:"email",ref:"email",label:"Email Address",autoComplete:"off",maxLength:50,rules:[y.required("Please enter your email address"),y.pattern(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Please enter a valid email address",!0)]}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement(m.default,{name:"confirm",ref:"confirm",label:"Confirm Email Address",autoComplete:"off",maxLength:50,rules:[y.required("Please confirm your email address"),y.pattern(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Please enter a valid email address",!0),(n="email",{key:"confirm",dependsOn:{controlKeys:[n]},onlyAfterCommit:!0,test:function(e,t,a){return a[n]?e===a[n].value()?null:"Email addresses do not match.":null}})]}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement(m.default,{name:"password",type:"password",ref:"password",label:"Password",maxLength:15,onChange:this.onPasswordChange,onBlur:this.onPasswordBlur,showValidationPane:this.state.showValidationPane,ruleList:y.getPasswordRuleList(),rules:y.getPasswordRules(this.refs.email?this.refs.email.value():"")}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement(m.default,{name:"passwordConfirmation",type:"password",ref:"passwordConfirmation",label:"Confirm Password",maxLength:15,rules:[y.required("Please confirm your password"),y.matchesControl("password","The passwords you entered do not match.",!0)]}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement(b.default,{name:"secretQuestion",ref:"secretQuestion",label:"Security Question",options:this.state.securityQuestions,initValue:this.state.securityQuestions[0].value,rules:[y.required()]}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-sm-12"},o.default.createElement(m.default,{name:"secretAnswer",ref:"secretAnswer",label:"Security Answer",minLength:4,maxLength:15,rules:[y.minLength(4,"Security Answer must be at least 4 characters"),y.maxLength(15,"Security Answer must not exceed 15 characters"),y.required("Please provide an answer to your security question")]}))),o.default.createElement("div",{className:"row authormobile"},o.default.createElement("div",{className:"col-sm-12"},o.default.createElement(m.default,{name:"cellPhoneNumber",ref:"cellPhoneNumber",label:"Mobile Phone Number (U.S. Only)",maxLength:12,onChange:function(e){return t.mobileNumberChange(e,"cellPhoneNumber")},rules:[y.pattern(/^((1|\+1)?(\s|-|.)?)?((\(|\s\()?[2-9]{1}\d{2}|[2-9]{1}\d{2}(\)|\)\s)?)(\s|-|.)?(\d{3}(\s|-|.)?\d{4})/,"Please enter a valid mobile phone number.",!0)]}),o.default.createElement("span",{className:"uscode"},o.default.createElement("img",{src:"img/usa-flag-icon.png",height:"15px",alt:"usa flag image"}),"+1"))),o.default.createElement("div",{className:"row authormobile"},o.default.createElement("div",{className:"col-sm-12"},o.default.createElement(m.default,{name:"confirmcellPhoneNumber",ref:"confirmcellPhoneNumber",label:"Confirm Mobile Phone Number",maxLength:12,onChange:function(e){return t.mobileNumberChange(e,"confirmcellPhoneNumber")},rules:this.state.phoneNum?[y.pattern(/^((1|\+1)?(\s|-|.)?)?((\(|\s\()?[2-9]{1}\d{2}|[2-9]{1}\d{2}(\)|\)\s)?)(\s|-|.)?(\d{3}(\s|-|.)?\d{4})/,"Please enter a valid mobile phone number.",!0),y.matchesControl("cellPhoneNumber","Mobile phone numbers do not match.",!0),y.required("Please provide Confirm Mobile Phone Number")]:[y.pattern(/^((1|\+1)?(\s|-|.)?)?((\(|\s\()?[2-9]{1}\d{2}|[2-9]{1}\d{2}(\)|\)\s)?)(\s|-|.)?(\d{3}(\s|-|.)?\d{4})/,"Please enter a valid mobile phone number.",!0),y.matchesControl("cellPhoneNumber","Mobile phone numbers do not match.",!0)]}),o.default.createElement("span",{className:"uscode"},o.default.createElement("img",{src:"img/usa-flag-icon.png",height:"15px",alt:"usa flag image"}),"+1"))),this.state.emailPreferenceFeatureFlagValue&&o.default.createElement("div",null,o.default.createElement("div",{className:"row radio-container"},o.default.createElement("div",{className:"col-sm-12"},o.default.createElement(g.default,{name:"emailOptedIn",radioLayout:"vertical",fieldLayout:"vertical",label:"Email Preferences",options:N,rules:[y.required("Please select your email preference.")]}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement("p",{className:"terms-smaller"},"By clicking on the button below you're agreeing to our ",o.default.createElement(r.Link,{className:"underline-link",to:"/"+h.LandingPagesPaths.BaseLegal+"/"+h.LandingPagesPaths.TermsOfUse,target:"_blank"},"Terms of Use")," and ",o.default.createElement("a",{className:"underline-link",href:"https://bn.clarip.com/privacycenter/?brand=barnesandnoble",target:"_blank"},"Privacy Policy"),".")))),o.default.createElement(f.default,{ref:"cmdSave",buttonText:"Create Account",disabled:!e,click:this.onSubmit})))}}])&&P(t.prototype,a),n&&P(t,n),l}();t.default=_},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forgotPasswordTokenCheck=function(e,t,a){n.forgotPasswordTokenCheck(e,a).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.forgotPasswordUpdate=function(e,t,a){n.forgotPasswordUpdate(e,a).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.createAccount=function(e,t,a){n.createAccount(e,a).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getContributorDetails=function(e,t,a){n.getContributorDetails(e,a).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.forgotPassword=function(e,t,a){n.forgotPassword(e,a).then(function(e){try{t(e)}catch(e){console.log(e)}})};var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(531))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.del=t.put=t.post=t.get=t.setErrorHandler=t.setHeaderInspector=void 0;var n,o=(n=a(243))&&n.__esModule?n:{default:n};function s(e,t,a,n,o,r,l){try{var i=e[r](l),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,o)}function r(i){return function(){var e=this,l=arguments;return new Promise(function(t,a){var n=i.apply(e,l);function o(e){s(n,t,a,o,r,"next",e)}function r(e){s(n,t,a,o,r,"throw",e)}o(void 0)})}}t.setHeaderInspector=function(e){d=e};t.setErrorHandler=function(e){c=e};var l=function(){var a=r(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p(o.default.get,t,a));case 1:case"end":return e.stop()}},e,this)}));return function(e,t){return a.apply(this,arguments)}}();t.get=l;var i=function(){var a=r(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p(o.default.post,t,a));case 1:case"end":return e.stop()}},e,this)}));return function(e,t){return a.apply(this,arguments)}}();t.post=i;var u=function(){var a=r(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p(o.default.put,t,a));case 1:case"end":return e.stop()}},e,this)}));return function(e,t){return a.apply(this,arguments)}}();t.put=u;var c,d,f=function(){var a=r(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p(o.default.delete,t,a));case 1:case"end":return e.stop()}},e,this)}));return function(e,t){return a.apply(this,arguments)}}();function p(e,t,a){return m.apply(this,arguments)}function m(){return(m=r(regeneratorRuntime.mark(function e(t,a,n){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=null,e.prev=1,e.next=4,t(a,n);case 4:return r=e.sent,e.next=7,h(r);case 7:o=e.sent,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(1),e.t0;case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}},e,this,[[1,10]])}))).apply(this,arguments)}function h(r){return new Promise(function(e,t){var a,n,o=r.data;d&&d(r.headers),n=o.payload?o.payload.errors:o.errors,o.code?"SUCCESS"!==o.code?(a=y(o),c&&c(o.errors,a),t({errors:n,data:a})):e(a=y(o)):n&&0<n.length?(a=y(o),c&&c(o.errors,a),t({errors:n,data:a})):e(a=y(o))})}function y(e){return"SUCCESS"===e.code?e.payload:"string"==typeof e?e:e.data}t.del=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0;t.Base="html-guide"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdReady=t.Base=void 0;t.Base="utilities";t.AdReady="isbn-lookup"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0;t.Base="manage-contributors"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(82)),i=o(a(34)),s=(n(a(26)),n(a(207))),u=o(a(4)),c=(o(a(62)),o(a(6))),d=o(a(12)),f=o(a(1087)),p=n(a(9));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n).state={email:null,question:null,errors:null,showConfirmation:!1,showAssistant:!1,showEmail:!0,valid:!0,continueEnabled:!0},t.onForgotPasswordQuestionLoaded=t.onForgotPasswordQuestionLoaded.bind(g(g(t))),t.onShowEmailClick=t.onShowEmailClick.bind(g(g(t))),t.onSendToken=t.onSendToken.bind(g(g(t))),t.onSubmitEmail=t.onSubmitEmail.bind(g(g(t))),t.onUserChanged=t.onUserChanged.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var e=window.location.search,t=1<e.length?l.default.parse(e.substring(1)):{};this.refs.email.setValue(t.email)}},{key:"componentWillMount",value:function(){u.default.addChangeListener(this.onUserChanged),u.default.addForgotPasswordQuestionListener(this.onForgotPasswordQuestionLoaded)}},{key:"componentWillUnmount",value:function(){u.default.removeChangeListener(this.onUserChanged),u.default.removeForgotPasswordQuestionListener(this.onForgotPasswordQuestionLoaded)}},{key:"onForgotPasswordQuestionLoaded",value:function(e){e.question?this.setState({showEmail:!1,showAssistant:!0,email:this.refs.email.value(),question:e.question}):this.setState({errors:"We are not able to find a BN Press account associated with that email address. Please check the address again or create a new account."})}},{key:"onShowEmailClick",value:function(){this.setState({showEmail:!0,showAssistant:!1,showConfirmation:!1,errors:null})}},{key:"onSubmitEmail",value:function(){var e=this;if(this.refs.form.validate(),this.refs.form.valid()){this.refs.form.gather();this.setState({errors:null,question:null},function(){return s.forgotPasswordQuestion(e.refs.email.value())})}else this.setState({continueEnabled:!0})}},{key:"onSendToken",value:function(){var e=this;this.setState({valid:!1},function(){return s.forgotPassword({email:e.state.email})})}},{key:"onUserChanged",value:function(e,t){null!==e?this.setState({errors:e,valid:!0,showEmail:!0,showAssistant:!1}):this.setState({errors:null,showConfirmation:!0,showAssistant:!1,continueEnabled:!0,valid:!0})}},{key:"render",value:function(){var e=this.state.valid&&this.state.continueEnabled;return r.default.createElement("div",{className:"authentication-container"},r.default.createElement("header",null,r.default.createElement("h1",null,"Password Assistant")),this.state.showEmail&&r.default.createElement(c.default,{ref:"form",className:"forgot-password-form"},!this.state.showConfirmation&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12"},r.default.createElement("p",null,"To reset your password, enter the email address associated with the Barnes & Noble.com account."))),null!==this.state.errors&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12"},r.default.createElement(i.default,{messages:[this.state.errors],type:"error"}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12"},r.default.createElement(d.default,{name:"email",ref:"email",label:"Email",maxLength:50,initValue:this.state.email,rules:[p.required("Please enter your email address"),p.pattern(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Please enter an email address that contains both '@' and '.'",!0)]}))),r.default.createElement("button",{disabled:!e,onClick:this.onSubmitEmail},"Continue")),this.state.showAssistant&&r.default.createElement(f.default,{email:this.state.email,question:this.state.question,onSendTokenClick:this.onSendToken,onShowEmailClick:this.onShowEmailClick}),this.state.showConfirmation&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12 forgot-password-confirmation"},r.default.createElement("p",null,"Your password request has been submitted."),r.default.createElement("p",null,"An email with instruction to reset your password has been sent to ",r.default.createElement("strong",null,this.state.email)),r.default.createElement("p",null,"If you do not recieve this email, please check your junk mail folder or contact ",r.default.createElement("a",{href:"mailto:BNPressSupport@bn.com"},"Customer Support")," for further assistance."))))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(34)),s=n(a(207)),u=o(a(4)),c=o(a(6)),d=o(a(12)),f=n(a(108)),p=o(a(27)),m=n(a(9));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=b(o).call(this,e))||"object"!==h(n)&&"function"!=typeof n?v(a):n).state={continueEnabled:!0,showQuestion:!1,error:!1,errorMessage:null,radioDisabled:!1},t.OPTION_LINK="0",t.OPTION_QUESTION="1",t.onAnswerValidationChange=t.onAnswerValidationChange.bind(v(v(t))),t.onQuestionOptionChanged=t.onQuestionOptionChanged.bind(v(v(t))),t.onForgotPasswordAnswerValidated=t.onForgotPasswordAnswerValidated.bind(v(v(t))),t.onSubmit=t.onSubmit.bind(v(v(t))),t.onShowEmailClick=t.onShowEmailClick.bind(v(v(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){u.default.addForgotPasswordAnswerValidationListener(this.onForgotPasswordAnswerValidated)}},{key:"componentWillUnmount",value:function(){u.default.removeForgotPasswordAnswerValidationListener(this.onForgotPasswordAnswerValidated)}},{key:"onQuestionOptionChanged",value:function(e){e.newValue===this.OPTION_LINK?this.setState({showQuestion:!1,continueEnabled:!0,errorMessage:null,error:!1}):this.setState({showQuestion:!0,continueEnabled:!1,radioDisabled:!1})}},{key:"onForgotPasswordAnswerValidated",value:function(e){if(e.valid){var t="/"+f.AuthenticationPaths.ResetPassword+"?forgotToken="+e.token;l.browserHistory.replace(t)}else this.setState({error:!0,errorMessage:e.message,continueEnabled:!0})}},{key:"onAnswerValidationChange",value:function(){this.setState({continueEnabled:this.refs.questionForm.valid()})}},{key:"onShowEmailClick",value:function(){this.props.onShowEmailClick&&this.props.onShowEmailClick()}},{key:"onSubmit",value:function(){var e=this;this.setState({continueEnabled:!1,error:!1,errorMessage:null},function(){e.state.showQuestion?s.forgotPasswordAnswerCheck(e.props.email,e.props.question,e.refs.answer.value()):e.props.onSendTokenClick&&e.props.onSendTokenClick()})}},{key:"render",value:function(){return r.default.createElement("div",{className:"pwd-assistant"},this.state.error&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12"},r.default.createElement(i.default,{messages:[this.state.errorMessage],type:"error"}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},"Email Address: ",this.props.email," - ",r.default.createElement("a",{onClick:this.onShowEmailClick},"Edit"))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"delivery-question"},r.default.createElement(c.default,{ref:"form"},r.default.createElement(p.default,{ref:"pwd-question",name:"pwd-question",radioLayout:"vertical",fieldLayout:"vertical",initDisabled:this.state.radioDisabled,options:[{value:this.OPTION_LINK,label:"Send a link to my email"},{value:this.OPTION_QUESTION,label:"Answer a security question"}],initValue:"0",onChange:this.onQuestionOptionChanged,label:"How would you like to reset your password?"}))))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12 line"},"Â ")),this.state.showQuestion&&r.default.createElement("div",null,r.default.createElement("div",{className:"row password-question"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",null,"Security Question"),r.default.createElement("div",null,r.default.createElement("strong",null,this.props.question)))),r.default.createElement("div",{className:"row answer"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(c.default,{ref:"questionForm",name:"questionForm",onValidationChange:this.onAnswerValidationChange},r.default.createElement(d.default,{name:"answer",ref:"answer",label:"Security Answer",maxLength:50,rules:[m.required("Please enter an answer")]}))))),r.default.createElement("div",{className:"row submit-button"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("button",{disabled:!this.state.continueEnabled,onClick:this.onSubmit},"Continue"))))}}])&&y(t.prototype,a),n&&y(t,n),o}();t.default=E},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=a(2),i=n(a(82)),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(10));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,d(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.default.Component),a=t,(n=[{key:"componentDidMount",value:function(){var e=i.default.parse(window.location.search.substring(1)),t=e.referral,a=e.rd,n=""===document.referrer?"Direct":document.referrer;localStorage.setItem("referral",JSON.stringify({referralCode:t,referralSource:n})),""==a||null==a?(l.browserHistory.replace("/"),s.showReferralWelcomeModal("Youâ€™ve been recommended to the B&N Press self-publishing platform. Discover the benefits of publishing directly to B&N/NOOK readers.",'The referring author may be eligible for a reward if you register for B&N Press. Read the <a href="https://press.barnesandnoble.com/legal/referral-program-terms">B&N Press Referral Program Terms & Conditions</a> for more information.')):l.browserHistory.replace("/"+a)}},{key:"render",value:function(){return null}}])&&u(a.prototype,n),o&&u(a,o),t}();t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=a(2),i=n(a(82));!function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(a(10));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.default.Component),a=t,(n=[{key:"componentDidMount",value:function(){var e=i.default.parse(window.location.search.substring(1)).authorShareKey;l.browserHistory.replace("/sign-in?authorShareKey="+e)}},{key:"render",value:function(){return null}}])&&s(a.prototype,n),o&&s(a,o),t}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(34)),s=n(a(207)),u=o(a(4)),c=n(a(189)),d=o(a(62)),f=o(a(6)),p=o(a(12)),m=n(a(9)),h=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=g(o).call(this,e))||"object"!==y(n)&&"function"!=typeof n?E(a):n).state={errors:null,loaded:!1,success:!1,token:!0,tokenError:null,userName:null,valid:!1,showValidationPane:!1,authorShareKey:localStorage.getItem("authorShareKey")},t.onPasswordChange=t.onPasswordChange.bind(E(E(t))),t.onPasswordBlur=t.onPasswordBlur.bind(E(E(t))),t.onForgotPasswordTokenCheck=t.onForgotPasswordTokenCheck.bind(E(E(t))),t.onForgotPasswordUpdate=t.onForgotPasswordUpdate.bind(E(E(t))),t.onSubmit=t.onSubmit.bind(E(E(t))),t.onUserChanged=t.onUserChanged.bind(E(E(t))),t.onValidationChange=t.onValidationChange.bind(E(E(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.props.location.query.forgotToken?s.forgotPasswordTokenCheck(this.props.location.query.forgotToken):this.setState({loaded:!0,token:!1,tokenError:"missingToken"})}},{key:"componentWillMount",value:function(){u.default.addChangeListener(this.onUserChanged),u.default.addForgotPasswordTokenCheckListener(this.onForgotPasswordTokenCheck),u.default.addForgotPasswordUpdateListener(this.onForgotPasswordUpdate)}},{key:"componentWillUnmount",value:function(){u.default.removeChangeListener(this.onUserChanged),u.default.removeForgotPasswordTokenCheckListener(this.onForgotPasswordTokenCheck),u.default.removeForgotPasswordUpdateListener(this.onForgotPasswordUpdate)}},{key:"onPasswordChange",value:function(){this.setState({showValidationPane:!0})}},{key:"onPasswordBlur",value:function(){this.setState({showValidationPane:!1})}},{key:"onForgotPasswordTokenCheck",value:function(e){var t=this,a=null,n=!0,o=null,r=null;null===e.errors?(a=e.question,r=e.user.email,n=!0):(n=!1,o="expiredToken"),this.setState({loaded:!0,token:n,tokenError:o,userName:r,question:a},function(){n&&t.refs.form.validateWithoutCommitting()})}},{key:"onForgotPasswordUpdate",value:function(e){var t=this;null===e.errors?this.setState({success:!0},function(){setTimeout(function(){var e=c.SignIn;t.state.authorShareKey&&(e=c.SignIn+"?authorShareKey="+t.state.authorShareKey),l.browserHistory.push("/"+e)},3e3)}):(this.refs.cmdContinue.enableButton(),this.setState({errors:e.errors}))}},{key:"onSubmit",value:function(){if(this.refs.form.validate(),this.refs.form.valid()){var e=this.refs.form.gather();e.forgotPasswordToken=this.props.location.query.forgotToken,this.setState({errors:null},function(){return s.forgotPasswordUpdate(e)})}}},{key:"onUserChanged",value:function(e){null!==e&&this.setState({errors:e})}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"render",value:function(){var e,t=this.state.valid;return null!==this.state.tokenError&&("expiredToken"===this.state.tokenError?e=r.default.createElement("p",{className:"text-center"},"We're sorry but the password reset token has expired.",r.default.createElement("br",null),"Please try to ",r.default.createElement(l.Link,{to:"/"+c.ForgotPassword},"reset your password again"),"."):"missingToken"===this.state.tokenError&&(e=r.default.createElement("p",{className:"text-center"},"You must have a valid token to reset your password.",r.default.createElement("br",null),"Create your token ",r.default.createElement(l.Link,{to:"/"+c.ForgotPassword},"here"),"."))),r.default.createElement("div",null,this.state.loaded&&this.state.token&&r.default.createElement("div",{className:"authentication-container"},r.default.createElement("header",null,r.default.createElement("h1",null,"Reset Password")),r.default.createElement("div",{className:"row"},r.default.createElement("p",{className:"text-center"},"Please enter your new password")),null!==this.state.errors&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12"},r.default.createElement(i.default,{messages:[this.state.errors],type:"error"}))),this.state.success&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12"},r.default.createElement(i.default,{messages:["You have successfully changed your password!"],type:"warning"}))),r.default.createElement(f.default,{ref:"form",name:"resetPassword",className:"reset-password-form",onValidationChange:this.onValidationChange},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12"},r.default.createElement(p.default,{name:"password",type:"password",ref:"password",label:"Password",maxLength:15,onChange:this.onPasswordChange,onBlur:this.onPasswordBlur,showValidationPane:this.state.showValidationPane,ruleList:m.getPasswordRuleList(),rules:m.getPasswordRules(this.state.userName)}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12"},r.default.createElement(p.default,{name:"passwordConfirmation",type:"password",ref:"passwordConfirmation",label:"Confirm Password",maxLength:15,rules:[m.required("Please confirm your password"),m.matchesControl("password","The passwords you entered do not match.",!0)]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(d.default,{ref:"cmdContinue",autoSubmit:!0,buttonText:"Continue",disabled:!t,click:this.onSubmit}))))),this.state.loaded&&!this.state.token&&r.default.createElement("div",{className:"authentication-container"},r.default.createElement("header",null,r.default.createElement("h1",null,"Reset Password")),r.default.createElement("div",{className:"row"},e)),!this.state.loaded&&r.default.createElement("div",null,r.default.createElement(h.default,null)))}}])&&b(t.prototype,a),n&&b(t,n),o}();t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(0)),r=a(2),l=i(a(34)),s=n(a(207)),u=i(a(4)),c=i(a(62)),d=n(a(11)),f=n(a(17)),p=i(a(6)),m=i(a(12)),h=n(a(108)),y=i(a(82)),b=n(a(9)),g=n(a(10)),v=i(a(3)),E=n(a(26));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C=function(e){function i(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a=this,t=!(n=P(i).call(this,e))||"object"!==S(n)&&"function"!=typeof n?O(a):n;var o=JSON.parse(localStorage.getItem("referral")),r=localStorage.getItem("ContributorAccessdeleted"),l=y.default.parse(window.location.search.substring(1)).authorShareKey;return t.state={errors:r||null,referralCode:o?o.referralCode:null,referralSource:o?o.referralSource:"Direct",authorShareKey:l||null,valid:!1,authorDetail:null},t.onSubmit=t.onSubmit.bind(O(O(t))),t.onUserChanged=t.onUserChanged.bind(O(O(t))),t.onValidationChange=t.onValidationChange.bind(O(O(t))),t.onForgotPasswordClick=t.onForgotPasswordClick.bind(O(O(t))),t.createAccountRedirect=t.createAccountRedirect.bind(O(O(t))),t.onGettingContributorDetails=t.onGettingContributorDetails.bind(O(O(t))),t.getCookie=t.getCookie.bind(O(O(t))),t.deleteCookie=t.deleteCookie.bind(O(O(t))),t.setCookie=t.setCookie.bind(O(O(t))),t.emailIdForm=t.emailIdForm.bind(O(O(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(i,o.default.Component),t=i,(a=[{key:"getCookie",value:function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}},{key:"deleteCookie",value:function(e){this.setCookie(e,"",-1)}},{key:"setCookie",value:function(e,t,a){var n=new Date;n.setTime(n.getTime()+864e5*a),document.cookie=e+"="+t+";path=/;expires="+n.toGMTString()}},{key:"componentDidMount",value:function(){this.state.authorShareKey&&s.getContributorDetails(this.state.authorShareKey);var e=this.getCookie("logoutErrorMsg");if(this.deleteCookie("logoutErrorMsg"),e&&"null"!=e){e=e.replace(/\+/g," ");var t=o.default.createElement("span",{dangerouslySetInnerHTML:{__html:e}});this.setState({errors:t},this.deleteCookie("logoutErrorMsg"))}localStorage.removeItem("ContributorAccessdeleted"),localStorage.removeItem("ContributorParamKey")}},{key:"componentWillMount",value:function(){u.default.addChangeListener(this.onUserChanged),this.state.authorShareKey&&u.default.getAuthorProfileListener(this.onGettingContributorDetails)}},{key:"componentWillUnmount",value:function(){u.default.removeChangeListener(this.onUserChanged),this.state.authorShareKey&&u.default.removeAuthorProfileListener(this.onGettingContributorDetails),document.getElementById("app").classList.remove("email-pref-modal-container")}},{key:"onGettingContributorDetails",value:function(){var e=u.default.authoreDetail();e.author&&e.author.length&&this.setState({authorDetail:e.author[0].authorFirstName+" "+e.author[0].authorLastName})}},{key:"onForgotPasswordClick",value:function(){var e="/"+h.AuthenticationPaths.ForgotPassword;this.refs.email.value()&&(e+="?email="+encodeURIComponent(this.refs.email.value())),r.browserHistory.push(e)}},{key:"createAccountRedirect",value:function(){var e=this.state.authorShareKey,t=h.AuthenticationPaths.CreateAccount;e?localStorage.setItem("authorShareKey",e):localStorage.removeItem("authorShareKey"),r.browserHistory.push("/"+t)}},{key:"onSubmit",value:function(){if(this.refs.form.validate(),this.refs.form.valid()){var e=this.refs.form.gather();this.state.referralCode&&(e.referredBy=this.state.referralCode,e.referralSource=this.state.referralSource),this.state.authorShareKey&&(e.authorShareKey=this.state.authorShareKey,localStorage.setItem("authorContributorLink",this.state.authorShareKey)),this.setState({errors:null}),window.scrollTo(0,0),this.setState({showSpinner:!0}),s.signIn(e)}else this.refs.cmdSignIn.enableButton()}},{key:"onUserChanged",value:function(e,t){if(t&&t.user){var a=t.user;f.hasFeatureFlag(d.TWO_F_A_AUTH)&&a.domesticUser&&a.promptPhoneNumberInput&&g.showMobileNumberModal()}null!==e&&(this.refs.cmdSignIn.enableButton(),e=o.default.createElement("span",{dangerouslySetInnerHTML:{__html:e}}),this.setState({showSpinner:!1,errors:e})),setTimeout(function(){if(t.user&&t.user.promptEmailPreference){var a={emailOptedIn:!0};a.customerId=t.user.customerId?t.user.customerId:"",a.domesticUser=t.user.domesticUser?t.user.domesticUser:"",a.email=t.user.email?t.user.email:"",a.updateType="emailPreferenceModal",document.getElementById("app").classList.add("email-pref-modal-container"),g.showConfirmationModal("Subscribe to the <br>B&N Press Newsletter!<br><p>Donâ€™t miss the latest marketing exclusives from B&N Press such as updates, special offers, and news.</p>",'Unsubscribe at any time from your <a href="/my-profile#emailpreference" title="my profile">Profile page</a>.',"Subscribe Now","Subscribe Later",function(e,t){e&&E.updateProfile(a)})}},500)}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"emailIdForm",value:function(){g.showEmailIdModal()}},{key:"render",value:function(){return o.default.createElement("div",{className:"authentication-container"},o.default.createElement("header",null,(!this.state.authorShareKey||!this.state.authorDetail)&&o.default.createElement("h1",null,"Sign In or Create Account"),this.state.authorShareKey&&this.state.authorDetail&&o.default.createElement("h1",null,"Sign In to  ",this.state.authorDetail,"'s Account")),null!==this.state.errors&&o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement(l.default,{messages:[this.state.errors],type:"error"}))),o.default.createElement(p.default,{ref:"form",name:"signin",className:this.state.authorShareKey&&this.state.authorDetail?"signin-form remove_form_border":"signin-form",onValidationChange:this.onValidationChange},this.state.showSpinner&&o.default.createElement(v.default,null),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement(m.default,{name:"email",ref:"email",type:"email",label:"Email",maxLength:50,rules:[b.required("Please enter your email address"),b.pattern(/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,"Please enter a valid email address",!0)]}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement(m.default,{name:"password",ref:"password",type:"password",label:"Password",maxLength:50,rules:[b.required("Please enter your password")]}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12 forgot-password-link"},o.default.createElement("a",{onClick:this.onForgotPasswordClick},"Forgot your password?"))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement(c.default,{ref:"cmdSignIn",autoSubmit:!0,buttonText:"Sign In",disabled:!1,click:this.onSubmit}))),this.state.authorShareKey&&this.state.authorDetail&&o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement("p",{className:"terms add_margin"},"Don't have an account? Create an account: ")))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12 create-account-button"},o.default.createElement("button",{onClick:this.createAccountRedirect},"Create Account"))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-lg-12"},o.default.createElement("p",{className:"terms"},"By signing in you are agreeing to our ",o.default.createElement(r.Link,{className:"underline-link",to:"/"+h.LandingPagesPaths.BaseLegal+"/"+h.LandingPagesPaths.TermsOfUse,target:"_blank"},"Terms of Use")," and ",o.default.createElement("a",{className:"underline-link",href:"http://www.barnesandnoble.com/h/help/privacy-policy",target:"_blank"},"Privacy Policy")))))}}])&&k(t.prototype,a),n&&k(t,n),i}();t.default=C},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=o(a(0)),r=o(a(1)),l=a(2),p=n(a(68)),c=n(a(109)),i=o(a(74)),d=o(a(4)),m=o(a(1093)),h=o(a(1099)),y=o(a(340)),b=(o(a(536)),o(a(6))),g=n(a(11)),v=o(a(1102)),s=(o(a(537)),n(a(10))),E=o(a(1103)),u=n(a(84)),S=n(a(60)),k=o(a(38)),P=n(a(57)),w=o(a(51)),O=o(a(46)),C=o(a(61)),N=o(a(134)),_=(o(a(538)),o(a(3))),T=(n(a(9)),o(a(135))),D=n(a(75));a(7);function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var x=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=L(o).call(this,e))||"object"!==j(n)&&"function"!=typeof n?B(a):n).state={bookType:P.BOOK_TYPES.ALL,bookTypeMap:P.BOOK_TYPES.ALL,bookTypeTop:P.BOOK_TYPES.ALL,filterOption:u.FILTER_PARAMS.default,statusOption:u.STATUS_PARAMS.onSale,booksData:[],includefreebookvalue:!!t.props.location.state&&t.props.location.state.freeToggleValue,incluedeFreeMap:!1,includeFreeTop:!1,bookList:"",eanTable:"",eanTop:"",eanMap:"",isCustomerDataForOtherAuthors:"",isSearchedData:"",searchedBook:"",bookTypeEnabled:!0,isFreeFilterEnabled:!0,loadingPage:!1,loading:!1,loadingTable:!1,loadingMap:!1,loadingfilterTable:!1,loadingAuthorTable:!1,loadingToggleTop:!1,loadingMapFilter:!1,loadingToggle:!1,loadingMapToggle:!1,eaaSearchStatus:!0,hasData:!1,otherAuthorsData:"",isSearched:"",Mapdata:[],data:"WHAT IS CUSTOMER DATA? ",definition:"This section gives you insight into the customers buying your books â€“ which of your books they bought first, other categories in which they read, their geographic location, and other books they've bought.",mapColr:"",renderData:!1,isHiddenTable:!0,initialevisiblity:!1,isHiddenTop:!0,isHiddenMap:!0,onPageLoading:!1,authorOnLoad:!1,cutomer_gp_nomatch:!1,loadnewpurchase:!1,eaaSubscriptionData:""},t.getHeaderStylesforTable=t.getHeaderStylesforTable.bind(B(B(t))),t.getHeaderStylesforBarchart=t.getHeaderStylesforBarchart.bind(B(B(t))),t.getHeaderStylesforMap=t.getHeaderStylesforMap.bind(B(B(t))),t.getHeaderStylesforTopBooks=t.getHeaderStylesforTopBooks.bind(B(B(t))),t.onFilterAllBooks=t.onFilterAllBooks.bind(B(B(t))),t.onFilterEBooks=t.onFilterEBooks.bind(B(B(t))),t.onFilterPrintBooks=t.onFilterPrintBooks.bind(B(B(t))),t.onFilterAllMapBooks=t.onFilterAllMapBooks.bind(B(B(t))),t.onFilterEMapBooks=t.onFilterEMapBooks.bind(B(B(t))),t.onFilterPrintMapBooks=t.onFilterPrintMapBooks.bind(B(B(t))),t.onFilterAllTopBooks=t.onFilterAllTopBooks.bind(B(B(t))),t.onFilterETopBooks=t.onFilterETopBooks.bind(B(B(t))),t.onFilterPrintTopBooks=t.onFilterPrintTopBooks.bind(B(B(t))),t.onAllResultLoaded=t.onAllResultLoaded.bind(B(B(t))),t.onSuggestionSelected=t.onSuggestionSelected.bind(B(B(t))),t.onClickReadingData=t.onClickReadingData.bind(B(B(t))),t.onClickSiteData=t.onClickSiteData.bind(B(B(t))),t.onClickCustomerData=t.onClickCustomerData.bind(B(B(t))),t.mapResultLoaded=t.mapResultLoaded.bind(B(B(t))),t.onMapSuggestionSelected=t.onMapSuggestionSelected.bind(B(B(t))),t.onOtherAuthorSuggestionSelected=t.onOtherAuthorSuggestionSelected.bind(B(B(t))),t.onCustomerDataOtherAuthorsLoaded=t.onCustomerDataOtherAuthorsLoaded.bind(B(B(t))),t.onFreeFilterToggleMap=t.onFreeFilterToggleMap.bind(B(B(t))),t.onFreeFilterToggleTable=t.onFreeFilterToggleTable.bind(B(B(t))),t.onFreeFilterToggleTop=t.onFreeFilterToggleTop.bind(B(B(t))),t.showInformationModal=t.showInformationModal.bind(B(B(t))),t.eaaSubscriptionLoaded=t.eaaSubscriptionLoaded.bind(B(B(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(o,f.default.Component),t=o,(a=[{key:"eaaSubscriptionLoaded",value:function(){var e=T.default.eaaSubscription();this.setState({eaaSubscriptionData:e})}},{key:"onOtherAuthorSuggestionSelected",value:function(e){var t=document.getElementsByClassName("project-list-search")[4].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;if(document.getElementsByClassName(n).length&&"no match"==document.getElementsByClassName(n)[0].firstElementChild.innerText.toLowerCase())return t.getElementsByTagName("input")[0].value="",document.getElementById(n).parentElement.parentElement.classList.add("error"),document.getElementById(n).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.classList.add("nomatch-active"),document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="Please search for your Title, ISBN or Series",setTimeout(function(){t.getElementsByTagName("input")[0].value=""},500),document.getElementsByClassName(n)[0].parentElement.parentElement.style.display="none",!0;if((null==e||""==e.newValue)&&""==a){var o={ean:"",projectType:this.state.bookTypeTop,includeFree:this.state.includeFreeTop};p.getCustomerDataForOtherAuthors(o),this.setState({eanTop:"",isCustomerDataForOtherAuthors:!1,loadingTable:!0})}else{var r,l=e&&e.currentTarget?e.currentTarget.parentNode.firstElementChild.lastElementChild.lastElementChild.lastElementChild.firstElementChild.firstElementChild:null,i=null!==l?l.innerText:"";if(void 0===e)return;if(r=void 0===e.newValue?i:e.newValue,e&&e.currentTarget){var s=document.getElementsByClassName("options-dropdown")[2].getElementsByTagName("UL")[0].getElementsByTagName("LI")[0],u=e.currentTarget.parentNode.firstElementChild.lastElementChild.firstElementChild.value;if(void 0!==s)s.click();else if(""!==u&&null==s)return}if(""!==r){var c=k.default.findProjectForEaa(r);if(null!=c){var d={ean:c.title,projectType:this.state.bookTypeTop,includeFree:this.state.includeFreeTop};p.getCustomerDataForOtherAuthors(d),this.setState({eanTop:c.title,isCustomerDataForOtherAuthors:!0,loadingTable:!0})}}else{var f={ean:"",projectType:this.state.bookTypeTop,includeFree:this.state.includeFreeTop};p.getCustomerDataForOtherAuthors(f),this.setState({eanTop:"",isCustomerDataForOtherAuthors:!1,loadingTable:!0})}}}},{key:"onMapSuggestionSelected",value:function(e){var t=document.getElementsByClassName("project-list-search")[6].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;if(document.getElementsByClassName(n).length&&"no match"==document.getElementsByClassName(n)[0].firstElementChild.innerText.toLowerCase())return t.getElementsByTagName("input")[0].value="",document.getElementById(n).parentElement.parentElement.classList.add("error"),document.getElementById(n).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.classList.add("nomatch-active"),document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="Please search for your Title, ISBN or Series",setTimeout(function(){t.getElementsByTagName("input")[0].value=""},500),document.getElementsByClassName(n)[0].parentElement.parentElement.style.display="none",!0;if((null==e||""==e.newValue)&&""==a){var o={ean:"",projectType:this.state.bookTypeMap,includeFree:this.state.incluedeFreeMap};p.getMapData(o),this.setState({eanMap:"",loadingMap:!0,isSearched:!1})}else{var r,l=e&&e.currentTarget?e.currentTarget.parentNode.firstElementChild.lastElementChild.lastElementChild.lastElementChild.firstElementChild.firstElementChild:null,i=null!==l?l.innerText:"";if(void 0===e)return;if(r=void 0===e.newValue?i:e.newValue,e&&e.currentTarget){var s=document.getElementsByClassName("options-dropdown")[3].getElementsByTagName("UL")[0].getElementsByTagName("LI")[0],u=e.currentTarget.parentNode.firstElementChild.lastElementChild.firstElementChild.value;if(void 0!==s)s.click();else if(""!==u&&null==s)return}if(""!==r){var c=k.default.findProjectForEaa(r);if(null!=c){var d={ean:c.title,projectType:this.state.bookTypeMap,includeFree:this.state.incluedeFreeMap};p.getMapData(d),this.setState({eanMap:c.title,isSearched:!0,loadingMap:!0}),setTimeout(function(){this.setState({loadingMap:!1})}.bind(this),5e3)}}else{var f={ean:"",projectType:this.state.bookTypeMap,includeFree:this.state.incluedeFreeMap};p.getMapData(f),this.setState({eanMap:"",loadingMap:!0,isSearched:!1})}}}},{key:"onSuggestionSelected",value:function(e){if(!this.refs.projectSearchLineGraph.getValue())return!1;var t=document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;if(document.getElementsByClassName(n).length&&"no match"==document.getElementsByClassName(n)[0].firstElementChild.innerText.toLowerCase())return t.getElementsByTagName("input")[0].value="",document.getElementById(n).parentElement.parentElement.classList.add("error"),document.getElementById(n).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.classList.add("nomatch-active"),document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="Please search for your Title, ISBN or Series",setTimeout(function(){t.getElementsByTagName("input")[0].value=""},500),document.getElementsByClassName(n)[0].parentElement.parentElement.style.display="none",!0;if((null==e||""==e.newValue)&&""==a){var o={ean:"",projectType:this.state.bookType,includeFree:this.state.includefreebookvalue};p.getAllBookDetails(o),this.setState({eanTable:"",loading:!0})}else{var r,l=e&&e.currentTarget?e.currentTarget.parentNode.firstElementChild.lastElementChild.lastElementChild.lastElementChild.firstElementChild.firstElementChild:null,i=null!==l?l.innerText:"";if(void 0===e)return;if(r=void 0===e.newValue?i:e.newValue,e&&e.currentTarget){var s=document.getElementsByClassName("options-dropdown")[0].getElementsByTagName("UL")[0].getElementsByTagName("LI")[0],u=e.currentTarget.parentNode.firstElementChild.lastElementChild.firstElementChild.value;if(void 0!==s)s.click();else if(""!==u&&null==s)return}if(""!==r){var c=k.default.findProjectForEaa(r);null!=c&&this.showInformationModal(f.default.createElement(y.default,{newean:c.ean,title:c.title,lineGraphAnalytics:!0}))}else{var d={ean:"",projectType:this.state.bookType,includeFree:this.state.includefreebookvalue};p.getAllBookDetails(d),this.setState({eanTable:"",loading:!0,isSearchedData:!1})}}}},{key:"showInformationModal",value:function(e){document.getElementById("app").classList.add("analyticLineGraph"),document.getElementById("app").classList.add("analyticLineGraphHeight"),s.showInformationModal(e),document.getElementById("table-ref").classList.add("removeTooltip"),setTimeout(function(){document.getElementById("table-ref").classList.remove("removeTooltip")}.bind(this),1)}},{key:"onFilterAllBooks",value:function(e){var t=document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.eanTable:"",projectType:"ALL",includeFree:this.state.includefreebookvalue};p.getAllBookDetails(o),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingfilterTable:!0,isHiddenTable:!0})}},{key:"onFilterEBooks",value:function(e){var t=document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.eanTable:"",projectType:"EBOOK",includeFree:this.state.includefreebookvalue};p.getAllBookDetails(o),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingfilterTable:!0,isHiddenTable:!0})}},{key:"onFilterPrintBooks",value:function(e){var t=document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.eanTable:"",projectType:"SPB",includeFree:this.state.includefreebookvalue};p.getAllBookDetails(o),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingfilterTable:!0,isHiddenTable:!1})}},{key:"onFilterAllMapBooks",value:function(e){this.setState({mapColor:"allbook"});var t=document.getElementsByClassName("project-list-search")[6].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.eanMap:"",projectType:"ALL",includeFree:this.state.incluedeFreeMap};p.getMapData(o),this.state.bookTypeEnabled&&e!==this.state.bookTypeMap&&(this.setState({bookTypeMap:e,loadingMapFilter:!0,isHiddenMap:!0,loadingMap:!1}),setTimeout(function(){this.setState({loadingMapFilter:!1})}.bind(this),2e3))}},{key:"onFilterEMapBooks",value:function(e){this.setState({mapColor:"ebook"});var t=document.getElementsByClassName("project-list-search")[6].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.eanMap:"",projectType:"EBOOK",includeFree:this.state.incluedeFreeMap};p.getMapData(o),this.state.bookTypeEnabled&&e!==this.state.bookTypeMap&&(this.setState({bookTypeMap:e,loadingMapFilter:!0,isHiddenMap:!0,loadingMap:!1}),setTimeout(function(){this.setState({loadingMapFilter:!1})}.bind(this),2e3))}},{key:"onFilterPrintMapBooks",value:function(e){this.setState({mapColor:"printbook"});var t=document.getElementsByClassName("project-list-search")[6].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.eanMap:"",projectType:"SPB",includeFree:this.state.incluedeFreeMap};p.getMapData(o),this.state.bookTypeEnabled&&e!==this.state.bookTypeMap&&(this.setState({bookTypeMap:e,loadingMapFilter:!0,isHiddenMap:!1,loadingMap:!1}),setTimeout(function(){this.setState({loadingMapFilter:!1})}.bind(this),5e3))}},{key:"onFilterAllTopBooks",value:function(e){this.setState({mapColor:""});var t=document.getElementsByClassName("project-list-search")[4].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.eanTop:"",projectType:"ALL",includeFree:this.state.includeFreeTop};p.getCustomerDataForOtherAuthors(o),this.state.bookTypeEnabled&&e!==this.state.bookTypeTop&&this.setState({bookTypeTop:e,loadingAuthorTable:!0,isHiddenTop:!0})}},{key:"onFilterETopBooks",value:function(e){var t=document.getElementsByClassName("project-list-search")[4].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.eanTop:"",projectType:"EBOOK",includeFree:this.state.includeFreeTop};p.getCustomerDataForOtherAuthors(o),this.state.bookTypeEnabled&&e!==this.state.bookTypeTop&&this.setState({bookTypeTop:e,loadingAuthorTable:!0,isHiddenTop:!0})}},{key:"onFilterPrintTopBooks",value:function(e){var t=document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.eanTop:"",projectType:"SPB",includeFree:this.state.includeFreeTop};p.getCustomerDataForOtherAuthors(o),this.state.bookTypeEnabled&&e!==this.state.bookTypeTop&&this.setState({bookTypeTop:e,loadingAuthorTable:!0,isHiddenTop:!1})}},{key:"onFreeFilterToggleTop",value:function(){this.setState(function(e){return{includeFreeTop:!e.includeFreeTop}});var e=document.getElementsByClassName("project-list-search")[4].getElementsByClassName("input-area")[0],t=e.getElementsByTagName("input")[0].value,a=e.getElementsByTagName("input")[0].id;document.getElementById(a).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(a).parentElement.parentElement.classList.remove("error");var n={ean:t?this.state.eanTop:"",projectType:this.state.bookTypeTop,includeFree:!this.state.includeFreeTop};p.getCustomerDataForOtherAuthors(n),this.setState({loadingToggleTop:!0})}},{key:"onFreeFilterToggleTable",value:function(){var e=document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0],t=e.getElementsByTagName("input")[0].value,a=e.getElementsByTagName("input")[0].id;document.getElementById(a).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(a).parentElement.parentElement.classList.remove("error"),this.setState(function(e){return{includefreebookvalue:!e.includefreebookvalue}});var n={ean:t?this.state.eanTable:"",projectType:this.state.bookType,includeFree:!this.state.includefreebookvalue};p.getAllBookDetails(n),this.setState({loadingToggle:!0})}},{key:"onFreeFilterToggleMap",value:function(){this.setState(function(e){return{incluedeFreeMap:!e.incluedeFreeMap}});var e=document.getElementsByClassName("project-list-search")[6].getElementsByClassName("input-area")[0],t=e.getElementsByTagName("input")[0].value,a=e.getElementsByTagName("input")[0].id;document.getElementById(a).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(a).parentElement.parentElement.classList.remove("error");var n={ean:t?this.state.eanMap:"",projectType:this.state.bookTypeMap,includeFree:!this.state.incluedeFreeMap};p.getMapData(n),this.setState({loadingMapToggle:!0,loadingMap:!1}),setTimeout(function(){this.setState({loadingMapToggle:!1})}.bind(this),2e3)}},{key:"getHeaderStylesforTable",value:function(e,t,a,n){return n=w.default.hasUserPublishedBefore()&&n,(0,r.default)(e,{"active-selection":t===a})}},{key:"getHeaderStylesforBarchart",value:function(e,t,a,n){return n=w.default.hasUserPublishedBefore()&&n,(0,r.default)(e,{"active-selection":t===a})}},{key:"getHeaderStylesforTopBooks",value:function(e,t,a,n){return n=w.default.hasUserPublishedBefore()&&n,(0,r.default)(e,{"active-selection":t===a})}},{key:"getHeaderStylesforMap",value:function(e,t,a,n){return n=w.default.hasUserPublishedBefore()&&n,(0,r.default)(e,{"active-selection":t===a})}},{key:"onClickCustomerData",value:function(e){l.browserHistory.push(e)}},{key:"onClickReadingData",value:function(e){l.browserHistory.push(e)}},{key:"onClickSiteData",value:function(e){l.browserHistory.push(e)}},{key:"onSeeEntireList",value:function(e){l.browserHistory.push(e),window.scrollTo(0,0)}},{key:"componentWillMount",value:function(){T.default.addEaaSubscriptionListener(this.eaaSubscriptionLoaded),i.default.addMapListener(this.mapResultLoaded),i.default.addResultLoadedListener(this.onAllResultLoaded),i.default.addCustomerDataForOtherAuthorsListener(this.onCustomerDataOtherAuthorsLoaded),this.setState({loadingPage:!0,authorOnLoad:!0,loadingMap:!0}),setTimeout(function(){this.setState({loadingMap:!1})}.bind(this),2e3)}},{key:"componentWillUnmount",value:function(){T.default.removeEaaSubscriptionListener(this.eaaSubscriptionLoaded),i.default.removeMapListener(this.mapResultLoaded),i.default.removeResultLoadedListener(this.onAllResultLoaded),i.default.removeCustomerDataForOtherAuthorsListener(this.onCustomerDataOtherAuthorsLoaded)}},{key:"componentDidMount",value:function(){D.getEaaSubscription(),S.loadEaaSearches(this.state.filterOption);var e={ean:"",projectType:"ALL",includeFree:!1},t={ean:"",projectType:"ALL",includeFree:this.state.includefreebookvalue};p.getBarGraphDetails(e),p.getMapData(e),p.getCustomerDataForOtherAuthors(e),p.getAllBookDetails(t),this.mapResultLoaded(),this.onAllResultLoaded(),this.setState({loadnewpurchase:!0})}},{key:"onGettingAllData",value:function(e){e.newValue}},{key:"onAllResultLoaded",value:function(){var e=i.default.allData();this.setState({booksData:e,loading:!1,loadingfilterTable:!1,loadingToggle:!1,loadnewpurchase:!1})}},{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"mapResultLoaded",value:function(){var e=i.default.mapData(),t=1;if(this.isEmpty(e?e.result:[])?(this.setState({renderData:!1,hasData:!0}),!1):(this.setState({Mapdata:e?e.result.states:[],loadingMapFilter:!1,loadingMapToggle:!1,response:e,renderData:!0,hasData:!1}),!0))for(var a=0;a<e.result.states.length;a++)1==(t=parseInt(e.result.states[a].count)+t)?this.setState({hasData:!0}):this.setState({hasData:!1})}},{key:"onCustomerDataOtherAuthorsLoaded",value:function(){i.default.otherAuthersData();this.setState({loadingTable:!1,loadingAuthorTable:!1,loadingToggleTop:!1,loadingPage:!1,authorOnLoad:!1})}},{key:"parseMillisecondsIntoReadableTime",value:function(e){var t=e/36e5,a=Math.floor(t),n=9<a?a:"0"+a,o=60*(t-a),r=Math.floor(o),l=9<r?r:"0"+r,i=60*(o-r);Math.floor(i);return n+"hours,  "+l+"minutes"}},{key:"render",value:function(){var e,t,a,n=this;this.state.eaaSubscriptionData&&(e=this.state.eaaSubscriptionData.result,t=new Date(e.resetDate).getTime()-(new Date).getTime()),a=!!d.default.hasEaaPermission()&&d.default.hasEaaPermission().includes(g.CUSTOMER);w.default.hasUserPublishedBefore();var o=P.BOOK_TYPES,r=(this.state.bookType===o.ALL||this.state.bookType==o.EBOOK)&&"unitsSold"===this.props.dataIdentifier,l=this.state.Mapdata&&10<this.state.Mapdata.length?this.state.Mapdata.slice(0,10):this.state.Mapdata,i=this.state.eanMap?this.state.eanMap:"None Provided",s="";this.state.bookTypeMap===o.ALL?s="All Books":this.state.bookTypeMap==o.EBOOK?s="eBook":this.state.bookTypeMap==o.PRINT&&(s="Print Book");var u="";return u=(this.state.bookTypeMap===o.ALL||this.state.bookTypeMap===o.EBOOK)&&this.state.incluedeFreeMap?"Yes":"No",f.default.createElement("div",null,a&&f.default.createElement("div",{className:"left-sidebar-wrapper analytics-layout"},f.default.createElement("div",{className:"left-sidebar-container projects"},f.default.createElement("header",{className:"sidelines"},f.default.createElement("h1",null,"My Analytics Dashboard")),f.default.createElement("div",{className:"sidebar-left"},f.default.createElement("div",{className:"customer-display"},d.default.hasEaaPermission().includes(g.CUSTOMER)&&f.default.createElement("div",{className:"btn btn-new-project-analytics btn-block",onClick:function(){return n.onClickCustomerData("/"+c.Base)}},f.default.createElement("span",null,"Customer Data")),d.default.hasEaaPermission().includes(g.READING)&&f.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return n.onClickReadingData("/"+c.Base+"/"+c.ReadingData)}},f.default.createElement("span",null,"Reading Data")),d.default.hasEaaPermission().includes(g.SITE)&&f.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return n.onClickSiteData("/"+c.Base+"/"+c.SiteData)}},f.default.createElement("span",null,"Site Data"))),f.default.createElement("div",{className:" m-0 p-0  mobile-display"},d.default.hasEaaPermission().includes(g.CUSTOMER)&&f.default.createElement("div",{className:"col-33"},f.default.createElement("div",{className:"btn btn-new-project-analytics btn-block",onClick:function(){return n.onClickCustomerData("/"+c.Base)}},f.default.createElement("span",null,"Customer Data"))),d.default.hasEaaPermission().includes(g.READING)&&f.default.createElement("div",{className:"col-33"},f.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return n.onClickReadingData("/"+c.Base+"/"+c.ReadingData)}},f.default.createElement("span",null,"Reading Data"))),d.default.hasEaaPermission().includes(g.SITE)&&f.default.createElement("div",{className:"col-33"},f.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return n.onClickSiteData("/"+c.Base+"/"+c.SiteData)}},f.default.createElement("span",null,"Site Data")))),f.default.createElement("div",{className:"analytics-mar30 analytics-mar30-mobile"},f.default.createElement("p",{className:"analytics-data-text"},this.state.data),f.default.createElement("p",{className:"analytics-data-define"},this.state.definition," "),f.default.createElement("br",null),f.default.createElement("p",{className:"analytics-data-define"},"Please Note: This information derives from the last 2 years of data."),f.default.createElement("div",{className:"searches-remaining"},f.default.createElement("span",{className:"searches-remaining-bold"},e&&parseInt(e.dailyLimit)-parseInt(e.usageCount))," SEARCHES REMAINING",f.default.createElement("p",{className:"search-remaining-text"},"Search limit is based on incurred costs on B&N Press when processing data feeds."),f.default.createElement("p",{className:"search-reset"},"Searches Reset: ",e&&e.resetDate&&t?this.parseMillisecondsIntoReadableTime(t):"")," "))),f.default.createElement("div",{className:"content-right container-analytics container"},f.default.createElement("div",{className:"position-relative"},f.default.createElement("div",{className:"analytics-margin height-table-container"},f.default.createElement("div",{className:"col-sm-8"},f.default.createElement("div",{className:"analytics-margin-top"},f.default.createElement("h3",{className:"tooltip-description"},"Your New Customers by Books Purchased "),f.default.createElement(C.default,{info:!0,text:"This graph shows how many new customers you gained in the last three years grouped by book titles. If a customer purchased more than one of your titles we will list the first title he/she purchased. Note: This report draws from data in the last three years. If a new customer had purchased your titles prior to the current three year period, he will be counted again in the current three year time period.",trigger:"focus"},f.default.createElement("span",{className:"Whats-This"},"What's This?"))),f.default.createElement("div",{className:"widget no-margin-bottom"},f.default.createElement("div",{className:"widget-panel-content"},f.default.createElement("div",{className:"controls clearfix"},f.default.createElement("ul",{className:"book-type"},f.default.createElement("li",{className:this.getHeaderStylesforTable("all-books",this.state.bookType,o.ALL,this.state.bookTypeEnabled),onClick:function(){return n.onFilterAllBooks(o.ALL)}},"All Books"),f.default.createElement("li",{className:this.getHeaderStylesforTable("ebook",this.state.bookType,o.EBOOK,this.state.bookTypeEnabled),onClick:function(){return n.onFilterEBooks(o.EBOOK)}},"eBook"),f.default.createElement("li",{className:this.getHeaderStylesforTable("print",this.state.bookType,o.PRINT,this.state.bookTypeEnabled),onClick:function(){return n.onFilterPrintBooks(o.PRINT)}},"Print")))))),f.default.createElement("div",{className:"col-sm-4 project-list-search project-sort-options search-box search-icon-eaa"},f.default.createElement(b.default,null,f.default.createElement(O.default,{label:"Search Book by Title, ISBN, Series",ref:"projectSearchLineGraph",filterOption:this.state.filterOption,onSubmit:this.onSuggestionSelected,defaultDropdownSelection:!0,eaaSearch:this.state.eaaSearchStatus,noValue:"true"})),f.default.createElement("div",{className:"ToggleCustomer",style:{display:this.state.isHiddenTable?"block":"none"}},f.default.createElement(N.default,{action:this.onFreeFilterToggleTable,onClick:this.onFreeFilterToggleTable,initValue:this.state.includefreebookvalue,containerStyle:{marginRight:10,marginTop:10},visible:r,labelText:"Include Free Units",labelLeft:!0,labelStyle:{color:"#999999"}}))),f.default.createElement("div",{className:"col-sm-12 table-wrapper"},f.default.createElement(E.default,{loadingNew:this.state.loading,loadingPage:this.state.loadingPage,loadingToggle:this.state.loadingToggle,isSearchedData:this.state.isSearchedData,searchedBook:this.state.searchedBook,bookType:this.state.bookType,freeNewCustomer:this.state.includefreebookvalue,loadingfilterTable:this.state.loadingfilterTable}))),this.state.loadnewpurchase&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(_.default,null)),this.state.loading&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(_.default,null)),this.state.loadingfilterTable&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(_.default,null)),this.state.loadingToggle&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(_.default,null))),f.default.createElement("div",{className:"analytics-margin"},f.default.createElement("div",null,f.default.createElement(m.default,{loadingPage:this.state.loadingPage}))),f.default.createElement("div",{className:"position-relative"},f.default.createElement("div",{className:"analytics-margin"},f.default.createElement("div",{className:"col-sm-8 analytics-margin-top"},f.default.createElement("div",null,f.default.createElement("h3",{className:"tooltip-description col-sm-6",style:{padding:"0px 0px"}},"Top Books Also Purchased by Your Customers"),f.default.createElement(C.default,{info:!0,text:"This graph shows you the Top 10 titles that your customers also purchased from other authors in addition to your titles. The books are ordered by the number of customers who also bought the other title.",trigger:"focus"},f.default.createElement("span",{className:"Whats-This"},"What's This?"))),f.default.createElement("div",{className:"widget filter-align no-margin-bottom"},f.default.createElement("div",{className:"widget-panel-content"},f.default.createElement("div",{className:"controls clearfix thumbnail-alignment-new"},f.default.createElement("ul",{className:"book-type"},f.default.createElement("li",{className:this.getHeaderStylesforTopBooks("all-books",this.state.bookTypeTop,o.ALL,this.state.bookTypeEnabled),onClick:function(){return n.onFilterAllTopBooks(o.ALL)}},"All Books"),f.default.createElement("li",{className:this.getHeaderStylesforTopBooks("ebook",this.state.bookTypeTop,o.EBOOK,this.state.bookTypeEnabled),onClick:function(){return n.onFilterETopBooks(o.EBOOK)}},"eBook"),f.default.createElement("li",{className:this.getHeaderStylesforTopBooks("print",this.state.bookTypeTop,o.PRINT,this.state.bookTypeEnabled),onClick:function(){return n.onFilterPrintTopBooks(o.PRINT)}},"Print")))))),f.default.createElement("div",{className:"col-sm-4 project-list-search project-sort-options search-box search-icon-eaa"},f.default.createElement(b.default,null,f.default.createElement(O.default,{label:"Search Book by Title, ISBN, Series",ref:"projectSearch",filterOption:this.state.filterOption,defaultDropdownSelection:!0,onSubmit:this.onOtherAuthorSuggestionSelected,eaaSearch:this.state.eaaSearchStatus,noValue:"true"})),f.default.createElement("div",{className:"ToggleCustomer",style:{display:this.state.isHiddenTop?"block":"none"}},f.default.createElement(N.default,{action:this.onFreeFilterToggleTop,onClick:this.onFreeFilterToggleTop,initValue:this.state.initialevisiblity,containerStyle:{marginRight:10,marginTop:10},visible:r,labelText:"Include Free Units",labelLeft:!0,labelStyle:{color:"#999999"}}))),f.default.createElement("div",{className:"col-sm-12"},f.default.createElement(h.default,{isCustomerDataForOtherAuthors:this.state.isCustomerDataForOtherAuthors,loadingTable:this.state.loadingTable,loadingAuthorTable:this.state.loadingAuthorTable,isFreeTopBooks:this.state.includeFreeTop,loadingToggleTop:this.state.loadingToggleTop,loadingPage:this.state.loadingPage,bookType:this.state.bookTypeTop,searchedBook:this.state.eanTop,includeFreeAuthor:this.state.includeFreeTop}))),this.state.authorOnLoad&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(_.default,null)),this.state.loadingTable&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(_.default,null)),this.state.loadingAuthorTable&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(_.default,null)),this.state.loadingToggleTop&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(_.default,null))),f.default.createElement("div",{className:"position-relative"},f.default.createElement("div",{className:"analytics-margin"},f.default.createElement("div",null,f.default.createElement("div",{className:"purchasebycategory map-main"},f.default.createElement("div",{className:"heading-container analytics-margin-top col-sm-8"},f.default.createElement("h3",{className:"tooltip-description"},"Your Customers by Geographic Location"),f.default.createElement(C.default,{info:!0,text:"This graph shows you the number of customers you have by state in the United States. The Top 10 states ranked by customer count is listed below the map.",trigger:"focus"},f.default.createElement("span",{className:"Whats-This"},"What's This?")),f.default.createElement("div",{className:"widget no-margin-bottom"},f.default.createElement("div",{className:"widget-panel-content"},f.default.createElement("div",{className:"controls clearfix"},f.default.createElement("ul",{className:"book-type"},f.default.createElement("li",{className:this.getHeaderStylesforMap("all-books",this.state.bookTypeMap,o.ALL,this.state.bookTypeEnabled),onClick:function(){return n.onFilterAllMapBooks(o.ALL)}},"All Books"),f.default.createElement("li",{className:this.getHeaderStylesforMap("ebook",this.state.bookTypeMap,o.EBOOK,this.state.bookTypeEnabled),onClick:function(){return n.onFilterEMapBooks(o.EBOOK)}},"eBook"),f.default.createElement("li",{className:this.getHeaderStylesforMap("print",this.state.bookTypeMap,o.PRINT,this.state.bookTypeEnabled),onClick:function(){return n.onFilterPrintMapBooks(o.PRINT)}},"Print")))))),f.default.createElement("div",{className:"col-sm-4 project-list-search project-sort-options search-box search-icon-eaa"},f.default.createElement(b.default,null,f.default.createElement(O.default,{label:"Search Book by Title, ISBN, Series",ref:"projectSearch",filterOption:this.state.filterOption,defaultDropdownSelection:!0,onSubmit:this.onMapSuggestionSelected,eaaSearch:this.state.eaaSearchStatus,noValue:"true"})),f.default.createElement("div",{className:"ToggleCustomer",style:{display:this.state.isHiddenMap?"block":"none"}},f.default.createElement(N.default,{action:this.onFreeFilterToggleMap,onClick:this.onFreeFilterToggleMap,initValue:this.state.initialevisiblity,containerStyle:{marginRight:10,marginTop:10},visible:r,labelText:"Include Free Units",labelLeft:!0,labelStyle:{color:"#999999"}}))),f.default.createElement("div",{className:"col-sm-12"},f.default.createElement("div",{className:"map-container"},this.state.hasData&&(this.state.incluedeFreeMap||this.state.isSearched||this.state.bookTypeMap===o.EBOOK||this.state.bookTypeMap===o.PRINT)&&!this.state.loadingPage&&!this.state.loadingMap&&!this.state.loadingMapToggle&&!this.state.loadingMapFilter&&f.default.createElement("div",{className:"edgeCaseMessageMap col-sm-12 col-md-8 col-xs-12 col-lg-6"},f.default.createElement("div",{className:"edgeCaseMessageStyleMap"},f.default.createElement("p",{className:"searchCriteria"},"We found no data matching your search criteria."),f.default.createElement("p",null,"Search Term:",f.default.createElement("strong",null,i)),f.default.createElement("p",null,"Book Type:",f.default.createElement("strong",null,s)),this.state.bookTypeMap!=o.PRINT&&f.default.createElement("p",null," Include Free:",f.default.createElement("strong",null,u)))),this.state.hasData&&this.state.bookTypeMap===o.ALL&&!this.state.incluedeFreeMap&&!this.state.isSearched&&!this.state.loadingPage&&!this.state.loadingMap&&!this.state.loadingMapToggle&&!this.state.loadingMapFilter&&f.default.createElement("div",{className:"map-edgetext"},"You currently don't have geographic data."),f.default.createElement("div",{className:this.state.hasData},f.default.createElement("div",{className:this.state.mapColor},f.default.createElement(v.default,{isToolTip:!this.state.hasData,isEnableMouseTracking:!this.state.hasData})))),l&&f.default.createElement("div",{className:"top10-container"},f.default.createElement("div",{className:this.state.mapColor},f.default.createElement("h2",{className:"background"},f.default.createElement("span",null,"TOP 10 STATES")),l.map(function(e){return 0==e.count?f.default.createElement("div",{className:"top10-row"},f.default.createElement("span",{className:"map-number"},e.rank)," ",f.default.createElement("div",{className:"map-state"}),f.default.createElement("strong",null," -- (0) ")):f.default.createElement("div",{className:"top10-row"},f.default.createElement("span",{className:"map-number"},e.rank)," ",f.default.createElement("div",{className:"map-state"},e.state),f.default.createElement("strong",null,"(",e.count.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),")"))}),l.length<1&&this.state.hasData&&!this.state.isSearched&&f.default.createElement("div",null,f.default.createElement("div",{className:"top10-row"},f.default.createElement("span",{className:"map-number"},"1")," ",f.default.createElement("div",{className:"map-state"}),f.default.createElement("strong",null," -- (0) ")),f.default.createElement("div",{className:"top10-row"},f.default.createElement("span",{className:"map-number"},"2")," ",f.default.createElement("div",{className:"map-state"}),f.default.createElement("strong",null," -- (0) ")),f.default.createElement("div",{className:"top10-row"},f.default.createElement("span",{className:"map-number"},"3")," ",f.default.createElement("div",{className:"map-state"}),f.default.createElement("strong",null," -- (0) ")),f.default.createElement("div",{className:"top10-row"},f.default.createElement("span",{className:"map-number"},"4")," ",f.default.createElement("div",{className:"map-state"}),f.default.createElement("strong",null," -- (0) ")),f.default.createElement("div",{className:"top10-row"},f.default.createElement("span",{className:"map-number"},"5")," ",f.default.createElement("div",{className:"map-state"}),f.default.createElement("strong",null," -- (0) ")),f.default.createElement("div",{className:"top10-row"},f.default.createElement("span",{className:"map-number"},"6")," ",f.default.createElement("div",{className:"map-state"}),f.default.createElement("strong",null," -- (0) ")),f.default.createElement("div",{className:"top10-row"},f.default.createElement("span",{className:"map-number"},"7")," ",f.default.createElement("div",{className:"map-state"}),f.default.createElement("strong",null," -- (0) ")),f.default.createElement("div",{className:"top10-row"},f.default.createElement("span",{className:"map-number"},"8")," ",f.default.createElement("div",{className:"map-state"}),f.default.createElement("strong",null," -- (0) ")),f.default.createElement("div",{className:"top10-row"},f.default.createElement("span",{className:"map-number"},"9")," ",f.default.createElement("div",{className:"map-state"}),f.default.createElement("strong",null," -- (0) ")),f.default.createElement("div",{className:"top10-row"},f.default.createElement("span",{className:"map-number"},"10")," ",f.default.createElement("div",{className:"map-state"}),f.default.createElement("strong",null," -- (0) "))))))))),this.state.loadingMap&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(_.default,null)),this.state.loadingMapFilter&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(_.default,null)),this.state.loadingMapToggle&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(_.default,null)))))),!a&&f.default.createElement("div",{className:"no-permission"},"Oops you don't have permission to access this page"))}}])&&M(t.prototype,a),n&&M(t,n),o}();t.default=x},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var y=o(a(0)),b=o(a(1)),p=(a(2),n(a(68))),u=o(a(74)),g=o(a(1094)),v=o(a(6)),m=o(a(38)),E=o(a(51)),S=n(a(57)),k=o(a(46)),P=o(a(209)),w=o(a(210)),O=o(a(61)),C=o(a(134)),N=o(a(3)),c=(n(a(9)),n(a(75)));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,o=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=i(o).call(this,e))||"object"!==r(n)&&"function"!=typeof n?d(a):n).state={categoriesState:[],seriesState:[],eanBar:"",customerData:"",leaflevelState:[],categoriesLenghtState:"",bookTypeEnabled:!0,loading:!1,loadingFilter:!1,loadingToggleBar:!1,isFreeFilterEnabled:!0,renderData:"",hasNoData:"",isSearchedData:"",searchedBook:"",includefreebookvalue:!1,bookType:S.BOOK_TYPES.ALL,categoryIdState:"",categoriesIdState:[],crumbsState:[],crumbsIdState:[],isHidden:!0,onPageloading:!1,eaaSearchStatus:!0},t.onBarItemClicked=t.onBarItemClicked.bind(d(d(t))),t.onBarGraphResultLoaded=t.onBarGraphResultLoaded.bind(d(d(t))),t.getHeaderStyles=t.getHeaderStyles.bind(d(d(t))),t.onFilterAllBarGraphBooks=t.onFilterAllBarGraphBooks.bind(d(d(t))),t.onFilterPrintBarGraphBooks=t.onFilterPrintBarGraphBooks.bind(d(d(t))),t.onFilterEBookBarGraphBooks=t.onFilterEBookBarGraphBooks.bind(d(d(t))),t.onBarChartSuggestionSelected=t.onBarChartSuggestionSelected.bind(d(d(t))),t.isEmpty=t.isEmpty.bind(d(d(t))),t.onFreeFilterToggleBar=t.onFreeFilterToggleBar.bind(d(d(t))),t.toggleHidden=t.toggleHidden.bind(d(d(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,y.default.Component),t=o,(a=[{key:"toggleHidden",value:function(){this.setState({})}},{key:"onBarChartSuggestionSelected",value:function(e){var t=document.getElementsByClassName("project-list-search")[2].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;if(document.getElementsByClassName(n).length&&"no match"==document.getElementsByClassName(n)[0].firstElementChild.innerText.toLowerCase())return t.getElementsByTagName("input")[0].value="",document.getElementById(n).parentElement.parentElement.classList.add("error"),document.getElementById(n).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.classList.add("nomatch-active"),document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="Please search for your Title, ISBN or Series",setTimeout(function(){t.getElementsByTagName("input")[0].value=""},500),document.getElementsByClassName(n)[0].parentElement.parentElement.style.display="none",!0;if((null==e||""==e.newValue)&&""==a){var o={ean:"",categoryName:"",projectType:this.state.bookType,includeFree:this.state.includefreebookvalue};p.getBarGraphDetails(o),this.setState({isSearchedData:!1,eanBar:"",loading:!0,categoryIdState:""})}else{var r,l=e&&e.currentTarget?e.currentTarget.parentNode.firstElementChild.lastElementChild.lastElementChild.lastElementChild.firstElementChild.firstElementChild:null,i=null!==l?l.innerText:"";if(void 0===e)return;if(r=void 0===e.newValue?i:e.newValue,e&&e.currentTarget){var s=document.getElementsByClassName("options-dropdown")[1].getElementsByTagName("UL")[0].getElementsByTagName("LI")[0],u=e.currentTarget.parentNode.firstElementChild.lastElementChild.firstElementChild.value;if(void 0!==s)s.click();else if(""!==u&&null==s)return}if(""!==r){var c=m.default.findProjectForEaa(r);if(null!=c){var d={ean:c.title,categoryName:"",projectType:this.state.bookType,includeFree:this.state.includefreebookvalue};p.getBarGraphDetails(d),this.setState({eanBar:c.title,isSearchedData:!0,loading:!0,searchedBook:r,categoryIdState:""})}}else{var f={ean:"",categoryName:"",projectType:this.state.bookType,includeFree:this.state.includefreebookvalue};p.getBarGraphDetails(f),this.setState({isSearchedData:!1,eanBar:"",loading:!0,categoryIdState:""})}}}},{key:"componentWillMount",value:function(){u.default.addBarGraphLoadedListener(this.onBarGraphResultLoaded),this.setState({onPageloading:!0})}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){u.default.removeBarGraphLoadedListener(this.onBarGraphResultLoaded)}},{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"onBarItemClicked",value:function(e){for(var t,a=0;a<this.state.categoriesLenghtState;a++)e.category===this.state.categoriesState[a]&&(t=this.state.categoriesIdState[a],this.setState({categoryIdState:t}));var n={ean:this.state.eanBar,categoryId:t,projectType:this.state.bookType,includeFree:this.state.includefreebookvalue};p.getBarGraphDetails(n)}},{key:"onFilterAllBarGraphBooks",value:function(e){var t=document.getElementsByClassName("project-list-search")[2].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.eanBar:"",categoryId:this.state.categoryIdState,categoryName:"",projectType:"ALL",includeFree:this.state.includefreebookvalue};p.getBarGraphDetails(o),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingFilter:!0,isHidden:!0})}},{key:"onFilterEBookBarGraphBooks",value:function(e){var t=document.getElementsByClassName("project-list-search")[2].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.eanBar:"",categoryId:this.state.categoryIdState,categoryName:"",projectType:"EBOOK",includeFree:this.state.includefreebookvalue};p.getBarGraphDetails(o),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingFilter:!0,isHidden:!0})}},{key:"onFilterPrintBarGraphBooks",value:function(e){var t=document.getElementsByClassName("project-list-search")[2].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.eanBar:"",categoryId:this.state.categoryIdState,categoryName:"",projectType:"SPB",includeFree:this.state.includefreebookvalue};p.getBarGraphDetails(o),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingFilter:!0,isHidden:!1})}},{key:"onFreeFilterToggleBar",value:function(){var e=document.getElementsByClassName("project-list-search")[2].getElementsByClassName("input-area")[0],t=e.getElementsByTagName("input")[0].value,a=e.getElementsByTagName("input")[0].id;document.getElementById(a).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(a).parentElement.parentElement.classList.remove("error"),this.setState(function(e){return{includefreebookvalue:!e.includefreebookvalue}});var n={ean:t?this.state.eanBar:"",categoryId:this.state.categoryIdState,projectType:this.state.bookType,includeFree:!this.state.includefreebookvalue};p.getBarGraphDetails(n),this.setState({loadingToggleBar:!0})}},{key:"getHeaderStyles",value:function(e,t,a,n){return n=E.default.hasUserPublishedBefore()&&n,(0,b.default)(e,{"active-selection":t===a})}},{key:"loadBarGraph",value:function(){var e=u.default.barGraphData();if(c.getEaaSubscription(),this.isEmpty(e)||this.isEmpty(e.result))this.setState({renderData:!1,hasNoData:!0});else{var t=e.result.categories.map(function(e){return e.leafLevel}),a=e.result.categories.map(function(e){return e.category}),n=e.result.categories.map(function(e){return e.categoryId}),o=e.result.crumbs.map(function(e){return e.name}),r=e.result.crumbs.map(function(e){return e.id}),l=a.length,i={name:"unitsSold ",data:e.result.categories.map(function(e){return{category:e.category,y:e.years.map(function(e){return parseInt(e.count)}).reduce(function(e,t){return e+t},0)}})},s=[];s.push(i),this.setState({customerData:e,categoriesState:a,seriesState:s,leaflevelState:t,categoriesLenghtState:l,categoriesIdState:n,crumbsState:o,crumbsIdState:r,renderData:!0,hasNoData:!1})}this.state.isSearchedData&&this.setState({hasNoData:!1}),this.setState({loading:!1,loadingFilter:!1,loadingToggleBar:!1})}},{key:"onBarGraphResultLoaded",value:function(){this.loadBarGraph(),this.setState({loading:!0,onPageloading:!1}),setTimeout(function(){this.loadBarGraph(),this.setState({loading:!1})}.bind(this),2e3)}},{key:"breadCrumbs",value:function(e){for(var t,a=0;a<this.state.crumbsState.length;a++)e===this.state.crumbsState[a]&&(t=this.state.crumbsIdState[a],this.setState({categoryIdState:t}));var n={ean:this.state.eanBar,categoryId:t,projectType:this.state.bookType,includeFree:this.state.includefreebookvalue};p.getBarGraphDetails(n)}},{key:"render",value:function(){var e,t,r=this,a=S.BOOK_TYPES,n="",o=this.state.eanBar?this.state.eanBar:"None Provided",l="";l=(this.state.bookType===a.ALL||this.state.bookType===a.EBOOK)&&this.state.includefreebookvalue?"Yes":"No";var i="";this.state.bookType===a.ALL?i="All Books":this.state.bookType==a.EBOOK?i="eBook":this.state.bookType==a.PRINT&&(i="Print Book"),this.props.loadingPage||this.state.bookType!==a.ALL||this.state.isSearchedData||this.state.loading||this.state.loadingToggleBar||this.state.loadingFilter||(n=y.default.createElement("p",{className:"text-center no-results searchEdgeCase"},"No other categories purchased by your customers.")),(this.state.isSearchedData||this.state.bookType===a.EBOOK||this.state.bookType===a.PRINT||this.state.includefreebookvalue)&&(this.props.loadingPage||this.state.loading||this.state.loadingToggleBar||this.state.loadingFilter||(n=y.default.createElement("div",{className:"text-center no-results searchEdgeCase"},y.default.createElement("p",{className:"searchTermStyle"},"We found no data matching your search criteria."),y.default.createElement("p",null,"Search Term:",y.default.createElement("strong",null,o)),y.default.createElement("p",null,"Book Type:",y.default.createElement("strong",null,i)),this.state.bookType!==a.PRINT&&y.default.createElement("p",null,"Include Free:",y.default.createElement("strong",null,l)))));var s=(this.state.bookType===a.ALL||this.state.bookType==a.EBOOK)&&"unitsSold"===this.props.dataIdentifier,u=[],c=!0,d=!1,f=void 0;try{for(var p,m=function(){var e=_(p.value,2),t=e[0],a=e[1],n="",o="";t!=r.state.crumbsState.length-1&&(n=">",o="marginRight"),t==r.state.crumbsState.length-1&&(o="disableLink"),u.push(y.default.createElement("a",{key:t,className:o,onClick:function(){return r.breadCrumbs(a)}},a," Â  ",n))},h=this.state.crumbsState.entries()[Symbol.iterator]();!(c=(p=h.next()).done);c=!0)m()}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}return y.default.createElement("div",{className:(0,b.default)("sales-chart-widget","widget")},y.default.createElement("div",{className:"position-relative"},y.default.createElement("div",{className:"col-sm-8"},y.default.createElement("div",{className:"analytics-margin-top"},y.default.createElement("h3",{className:"tooltip-description"},"Top Categories Purchased by Your Customers"),y.default.createElement(O.default,{info:!0,text:"This graph shows you the number of books from different categories and sub-categories that your customers purchased in addition to purchasing your titles. You can drill down from category to sub-category level by clicking on the bar or on the yellow arrow next to the category name underneath each bar graph element to see the book count at the sub-category level. You can keep going further down the sub-categories until you reach the lowest level sub-category in that genre.",trigger:"focus"},y.default.createElement("span",{className:"Whats-This"},"What's This?"))),y.default.createElement("div",{className:"margin-top-tabs no-margin-bottom"},y.default.createElement("div",{className:"controls clearfix"},y.default.createElement("ul",{className:"book-type"},y.default.createElement("li",{className:this.getHeaderStyles("all-books",this.state.bookType,a.ALL,this.state.bookTypeEnabled),onClick:function(){return r.onFilterAllBarGraphBooks(a.ALL)}},"All Books"),y.default.createElement("li",{className:this.getHeaderStyles("ebook",this.state.bookType,a.EBOOK,this.state.bookTypeEnabled),onClick:function(){return r.onFilterEBookBarGraphBooks(a.EBOOK)}},"eBook"),y.default.createElement("li",{className:this.getHeaderStyles("print",this.state.bookType,a.PRINT,this.state.bookTypeEnabled),onClick:function(){r.onFilterPrintBarGraphBooks(a.PRINT),r.toggleHidden()}},"Print"))))),y.default.createElement("div",{className:"col-sm-4 project-list-search project-sort-options search-box search-icon-eaa"},y.default.createElement(v.default,null,y.default.createElement(k.default,{label:"Search Book by Title, ISBN, Series",ref:"projectSearch",defaultDropdownSelection:!0,filterOption:this.state.filterOption,onSubmit:this.onBarChartSuggestionSelected,eaaSearch:this.state.eaaSearchStatus,noValue:"true"})),y.default.createElement("div",{className:"ToggleCustomer",style:{display:this.state.isHidden?"block":"none"}},y.default.createElement(C.default,{action:this.onFreeFilterToggleBar,onClick:this.onFreeFilterToggleBar,initValue:this.state.ishidden,containerStyle:{marginRight:10,marginTop:10},visible:s,labelText:"Include Free Units",labelLeft:!0,labelStyle:{color:"#999999"}}))),y.default.createElement("div",{className:"booktype-"+this.state.bookType.toLowerCase()},y.default.createElement(P.default,null,y.default.createElement(w.default,{id:"srGradient-0",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]}),y.default.createElement(w.default,{id:"srGradient-1",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]}),y.default.createElement(w.default,{id:"srGradient-2",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]})),this.state.renderData&&y.default.createElement("div",{id:"EAA-topCategoriesBarchart"},y.default.createElement("div",{className:"left-sidebar-wrapper eaa-bar-chart"},y.default.createElement("div",{className:"left-sidebar-container projects"},y.default.createElement("div",{className:"container"},y.default.createElement("div",{className:"widget-information desktop-table"},y.default.createElement("p",{className:"align-left"},u),y.default.createElement(g.default,(T(e={type:this.props.chartType,disabled:!E.default.hasUserPublishedBefore(),format:this.props.chartLabelFormat,categories:this.state.categoriesState,series:this.state.seriesState,stackable:this.props.stackable,leaflevelState:this.state.leaflevelState,formatYAxisLabel:function(){return null},onBarItemClicked:this.onBarItemClicked,customerData:this.state.customerData},"leaflevelState",this.state.leaflevelState),T(e,"categoriesLenghtState",this.state.categoriesLenghtState),T(e,"tooltipEnabled",!0),e))),y.default.createElement("div",{className:"widget-information mobile-table"},y.default.createElement("p",{className:"align-left breadCrumbs-font"},u),y.default.createElement(g.default,(T(t={type:this.props.chartType,disabled:!E.default.hasUserPublishedBefore(),format:this.props.chartLabelFormat,categories:this.state.categoriesState,series:this.state.seriesState,stackable:this.props.stackable,leaflevelState:this.state.leaflevelState,formatYAxisLabel:function(){return null},onBarItemClicked:this.onBarItemClicked,customerData:this.state.customerData},"leaflevelState",this.state.leaflevelState),T(t,"categoriesLenghtState",this.state.categoriesLenghtState),T(t,"tooltipEnabled",!1),t))))))),!this.state.renderData&&y.default.createElement("div",{className:"left-sidebar-wrapper"},y.default.createElement("div",{className:"left-sidebar-container projects"},y.default.createElement("div",{className:"container"},y.default.createElement("div",{className:"widget-information"},y.default.createElement("p",{className:"barchartEdgeCase"},n)))))),this.state.loading&&y.default.createElement("div",{className:"spinner-area"},y.default.createElement(N.default,null)),this.state.loadingFilter&&y.default.createElement("div",{className:"spinner-area"},y.default.createElement(N.default,null)),this.state.loadingToggleBar&&y.default.createElement("div",{className:"spinner-area"},y.default.createElement(N.default,null)),this.state.onPageloading&&y.default.createElement("div",{className:"spinner-area"},y.default.createElement(N.default,null))))}}])&&l(t.prototype,a),n&&l(t,n),o}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(22)),i=n(a(1095));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){o(t,e,a[e])})}return t}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?f(a):n).yAxisLabelFormatter=function(e){return l.formatWithCommas(e.value.toString())},t.getInitialState=t.getInitialState.bind(f(f(t))),t.state=t.getInitialState(),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var r=this;this.chart=i.default.chart(this.refs.chart,{chart:b({type:"column",animation:!0,backgroundColor:null,events:{click:function(e){var t={category:this.series[0].searchPoint(e,!0).category},a=r.props.categories.indexOf(this.series[0].searchPoint(e,!0).category);!1===r.props.leaflevelState[a]&&r.props.onBarItemClicked(t)}}},this.state.options.chart),credits:{enabled:!1},legend:{enabled:!1},title:b({},this.state.options.title),xAxis:{categories:this.state.options.categories,crosshair:!0,min:0,max:0,scrollbar:{enabled:!0,showFull:!1},tickLength:0,labels:{useHTML:!0,formatter:function(){for(var e=r.props.leaflevelState.length,t=0;t<=e;t++)return 0==r.props.leaflevelState[t]?'<img src="/images/yellow-arrow.png"/> <label class="arrow-gap">'+this.value+"</label>":'<label class="without-arrow-gap">'+this.value+"</label>"}}},yAxis:{min:0,max:100,minorGridLineWidth:0,tickAmount:8,allowDecimals:!1,title:{text:null},labels:{formatter:function(){return r.props.formatYAxisLabel?r.props.formatYAxisLabel(this):r.yAxisLabelFormatter(this)}},stackLabels:{style:{color:"black",fontSize:".9em",fontWeight:"bolder"},useHTML:!0,enabled:null!==this.props.stackable&&this.props.stackable,verticalAlign:"top",y:-20,formatter:function(){if(void 0===this.x||null===this.x)return this.x;if(r.props.applyColumnLabel){for(var e={seriesIndex:this.x},t=0;t<r.props.series.length;t++)e[r.props.series[t].name]=r.props.series[t].data[this.x].y;return r.props.applyColumnLabel(this.x,e)}return"currency"===r.props.type&&r.props.format?r.props.format+l.formatWithCommas(this.total.toString()):l.formatWithCommas(this.total.toString())}}},tooltip:{enabled:this.props.tooltipEnabled,useHTML:!0,shared:!0,backgroundColor:"none",borderWidth:0,shadow:!1,formatter:function(){var a=this,n=0,e=r.props.customerData.result.categories.map(function(e){if(e.category!==a.x)return"";var t="";return e.years.map(function(e){t+=e.year+" :<b> "+e.count.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"<br/></b>",n+=parseInt(e.count)}),t}),t=0<(e=e.filter(function(e){return 0<e.length})).length?e[0]:"",o="Total : "+n.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");return"<b>"+this.x+"</b><br/><b>"+o+"</b><br/><div>"+t}},plotOptions:{column:{cropThreshold:1e4,pointPadding:-.2,stacking:"normal",borderWidth:0,events:{click:function(e){}},maxPointWidth:78},series:{minPointLength:5,dataLabels:{enabled:null==this.props.stackable||!this.props.stackable,inside:!1,crop:!1,overflow:!1,verticalAlign:"bottom",formatter:function(){if(void 0===this.y||null===this.y)return this.y;if(r.props.applyColumnLabel){for(var e={seriesIndex:this.series.index},t=0;t<r.props.series.length;t++)e[r.props.series[t].name]=r.props.series[t].data[this.point.index].y;return r.props.applyColumnLabel(this.point.index,e)}return"currency"===r.props.type&&r.props.format?r.props.format+l.formatWithCommas(this.y.toString()):l.formatWithCommas(this.y.toString())}},point:{events:{click:function(){var e=r.props.categories.indexOf(this.category);!1===r.props.leaflevelState[e]&&r.props.onBarItemClicked(this)}}}}},series:this.state.options.series})}},{key:"componentWillReceiveProps",value:function(e){this.props.series===e.series&&this.props.categories===e.categories||this.updateChart(e.categories,e.series,this.yAxisLabelFormatter)}},{key:"getMaxChartValue",value:function(e){for(var t=0,a=0;a<e[0].data.length;a++){for(var n=0,o=0;o<e.length;o++)n+=void 0!==e[o].data[a].y?e[o].data[a].y:e[o].data[a];t<n&&(t=n)}return t}},{key:"getInitialState",value:function(){var e={options:{chart:{},title:{text:null}}};return this.props.title?e.options.title.text=this.props.title:e.options.chart.marginTop=30,this.props.subtitle&&(e.options.subtitle={text:this.props.subtitle}),e.options.categories=this.props.categories,e.options.series=this.props.series,e.options.customerData=this.props.customerData,e}},{key:"updateChart",value:function(e,a,n){var o=this,r=this.chart,t=r.xAxis[0],l=r.yAxis[0],i=(r.series[0],l.getExtremes()),s=(t.getExtremes(),0);if(a&&0<a.length)for(var u=0;u<a[0].data.length;u++){for(var c=0,d=0;d<a.length;d++)c+=void 0!==a[d].data[u].y?a[d].data[u].y:a[d].data[u];s<c&&(s=c)}if(0===s)s=100;else{var f=Math.floor(100*Math.log(s)/Math.log(10)/100);s+=f<=1?5:2*Math.pow(10,f-1)}var p=0;p=6<=e.length?5:e.length-1;for(var m=[],h=0;h<t.categories.length;h++)m.push(0);t.setExtremes(0,p,!0),l.setExtremes(i.min,i.max,!1);for(var y=0;y<r.series.length;y++)r.series[y].setData(m,!1);r.redraw(),setTimeout(function(){t.setCategories(e,!1),r.redraw(),setTimeout(function(){o.yAxisLabelFormatter=n;o.props;l.setExtremes(0,s,!1);for(var e=0;e<a.length;e++){var t=b({},a[e],{className:a[e].name});e>=r.series.length?r.addSeries(t,!1,!0):(r.series[e].update({className:a[e].name}),r.series[e].setData(a[e].data,!1))}r.redraw()},0)},0)}},{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement("div",{ref:"chart",className:"bar-chart"}))}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=p},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.between=void 0;t.between=function(e,o){var t=[],a=function(e){for(var t=0,a=e.length-1,n=-1;t<=a;)n=Math.floor(t+(a-t)/2),o(e[n])<0?t=n+1:a=n-1;return t<=e.length-1&&0<=t&&0!=o(e[t])?-1:t}(e),n=function(e){for(var t=0,a=e.length-1,n=-1;t<=a;)n=Math.floor(t+(a-t)/2),0<o(e[n])?a=n-1:t=n+1;return a<=e.length-1&&0<=a&&0!==o(e[a])?-1:a}(e);if(-1<a)for(var r=a;r<=n;r++)t.push(e[r]);return t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.provideContributorAccess=function(e,t,a){n.provideContributorAccess(e,a).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.updateContributorAccess=function(e,t,a){n.updateContributorAccess(e,a).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getContributorDetails=function(e,t,a){n.getContributorDetails(e,a).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getAccessEnumValue=function(t,e){n.getAccessEnumValue(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getEaaSubscription=function(t,e){n.getEaaSubscription(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getEaaSubscriptionPlan=function(t,e){n.getEaaSubscriptionPlan(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.deleteContributor=function(e,t,a){n.deleteContributor(e,a).then(function(e){try{t(e)}catch(e){console.log(e)}})};var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(1098))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.provideContributorAccess=function(e,t){return n.post("/api/analytics/addContributor",{queryParam:e},t)},t.updateContributorAccess=function(e,t){return n.post("/api/analytics/updateContributor",{queryParam:e},t)},t.getContributorDetails=function(e,t){return n.get("/api/analytics/getContributor",{queryParam:e},t)},t.getAccessEnumValue=function(e){return n.get("/api/analytics/accessEnumList",{},e)},t.deleteContributor=function(e,t){return n.del("/api/analytics/deleteContributor/"+e,{},t)},t.getEaaSubscription=function(e){return n.get("/api/analytics/getEaaSubscription",{},e)},t.getEaaSubscriptionPlan=function(e){return n.get("/api/analytics/getEaaSubscriptionPlan",{},e)};var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(67))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(a(0)),r=(n(a(68)),o(a(74))),i=n(a(57)),s=(o(a(61)),n(a(75)));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={otherAuthorsData:"",renderData:"",hasNoData:"",includefreebookvalue:!1},t.onCustomerDataOtherAuthorsLoaded=t.onCustomerDataOtherAuthorsLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,l.default.Component),t=o,(a=[{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"componentWillMount",value:function(){r.default.addCustomerDataForOtherAuthorsListener(this.onCustomerDataOtherAuthorsLoaded)}},{key:"componentWillUnmount",value:function(){r.default.removeCustomerDataForOtherAuthorsListener(this.onCustomerDataOtherAuthorsLoaded)}},{key:"componentDidMount",value:function(){}},{key:"onCustomerDataOtherAuthorsLoaded",value:function(){var e=r.default.otherAuthersData();s.getEaaSubscription(),this.isEmpty(e.result.titles)?this.setState({renderData:!1,hasNoData:!0}):this.setState({otherAuthorsData:e,renderData:!0,hasNoData:!1}),this.props.isCustomerDataForOtherAuthors&&this.setState({hasNoData:!1})}},{key:"render",value:function(){var e=i.BOOK_TYPES,t="",a=this.props.searchedBook?this.props.searchedBook:"None Provided",n="";n=(this.props.bookType===e.ALL||this.props.bookType===e.EBOOK)&&this.props.includeFreeAuthor?"Yes":"No";var o,r="";return this.props.bookType===e.ALL?r="All Books":this.props.bookType==e.EBOOK?r="eBook":this.props.bookType==e.PRINT&&(r="Print Book"),this.props.loadingPage||this.props.bookType!==e.ALL||this.props.searchedBook||this.props.loadingTable||this.props.loadingToggleTop||this.props.loadingAuthorTable||(t=l.default.createElement("p",{className:"text-center no-results searchEdgeCaseTop"},"You currently don't have data for top books also purchased by your customers.")),(this.props.isCustomerDataForOtherAuthors||this.props.bookType===e.EBOOK||this.props.bookType===e.PRINT||this.props.includeFreeAuthor)&&(this.props.loadingPage||this.props.loadingTable||this.props.loadingToggleTop||this.props.loadingAuthorTable||(t=l.default.createElement("div",{className:"text-center no-results searchEdgeCaseTopBooks"},l.default.createElement("p",{className:"searchTermStyle"},"We found no data matching your search criteria."),l.default.createElement("p",null,"Search Term:",l.default.createElement("strong",null,a)),l.default.createElement("p",null,"Book Type:",l.default.createElement("strong",null,r)),this.props.bookType!==e.PRINT&&l.default.createElement("p",null,"Include Free:",l.default.createElement("strong",null,n))))),this.state.otherAuthorsData&&(o=this.state.otherAuthorsData.result.titles),l.default.createElement("div",{className:"padding-reading-table  article-main"},this.state.renderData&&l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-6 col-xs-12"},o&&o.slice(0,5).map(function(e,t){var a=e.title,n=(e.countInYear,e.thumbNail),o=e.productPageUrl,r=e.author;return l.default.createElement("div",{key:t,className:"col-md-12 col-xs-12 margin-bottom15 hover-thumbnail padding-thumbnail"},l.default.createElement("a",{href:o,target:"_blank"},l.default.createElement("div",{className:"col-md-2 col-xs-2"},l.default.createElement("img",{className:"size-thumbnail",src:n})),l.default.createElement("div",{className:"col-md-10 paddingLeft-thumbnail position-thumbnail-relative col-xs-10"},l.default.createElement("div",{className:"index-thumbnail"}," ",t+1),l.default.createElement("div",{className:"position-thumbnail-absolute"},l.default.createElement("div",{className:"title-thumbnail clampMe"},a),l.default.createElement("div",{className:"author-thumbnail"},r)))))})),l.default.createElement("div",{className:"col-md-6 col-xs-12"},o&&o.slice(5).map(function(e,t){var a=e.title,n=(e.countInYear,e.thumbNail),o=e.productPageUrl,r=e.author;return l.default.createElement("div",{key:t,className:"col-md-12 col-xs-12 margin-bottom15 hover-thumbnail padding-thumbnail"},l.default.createElement("a",{href:o,target:"_blank"},l.default.createElement("div",{className:"col-md-2 col-xs-2"},l.default.createElement("img",{className:"size-thumbnail",src:n})),l.default.createElement("div",{className:"col-md-10 paddingLeft-thumbnail position-thumbnail-relative col-xs-10"},l.default.createElement("div",{className:"index-thumbnail"}," ",t+6),l.default.createElement("div",{className:"position-thumbnail-absolute"},l.default.createElement("div",{className:"title-thumbnail clampMe "},a),l.default.createElement("div",{className:"author-thumbnail"},r)))))}))),!this.state.renderData&&l.default.createElement("div",null,l.default.createElement("div",{className:"height-customer-table"},t)))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(a(22)),n(a(148)));function n(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){o(t,e,a[e])})}return t}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==l(n)&&"function"!=typeof n?f(a):n).yAxisLabelFormatter=function(e){return e.value},t.adjustMultiLine=t.adjustMultiLine.bind(f(f(t))),t.getInitialState=t.getInitialState.bind(f(f(t))),t.getExtraSeriesAttributes=t.getExtraSeriesAttributes.bind(f(f(t))),t.onItemClicked=t.onItemClicked.bind(f(f(t))),t.state=t.getInitialState(),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var l=this;this.chart=i.default.chart(this.refs.chart,{chart:s({type:"line",animation:!0,backgroundColor:null},this.state.options.chart),credits:{enabled:!1},legend:{enabled:!1,align:"right",verticalAlign:"top",layout:"vertical",labelFormatter:function(){if(l.props.formatLegendLabel)return l.props.formatLegendLabel(this.index)},x:0,y:100},title:s({},this.state.options.title),xAxis:{categories:this.state.options.categories,crosshair:!0,labels:{useHTML:!0,formatter:function(){var e=this.value;return l.props.formatXAxisLabel&&(e=l.props.formatXAxisLabel(this)),e}}},yAxis:{min:0,max:100,tickAmount:8,allowDecimals:!1,title:{text:null},labels:{formatter:function(){return l.props.formatYAxisLabel?l.props.formatYAxisLabel(this):l.yAxisLabelFormatter(this)}}},tooltip:{enabled:!0,followPointer:!1,positioner:function(e,t,a){var n=this.chart.plotBox.width,o=a.plotX;return n-o<=125&&(o=o-e+70),{x:o,y:-5}},formatter:function(){var a="";if(l.props.formatTooltip)a=l.props.formatTooltip(this.points);else{this.points.length;var n="",o="",r="";this.points.forEach(function(e,t){switch(e.x){case"Jan":e.x+="uary";break;case"Feb":e.x+="ruary";break;case"Mar":e.x+="ch";break;case"Apr":e.x+="il";break;case"Jun":e.x+="e";break;case"Jul":e.x+="y";break;case"Aug":e.x+="ust";break;case"Sep":e.x+="tember";break;case"Oct":e.x+="ober";break;case"Nov":case"Dec":e.x+="ember"}1<l.props.series.length?l.props.series[0].name==(new Date).getFullYear()&&(-1==n.indexOf((new Date).getFullYear())?("Series 1"==e.series.name&&(n=e.x+"&nbsp"+(new Date).getFullYear()+": "+e.y.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"<br/>"),e.series.name==(new Date).getFullYear()-1?n=e.x+"&nbsp"+((new Date).getFullYear()-1)+": "+e.y.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"<br/>":e.series.name==(new Date).getFullYear()-2&&(o=e.x+"&nbsp"+((new Date).getFullYear()-2)+": "+e.y.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"<br/>")):null!=l.props.series[1]&&-1==o.indexOf((new Date).getFullYear()-1)&&l.props.series[1].name==(new Date).getFullYear()-1?o=e.x+"&nbsp"+((new Date).getFullYear()-1)+": "+e.y.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"<br/>":null!=l.props.series[1]&&-1==o.indexOf((new Date).getFullYear()-2)&&l.props.series[1].name==(new Date).getFullYear()-2?o=e.x+"&nbsp"+((new Date).getFullYear()-2)+": "+e.y.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"<br/>":null!=l.props.series[2]&&-1==r.indexOf((new Date).getFullYear()-2)&&l.props.series[2].name==(new Date).getFullYear()-2&&(r=e.x+"&nbsp"+((new Date).getFullYear()-2)+": "+e.y.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"<br/>"),a=n+o+r):a+=e.x+"&nbsp"+l.props.series[0].name+": "+e.y.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"<br/>"})}return a},useHTML:!0,shadow:!0,shared:!0},plotOptions:{column:{pointPadding:-.2,borderWidth:0,events:{click:function(e){}}},series:{dataLabels:{enabled:!0,inside:!1,crop:!1,overflow:!1,verticalAlign:"bottom",formatter:function(){}},point:{events:{click:function(){l.onItemClicked(this)}}}}},series:[{data:this.state.options.series,color:"white"}]})}},{key:"componentWillReceiveProps",value:function(e){this.props.series===e.series&&this.props.categories===e.categories||this.props.updateChart(this.chart,e.categories,this.adjustMultiLine(e.series),this.yAxisLabelFormatter)}},{key:"adjustMultiLine",value:function(e){for(var t=[e[0]],a=1;a<e.length;a++){for(var n=[],o=0;o<e[a].data.length;o++)n.push({y:e[a].data[o].y,date:e[a].data[o].date});t.push({name:e[a].name,data:n})}return t}},{key:"getExtraSeriesAttributes",value:function(e){return{marker:{symbol:"circle"}}}},{key:"onItemClicked",value:function(e){this.props.onItemClicked&&this.props.onItemClicked({date:e.date,value:e.y})}},{key:"getInitialState",value:function(){var e={options:{chart:{},title:{text:null}}};return this.props.title?e.options.title.text=this.props.title:e.options.chart.marginTop=30,this.props.subtitle&&(e.options.subtitle={text:this.props.subtitle}),e.options.categories=this.props.categories,e.options.series=this.props.series,e}},{key:"render",value:function(){return r.default.createElement("div",{className:this.props.disabled?"disabled":""},r.default.createElement("div",{ref:"chart",className:"line-chart"}))}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(n(a(13)),n(a(188))),i=n(a(148));n(a(80)),function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(a(75));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){o(t,e,a[e])})}return t}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?p(a):n).getInitialState=t.getInitialState.bind(p(p(t))),t.state=t.getInitialState(),t.updateDimensions=t.updateDimensions.bind(p(p(t))),t.updateResize=t.updateResize.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"updateDimensions",value:function(){document.getElementById("donutChart")&&this.updateResize()}},{key:"updateResize",value:function(){300<screen.width&&screen.width<=400&&(document.getElementById("donutChart").scrollLeft=280),400<screen.width&&screen.width<=450&&(document.getElementById("donutChart").scrollLeft=240),420<screen.width&&screen.width<=768&&(document.getElementById("donutChart").scrollLeft=150),768<screen.width&&screen.width<=1024&&(document.getElementById("donutChart").scrollLeft=85)}},{key:"componentDidMount",value:function(){var t=this;i.default.setOptions({colors:this.props.colors}),window.addEventListener("resize",this.updateDimensions.bind(this)),this.chart=i.default.chart(this.refs.chart,{chart:u({events:{load:function(e){setTimeout(function(){t.updateResize()},1e3)}}},this.state.chart),credits:{enabled:!1},legend:{enabled:!1},title:u({},this.state.title),tooltip:{enabled:!1},plotOptions:{pie:{cursor:"pointer",size:"85%",dataLabels:{enabled:!0,connectorShape:"crookedLine",crookDistance:"45%",alignTo:"plotEdges",format:'<span class="font-normal">{point.name}:</span> <span class="font-normal"> {point.y:.1f} %</span>'}}},series:[{colorByPoint:!0,innerSize:"60%",data:this.state.data,enableMouseTracking:!1}]})}},{key:"componentWillReceiveProps",value:function(e){var t=this.chart,a=t.series[0];this.props.title!==e.title&&t.setTitle({text:l.default.renderToString(e.title)},"",!0),this.props.data!==e.data&&a.setData(e.data,!0)}},{key:"getInitialState",value:function(){var e={colors:this.props.colors,chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",height:this.props.height,width:this.props.width},data:this.props.data,title:{text:null,useHTML:!0,verticalAlign:"middle"}};return this.props.title&&(e.title.text=l.default.renderToString(this.props.title)),e}},{key:"render",value:function(){var e={height:this.props.height,width:this.props.width};return r.default.createElement("div",{ref:"chart",style:e})}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=(n(a(243)),a(43)),i=n(a(537)),s=n(a(538)),u=(o(a(68)),n(a(74))),c=o(a(75));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function n(){var e,t,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(a=p(n).call(this))||"object"!==d(a)&&"function"!=typeof a?h(t):a).state={data:[],includefreebookvalue:!1},e.mapResultLoaded=e.mapResultLoaded.bind(h(h(e))),e}var t,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,r.Component),t=n,(a=[{key:"componentWillMount",value:function(){u.default.addMapListener(this.mapResultLoaded)}},{key:"componentWillUnmount",value:function(){u.default.removeMapListener(this.mapResultLoaded)}},{key:"mapResultLoaded",value:function(){var e=u.default.mapData();c.getEaaSubscription();var t={title:{text:""},colorAxis:{max:10,min:1,minColor:"#317DA3",maxColor:"#C1E0F0",type:"logarithmic"},tooltip:{enabled:this.props.isToolTip,followPointer:!1,backgroundColor:"#fff",borderWidth:0,shadow:!0,useHTML:!0,padding:0,formatter:function(){return"<div><strong>"+this.point.options.state+"</strong></div><div>Customers: <strong>"+this.point.options.count.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"</strong></div><div>Rank: <strong>"+this.point.options.rank+"</strong></div>"}},subtitle:{text:"TOP 10 STATES",floating:!1,align:"right",y:50,style:{fontSize:"13px",color:"#337ab7"}},series:[{mapData:s.default,data:e?e.result.states:[],name:"",enableMouseTracking:this.props.isEnableMouseTracking,dataLabels:{enabled:!1,format:""}}],mapNavigation:{enabled:!0,buttonOptions:{verticalAlign:"top"}}};this.chart=new i.default.Map((0,l.findDOMNode)(this),t)}},{key:"componentDidMount",value:function(){this.mapResultLoaded()}},{key:"render",value:function(){return r.default.createElement("div",{className:"in-highchart"})}}])&&f(t.prototype,a),o&&f(t,o),n}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=o(a(0)),r=a(2),c=(o(a(1)),n(a(68)),n(a(109))),l=o(a(74)),d=(o(a(340)),n(a(10)),n(a(57))),f=o(a(61));n(a(22)),o(a(3)),n(a(75));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,o=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function n(){var e,t,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(a=m(n).call(this))||"object"!==i(a)&&"function"!=typeof a?y(t):a).state={text:"",hover:"",bookNewList:"",seeEntireList:!1,showMore:!1,renderData:"",hasNoData:"",noData:"",dataAvailable:"",yearStart:"",yearEnd:"",NoTableData:"",dataLoad:!1},e.onOver=e.onOver.bind(y(y(e))),e.onOut=e.onOut.bind(y(y(e))),e.onAllResultLoaded=e.onAllResultLoaded.bind(y(y(e))),e.onGettingAllData=e.onGettingAllData.bind(y(y(e))),e}var t,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,u.default.Component),t=n,(a=[{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"componentWillMount",value:function(){l.default.addResultLoadedListener(this.onAllResultLoaded)}},{key:"componentWillUnmount",value:function(){l.default.removeResultLoadedListener(this.onAllResultLoaded)}},{key:"componentDidMount",value:function(){}},{key:"onGettingAllData",value:function(e){e.newValue}},{key:"onAllResultLoaded",value:function(){var a=this,e=l.default.allData();if(this.isEmpty(e.result)||this.isEmpty(e.result.years[0].titlesInYear)&&this.isEmpty(e.result.years[1].titlesInYear)&&this.isEmpty(e.result.years[2].titlesInYear)?this.setState({renderData:!1,hasNoData:!0,dataLoad:!0,seeEntireList:!1}):this.setState({bookNewList:e,renderData:!0,hasNoData:!1}),this.props.isSearchedData&&this.setState({hasNoData:!1,seeEntireList:!1}),this.state.bookNewList){this.setState({seeEntireList:!1});var t=this.state.bookNewList.result.years;t&&t.map(function(e,t){10<=e.titlesInYear.length&&a.setState({seeEntireList:!0})})}}},{key:"onOut",value:function(){this.setState({hover:""})}},{key:"onOver",value:function(l){var e=this.state.bookNewList.result.years;this.setState({hover:l.title});var t=e.map(function(e){var t,a,n,o,r=e.year;if(0<(t=e.titlesInYear.filter(function(e){var t=e.title;e.ean,e.countInYear;return t===l.title})).length)return a={},n=r,o=t[0].countInYear,n in a?Object.defineProperty(a,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[n]=o,a}),i="",s=0,a=(t.map(function(e){if(null!=e)for(var t=Object.entries(e),a=0;a<t.length;a++){var n=p(t[a],2),o=n[0],r=n[1];i=i+"</br>"+o+" : "+r.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),s=parseInt(s)+parseInt(r)}}),"<b>"+l.title+"</b><br/>Total : "+s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+i);this.setState({text:a})}},{key:"onSeeEntireList",value:function(e){r.browserHistory.push({pathname:e,state:{freeToggleValue:this.props.freeNewCustomer}}),window.scrollTo(0,0)}},{key:"render",value:function(){var l=this,e=(new Date).getFullYear(),t=(new Date).getFullYear()-2,a=d.BOOK_TYPES,n="",o=this.props.searchedBook?this.props.searchedBook:"None Provided",r="";r=(this.props.bookType===a.ALL||this.props.bookType===a.EBOOK)&&this.props.freeNewCustomer?"Yes":"No";var i,s="";this.props.bookType===a.ALL?s="All Books":this.props.bookType===a.EBOOK?s="eBook":this.props.bookType===a.PRINT&&(s="Print Book"),this.props.loadingPage||this.props.bookType!==a.ALL||this.props.searchedBook||this.props.loadingNew||this.props.loadingToggle||this.props.loadingfilterTable||(n=u.default.createElement("p",{className:"text-center no-results searchEdgeCaseTable"},"You had no new customers in ",t,"-",e,".")),(this.props.isSearchedData||this.props.bookType===a.EBOOK||this.props.bookType===a.PRINT||this.props.freeNewCustomer)&&(this.props.loadingPage||this.props.loadingNew||this.props.loadingToggle||this.props.loadingfilterTable||(n=u.default.createElement("div",{className:"text-center no-results searchEdgeCaseTable"},u.default.createElement("p",{className:"searchTermStyle"},"We found no data matching your search criteria."),u.default.createElement("p",null,"Search Term:",u.default.createElement("strong",null,o)),u.default.createElement("p",null,"Book Type:",u.default.createElement("strong",null,s)),this.props.bookType!=a.PRINT&&u.default.createElement("p",null," Include Free:",u.default.createElement("strong",null,r)))));this.state.LineData;return this.state.bookNewList&&(i=this.state.bookNewList.result.years),u.default.createElement("div",null,u.default.createElement("div",{className:"desktop-table",id:"table-ref"},this.state.renderData&&u.default.createElement("div",null,i&&i.map(function(e,t){var a=e.year,n=e.titlesInYear,o=n&&0<n.length&&!l.state.showMore?n.slice(0,10):n;return u.default.createElement("div",{className:"table-responsive table-container analytics-margin-top-table col-xs-12 col-sm-6 col-md-4"},u.default.createElement("table",{className:"table",key:a},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("th",{className:" table-header".concat(t),colSpan:"4"},a)),0==o.length&&u.default.createElement("tr",null,u.default.createElement("td",{style:{color:"black",textAlign:"center"}},"No new customers in ",a)),0!=o.length&&o.map(function(e,t){var a=e.title,n=e.ean,o=e.countInYear,r=e.rank;return u.default.createElement("tr",{key:n},u.default.createElement("td",{className:l.state.hover===a?"analytics-hover remove-padding":"analytics-padding remove-padding",onMouseOver:function(){return l.onOver(e)},onMouseOut:function(){return l.onOut()}},u.default.createElement(f.default,{className:"black-font ",width:"100%",isHtml:"true",trigger:"hover",info:!0,text:l.state.text},u.default.createElement("span",{className:"truncate-text"},r,".Â ",a),u.default.createElement("span",{className:"analytics-float-right font-bold"},o.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")))))}))))}),this.state.seeEntireList&&u.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12"},u.default.createElement("a",{className:"entireList",onClick:function(){return l.onSeeEntireList("/"+c.Base+"/"+c.EntireList)}}," ",u.default.createElement("span",{className:"Whats-This"},"See entire list")))),!this.state.renderData&&this.state.dataLoad&&u.default.createElement("div",null,i&&i.map(function(e,t){var a=e.year,n=e.titlesInYear;n&&0<n.length&&!l.state.showMore&&n.slice(0,10);return u.default.createElement("div",{className:"table-responsive table-container analytics-margin-top-table col-xs-12 col-sm-6 col-md-4"},u.default.createElement("table",{className:"table",key:a},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("th",{className:" table-header".concat(t),colSpan:"4"},a)))))}),u.default.createElement("div",{className:this.state.isSearchedData?"height-customer-table-desktop ":"height-customer-table-desktop"},u.default.createElement("span",null,n)))),u.default.createElement("div",{className:"mobile-table"},this.state.renderData&&u.default.createElement("div",null,u.default.createElement("div",{className:"overflow-mobile-table"},i&&i.map(function(e,t){var a=e.year,n=e.titlesInYear,o=n&&0<n.length&&!l.state.showMore?n.slice(0,10):n;return u.default.createElement("div",{className:" table-container analytics-margin-top-table col-xs-10 col-sm-8 col-md-8"},u.default.createElement("table",{className:"table",key:a},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("th",{className:" table-header".concat(t),colSpan:"4"},a)),0==o.length&&u.default.createElement("tr",null,u.default.createElement("td",{style:{color:"black",textAlign:"center"}},"No new customers in ",a)),0!=o.length&&o.map(function(e,t){var a=e.title,n=e.ean,o=e.countInYear,r=e.rank;return u.default.createElement("tr",{key:n},u.default.createElement("td",{className:l.state.hover===a?"analytics-hover remove-padding":"analytics-padding remove-padding",onMouseOver:function(){return l.onOver(e)},onMouseOut:function(){return l.onOut()}},u.default.createElement("span",{className:"truncate-text"},r,".Â ",a),u.default.createElement("span",{className:"analytics-float-right font-bold"},o.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"))))}))))})),this.state.seeEntireList&&u.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12"},u.default.createElement("a",{className:"entireList",onClick:function(){return l.onSeeEntireList("/"+c.Base+"/"+c.EntireList)}}," ",u.default.createElement("span",{className:"Whats-This"},"See entire list")))),!this.state.renderData&&this.state.dataLoad&&u.default.createElement("div",null,u.default.createElement("div",{className:"overflow-mobile-table"},i&&i.map(function(e,t){var a=e.year,n=e.titlesInYear;n&&0<n.length&&!l.state.showMore&&n.slice(0,10);return u.default.createElement("div",{className:"table-responsive table-container analytics-margin-top-table col-xs-10 col-sm-8 col-md-8"},u.default.createElement("table",{className:"table",key:a},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("th",{className:" table-header".concat(t),colSpan:"4"},a)))))})),u.default.createElement("div",{className:(this.state.isSearchedData,"height-customer-table ")},u.default.createElement("span",null,n)))))}}])&&s(t.prototype,a),o&&s(t,o),n}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(n(a(337)),n(a(4)),function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(1105))),i=n(a(1107));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function n(){var e,t,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(a=c(n).call(this))||"object"!==s(a)&&"function"!=typeof a?f(t):a).state={featureFlags:[]},e.onChange=e.onChange.bind(f(f(e))),e}var t,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,r.default.Component),t=n,(a=[{key:"componentDidMount",value:function(){l.loadFeatureFlags()}},{key:"componentWillMount",value:function(){i.default.addChangeListener(this.onChange)}},{key:"componentWillUnmount",value:function(){i.default.removeChangeListener(this.onChange)}},{key:"onChange",value:function(){this.setState({featureFlags:i.default.getAll().filter(function(e){return"BETA_USER"===e.userRole})})}},{key:"render",value:function(){var e=this.state.featureFlags.map(function(e){return r.default.createElement("div",{key:e.id,className:"beta-feature"},r.default.createElement("div",{className:"name"},e.name),r.default.createElement("div",{className:"description"},r.default.createElement("div",{className:"width-limit"},e.description)))});return r.default.createElement("div",{className:"container-fluid"},r.default.createElement("div",{className:"row beta-features"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("h1",null,"Your Beta Features (NOOK Press)"),r.default.createElement("div",{className:"heading"},"Feature Description and Name"),e)))}}])&&u(t.prototype,a),o&&u(t,o),n}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadFeatureFlags=function(){o.load(i,s)};var n=l(a(16)),o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(1106)),r=l(a(18));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){n.default.dispatch({type:r.default.FeatureFlag.LOAD_FEATURE_FLAGS,args:e})}function s(e){n.default.dispatch({type:r.default.FeatureFlag.LOAD_FEATURE_FLAGS_ERROR,args:e})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load=function(t,a){n.getFeatureFlags().then(function(e){try{t({featureFlags:e})}catch(e){a(e)}})},t.update=function(e,t,a){n.updateFeatureFlag(e).then(function(){try{t({featureFlag:e})}catch(e){a(e)}})};var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(539))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(44),n=o(a(16)),l=o(a(18));!function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(a(539));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f="change",p=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this))).featureFlags=[],e}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.EventEmitter),a=t,(n=[{key:"addChangeListener",value:function(e){this.addListener(f,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(f,e)}},{key:"getAll",value:function(){return this.featureFlags}},{key:"onLoadFeatureFlags",value:function(e){this.featureFlags=e.featureFlags,this.emit(f)}},{key:"handleActions",value:function(e){switch(e.type){case l.default.FeatureFlag.LOAD_FEATURE_FLAGS:this.onLoadFeatureFlags(e.args)}}}])&&s(a.prototype,n),o&&s(a,o),t}());n.default.register(p.handleActions.bind(p));var m=p;t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(6)),s=(o(a(12)),o(a(337)),o(a(4))),u=n(a(9)),c=n(a(108)),d=o(a(1)),f=n(a(26)),p=n(a(31)),m=(o(a(23)),o(a(27))),h=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=[{value:"true",label:"Receive exclusive B&N Press updates, special offers, and the latest news."},{value:"false",label:"Opt-out from marketing email communications."}],k=function(e){function o(){var e,t,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=this;var n=(e=!(a=g(o).call(this))||"object"!==y(a)&&"function"!=typeof a?E(t):a).getParameter();return e.state={customerkey:n,disableInput:!1,valid:!1,loading:!0,buttonDisabled:!0,errorchange:!1,errordescription:""},e.onSubmit=e.onSubmit.bind(E(E(e))),e.onCancel=e.onCancel.bind(E(E(e))),e.onValidationChange=e.onValidationChange.bind(E(E(e))),e.emailPrefChange=e.emailPrefChange.bind(E(E(e))),e.onChange=e.onChange.bind(E(E(e))),e.onChangeSubmit=e.onChangeSubmit.bind(E(E(e))),e.onErrorEmail=e.onErrorEmail.bind(E(E(e))),e}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,r.default.Component),t=o,(a=[{key:"getParameter",value:function(){var e=window.location.search.split("key=")[1];return e&&5<e.length?-1!==e.indexOf("&")?e.split("&")[0]:e:"none"}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({disableInput:e.disableInput})}},{key:"componentWillMount",value:function(){s.default.addEmailResponseListener(this.onChange),s.default.addEmailResponseChangeListener(this.onChangeSubmit),s.default.addProfileUpdatedErrorListener(this.onErrorEmail),"none"!==this.state.customerkey?f.emailPreferences(this.state.customerkey):this.setState({loading:!1,errordescription:"There is an error serving your request"})}},{key:"componentWillUnmount",value:function(){s.default.removeEmailResponseListener(this.onChange),s.default.removeEmailResponseChangeListener(this.onChangeSubmit),s.default.removeProfileUpdatedErrorListener(this.onErrorEmail)}},{key:"onSubmit",value:function(){var e=this.refs.form.gather(),t={updateType:"emailPreferenceLink"};t.emailOptedIn=e.emailOptedIn,f.emailPreferencesChange(this.state.customerkey,t),this.setState({loading:!0})}},{key:"onChange",value:function(e){e.data.email?this.setState({email:e.data.email,emailOptedIn:e.data.emailOptedIn.toString(),loading:!1,disableInput:!0}):this.setState({loading:!1})}},{key:"onErrorEmail",value:function(e){"-1131"==e.errorMessages[0][0].code&&this.setState({loading:!1,errordescription:"There is an error serving your request"})}},{key:"onChangeSubmit",value:function(e){e.data.email&&(this.setState({email:e.data.email,emailOptedIn:e.data.emailOptedIn.toString(),loading:!1,disableInput:!0,buttonDisabled:!0}),setTimeout(function(){p.toggleToast(!0,"Changes saved")},10))}},{key:"onCancel",value:function(){this.refs.emailOptedIn.setValue(this.state.emailOptedIn),this.setState({disableInput:!0})}},{key:"emailPrefChange",value:function(e){this.setState({emailPrefValue:e.newValue,valid:this.refs.form.valid()}),e.newValue==this.state.emailOptedIn?this.setState({disableInput:!0,buttonDisabled:!0}):this.setState({disableInput:!1,buttonDisabled:!1})}},{key:"onValidationChange",value:function(){this.setState({errorchange:!0})}},{key:"render",value:function(){var t=this,e=this.state,a=e.valid,n=e.disableInput,o=e.buttonDisabled;return r.default.createElement("div",{className:"email-preferences-container-page"},r.default.createElement("header",{className:this.state.email?"text-center":"p-t-50 text-center"},r.default.createElement("h1",null,"Manage Marketing Email Preferences")),r.default.createElement("div",{className:"authentication-container email-preference-form mar-contrbtr"},this.state.loading&&r.default.createElement(h.default,{containerPosition:"fixed"}),this.state.email?r.default.createElement(i.default,{ref:"form",onValidationChange:this.onValidationChange},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12"},r.default.createElement("p",{className:"pagination"},"Select your email preferences. You have the flexibility to unsubscribe at any time. Please note that you are opted-out by default if you have never selected a preference."))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12 email-select-container padding-top-10 mar-contrbtr"},r.default.createElement("p",{className:"mar-contrbtr"},"Your Email Address : ",r.default.createElement("b",null,this.state.email)))),r.default.createElement("div",{className:"row radio-container"},r.default.createElement("div",{className:"col-sm-12"},r.default.createElement(m.default,{name:"emailOptedIn",ref:"emailOptedIn",radioLayout:"vertical",fieldLayout:"vertical",labelColClass:"no-label",radioColClass:"col-md-12",initValue:null==this.state.emailOptedIn?"false":this.state.emailOptedIn,options:S,onChange:function(e){return t.emailPrefChange(e)},rules:[u.required("Please select your email preference.")]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12 padding-left-10"},r.default.createElement("p",{className:"terms-smaller"},"By clicking on the button below you're agreeing to our ",r.default.createElement(l.Link,{className:"underline-link",to:"/"+c.LandingPagesPaths.BaseLegal+"/"+c.LandingPagesPaths.TermsOfUse,target:"_blank"},"Terms of Use")," and ",r.default.createElement("a",{className:"underline-link",href:"https://bn.clarip.com/privacycenter/?brand=barnesandnoble",target:"_blank"},"Privacy Policy"),"."))),r.default.createElement("div",{className:"row "},r.default.createElement("div",{className:"col-xs-12 padding-reading-table mar-contrbtr"},r.default.createElement("div",null,r.default.createElement("div",{className:"email-submit-container"},r.default.createElement("button",{className:"btn-submit-email-pref btn col-lg-6 col-md-6",onClick:this.onSubmit,disabled:!a||n||o},"Save Changes"),r.default.createElement("span",{className:(0,d.default)("cancel","col-lg-6","col-md-6","text-info","padding-reading-table","col-xs-12","text-align-center",{disabled:n}),onClick:this.onCancel,disabled:!a&&n},"Cancel")))))):r.default.createElement("div",{className:"center-link color-red error email-error-section"},this.state.errordescription,".")))}}])&&b(t.prototype,a),n&&b(t,n),o}();t.default=k},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=n(a(55)),s=o(a(52)),u=n(a(338)),c=o(a(1110)),d=n(a(11)),f=n(a(17)),p=o(a(1111)),m=n(a(10)),h=o(a(343)),y=n(a(83)),b=o(a(540)),g=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,n=S(o).call(this,e),(t=!n||"object"!==v(n)&&"function"!=typeof n?P(a):n).state={promotionMessage:null,cart:null,quantityUpdating:!1},f.invokeFeatureProtectedFunc(d.PROMOTIONS,function(){return t.state.canGetPromotions=!0},function(){return t.state.canGetPromotions=!1}),t.onCartLoaded=t.onCartLoaded.bind(P(P(t))),t.onQuantityUpdating=t.onQuantityUpdating.bind(P(P(t))),t.showCopiesModal=t.showCopiesModal.bind(P(P(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){s.default.addCartChangedListener(this.onCartLoaded),s.default.addCartChangeStartedListener(this.onQuantityUpdating)}},{key:"componentDidMount",value:function(){i.loadCart()}},{key:"componentWillUnmount",value:function(){s.default.removeCartChangedListener(this.onCartLoaded),s.default.removeCartChangeStartedListener(this.onQuantityUpdating)}},{key:"onCartLoaded",value:function(){this.setState({cart:s.default.cart(),quantityUpdating:!1})}},{key:"onQuantityUpdating",value:function(){this.setState({quantityUpdating:!0})}},{key:"showCopiesModal",value:function(){m.showInformationModal("This discount applies only to print books created with the intent to sell on BN.com.")}},{key:"render",value:function(){var e=this.state.cart,t=(u.Base,"/"+y.Base),a=e&&e.promotions;return r.default.createElement("div",null,e&&this.state.quantityUpdating&&r.default.createElement(g.default,{containerPostion:"fixed",marginTop:"-22.5",position:"fixed",top:"50%"}),r.default.createElement("div",{className:"cart-checkout-wrapper"},r.default.createElement("div",{className:"cart-checkout-container"},r.default.createElement("header",{className:"sidelines"},r.default.createElement("h1",null,"My Shopping Cart")),!e&&r.default.createElement("div",{className:"spinner-area"},r.default.createElement(g.default,{backgroundColor:"transparent",top:100})),e&&0<e.projects.length&&r.default.createElement("div",null,this.state.canGetPromotions&&a&&r.default.createElement("h2",null,r.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.cartNCheckoutPromoMessage}})," ",r.default.createElement("a",{onClick:function(){return m.showInformationModal(a.cartNCheckoutTerms,function(){return!1},!0)}},"See Details")),r.default.createElement(l.Link,{to:"/"+u.Base,className:"btn btn-block btn-checkout visible-xs-block"},"Continue To Checkout"),r.default.createElement(p.default,{cart:e,canGetPromotions:this.state.canGetPromotions}),r.default.createElement("div",{className:"visible-xs-block"},r.default.createElement(h.default,{cart:e,checkout:!1,canGetPromotions:this.state.canGetPromotions}),r.default.createElement("p",{className:"projects-link"},"Exit Cart and ",r.default.createElement(l.Link,{to:t},"Go Back to Projects"))),r.default.createElement(b.default,{cart:e,checkout:!1,canGetPromotions:this.state.canGetPromotions})),e&&0===e.projects.length&&r.default.createElement(c.default,{projectsUrl:t}))))}}])&&E(t.prototype,a),n&&E(t,n),o}();t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n},l=a(2);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"cart-empty"},r.default.createElement("h2",null,"You don't have any items in your cart"),r.default.createElement(l.Link,{to:this.props.projectsUrl,className:"btn btn-back-to-projects"},"Return to Projects"))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(a(2),n(a(342)));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var t=this,e=null,a=this.props.cart;return a&&a.projects.length&&(e=a.projects.map(function(e){return r.default.createElement(l.default,{key:e.projectId,item:e,canGetPromotions:t.props.canGetPromotions})})),r.default.createElement("div",{className:"content"},r.default.createElement("div",{className:"cart-list-titles hide-mobile"},r.default.createElement("ul",{className:"list-inline"},r.default.createElement("li",{className:"item"},"Item(s)"),r.default.createElement("li",{className:"quantity"},"Quantity"),r.default.createElement("li",{className:"total"},"Total"))),r.default.createElement("div",{className:"top-border"}),e)}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(6)),i=n(a(12)),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(9)),u=n(a(1)),c=n(a(52));function n(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=/^\d{0,3}$/,o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?h(a):n).state={quantityReceived:null,plusEnabled:!1,minusEnabled:!1},t.addQuantity=t.addQuantity.bind(h(h(t))),t.onSubmit=t.onSubmit.bind(h(h(t))),t.subtractQuantity=t.subtractQuantity.bind(h(h(t))),t.onQuantityChange=t.onQuantityChange.bind(h(h(t))),t.onCartChanged=t.onCartChanged.bind(h(h(t))),t.makeClick=t.makeClick.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){c.default.addCartChangedListener(this.onCartChanged)}},{key:"componentWillUnmount",value:function(){c.default.removeCartChangedListener(this.onCartChanged)}},{key:"componentDidMount",value:function(){this._setButtons(this.refs.quantity.value())}},{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({quantityReceived:e.quantity})}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"addQuantity",value:function(){var e=Number(this.refs.quantity.value())+1;this.refs.quantity.setValue(e),this.props.changeQuantity(e)}},{key:"onSubmit",value:function(){this.state.quantityReceived!==this.refs.quantity.value()&&(this.refs.quantity.disableControlEvents(!0),this.refs.quantity.blur(),this.props.changeQuantity(Number(this.refs.quantity.value())))}},{key:"subtractQuantity",value:function(){var e=Number(this.refs.quantity.value())-1;this.refs.quantity.setValue(e),this.props.changeQuantity(e)}},{key:"onQuantityChange",value:function(e){this._setButtons(e.newValue)}},{key:"onCartChanged",value:function(){this.refs.quantity&&(this._setButtons(this.refs.quantity.value()),this.refs.quantity.disableControlEvents(!1))}},{key:"_setButtons",value:function(e){this.setState({plusEnabled:999!==Number(e),minusEnabled:1!==Number(e)})}},{key:"render",value:function(){var e=this.state.plusEnabled,t=this.state.minusEnabled;return r.default.createElement("div",{className:"cart-quantity"},r.default.createElement("span",{className:(0,u.default)("quantity-selector subtract-quantity",{disabled:!t}),tabIndex:"0",onKeyDown:this.makeClick,onClick:t?this.subtractQuantity:null},r.default.createElement("span",{className:"fa fa-minus","aria-hidden":"true"})),r.default.createElement(l.default,{ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},r.default.createElement(i.default,{name:"quantity",ref:"quantity",autoComplete:"off",initValue:this.props.quantity,disableValidationMessages:!0,onChange:this.onQuantityChange,onCommit:this.onSubmit,pattern:y,rules:[s.required()]})),r.default.createElement("span",{className:(0,u.default)("quantity-selector add-quantity",{disabled:!e}),tabIndex:"0",onKeyDown:this.makeClick,onClick:e?this.addQuantity:null},r.default.createElement("span",{className:"fa fa-plus","aria-hidden":"true"})))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(22));n(a(80));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e=this.props.cart;return r.default.createElement("tr",null,r.default.createElement("td",null,"Handling"),r.default.createElement("td",null,this.props.checkout?l.formatPrice(e.handling):"$-.--"))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(13)),s=r(a(0)),o=a(2),u=r(a(344)),l=n(a(26)),c=r(a(4)),d=n(a(55)),f=r(a(52)),p=r(a(1115)),m=n(a(11)),h=n(a(17)),y=r(a(345)),b=r(a(342)),g=r(a(1118)),v=n(a(533)),E=r(a(343)),S=n(a(83)),k=r(a(1129)),P=r(a(540)),w=n(a(22)),O=r(a(79)),C=r(a(34)),N=n(a(10));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var L=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,n=D(r).call(this,e),t=!n||"object"!==_(n)&&"function"!=typeof n?M(a):n;var o=c.default.getProfile();return t.state={initialized:!1,ordering:!1,profile:o,errorMessages:[]},h.invokeFeatureProtectedFunc(m.PROMOTIONS,function(){return t.state.canGetPromotions=!0},function(){return t.state.canGetPromotions=!1}),t.onCheckoutInitialized=t.onCheckoutInitialized.bind(M(M(t))),t.onProfileLoaded=t.onProfileLoaded.bind(M(M(t))),t.onOrderSubmitted=t.onOrderSubmitted.bind(M(M(t))),t.onCheckoutStateChanged=t.onCheckoutStateChanged.bind(M(M(t))),t.submitOrder=t.submitOrder.bind(M(M(t))),t.onCvvPromptRequired=t.onCvvPromptRequired.bind(M(M(t))),t.onCheckoutError=t.onCheckoutError.bind(M(M(t))),t.onSubmitOrder2faError=t.onSubmitOrder2faError.bind(M(M(t))),t.resizeLayout=t.resizeLayout.bind(M(M(t))),t.onDismissErrors=t.onDismissErrors.bind(M(M(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(r,s.default.Component),t=r,(a=[{key:"componentWillMount",value:function(){f.default.addCheckoutInitializedListener(this.onCheckoutInitialized),f.default.addOrderSubmittedListener(this.onOrderSubmitted),f.default.addCheckoutStateChangedListener(this.onCheckoutStateChanged),f.default.addCvvPromptRequiredListener(this.onCvvPromptRequired),f.default.addCheckoutErrorListener(this.onCheckoutError),f.default.addOrderSubmitted2faErrorListener(this.onSubmitOrder2faError),c.default.addProfileLoadedListener(this.onProfileLoaded),O.default.addLayoutChangeListener(this.resizeLayout),O.default.addWindowResizeListener(this.resizeLayout)}},{key:"componentDidMount",value:function(){var e=window.location.href,t=new URL(e).searchParams.toString();this.resizeLayout(),this.state.profile||l.loadProfile(),t?d.initCheckout(!1,!0):d.initCheckout(!1,!1)}},{key:"componentWillUnmount",value:function(){f.default.removeCheckoutInitializedListener(this.onCheckoutInitialized),f.default.removeCheckoutStateChangedListener(this.onCheckoutStateChanged),f.default.removeOrderSubmittedListener(this.onOrderSubmitted),f.default.removeCvvPromptRequiredListener(this.onCvvPromptRequired),f.default.removeCheckoutErrorListener(this.onCheckoutError),c.default.removeProfileLoadedListener(this.onProfileLoaded),f.default.removeOrderSubmitted2faErrorListener(this.onSubmitOrder2faError),O.default.removeLayoutChangeListener(this.resizeLayout),O.default.removeWindowResizeListener(this.resizeLayout)}},{key:"onProfileLoaded",value:function(){this.setState({profile:c.default.getProfile()})}},{key:"onCheckoutInitialized",value:function(){var e=f.default.cart();e&&0===e.projects.length?setTimeout(function(){o.browserHistory.replace("/"+S.Base)},0):this.setState({checkoutState:f.default.checkoutState(),initialized:!0})}},{key:"onCheckoutStateChanged",value:function(){this.setState({checkoutState:f.default.checkoutState()})}},{key:"onOrderSubmitted",value:function(e){var t=e.summary.orderNumber,a=e.summary.totals.find(function(e){return"orderTotal"===e.name}).value;o.browserHistory.push("/"+v.Base+"?orderNumber="+t+"&orderTotal="+a)}},{key:"submitOrder",value:function(e){this.state.checkoutState.allowCheckout&&(this.setState({ordering:!0}),window.grecaptcha&&window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){d.submitOrder("","",e)}).catch(function(){d.submitOrder()})}))}},{key:"onCvvPromptRequired",value:function(e){var a=this;setTimeout(function(){N.showVerifyCreditCardSecurityCodeModal(e,function(e,t){e?null!=t.checkoutId&&""!=t.checkoutId?window.grecaptcha&&window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){d.submitOrder(t.checkoutId,t.eProtectId,e)}).catch(function(){d.submitOrder(t.checkoutId,t.eProtectId)})}):d.submitOrder(t.securityCode):a.setState({ordering:!1})})},0)}},{key:"onSubmitOrder2faError",value:function(e){var t=e.errors[0].code,a=e,n=this.state.profile;a.updateType="order",h.hasFeatureFlag(m.TWO_F_A_AUTH)&&setTimeout(function(){N.TwoFaProfileModal(a,n,t)},0)}},{key:"onCheckoutError",value:function(e){0<e.generalErrors.length&&this.setState({ordering:!1}),this.setState({errorMessages:e.generalErrors}),0<e.generalErrors.length&&w.smoothScrollToWindowTop()}},{key:"resizeLayout",value:function(){var e=(0,i.default)("footer"),t=(0,i.default)(this.refs.contentContainer);if(e.length&&t.length){var a=e.height(),n=t.offset().top,o=window.innerHeight,r=n+a;if(r<o){var l=o-r;t.css({"min-height":l})}}}},{key:"onDismissErrors",value:function(){this.setState({errorMessages:[]})}},{key:"render",value:function(){setTimeout(function(){"vendor-account"==location.pathname.split("/")[1].toLowerCase()||"my-profile"==location.pathname.split("/")[1].toLowerCase()||"checkout"==location.pathname.split("/")[1].toLowerCase()?document.body.classList.add("recaptcha-module-outer"):document.body.classList.remove("recaptcha-module-outer")},1500);var e=null,t=f.default.cart(),a=t&&t.promotions,n=a&&this.state.canGetPromotions,o=n?a.atgPromoDescription:"",r=this.state.checkoutState,l=this.state.initialized;return t&&t.projects.length&&(e=t.projects.map(function(e){return s.default.createElement(b.default,{checkout:!0,key:e.projectId,item:e})})),s.default.createElement("div",null,s.default.createElement(u.default,{user:c.default.getUser()}),s.default.createElement("header",{className:"checkout-header"},s.default.createElement("a",{href:"/"},s.default.createElement("img",{alt:"NookPress",className:"logo checkout-logo",src:"img/bnpress-logo-tm.svg"}))),s.default.createElement("div",{ref:"contentContainer",className:"cart-checkout-wrapper",id:"cart-checkout-wrapper"},0<this.state.errorMessages.length&&s.default.createElement(C.default,{messages:this.state.errorMessages,type:"error",dismissable:!0,onClose:this.onDismissErrors}),s.default.createElement("div",{className:"cart-checkout-container"},s.default.createElement("header",{className:"sidelines"},s.default.createElement("h1",null,"Secure Checkout")),s.default.createElement("div",{className:"content"},l&&s.default.createElement("div",null,s.default.createElement("div",{className:"cart-totals-top-mobile visible-xs-block"},s.default.createElement("h1",null,"Order Summary"),s.default.createElement("div",{className:"pull-left"},s.default.createElement("p",null,s.default.createElement("strong",null,"Order Total:"))),s.default.createElement("div",{className:"pull-right"},s.default.createElement("p",{className:"text-right"},s.default.createElement("strong",null,w.formatPrice(t.orderTotal)))),s.default.createElement("a",{className:"btn btn-block btn-checkout",disabled:!r.allowCheckout||this.state.ordering,onClick:this.submitOrder,"data-sitekey":"6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v","data-callback":"onSubmit","data-action":"submit"},"Submit Order")),s.default.createElement(k.default,null),s.default.createElement(p.default,null),s.default.createElement(g.default,null),s.default.createElement("div",{className:"cart-totals-bottom-mobile"},s.default.createElement("h3",{className:"cart-heading"},"Cart Summary"),n&&s.default.createElement("p",null,o),e,s.default.createElement(E.default,{canGetPromotions:this.state.canGetPromotions,cart:t,checkout:!0,submitOrder:this.submitOrder,ordering:this.state.ordering})))),l&&s.default.createElement(P.default,{canGetPromotions:this.state.canGetPromotions,cart:t,checkout:!0,submitOrder:this.submitOrder,ordering:this.state.ordering}))),s.default.createElement(y.default,{minimal:!0}))}}])&&T(t.prototype,a),n&&T(t,n),r}();t.default=L},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(n(a(13)),n(a(1)),function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(55))),i=n(a(52)),s=n(a(1116));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={checkoutState:i.default.checkoutState(),shippingMethods:[],shippingMethod:null},t.onCheckoutStateChanged=t.onCheckoutStateChanged.bind(p(p(t))),t.onEdit=t.onEdit.bind(p(p(t))),t.onExitEdit=t.onExitEdit.bind(p(p(t))),t.onShippingMethodsLoaded=t.onShippingMethodsLoaded.bind(p(p(t))),t.onShippingMethodChanged=t.onShippingMethodChanged.bind(p(p(t))),t.submit=t.submit.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){i.default.addCheckoutStateChangedListener(this.onCheckoutStateChanged),i.default.addShippingMethodsLoadedListener(this.onShippingMethodsLoaded),i.default.addShippingMethodChangedListener(this.onShippingMethodChanged)}},{key:"componentWillUnmount",value:function(){i.default.removeCheckoutStateChangedListener(this.onCheckoutStateChanged),i.default.removeShippingMethodsLoadedListener(this.onShippingMethodsLoaded),i.default.removeShippingMethodChangedListener(this.onShippingMethodChanged)}},{key:"componentDidMount",value:function(){this.state.checkoutState.isDeliveryReady&&l.loadShippingMethods()}},{key:"onCheckoutStateChanged",value:function(){this.setState({checkoutState:i.default.checkoutState()}),this.state.checkoutState.isDeliveryReady&&l.loadShippingMethods()}},{key:"onShippingMethodsLoaded",value:function(e){this.setState({shippingMethods:e,shippingMethod:i.default.cart().shippingMethodId})}},{key:"onShippingMethodChanged",value:function(e){this.setState({shippingMethod:e.shippingMethodId})}},{key:"onEdit",value:function(e){e.preventDefault();var t=i.default.cart(),a=null;t.shippingGroups&&0<t.shippingGroups.length&&(a=t.shippingGroups[0].shippingMethod,this.state.shippingMethods.find(function(e){return e.id===a})||(a=null)),a||(a=this.state.shippingMethods[0].id),this.setState({editing:!0,busy:!1,initShippingMethod:a})}},{key:"onExitEdit",value:function(e){e.preventDefault(),this.setState({editing:!1,initShippingMethod:null})}},{key:"submit",value:function(e){l.updateShippingMethod({methodId:e})}},{key:"render",value:function(){var t=this,e=i.default.cart(),a=(this.state.checkoutState,null);return this.state.shippingMethods&&(a=this.state.shippingMethods.find(function(e){return e.id===t.state.shippingMethod})),r.default.createElement("div",{className:"panel panel-default delivery-options"},r.default.createElement("div",{className:"panel-header"},r.default.createElement("div",{className:"section-number"},"2"),r.default.createElement("h2",null,"Delivery Options"),r.default.createElement("div",{className:"section-status"})),a&&r.default.createElement("div",{className:"panel-body"},r.default.createElement("div",{ref:"editPane"},r.default.createElement(s.default,{shippingMethods:this.state.shippingMethods,selectedMethod:e.shippingMethodId,submit:this.submit}))))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(6)),i=(o(a(47)),o(a(1117))),s=(n(a(55)),o(a(52))),u=n(a(11)),c=n(a(17));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?h(a):n).state={shippingMethods:e.shippingMethods,selectedMethod:String(e.selectedMethod),checkoutState:s.default.checkoutState(),EDDValue:c.hasFeatureFlag(u.EDD)},t.onValidationChange=t.onValidationChange.bind(h(h(t))),t.onSubmit=t.onSubmit.bind(h(h(t))),t.onShippingMethodChange=t.onShippingMethodChange.bind(h(h(t))),t.onCheckoutStateChange=t.onCheckoutStateChange.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){s.default.addCheckoutStateChangedListener(this.onCheckoutStateChange)}},{key:"componentWillUnmount",value:function(){s.default.removeCheckoutStateChangedListener(this.onCheckoutStateChange)}},{key:"componentWillReceiveProps",value:function(e){this.state.selectedMethod!==e.selectedMethod&&this.setState({busy:!1,selectedMethod:e.selectedMethod})}},{key:"onValidationChange",value:function(){}},{key:"onCheckoutStateChange",value:function(){this.setState({checkoutState:s.default.checkoutState()})}},{key:"onSubmit",value:function(){var e=this.refs.form.gather();this.setState({busy:!0,selectedMethod:null}),this.props.submit(e.shippingMethod)}},{key:"onShippingMethodChange",value:function(e){this.state.checkoutState.isDeliveryEntryRequired||this.onSubmit()}},{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement(l.default,{ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},r.default.createElement("div",{className:"checkout-padding-container"},r.default.createElement("div",{className:"row shipping-message"},this.state.EDDValue?r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("p",null," The total delivery time for your order will depend on the selected delivery speed and the time required for printing.  ",r.default.createElement("a",{target:"_blank",href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5359210768667-Receiving-My-Print-Book",className:"underline-link"},"Learn More"))):r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("p",null,"The shipping method you choose in addition to the printing time will determine the total time in which you can expect a book to arrive."),r.default.createElement("ul",{className:"para-top-margin"},r.default.createElement("li",null,"Paperback books take up to 5 business days to print."),r.default.createElement("li",null,"Hardcover books take up to 10 business days to print.")),r.default.createElement("p",null,"As an example, a paperback shipping UPS Standard can take up to 11 business days to deliver. ",r.default.createElement("a",{target:"_blank",href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5359210768667-Receiving-My-Print-Book",className:"underline-link"},"Learn More"))," ")),r.default.createElement("div",{className:"row delivery-speed"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("p",null,r.default.createElement("strong",null,"Choose Delivery Speed")))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(i.default,{name:"shippingMethod",fieldLayout:"vertical",radioLayout:"vertical",options:this.state.shippingMethods,initValue:this.state.selectedMethod,onChange:this.onShippingMethodChange})))),this.state.checkoutState.isDeliveryEntryRequired&&r.default.createElement("div",{className:"button-centered"},r.default.createElement("button",{className:"btn",disabled:this.state.busy},"Continue"))))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(a(0)),l=r(a(1)),i=(r(a(120)),a(7)),s=r(a(118)),u=n(a(22)),c=n(a(11)),d=n(a(17));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function r(e,t){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(a=!(o=m(r).call(this,e,t))||"object"!==f(o)&&"function"!=typeof o?y(n):o).state={EDDValue:d.hasFeatureFlag(c.EDD)},a.onBlur=a.onBlur.bind(y(y(a))),a.onChange=a.onChange.bind(y(y(a))),a}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,s.default),t=r,(a=[{key:"options",value:function(){return this.props.options}},{key:"onBlur",value:function(e){e.persist(),this._commitValue(this.value()),this.props.onBlur&&this.props.onBlur()}},{key:"onChange",value:function(e){if(!this.disabled()){var t=e.target.value;this._commitValue(t)}}},{key:"render",value:function(){var t=this,e=o.default.createElement("div",{className:"radio-label"},this.label(),!!this.label()&&this.required()&&!this.disableValidationMessages()&&o.default.createElement("span",null,"*")),a=this.options().map(function(e){return o.default.createElement("div",{key:e.id,className:"radio-option clearfix"},o.default.createElement("div",{className:"radio-option-left"},o.default.createElement("label",null,o.default.createElement("input",{type:"radio",name:t.name(),value:e.id,onBlur:t.onBlur,onChange:t.onChange,checked:t.value()===e.id}),o.default.createElement("span",null,e.name),o.default.createElement("span",{className:"shipping-duration"},"Â ","("+e.minDays+"-"+e.maxDays+" business days)"),t.state.EDDValue&&o.default.createElement("p",{className:"padding-left-20"},o.default.createElement("p",null," ",o.default.createElement("b",null,(0,i.bn_moment)(e.deliveryPromise).format("dddd, MMM DD"))," Estimated Delivery Date "),e.holidayIncluded&&o.default.createElement("div",{className:"text-danger"},"Please expect at least one additional business day due to the holiday"),o.default.createElement("table",{className:"margin-bottom15 table table-bordered"},o.default.createElement("tbody",null,o.default.createElement("tr",null,o.default.createElement("td",null,o.default.createElement("span",null,e.printingType," Printing")),o.default.createElement("td",null,o.default.createElement("span",null,e.printingDays," business days"))),o.default.createElement("tr",null,o.default.createElement("td",null,o.default.createElement("span",null," ",e.shippingType," Shipping")),o.default.createElement("td",null,o.default.createElement("span",null," ",e.shippingDays," business days"))),o.default.createElement("tr",{className:"back-grey"},o.default.createElement("td",null,o.default.createElement("span",null," Total")),o.default.createElement("td",null,o.default.createElement("span",null," ",e.totalShippingDays," business days")))))))),o.default.createElement("div",{className:"radio-option-right"},u.formatPrice(parseFloat(e.shippingCost))))});return o.default.createElement("div",{className:(0,l.default)("base-control","radio-control shipping-method-radio-control",{disabled:this.disabled()},this.className())},o.default.createElement("div",{className:"radio-field clearfix "+this.state.fieldLayout},e,o.default.createElement("div",{className:"radio-options"},a)))}}])&&p(t.prototype,a),n&&p(t,n),r}();b.propTypes=function(o){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(e){var t,a,n;t=o,n=r[a=e],a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n})}return o}({},s.default.propTypes,{options:o.default.PropTypes.arrayOf(o.default.PropTypes.object).isRequired});var g=b;t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(a(0)),l=r(a(1119)),i=r(a(1120)),s=r(a(1122)),u=r(a(1127)),c=n(a(10)),d=n(a(55)),f=r(a(52)),p=n(a(26)),m=r(a(4)),h=n(a(11)),y=n(a(17));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=v(r).call(this,e))||"object"!==b(n)&&"function"!=typeof n?S(a):n;var o=m.default.getProfile();return t.state={checkoutState:f.default.checkoutState(),paymentMethods:null,paymentState:P.CREATE,profile:o,editingCard:null,validateImmediately:!1},t.onProfileLoaded=t.onProfileLoaded.bind(S(S(t))),t.onPaymentListLoaded=t.onPaymentListLoaded.bind(S(S(t))),t.onPaymentListChanged=t.onPaymentListChanged.bind(S(S(t))),t.onCheckoutStateChanged=t.onCheckoutStateChanged.bind(S(S(t))),t.onAddNewCreditCard=t.onAddNewCreditCard.bind(S(S(t))),t.onBeginEditing=t.onBeginEditing.bind(S(S(t))),t.onEditPayment=t.onEditPayment.bind(S(S(t))),t.onPayment2FaError=t.onPayment2FaError.bind(S(S(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(r,o.default.Component),t=r,(a=[{key:"componentWillMount",value:function(){f.default.addCheckoutStateChangedListener(this.onCheckoutStateChanged),m.default.addProfileLoadedListener(this.onProfileLoaded),m.default.addPaymentMethodsLoadedListener(this.onPaymentListLoaded),m.default.addPaymentMethodsChangedListener(this.onPaymentListChanged),f.default.addPayment2faUpdateErrorListener(this.onPayment2FaError)}},{key:"componentDidMount",value:function(){p.loadPaymentMethods(),this.state.profile||p.loadProfile()}},{key:"componentWillUnmount",value:function(){f.default.removeCheckoutStateChangedListener(this.onCheckoutStateChanged),m.default.removeProfileLoadedListener(this.onProfileLoaded),m.default.removePaymentMethodsLoadedListener(this.onPaymentListLoaded),m.default.removePaymentMethodsChangedListener(this.onPaymentListChanged),f.default.removePayment2faUpdateErrorListener(this.onPayment2FaError)}},{key:"onProfileLoaded",value:function(){this.setState({profile:m.default.getProfile()})}},{key:"onAddNewCreditCard",value:function(){this.setState({paymentState:P.CREATE})}},{key:"onBeginEditing",value:function(){d.beginEditingPaymentSection()}},{key:"onPayment2FaError",value:function(e){var t=e.errors[0].code,a=e.data,n=this.state.profile;a.updateType="Payment Information",y.hasFeatureFlag(h.TWO_F_A_AUTH)&&setTimeout(function(){c.TwoFaProfileModal(a,n,t)},0)}},{key:"onEditPayment",value:function(e,t){this.setState({paymentState:P.EDIT,editingCard:e,validateImmediately:!!t})}},{key:"onCheckoutStateChanged",value:function(){var e=m.default.getPaymentMethods();this.setState({checkoutState:f.default.checkoutState(),paymentState:e&&0<e.length?P.SELECT:P.CREATE})}},{key:"onPaymentListLoaded",value:function(){var e=m.default.getPaymentMethods();this.setState({paymentMethods:e,paymentState:0<e.length?P.SELECT:P.CREATE})}},{key:"onPaymentListChanged",value:function(){var e=m.default.getPaymentMethods();this.setState({paymentMethods:e})}},{key:"render",value:function(){var e=this.state.checkoutState;return o.default.createElement("div",{className:"panel panel-default payment-information"},o.default.createElement("div",{className:"panel-header"},o.default.createElement("div",{className:"section-number"},"3"),o.default.createElement("h2",null,"Payment Information"),o.default.createElement("div",{className:"section-status"},o.default.createElement("div",{className:"link"},!e.isAnyEditing&&e.isPaymentDisplay&&o.default.createElement("a",{onClick:this.onBeginEditing},"Edit")))),e.isPaymentReady&&this.state.paymentMethods&&o.default.createElement("div",{className:"panel-body"},e.isPaymentDisplay&&o.default.createElement(l.default,null),e.isPaymentEditingOrEntryRequired&&this.state.paymentState===P.SELECT&&o.default.createElement(i.default,{paymentMethods:this.state.paymentMethods,onAddNewCreditCard:this.onAddNewCreditCard,onEditPayment:this.onEditPayment}),e.isPaymentEditingOrEntryRequired&&this.state.paymentState===P.CREATE&&o.default.createElement(s.default,{paymentMethods:this.state.paymentMethods}),e.isPaymentEditingOrEntryRequired&&this.state.paymentState===P.EDIT&&o.default.createElement(u.default,{currentAddressId:null,card:this.state.editingCard,validateImmediately:this.state.validateImmediately})))}}])&&g(t.prototype,a),n&&g(t,n),r}();t.default=k;var P={SELECT:"select",CREATE:"create",EDIT:"edit"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(52));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={card:l.default.cart().paymentGroups[0]},t.getOptionalLineMarkup=t.getOptionalLineMarkup.bind(d(d(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.default.Component),t=o,(a=[{key:"_toDisplayCardType",value:function(e){return"masterCard"===e?"MasterCard":e}},{key:"getOptionalLineMarkup",value:function(e){return e&&0<e.length&&"null"!==e?r.default.createElement("span",null,e,r.default.createElement("br",null)):null}},{key:"render",value:function(){var e=this.state.card,t=e.billingAddress;return r.default.createElement("div",{className:"checkout-padding-container selected-payment-container"},r.default.createElement("div",{className:"selected-payment-display"},r.default.createElement("div",{className:"credit-card-image"},r.default.createElement("div",{className:"credit-card "+e.creditCardType.toLowerCase()})),r.default.createElement("div",{className:"credit-card-info"},r.default.createElement("strong",null,r.default.createElement("span",{className:"text-capitalize"},e.creditCardType))," ending ",r.default.createElement("span",null,e.creditCardNumber),r.default.createElement("br",null),r.default.createElement("span",null,"Expires ",e.expirationMonth,"/",e.expirationYear),r.default.createElement("div",{className:"address-info"},t.firstName," ",t.lastName,r.default.createElement("br",null),t.address1,r.default.createElement("br",null),this.getOptionalLineMarkup(t.address2),t.city,", ",t.state&&"null"!==t.state?t.state:""," ",t.postalCode,r.default.createElement("br",null),t.phoneNumber,r.default.createElement("br",null),this.getOptionalLineMarkup(t.companyName)))))}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(55)),i=n(a(52)),s=n(a(1121));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={showMore:!1,paymentMethods:t.props.paymentMethods},t.onCancelEditing=t.onCancelEditing.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({paymentMethods:e.paymentMethods})}},{key:"onCancelEditing",value:function(){l.cancelEditingPaymentSection()}},{key:"render",value:function(){var t=this,e=i.default.cart(),a=e.paymentGroups&&0<e.paymentGroups.length,n=this.state.paymentMethods.map(function(e){return r.default.createElement(s.default,{key:e.id,card:e,onEditPayment:t.props.onEditPayment})});return r.default.createElement("div",null,a&&r.default.createElement("div",{className:"cancel-link"},r.default.createElement("a",{onClick:this.onCancelEditing},"Cancel")),r.default.createElement("div",{className:"checkout-padding-container"},r.default.createElement("p",{className:"add-new-link"},r.default.createElement("a",{onClick:function(){return t.props.onAddNewCreditCard()}},"+ Add New Credit Card")),r.default.createElement("div",{className:"payment-list"},this.state.showMore?n:n.slice(0,3)),!this.state.showMore&&3<n.length&&r.default.createElement("div",{className:"view-more-link"},r.default.createElement("p",null,r.default.createElement("a",{onClick:function(){return t.setState({showMore:!0})}},"View More")))))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=a(0))&&n.__esModule?n:{default:n},l=a(24),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(55));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var r=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this;var o=(t=!(n=c(r).call(this,e))||"object"!==s(n)&&"function"!=typeof n?f(a):n).props.card;return t.state={card:o,isComplete:t.isComplete(t.props.card)},t.onUseThisPayment=t.onUseThisPayment.bind(f(f(t))),t.debounceOnUseThisPayment=(0,l.debounce)(5e3,!0,t.onUseThisPayment),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(r,o.default.Component),t=r,(a=[{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({card:e.card,isComplete:this.isComplete(e.card)})}},{key:"onUseThisPayment",value:function(){var e=this.props.card;i.updatePaymentMethod({cardNickName:e.cardNickName},!1)}},{key:"isComplete",value:function(e){return e.billingAddress&&e.billingAddress.phoneNumber&&0<e.billingAddress.phoneNumber.length}},{key:"render",value:function(){var e=this,t=this.state.card;return o.default.createElement("div",{className:"payment-list-item clearfix"},!this.state.isComplete&&o.default.createElement("div",{className:"incomplete-message"},o.default.createElement("span",{className:"glyphicon glyphicon-info-sign",style:{top:"3px"}}),"Â Â  This payment method needs your attention.",o.default.createElement("div",{className:"stretchy-line"},"Â "),o.default.createElement("a",{onClick:function(){return e.props.onEditPayment(t,!0)}},"Edit")),o.default.createElement("div",{className:"credit-card-image"},o.default.createElement("div",{className:"credit-card "+t.creditCardType.toLowerCase()})),o.default.createElement("div",{className:"credit-card-info"},o.default.createElement("p",null,o.default.createElement("strong",null,o.default.createElement("span",{className:"text-capitalize"},t.creditCardType)," **** ",t.creditCardNumber)),o.default.createElement("p",null,"Exp. ",t.expirationMonth,"/",t.expirationYear),o.default.createElement("p",null,t.billingAddress.firstName," ",t.billingAddress.lastName),this.state.isComplete&&o.default.createElement("a",{onClick:function(){return e.props.onEditPayment(t,!0)}},"Edit")),o.default.createElement("div",{className:"credit-card-select-button"},o.default.createElement("button",{className:"btn btn-block btn-checkout",disabled:!this.state.isComplete,onClick:this.debounceOnUseThisPayment},"Use This Payment")))}}])&&u(t.prototype,a),n&&u(t,n),r}();t.default=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(a(0)),l=a(24),i=r(a(1123)),s=n(a(211)),u=r(a(4)),c=r(a(541)),d=r(a(542)),f=n(a(55)),p=r(a(52)),m=n(a(11)),h=n(a(17)),y=r(a(6));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){v(t,e,a[e])})}return t}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=S(r).call(this,e))||"object"!==b(n)&&"function"!=typeof n?P(a):n;var o=u.default.getBillingAddresses();return t.state={billingAddresses:o,selectAddress:0<o.length,valid:!1,worldpayFeatureFlagValue:!!h.hasFeatureFlag(m.WORLDPAY)&&h.hasFeatureFlag(m.WORLDPAY)},t.onValidationChange=t.onValidationChange.bind(P(P(t))),t.onSubmit=t.onSubmit.bind(P(P(t))),t.onCheckoutError=t.onCheckoutError.bind(P(P(t))),t.setCardType=t.setCardType.bind(P(P(t))),t.onDebounceSubmit=(0,l.debounce)(5e3,!0,t.onSubmit),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(r,o.default.Component),t=r,(a=[{key:"componentWillMount",value:function(){p.default.addCheckoutErrorListener(this.onCheckoutError)}},{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting()}},{key:"componentWillUnmount",value:function(){p.default.removeCheckoutErrorListener(this.onCheckoutError)}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"onSubmit",value:function(e){var t=this,a=this.refs.form.gather();if(1==this.state.worldpayFeatureFlagValue&&(a.ccNumNew="",a.cvv="",a.creditCardType=this.state.dataToSend2.creditCardType,a.creditCardNumber=this.state.dataToSend2.creditCardNumber,a.eProtectId=this.state.dataToSend2.eProtectId),f.clearCheckoutErrors(),!0!==this.state.selectAddress&&!0!==a.useShippingAddress){var n={country:a.country,address1:a.address1,address2:a.address2,city:a.city,state:a.state,postalCode:a.postalCode};s.validateAddressAtgStyle(n,function(e){e.canceled||(e.address&&(t.refs.billingAddressForm.refs.address1.setValue(e.address.address1),t.refs.billingAddressForm.refs.address2.setValue(e.address.address2),t.refs.billingAddressForm.refs.city.setValue(e.address.city),t.refs.billingAddressForm.refs.state.setValue(e.address.state),t.refs.billingAddressForm.refs.postalCode.setValue(e.address.postalCode),a=t.refs.form.gather(),1==t.state.worldpayFeatureFlagValue&&(a.ccNumNew="",a.cvv="")),f.updatePaymentMethod(a,!t.state.worldpayFeatureFlagValue))})}else{if(this.state.selectAddress){var o=this.state.billingAddresses.find(function(e){return e.addressId===a.billingAddress});a=g({},a,o)}else{var r=p.default.getDefaultShippingAddress();a=g({},a,r)}1==this.state.worldpayFeatureFlagValue?window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){a.recaptchaToken=e,f.updatePaymentMethod(a,!1)}).catch(function(){f.updatePaymentMethod(a,!1)})}):window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){a.recaptchaToken=e,f.updatePaymentMethod(a,!0)}).catch(function(){f.updatePaymentMethod(a,!0)})})}}},{key:"setCardType",value:function(e){this.setState({dataToSend2:e})}},{key:"onCheckoutError",value:function(e){if("paymentMethod"===e.contextIdentifier&&this.refs.form)for(var t in e.fieldErrors)this.refs.form.setServerSideValidationMessage(t,e.fieldErrors[t])}},{key:"render",value:function(){var e=this;return o.default.createElement("div",null,o.default.createElement(y.default,{ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onDebounceSubmit,className:"add-new-payment-form"},o.default.createElement("div",{className:"checkout-padding-container"},o.default.createElement(i.default,{setCardType:this.setCardType}),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement("h2",null,"Billing Address"))),this.state.selectAddress&&o.default.createElement("div",null,o.default.createElement("p",null,"Select a Saved Billing AddressÂ Â orÂ Â ",o.default.createElement("a",{onClick:function(){return e.setState({selectAddress:!1})}},"Add a New Billing Address")),o.default.createElement(d.default,{billingAddresses:this.state.billingAddresses})),!this.state.selectAddress&&o.default.createElement("div",null,0<this.state.billingAddresses.length&&o.default.createElement("p",null,"Add a New Billing AddressÂ Â orÂ Â ",o.default.createElement("a",{onClick:function(){return e.setState({selectAddress:!0})}},"Select a Saved Billing Address")),o.default.createElement(c.default,{ref:"billingAddressForm"}))),o.default.createElement("div",{className:"button-centered"},o.default.createElement("button",{className:"btn g-recaptcha",disabled:!this.state.valid,"data-sitekey":"6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v","data-callback":"onSubmit","data-action":"submit"},"Use This Payment"))))}}])&&E(t.prototype,a),n&&E(t,n),r}();t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(7),i=o(a(1)),s=(o(a(47)),o(a(12))),u=o(a(23)),c=n(a(9)),d=n(a(55)),f=o(a(52)),p=n(a(332)),m=o(a(80)),h=o(a(4)),y=n(a(11)),b=n(a(17)),g=(n(a(10)),n(a(26)));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=S(o).call(this,e))||"object"!==v(n)&&"function"!=typeof n?P(a):n).state={creditType:"empty",creditCardLength:16,months:p.MONTHS,paypageRegistrationId:null,eprotectid:null,url:"",worldpayFeatureFlagValue:b.hasFeatureFlag(y.WORLDPAY)},t.onYearChange=t.onYearChange.bind(P(P(t))),t.onCancelEditing=t.onCancelEditing.bind(P(P(t))),t.onDetectCreditCardType=t.onDetectCreditCardType.bind(P(P(t))),t.worldpayRegistrationId=t.worldpayRegistrationId.bind(P(P(t))),t.onCartLoaded=t.onCartLoaded.bind(P(P(t))),t.NewFunctionBlur=t.NewFunctionBlur.bind(P(P(t))),t.onUpdateEprotect=t.onUpdateEprotect.bind(P(P(t))),t.sendToParent=t.sendToParent.bind(P(P(t))),t.getEprotect=t.getEprotect.bind(P(P(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){f.default.addCartChangedListener(this.onCartLoaded),f.default.addEprotectUpdatedListener(this.onUpdateEprotect),h.default.addGetEprotectListener(this.getEprotect)}},{key:"componentDidMount",value:function(){d.loadCart(),d.updateEprotect(),g.getEnvPath()}},{key:"componentWillUnmount",value:function(){f.default.removeCartChangedListener(this.onCartLoaded),f.default.removeEprotectUpdatedListener(this.onUpdateEprotect),h.default.removeGetEprotectListener(this.getEprotect)}},{key:"getEprotect",value:function(e){this.setState({url:e.users})}},{key:"worldpayRegistrationId",value:function(t){function n(e){document.getElementById("response$code").value=e.response,document.getElementById("response$message").value=e.message,document.getElementById("response$vantivTxnId").value=e.vantivTxnId,document.getElementById("response$responseTime").value=e.responseTime,document.getElementById("response$type").value=e.type,document.getElementById("response$accountRangeId").value=e.accountRangeId,document.getElementById("response$firstSix").value=e.firstSix,document.getElementById("response$lastFour").value=e.lastFour,null!=e.paypageRegistrationId&&(document.getElementById("creditCardNumber").value=e.paypageRegistrationId,document.getElementById("creditCardType").value=e.type,document.getElementById("errorMsg").innerHTML="","AX"==e.type&&(document.getElementById("creditCardType").value="americanExpress"),"DI"==e.type&&(document.getElementById("creditCardType").value="discover"),"MC"==e.type&&(document.getElementById("creditCardType").value="masterCard"),"VI"==e.type&&(document.getElementById("creditCardType").value="visa"),"JCB"==e.type&&(document.getElementById("creditCardType").value="jcb"),"Diners"==e.type&&(document.getElementById("creditCardType").value="dinersClub"),t())}function o(e){n(e)}function r(){}function l(e){if("871"==e.response){document.getElementById("errorMsg").innerHTML="Sorry! We were unable to process your credit card. Please enter a valid card number and try again."}else if("872"==e.response){document.getElementById("errorMsg").innerHTML="Sorry! The card number entered is too short. Please enter a valid card number and try again."}else if("873"==e.response){document.getElementById("errorMsg").innerHTML="Sorry! The card number entered is too long. Please enter a valid card number and try again."}else if("874"==e.response){document.getElementById("errorMsg").innerHTML="Sorry! The card number entered includes invalid characters. Please enter a valid card number and try again."}else if("875"==e.response){document.getElementById("errorMsg").innerHTML="Sorry! An error occurred while processing your credit card. Please try again."}else if("876"==e.response){document.getElementById("errorMsg").innerHTML="Sorry! We were unable to process your credit card. Please enter a valid card number and try again."}else if("881"==e.response){document.getElementById("errorMsg").innerHTML="Sorry! The security code entered includes invalid characters. Please enter a valid security code and try again."}else if("882"==e.response){document.getElementById("errorMsg").innerHTML="Sorry! The security code entered is too short. Please enter a valid security code and try again."}else if("883"==e.response){document.getElementById("errorMsg").innerHTML="Sorry! The security code entered is too long. Please enter a valid security code and try again."}else if("889"==e.response){document.getElementById("errorMsg").innerHTML="Sorry! An error occurred while processing your credit card. Please try again."}return!1}"object"!=v(new eProtect)&&alert("We are experiencing technical difficulties."),function(e){var t={accountNum:document.getElementById("ccNum"),cvv2:document.getElementById("cvvnum"),creditCardNumber:document.getElementById("response$creditCardNumber"),bin:document.getElementById("response$bin"),type:document.getElementById("response$type")};n({response:"",message:""});var a={paypageId:document.getElementById("request$paypageId").value,reportGroup:document.getElementById("request$reportGroup").value,orderId:document.getElementById("request$orderId").value,id:document.getElementById("request$merchantTxnId").value,url:e};console.log("environment:","production"),console.log("url:",a.url),(new eProtect).sendToEprotect(a,t,o,l,r,15e3)}(this.state.url)}},{key:"sendToParent",value:function(){var e={creditCardType:document.getElementById("creditCardType").value,creditCardNumber:document.getElementById("creditCardNumber").value,eProtectId:document.getElementById("eProtectId").value};this.props.setCardType(e)}},{key:"onCartLoaded",value:function(){var e=f.default.cart();this.setState({vendorNumber:e.vendorNumber,worldPayOrderId:e.worldPayOrderId,worldPayPaypageId:e.worldPayPaypageId,worldPayReportGroup:e.worldPayReportGroup})}},{key:"onUpdateEprotect",value:function(){this.setState({eprotectid:f.default.getEprotect(),worldPayMerchantTxnId:f.default.getEprotect()}),document.getElementById("eProtectId").value=this.state.eprotectid}},{key:"onYearChange",value:function(e){e.newValue===(0,l.bn_moment)().year().toString()?this.setState({months:p.MONTHS_LEFT_THIS_YEAR}):this.setState({months:p.MONTHS})}},{key:"onCancelEditing",value:function(){d.cancelEditingPaymentSection()}},{key:"onDetectCreditCardType",value:function(e){this.state.worldpayFeatureFlagValue&&0==document.getElementById("ccNumNew").value.length&&(document.getElementById("errorMsg").innerHTML="");var t={americanexpress:/^3[47][0-9]{5,}$/,dinersclub:/^3(?:0[0-5]|[68][0-9])[0-9]{4,}$/,discover:/^6(?:011|5[0-9]{2})[0-9]{3,}$/,jcb:/^(?:2131|1800|35[0-9]{3})[0-9]{3,}$/,mastercard:/^5[1-5][0-9]{5,}|222[1-9][0-9]{3,}|22[3-9][0-9]{4,}|2[3-6][0-9]{5,}|27[01][0-9]{4,}|2720[0-9]{3,}$/,visa:/^4[0-9]{6,}$/};for(var a in t)t[a].test(e.newValue)&&a&&this.setState({creditType:a})}},{key:"NewFunctionBlur",value:function(){var e=document.getElementById("ccNumNew").value,t=document.getElementById("cvv").value;document.getElementById("ccNum").value=e,document.getElementById("cvvnum").value=t,0!=e.length&&0!=t.length&&null!=this.state.eprotectid&&this.worldpayRegistrationId(this.sendToParent)}},{key:"render",value:function(){var e=b.hasFeatureFlag(y.WORLDPAY),t=f.default.checkoutState(),a=h.default.getPaymentMethods(),n='<div><h2>Where is your Security Code?</h2><p>Your credit card\'s security code is a 3-or-4 digit Number located on its front or back.</p><img alt="CVV" height="61" src="img/find-security-code.png" /></div>';return r.default.createElement("div",{className:"credit-card-elements"},e&&r.default.createElement("div",null,r.default.createElement("div",null,r.default.createElement("div",null,r.default.createElement("input",{type:"hidden",id:"request$paypageId",name:"request$paypageId",value:this.state.worldPayPaypageId}),r.default.createElement("input",{type:"hidden",id:"request$merchantTxnId",name:"request$merchantTxnId",value:this.state.worldPayMerchantTxnId}),r.default.createElement("input",{type:"hidden",id:"request$orderId",name:"request$orderId",value:this.state.worldPayOrderId}),r.default.createElement("input",{type:"hidden",id:"request$reportGroup",name:"request$reportGroup",value:this.state.worldPayReportGroup})),r.default.createElement("div",null),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("p",{className:"add-edit-title"},r.default.createElement("strong",null,"Add New Credit Card")))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("h2",null,"Credit/Debit Card"))),r.default.createElement("div",{className:"row credit-card-list"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("ul",{className:"list-inline"},r.default.createElement("li",{className:(0,i.default)("credit-card americanexpress",{active:"americanexpress"===this.state.creditType})}),r.default.createElement("li",{className:(0,i.default)("credit-card jcb",{active:"jcb"===this.state.creditType})}),r.default.createElement("li",{className:(0,i.default)("credit-card mastercard",{active:"mastercard"===this.state.creditType})}),r.default.createElement("li",{className:(0,i.default)("credit-card visa",{active:"visa"===this.state.creditType})}),r.default.createElement("li",{className:(0,i.default)("credit-card discover",{active:"discover"===this.state.creditType})}),r.default.createElement("li",{className:(0,i.default)("credit-card dinersclub",{active:"dinersclub"===this.state.creditType})})))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"base-control worldpay-message-container"},r.default.createElement("div",{className:"message",id:"errorMsg"})),r.default.createElement(s.default,{name:"ccNumNew",id:"ccNumNew",label:"Card Number",maxLength:16,initValue:this.props.cardNumber,onChange:this.onDetectCreditCardType,onBlur:this.NewFunctionBlur,onpaste:this.onDetectCreditCardType,serverSideValidationKey:"ccNumNew",rules:[c.required("Please enter a card number."),c.maxLength(16)]}),r.default.createElement("input",{name:"ccNum",id:"ccNum",label:"Card Number",type:"hidden"})),r.default.createElement("div",{className:"col-xs-12",style:{position:"absolute",left:"-10000px"}},r.default.createElement(s.default,{name:"creditCardNumber",label:"Id",id:"creditCardNumber",serverSideValidationKey:"cardNumber",Value:this.state.paypageRegistrationId}),r.default.createElement(s.default,{name:"creditCardType",label:"Type",id:"creditCardType",serverSideValidationKey:"type"}),r.default.createElement(s.default,{name:"eProtectId",label:"eProtectId",id:"eProtectId",serverSideValidationKey:"type"}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(s.default,{name:"nameOnCard",label:"Name on Card",pattern:/^[a-zA-Z0-9 \-.]*$/,maxLength:30,initValue:this.props.cardFullName,serverSideValidationKey:"nameOnCard",rules:[c.required("Please enter your name as it appears on your card."),c.maxLength(30)]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(u.default,{name:"creditCardExpirationMonth",ref:"creditCardExpirationMonth",label:"Expiration Month",options:this.state.months,keepValue:!0,serverSideValidationKey:"creditCardExpirationMonth",rules:[c.required("Please select an expiration month.")]})),r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(u.default,{name:"creditCardExpirationYear",label:"Expiration Year",onChange:this.onYearChange,options:p.YEARS,serverSideValidationKey:"creditCardExpirationYear",rules:[c.required("Please select an expiration year.")]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6 col-sm-12 cvv-container"},r.default.createElement(s.default,{name:"cvv",id:"cvv",label:"Security Code",onBlur:this.NewFunctionBlur,maxLength:4,initValue:this.props.securityCode,serverSideValidationKey:"cvv",pattern:/^\d*$/,rules:[c.required("Please enter a security code."),C()]}),r.default.createElement("input",{id:"cvvnum",name:"cvvnum",label:"Card Number",type:"hidden"}),r.default.createElement(m.default,{className:"cvv-tooltip-icon",info:!0,isHtml:!0,text:n}))),r.default.createElement("div",null,r.default.createElement("input",{type:"hidden",id:"response$creditCardNumber",name:"response$creditCardNumber",readOnly:"true",value:""}),r.default.createElement("input",{type:"hidden",id:"response$bin",name:"response$bin",readOnly:"true"}),r.default.createElement("input",{type:"hidden",id:"response$code",name:"response$code",readOnly:"true"}),r.default.createElement("input",{type:"hidden",id:"response$message",name:"response$message",readOnly:"true"}),r.default.createElement("input",{type:"hidden",id:"response$type",name:"response$type",readOnly:"true"}),r.default.createElement("input",{type:"hidden",id:"response$vantivTxnId",name:"response$vantivTxnId",readOnly:"true"}),r.default.createElement("input",{type:"hidden",id:"response$responseTime",name:"response$responseTime",readOnly:"true"}),r.default.createElement("input",{type:"hidden",id:"response$firstSix",name:"response$firstSix",readOnly:"true"}),r.default.createElement("input",{type:"hidden",id:"response$lastFour",name:"response$lastFour",readOnly:"true"}),r.default.createElement("input",{type:"hidden",id:"response$accountRangeId",name:"response$accountRangeId",readOnly:"true"}))),r.default.createElement("br",null)),!e&&r.default.createElement("div",null,r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("p",{className:"add-edit-title"},r.default.createElement("strong",null,"Add New Credit Card")))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("h2",null,"Credit/Debit Card"))),r.default.createElement("div",{className:"row credit-card-list"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("ul",{className:"list-inline"},r.default.createElement("li",{className:(0,i.default)("credit-card americanexpress",{active:"americanexpress"===this.state.creditType})}),r.default.createElement("li",{className:(0,i.default)("credit-card jcb",{active:"jcb"===this.state.creditType})}),r.default.createElement("li",{className:(0,i.default)("credit-card mastercard",{active:"mastercard"===this.state.creditType})}),r.default.createElement("li",{className:(0,i.default)("credit-card visa",{active:"visa"===this.state.creditType})}),r.default.createElement("li",{className:(0,i.default)("credit-card discover",{active:"discover"===this.state.creditType})}),r.default.createElement("li",{className:(0,i.default)("credit-card dinersclub",{active:"dinersclub"===this.state.creditType})})))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(s.default,{name:"creditCardNumber",label:"Card Number",maxLength:16,initValue:this.props.cardNumber,onChange:this.onDetectCreditCardType,serverSideValidationKey:"cardNumber",rules:[c.required("Please enter a card number."),c.maxLength(16)]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(s.default,{name:"nameOnCard",label:"Name on Card",pattern:/^[a-zA-Z0-9 \-.]*$/,maxLength:30,initValue:this.props.cardFullName,serverSideValidationKey:"nameOnCard",rules:[c.required("Please enter your name as it appears on your card."),c.maxLength(30)]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(u.default,{name:"creditCardExpirationMonth",ref:"creditCardExpirationMonth",label:"Expiration Month",options:this.state.months,keepValue:!0,serverSideValidationKey:"creditCardExpirationMonth",rules:[c.required("Please select an expiration month.")]})),r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(u.default,{name:"creditCardExpirationYear",label:"Expiration Year",onChange:this.onYearChange,options:p.YEARS,serverSideValidationKey:"creditCardExpirationYear",rules:[c.required("Please select an expiration year.")]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6 col-sm-12 cvv-container"},r.default.createElement(s.default,{name:"cvv",label:"Security Code",type:"password",maxLength:4,initValue:this.props.securityCode,serverSideValidationKey:"cvv",pattern:/^\d*$/,rules:[c.required("Please enter a security code."),C()]}),r.default.createElement(m.default,{className:"cvv-tooltip-icon",info:!0,isHtml:!0,text:n})))),(!t.isPaymentEntryRequired||a&&0<a.length)&&r.default.createElement("div",{className:"cancel-link"},r.default.createElement("a",{onClick:this.onCancelEditing},"Cancel")))}}])&&E(t.prototype,a),n&&E(t,n),o}();t.default=w;var O;(O=Array(10).keys(),function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(O)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(O)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()).map(function(e){var t=e+(0,l.bn_moment)().year();return{label:t.toString(),value:t}}),[{label:"01",value:"01"},{label:"02",value:"02"},{label:"03",value:"03"},{label:"04",value:"04"},{label:"05",value:"05"},{label:"06",value:"06"},{label:"07",value:"07"},{label:"08",value:"08"},{label:"09",value:"09"},{label:"10",value:"10"},{label:"11",value:"11"},{label:"12",value:"12"}].slice((0,l.bn_moment)().month());function C(){return b.hasFeatureFlag(y.WORLDPAY)?{key:"cvv",dependsOn:{controlKeys:["ccNumNew"],onEveryChange:!0},test:function(e,t,a){var n=3;return a.ccNumNew&&/^3[47][0-9]{5,}$/.test(a.ccNumNew.value())&&(n=4),/^\d+$/.test(e)?e.length>n?"Security Code must be "+n+" digits.":e.length<n&&a.cvv.committed()?"Security Code must be "+n+" digits.":null:"Security code must contain only digits."}}:{key:"cvv",dependsOn:{controlKeys:["creditCardNumber"],onEveryChange:!0},test:function(e,t,a){var n=3;return a.creditCardNumber&&/^3[47][0-9]{5,}$/.test(a.creditCardNumber.value())&&(n=4),/^\d+$/.test(e)?e.length>n?"Security Code must be "+n+" digits.":e.length<n&&a.cvv.committed()?"Security Code must be "+n+" digits.":null:"Security code must contain only digits."}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAddress=function(e,t){n.validateAddress(e).then(function(e){try{t(e?e.data:null)}catch(e){console.log(e)}})},t.validateAddressAtgStyle=function(e,t){n.validateAddressAtgStyle(e).then(function(e){try{t(e||null)}catch(e){console.log(e)}})};var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(1125))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAddress=function(e){n.put("/address_validation",e)},t.validateAddressAtgStyle=function(e){return n.post("/api/account/validate-address",e)};var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(67))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(0)),l=n(a(1)),i=n(a(118));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var r=function(e){function r(e,t){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(a=!(o=c(r).call(this,e,t))||"object"!==s(o)&&"function"!=typeof o?f(n):o).state={},a.isComplete=a.isComplete.bind(f(f(a))),a.onBlur=a.onBlur.bind(f(f(a))),a.onChange=a.onChange.bind(f(f(a))),a}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(r,i.default),t=r,(a=[{key:"options",value:function(){return this.props.options}},{key:"isComplete",value:function(e){return e.phoneNumber&&0<e.phoneNumber.length}},{key:"onBlur",value:function(e){e.persist(),this._commitValue(this.value()),this.props.onBlur&&this.props.onBlur()}},{key:"onChange",value:function(e){if(!this.disabled()){var t=e.target.value;this._commitValue(t)}}},{key:"render",value:function(){var a=this,e=(o.default.createElement("div",{className:"radio-label"},this.label(),!!this.label()&&this.required()&&!this.disableValidationMessages()&&o.default.createElement("span",null,"*")),this.options().map(function(e){var t=a.isComplete(e);return o.default.createElement("div",{key:e.addressId,className:"radio-option"},o.default.createElement("label",null,o.default.createElement("input",{type:"radio",name:a.name(),value:e.addressId,onBlur:a.onBlur,onChange:a.onChange,disabled:!t,checked:a.value()===e.addressId}),o.default.createElement("div",null,!t&&o.default.createElement("div",{className:"incomplete-message"},"This address needs your attention.",o.default.createElement("div",{className:"stretchy-line"},"Â "),o.default.createElement("a",{onClick:function(){return a.props.onEdit({address:e})}},"Edit Address")),o.default.createElement("div",{className:(0,l.default)({disabled:!t})},e.firstName," ",e.lastName,o.default.createElement("br",null),e.address1,o.default.createElement("br",null),e.city,", ",e.state," ",e.postalCode,o.default.createElement("br",null),e.phoneNumber))))}));return o.default.createElement("div",{className:(0,l.default)("base-control","radio-control billing-address-radio-control",{disabled:this.disabled()},this.className())},!this.disableValidationMessages()&&o.default.createElement("div",{className:"message"},this.message()),o.default.createElement("div",{className:"radio-field clearfix "+this.state.fieldLayout},o.default.createElement("div",{className:"radio-options"},e)))}}])&&u(t.prototype,a),n&&u(t,n),r}();r.propTypes=function(o){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(e){var t,a,n;t=o,n=r[a=e],a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n})}return o}({},i.default.propTypes,{options:o.default.PropTypes.arrayOf(o.default.PropTypes.object).isRequired});var p=r;t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(a(0)),l=a(24),c=n(a(211)),i=n(a(26)),s=r(a(4)),u=r(a(542)),d=r(a(541)),f=n(a(55)),p=r(a(52)),m=r(a(1128)),h=(n(a(11)),n(a(17)),r(a(6)));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){g(t,e,a[e])})}return t}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function v(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=E(r).call(this,e))||"object"!==y(n)&&"function"!=typeof n?k(a):n;var o=s.default.getBillingAddresses();return t.state={billingAddress:null,billingAddresses:o,selectAddress:!1,valid:!1},t.onEditBillingAddressItem=t.onEditBillingAddressItem.bind(k(k(t))),t.onBillingAddressFormLoaded=t.onBillingAddressFormLoaded.bind(k(k(t))),t.onValidationChange=t.onValidationChange.bind(k(k(t))),t.onSubmit=t.onSubmit.bind(k(k(t))),t.onCheckoutError=t.onCheckoutError.bind(k(k(t))),t.onAddressBookLoaded=t.onAddressBookLoaded.bind(k(k(t))),t.onDebounceSubmit=(0,l.debounce)(5e3,!0,t.onSubmit),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(r,o.default.Component),t=r,(a=[{key:"componentWillMount",value:function(){p.default.addCheckoutErrorListener(this.onCheckoutError),s.default.addAddressBookListener(this.onAddressBookLoaded)}},{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),i.loadAddressBook()}},{key:"componentWillUnmount",value:function(){p.default.removeCheckoutErrorListener(this.onCheckoutError),s.default.removeAddressBookListener(this.onAddressBookLoaded)}},{key:"onAddressBookLoaded",value:function(e){this.setState({billingAddresses:e})}},{key:"onBillingAddressFormLoaded",value:function(){this.props.validateImmediately&&this.refs.form.validate()}},{key:"onEditBillingAddressItem",value:function(e){this.setState({selectAddress:!1,billingAddress:e.address})}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"onSubmit",value:function(e){var a,n=this,o=this.refs.form.gather();if(f.clearCheckoutErrors(),o.id=this.props.card.id,o.creditCardType=this.props.card.creditCardType,o.creditCardNumber=this.props.card.creditCardNumber,o.cardNickName=this.props.card.cardNickName,o.nameOnCard=this.props.card.nameOnCard,this.state.selectAddress)a=this.state.billingAddresses.find(function(e){return e.addressId===o.billingAddress}),o=b({},o,a),f.updatePaymentMethod(o,!1);else if(!0===o.useShippingAddress)a=p.default.getDefaultShippingAddress(),o=b({},o,a),f.updatePaymentMethod(o,!1);else{a={country:o.country,address1:o.address1,address2:o.address2,city:o.city,state:o.state,postalCode:o.postalCode};var r=this.refs.billingAddressForm.refs.address1,l=this.refs.billingAddressForm.refs.address2,i=this.refs.billingAddressForm.refs.city,s=this.refs.billingAddressForm.refs.state,u=this.refs.billingAddressForm.refs.postalCode;window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(t){a.recaptchaToken=t,c.validateAddressAtgStyle(a,function(e){e.canceled||(e.address&&(r.setValue(e.address.address1),l.setValue(e.address.address2),i.setValue(e.address.city),s.setValue(e.address.state),u.setValue(e.address.postalCode),a.recaptchaToken=t,(o=n.refs.form.gather()).id=n.props.card.id,o.creditCardType=n.props.card.creditCardType,o.creditCardNumber=n.props.card.creditCardNumber,o.cardNickName=n.props.card.cardNickName,o.nameOnCard=n.props.card.nameOnCard),o.recaptchaToken=t,f.updatePaymentMethod(o,!1))})}).catch(function(){var t=this;c.validateAddressAtgStyle(a,function(e){e.canceled||(e.address&&(t.refs.billingAddressForm.refs.address1.setValue(e.address.address1),t.refs.billingAddressForm.refs.address2.setValue(e.address.address2),t.refs.billingAddressForm.refs.city.setValue(e.address.city),t.refs.billingAddressForm.refs.state.setValue(e.address.state),t.refs.billingAddressForm.refs.postalCode.setValue(e.address.postalCode),(o=t.refs.form.gather()).id=t.props.card.id,o.creditCardType=t.props.card.creditCardType,o.creditCardNumber=t.props.card.creditCardNumber,o.cardNickName=t.props.card.cardNickName,o.nameOnCard=t.props.card.nameOnCard),f.updatePaymentMethod(o,!1))})})})}}},{key:"onCheckoutError",value:function(e){if("paymentMethod"===e.contextIdentifier&&this.refs.form)for(var t in e.fieldErrors)this.refs.form.setServerSideValidationMessage(t,e.fieldErrors[t])}},{key:"render",value:function(){var e=this,t=this.state.billingAddress?this.state.billingAddress:this.props.card.billingAddress;return o.default.createElement("div",null,o.default.createElement(h.default,{ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onDebounceSubmit,className:"add-new-payment-form"},o.default.createElement("div",{className:"checkout-padding-container"},o.default.createElement(m.default,{card:this.props.card}),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement("p",{className:"add-edit-title"},o.default.createElement("strong",null,"Edit Billing Address")))),this.state.selectAddress&&o.default.createElement("div",null,o.default.createElement("p",null,"Select a Saved Billing AddressÂ Â orÂ Â ",o.default.createElement("a",{onClick:function(){return e.setState({selectAddress:!1,billingAddress:null})}},"Update Billing Address")),o.default.createElement(u.default,{billingAddresses:this.state.billingAddresses,onEditBillingAddressItem:this.onEditBillingAddressItem})),!this.state.selectAddress&&o.default.createElement("div",null,0<this.state.billingAddresses.length&&o.default.createElement("p",null,"Update Billing AddressÂ Â orÂ Â ",o.default.createElement("a",{onClick:function(){return e.setState({selectAddress:!0})}},"Select a Saved Billing Address")),o.default.createElement(d.default,{ref:"billingAddressForm",initAddress:t,onLoaded:this.onBillingAddressFormLoaded}))),o.default.createElement("div",{className:"button-centered"},o.default.createElement("button",{className:"btn g-recaptcha",disabled:!this.state.valid,"data-sitekey":"6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v","data-callback":"onSubmit","data-action":"submit"},"Use This Payment"))))}}])&&v(t.prototype,a),n&&v(t,n),r}();t.default=P},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(7),i=n(a(9)),s=o(a(23)),u=n(a(55)),c=n(a(332));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?h(a):n).state={months:c.MONTHS},t.onYearChange=t.onYearChange.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,r.default.Component),t=o,(a=[{key:"onYearChange",value:function(e){e.newValue===(0,l.bn_moment)().year().toString()?this.setState({months:c.MONTHS_LEFT_THIS_YEAR}):this.setState({months:c.MONTHS})}},{key:"render",value:function(){var e=this.props.card;return r.default.createElement("div",{className:"edit-card-form"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("p",{className:"add-edit-title"},r.default.createElement("strong",null,"Edit Credit Card")))),r.default.createElement("div",{className:"selected-payment-display"},r.default.createElement("div",{className:"credit-card-image"},r.default.createElement("div",{className:"credit-card "+e.creditCardType.toLowerCase()})),r.default.createElement("div",{className:"credit-card-info"},r.default.createElement("p",null,r.default.createElement("strong",null,r.default.createElement("span",{className:"text-capitalize"},e.creditCardType)," **** ",e.creditCardNumber)))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(s.default,{name:"creditCardExpirationMonth",ref:"creditCardExpirationMonth",label:"Expiration Month",initValue:e.expirationMonth,keepValue:!0,options:this.state.months,serverSideValidationKey:"creditCardExpirationMonth",rules:[i.required()]})),r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(s.default,{name:"creditCardExpirationYear",label:"Expiration Year",onChange:this.onYearChange,initValue:e.expirationYear,options:c.YEARS,serverSideValidationKey:"creditCardExpirationYear",rules:[i.required()]}))),r.default.createElement("div",{className:"cancel-link"},r.default.createElement("a",{onClick:function(){return u.cancelEditingPaymentSection()}},"Cancel")))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=o(a(0)),r=a(24),f=o(a(1)),l=n(a(55)),i=(n(a(543)),n(a(211)),n(a(26))),s=o(a(244)),u=o(a(52)),c=(o(a(347)),o(a(545)),o(a(4))),p=n(a(331)),m=o(a(16)),h=o(a(18)),y=o(a(1132));o(a(47)),o(a(6)),o(a(12)),o(a(23)),n(a(9)),n(a(346));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=v(o).call(this,e))||"object"!==b(n)&&"function"!=typeof n?S(a):n).state={checkoutState:u.default.checkoutState(),address:u.default.getDefaultShippingAddress(),addressBook:[],cart:u.default.cart(),formNew:!1,formEdit:!1,showMore:!1,showAddress:!1,validateImmediately:!1},t.cancel=t.cancel.bind(S(S(t))),t.getOptionalLineMarkup=t.getOptionalLineMarkup.bind(S(S(t))),t.onAddressBookLoaded=t.onAddressBookLoaded.bind(S(S(t))),t.onAddressBookChanged=t.onAddressBookChanged.bind(S(S(t))),t.onCheckoutStateChanged=t.onCheckoutStateChanged.bind(S(S(t))),t.onEditGetAddressesList=t.onEditGetAddressesList.bind(S(S(t))),t.onEditSelection=t.onEditSelection.bind(S(S(t))),t.onEditSelectionCancel=t.onEditSelectionCancel.bind(S(S(t))),t.onEditSelectionViewMore=t.onEditSelectionViewMore.bind(S(S(t))),t.onEditAddress=t.onEditAddress.bind(S(S(t))),t.submit=t.submit.bind(S(S(t))),t.selectAddress=t.selectAddress.bind(S(S(t))),t.selectExistingAddress=t.selectExistingAddress.bind(S(S(t))),t.debounceSubmit=(0,r.debounce)(5e3,!0,t.debounceSubmit.bind(S(S(t)))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(o,d.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){i.loadAddressBook()}},{key:"componentWillMount",value:function(){u.default.addCheckoutStateChangedListener(this.onCheckoutStateChanged),c.default.addAddressBookListener(this.onAddressBookLoaded),c.default.addAddressBookChangedListener(this.onAddressBookChanged)}},{key:"componentWillUnmount",value:function(){u.default.removeCheckoutStateChangedListener(this.onCheckoutStateChanged),c.default.removeAddressBookListener(this.onAddressBookLoaded),c.default.removeAddressBookChangedListener(this.onAddressBookChanged)}},{key:"onCheckoutStateChanged",value:function(){var e=u.default.checkoutState();e.isShippingDisplay?(this.setState({checkoutState:e,formEdit:e.isShippingEditing,cart:u.default.cart()}),this.onAddressBookLoaded(c.default.getAddressBook())):this.setState({checkoutState:e,cart:u.default.cart()})}},{key:"onAddressBookLoaded",value:function(e){var t,a=0===this.state.cart.shippingGroups.length&&0===e.length;t=(0<this.state.cart.shippingGroups.length&&c.default.isAddressInAddressBook(u.default.getDefaultShippingAddress()),e),this.setState({address:u.default.getDefaultShippingAddress(),formNew:a,addressBook:t,showAddress:0<this.state.cart.shippingGroups.length})}},{key:"onAddressBookChanged",value:function(e){setTimeout(function(){l.updateShippingAddress(e)},0)}},{key:"onEditSelection",value:function(){0===this.state.addressBook.length?this.onEditAddress(u.default.getDefaultShippingAddress()):this.setState({formEdit:!1,formNew:!1,showMore:this.state.addressBook.length<=3,showAddress:!1}),l.beginEditingShippingAddressSection()}},{key:"onEditGetAddressesList",value:function(){var t=this;p.loadAddressBook(function(e){m.default.dispatch({type:h.default.AuthenticatedUser.LOAD_ADDRESSBOOK,args:{addressBook:e}}),t.onEditSelection()})}},{key:"onEditSelectionCancel",value:function(){this.setState({showAddress:0<this.state.cart.shippingGroups.length,address:u.default.getDefaultShippingAddress()}),l.cancelEditingShippingAddressSection()}},{key:"onEditSelectionViewMore",value:function(){this.setState({showMore:!0})}},{key:"onEditAddress",value:function(e,t){var a=void 0===e;this.setState({address:a?new s.default:e,formEdit:!a,formNew:a,showAddress:!1,validateImmediately:!!t})}},{key:"selectAddress",value:function(e,t,a){l.updateShippingAddress(e)}},{key:"selectExistingAddress",value:function(e,t,a){l.updateShippingAddressNickName(e,"")}},{key:"debounceSubmit",value:function(e,t,a){this.submit(e,t,a)}},{key:"submit",value:function(e){l.updateShippingAddress(e)}},{key:"cancel",value:function(){this.state.formEdit||this.state.formNew?(this.setState({formEdit:!1,formNew:!1}),this.onEditSelection()):this.onAddressBookLoaded(this.state.addressBook)}},{key:"getOptionalLineMarkup",value:function(e){return e&&0<e.length?d.default.createElement("span",null,e,d.default.createElement("br",null)):null}},{key:"isComplete",value:function(e){return e.phoneNumber&&0<e.phoneNumber.length}},{key:"render",value:function(){var a=this,e=this.state.address,t=this.state.addressBook,n=this.state.checkoutState,o=this.state.formEdit,r=this.state.formNew,l=this.state.showAddress,i=null,s=null;if(0<t.length){var u=0,c=t.map(function(e){var t=a.isComplete(e);return d.default.createElement("div",{key:u++,className:"address-list-item clearfix"},!t&&d.default.createElement("div",{className:"incomplete-message"},d.default.createElement("span",{className:"glyphicon glyphicon-info-sign",style:{top:"3px"}}),"Â Â  This address needs your attention.",d.default.createElement("div",{className:"stretchy-line"},"Â "),d.default.createElement("a",{onClick:function(){return a.onEditAddress(e,!0)}},"Edit")),d.default.createElement("div",{className:"select-address-info"},d.default.createElement("address",null,e.firstName," ",e.lastName,d.default.createElement("br",null),e.address1,d.default.createElement("br",null),a.getOptionalLineMarkup(e.address2),e.city,", ",e.state," ",e.postalCode," ",d.default.createElement("br",null),e.phoneNumber,e.phoneNumber&&d.default.createElement("br",null),a.getOptionalLineMarkup(e.companyName)),t&&d.default.createElement("a",{onClick:function(){a.onEditAddress(e,!0)}},"Edit")),d.default.createElement("div",{className:"select-address-button"},d.default.createElement("button",{onClick:function(){a.selectExistingAddress(e,!1,!1)},disabled:!t,className:"btn btn-block btn-checkout"},"Use This Address")))});i=this.state.showMore?c:c.slice(0,3)}return l&&e&&(s=d.default.createElement("div",{className:(0,f.default)("shippingAddress","collapse",{in:l}),role:"tabpanel","aria-labelledby":"shippingAddress"},d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-xs-12"},d.default.createElement("address",null,e.firstName," ",e.lastName,d.default.createElement("br",null),e.address1,d.default.createElement("br",null),this.getOptionalLineMarkup(e.address2),e.city,", ",e.state," ",e.postal,d.default.createElement("br",null),e.phoneNumber,d.default.createElement("br",null),this.getOptionalLineMarkup(e.companyName)))))),d.default.createElement("div",{className:"panel panel-default shipping-address"},d.default.createElement("div",{className:"panel-header"},d.default.createElement("div",{className:"section-number"},"1"),d.default.createElement("h2",null,"Shipping Information"),l&&d.default.createElement("div",{className:"section-status"},d.default.createElement("div",{className:"link"},!n.isAnyEditing&&d.default.createElement("a",{onClick:this.onEditGetAddressesList},"Edit")))),d.default.createElement("div",{className:"panel-body"},d.default.createElement("div",{className:"checkout-padding-container"},s,!l&&!o&&!r&&0<t.length&&d.default.createElement("div",{className:(0,f.default)("shippingAddress","collapse",{in:!l}),role:"tabpanel","aria-labelledby":"shippingAddress"},0<this.state.cart.shippingGroups.length&&d.default.createElement("div",{className:"cancel-link"},d.default.createElement("a",{onClick:this.onEditSelectionCancel},"Cancel")),d.default.createElement("p",{className:"add-new-link"},d.default.createElement("a",{onClick:function(){a.onEditAddress()}},"+ Add New Shipping Address")),i,!this.state.showMore&&3<this.state.addressBook.length&&d.default.createElement("div",{className:"view-more-link"},d.default.createElement("p",null,d.default.createElement("a",{onClick:this.onEditSelectionViewMore},"View More"))))),(o||r)&&d.default.createElement("div",{className:(0,f.default)("shippingAddress","collapse",{in:this.state.formNew||this.state.formEdit}),role:"tabpanel","aria-labelledby":"shippingAddress"},d.default.createElement(y.default,{address:e,submit:this.selectAddress,cancel:this.cancel,isNew:r,validateImmediately:this.state.validateImmediately}))))}}])&&g(t.prototype,a),n&&g(t,n),o}();t.default=k},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStates=function(e,t,a,n){o.getStates(e,t).then(function(e){try{a(e)}catch(e){console.log(e)}})};var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(1131))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStates=function(e,t,a){var n;n="?filter="+e,void 0!==t&&(n+="&country_id="+t);return o.get("/api/location/states"+n,{},a)};var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(67))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(a(244)),l=n(a(211)),i=n(a(26)),s=n(a(10)),u=r(a(347)),c=r(a(4)),d=n(a(55)),f=r(a(52)),p=r(a(47)),m=r(a(6)),h=r(a(12)),y=n(a(11)),b=n(a(17)),g=n(a(543)),v=n(a(544)),E=n(a(346)),S=r(a(545)),k=r(a(0)),P=n(a(9)),w=r(a(23));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var D=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=N(r).call(this,e))||"object"!==O(n)&&"function"!=typeof n?T(a):n;var o=c.default.getProfile();return t.state={address:e.address,isNew:e.isNew,profile:o,stateOptions:S.default.getStates(),valid:!1},t.onProfileLoaded=t.onProfileLoaded.bind(T(T(t))),t.onSubmit=t.onSubmit.bind(T(T(t))),t.onStatesLoaded=t.onStatesLoaded.bind(T(T(t))),t.onAddressValidationComplete=t.onAddressValidationComplete.bind(T(T(t))),t.onValidationChange=t.onValidationChange.bind(T(T(t))),t.getFormData=t.getFormData.bind(T(T(t))),t.onCheckoutError=t.onCheckoutError.bind(T(T(t))),t.onShippingError=t.onShippingError.bind(T(T(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(r,k.default.Component),t=r,(a=[{key:"componentWillMount",value:function(){S.default.addStatesLoadedListener(this.onStatesLoaded),c.default.addProfileLoadedListener(this.onProfileLoaded),u.default.addValidationListener(this.onAddressValidationComplete),f.default.addCheckoutErrorListener(this.onCheckoutError),f.default.addShippingAddressUpdateErrorListener(this.onShippingError)}},{key:"componentWillUnmount",value:function(){S.default.removeStatesLoadedListener(this.onStatesLoaded),c.default.removeProfileLoadedListener(this.onProfileLoaded),u.default.removeValidationListener(this.onAddressValidationComplete),f.default.removeCheckoutErrorListener(this.onCheckoutError),f.default.removeShippingAddressUpdateErrorListener(this.onShippingError)}},{key:"componentDidMount",value:function(){0==S.default.getStates().length?g.getStates(v.LOCATION_FILTER_PARAMS.MAILING):this.props.validateImmediately?this.refs.form.validate():this.refs.form.validateWithoutCommitting(),this.state.profile||i.loadProfile()}},{key:"onProfileLoaded",value:function(){this.setState({profile:c.default.getProfile()})}},{key:"onStatesLoaded",value:function(){var e=this;this.setState({stateOptions:S.default.getStates()},function(){e.props.validateImmediately?e.refs.form.validate():e.refs.form.validateWithoutCommitting()})}},{key:"onAddressValidationComplete",value:function(e,t){if(!e.canceled){e.address&&(this.refs.address1.setValue(e.address.address1),this.refs.city.setValue(e.address.city),this.refs.state.setValue(e.address.state),this.refs.postalCode.setValue(e.address.postalCode),e.address.address2&&this.refs.address2.setValue(e.address.address2));var a=this.getFormData();this.state.address.shippingNickName&&(a.shippingNickName=this.state.address.shippingNickName);var n=this.props,o=this.state.isNew;window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){a.recaptchaToken=e,n.submit(a,o)}).catch(function(){n.submit(a,o)})})}}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"getFormData",value:function(){var e=new o.default(this.refs.form.gather());return this.state.isNew||(e.addressId=this.state.address.addressId),e}},{key:"onSubmit",value:function(){var t=this.getFormData();this.state.address.shippingNickName&&(t.shippingNickName=this.state.address.shippingNickName),d.clearCheckoutErrors(),this.refs.form.hasChanged()?(t.country="US",window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){t.recaptchaToken=e,t.updateType="email",l.validateAddressAtgStyle(t)}).catch(function(){l.validateAddressAtgStyle(t)})})):this.props.submit(t)}},{key:"onShippingError",value:function(e){var t=e.errors[0].code,a=e.data,n=this.state.profile;a.updateType="Shipping Address",b.hasFeatureFlag(y.TWO_F_A_AUTH)&&setTimeout(function(){s.TwoFaProfileModal(a,n,t)},0)}},{key:"onCheckoutError",value:function(e){if("shippingAddress"===e.contextIdentifier&&this.refs.form)for(var t in e.fieldErrors)this.refs.form.setServerSideValidationMessage(t,e.fieldErrors[t])}},{key:"render",value:function(){var o,r,e=this.state.address,t=this.state.stateOptions;return 0==t.length?null:k.default.createElement("div",null,k.default.createElement(m.default,{ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},k.default.createElement("div",{className:"checkout-padding-container"},k.default.createElement("div",{className:"row"},k.default.createElement("div",{className:"col-xs-12"},k.default.createElement("p",{className:"add-edit-title"},this.state.isNew&&k.default.createElement("strong",null,"Add New Shipping Address"),!this.state.isNew&&k.default.createElement("strong",null,"Edit Shipping Address")))),k.default.createElement("div",{className:"row note-line"},k.default.createElement("div",{className:"col-xs-12"},k.default.createElement("p",null,"Note: UPS can't service P.O. Boxes, APO or FPO"))),k.default.createElement("div",{className:"row hide"},k.default.createElement("div",{className:"col-xs-12"},k.default.createElement(p.default,{name:"defaultAddress",options:{label:"Set as Default Address",value:"defaultAddress"}}))),k.default.createElement("div",{className:"row"},k.default.createElement("div",{className:"col-xs-12"},k.default.createElement(h.default,{name:"firstName",label:"First Name",pattern:/^[a-zA-Z0-9 \-.]*$/,maxLength:33,initValue:e.firstName,serverSideValidationKey:"firstName",rules:[P.required("Please enter your first name."),P.maxLength(33),(r="lastName",{key:"firstNameLength",dependsOn:{controlKeys:[r],onEveryChange:!0},test:function(e,t,a){if(!a[r])return null;var n=e.length+a[r].value().length;return n<=30?null:"The name on your card must be a maximum of 30 characters."}})]}))),k.default.createElement("div",{className:"row"},k.default.createElement("div",{className:"col-xs-12"},k.default.createElement(h.default,{name:"lastName",label:"Last Name",pattern:/^[a-zA-Z \-.]*$/,maxLength:33,initValue:e.lastName,serverSideValidationKey:"lastName",rules:[P.required("Please enter your last name."),P.maxLength(33),(o="firstName",{key:"lastNameLength",dependsOn:{controlKeys:[o],onEveryChange:!0},test:function(e,t,a){if(!a[o])return null;var n=e.length+a[o].value().length;return n<=30?null:" "}})]}))),k.default.createElement("div",{className:"row"},k.default.createElement("div",{className:"col-xs-12"},k.default.createElement(h.default,{ref:"address1",name:"address1",label:"Street Address",pattern:/^[a-zA-Z0-9 \-./,]*$/,maxLength:35,initValue:e.address1,serverSideValidationKey:"address1",rules:[P.required("Please enter a street address."),P.maxLength(35)]}))),k.default.createElement("div",{className:"row"},k.default.createElement("div",{className:"col-md-6 col-sm-12"},k.default.createElement(h.default,{ref:"address2",name:"address2",label:"Apt/Suite (optional)",pattern:/^[a-zA-Z0-9 \-./,]*$/,maxLength:35,initValue:e.address2,serverSideValidationKey:"address2",rules:[P.maxLength(35)]}))),k.default.createElement("div",{className:"row"},k.default.createElement("div",{className:"col-xs-12"},k.default.createElement(h.default,{ref:"city",name:"city",label:"City",pattern:/^[a-zA-Z0-9 \-.]*$/,maxLength:30,initValue:e.city,serverSideValidationKey:"city",rules:[P.required("Please enter a city."),P.maxLength(30)]}))),k.default.createElement("div",{className:"row"},k.default.createElement("div",{className:"col-md-6 col-sm-12"},k.default.createElement(w.default,{ref:"state",name:"state",label:"State",options:t,initValue:e.state,serverSideValidationKey:"state",rules:[P.required("Please select a state.")]})),k.default.createElement("div",{className:"col-md-6 col-sm-12"},k.default.createElement(h.default,{ref:"postalCode",name:"postalCode",label:"Zip",initValue:e.postalCode,maxLength:10,serverSideValidationKey:"postalCode",rules:[P.required("Please enter a postal/zip code."),E.postalCodeUS(!0),P.maxLength(10)]}))),k.default.createElement("div",{className:"row"},k.default.createElement("div",{className:"col-xs-12"},k.default.createElement(h.default,{ref:"phoneNumber",name:"phoneNumber",label:"Phone Number",initValue:e.phoneNumber,maxLength:15,serverSideValidationKey:"phone",rules:[P.required("Please enter a phone number."),E.phoneNumber(),P.maxLength(15)]}))),k.default.createElement("div",{className:"row"},k.default.createElement("div",{className:"col-xs-12"},k.default.createElement(h.default,{name:"companyName",label:"Company",pattern:/^[a-zA-Z0-9 \-.]*$/,initValue:e.companyName,serverSideValidationKey:"companyName",maxLength:35,rules:[P.maxLength(35)]})))),k.default.createElement("div",{className:"button-centered"},k.default.createElement("button",{className:"btn",disabled:!this.state.valid,"data-sitekey":"6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v","data-callback":"onSubmit","data-action":"submit"},this.state.isNew?"Continue":"Use This Address"))),(0<f.default.cart().shippingGroups.length||0<c.default.getAddressBook().length)&&k.default.createElement("div",{className:"cancel-link"},k.default.createElement("a",{onClick:this.props.cancel},"Cancel")))}}])&&C(t.prototype,a),n&&C(t,n),r}();t.default=D},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(100)),i=(n(a(250)),n(a(528)));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.default.Component),a=t,(n=[{key:"componentDidMount",value:function(){this.props.tabUpdate(l.COUPON_VIEWS.BN_PROMO)}},{key:"render",value:function(){return r.default.createElement("div",{className:"create-coupon-container"},r.default.createElement(i.default,{tabActive:this.props.location.state?this.props.location.state.tabActive:null,id:this.props.location.query?this.props.location.query.id:null}))}}])&&s(a.prototype,n),o&&s(a,o),t}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=i(a(0)),b=a(7),o=a(2),p=i(a(1)),s=a(24),u=i(a(82)),m=i(a(4)),h=i(a(62)),r=n(a(100)),y=i(a(76)),g=i(a(107)),v=i(a(6)),E=n(a(11)),S=n(a(17)),k=i(a(12)),l=(i(a(92)),n(a(14))),c=i(a(38)),P=i(a(8)),w=(n(a(91)),i(a(27))),O=n(a(9)),C=i(a(46)),N=(i(a(23)),i(a(3))),_=(i(a(250)),i(a(66))),T=i(a(80)),d=n(a(22));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var B=r.COUPON_VIEWS,x=r.PROMO_TYPE,R=function(e){function i(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a=this,t=!(n=M(i).call(this,e))||"object"!==D(n)&&"function"!=typeof n?A(a):n;var o=u.default.parse(window.location.search.substring(1)),r=o.id?o.id:null,l=o.ean?o.ean:"";return t.state={bookInputType:"title",couponCode:null,couponId:r,couponLoaded:!1,couponSpecsLoaded:!1,discountPercentage:null,eanList:l?[l]:[],eansLoaded:!1,eansWithTitles:{},editedCoupon:null,endDate:null,formErrors:[],initEan:l,initDiscount:null,loaded:!1,maxDate:null,maxDayRange:365,minDate:null,minEndDate:null,otherDiscountSelected:!1,promotionType:null,startDate:null,suggestedProjects:[],valid:!1,tabActive:"CreateCoupon",isCreateCouponSelected:!0,isSummarySelected:!1,isCouponSelected:!1,selectedCouponName:null,selectedCouponDesc:null,loading:!1,activeTab:t.props.location.query.activeTab?t.props.location.query.activeTab:"ACTIVE",totalPages:1,page:1,bnpToolAccessPermission:0},t.onBookInputTypeChange=t.onBookInputTypeChange.bind(A(A(t))),t.onCancel=t.onCancel.bind(A(A(t))),t.onCouponsLoaded=t.onCouponsLoaded.bind(A(A(t))),t.onCouponSpecsLoaded=t.onCouponSpecsLoaded.bind(A(A(t))),t.onDebounceSubmit=(0,s.debounce)(500,!0,t.onDebounceSubmit.bind(A(A(t)))),t.onDeleteEan=t.onDeleteEan.bind(A(A(t))),t.onDiscountChanged=t.onDiscountChanged.bind(A(A(t))),t.onEansLoaded=t.onEansLoaded.bind(A(A(t))),t.onEanCommit=t.onEanCommit.bind(A(A(t))),t.onStartDateChanged=t.onStartDateChanged.bind(A(A(t))),t.onEndDateChanged=t.onEndDateChanged.bind(A(A(t))),t.onPromotionChanged=t.onPromotionChanged.bind(A(A(t))),t.onSubmit=t.onSubmit.bind(A(A(t))),t.onTitleSelect=t.onTitleSelect.bind(A(A(t))),t.onUserCouponSaveError=t.onUserCouponSaveError.bind(A(A(t))),t.onValidationChange=t.onValidationChange.bind(A(A(t))),t.onTabClick=t.onTabClick.bind(A(A(t))),t.chooseCreateCouponType=t.chooseCreateCouponType.bind(A(A(t))),t.makeClick=t.makeClick.bind(A(A(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(i,f.default.Component),t=i,(a=[{key:"componentWillMount",value:function(){P.default.addEbookCouponsLoadedListener(this.onCouponsLoaded),P.default.addUserCouponSavedErrorListener(this.onUserCouponSaveError),P.default.addCouponSpecsListener(this.onCouponSpecsLoaded),c.default.addProjectSearchesLoadedListener(this.onEansLoaded)}},{key:"componentDidMount",value:function(){var e=m.default.getUser().bnpToolAccess;this.setState({bnpToolAccessPermission:e}),l.getCouponSpecs(),this.state.couponId?P.default.coupons()?this.onCouponsLoaded():l.getEbookCoupons(m.default.getUser().vendorNumber,"",this.state.activeTab,this.state.page,50):this.setState({couponLoaded:!0}),this.props.tabUpdate(B.CREATE_COUPON),this.refs.form.validateWithoutCommitting()}},{key:"componentWillUnmount",value:function(){P.default.removeEbookCouponsLoadedListener(this.onCouponsLoaded),P.default.removeUserCouponSavedErrorListener(this.onUserCouponSaveError),P.default.removeCouponSpecsListener(this.onCouponSpecsLoaded),c.default.removeProjectSearchesLoadedListener(this.onEansLoaded)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onTabClick",value:function(e){var t=this;"CreateCoupon"===e?this.setState({tabActive:"CreateCoupon"}):"MonthlyPromotions"===e?o.browserHistory.push({pathname:"/projects/coupon/bn-promo",state:{tabActive:"MonthlyPromotions"}}):"StandardPromotions"===e&&o.browserHistory.push({pathname:"/projects/coupon/bn-promo",state:{tabActive:"StandardPromotions"}}),e!=this.state.tabActive&&(this.setState({loading:!0}),setTimeout(function(){t.setState({loading:!1})},2e3))}},{key:"onBookInputTypeChange",value:function(e){this.setState({bookInputType:e.newValue})}},{key:"onCancel",value:function(){var e=this;this.setState({couponLoaded:!1,startDate:null,endDate:null,eanList:[],isCouponSelected:!1,promotionType:null}),this.refs.startDate.setValue(null,!0),this.refs.endDate.setValue(null,!0),this.state.promotionType===x.COUPON&&(this.refs.discountPercentage.reset(),this.refs.otherDiscount.reset(),this.refs.couponCode.reset()),this.refs.eanList?this.refs.eanList.reset():this.refs.bookTitle.setValue("",!0),(this.state.editedCoupon||""!==this.state.initEan)&&this.props.onViewChange(B.COUPON_SUMMARY),this.props.onError&&this.props.onError(!1),setTimeout(function(){e.setState({couponLoaded:!0})},1e3),d.smoothScrollToWindowTop()}},{key:"onCouponsLoaded",value:function(){var e,t,a=this,n=P.default.coupons(),o=null,r=this.state.eanList.slice(0),l={},i=null,s=null,u=this.state.maxDayRange,c=!1,d=null,f=n.scheduledCoupons,p=null;if(0<f.length){(i=f.filter(function(e){return e.id===a.state.couponId}))&&0<i.length&&(o=Math.trunc(Number(i[0].discountPercentage)),r=i[0].eanList,s=(0,b.bn_moment)(i[0].endDate,"MM/DD/YYYY"),d=i[0].promoType,p=(0,b.bn_moment)(i[0].startDate,"MM/DD/YYYY"),50!==o&&75!==o&&100!==o&&(c=!0),this.props.onViewChange(B.CREATE_COUPON,!0));for(var m=0;m<f.length;m++)for(var h=0;h<f[m].projectList.length;h++){var y=f[m].projectList[h].ean;r.includes(y)&&(l[y]=f[m].projectList[h].title)}}i&&("X_PERCENT_OFF_COUPON"==i[0].promoType?(e="X% Off w. Coupon Code",t="Discount your eBook/s and avoid price matching by creating a unique code exclusive to B&N readers."):"BOGO_X_PERCENT_OFF"==i[0].promoType&&(e="Buy One Get One X% Off (BOGO)",t="Reward B&N readers with a selection of your eBooks available for free or at a reduced price with a full-price purchase.")),this.setState({couponLoaded:!0,eanList:r,eansWithTitles:l,editedCoupon:i&&i[0],endDate:s,initDiscount:o,loaded:this.state.couponSpecsLoaded,maxDate:p&&p.clone().add(u,"days"),minEndDate:p&&p.clone().add(1,"day"),otherDiscountSelected:c,promotionType:d,startDate:p,isCouponSelected:0<i.length,selectedCouponName:e,selectedCouponDesc:t})}},{key:"onCouponSpecsLoaded",value:function(){var e=P.default.couponSpecs();this.setState({minDate:(0,b.bn_moment)(e.earliestStart,"MM/DD/YYYY"),maxDayRange:e.maxDayRange,couponSpecsLoaded:!0,loaded:this.state.couponLoaded})}},{key:"onDebounceSubmit",value:function(){if(this.refs.form.valid()){this.props.onError&&this.props.onError(!1);var e=this.refs.form.gather();e.startDate=(0,b.bn_moment)(e.startDate,"MM/DD/YYYY").format("MM/DD/YYYY"),e.endDate=(0,b.bn_moment)(e.endDate,"MM/DD/YYYY").format("MM/DD/YYYY");var t={discountPercentage:"other"===e.discountPercentage?e.otherDiscount:e.discountPercentage,eanList:this.state.eanList,endDate:e.endDate,lastDateToEdit:null,promoType:this.state.promotionType,startDate:e.startDate};this.state.promotionType===x.COUPON&&0==this.state.bnpToolAccessPermission&&(t.couponCode="BNP"+e.couponCode.toUpperCase()),this.state.promotionType===x.COUPON&&1==this.state.bnpToolAccessPermission&&(t.couponCode=e.couponCode.toUpperCase()),"100"===e.discountPercentage&&this.state.promotionType!==x.COUPON&&(t.promoType=x.BOGO_FREE),this.state.editedCoupon&&(t.id=this.state.editedCoupon.id),l.submitCoupon(t)}}},{key:"onDeleteEan",value:function(t){var e=this.state.eanList;this.setState({eanList:e.filter(function(e){return e!==t})},this.onValidationChange)}},{key:"onDiscountChanged",value:function(e){var t=this;"other"===e.newValue?this.setState({otherDiscountSelected:!0}):(this.setState({otherDiscountSelected:!1}),""!==this.refs.otherDiscount.value()&&this.refs.otherDiscount.reset()),setTimeout(function(){return t.refs.form&&t.refs.form.validateWithoutCommitting()})}},{key:"onEansLoaded",value:function(){this.setState({eansLoaded:!0})}},{key:"onEanCommit",value:function(e){var t=this;if(""===e.newValue)return this.onValidationChange(),void(0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("eanList","Please enter an EAN."));var a=[],n=this.state.eanList.slice(0),o=e.newValue.split(/[,\s]+/g),r=!1;300<o.length?this.refs.form.setServerSideValidationMessage("eanList","Please enter a maximum of 300 EANs."):(o.forEach(function(e){0==t.state.bnpToolAccessPermission?c.default.uniqueIsbns.includes(e)?n.includes(e)||("true"!==c.default.findProjectByEan(e).projectFlags.preOrder||t.state.promotionType!==x.BOGO&&t.state.promotionType!==x.BOGO_FREE?n.push(e):(a.push(e),r=!0)):a.push(e):n.includes(e)||n.push(e)}),this.setState({eanList:n},function(){t.refs.eanList.setValue(a.join(", ")),t.onValidationChange(),0<a.length&&(r?t.refs.form.setServerSideValidationMessage("eanList","eBooks on pre-order cannot be used with this promotion."):t.refs.form.setServerSideValidationMessage("eanList","Please enter a valid on sale eBook EAN or one that belongs to you."))}))}},{key:"onPromotionChanged",value:function(e,t,a){this.setState({promotionType:e,selectedCouponName:t,selectedCouponDesc:a,isCouponSelected:!0}),d.smoothScrollToWindowTop()}},{key:"chooseCreateCouponType",value:function(){this.setState({promotionType:null,isCouponSelected:!1,selectedCouponName:null,selectedCouponDesc:null}),d.smoothScrollToWindowTop()}},{key:"onStartDateChanged",value:function(e){var t=e.newValue;if(t){var a=t.clone().add(this.state.maxDayRange,"days");this.setState({startDate:t,minEndDate:t.clone().add(1,"days"),maxDate:a}),this.refs.endDate&&""!==this.refs.endDate.value()&&(t>=this.refs.endDate.value()||a<this.refs.endDate.value())&&this.refs.endDate.setValue(null,!0)}}},{key:"onEndDateChanged",value:function(e){var t=e.newValue;t&&(this.refs.startDate&&t<=this.refs.startDate.value()&&(this.refs.endDate.setValue(null,!0),t=null),this.setState({endDate:t}))}},{key:"onSubmit",value:function(){this.onDebounceSubmit()}},{key:"onTitleSelect",value:function(e){var t=this;if(""===e.newValue)return this.onValidationChange(),void(0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("bookTitle","Please enter a Book Title."));var a=this.state.eanList.slice(0),n=c.default.findProjectByTitle(e.newValue.trim()),o=n?n.ean:null;if(o){var r=!1;a.includes(o)||("true"!==n.projectFlags.preOrder||this.state.promotionType!==x.BOGO&&this.state.promotionType!==x.BOGO_FREE?a.push(o):(this.refs.form.setServerSideValidationMessage("bookTitle","eBooks on pre-order cannot be used with this promotion."),r=!0)),r||this.setState({eanList:a},function(){t.refs.bookTitle.setValue(""),t.onValidationChange()})}else this.refs.form.setServerSideValidationMessage("bookTitle","Please enter a valid on sale eBook title or one that belongs to you.")}},{key:"onUserCouponSaveError",value:function(e){var a=this,t=e.fieldErrors;if(t&&0<t.length){var n=[];t.forEach(function(t){var e=r.COUPON_ERRORS.find(function(e){return e.id===t});a.refs.form.setServerSideValidationMessage(e.field,e.message),n.push(e)}),this.setState({formErrors:n})}d.smoothScrollToWindowTop(),this.state.couponLoaded&&(this.props.onError(!0),this.onValidationChange())}},{key:"onValidationChange",value:function(){var t=this,e=this.refs.form&&this.refs.form.valid(),a=this.state.promotionType===x.COUPON?0:1;if(this.state.otherDiscountSelected&&this.refs&&this.refs.otherDiscount&&(e=e&&""!==this.refs.otherDiscount.value()),e=e&&this.state.eanList.length>a,this.refs.bookTitle&&0<this.refs.bookTitle.getValue().length&&(e=!1),this.refs.eanList&&0<this.refs.eanList.value().length&&(e=!1),0<this.state.formErrors.length){var n=0;this.state.formErrors.forEach(function(e){t.refs[e.field].state.serverSideValidationMessage!==e.message&&n++}),n===this.state.formErrors.length?(e=!0,this.setState({formErrors:[]})):e=!1}if(0==this.state.bnpToolAccessPermission)for(var o=0,r=this.state.eanList.length;o<r;o++){if(!c.default.findProjectByEan(this.state.eanList[o])){e=!1;break}}e&&this.props.onError(!1),this.setState({valid:e})}},{key:"render",value:function(){var o,r,l=this,e=[{c_type:x.COUPON,c_name:"X% Off w. Coupon Code",c_desc:" Discount your eBook/s and avoid price matching by creating a unique code exclusive to B&N readers."},{c_type:x.BOGO,c_name:"Buy One Get One X% Off (BOGO)",c_desc:"Reward B&N readers with a selection of your eBooks available for free or at a reduced price with a full-price purchase."}].map(function(e){var t=e.c_type,a=e.c_name,n=e.c_desc;return f.default.createElement("div",{tabIndex:"0",onKeyDown:l.makeClick,onClick:function(){return l.onPromotionChanged(t,a,n)},key:e.c_type},!l.state.isCouponSelected&&f.default.createElement("div",{className:"coupon-body coupon-content"},f.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-selectType coupon-name"},f.default.createElement("span",null,f.default.createElement("strong",null,e.c_name))),f.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 coupon-title coupon-standard"},f.default.createElement("span",null,e.c_desc)),f.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-selectType coupon-btn"},f.default.createElement("a",{className:"go-back"},f.default.createElement("span",{className:"UnderlineGoBack",tabIndex:"0",onKeyDown:l.makeClick,onClick:function(){return l.onPromotionChanged(t,a,n)}},"Create Coupon")))))}),t=this.state,a=t.bookInputType,n=t.editedCoupon,i=(t.suggestedProjects,t.eanList),s=t.eansLoaded,u=t.loaded,c=n&&(this.state.otherDiscountSelected?"other":(+n.discountPercentage).toString()),d="";return null!==this.state.minDate&&(d="To give our team time to review and schedule your request, the earliest available start date is "+this.state.minDate.format("MM/DD/YYYY")+". The end date must be within 1 year of the start date."),f.default.createElement("div",{className:"create-coupon-container"},f.default.createElement(v.default,{className:"create-form",ref:"form",onSubmit:this.onSubmit,onChange:this.onValidationChange},u&&f.default.createElement("div",null,f.default.createElement("div",{className:"panel-section coupon-content"},this.state.isCreateCouponSelected&&f.default.createElement("div",null,S.hasFeatureFlag(E.MERCHANDISING)&&m.default.hasMarchendisePermission(E.MERCHANDISING)&&f.default.createElement("div",null,f.default.createElement("div",{className:"panel-header top-header"},f.default.createElement("div",{className:"section-number"},"1"),f.default.createElement("h2",null,"Select Promotion Type")),!this.state.isCouponSelected&&f.default.createElement("div",{className:(0,p.default)("coupon-create",{createCouponSelected:"CreateCoupon"==this.state.tabActive,monthlyPromotionsSelected:"MonthlyPromotions"==this.state.tabActive,standardPromotionsSelected:"StandardPromotions"==this.state.tabActive})},f.default.createElement("div",{className:"btn btn-secondary btn-create-coupon btn-s",tabIndex:"0",onKeyDown:this.makeClick,onClick:function(){return l.onTabClick("CreateCoupon")}},f.default.createElement("span",null,"Create Coupons")),f.default.createElement("div",{className:"btn btn-secondary btn-month-promo btn-s",tabIndex:"0",onKeyDown:this.makeClick,onClick:function(){return l.onTabClick("MonthlyPromotions")}},f.default.createElement("span",null,"Monthly Promotions")),f.default.createElement("div",{className:"btn btn-secondary btn-stan-promo btn-s",tabIndex:"0",onKeyDown:this.makeClick,onClick:function(){return l.onTabClick("StandardPromotions")}},f.default.createElement("span",null,"Standard Promotions")))),"CreateCoupon"==this.state.tabActive&&!this.state.isCouponSelected&&f.default.createElement("div",{className:"create-coupon-subtitle-container btn-selectType coupon-desc"},f.default.createElement("div",null,f.default.createElement("ul",{className:"create-coupon-list"},f.default.createElement("li",null,"Reward your B&N/NOOK readers by creating an eBook promotion (e.g., coupon code, BOGO) exclusive to B&N (i.e. no price matching).Choose the promotion type, start and end date, and titles."),f.default.createElement("li",null,"Go to our ",f.default.createElement("a",{target:"_blank",href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5357559215131-Creating-Coupon-Codes-for-eBooks",className:"underline-link"},"Help Center")," for more information about creating promotions and how royalties are calculated."),f.default.createElement("li",null,"Remember to share your promotions with your readers on ",f.default.createElement("i",{className:"fa fa-facebook-official fa-facebook-color","aria-hidden":"true"})," Facebook and ",f.default.createElement("i",{className:"fa fa-twitter fa-facebook-color","aria-hidden":"true"})," Twitter , so they can take advantage of these limited-time offers."))),f.default.createElement("div",null,e)),this.state.isCouponSelected&&f.default.createElement("div",{className:"selectedDiv"},f.default.createElement("div",{className:"coupon-body coupon-content coupon-selectedBody"},f.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-selectType coupon-name"},f.default.createElement("span",null,f.default.createElement("strong",null,this.state.selectedCouponName))),f.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 coupon-standard"},f.default.createElement("span",null,this.state.selectedCouponDesc)),f.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-selectType coupon-greyBtn"},f.default.createElement("span",null,"Selected"))),f.default.createElement("div",{className:"BtnBlueBorder"},f.default.createElement("span",{onClick:function(){return l.chooseCreateCouponType()},tabIndex:"0",onKeyDown:this.makeClick},"Change Coupon"))))),this.state.promotionType&&f.default.createElement("div",null,f.default.createElement("div",{className:"panel-section coupon-content"},f.default.createElement("div",{className:"panel-header top-header cpn-date"},f.default.createElement("div",{className:"section-number"},"2"),f.default.createElement("h2",null,"Select Dates")),f.default.createElement("div",{className:"panel-body coupon-date-container"},f.default.createElement("div",{className:"create-coupon-subtitle date-limit-text"},d),f.default.createElement("div",{className:"date-picker-frame"},f.default.createElement("div",{className:"col-xs-7 date-picker-date"},f.default.createElement(y.default,{name:"startDate",className:"coupon-date",serverSideValidationKey:"startDate",label:"Start Date",ref:"startDate",initValue:this.state.startDate,minDate:this.state.minDate,onChange:this.onStartDateChanged,rules:[O.required()],selectsStart:!0})),f.default.createElement("div",{className:"col-xs-5 date-picker-time-container"},f.default.createElement("span",{className:"date-picker-time"},"@ 12:00 AM ET"))),f.default.createElement("div",{className:"coupon-date-divider"},"TO"),f.default.createElement("div",{className:"date-picker-frame"},f.default.createElement("div",{className:"col-xs-7 date-picker-date"},f.default.createElement(y.default,{name:"endDate",ref:"endDate",serverSideValidationKey:"endDate",label:"End Date",initValue:this.state.endDate,readOnly:!n&&!this.state.startDate,rules:[O.required()],selectsEnd:!0,minDate:this.state.startDate?this.state.minEndDate:this.state.minDate,maxDate:this.state.maxDate,onChange:this.onEndDateChanged})),f.default.createElement("div",{className:"col-xs-5 date-picker-time-container"},f.default.createElement("span",{className:"date-picker-time"},"@ 2:59 AM ET"))))),f.default.createElement("div",{className:"panel-section coupon-content"},f.default.createElement("div",{className:"panel-header top-header"},f.default.createElement("div",{className:"section-number"},"3"),f.default.createElement("h2",null,"Select Book(s)")),f.default.createElement("div",{className:"panel-body"},f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"create-coupon-subtitle-container col-xs-12 left"},f.default.createElement("div",{className:"create-coupon-subtitle"},"Enter the eBooks that qualify with this promotion by Book Title or EAN.",f.default.createElement("span",{className:"required-item-asterisk"},"*")))),f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-xs-12"},f.default.createElement(w.default,{name:"bookInputType",ref:"bookInputType",onChange:this.onBookInputTypeChange,initValue:this.state.bookInputType,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"title",label:"Book Title"},{value:"ean",label:"EAN (Add a space or comma after each EAN)"}]}))),f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-md-6 col-xs-12"},"title"===a&&f.default.createElement(C.default,{name:"bookTitle",ref:"bookTitle",label:"Book Title",serverSideValidationKey:"bookTitle",hideSearchIcon:!0,titlesOnly:!0,filterOption:"EBOOK",onSubmit:this.onTitleSelect,onCommit:this.onTitleSelect,saleStatus:"ONSALE"}),"ean"===a&&f.default.createElement(_.default,{name:"eanList",autoComplete:"off",ref:"eanList",serverSideValidationKey:"eanList",label:"EAN(s)",onCommit:this.onEanCommit,commitOnEnterKey:!0}))),f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-md-8 col-xs-12"},s&&f.default.createElement(g.default,{items:i,onDeleteEan:this.onDeleteEan,eansWithTitles:this.state.eansWithTitles}))))),f.default.createElement("div",{className:"panel-section coupon-content"},f.default.createElement("div",{className:"panel-header top-header coupon-discount-header"},f.default.createElement("div",{className:"section-number"},"4"),f.default.createElement("h2",null,"Select Discount")),f.default.createElement("div",{className:"panel-body"},f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-xs-12"},f.default.createElement("div",{className:"discount-radio-container"},f.default.createElement(w.default,{ref:"discountPercentage",name:"discountPercentage",serverSideValidationKey:"discountPercentage",className:"discount-radio",options:[{value:"50",label:"50%"},{value:"75",label:"75%"},{value:"100",label:"100% (free)"},{value:"other",label:"Other"}],initValue:n?c:null,radioColClass:"col-md-12",fieldLayout:"discount-radio-field-layout",radioLayout:"discount-radio-radio-layout",onChange:this.onDiscountChanged,rules:[O.required("Please select a discount.")]})),f.default.createElement("div",{className:"discount-other-container"},f.default.createElement(k.default,{className:"discount-other",autoComplete:"off",label:"Other",name:"otherDiscount",labelAsPlaceholder:!0,initValue:this.state.otherDiscountSelected?Number(this.state.initDiscount):null,ref:"otherDiscount",readOnly:!this.state.otherDiscountSelected,rules:this.state.otherDiscountSelected?[O.required("Please enter a discount"),O.minValue(1,"Discount must be at least 1%.")]:[O.minValue(1,"Discount must be at least 1%.")],pattern:/^\d{0,2}$/})),f.default.createElement("div",{className:"discount-other-percent"},"%")))))),this.state.promotionType===x.COUPON&&f.default.createElement("div",null,f.default.createElement("div",{className:"panel-section coupon-content"},f.default.createElement("div",{className:"panel-header top-header"},f.default.createElement("div",{className:"section-number"},"5"),f.default.createElement("h2",null,"Coupon Code")),f.default.createElement("div",{className:"panel-body"},f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"create-coupon-subtitle-container col-xs-12 left"},f.default.createElement("div",{className:"create-coupon-subtitle"},"Create your coupon code. It can be 7 to 12 alphanumeric characters. Coupon codes should be short, easy to remember and include the discount percentage; e.g., BNPMARY50"))),f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"col-xs-12"},0==this.state.bnpToolAccessPermission&&f.default.createElement("div",{className:"pull-left create-coupon-code-container",style:{marginRight:"10px"}},f.default.createElement(k.default,{className:"coupon-code",autoComplete:"off",name:"couponCode",disableInitialValidation:!0,serverSideValidationKey:"couponCode",label:"Coupon Code",labelAsPlaceholder:!1,prefix:"BNP",initValue:n&&n.promoType===x.COUPON?n.couponCode.slice(3):"",ref:"couponCode",maxLength:12,pattern:/^BNP[a-zA-Z0-9]*$/g,rules:[O.required("Please enter a coupon code."),(o="Please enter a coupon code",r="BNP",{key:"prefixRequired",test:function(e,t,a){var n=a.couponCode.touched();return n&&e&&3===e.length&&e===r?o||"Please enter the "+t+".":null}}),O.pattern(/^[a-zA-Z0-9]{4,9}$/,"Your coupon code must be 7 to 12 alphanumeric characters.",!0)]})),1==this.state.bnpToolAccessPermission&&f.default.createElement("div",{className:"pull-left create-coupon-code-container",style:{marginRight:"10px"}},f.default.createElement(k.default,{className:"coupon-code",autoComplete:"off",name:"couponCode",disableInitialValidation:!0,serverSideValidationKey:"couponCode",label:"Coupon Code",labelAsPlaceholder:!1,initValue:n&&n.promoType===x.COUPON?n.couponCode:"",ref:"couponCode",rules:[O.required("Please enter a coupon code.")]})),f.default.createElement("div",{className:"pull-left coupon-code-tooltip"},f.default.createElement(T.default,{info:!0,isHtml:!1,text:"All B&N Press coupon codes must be prefixed with BNP to ensure they are unique to B&N Press authors."})))))),f.default.createElement("hr",null)),this.state.promotionType&&f.default.createElement("div",{className:"panel-section coupon-content save-or-cancel"},f.default.createElement(h.default,{buttonText:"Save & Continue",ref:"saveButton",click:this.onSubmit,disabled:!this.state.valid}),f.default.createElement("span",{className:"cancel",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onCancel},"Cancel")))),this.state.loading&&f.default.createElement(N.default,null),!this.state.loaded&&f.default.createElement(N.default,null))}}])&&j(t.prototype,a),n&&j(t,n),i}();t.default=R},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var w=g(a(0)),O=a(7),r=a(2),C=g(a(1)),l=g(a(4)),N=g(a(167)),n=b(a(100)),i=b(a(10)),s=b(a(14)),o=b(a(15)),u=g(a(8)),d=g(a(3)),c=g(a(546)),f=g(a(250)),p=g(a(119)),m=b(a(11)),h=b(a(17)),y=g(a(72));function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _=n.COUPON_VIEWS,T=o.PROJECT_STATUSES.OnSale,D=n.PROMO_LABEL,j=n.PROMO_TYPE,M=[{label:"Active Coupons",value:"ACTIVE"},{label:"Scheduled Coupons",value:"SCHEDULED"},{label:"Old Coupons",value:"EXPIRED"}],L=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=S(o).call(this,e))||"object"!==v(n)&&"function"!=typeof n?P(a):n).state={activeCoupons:[],expiredCoupons:[],hasNoCoupons:!0,loading:!0,scheduledCoupons:[],showMoreExpiredCoupons:!1,activeTab:t.props.location.query.activeTab?t.props.location.query.activeTab:"ACTIVE",totalPages:1,page:1},t.onCouponsLoaded=t.onCouponsLoaded.bind(P(P(t))),t.onCouponsDelete=t.onCouponsDelete.bind(P(P(t))),t.onDelete=t.onDelete.bind(P(P(t))),t.onEdit=t.onEdit.bind(P(P(t))),t.renderCoupon=t.renderCoupon.bind(P(P(t))),t.renderCoupons=t.renderCoupons.bind(P(P(t))),t.onShare=t.onShare.bind(P(P(t))),t.toggleShowMore=t.toggleShowMore.bind(P(P(t))),t.onTabChange=t.onTabChange.bind(P(P(t))),t.onPageChange=t.onPageChange.bind(P(P(t))),t.makeClick=t.makeClick.bind(P(P(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(o,w.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){u.default.addEbookCouponsLoadedListener(this.onCouponsLoaded),u.default.addEbookCouponsDeleteListener(this.onCouponsDelete)}},{key:"componentDidMount",value:function(){var e=this,t=l.default.getUser();this.setState({isActiveSelected:!this.props.location.query.activeTab,isScheduledSelected:!!this.props.location.query.activeTab,isExpiredSelected:!1,activeTab:this.props.location.query.activeTab?this.props.location.query.activeTab:"ACTIVE"},function(){return s.getEbookCoupons(t.vendorNumber,"",e.state.activeTab,e.state.page,50)}),this.props.tabUpdate(_.COUPON_SUMMARY)}},{key:"componentWillUnmount",value:function(){u.default.removeEbookCouponsLoadedListener(this.onCouponsLoaded),u.default.removeEbookCouponsDeleteListener(this.onCouponsDelete)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onShare",value:function(e){var t=screen.height,a=screen.width,n=Math.round(a/2-275),o=420<t?Math.round(t/2-210):0;e.preventDefault(),window.open(e.target.parentElement.href,e.target.parentElement.id,"left=".concat(n,", top=").concat(o,", width=").concat(550,", height=").concat(420,", ").concat("scrollbars=yes,resizable=yes,toolbar=no,location=yes"))}},{key:"onCouponsLoaded",value:function(){var e,t=u.default.coupons(),a=t.activeCoupons,n=t.expiredCoupons,o=t.scheduledCoupons,r=0===a.length&&0===n.length&&0===o.length,l=t.noOfRecords;e=t?Math.ceil(l/50):0,this.setState({activeCoupons:a,hasNoCoupons:r,expiredCoupons:n,loading:!1,scheduledCoupons:o,totalPages:e})}},{key:"onCouponsDelete",value:function(){u.default.couponsDelete();s.getEbookCoupons(l.default.getUser().vendorNumber,"",this.state.activeTab,this.state.page,50)}},{key:"onDelete",value:function(a){var n=this;i.showConfirmationModalWithContent("Delete Coupon Code","Are you sure you want to delete this scheduled coupon code?","Delete","Cancel",function(e,t){e&&n.setState({loading:!0},function(){s.deleteEbookCoupon(a)})})}},{key:"onEdit",value:function(e){r.browserHistory.push("/projects/coupon?id="+e)}},{key:"renderCoupons",value:function(e){var a=this,t="EXPIRED"===e[0].status,n=this.state.showMoreExpiredCoupons?e.length:50;if(0<e.length){var o=[];return t?e.forEach(function(e,t){t<n&&(o.push(a.renderCoupon(e)),o.push(a.renderRedeemed(e)))}):e.forEach(function(e){o.push(a.renderCoupon(e)),"SCHEDULED"===e.status?o.push(a.renderLastEditDate(e)):o.push(a.renderRedeemed(e))}),o}return null}},{key:"toggleShowMore",value:function(){this.setState({showMoreExpiredCoupons:!this.state.showMoreExpiredCoupons})}},{key:"renderCoupon",value:function(e){var t,a,n,o,r,l,i,s=this,u=e.promoType===j.BOGO||e.promoType===j.BOGO_FREE?"N/A":e.couponCode,c=[],d=[],f=[],p=(0,O.bn_moment)(e.endDate,"MM/DD/YYYY"),m=null,h=(0,O.bn_moment)(e.startDate,"MM/DD/YYYY"),y=(0,O.bn_moment)(e.lastDateToEdit,"MM/DD/YYYY"),b=[];e.promoType===j.BOGO||e.promoType===j.BOGO_FREE?n="buy one, get one "+("BOGO FREE"===(m=100!=+e.discountPercentage&&e.discountPercentage?"".concat(D.BOGO,"<br/>").concat(+e.discountPercentage,"% OFF"):"".concat(D.BOGO," FREE"))?"free":Math.trunc(e.discountPercentage)+"% off "):n="save "+(m=+e.discountPercentage+"%");"SCHEDULED"===e.status&&(t=!(0,O.bn_moment)().isAfter(y,"day"));for(var g=[],v=0;v<e.projectList.length;v++)e.projectList[v].submissionStatusId!==T&&"EXPIRED"!==e.status&&g.push(e.projectList[v].ean);for(var E=0;E<e.eanList.length;E++){var S=g.includes(e.eanList[E]),k=e.eanList[E],P=S?"EAN is off sale":"";a=e.projectList[E].title,b.push("bn.com/w?ean="+k),f.push(" "+a+" - bn.com/w?ean="+k),d.push("\n"+a+" - bn.com/w?ean="+k),c.push(w.default.createElement("span",{className:(0,C.default)({"ean-off-sale":S}),key:k,title:P},k,w.default.createElement("br",null)))}return"SCHEDULED"===e.status&&(l=e.promoType===j.BOGO||e.promoType===j.BOGO_FREE?(o=encodeURIComponent("B&N/NOOK readers can "+n+" from "+h.format("MM/DD/YYYY")+" to "+p.format("MM/DD/YYYY")+". Add two of the following books to your cart to save: "+d),encodeURIComponent("B&N/NOOK readers "+n+" from "+h.format("MM/DD/YYYY")+" to "+p.format("MM/DD/YYYY")+". Add two of the following books to your cart to save:"+f)):(o=encodeURIComponent("B&N/Nook readers can use coupon "+u+" to "+n+" at checkout from "+h.format("MM/DD/YYYY")+" to "+p.format("MM/DD/YYYY")+" on: "+d),encodeURIComponent("B&N/Nook readers can use coupon "+u+" to "+n+" at checkout from "+h.format("MM/DD/YYYY")+" to "+p.format("MM/DD/YYYY")+" on:"+f))),"ACTIVE"===e.status&&(e.promoType===j.BOGO||e.promoType===j.BOGO_FREE?(l=encodeURIComponent("B&N/NOOK readers can "+n+" till "+p.format("MM/DD/YYYY")+". Add two of the following books to your cart to save:"+f),o=encodeURIComponent("B&N/NOOK readers can "+n+" till "+p.format("MM/DD/YYYY")+". Add two of the following books to your cart to save: "+d)):(o=encodeURIComponent("B&N/Nook readers can use coupon "+u+" to "+n+" at checkout until "+p.format("MM/DD/YYYY")+" on: "+d),l=encodeURIComponent("B&N/Nook readers can use coupon "+u+" to "+n+" at checkout until "+p.format("MM/DD/YYYY")+" on:"+f))),r="https://www.facebook.com/dialog/share?app_id="+A+"&quote="+o+"&href="+encodeURIComponent(b[0]),i="https://twitter.com/intent/tweet?text="+l,w.default.createElement("tr",{key:e.id},w.default.createElement("td",{width:"20%",className:"table-column-full"},h.format("MMMM D, YYYY")),w.default.createElement("td",{width:"EXPIRED"===e.status?"20%":"19%",className:"table-column-full"},p.format("MMMM D, YYYY")),w.default.createElement("td",{className:"coupon-table-column-mobile"},w.default.createElement("div",{className:"coupon-table-date"},h.format("MM/DD/YYYY"),"Â â€”"),w.default.createElement("div",{className:"coupon-table-date"},p.format("MM/DD/YYYY"))),w.default.createElement("td",{width:"EXPIRED"===e.status?"10%":"8%"},w.default.createElement("span",{dangerouslySetInnerHTML:{__html:m}})),w.default.createElement("td",{width:"EXPIRED"===e.status?"17%":"15%"},u),w.default.createElement("td",{width:"EXPIRED"===e.status?"23%":"20%",className:"table-column-full"},c),"SCHEDULED"===e.status&&w.default.createElement("td",{width:"10%"},w.default.createElement("a",{href:r,id:"facebook_dialog",onClick:this.onShare,title:"facebook link"},w.default.createElement("i",{className:"fa fa-facebook-square fa-facebook-color merch-icon-size-fb"})),w.default.createElement("a",{href:i,className:"twitter-icon-padding",id:"twitter_dialog",onClick:this.onShare,title:"twitter link"},w.default.createElement("i",{className:"fa fa-twitter fa-facebook-color merch-icon-size-twitter"}))),w.default.createElement("td",{width:"EXPIRED"===e.status?"10%":"7%",className:"table-column-full menu-container"},"SCHEDULED"===e.status&&t&&w.default.createElement(N.default,{items:[w.default.createElement("a",{onClick:function(){return s.onEdit(e.id)}},"Edit"),w.default.createElement("a",{className:"link delete-link",onClick:function(){return s.onDelete(e.id)}},"Delete")]}),"SCHEDULED"!==e.status&&w.default.createElement("div",{className:"coupon-detail"},e.redeemed)),w.default.createElement("td",{className:"coupon-table-column-mobile"},w.default.createElement("div",{className:"coupon-table-ean-list"},c),"SCHEDULED"===e.status&&t&&w.default.createElement("div",{className:"coupon-mobile-menu"},w.default.createElement(N.default,{items:[w.default.createElement("a",{onClick:function(){return s.onEdit(e.id)}},"Edit"),w.default.createElement("a",{className:"link delete-link",onClick:function(){return s.onDelete(e.id)}},"Delete")]}))),"ACTIVE"===e.status&&w.default.createElement("td",{width:"10%",nowrap:!0},w.default.createElement("a",{href:r,id:"facebook_dialog",onClick:this.onShare},w.default.createElement("i",{className:"fa fa-facebook-square fa-facebook-color merch-icon-size-fb"})),w.default.createElement("a",{href:i,className:"twitter-icon-padding",id:"twitter_dialog",onClick:this.onShare},w.default.createElement("i",{className:"fa fa-twitter fa-facebook-color merch-icon-size-twitter"}))))}},{key:"renderLastEditDate",value:function(e){var t,a=(0,O.bn_moment)(e.lastDateToEdit,"MM/DD/YYYY");return t=(0,O.bn_moment)().isAfter(a,"day")?"The last date to make edits to this promotion was "+(0,O.bn_moment)(a).format("MM/DD/YYYY")+".":"The last date to make edits to this promotion is "+(0,O.bn_moment)(a).format("MM/DD/YYYY")+".",w.default.createElement("tr",{key:e.id+"LastEditDate"},w.default.createElement("td",{className:"coupon-table-row-bottom",colSpan:"8"},w.default.createElement("i",null,t)))}},{key:"renderRedeemed",value:function(e){return w.default.createElement("tr",{className:"coupon-table-redeemed-mobile",key:e.id+"redeemed"},w.default.createElement("td",{className:"coupon-table-row-bottom",colSpan:"8"},w.default.createElement(c.default,{status:e.status,leftContent:"# Redeemed: "+e.redeemed,tableStatusStrip:!0})))}},{key:"onTabChange",value:function(e){var t=this;if("ACTIVE"===e?this.setState({isActiveSelected:!0,isScheduledSelected:!1,isExpiredSelected:!1}):"SCHEDULED"===e?this.setState({isActiveSelected:!1,isScheduledSelected:!0,isExpiredSelected:!1}):"EXPIRED"===e&&this.setState({isActiveSelected:!1,isScheduledSelected:!1,isExpiredSelected:!0}),e!==this.state.activeTab){var a=l.default.getUser();this.setState({activeTab:e,page:1,totalPages:1,loading:!0},function(){return s.getEbookCoupons(a.vendorNumber,"",t.state.activeTab,t.state.page,50)})}}},{key:"onPageChange",value:function(e){var t=this,a=l.default.getUser();this.setState({page:e,loading:!0},function(){return s.getEbookCoupons(a.vendorNumber,"",t.state.activeTab,t.state.page,50)})}},{key:"render",value:function(){var t=this,e=this.state,a=e.activeCoupons,n=e.expiredCoupons,o=e.hasNoCoupons,r=e.scheduledCoupons,l=e.totalPages,i=e.page,s=(e.isActiveSelected,e.isScheduledSelected,e.isExpiredSelected,w.default.createElement("tr",null,w.default.createElement("td",{className:"table-column-full",style:{width:"20%"}},"Start (12:00 AM ET)"),w.default.createElement("td",{className:"table-column-full",style:{width:"19%"}},"End (2:59 AM ET)"),w.default.createElement("td",{className:"coupon-table-column-mobile"},w.default.createElement("div",null,"Start"),w.default.createElement("div",null,"(12:00Â AMÂ ET)Â â€”"),w.default.createElement("div",null,"End"),w.default.createElement("div",null,"(2:59Â AMÂ ET)")),w.default.createElement("td",{style:{width:"8%"}},"Promotion"),w.default.createElement("td",{style:{width:"15%"}},"Coupon Code"),w.default.createElement("td",{className:"table-column-full",style:{width:"20%"}},"EAN(s)"),w.default.createElement("td",{className:"table-column-full",style:{width:"10%"}},"Share"),w.default.createElement("td",{className:"coupon-table-column-mobile",style:{width:"10%"}},"Share"),w.default.createElement("td",{className:"coupon-table-column-mobile",style:{width:"20%"}},"EAN(s)"),w.default.createElement("td",{className:"table-column-full",style:{width:"7%"}},"Â "))),u=w.default.createElement("tr",null,w.default.createElement("td",{className:"table-column-full",style:{width:"15%"}},"Start (12:00 AM ET)"),w.default.createElement("td",{className:"table-column-full",style:{width:"15%"}},"End (2:59 AM ET)"),w.default.createElement("td",{className:"coupon-table-column-mobile"},w.default.createElement("div",null,"Start"),w.default.createElement("div",null,"(12:00Â AMÂ ET)Â â€”"),w.default.createElement("div",null,"End"),w.default.createElement("div",null,"(2:59Â AMÂ ET)")),w.default.createElement("td",{style:{width:"10%"}},"Promotion"),w.default.createElement("td",{style:{width:"17%"}},"Coupon Code"),w.default.createElement("td",{style:{width:"23%"}},"EAN(s)"),w.default.createElement("td",{className:"table-column-full"},"#Â Redeemed"),w.default.createElement("td",null,"Share")),c=w.default.createElement("tr",null,w.default.createElement("td",{className:"table-column-full",style:{width:"20%"}},"Start (12:00 AM ET)"),w.default.createElement("td",{className:"table-column-full",style:{width:"20%"}},"End (2:59 AM ET)"),w.default.createElement("td",{className:"coupon-table-column-mobile"},w.default.createElement("div",null,"Start"),w.default.createElement("div",null,"(12:00Â AMÂ ET)Â â€”"),w.default.createElement("div",null,"End"),w.default.createElement("div",null,"(2:59Â AMÂ ET)")),w.default.createElement("td",{style:{width:"10%"}},"Promotion"),w.default.createElement("td",{style:{width:"17%"}},"Coupon Code"),w.default.createElement("td",{style:{width:"23%"}},"EAN(s)"),w.default.createElement("td",{className:"table-column-full",style:{width:"10%"}},"#Â Redeemed"));return w.default.createElement("div",{className:"coupon-list bn-promo-list ebookcoupon-additional"},o&&w.default.createElement("div",{className:"row"},!this.state.loading&&w.default.createElement("div",{className:"no-coupons"},h.hasFeatureFlag(m.MERCHANDISING)&&w.default.createElement("div",{className:"center"},w.default.createElement(f.default,{currentView:_.COUPON_SUMMARY,onButtonClick:this.props.onViewChange,toSummary:!0,couponSelected:!0}),w.default.createElement(f.default,{currentView:_.BN_PROMO_SUMMARY,onButtonClick:this.props.onViewChange,toSummary:!0,couponSelected:!0})),w.default.createElement("ul",{className:(0,C.default)("list-inline","table-selector",{"bottom-padding":l<=1})},M.map(function(e){return w.default.createElement("li",{key:e.value,className:e.value===t.state.activeTab&&"active",tabIndex:"0",onKeyDown:t.makeClick,onClick:function(){return t.onTabChange(e.value)}},w.default.createElement("a",null,e.label))})),this.state.isActiveSelected&&w.default.createElement("span",{className:"summary-no-coupons"},"You don't have any active coupons"),this.state.isScheduledSelected&&w.default.createElement("span",{className:"summary-no-coupons"},"You don't have any scheduled coupons"),this.state.isExpiredSelected&&w.default.createElement("span",{className:"summary-no-coupons"},"You don't have any expired coupons")),this.state.loading&&w.default.createElement("div",{className:"row"},w.default.createElement("div",{className:"no-coupons"},"Â "))),h.hasFeatureFlag(m.MERCHANDISING)&&!this.state.loading&&!o&&w.default.createElement("div",{className:"center"},w.default.createElement(f.default,{currentView:_.COUPON_SUMMARY,onButtonClick:this.props.onViewChange,toSummary:!0,couponSelected:!0}),w.default.createElement(f.default,{currentView:_.BN_PROMO_SUMMARY,onButtonClick:this.props.onViewChange,toSummary:!0,couponSelected:!0})),(0<r.length||0<a.length||0<n.length)&&w.default.createElement("ul",{className:(0,C.default)("list-inline","table-selector",{"bottom-padding":l<=1})},M.map(function(e){return w.default.createElement("li",{key:e.value,className:e.value===t.state.activeTab&&"active",tabIndex:"0",onKeyDown:t.makeClick,onClick:function(){return t.onTabChange(e.value)}},w.default.createElement("a",null,e.label))})),w.default.createElement(y.default,{currentPage:i,totalPages:l,maxSpan:4,onChange:this.onPageChange}),0<r.length&&w.default.createElement("div",{className:"row"},w.default.createElement("div",{className:"col-xs-12"},w.default.createElement(p.default,{tableHeader:s,tableBody:this.renderCoupons(r),tableStyle:"scheduled-table"}))),0<a.length&&w.default.createElement("div",{className:"row"},w.default.createElement("div",{className:"col-xs-12"},w.default.createElement(p.default,{tableHeader:u,tableBody:this.renderCoupons(a,!0),tableStyle:"active-table"}))),0<n.length&&w.default.createElement("div",{className:"row"},w.default.createElement("div",{className:"col-xs-12"},w.default.createElement(p.default,{tableHeader:c,tableBody:this.renderCoupons(n,!0),tableStyle:"expired-table"}))),w.default.createElement("div",{className:"pagination-container-bottom"},w.default.createElement(y.default,{currentPage:i,totalPages:l,maxSpan:4,onChange:this.onPageChange})),this.state.loading&&w.default.createElement(d.default,null))}}])&&E(t.prototype,a),n&&E(t,n),o}();t.default=L;var A="1894289203961412"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=o(a(0)),r=o(a(1)),l=a(2),p=n(a(68)),m=n(a(109)),i=o(a(74)),h=o(a(4)),y=o(a(340)),b=n(a(11)),g=o(a(6)),s=n(a(10)),u=n(a(84)),c=n(a(60)),v=o(a(38)),E=n(a(57)),d=o(a(51)),S=o(a(46)),k=o(a(61)),P=o(a(134)),w=o(a(3)),O=o(a(135)),C=n(a(75));a(7);function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,o=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function T(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var L=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=D(o).call(this,e))||"object"!==N(n)&&"function"!=typeof n?M(a):n).state={bookType:E.BOOK_TYPES.ALL,filterOption:u.FILTER_PARAMS.default,statusOption:u.STATUS_PARAMS.onSale,booksData:[],bookList:"",isSearchedData:"",searchedBook:"",bookTypeEnabled:!0,isFreeFilterEnabled:!0,loading:!1,loadingFilter:!1,loadingToggle:!1,eaaSearchStatus:!0,Mapdata:[],includefreebookvalue:!!t.props.location.state&&t.props.location.state.freeToggleValue,isHiddenList:!0,initialvisiblity:!1,renderData:"",hasNoData:"",loadingPage:!1,data:"WHAT IS CUSTOMER DATA? ",definition:"This section gives you insight into the customers buying your books â€“ which of your books they bought first, other categories in which they read, their geographic location, and other books they've bought."},t.getHeaderStyles=t.getHeaderStyles.bind(M(M(t))),t.onFilterAllBooks=t.onFilterAllBooks.bind(M(M(t))),t.onFilterPrintBooks=t.onFilterPrintBooks.bind(M(M(t))),t.onAllResultLoaded=t.onAllResultLoaded.bind(M(M(t))),t.onSuggestionSelected=t.onSuggestionSelected.bind(M(M(t))),t.onClickReadingData=t.onClickReadingData.bind(M(M(t))),t.onClickSiteData=t.onClickSiteData.bind(M(M(t))),t.onClickCustomerData=t.onClickCustomerData.bind(M(M(t))),t.onFreeFilterToggleEntireList=t.onFreeFilterToggleEntireList.bind(M(M(t))),t.onOut=t.onOut.bind(M(M(t))),t.showInformationModal=t.showInformationModal.bind(M(M(t))),t.eaaSubscriptionLoaded=t.eaaSubscriptionLoaded.bind(M(M(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,f.default.Component),t=o,(a=[{key:"eaaSubscriptionLoaded",value:function(){var e=O.default.eaaSubscription();this.setState({eaaSubscriptionData:e})}},{key:"onSuggestionSelected",value:function(e){if(!this.refs.projectSearchLineGraph.getValue())return!1;var t=document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;if(document.getElementsByClassName(n).length&&"no match"==document.getElementsByClassName(n)[0].firstElementChild.innerText.toLowerCase())return t.getElementsByTagName("input")[0].value="",document.getElementById(n).parentElement.parentElement.classList.add("error"),document.getElementById(n).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.classList.add("nomatch-active"),document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="Please search for your Title, ISBN or Series",setTimeout(function(){t.getElementsByTagName("input")[0].value=""},500),document.getElementsByClassName(n)[0].parentElement.parentElement.style.display="none",!0;if((null==e||""==e.newValue)&&""==a){var o={ean:"",projectType:this.state.bookType,includeFree:this.state.includefreebookvalue};p.getAllBookDetails(o),this.setState({loadingPage:!1,isSearchedData:!1,searchedBook:""})}else{var r,l=e&&e.currentTarget?e.currentTarget.parentNode.firstElementChild.lastElementChild.lastElementChild.lastElementChild.firstElementChild.firstElementChild:null,i=null!==l?l.innerText:"";if(void 0===e)return;if(r=void 0===e.newValue?i:e.newValue,e&&e.currentTarget){var s=document.getElementsByClassName("options-dropdown")[0].getElementsByTagName("UL")[0].getElementsByTagName("LI")[0],u=e.currentTarget.parentNode.firstElementChild.lastElementChild.firstElementChild.value;if(void 0!==s)s.click();else if(""!==u&&null==s)return}if(""!==r){var c=v.default.findProjectForEaa(r);null!=c&&this.showInformationModal(f.default.createElement(y.default,{newean:c.ean,title:c.title,lineGraphAnalytics:!0}))}else{var d={ean:"",projectType:this.state.bookType,includeFree:this.state.includefreebookvalue};p.getAllBookDetails(d),this.setState({loading:!0,searchedBook:""})}}}},{key:"onFreeFilterToggleEntireList",value:function(){this.setState(function(e){return{includefreebookvalue:!e.includefreebookvalue}});var e=document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0],t=e.getElementsByTagName("input")[0].value,a=e.getElementsByTagName("input")[0].id;document.getElementById(a).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(a).parentElement.parentElement.classList.remove("error");var n={ean:t?this.state.searchedBook:"",projectType:this.state.bookType,includeFree:!this.state.includefreebookvalue};p.getAllBookDetails(n),this.setState({loadingToggle:!0})}},{key:"onFilterAllBooks",value:function(e){var t=document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.searchedBook:"",projectType:"ALL",includeFree:this.state.includefreebookvalue};p.getAllBookDetails(o),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,isHiddenList:!0,loadingFilter:!0})}},{key:"onFilterEBooks",value:function(e){var t=document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.searchedBook:"",projectType:"EBOOK",includeFree:this.state.includefreebookvalue};p.getAllBookDetails(o),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,isHiddenList:!0,loadingFilter:!0})}},{key:"onFilterPrintBooks",value:function(e){var t=document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].value,n=t.getElementsByTagName("input")[0].id;document.getElementById(n).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(n).parentElement.parentElement.classList.remove("error");var o={ean:a?this.state.searchedBook:"",projectType:"SPB",includeFree:this.state.includefreebookvalue};p.getAllBookDetails(o),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,isHiddenList:!1,loadingFilter:!0})}},{key:"getHeaderStyles",value:function(e,t,a,n){return n=d.default.hasUserPublishedBefore()&&n,(0,r.default)(e,{"active-selection":t===a})}},{key:"onClickCustomerData",value:function(e){l.browserHistory.push(e)}},{key:"onClickReadingData",value:function(e){l.browserHistory.push(e)}},{key:"onClickSiteData",value:function(e){l.browserHistory.push(e)}},{key:"onSeeEntireList",value:function(e){l.browserHistory.push({pathname:e,state:{freeToggleValue:this.state.includefreebookvalue}}),window.scrollTo(0,0)}},{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"componentWillMount",value:function(){O.default.addEaaSubscriptionListener(this.eaaSubscriptionLoaded),i.default.addResultLoadedListener(this.onAllResultLoaded)}},{key:"componentWillUnmount",value:function(){O.default.removeEaaSubscriptionListener(this.eaaSubscriptionLoaded),i.default.removeResultLoadedListener(this.onAllResultLoaded)}},{key:"componentDidMount",value:function(){C.getEaaSubscription(),c.loadEaaSearches(this.state.filterOption);var e={ean:"",projectType:"ALL",includeFree:this.state.includefreebookvalue};p.getAllBookDetails(e)}},{key:"onGettingAllData",value:function(e){e.newValue}},{key:"onAllResultLoaded",value:function(){C.getEaaSubscription();var e=i.default.allData();this.isEmpty(e.result)||this.isEmpty(e.result.years[0].titlesInYear)&&this.isEmpty(e.result.years[1].titlesInYear)&&this.isEmpty(e.result.years[2].titlesInYear)?this.setState({renderData:!1,hasNoData:!0}):this.setState({bookNewList:e,renderData:!0,hasNoData:!1}),this.state.isSearchedData&&this.setState({hasNoData:!1}),this.setState({loading:!1,loadingFilter:!1,loadingToggle:!1,loadingPage:!0})}},{key:"onOut",value:function(){this.setState({hover:""})}},{key:"onOver",value:function(l){var e=this.state.bookNewList.result.years;this.setState({hover:l.title});var t=e.map(function(e){var t,a,n,o,r=e.year;if(0<(t=e.titlesInYear.filter(function(e){var t=e.title;e.ean,e.countInYear;return t===l.title})).length)return a={},n=r,o=t[0].countInYear,n in a?Object.defineProperty(a,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[n]=o,a}),i="",s=0,a=(t.map(function(e){if(null!=e)for(var t=Object.entries(e),a=0;a<t.length;a++){var n=_(t[a],2),o=n[0],r=n[1];i=i+"</br>"+o+" : "+r.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),s=parseInt(s)+parseInt(r)}}),"<b>"+l.title+"</b><br/>Total : "+s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+i);this.setState({text:a})}},{key:"showInformationModal",value:function(e){document.getElementById("app").classList.add("analyticLineGraph"),document.getElementById("app").classList.add("analyticLineGraphHeight"),s.showInformationModal(e)}},{key:"parseMillisecondsIntoReadableTime",value:function(e){var t=e/36e5,a=Math.floor(t),n=9<a?a:"0"+a,o=60*(t-a),r=Math.floor(o),l=9<r?r:"0"+r,i=60*(o-r);Math.floor(i);return n+"hours,  "+l+"minutes"}},{key:"render",value:function(){var e,t,l=this;this.state.eaaSubscriptionData&&(e=this.state.eaaSubscriptionData.result,t=new Date(e.resetDate).getTime()-(new Date).getTime());var a,n=E.BOOK_TYPES,o="",r=this.state.searchedBook?this.state.searchedBook:"None Provided",i="";i=(this.state.bookType===n.ALL||this.state.bookType===n.EBOOK)&&this.state.includefreebookvalue?"Yes":"No";var s,u="";this.state.bookType===n.ALL?u="All Books":this.state.bookType===n.EBOOK?u="eBook":this.state.bookType===n.PRINT&&(u="Print Book"),this.state.loadingPage||this.state.bookType!==n.ALL&&!this.state.includefreebookvalue||this.state.searchedBook||this.state.loading||this.state.loadingToggle||this.state.loadingFilter||(o=a=f.default.createElement("div",{className:"text-center no-results searchEdgeCaseTable"},f.default.createElement("p",{className:"searchTermStyle"},"We found no data matching your search criteria."),f.default.createElement("p",null,"Search Term:",f.default.createElement("strong",null,r)),f.default.createElement("p",null,"Book Type:",f.default.createElement("strong",null,u)),this.state.bookType!=n.PRINT&&f.default.createElement("p",null," Include Free:",f.default.createElement("strong",null,i)))),(this.state.searchedBook||this.state.bookType==E.BOOK_TYPES.EBOOK||this.state.bookType==E.BOOK_TYPES.PRINT)&&(this.state.loading||this.state.loadingToggle||this.state.loadingFilter||(a=f.default.createElement("div",{className:"text-center no-results searchEdgeCaseTable"},f.default.createElement("p",{className:"searchTermStyle"},"We found no data matching your search criteria."),f.default.createElement("p",null,"Search Term:",f.default.createElement("strong",null,r)),f.default.createElement("p",null,"Book Type:",f.default.createElement("strong",null,u)),this.state.bookType!=n.PRINT&&f.default.createElement("p",null," Include Free:",f.default.createElement("strong",null,i)))),o=a);var c,d=(this.state.bookType===n.ALL||this.state.bookType==n.EBOOK)&&"unitsSold"===this.props.dataIdentifier;this.state.bookNewList&&(s=this.state.bookNewList.result.years),c=!!h.default.hasEaaPermission()&&h.default.hasEaaPermission().includes(b.CUSTOMER);return f.default.createElement("div",null,c&&f.default.createElement("div",{className:"left-sidebar-wrapper analytics-layout"},f.default.createElement("div",{className:"left-sidebar-container projects"},f.default.createElement("header",{className:"sidelines"},f.default.createElement("h1",null,"My Analytics Dashboard")),f.default.createElement("div",{className:"sidebar-left"},f.default.createElement("div",{className:"customer-display"},h.default.hasEaaPermission().includes(b.CUSTOMER)&&f.default.createElement("div",{className:"btn btn-new-project-analytics btn-block",onClick:function(){return l.onClickCustomerData("/"+m.Base)}},f.default.createElement("span",null,"Customer Data")),h.default.hasEaaPermission().includes(b.READING)&&f.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return l.onClickReadingData("/"+m.Base+"/"+m.ReadingData)}},f.default.createElement("span",null,"Reading Data")),h.default.hasEaaPermission().includes(b.SITE)&&f.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return l.onClickSiteData("/"+m.Base+"/"+m.SiteData)}},f.default.createElement("span",null,"Site Data"))),f.default.createElement("div",{className:" m-0 p-0  mobile-display"},h.default.hasEaaPermission().includes(b.CUSTOMER)&&f.default.createElement("div",{className:"col-33"},f.default.createElement("div",{className:"btn btn-new-project-analytics btn-block",onClick:function(){return l.onClickCustomerData("/"+m.Base)}},f.default.createElement("span",null,"Customer Data"))),h.default.hasEaaPermission().includes(b.READING)&&f.default.createElement("div",{className:"col-33"},f.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return l.onClickReadingData("/"+m.Base+"/"+m.ReadingData)}},f.default.createElement("span",null,"Reading Data"))),h.default.hasEaaPermission().includes(b.SITE)&&f.default.createElement("div",{className:"col-33"},f.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return l.onClickSiteData("/"+m.Base+"/"+m.SiteData)}},f.default.createElement("span",null,"Site Data")))),f.default.createElement("div",{className:"analytics-mar30 analytics-mar30-mobile"},f.default.createElement("p",{className:"analytics-data-text"},this.state.data),f.default.createElement("p",{className:"analytics-data-define"},this.state.definition," "),f.default.createElement("p",{className:"analytics-data-define"},"Please Note: This information derives from the last 2 years of data."),f.default.createElement("div",{className:"searches-remaining"},f.default.createElement("span",{className:"searches-remaining-bold"},e&&parseInt(e.dailyLimit)-parseInt(e.usageCount))," SEARCHES REMAINING",f.default.createElement("p",{className:"search-remaining-text"},"Search limit is based on incurred costs on B&N Press when processing data feeds."),f.default.createElement("p",{className:"search-reset"},"Searches Reset: ",e&&e.resetDate&&t?this.parseMillisecondsIntoReadableTime(t):"")," "))),f.default.createElement("div",{className:"content-right container-analytics container"},f.default.createElement("div",{className:"position-relative"},f.default.createElement("div",{className:"analytics-margin height-table-container"},f.default.createElement("div",{className:"col-sm-8"},f.default.createElement("div",{className:"analytics-margin-top"},f.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12"},f.default.createElement("a",{className:"go-back",onClick:function(){return l.onSeeEntireList("/"+m.Base)}},"< ",f.default.createElement("span",{className:"UnderlineGoBack"},"Go Back"),"  ")),f.default.createElement("h3",{className:"tooltip-description"},"Your New Customers by Books Purchased "),f.default.createElement(k.default,{info:!0,text:"This section shows how many new customers you gained in up to last three years grouped by different book titles. This table will list the customer only once if he purchased more than one title and will be listed for the title that he first purchased. Note: It always looks for data in last three years and a customer might have bought your book before this three year but will still be accounted as new customer for his first purchase in three year window.",trigger:"focus"},f.default.createElement("span",{className:"Whats-This"},"What's This?"))),f.default.createElement("div",{className:"widget no-margin-bottom"},f.default.createElement("div",{className:"widget-panel-content"},f.default.createElement("div",{className:"controls clearfix"},f.default.createElement("ul",{className:"book-type"},f.default.createElement("li",{className:this.getHeaderStyles("all-books",this.state.bookType,n.ALL,this.state.bookTypeEnabled),onClick:function(){return l.onFilterAllBooks(n.ALL)}},"All Books"),f.default.createElement("li",{className:this.getHeaderStyles("ebook",this.state.bookType,n.EBOOK,this.state.bookTypeEnabled),onClick:function(){return l.onFilterEBooks(n.EBOOK)}},"eBook"),f.default.createElement("li",{className:this.getHeaderStyles("print",this.state.bookType,n.PRINT,this.state.bookTypeEnabled),onClick:function(){return l.onFilterPrintBooks(n.PRINT)}},"Print")))))),f.default.createElement("div",{className:"col-sm-4 project-list-search project-sort-options search-box search-icon-eaa"},f.default.createElement(g.default,null,f.default.createElement(S.default,{label:"Search Book by Title, ISBN, Series",ref:"projectSearchLineGraph",filterOption:this.state.filterOption,defaultDropdownSelection:!0,onSubmit:this.onSuggestionSelected,eaaSearch:this.state.eaaSearchStatus,noValue:"true"})),f.default.createElement("div",{className:"ToggleCustomer",style:{display:this.state.isHiddenList?"block":"none"}},f.default.createElement(P.default,{action:this.onFreeFilterToggleEntireList,onClick:this.onFreeFilterToggleEntireList,initValue:this.state.includefreebookvalue,containerStyle:{marginRight:10,marginTop:10},visible:d,labelText:"Include Free Units",labelLeft:!0,labelStyle:{color:"#999999"}}))),f.default.createElement("div",{className:"col-sm-12 table-wrapper"},f.default.createElement("div",{className:"desktop-table"},this.state.renderData&&f.default.createElement("div",null,s&&s.map(function(e,t){var a=e.year,n=e.titlesInYear;return f.default.createElement("div",{className:"table-responsive table-container analytics-margin-top-table col-xs-12 col-sm-6 col-md-4"},f.default.createElement("table",{className:"table",key:a},f.default.createElement("tbody",null,f.default.createElement("tr",null,f.default.createElement("th",{className:" table-header".concat(t),colSpan:"4"},a)),0==n.length&&f.default.createElement("tr",null,f.default.createElement("td",{style:{color:"black",textAlign:"center"}},"No new customers in ",a)),n&&0!=n.length&&n.map(function(e,t){var a=e.title,n=e.ean,o=e.countInYear,r=e.rank;return f.default.createElement("tr",{key:n},f.default.createElement("td",{className:l.state.hover===a?"analytics-hover remove-padding":"analytics-padding remove-padding",onMouseOver:function(){return l.onOver(e)},onMouseOut:function(){return l.onOut()},onClick:function(){return l.onOut()}},f.default.createElement(k.default,{className:"black-font ",width:"100%",isHtml:"true",trigger:"hover",info:!0,text:l.state.text},f.default.createElement("span",{className:"truncate-text"},r,".Â ",a),f.default.createElement("span",{className:"analytics-float-right font-bold"},o.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")))))}))))})),!this.state.renderData&&this.state.loadingPage&&f.default.createElement("div",null,s&&s.map(function(e,t){var a=e.year,n=e.titlesInYear;n&&0<n.length&&!l.state.showMore&&n.slice(0,10);return f.default.createElement("div",{className:"table-responsive table-container analytics-margin-top-table col-xs-12 col-sm-6 col-md-4"},f.default.createElement("table",{className:"table",key:a},f.default.createElement("tbody",null,f.default.createElement("tr",null,f.default.createElement("th",{className:" table-header".concat(t),colSpan:"4"},a)))))}),f.default.createElement("div",{className:(this.state.isSearchedData,"height-customer-table-desktop ")},f.default.createElement("span",null,o)))),f.default.createElement("div",{className:"mobile-table"},this.state.renderData&&f.default.createElement("div",{className:"overflow-mobile-table"},s&&s.map(function(e,t){var a=e.year,n=e.titlesInYear;return f.default.createElement("div",{className:"table-container analytics-margin-top-table col-xs-10 col-sm-8 col-md-8"},f.default.createElement("table",{className:"table",key:a},f.default.createElement("tbody",null,f.default.createElement("tr",null,f.default.createElement("th",{className:" table-header".concat(t),colSpan:"4"},a)),0==n.length&&f.default.createElement("tr",null,f.default.createElement("td",{style:{color:"black",textAlign:"center"}},"No new customers in ",a)),n&&0!=n.length&&n.map(function(e,t){var a=e.title,n=e.ean,o=e.countInYear,r=e.rank;return f.default.createElement("tr",{key:n},f.default.createElement("td",{className:l.state.hover===a?"analytics-hover remove-padding":"analytics-padding remove-padding",onMouseOver:function(){return l.onOver(e)},onMouseOut:function(){return l.onOut()}},f.default.createElement("span",{className:"truncate-text"},r,".Â ",a),f.default.createElement("span",{className:"analytics-float-right font-bold"},o.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"))))}))))})),!this.state.renderData&&this.state.loadingPage&&f.default.createElement("div",null,f.default.createElement("div",{className:"overflow-mobile-table"},s&&s.map(function(e,t){var a=e.year,n=e.titlesInYear;n&&0<n.length&&!l.state.showMore&&n.slice(0,10);return f.default.createElement("div",{className:"table-responsive table-container analytics-margin-top-table col-xs-12 col-sm-6 col-md-4"},f.default.createElement("table",{className:"table",key:a},f.default.createElement("tbody",null,f.default.createElement("tr",null,f.default.createElement("th",{className:" table-header".concat(t),colSpan:"4"},a)))))})),f.default.createElement("div",{className:"height-customer-table"},f.default.createElement("span",null,o))))))),f.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 sticky"},f.default.createElement("a",{className:"entireList",onClick:function(){return l.onSeeEntireList("/"+m.Base)}},"< ",f.default.createElement("span",{className:"UnderlineGoBack"},"Go Back"),"  ")),this.state.loading&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(w.default,null)),this.state.loadingFilter&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(w.default,null)),this.state.loadingToggle&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(w.default,null)))),!this.state.loadingPage&&f.default.createElement("div",{className:"spinner-area"},f.default.createElement(w.default,null))),!c&&f.default.createElement("div",{className:"no-permission"},"Oops you don't have permission to access this page"))}}])&&T(t.prototype,a),n&&T(t,n),o}();t.default=L},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contributorPageAccessComponent=void 0;var i=n(a(0)),s=n(a(4));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.contributorPageAccessComponent=function(o,r,l){return function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=c(this,d(a).call(this,e)),s.default.getUser(),t.state={shouldRender:!0},t}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,i.default.Component),u((t=a).prototype,[{key:"render",value:function(){return null==s.default.getUser().accessList&&null==s.default.getUser().authorShareKey?i.default.createElement(o,this.props):s.default.hasContributorPageAccessPermission(r)?i.default.createElement(o,this.props):i.default.createElement(l,this.props)}}]),n&&u(t,n),a}()}},function(e,t,a){"use strict";var n=G(a(1139)),o=G(a(1140)),r=G(a(1142)),l=G(a(1145)),i=G(a(1275)),s=G(a(1281)),u=G(a(1307)),c=G(a(1310)),d=G(a(1312)),f=G(a(1313)),p=G(a(1314)),m=G(a(1316)),h=G(a(1324)),y=G(a(1325)),b=G(a(1333)),g=G(a(1334)),v=G(a(1335)),E=G(a(1336)),S=G(a(1337)),k=G(a(1494)),P=G(a(1496)),w=G(a(1497)),O=G(a(1498)),C=G(a(1502)),N=G(a(1503)),_=G(a(1504)),T=G(a(1505)),D=G(a(1506)),j=G(a(635)),M=G(a(636)),L=G(a(637)),A=G(a(1509)),B=G(a(1518)),x=G(a(1519)),R=G(a(1520)),I=G(a(1524)),F=G(a(1526)),Y=G(a(1528)),U=G(a(1529)),V=G(a(1530)),W=G(a(1532)),H=G(a(1533));function G(e){return e&&e.__esModule?e:{default:e}}e.exports={BookSizeType:d.default,BookCoverTemplateGenerator:f.default,Summary:A.default,BookDetailComponents:{About:o.default,Author:r.default,BookDetails:n.default,Categories:l.default,Isbn:i.default,Pricing:s.default,EditorialReviews:u.default,Rights:c.default},CommonComponents:{Layout:p.default,Section:m.default},CoverComponents:{Cover:h.default,CoverFormatting:y.default,CoverImages:b.default,CoverFonts:g.default,CoverFileType:v.default,CoverReview:E.default,CoverSpine:S.default,CoverType:k.default,CoverUpload:P.default},InteriorComponents:{Interior:w.default,InteriorFormatting:O.default,InteriorImages:C.default,InteriorFonts:N.default,InteriorFileType:_.default,InteriorReview:T.default,InteriorUpload:D.default,InteriorSamplePreference:j.default,InteriorUploadSample:M.default,InteriorReviewSample:L.default},VendorComponents:{VendorPublisher:x.default,VendorTaxAndBankInformation:R.default,Vendor:B.default},WelcomeComponents:{ChooseBookType:F.default,ChooseExistingBook:Y.default,CreateBookTitle:U.default,SelectPreorderStatus:W.default,SelectSaleStatus:V.default,VendorRegistration:H.default,Welcome:I.default}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",null,this.props.children)}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=o(a(0)),d=a(7),f=o(a(1)),r=o(a(1141)),p=o(a(4)),l=n(a(32)),m=o(a(76)),h=o(a(6)),y=o(a(12)),i=n(a(10)),s=n(a(25)),b=o(a(29)),u=n(a(60)),g=o(a(38)),v=o(a(8)),E=n(a(14)),S=o(a(27)),k=n(a(9)),P=o(a(39)),w=o(a(23)),O=o(a(66)),C=o(a(134)),N=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var L=[{value:"yes",label:"Yes"},{value:"no",label:"No"}],A=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=D(o).call(this,e))||"object"!==_(n)&&"function"!=typeof n?M(a):n).init=new r.default(v.default.project()),t.state={groupTitleSwitchConfirmed:!1,hasExistingSeries:!1,isPreorder:t.init.preOrder,inSeries:t.init.inSeries,seriesNames:[],valid:!1,LongValid:!0,spinnerOn:!0,showerror:!1,LongShowerror:!1},t.formatPreOrderChangeQuestion=t.formatPreOrderChangeQuestion.bind(M(M(t))),t.onNewSeries=t.onNewSeries.bind(M(M(t))),t.onPreorderChange=t.onPreorderChange.bind(M(M(t))),t.onSeriesAnswerChange=t.onSeriesAnswerChange.bind(M(M(t))),t.onSeriesNamesLoaded=t.onSeriesNamesLoaded.bind(M(M(t))),t.onValidationChange=t.onValidationChange.bind(M(M(t))),t.onSubmit=t.onSubmit.bind(M(M(t))),t.onTitleBlur=t.onTitleBlur.bind(M(M(t))),t.onTitleChange=t.onTitleChange.bind(M(M(t))),t.openAddNewModal=t.openAddNewModal.bind(M(M(t))),t.saveProject=t.saveProject.bind(M(M(t))),t.descriptionChange=t.descriptionChange.bind(M(M(t))),t.longDescriptionChange=t.longDescriptionChange.bind(M(M(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,c.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),u.loadSeriesNames()}},{key:"componentWillMount",value:function(){g.default.addSeriesNamesLoadedListener(this.onSeriesNamesLoaded)}},{key:"componentWillUnmount",value:function(){g.default.removeSeriesNamesLoadedListener(this.onSeriesNamesLoaded)}},{key:"formatPreOrderChangeQuestion",value:function(e){return e?v.default.project().isEBook?"Do you want to make this title a pre-order? You will be able to select a future publication date. Please ensure to upload your final files at least 72 hours before the publication date.":"Do you want to make this title a pre-order? You will be able to select a future publication date which should be a minimum of 10 business days from today. Please ensure to upload your final files at least 10 business days before the publication date.":"Do you want to cancel the pre-order option and publish the title now? This project will no longer be set up for pre-order."}},{key:"onPreorderChange",value:function(a){var n=this,e=this.formatPreOrderChangeQuestion(a);i.showConfirmationModal("Are you sure?",e,"Yes","No",function(e,t){e?(n.init=new r.default(v.default.project()),n.init.publishedDate=null,n.setState({isPreorder:a},n.refs.publishedDate.setValue(null,!0))):n.refs.isPreorder.setValue(!a)})}},{key:"onSeriesAnswerChange",value:function(e){this.setState({inSeries:"yes"===e.newValue})}},{key:"descriptionChange",value:function(e){var t=e.newValue,a=document.getElementsByName("shortDescription")[0],n=/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,o=/<script\b[^>]*>[\s\S]*?<\/script\b[^>]*>/g,r=/<([^<>\s]+)\s[^<>]*on[^<>="]+=[^<>]*>/g,l="";if(""!=t)if(this.setState({shortValid:!0,showerror:!1}),a.classList.remove("error-border"),document.getElementsByClassName("default-box")[0].classList.remove("error-border-support"),n.test(t)||o.test(t)||r.test(t))this.setState({shortValid:!1,showerror:!0}),a.classList.add("error-border"),document.getElementsByClassName("default-box")[0].classList.add("error-border-support");else if(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g.test(t)){var i=n.test(t)||r.test(t)||o.test(t);l=t.split("//");for(var s=1;s<l.length;s++){var u=l[s];if("www."==l[s].substring(0,4)&&(u=(u=l[s].slice(4)).toLowerCase()),(i||"bn.com"!=u.substring(0,6))&&"barnesandnoble.com"!=u.substring(0,18)){this.setState({shortValid:!1,showerror:!0}),a.classList.add("error-border"),document.getElementsByClassName("default-box")[0].classList.add("error-border-support");break}this.setState({shortValid:!0,showerror:!1}),a.classList.remove("error-border"),document.getElementsByClassName("default-box")[0].classList.remove("error-border-support")}}else a.classList.remove("error-border"),document.getElementsByClassName("default-box")[0].classList.remove("error-border-support"),this.setState({shortValid:!0,showerror:!1});else a.classList.remove("error-border"),document.getElementsByClassName("default-box")[0].classList.remove("error-border-support"),this.setState({shortValid:!0,showerror:!1})}},{key:"longDescriptionChange",value:function(e){var t=e.newValue,a=document.getElementsByName("description")[1],n=/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,o=/<script\b[^>]*>[\s\S]*?<\/script\b[^>]*>/g,r=/<([^<>\s]+)\s[^<>]*on[^<>="]+=[^<>]*>/g,l="";if(""!=t)if(a.classList.remove("error-border"),document.getElementsByClassName("long-box")[0].classList.remove("error-border-support"),n.test(t)||r.test(t)||o.test(t))this.setState({LongValid:!1,LongShowerror:!0}),a.classList.add("error-border"),document.getElementsByClassName("long-box")[0].classList.add("error-border-support");else if(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g.test(t)){var i=n.test(t)||r.test(t)||o.test(t);l=t.split("//");for(var s=1;s<l.length;s++){var u=l[s];if("www."==l[s].substring(0,4)&&(u=(u=l[s].slice(4)).toLowerCase()),(i||"bn.com"!=u.substring(0,6))&&"barnesandnoble.com"!=u.substring(0,18)){this.setState({LongValid:!1,LongShowerror:!0}),a.classList.add("error-border"),document.getElementsByClassName("long-box")[0].classList.add("error-border-support");break}this.setState({LongValid:!0,LongShowerror:!1}),a.classList.remove("error-border"),document.getElementsByClassName("long-box")[0].classList.remove("error-border-support")}}else a.classList.remove("error-border"),document.getElementsByClassName("long-box")[0].classList.remove("error-border-support"),this.setState({LongValid:!0,LongShowerror:!1});else a.classList.remove("error-border"),document.getElementsByClassName("long-box")[0].classList.remove("error-border-support"),this.setState({LongValid:!0,LongShowerror:!1})}},{key:"onSeriesNamesLoaded",value:function(){var e=this,t=c.default.createElement("div",{key:"addNewRow",className:"add-new-row",onClick:this.openAddNewModal},c.default.createElement("span",{className:"glyphicon glyphicon-plus"})," Add New Series Name"),a=g.default.seriesNames,n=this.state.hasExistingSeries,o=[{value:t,label:t}];if(0<a.length){for(var r=0;r<a.length;r++)0===r?o.push({value:a[r],label:a[r],separatorAbove:!0}):o.push({value:a[r],label:a[r]});n=!0}this.setState({hasExistingSeries:n,seriesNames:o},function(){setTimeout(function(){e.setState({spinnerOn:!1})},1e3)})}},{key:"onNewSeries",value:function(e){this.refs.seriesName&&this.refs.seriesName.onDropdownSelection(e)}},{key:"onSubmit",value:function(e){if(this.refs.form.hasChanged()){var t=v.default.project(),a=this.refs.form.gather(),n=new r.default;n.title=a.title,n.subtitle=a.subtitle,n.preOrder=this.state.isPreorder,n.publisherName=a.publisherName,n.publishedDate=(0,d.bn_moment)((0,d.bn_moment)(a.publishedDate).format("MM/DD/YYYY")),n.editionNumber=a.editionNumber,n.editionDescription=a.editionDescription,n.inSeries="yes"===a.inSeries,n.seriesName=a.seriesName,n.seriesNumber=a.seriesNumber,n.description=a.description,n.shortDescription=a.shortDescription,this.saveProject(n.toProject(t))}else l.go("next")}},{key:"onTitleBlur",value:function(){var a=this,e=v.default.project(),n=e.title,t=this.refs.title.value().trim();null!==n&&!this.state.groupTitleSwitchConfirmed&&0<t.length&&t!==n.trim()&&1<e.versions?i.showConfirmationModal("Change Book Title?","If you want to continue managing multiple versions of "+n+" as the same book, then the title must match. Would you like to continue?","OK","Cancel",function(e,t){e?a.setState({groupTitleSwitchConfirmed:!0}):(a.refs.title.setValue(n),a.refs.title.focus())}):0<t.length&&this.setState({groupTitleSwitchConfirmed:!0})}},{key:"onTitleChange",value:function(e){var t=v.default.project(),a=!1;(null===t.title||null!==t.title&&0<t.title.trim().length&&t.title.trim()===e.newValue.trim())&&(a=!0),this.setState({groupTitleSwitchConfirmed:a})}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid(),LongValid:this.refs.form.valid(),shortValid:this.refs.form.valid()})}},{key:"openAddNewModal",value:function(){var e=this;setTimeout(function(){return i.showAddNewModal("series",e.onNewSeries)},10)}},{key:"saveProject",value:function(e){E.updateProject(e,!0,!0);var t={eventInfo:{eventName:"Book Details Complete",eventAction:"bookDetailsComplete",timeStamp:new Date},category:{primaryCategory:"Book Details"}};s.omnitureActionInvoked(t,"onBookDetailsComplete")}},{key:"render",value:function(){var e=this,t=null,a=p.default.getUser(),n=v.default.project(),o=Number(p.default.getPreSellDays()),r=Number(a.spbPreSellDays),l=n.allowedToSwitchPreOrder,i=n.everOnSale&&!l,s=(0,d.bn_moment)((0,d.bn_moment)().format("YYYY-MM-DD")),u=null;return this.state.isPreorder?n.isEBook?(t="Select a future date for pre-order.",u=(0,d.bn_moment)().add(1,"day"),s=(0,d.bn_moment)().add(o,"days")):n.isSPB&&(t="Select a pre-order date (minimum 10 business days from today).",u=(0,d.bn_moment)().add(15,"days"),s=(0,d.bn_moment)().add(180,"days"),i=null!==this.init.publishedDate&&(0,d.bn_moment)(this.init.publishedDate).isBefore((0,d.bn_moment)(),"day")):n.isSPB&&0===r&&(t='Please <a href="mailto: bnpresspreorder@bn.com">email us</a> if you\'re interested in print book pre-order.'),c.default.createElement("div",{className:"about"},this.state.spinnerOn&&c.default.createElement("div",{className:"spinner-container-absolute"},c.default.createElement(N.default,{backgroundColor:"rgba(255, 255, 255, 0)"})),c.default.createElement("header",null,c.default.createElement("h1",null,"Enter Details About Your Book"),c.default.createElement("p",null,"Youâ€™re almost there! You just need to enter some details about your book.")),c.default.createElement("section",null,c.default.createElement("div",{className:"panel"},c.default.createElement("div",{className:"panel-body"},c.default.createElement(h.default,{ref:"form",className:"section-form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-6"},c.default.createElement(y.default,{ref:"title",name:"title",label:"Title",maxLength:120,onChange:this.onTitleChange,onBlur:this.onTitleBlur,initValue:this.init.title,rules:[k.required("Please enter the title.")]})),c.default.createElement("div",{className:"col-xs-6"},c.default.createElement(y.default,{name:"subtitle",label:"Subtitle",maxLength:120,initValue:this.init.subtitle}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-6"},c.default.createElement(y.default,{name:"publisherName",label:"Publisher Name",maxLength:50,initValue:this.init.publisherName,initDisabled:"FREE"===v.default.project().isbnType,rules:[k.required("Please enter the publisher name.")]})),c.default.createElement("div",{className:"col-xs-6"},c.default.createElement(m.default,{name:"publishedDate",label:"Publication Date",className:l?"has-toggle":"",ref:"publishedDate",readOnly:i,maxDate:s,minDate:u,note:t,initValue:this.init.publishedDate||null,rules:[k.required("Please enter the publication date.")]},l&&c.default.createElement(C.default,{ref:"isPreorder",action:this.onPreorderChange,initValue:this.state.isPreorder,name:"preorder",labelText:"PRE-ORDER",labelRight:!0})))),c.default.createElement("div",{className:"row extra-spacing-top"},c.default.createElement("div",{className:"col-xs-6"},c.default.createElement(y.default,{name:"editionNumber",label:"Edition Number",maxLength:4,initValue:this.init.editionNumber,pattern:/^\d*$/,rules:[k.numOnly()]})),c.default.createElement("div",{className:"col-xs-6"},c.default.createElement(y.default,{name:"editionDescription",label:"Edition Description",maxLength:40,initValue:this.init.editionDescription,showRemainingCharCount:!0,rules:[k.maxLength(40)]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12"},c.default.createElement(S.default,{name:"inSeries",label:"Is this book part of a series?",options:L,onChange:this.onSeriesAnswerChange,initValue:this.init.inSeries?"yes":"no",rules:[k.required("Answer required")]}))),this.state.inSeries&&c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-6"},c.default.createElement("div",null,!this.state.hasExistingSeries&&c.default.createElement(y.default,{autoComplete:"off",name:"seriesName",label:"Series Name",maxLength:120,initValue:this.init.seriesName,rules:[k.required("Please enter the series name.")]}),this.state.hasExistingSeries&&c.default.createElement(w.default,{name:"seriesName",label:"Series Name",ref:"seriesName",options:this.state.seriesNames,initValue:this.init.seriesName,rules:[k.required("Please enter the series name.")]}))),c.default.createElement("div",{className:"col-xs-1 book-number"},c.default.createElement(y.default,{className:"series-number",name:"seriesNumber",label:"Book #",pattern:/^\d*$/,maxLength:5,unboundValue:this.init.seriesNumber,rules:[k.numOnly()]})),c.default.createElement("div",{className:"col-xs-4 series-number-text"},c.default.createElement("span",null,"Numbers only"))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12 default-box"},c.default.createElement("div",{className:(0,f.default)("message message-default-off",{"message-on":this.state.showerror})},"Text field cannot contain emails, external links and Javascript"),c.default.createElement(O.default,{ref:"wysiwyg",name:"shortDescription",label:"Default Book Description",initValue:this.init.shortDescription,showRemainingCharCount:!0,wysiwyg:!1,allowHtml:!0,onChange:this.descriptionChange,rules:[k.required("Please enter the default book description."),k.maxLength(2e3)]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12 long-box"},c.default.createElement("div",{className:(0,f.default)("message message-default-off",{"message-on":this.state.LongShowerror})},"Text field cannot contain emails, external links and Javascript"),c.default.createElement(O.default,{className:"description",name:"description",label:"Long Book Description (optional)",labelNote:"If provided, weâ€™ll use this longer book description wherever possible.",initValue:this.init.description,allowHtml:!0,showRemainingCharCount:!0,onChange:this.longDescriptionChange,rules:[k.maxLength(5e3)]}))))))),c.default.createElement(b.default,{disableNext:!this.state.valid||!this.state.LongValid||!this.state.shortValid,next:function(){return e.refs.form.submit()}}),c.default.createElement(P.default,{form:this.refs.form}))}}])&&T(t.prototype,a),n&&T(t,n),o}();t.default=A},function(e,t,a){"use strict";function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=null,this.subtitle=null,this.preOrder=!1,this.publisherName=null,this.publishedDate=null,this.editionNumber=null,this.editionDescription=null,this.inSeries=!1,this.seriesName=null,this.seriesNumber=null,this.shortDescription=null,this.description=null,e&&(this.title=e.title,this.subtitle=e.subtitle,this.preOrder=e.preOrder,this.publisherName=e.publisherName,this.publishedDate=e.publishedDate,this.editionNumber=e.editionNumber,this.editionDescription=e.editionDescription,this.inSeries=e.inSeries,this.seriesName=e.seriesName,this.seriesNumber=e.seriesNumber,this.shortDescription=e.shortDescription,this.description=e.description)}var e,a,n;return e=t,(a=[{key:"toProject",value:function(e){var t=e.clone();return t.title=this.title,t.subtitle=this.subtitle,t.preOrder=this.preOrder,t.publisherName=this.publisherName,t.publishedDate=this.publishedDate,t.editionNumber=this.editionNumber,t.editionDescription=this.editionDescription,t.inSeries=this.inSeries,t.seriesName=this.seriesName,t.seriesNumber=this.seriesNumber,t.shortDescription=this.shortDescription,t.description=this.description,t}}])&&o(e.prototype,a),n&&o(e,n),t}();t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(0)),o=r(a(90)),l=r(a(1)),i=r(a(348)),u=r(a(1143)),c=r(a(1144)),d=n(a(32)),f=r(a(6)),p=r(a(12)),m=n(a(10)),h=n(a(25)),y=r(a(29)),b=n(a(14)),g=n(a(15)),v=n(a(60)),E=r(a(38)),S=r(a(8)),k=n(a(9)),P=r(a(39)),w=r(a(23)),O=r(a(3)),C=r(a(66));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function T(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var L=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,n=D(r).call(this,e),(t=!n||"object"!==N(n)&&"function"!=typeof n?M(a):n).init=new u.default(S.default.project()),t.nextContributorKey=1;var o=t.init.contributors.map(function(e){return{key:t.nextContributorKey++,firstName:e.firstName,lastName:e.lastName,role:e.role,hasAuthorPage:!!e.authorPage}});return 0===o.length&&(o=[{key:t.nextContributorKey++}]),t.state={accountContributors:[],accountContributorsToMatch:[],contributors:o,contributorsLoaded:!1,groupSwitchConfirmed:!1,hasAuthorPage:!0,hasPriorContributors:!1,loaded:!1,valid:!1,shortValid:!0,classOneCross:1<o.length?"":"hidden ",showerror:!1,spinnerOn:!0,initialValues:{aboutTheAuthors:"",contributorsName1:"",contributorsRole1:""}},t.findContributorInitValue=t.findContributorInitValue.bind(M(M(t))),t.findContributorValue=t.findContributorValue.bind(M(M(t))),t.onAddAContributor=t.onAddAContributor.bind(M(M(t))),t.onAuthorLastNameBlur=t.onAuthorLastNameBlur.bind(M(M(t))),t.onAuthorLastNameChange=t.onAuthorLastNameChange.bind(M(M(t))),t.onAuthorUpdate=t.onAuthorUpdate.bind(M(M(t))),t.onContributorsLoaded=t.onContributorsLoaded.bind(M(M(t))),t.onNewContributor=t.onNewContributor.bind(M(M(t))),t.onRemoveAContributor=t.onRemoveAContributor.bind(M(M(t))),t.onSubmit=t.onSubmit.bind(M(M(t))),t.onValidationChange=t.onValidationChange.bind(M(M(t))),t.openAddNewModal=t.openAddNewModal.bind(M(M(t))),t.saveProject=t.saveProject.bind(M(M(t))),t.hasFormChanged=t.hasFormChanged.bind(M(M(t))),t.authorChange=t.authorChange.bind(M(M(t))),t.makeClick=t.makeClick.bind(M(M(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(r,s.default.Component),t=r,(a=[{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),v.loadAllContributors()}},{key:"componentWillMount",value:function(){E.default.addAllContributorsLoadedListener(this.onContributorsLoaded)}},{key:"componentWillUnmount",value:function(){E.default.removeAllContributorsLoadedListener(this.onContributorsLoaded)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"findContributorInitValue",value:function(e){var t=this.state,a=t.accountContributors,n=t.accountContributorsToMatch,o="";if((e.firstName||e.lastName)&&(o=""===e.firstName&&""===e.lastName?null:""!==e.firstName&&e.firstName?e.lastName+", "+e.firstName:e.lastName),0<a.length&&o){for(var r=!1,l=0;l<a.length;l++)a[l].label===o&&(r=!0);r||(a.push({value:o,label:o}),n.push({value:[e.firstName,e.lastName],label:o}))}return o}},{key:"findContributorValue",value:function(e){for(var t=this.state.accountContributorsToMatch,a=0;a<t.length;a++)if(e===t[a].label)return t[a].value}},{key:"authorChange",value:function(e){var t=e.newValue,a=document.getElementsByName("aboutTheAuthors")[0],n=/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,o=/<script\b[^>]*>[\s\S]*?<\/script\b[^>]*>/g,r=/<([^<>\s]+)\s[^<>]*on[^<>="]+=[^<>]*>/g,l="";if(""!=t)if(a.classList.remove("error-border"),document.getElementsByClassName("author-box")[0].classList.remove("error-border-support"),n.test(t)||o.test(t)||r.test(t))this.setState({shortValid:!1,showerror:!0}),a.classList.add("error-border"),document.getElementsByClassName("author-box")[0].classList.add("error-border-support");else if(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g.test(t)){var i=n.test(t)||o.test(t)||r.test(t);l=t.split("//");for(var s=1;s<l.length;s++){var u=l[s];if("www."==l[s].substring(0,4)&&(u=(u=l[s].slice(4)).toLowerCase()),(i||"bn.com"!=u.substring(0,6))&&"barnesandnoble.com"!=u.substring(0,18)){this.setState({shortValid:!1,showerror:!0}),a.classList.add("error-border"),document.getElementsByClassName("author-box")[0].classList.add("error-border-support");break}this.setState({shortValid:!0,showerror:!1}),a.classList.remove("error-border"),document.getElementsByClassName("author-box")[0].classList.remove("error-border-support")}}else a.classList.remove("error-border"),document.getElementsByClassName("author-box")[0].classList.remove("error-border-support"),this.setState({shortValid:!0,showerror:!1});else a.classList.remove("error-border"),document.getElementsByClassName("author-box")[0].classList.remove("error-border-support"),this.setState({shortValid:!0,showerror:!1})}},{key:"onAddAContributor",value:function(){var e=this.state.contributors,t=Math.max.apply(Math,_(e.map(function(e){return e.key})));this.nextContributorKey++,e.push({key:t+1,firstName:null,lastName:null,role:null,new:1}),this.setState({contributors:e})}},{key:"onAuthorLastNameChange",value:function(e){var t=new u.default(S.default.project()).authorLastName,a=!1;(null===t||null!==t&&0<t.trim().length&&t.trim()===e.newValue.trim())&&(a=!0),this.setState({groupSwitchConfirmed:a})}},{key:"onAuthorLastNameBlur",value:function(){var a=this,e=S.default.project(),n=new u.default(e).authorLastName,t=this.refs.authorLastName.value().trim();null!==n&&!this.state.groupSwitchConfirmed&&0<t.length&&t!==n.trim()&&1<e.versions?m.showConfirmationModal("Change Last Name?","If you want to continue managing multiple versions of "+e.title+" as the same book, then the last name must match. Would you like to continue?","OK","Cancel",function(e,t){e?a.setState({groupSwitchConfirmed:!0}):(a.refs.authorLastName.setValue(n),a.refs.authorLastName.focus())}):0<t.length&&this.setState({groupSwitchConfirmed:!0})}},{key:"onAuthorUpdate",value:function(e){if(1<this.state.contributors.length?this.setState({classOneCross:"show"}):this.setState({classOneCross:"hidden"}),S.default.project().status===g.PROJECT_STATUSES.ONSALE&&e.hasAuthorPage){m.showNotificationModal("Please note this book is linked to your Author Page on BN.com. If you update the author name,\n\t\t\t \tthis book will no longer be linked to your Author Page."," ","OK")}this.onValidationChange()}},{key:"hasFormChanged",value:function(){var e=this.refs.form.gather();return{unChanged:(0,o.default)(this.state.initialValues,e,{strict:!0})}}},{key:"onContributorsLoaded",value:function(){var t=this,e=s.default.createElement("div",{key:"addNewRow",className:"add-new-row",onClick:this.openAddNewModal},s.default.createElement("span",{className:"glyphicon glyphicon-plus"})," Add New Contributor's Name"),a=[{value:e,label:e}],n=[],o=E.default.allContributors,r=this.state.hasPriorContributors;if(0<o.length){for(var l=0;l<o.length;l++){var i=""!==o[l].firstName?o[l].lastName+", "+o[l].firstName:o[l].lastName;0===l?a.push({value:i,label:i,separatorAbove:!0}):a.push({value:i,label:i}),n.push({value:[o[l].firstName,o[l].lastName],label:i})}r=!0}setTimeout(function(){var e=t.refs.form.gather();0!==Object.keys(e).length&&t.setState({initialValues:e})},1e3),this.setState({accountContributors:a,accountContributorsToMatch:n,hasPriorContributors:r,loaded:!0},function(){setTimeout(function(){t.setState({spinnerOn:!1})},1e3)})}},{key:"onNewContributor",value:function(e){if(e){var t=e.value[0],a=e.value[1],n=""===t?a:a+", "+t;this.state.accountContributorsToMatch.push({value:[t,a],label:n});for(var o=1;o<=this.state.contributors.length;o++){var r=this.state.contributors[o-1]?this.state.contributors[o-1].key:o;this.refs["contributorsName"+r]&&"addNewRow"===this.refs["contributorsName"+r].value()&&this.refs["contributorsName"+r].onDropdownSelection({value:n,label:n})}}}},{key:"onRemoveAContributor",value:function(t){var e=this.state.contributors.filter(function(e){return e.key!==t.key});this.nextContributorKey=this.nextContributorKey-1,1==e.length?this.setState({contributors:e,classOneCross:"hidden"}):this.setState({contributors:e})}},{key:"onSubmit",value:function(){var a=this;if(this.refs.form.hasChanged()){var e=S.default.project(),n=this.refs.form.gather(),t=new u.default;t.authorFirstName=n.authorFirstName,t.authorLastName=n.authorLastName,t.authorInfo=n.aboutTheAuthors,t.contributors=this.state.contributors.map(function(e){if(a.state.hasPriorContributors){var t=a.findContributorValue(n["contributorsName"+e.key]);return{firstName:t[0],lastName:t[1],role:n["contributorsRole"+e.key]}}return{firstName:n["contributorsFirstName"+e.key],lastName:n["contributorsLastName"+e.key],role:n["contributorsRole"+e.key]}}),this.saveProject(t.toProject(e))}else d.go("next")}},{key:"onValidationChange",value:function(){var e=this.refs.form.valid();if(this.state.hasPriorContributors)for(var t=1;t<=this.state.contributors.length;t++){var a=this.state.contributors[t-1]?this.state.contributors[t-1].key:t;this.refs["contributorsName"+a]&&"addNewRow"===this.refs["contributorsName"+a].value()&&(e=!1)}this.setState({valid:e})}},{key:"openAddNewModal",value:function(){var e=this;setTimeout(function(){return m.showAddNewModal("contributor",e.onNewContributor)},10)}},{key:"saveProject",value:function(e){b.updateProject(e,!0,!0);var t={eventInfo:{eventName:"Book Details Complete",eventAction:"bookDetailsComplete",timeStamp:new Date},category:{primaryCategory:"Book Details"}};h.omnitureActionInvoked(t,"onBookDetailsComplete")}},{key:"render",value:function(){var e=this;return s.default.createElement("div",{className:"author"},this.state.spinnerOn&&s.default.createElement("div",{className:"spinner-container-absolute"},s.default.createElement(O.default,{backgroundColor:"rgba(255, 255, 255, 0)"})),s.default.createElement("header",null,s.default.createElement("h1",null,"Author & Contributors"),s.default.createElement("p",null,"You can add up to five contributors.")),s.default.createElement("section",null,s.default.createElement("div",{className:"panel"},s.default.createElement("div",{className:"panel-body"},s.default.createElement(f.default,{ref:"form",className:"section-form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},this.state.loaded&&s.default.createElement("div",null,this.renderContributors(),this.state.contributors.length<5&&s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-xs-12"},s.default.createElement(i.default,{label:"ADD A CONTRIBUTOR",onClick:this.onAddAContributor}))),s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-xs-12 author-box"},s.default.createElement("div",{className:(0,l.default)("message message-default-off",{"message-on":this.state.showerror})},"Text field cannot contain emails, external links and Javascript"),s.default.createElement(C.default,{name:"aboutTheAuthors",label:"About the Author(s)",initValue:this.init.authorInfo,allowHtml:!0,note:"This information will appear on your public product page on BN.com. For multiple contributors, please add a line space between each description.",showRemainingCharCount:!0,onChange:this.authorChange,rules:[k.maxLength(2500)]})))))))),s.default.createElement(y.default,{disableNext:!this.state.valid||!this.state.shortValid,next:function(){return e.refs.form.submit()}}),s.default.createElement(P.default,{data:function(){return e.hasFormChanged()}}))}},{key:"renderContributors",value:function(){var t=this,a=0;return this.state.contributors.map(function(e){return s.default.createElement("div",{className:"row",key:e.key},t.state.loaded&&s.default.createElement("div",null,!t.state.hasPriorContributors&&s.default.createElement("div",null,s.default.createElement("div",{className:"col-xs-4"},s.default.createElement(p.default,{name:"contributorsFirstName"+e.key,label:"Contributor's First Name",initValue:e.firstName,rules:[(r="contributorsLastName"+e.key,{key:"firstNameLength",dependsOn:{controlKeys:[r],onEveryChange:!0},test:function(e,t,a){if(!a[r])return null;var n=e.length+a[r].value().length;return n<=38?null:"Please enter a first name. First and last name combined can't exceed 38 characters."}})]})),s.default.createElement("div",{className:"col-xs-4"},s.default.createElement(p.default,{name:"contributorsLastName"+e.key,label:"Contributor's Last Name",initValue:e.lastName,rules:[(o="contributorsFirstName"+e.key,{key:"lastNameLength",dependsOn:{controlKeys:[o],onEveryChange:!0},test:function(e,t,a){if(!a[o])return null;var n=e.length+a[o].value().length;return n<=38?null:" "}}),k.required("Please enter a last name.")]}))),t.state.hasPriorContributors&&s.default.createElement("div",null,s.default.createElement("div",{className:"col-xs-4"},s.default.createElement(w.default,{name:"contributorsName"+e.key,ref:"contributorsName"+e.key,label:"Contributor's Name",initValue:t.findContributorInitValue(e),onChange:function(){return t.onAuthorUpdate(e)},options:t.state.accountContributors,rules:[k.required("Please select a name.")]}))),s.default.createElement("div",{className:"col-xs-4"},s.default.createElement(w.default,{name:"contributorsRole"+e.key,label:"Contributor's Role",initValue:e.role,options:c.default.getContributorRoleOptions(),rules:[k.required("Please enter a role.")]})),0==a&&s.default.createElement("div",{className:(0,l.default)(t.state.classOneCross+" icon-close-modal",{"close-prior-contributors":t.state.hasPriorContributors}),tabIndex:"0",onKeyDown:t.makeClick,onClick:function(){return t.onRemoveAContributor(e)}}),0<a++&&s.default.createElement("div",{className:(0,l.default)("icon-close-modal",{"close-prior-contributors":t.state.hasPriorContributors}),tabIndex:"0",onKeyDown:t.makeClick,onClick:function(){return t.onRemoveAContributor(e)}})));var o,r})}}])&&T(t.prototype,a),n&&T(t,n),r}();t.default=L},function(e,t,a){"use strict";function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.contributors=[],this.authorInfo=null,e&&(this.contributors=e.contributors.map(function(e){return{firstName:e.firstName,lastName:e.lastName,role:e.role,authorPage:e.authorPage}}),this.authorInfo=e.authorInfo)}var e,a,n;return e=t,(a=[{key:"toProject",value:function(e){var t=e.clone(),a=!0,n=!(t.contributors=[]),o=void 0;try{for(var r,l=this.contributors[Symbol.iterator]();!(a=(r=l.next()).done);a=!0){var i=r.value;t.contributors.push({firstName:i.firstName,lastName:i.lastName,role:i.role})}}catch(e){n=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}return t.authorInfo=this.authorInfo,t}}])&&o(e.prototype,a),n&&o(e,n),t}();t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=a(44),o=(n=a(16))&&n.__esModule?n:{default:n},l=a(15);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=[{value:l.CONTRIBUTOR_ENUMS.author,label:"Author"},{value:l.CONTRIBUTOR_ENUMS.editor,label:"Editor"},{value:l.CONTRIBUTOR_ENUMS.illustrator,label:"Illustrator"},{value:l.CONTRIBUTOR_ENUMS.translator,label:"Translator"},{value:l.CONTRIBUTOR_ENUMS.photographer,label:"Photographer"},{value:l.CONTRIBUTOR_ENUMS.introductionBy,label:"Introduction By"},{value:l.CONTRIBUTOR_ENUMS.compiledBy,label:"Compiled By"},{value:l.CONTRIBUTOR_ENUMS.other,label:"Other"}],p=new(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.EventEmitter),a=t,(n=[{key:"getContributorRoleOptions",value:function(){return f}},{key:"handleActions",value:function(e){}}])&&s(a.prototype,n),o&&s(a,o),t}());p.dispatchToken=o.default.register(p.handleActions.bind(p));var m=p;t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(a(0)),s=l(a(1)),o=l(a(90)),u=l(a(132)),r=l(a(348)),c=(l(a(4)),n(a(32))),d=l(a(6)),f=l(a(12)),p=l(a(27)),m=n(a(10)),h=n(a(25)),y=l(a(29)),b=n(a(14)),g=n(a(15)),v=l(a(8)),E=n(a(9)),S=l(a(39)),k=l(a(23)),P=l(a(3)),w=l(a(547));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var D=g.AUDIENCES,j=g.AGE_RANGES,M=1,L=function(e){function l(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a=this,t=!(n=N(l).call(this,e))||"object"!==O(n)&&"function"!=typeof n?T(a):n;var o=v.default.project(),r=t._determineSubjectType(o);return t.state={formValid:!1,audienceType:o.audience,subjectType:r,categories:(0,u.default)(o.categories),showCategorySelects:!1,categorySelects:[],loadingCategorySelect:!1,languageCode:o.languageCode,languages:null,spinnerOn:!0,initialValues:{ageRange:"",audienceType:"",languageCode:"",searchKeyWords:""}},t.hasFormChanged=t.hasFormChanged.bind(T(T(t))),t.loadRootCategorySelect=t.loadRootCategorySelect.bind(T(T(t))),t.onAudienceChange=t.onAudienceChange.bind(T(T(t))),t.onLanguageCodeChange=t.onLanguageCodeChange.bind(T(T(t))),t.onCategoriesLoaded=t.onCategoriesLoaded.bind(T(T(t))),t.onLanguageLoaded=t.onLanguageLoaded.bind(T(T(t))),t.onAddCategory=t.onAddCategory.bind(T(T(t))),t.onDeleteCategory=t.onDeleteCategory.bind(T(T(t))),t.onCategoryChange=t.onCategoryChange.bind(T(T(t))),t.onCategoryOrderChange=t.onCategoryOrderChange.bind(T(T(t))),t.onRemoveCategorySelects=t.onRemoveCategorySelects.bind(T(T(t))),t.onValidationChange=t.onValidationChange.bind(T(T(t))),t.onShowCategoriesModal=t.onShowCategoriesModal.bind(T(T(t))),t.onSubjectTypeChange=t.onSubjectTypeChange.bind(T(T(t))),t.onSubmit=t.onSubmit.bind(T(T(t))),t.makeClick=t.makeClick.bind(T(T(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(l,i.default.Component),t=l,(a=[{key:"componentDidMount",value:function(){var a=this;b.getAllLanguages(),this.refs.form.validateWithoutCommitting(),setTimeout(function(){var e=a.refs.form.gather(),t={ageRange:e.ageRange?e.ageRange:null,audienceType:e.audienceType,languageCode:e.languageCode?e.languageCode:a.state.languageCode,searchKeyWords:e.searchKeyWords,subjectType:e.subjectType};a.setState({initialValues:t})},1e3)}},{key:"componentWillMount",value:function(){v.default.addLanguageListener(this.onLanguageLoaded),v.default.addCategoriesLoadedListener(this.onCategoriesLoaded)}},{key:"componentWillUnmount",value:function(){v.default.removeLanguageListener(this.onLanguageLoaded),v.default.removeCategoriesLoadedListener(this.onCategoriesLoaded)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onAudienceChange",value:function(a){var n=this;if(0<this.state.categories.length&&a.newValue!==this.state.audienceType){var e=D.find(function(e){return e.value===a.oldValue}).label,t=D.find(function(e){return e.value===a.newValue}).label;m.showConfirmationModal("Are you sure?","Are you sure you want to update the audience from "+e+" to "+t+"? Your previously selected categories will be erased.","Yes","No",function(e,t){e?n.setState({categories:[],audienceType:a.newValue,categorySelects:[],showCategorySelects:!0},n.loadRootCategorySelect):n.refs.audienceType.setValue(a.oldValue)})}else a.newValue!==this.state.audienceType&&this.setState({audienceType:a.newValue,categorySelects:[],showCategorySelects:!0},this.loadRootCategorySelect)}},{key:"onLanguageCodeChange",value:function(e){var t=this;this.setState({languageCode:e.newValue},function(){0===t.state.categorySelects.length&&""===e.oldValue&&t.loadRootCategorySelect()})}},{key:"onCategoriesLoaded",value:function(e){var t=this.state.categorySelects;t.push({key:M++,options:e}),this.setState({categorySelects:t.map(function(e){return e}),loadingCategorySelect:!1})}},{key:"onLanguageLoaded",value:function(){var e=this,t=v.default.allLanguages(),a=[];t.setting.map(function(e,t){return a.push({value:e.SettingId,label:e.SettingValue,separatorAbove:1==t})}),this.setState({languages:a},function(){setTimeout(function(){e.setState({spinnerOn:!1})},1500)})}},{key:"onAddCategory",value:function(){this.setState({categorySelects:[],showCategorySelects:!0},this.loadRootCategorySelect)}},{key:"onCategoryChange",value:function(t,e){var a=this,n=(v.default.project(),this.state.categorySelects.findIndex(function(e){return e.key===t})),o=e.newValue.toString(),r=this.state.categorySelects[n].options.find(function(e){return e.value===o}),l=this.state.categorySelects.map(function(e){return e});l.length=n+1;var i=this.state.categories,s=!0;if(!r.hasChildren){var u=r.categoryId.split(":").slice(-1)[0];i.find(function(e){return u===e.categoryId.split(":").slice(-1)[0]})?m.showNotificationModal("You have already picked this category. Please choose another one.","Duplicate category selected.","OK"):((i=i.map(function(e){return e})).push({id:r.categoryId?r.categoryId:r.categoryCrumbs,bisac:r.bisac,categoryId:o,categoryCrumbs:r.categoryCrumbs}),s=!1,l=[])}this.setState({categories:i,showCategorySelects:s,categorySelects:l},function(){r.hasChildren&&a.loadChildCategorySelect(o)})}},{key:"onCategoryOrderChange",value:function(e,t){this.setState({categories:e.map(function(e){return e.category})})}},{key:"onRemoveCategorySelects",value:function(){this.setState({categorySelects:[],showCategorySelects:!1})}},{key:"onValidationChange",value:function(){this.setState({formValid:this.refs.form&&this.refs.form.valid()})}},{key:"onSubjectTypeChange",value:function(a){var e,t,n=this;0<this.state.categories.length&&a.newValue!==this.state.subjectType?(t=a.oldValue===g.FICTION_SUBJECT_TYPE?(e="Fiction","Nonfiction"):(e="Nonfiction","Fiction"),m.showConfirmationModal("Are you sure?","Are you sure you want to update your selection from "+e+" to "+t+"? Your previously selected categories will be erased.","Yes","No",function(e,t){e?n.setState({categories:[],subjectType:a.newValue,categorySelects:[],showCategorySelects:!0},n.loadRootCategorySelect):n.refs.subjectType.setValue(a.oldValue)})):a.newValue!==this.state.subjectType&&this.setState({subjectType:a.newValue,categorySelects:[],showCategorySelects:!0},this.loadRootCategorySelect)}},{key:"categoriesHaveChanged",value:function(){var e=this.state.categories,t=v.default.project().categories;if(e.length!==t.length)return!0;for(var a=0;a<e.length;a++)if(e[a].categoryId!==t[a].categoryId)return!0;return!1}},{key:"hasFormChanged",value:function(){var e=this.refs.form.gather();return e.ageRange||(e.ageRange=null),e.languageCode||(e.languageCode=null),{unChanged:(0,o.default)(this.state.initialValues,e,{strict:!0})&&!this.categoriesHaveChanged()}}},{key:"onShowCategoriesModal",value:function(){var n=this;m.showCategorySearchModal(this.state.languages,this.state.categories,this.state.audienceType,this.state.languageCode,this.state.subjectType,function(e,t){if(e){var a=t;n.setState({categories:a,showCategorySelects:!a.length,categorySelects:[]},function(){a.length||n.loadRootCategorySelect()})}})}},{key:"onDeleteCategory",value:function(e,t){var a=this,n=this.state.categories,o=n.findIndex(function(e){return e.categoryId===t.categoryId});n.splice(o,1),this.setState({categories:n,showCategorySelects:!n.length},function(){n.length||a.state.categorySelects.length||a.loadRootCategorySelect()})}},{key:"onSubmit",value:function(){if(this.refs.form.hasChanged()||this.categoriesHaveChanged()){var e=this.refs.form.gather(),t=v.default.project().clone();t.audience=e.audienceType,t.ageRange=e.ageRange||"NONE",t.languageCode=e.languageCode,t.categories=this.state.categories,t.searchKeyWords=e.searchKeyWords,b.updateProject(t,!0,!0);var a={eventInfo:{eventName:"Book Details Complete",eventAction:"bookDetailsComplete",timeStamp:new Date},category:{primaryCategory:"Book Details"}};h.omnitureActionInvoked(a,"onBookDetailsComplete")}else c.go("next")}},{key:"showAddCategoryAction",value:function(){return!this.state.showCategorySelects&&this.state.languageCode&&this.state.audienceType&&this.state.categories.length<g.NUM_CATEGORIES}},{key:"generateCategoryBreadcrumbs",value:function(e){var n=this,o=(v.default.project(),""),t=!0,a=!1,r=void 0;try{for(var l,i=function(){var e=l.value,t=n.refs["category-"+e.key],a=e.options.find(function(e){return e.value===t.value()});0<o.length&&(o+=" / "),o+=a.label},s=e[Symbol.iterator]();!(t=(l=s.next()).done);t=!0)i()}catch(e){a=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(a)throw r}}return o}},{key:"loadRootCategorySelect",value:function(){var e=this;this._canLoadCategories()&&this.setState({loadingCategorySelect:!0},function(){b.loadCategories(e.state.audienceType,e.state.subjectType,null)})}},{key:"loadChildCategorySelect",value:function(e){var t=this;v.default.project();this.setState({loadingCategorySelect:!0},function(){b.loadCategories(t.state.audienceType,t.state.subjectType,e)})}},{key:"disableNext",value:function(){return!this.state.formValid||0===this.state.categories.length||0<this.state.categorySelects.length}},{key:"_determineSubjectType",value:function(e){var t=0<e.categories.length?e.categories[0]:null;if(!t)return g.FICTION_SUBJECT_TYPE;var a=t.categoryId;return a.startsWith("1")||a.startsWith("3")||a.startsWith("5")?g.FICTION_SUBJECT_TYPE:g.NONFICTION_SUBJECT_TYPE}},{key:"_canLoadCategories",value:function(){return this.state.subjectType&&this.state.languageCode&&this.state.audienceType}},{key:"render",value:function(){var e=this,t=v.default.project();return i.default.createElement("div",{className:"categories"},this.state.spinnerOn&&i.default.createElement("div",{className:"spinner-container-absolute"},i.default.createElement(P.default,{backgroundColor:"rgba(255, 255, 255, 0)"})),i.default.createElement("header",null,i.default.createElement("h1",null,"Make It Easy for Customers to Find Your Book"),i.default.createElement("p",null,"Categories help your book show up on the appropriate pages on BN.com, so the more you choose, the easier it will be for customers to find your book.")),i.default.createElement("section",null,i.default.createElement(d.default,{ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},i.default.createElement("div",{className:"panel"},i.default.createElement("div",{className:"panel-body"},i.default.createElement("div",{className:"panel-section"},i.default.createElement("div",{className:"panel-header top-header"},i.default.createElement("div",{className:"section-number"},"1"),i.default.createElement("h2",null,"Select Your Target Audience")),i.default.createElement("div",{className:"panel-section-body clearfix"},i.default.createElement("div",{className:"row"},i.default.createElement("p",null,"Your audience will determine which categories you can select."),i.default.createElement("div",{className:"col-xs-6"},i.default.createElement(k.default,{name:"audienceType",ref:"audienceType",label:"Audience",onChange:this.onAudienceChange,initValue:t.audience,options:D,rules:[E.required("Please enter the audience.")]})),i.default.createElement("div",{className:"col-xs-6"},"JUV"===this.state.audienceType&&i.default.createElement(k.default,{name:"ageRange",label:"Age Range",initValue:t.ageRange,options:j,rules:[E.required("Please enter the age range.")]})))),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-6"},this.state.languages&&i.default.createElement(k.default,{name:"languageCode",label:"Language",initValue:t.languageCode,options:this.state.languages,onChange:this.onLanguageCodeChange,rules:[E.required("Please enter the language.")]})))))),i.default.createElement("div",{className:"panel"},i.default.createElement("div",{className:"panel-body"},i.default.createElement("div",{className:"panel-section"},i.default.createElement("div",{className:"panel-header"},i.default.createElement("div",{className:"section-number"},"2"),i.default.createElement("h2",null,"Choose Your Categories")),i.default.createElement("p",null,"Select up to five categories that are most relevant to your book. Your first category will be your Primary Category. You can change the order of your categories after you select them. We will use five categories wherever possible, but may be limited to three in some cases."),i.default.createElement("br",null),i.default.createElement("p",null,"In an ongoing effort to create the best experience for B&N readers, category names may be updated periodically without notice."),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12"},i.default.createElement(p.default,{ref:"subjectType",name:"subjectType",radioLayout:"horizontal",fieldLayout:"horizontal",options:[{value:g.FICTION_SUBJECT_TYPE,label:"Fiction"},{value:g.NONFICTION_SUBJECT_TYPE,label:"Nonfiction"}],initValue:this.state.subjectType||g.FICTION_SUBJECT_TYPE,onChange:this.onSubjectTypeChange,label:"Is your book Fiction or Nonfiction?",rules:[E.required()]}))),i.default.createElement("p",null,"Use our search tool to easily find your categories, or select them from the dropdown menu below."),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12"},i.default.createElement("button",{type:"button",disabled:!(this.state.audienceType&&this.state.languageCode&&this.state.subjectType),className:(0,s.default)("btn","btn-s","btn-primary","btn-category-search",{disabled:!(this.state.audienceType&&this.state.languageCode&&this.state.subjectType)}),onClick:this.onShowCategoriesModal},"Search Categories"))),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12"},i.default.createElement("div",{className:"category-type-label"},"Category List"))),0<this.state.categories.length&&this.renderCategories(),this.state.showCategorySelects&&i.default.createElement("div",{className:"category-selects"},this.renderCategorySelects()),this.showAddCategoryAction()&&i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12"},i.default.createElement(r.default,{label:"Add Category",onClick:this.onAddCategory})))))),i.default.createElement("div",{className:"panel"},i.default.createElement("div",{className:"panel-body"},i.default.createElement("div",{className:"panel-section"},i.default.createElement("div",{className:"panel-header"},i.default.createElement("div",{className:"section-number"},"3"),i.default.createElement("h2",null,"Choose Keywords For Search Engines")),i.default.createElement("p",null,"Keywords are search engine terms that will help potential customers find your book online (e.g. â€œromance novelsâ€ or â€œchildrenâ€™s books). Please separate your keywords below with a comma."),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12"},i.default.createElement(f.default,{name:"searchKeyWords",label:"Keywords",initValue:t.searchKeyWords,maxLength:100,rules:[E.maxLength(100)],showRemainingCharCount:!0})))))))),i.default.createElement(y.default,{disableNext:this.disableNext(),next:function(){return e.refs.form.submit()}}),i.default.createElement(S.default,{data:function(){return e.hasFormChanged()}}))}},{key:"renderCategories",value:function(){var e=0<this.state.categories.length?this.state.categories:[];return i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12"},i.default.createElement(w.default,{categories:e,onCategoryDelete:this.onDeleteCategory,onSort:this.onCategoryOrderChange,hideHeader:!0})))}},{key:"renderCategorySelects",value:function(){v.default.project();var e=this.state.categorySelects.length?this.state.categorySelects[this.state.categorySelects.length-1].key:-1;return this.renderCategorySelect(this.state.categorySelects,0,e)}},{key:"renderCategorySelect",value:function(e,t,a){var n=this;if(e.length===t)return 0===t&&this.state.loadingCategorySelect?i.default.createElement("div",{key:"spinner",className:"spinner"},i.default.createElement(P.default,{top:"4px",left:"0",marginLeft:"15px"})):null;var o=e[t],r=o.key,l=o.options;return i.default.createElement("div",{key:r,className:(0,s.default)("category-select",{"first-category-select":0===t})},i.default.createElement("div",{className:"select-container"},i.default.createElement(k.default,{ref:"category-"+r,name:"category-"+r,label:0===t?"Category":"Subcategory",initDisabled:!this.useEBookCategories&&!this.state.audienceType,options:l,onChange:function(e){return n.onCategoryChange(r,e)},rules:[E.required()]}),0<t&&i.default.createElement("div",{className:"drilldown-line"}),0<this.state.categories.length&&!this.state.loadingCategorySelect&&r===a&&i.default.createElement("div",{className:"icon-close-modal remove-category-selects",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onRemoveCategorySelects}),r===a&&this.state.loadingCategorySelect&&i.default.createElement("div",{className:"spinner"},i.default.createElement(P.default,{backgroundColor:"transparent",marginLeft:"20px",left:"100%",top:"4px"}))),this.renderCategorySelect(e,++t,a))}}])&&C(t.prototype,a),n&&C(t,n),l}();t.default=L},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(47)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(15));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function n(){var e,t,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(a=c(n).call(this))||"object"!==s(a)&&"function"!=typeof a?f(t):a).onCategoryClick=e.onCategoryClick.bind(f(f(e))),e.makeClick=e.makeClick.bind(f(f(e))),e}var t,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,r.default.Component),t=n,(a=[{key:"componentDidMount",value:function(){this.props.onCategorySelect&&this._disableCheckbox(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.onCategorySelect&&(this._disableCheckbox(e),this._toggleCheckbox(e))}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"_disableCheckbox",value:function(e){var t=this.refs["checkbox"+this.props.category.categoryId],a=t&&!t.value()&&e.selectedCategories.length>=i.NUM_CATEGORIES;t.setDisabled(a)}},{key:"_toggleCheckbox",value:function(t){var e=this.refs["checkbox"+t.category.categoryId];e.value()&&!t.selectedCategories.some(function(e){return e.categoryId===t.category.categoryId})&&e.toggle()}},{key:"onCategoryClick",value:function(){this.refs["checkbox"+this.props.category.categoryId].toggle()}},{key:"render",value:function(){var t=this,e=this.props,a=e.category,n=e.selectedCategories;return this.props.onCategoryDelete?r.default.createElement("div",{className:"single-category"},r.default.createElement("div",{className:"checkbox-cell"},r.default.createElement("span",{className:"icon-close-modal",tabIndex:"0",onKeyDown:this.makeClick,onClick:function(e){return t.props.onCategoryDelete(!1,a)}})),r.default.createElement("div",{className:"category-type-cell"},this.props.isPrimary?"Primary":"Other"," Category"),r.default.createElement("div",{className:"category-cell"},r.default.createElement("strong",null,a.categoryCrumbs)),r.default.createElement("img",{alt:"drag and drop",className:"drag-and-drop",src:"img/sortable.png"})):r.default.createElement("tr",{key:"selection-"+a.categoryId},r.default.createElement("td",{className:"checkbox-cell search-category-row"},r.default.createElement(l.default,{ref:"checkbox"+a.categoryId,className:"category-checkbox",initValue:n.some(function(e){return a.categoryId===e.categoryId}),name:"selectCategory-"+a.categoryId,onChange:function(e){return t.props.onCategorySelect(e.newValue,a)}})),r.default.createElement("td",{className:"category-cell search-category-row",onClick:this.onCategoryClick,tabIndex:"0",onKeyDown:this.makeClick},a.categoryCrumbs))}}])&&u(t.prototype,a),o&&u(t,o),n}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(a(0)),r=a(2),i=l(a(13)),s=l(a(34)),u=l(a(4)),c=l(a(6)),d=l(a(27)),f=l(a(12)),p=(l(a(80)),n(a(9))),m=n(a(32)),h=n(a(33)),y=l(a(1276)),b=n(a(1277)),g=n(a(25)),v=l(a(29)),E=n(a(14)),S=n(a(15)),k=l(a(8)),P=l(a(45)),w=n(a(146)),O=l(a(1280)),C=l(a(3)),N=l(a(39)),_=n(a(48));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var A=[{value:"EXTERNAL",label:"Yes"},{value:"FREE",label:"No"}],B=function(e){function l(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a=this,t=!(n=j(l).call(this,e))||"object"!==T(n)&&"function"!=typeof n?L(a):n;var o=k.default.project(),r=!!o.isbn&&o.isbnIssue||!o.isbn;return t.state={errorMessage:[],externalIsbn:o.isbn,formValid:!1,freeIsbn:o.isbn,isbnIssue:o.isbnIssue,editDisabled:!r,gettingFreeIsbn:!1,isbnType:o.isbnType,project:o,spinnerOn:!0,vendorId:"",isbnCode:"19002",isbnTransferred:o.isbnTransferred},t.onGetIsbn=t.onGetIsbn.bind(L(L(t))),t.onFreeIsbnLocked=t.onFreeIsbnLocked.bind(L(L(t))),t.onIsbnTypeChange=t.onIsbnTypeChange.bind(L(L(t))),t.onIsbnSubmissionError=t.onIsbnSubmissionError.bind(L(L(t))),t.onValidationChange=t.onValidationChange.bind(L(L(t))),t.onSubmit=t.onSubmit.bind(L(L(t))),t.ISBNOptions=t.ISBNOptions.bind(L(L(t))),t.onVendorInfoLoaded=t.onVendorInfoLoaded.bind(L(L(t))),t.makeClick=t.makeClick.bind(L(L(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(l,o.default.Component),t=l,(a=[{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),this.state.isbnIssue&&this.refs.form.setServerSideValidationMessage("externalIsbn","Sorry, this ISBN is unavailable or already in use."),_.loadVendorInfo()}},{key:"componentWillMount",value:function(){y.default.addIsbnLockedListener(this.onFreeIsbnLocked),k.default.addProjectChangedHasErrorsListener(this.onIsbnSubmissionError),k.default.addISBNOptionsListener(this.ISBNOptions),P.default.addVendorInfoLoadedListener(this.onVendorInfoLoaded)}},{key:"componentWillUnmount",value:function(){y.default.removeIsbnLockedListener(this.onFreeIsbnLocked),k.default.removeProjectChangedHasErrorsListener(this.onIsbnSubmissionError),k.default.removeISBNOptionsListener(this.ISBNOptions),P.default.removeVendorInfoLoadedListener(this.onVendorInfoLoaded)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onVendorInfoLoaded",value:function(){var e=this,t=u.default.getUser();this.setState({vendorNumber:t.vendorNumber},function(){setTimeout(function(){e.setState({spinnerOn:!1})},1e3)})}},{key:"ISBNOptions",value:function(){var e=k.default.ISBNOptions();Array.isArray(e.data.settings)?this.setState({isbnCode:e.data.settings[0].code}):Array.isArray(e.data.settings)||this.setState({isbnCode:"19002"})}},{key:"onGetIsbn",value:function(){b.lockIsbn(),this.setState({gettingFreeIsbn:!0})}},{key:"onFreeIsbnLocked",value:function(){this.setState({freeIsbn:y.default.getIsbn(),gettingFreeIsbn:!1})}},{key:"onIsbnTypeChange",value:function(e){"EXTERNAL"===e.newValue&&this.state.freeIsbn?(b.unlockIsbn(this.state.freeIsbn),this.setState({freeIsbn:null})):"FREE"===e.newValue&&this.state.externalIsbn&&this.setState({freeIsbn:null,externalIsbn:null}),this.setState({errorMessage:[],isbnType:e.newValue}),_.loadISBNOptions(this.state.vendorNumber)}},{key:"onIsbnSubmissionError",value:function(){var e=k.default.errors(),t=S.ERRORS[e[0].code];t&&this.refs.form.setServerSideValidationMessage("externalIsbn",t),this.setState({errorMessage:[t||"An unknown error occurred. Please try again later."],formValid:!1},function(){return(0,i.default)(".page-scroller").scrollTop(0)})}},{key:"onValidationChange",value:function(){this.setState({formValid:this.refs.form.valid()})}},{key:"onSubmit",value:function(){if(this.state.isbnIssue||this.refs.form.hasChanged()){var e=this.refs.form.gather(),t=new O.default;t.isbnType=this.state.isbnType,"EXTERNAL"===e.isbnType?t.isbn=e.externalIsbn:t.isbn=this.state.freeIsbn;var a=t.toProject(k.default.project());E.updateProject(a,!0,!0);var n={eventInfo:{eventName:"Book Details Complete",eventAction:"bookDetailsComplete",timeStamp:new Date},category:{primaryCategory:"Book Details"}};g.omnitureActionInvoked(n,"onBookDetailsComplete")}else m.go("next")}},{key:"render",value:function(){var e=this,t=u.default.getUser().vendorStatus===w.AccountStatus.ACTIVE,a="/"+h.Base+"/"+k.default.project().id+"/"+h.Vendor+"/"+h.VendorPublisher;return o.default.createElement("div",{className:"rights isbn"},this.state.spinnerOn&&o.default.createElement("div",{className:"spinner-container-absolute"},o.default.createElement(C.default,{backgroundColor:"rgba(255, 255, 255, 0)"})),0<this.state.errorMessage.length&&o.default.createElement(s.default,{messages:this.state.errorMessage,type:"error"}),o.default.createElement("header",null,o.default.createElement("h1",null,"ISBN"),o.default.createElement("p",{className:"subtext"},"An ISBN (International Standard Book Number) is a 13-digit product number that must be applied to your print book in order to be sold through Barnes & Noble. It is required to publish your book."),o.default.createElement("p",{className:"subtext"},"To learn more about ISBNs, please visit our ",o.default.createElement("a",{href:"https://help.barnesandnoble.com/app/answers/detail/a_id/4322",target:"_blank"},"Help Center")," or the ",o.default.createElement("a",{href:"https://www.isbn-international.org/content/what-isbn",target:"_blank"},"International ISBN Agency website."))),o.default.createElement("section",null,o.default.createElement("div",{className:"panel"},o.default.createElement("div",{className:"panel-body"},o.default.createElement(c.default,{ref:"form",className:"section-form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},t&&o.default.createElement("div",null,o.default.createElement("div",{className:"radio-label"},"Do you have an ISBN for this print book?",o.default.createElement("span",null,"*")),o.default.createElement(d.default,{name:"isbnType",options:A,initValue:this.state.isbnType,initDisabled:this.state.editDisabled,onChange:this.onIsbnTypeChange,labelColClass:"no-label",rules:[p.required()]}),"EXTERNAL"===this.state.isbnType&&o.default.createElement("div",null,o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-6"},!this.state.isbnTransferred&&o.default.createElement(f.default,{name:"externalIsbn",serverSideValidationKey:"externalIsbn",label:"Enter Your ISBN",initValue:this.state.externalIsbn,initDisabled:this.state.editDisabled,note:"13-Digits, Numbers only, no hyphens or special characters.",maxLength:13,pattern:/^\d*$/,rules:[p.required("ISBN is missing."),p.minLength(13,"ISBN is invalid."),p.numOnly("Invalid ISBN - Please make sure the ISBN is numbers only")]}),this.state.isbnTransferred&&o.default.createElement(f.default,{name:"externalIsbn",serverSideValidationKey:"externalIsbn",label:"Enter Your ISBN",initValue:this.state.externalIsbn+" (Transferred)",initDisabled:this.state.editDisabled,note:"13-Digits, Numbers only, no hyphens or special characters.",rules:[p.required("ISBN is missing.")]}))),o.default.createElement("div",{className:"radio-note"},o.default.createElement("img",{className:"alert-image",alt:"Messaging Icon",src:"img/error-large.png"}),"Only ISBNs that have not previously been used will be valid.")),"FREE"===this.state.isbnType&&o.default.createElement("div",null,("19004"===this.state.isbnCode||"19003"===this.state.isbnCode)&&o.default.createElement("div",{className:"radio-note"},"This account has reached the limit of free ISBNs. You can buy your own ISBN from ",o.default.createElement("a",{href:"http://www.isbn-us.com/shop/publisher-programs/bowker-single-isbn-package/",target:"_blank"},"Bowker")," or through your local ISBN agency."),"19002"==this.state.isbnCode&&o.default.createElement("div",null,o.default.createElement("div",{className:"radio-label"},"Create a free ISBN with Barnes & Noble Press"),o.default.createElement("div",{className:"radio-note"},'Barnes & Noble Press can create a free ISBN if you do not have one. Choosing a free ISBN with Barnes & Noble Press means that your publisher will be shown as "Barnes & Noble Press" on your book and on BarnesandNoble.com.'),o.default.createElement("div",{className:"alert-note"},o.default.createElement("img",{className:"alert-image",alt:"Messaging Icon",src:"img/error-large.png"}),"The ISBN cannot be edited, changed, or used again after the free ISBN has been created."),o.default.createElement("div",{className:"free-isbn-btn-container"},!this.state.freeIsbn&&!this.state.gettingFreeIsbn&&o.default.createElement("a",{className:"btn btn-free-isbn",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onGetIsbn},"Create Free ISBN"),this.state.gettingFreeIsbn&&o.default.createElement("div",{className:"spinner-area"},o.default.createElement(C.default,{top:"0"})),!!this.state.freeIsbn&&o.default.createElement("div",{className:"free-isbn-label"},this.state.freeIsbn))))),!t&&o.default.createElement("div",null,o.default.createElement("div",{className:"alert-image-container"},o.default.createElement("img",{className:"alert-image-xl",alt:"Messaging Icon",src:"img/alert-xlarge.png"})),o.default.createElement("div",{className:"not-a-vendor-message"},"You must be an ",o.default.createElement(r.Link,{to:a},"approved vendor")," in order to complete this section. ",o.default.createElement("br",null),"Please return to this section when your vendor status is updated to â€œactive.â€")))))),o.default.createElement(v.default,{disableNext:!("EXTERNAL"===this.state.isbnType&&this.state.formValid||"FREE"===this.state.isbnType&&this.state.freeIsbn||!t),next:function(){return e.refs.form.submit()}}),o.default.createElement(N.default,{form:this.refs.form}))}}])&&D(t.prototype,a),n&&D(t,n),l}();t.default=B},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(44),n=o(a(16)),l=o(a(18));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this)))._isbn=null,e}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.EventEmitter),a=t,(n=[{key:"addIsbnLockedListener",value:function(e){this.addListener(m,e)}},{key:"removeIsbnLockedListener",value:function(e){this.removeListener(m,e)}},{key:"addIsbnUnlockedListener",value:function(e){this.addListener(h,e)}},{key:"removeIsbnUnlockedListener",value:function(e){this.removeListener(h,e)}},{key:"onIsbnLocked",value:function(e){this._isbn=e.isbn,this.emit(m)}},{key:"onIsbnUnlocked",value:function(){this._isbn=null,this.emit(h)}},{key:"getIsbn",value:function(){return this._isbn}},{key:"handleActions",value:function(e){switch(e.type){case l.default.Isbn.LOCK_ISBN:this.onIsbnLocked(e.args.data);break;case l.default.Isbn.UNLOCK_ISBN:this.onIsbnUnlocked()}}}])&&s(a.prototype,n),o&&s(a,o),t}());f.dispatchToken=n.default.register(f.handleActions.bind(f));var p=f;t.default=p;var m="isbnLocked",h="isbnUnlocked"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lockIsbn=function(){r.lockIsbn(function(e){n.default.dispatch({type:o.default.Isbn.LOCK_ISBN,args:{data:e}})})},t.unlockIsbn=function(e){r.unlockIsbn(e,function(e){n.default.dispatch({type:o.default.Isbn.UNLOCK_ISBN,args:{success:e}})})};var n=l(a(16)),o=l(a(18)),r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(1278));function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lockIsbn=function(t,e){n.lockIsbn().then(function(e){try{t(e)}catch(e){console.log(e)}})},t.unlockIsbn=function(e,t,a){n.unlockIsbn(e).then(function(e){try{t(e.success)}catch(e){console.log(e)}})};var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(1279))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lockIsbn=function(e){return n.post("/api/isbn/lock",{},e)},t.unlockIsbn=function(e,t){return n.remove("/api/isbn/unlock/"+e,{},t)};var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(67))},function(e,t,a){"use strict";function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.isbn=null,this.isbnType=null,e&&(this.isbn=e.isbn,this.isbnType=e.isbnType)}var e,a,n;return e=t,(a=[{key:"toProject",value:function(e){var t=e.clone();return t.isbn=this.isbn,t.isbnType=this.isbnType,t}}])&&o(e.prototype,a),n&&o(e,n),t}();t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var w=r(a(0)),u=a(7),O=r(a(1)),i=r(a(90)),C=(a(1282),r(a(34))),N=r(a(4)),_=n(a(32)),o=r(a(50)),T=r(a(167)),D=r(a(592)),l=n(a(11)),s=n(a(10)),c=n(a(25)),j=r(a(594)),M=r(a(29)),d=n(a(14)),L=n(a(15)),A=r(a(8)),B=r(a(39)),x=r(a(3)),R=r(a(119)),f=n(a(31)),p=n(a(17));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var I="createNewPrice",F="currentPrice",Y="priceSummary",v=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=y(r).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n;var o=A.default.project();return t.state={activePrices:[],activeTab:null,deleting:!1,editing:!1,expiredPrices:[],hasPageCountChanged:o.hasPageCountChanged,initialPrice:null,price:null,priceQuoteCompleted:!1,project:o,scheduledPrices:[],submitting:!1,priceWindowCutoff:A.default.priceUpdateWindow()?(0,u.bn_moment)(A.default.priceUpdateWindow().startDate):null,valid:!1,spinnerOn:!0,vendureFeatureFlagValue:p.hasFeatureFlag(l.EXPANDED_DIST)},t.onCollectFormData=t.onCollectFormData.bind(g(g(t))),t.onDeletePrice=t.onDeletePrice.bind(g(g(t))),t.onEditPrice=t.onEditPrice.bind(g(g(t))),t.onPriceUpdateWindowLoaded=t.onPriceUpdateWindowLoaded.bind(g(g(t))),t.onPriceQuoteCompleted=t.onPriceQuoteCompleted.bind(g(g(t))),t.onScheduledPricesLoaded=t.onScheduledPricesLoaded.bind(g(g(t))),t.onSubmit=t.onSubmit.bind(g(g(t))),t.onSubmitEditing=t.onSubmitEditing.bind(g(g(t))),t.onTabClick=t.onTabClick.bind(g(g(t))),t.onTabConfirmed=t.onTabConfirmed.bind(g(g(t))),t.onValidationChange=t.onValidationChange.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(r,w.default.Component),t=r,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.state.project,a=t.getBookSizeTypeParams();if(this.state.vendureFeatureFlagValue&&(a=a+"&projectId="+t.id),t.isSPB&&(d.calculateQuotedBookPrice(t.type,a),this.state.hasPageCountChanged&&d.acknowledgePageCountChanged(t.id),A.default.priceUpdateWindow()||d.getPriceUpdateWindow()),t.isEBook){var n=null,o=t.price?Number(t.price).toFixed(2):null;N.default.getUser();t.everOnSale&&(n=F,d.scheduledPrices(t.id)),this.setState({activeTab:n,initialPrice:o,project:t},function(){setTimeout(function(){e.setState({spinnerOn:!1})},1e3)})}}},{key:"componentWillMount",value:function(){o.default.addNavigationConfirmedListener(this.onTabConfirmed),A.default.addPriceUpdateWindowListener(this.onPriceUpdateWindowLoaded),A.default.addProjectQuoteListener(this.onPriceQuoteCompleted),A.default.addScheduledPricesListener(this.onScheduledPricesLoaded)}},{key:"componentWillUnmount",value:function(){o.default.removeNavigationConfirmedListener(this.onTabConfirmed),A.default.removePriceUpdateWindowListener(this.onPriceUpdateWindowLoaded),A.default.removeProjectQuoteListener(this.onPriceQuoteCompleted),A.default.removeScheduledPricesListener(this.onScheduledPricesLoaded)}},{key:"onCollectFormData",value:function(e){var t=(e.isEBook?this.refs.eBookPriceCalculator.refs.form:this.refs.printPriceCalculator.refs.form).gather(),a=(0,i.default)(Number(this.state.initialPrice).toFixed(2),Number(t.retailPrice).toFixed(2),{strict:!0});N.default.getUser();if(e.isEBook){if(e.everOnSale)if(this.state.editing){var n=(0,i.default)((0,u.bn_moment)(this.state.price.startDate),t.startDate,{strict:!0}),o=(0,i.default)(Number(this.state.price.price).toFixed(2),Number(t.retailPrice).toFixed(2),{strict:!0});if(a=n&&o,t.endDate&&t.endDatePrice){var r=(0,i.default)((0,u.bn_moment)(this.state.price.endDate),t.endDate,{strict:!0}),l=(0,i.default)(Number(this.state.price.endDatePrice).toFixed(2),Number(t.endDatePrice).toFixed(2),{strict:!0});a=n&&o&&r&&l}this.state.price.endDate&&this.state.price.endDatePrice&&!t.endDate&&!t.endDatePrice&&(a=!1)}else a=""===t.retailPrice&&""===t.startDate;null==this.state.initialPrice&&""!==t.retailPrice&&Number(t.retailPrice).toFixed(2)===Number("0.00").toFixed(2)&&(a=!1)}return{formData:t,project:e,unChanged:a}}},{key:"onDeletePrice",value:function(a){var n=this;this.state.deleting||s.showConfirmationModal("Delete Price Change","Are you sure you want to delete this scheduled price change?","Delete","Cancel",function(e,t){e&&n.setState({deleting:!0},function(){return d.scheduledPriceDelete(a.id,a.projectId)})})}},{key:"onEditPrice",value:function(e){this.setState({price:e}),this.onTabClick(I,!0)}},{key:"onPriceUpdateWindowLoaded",value:function(e){this.setState({priceWindowCutoff:(0,u.bn_moment)(e.startDate)})}},{key:"onPriceQuoteCompleted",value:function(){var e=this,t=A.default.project();Number(t.price&&0<t.price)?this.setState({priceQuoteCompleted:!0,initialPrice:t.price},function(){setTimeout(function(){e.setState({spinnerOn:!1})},1e3)}):this.setState({priceQuoteCompleted:!0,initialPriceFlag:!0,initialPrice:Number(t.quotedPrice.floorPrice).toFixed(2)},function(){setTimeout(function(){e.setState({spinnerOn:!1})},1e3)})}},{key:"onScheduledPricesLoaded",value:function(a){var e=this.state.activeTab,t=[],n=[],o=null,r=[];this.state.activeTab===I&&this.state.submitting&&setTimeout(function(){f.toggleToast(!0,"Your price change has been saved. You do not need to do anything further.",5e3)},0),this.state.activeTab===I&&this.state.submitting&&(e=Y),a&&a.length&&(a.forEach(function(e,t){a[t].status=e.status.toLowerCase(),a[t].startDate=e.startDate,a[t].startDateFormatted=(0,u.bn_moment)(e.startDate).format("MMMM D, YYYY"),a[t].price=Number(e.price).toFixed(2),a[t].royalty=Number(e.royalty).toFixed(2),a[t].endDate=e.endDate?e.endDate:null,a[t].endDateFormatted=e.endDate?(0,u.bn_moment)(e.endDate).format("MMMM D, YYYY"):null,a[t].endDatePrice=e.priceAtEnd?Number(e.priceAtEnd).toFixed(2):null}),t=a.filter(function(e){return"active"===e.status}),n=a.filter(function(e){return"expired"===e.status}),(r=a.filter(function(e){return"scheduled"===e.status})).length&&(o=r[r.length-1])),this.setState({activePrices:t,activeTab:e,deleting:!1,editing:!1,expiredPrices:n,price:o,scheduledPrices:r,submitting:!1,valid:e===F||e===Y})}},{key:"onSubmit",value:function(){var s=this;this.setState({submitting:!0},function(){var e,t=A.default.project().clone(),a=s.onCollectFormData(t);N.default.getUser();if(!a.unChanged||s.state.initialPriceFlag){if(e=Number(Number(a.formData.retailPrice).toFixed(2)),t.isEBook&&t.everOnSale){var n=s.state.editing?s.state.price.id:null,o=null,r=null,l=(0,u.bn_moment)(a.formData.startDate).format("YYYY-MM-DD");"endDateSelected"===a.formData.endDateRadio&&(o=(0,u.bn_moment)(a.formData.endDate).format("YYYY-MM-DD"),r=a.formData.endDatePrice),d.scheduledPriceSubmit(n,t.id,e,l,o,r)}else t.price=e,d.updateProject(t,!0,!0);var i={eventInfo:{eventName:"Book Details Complete",eventAction:"bookDetailsComplete",timeStamp:new Date},category:{primaryCategory:"Book Details"}};c.omnitureActionInvoked(i,"onBookDetailsComplete")}else _.go("next")})}},{key:"onSubmitEditing",value:function(){var a=this,n=this.state.project,e=this.onCollectFormData(n),o=n.getBookSizeTypeParams(),t=(0,u.bn_moment)().isSameOrBefore(this.state.priceWindowCutoff,"day")?(0,u.bn_moment)().format("MMMM"):(0,u.bn_moment)().add(1,"month").format("MMMM"),r=this.state.priceWindowCutoff.format("MMMM DD, YYYY");!e.unChanged||this.state.initialPriceFlag?s.showConfirmationModal("Please Note!","You can update the list price of your print book at any point, but please know that price changes won't\n\t\t\t\ttake effect until the end of each month. Please make any price updates by ".concat(r,"\n\t\t\t\tfor the list price to be updated on BN.com around the last day of ").concat(t,". You may notice\n\t\t\t\tthat your title is 'Processing on Sale' at the end of the month in order to process your price update.\n\t\t\t\tYou will not be able to make any additional changes to your project while it is 'Processing on Sale'."),"Save New Price","Cancel",function(e,t){e?a.onSubmit():d.calculateQuotedBookPrice(n.type,o)}):_.go("next")}},{key:"onTabClick",value:function(e,t){this.state.activeTab===I?_.onNavigationInitiated(e,"pricingTabs",t):this.onTabConfirmed(e,"pricingTabs",t)}},{key:"onTabConfirmed",value:function(e,t,a){"pricingTabs"===t&&this.setState({activeTab:e,editing:a||!1,valid:e===F||e===Y})}},{key:"onValidationChange",value:function(e){this.setState({valid:e})}},{key:"render",value:function(){var e,t=this,a=null,n=null,o=null,r=null,l=null,i=this.state,s=i.activePrices,u=i.expiredPrices,c=i.scheduledPrices,d=function(){return t.onSubmit()},f=this.state.activeTab,p=!0,m=function(){return t.onCollectFormData(A.default.project())},h=this.state.project,y=0,b=h.isEBook,g=(new Date).getTime(),v=h.isSPB?"Use the tool below to determine your royalty per print book and printing cost.":"Use the tool below to determine your royalty per eBook.";N.default.getUser();if(b&&(e=f===F||f===Y?(d=function(){return _.go("next")},m=null,"Continue"):(d=function(){return t.onSubmit()},"Save & Continue")),h.isSPB&&h.status===L.PROJECT_STATUSES.EDITING&&(d=function(){return t.onSubmitEditing()}),s.length&&(a=s.map(function(e){return w.default.createElement("tr",{key:y++},w.default.createElement("td",null),w.default.createElement("td",{className:"date-column"},e.startDateFormatted),w.default.createElement("td",{className:"date-column"},e.endDateFormatted?e.endDateFormatted:"Ongoing"),w.default.createElement("td",null,e.price),w.default.createElement("td",null,e.royalty),w.default.createElement("td",null,"Â "),w.default.createElement("td",null))})),u.length&&(n=u.map(function(e){return w.default.createElement("tr",{key:e.id},w.default.createElement("td",null),w.default.createElement("td",{className:"date-column"},e.startDateFormatted),w.default.createElement("td",{className:"date-column"},e.endDateFormatted?e.endDateFormatted:"Ongoing"),w.default.createElement("td",null,e.price),w.default.createElement("td",null,e.royalty),w.default.createElement("td",null,"Â "),w.default.createElement("td",null))})),c.length&&(p=!1,l=c.map(function(e){e.id,e.id;return w.default.createElement("tr",{key:e.id},w.default.createElement("td",null),w.default.createElement("td",{className:"date-column"},e.startDateFormatted),w.default.createElement("td",{className:"date-column"},e.endDateFormatted?e.endDateFormatted:"Ongoing"),w.default.createElement("td",null,e.price),w.default.createElement("td",null,e.royalty),c[c.length-1].id===e.id&&w.default.createElement("td",{className:"menu-container"},w.default.createElement(T.default,{items:[w.default.createElement("a",{className:"link",onClick:function(){return t.onEditPrice(e)}},"Edit"),w.default.createElement("a",{className:"link delete-link",onClick:function(){return t.onDeletePrice(e)}},"Delete")]})),c[c.length-1].id!==e.id&&w.default.createElement("td",null,"Â "),w.default.createElement("td",null))})),this.state.priceQuoteCompleted&&h.isPrintPreOrder()){var E=Number(h.quotedPrice.costPerPage),S="Note: The Printing Cost is based on the estimated page count you selected. If your actual\n\t\t\t\t\t\t\tpage count surpasses the estimated page count, you will be charged an additional $".concat(E,"\n\t\t\t\t\t\t\tper extra page.");0===E&&h.coverFormat===L.COVER_FORMAT.PAPERBACK&&(h.printColor===L.INTERIOR_PRINT_COLORS.BLACK_WHITE?S="Note: The Printing Cost is based on the estimated page count you\n\t\t\t\t\t\t\t\tselected. If your actual page count surpasses 106 pages, you will be\n\t\t\t\t\t\t\t\tcharged an additional cost per extra page.":h.printColor===L.INTERIOR_PRINT_COLORS.STANDARD&&(S="Note: The Printing Cost is based on the estimated page count you\n\t\t\t\t\t\t\t\tselected. If your actual page count surpasses 46 pages, you will be\n\t\t\t\t\t\t\t\tcharged an additional cost per extra page.")),o=w.default.createElement(C.default,{type:"warning",messages:[S]})}if(this.state.hasPageCountChanged&&!h.isPrintPreOrder()){var k="Please note the Printing Cost in the Book Size & Type section has been\n\t\t\t\t\t\t\t\t\t\tupdated to reflect the exact count of ".concat(this.state.project.pageCount," pages of\n\t\t\t\t\t\t\t\t\t\tthe interior file you uploaded.");r=w.default.createElement(C.default,{type:"warning",messages:[k]})}var P=w.default.createElement("tr",null,w.default.createElement("td",null),w.default.createElement("td",null,"Start"),w.default.createElement("td",null,"End"),w.default.createElement("td",null,"Retail Price"),w.default.createElement("td",null,"Author Royalty Per eBook"),w.default.createElement("td",null,"Â "),w.default.createElement("td",null));return w.default.createElement("div",{className:"pricing"},this.state.spinnerOn&&w.default.createElement("div",{className:"spinner-container-absolute"},w.default.createElement(x.default,{backgroundColor:"rgba(255, 255, 255, 0)"})),o,r,w.default.createElement("header",null,w.default.createElement("h1",null,"Determine Your Bookâ€™s Retail Price"),w.default.createElement("p",null,v)),w.default.createElement("section",null,w.default.createElement("div",{className:"panel price-calculator"},w.default.createElement("div",{className:"panel-body"},b&&h.everOnSale&&w.default.createElement("div",null,w.default.createElement("div",null,w.default.createElement("ul",{className:"nav nav-tabs"},w.default.createElement("li",{className:(0,O.default)({active:f===F}),onClick:function(){return t.onTabClick(F)}},w.default.createElement("a",null,"Current Price")),w.default.createElement("span",{className:(0,O.default)({"nav-tab-divider":f===Y})}),w.default.createElement("li",{className:(0,O.default)({active:f===I}),onClick:p?function(){return t.onTabClick(I)}:function(){return t.onEditPrice(t.state.price)}},w.default.createElement("a",null,this.state.editing||!p?"Edit Scheduled":"Create New"," Price")),w.default.createElement("span",{className:(0,O.default)({"nav-tab-divider":f===F})}),w.default.createElement("li",{className:(0,O.default)({active:f===Y}),onClick:function(){return t.onTabClick(Y)}},w.default.createElement("a",null,"Price Summary"))),f===F&&w.default.createElement(D.default,{project:h,readOnly:!0,ref:"eBookPriceCalculator",onValidationChange:this.onValidationChange}),f===I&&w.default.createElement(D.default,{project:h,ref:"eBookPriceCalculator",createNewPrice:!this.state.editing,editCurrentPrice:this.state.editing,editablePrice:this.state.price,onValidationChange:this.onValidationChange}),f===Y&&w.default.createElement("div",{className:"scheduled-prices-container"},0<c.length&&w.default.createElement("div",null,w.default.createElement("h4",null,"Scheduled"),w.default.createElement(R.default,{tableHeader:P,tableBody:l,tableStyle:"scheduled-table"})),0<s.length&&w.default.createElement("div",null,w.default.createElement("h4",null,"Current"),w.default.createElement(R.default,{tableHeader:P,tableBody:a,tableStyle:"active-table"})),0<u.length&&w.default.createElement("div",null,w.default.createElement("h4",null,"Expired"),w.default.createElement(R.default,{tableHeader:P,tableBody:n,tableStyle:"expired-table"})))),(this.state.deleting||this.state.submitting)&&w.default.createElement(x.default,null)),b&&!h.everOnSale&&w.default.createElement(D.default,{project:h,ref:"eBookPriceCalculator",onValidationChange:this.onValidationChange}),!b&&w.default.createElement("div",null,this.state.priceQuoteCompleted&&!b&&w.default.createElement(j.default,{ref:"printPriceCalculator",onValidationChange:this.onValidationChange}),!this.state.priceQuoteCompleted&&!b&&w.default.createElement("div",{className:"spinner-area"},w.default.createElement(x.default,{top:82})))))),w.default.createElement(M.default,{key:g,buttonText:e,disableNext:!this.state.valid||this.state.submitting,next:d}),w.default.createElement(B.default,{key:g+1,data:m}))}}])&&h(t.prototype,a),n&&h(t,n),r}();t.default=v},,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=n(a(532)),s=o(a(216)),u=o(a(8)),c=n(a(14));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?h(a):n).state={royaltyPricesSettingValue:""},t.onClose=t.onClose.bind(h(h(t))),t.getRoyaltyRates=t.getRoyaltyRates.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){u.default.addRoyaltyPricesListener(this.getRoyaltyRates)}},{key:"componentWillUnmount",value:function(){u.default.removeRoyaltyPricesListener(this.getRoyaltyRates)}},{key:"componentDidMount",value:function(){setTimeout(function(){c.getEbookRoyaltyRates()},0)}},{key:"getRoyaltyRates",value:function(){var e=u.default.royalty();this.setState({lengthOfRoyaltyPrices:e.data?e.data.setting.length:"",royaltyPricesSettingValue:e.data?e.data.setting[0].SettingValue:""})}},{key:"onClose",value:function(){l.browserHistory.push("/"+i.BaseLegal+"/"+i.MembershipAgreement)}},{key:"render",value:function(){return r.default.createElement("div",{className:"information-modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Royalty and Payment Terms")),r.default.createElement(s.default,null,r.default.createElement("div",{className:"modal-body"},r.default.createElement("p",null,"We may update or alter the Royalty and Payment Terms at any time and changes will be effective and binding on you on the date thirty days from posting, as described in the ",r.default.createElement("a",{href:!0,"data-dismiss":"modal",onClick:this.onClose},"Barnes & Noble Press Terms & Conditions.")),r.default.createElement("h2",null,"eBook Royalty Rates:"),1<this.state.lengthOfRoyaltyPrices&&r.default.createElement("div",null," ",r.default.createElement("p",null,"You will select a List Price for each eBook."),r.default.createElement("p",null,"You will be paid a royalty off the List Price:"),r.default.createElement("p",null,r.default.createElement("strong",null,"eBook List Price -- Royalty Rate")),r.default.createElement("p",null,r.default.createElement("strong",null,"USD")),r.default.createElement("p",null,"$0.99 - $2.98 -- 40%"),r.default.createElement("p",null,"$2.99 - $199.99 -- 65%"),r.default.createElement("p",null,"You will, at all times, ensure that the eBook List Price:"),r.default.createElement("ol",null,r.default.createElement("li",null,"Is no greater than the eBook's List Price at any other retailer, website or sales channel."),r.default.createElement("li",null,"Is no greater than the eBook's print edition (if applicable)."),r.default.createElement("li",null,"Complies with the minimum and maximum pricing policy as stated above.")),r.default.createElement("p",null,"Sample eBook royalty calculation:"),r.default.createElement("ol",null,r.default.createElement("li",null,"List Price: $4.99 - Publisher Royalty: $3.24"),r.default.createElement("li",null,"List Price: $11.00 - Publisher Royalty: $7.15"))," "),this.state.lengthOfRoyaltyPrices=r.default.createElement("div",null," ",r.default.createElement("p",null,"You will be paid a ",this.state.royaltyPricesSettingValue?this.state.royaltyPricesSettingValue:"","% royalty based on the List Price"),r.default.createElement("p",null,"You will, at all times, ensure that the eBook List Price:"),r.default.createElement("ol",null,r.default.createElement("li",null,"Is no greater than the eBook's List Price at any other retailer, website or sales channel."),r.default.createElement("li",null,"Is no greater than the eBook's print edition (if applicable)."),r.default.createElement("li",null,"Complies with the minimum and maximum pricing policy as stated above."))),r.default.createElement("h2",null,"Print Book Royalty Rate:"),r.default.createElement("p",null,"You will select a List Price for each print book. You will be paid a 55% royalty rate of the List Price, minus the per book printing cost."),r.default.createElement("p",null,r.default.createElement("strong",null,"Printing Costs")),r.default.createElement("p",null,"The cost to print your book is determined by the format and page count youâ€™ve specified during the set-up process. Format selections include interior print color, cover format, paper color, and trim size. These selections impact the price of printing your book."),r.default.createElement("p",null,r.default.createElement("strong",null,"Minimum Retail Price")),r.default.createElement("p",null,"Your print book will have a minimum Retail List Price based on the cost to print your book."),r.default.createElement("h2",null,"Royalty Payments:"),r.default.createElement("p",null,"Once you start seeing sales of your Barnes & Noble Press books, youâ€™ll want to track your royalty payment information. If you have eBook and print book sales, you will be issued one payment that includes royalties earned from both eBook and print book sales."),r.default.createElement("p",null,"For eBook and print book sales, you can see payments by ID under the Payments area of the Sales Reports dashboard, and you may also access a full Payments by Date report in the View Reports drop-down. Here you will find record of the payments that have been made to the bank account you entered in your Vendor Account information. Remember that according to the Pricing and Payment Terms, you will be issued a payment a) when you have accrued a minimum of $10 (combined for both eBooks and Print Books) in royalties, AND b) 60 days after the close of the calendar month in which the sale occurs (i.e. your October payment will be for your August sales)."),r.default.createElement("p",null,r.default.createElement("strong",null,"Promotions and Royalties")),r.default.createElement("p",null,"Go to our ",r.default.createElement("a",{href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5357559215131-Creating-Coupon-Codes-for-eBooks",target:"_blank",className:"underline-link"},"Help Center")," for more information about creating promotions and how royalties are calculated."))))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=y},,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(0)),i=a(2),s=r(a(348)),u=r(a(4)),o=n(a(32)),c=r(a(50)),d=r(a(1308)),f=r(a(6)),p=r(a(1309)),m=n(a(25)),h=n(a(33)),y=n(a(14)),b=r(a(29)),g=r(a(8)),v=r(a(39)),E=r(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C=1,N=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,(t=!(n=P(r).call(this,e))||"object"!==S(n)&&"function"!=typeof n?O(a):n).init=new p.default(g.default.project());var o=t.init.reviews.map(function(e){return{key:C++,firstName:e.firstName,lastName:e.lastName,source:e.source,text:e.text}});return t.state={valid:!0,shortValid:!0,reviews:o,spinnerOn:!0},t.onSubmit=t.onSubmit.bind(O(O(t))),t.onAddAReview=t.onAddAReview.bind(O(O(t))),t.onRemoveAReview=t.onRemoveAReview.bind(O(O(t))),t.onValidationChange=t.onValidationChange.bind(O(O(t))),t.validationForm=t.validationForm.bind(O(O(t))),t.makeClick=t.makeClick.bind(O(O(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(r,l.default.Component),t=r,(a=[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({spinnerOn:!1})},1e3)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"validationForm",value:function(e){this.setState({shortValid:e}),document.getElementsByClassName("message-on")&&0<document.getElementsByClassName("message-on").length?this.setState({shortValid:!1}):this.setState({shortValid:!0})}},{key:"onAddAReview",value:function(){var e=this.state.reviews;e.push({key:C++,firstName:null,lastName:null,source:null,text:null}),this.setState({reviews:e})}},{key:"onRemoveAReview",value:function(t){var e=this.state.reviews.filter(function(e){return e.key!==t.key});this.setState({reviews:e})}},{key:"onSubmit",value:function(){if(this.refs.form.hasChanged()){var t=this.refs.form.gather(),e=new p.default;e.reviews=this.state.reviews.map(function(e){return{firstName:t["firstName"+e.key],lastName:t["lastName"+e.key],source:t["source"+e.key],text:t["text"+e.key]}});var a=e.toProject(g.default.project());y.updateProject(a,!0,!0);var n={eventInfo:{eventName:"Book Details Complete",eventAction:"bookDetailsComplete",timeStamp:new Date},category:{primaryCategory:"Book Details"}};m.omnitureActionInvoked(n,"onBookDetailsComplete")}else o.go("next")}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid(),shortValid:this.refs.form.valid()})}},{key:"render",value:function(){var e,t=this,a=g.default.project(),n="/"+h.Base+"/"+a.id+"/",o=u.default.getUser();return e=a.isSPB?n+h.Details+"/"+h.DetailsIsbn:!c.default.getShowVendorSection(o.vendorStatus)||a.vendorRegistrationFirst?n+h.Summary:n+h.Vendor+"/"+h.VendorPublisher,l.default.createElement("div",{className:"editorial-reviews"},this.state.spinnerOn&&l.default.createElement("div",{className:"spinner-container-absolute"},l.default.createElement(E.default,{backgroundColor:"rgba(255, 255, 255, 0)"})),l.default.createElement("header",null,l.default.createElement("h1",null,"Editorial Reviews"),l.default.createElement("p",null,"You can add advance reviews on your bookâ€™s product page at BN.com. Enter up to five reviews below, or ",l.default.createElement(i.Link,{to:e},"Skip This Step"),".")),l.default.createElement("section",null,l.default.createElement("div",{className:"panel"},l.default.createElement("div",{className:"panel-body"},l.default.createElement(f.default,{ref:"form",className:"section-form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},l.default.createElement("div",{className:"panel-section"},this.renderReviews(),this.state.reviews.length<5&&l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-12"},l.default.createElement(s.default,{label:"ADD A REVIEW",onClick:this.onAddAReview})))))))),l.default.createElement(b.default,{disableNext:!this.state.valid||!this.state.shortValid,next:function(){return t.refs.form.submit()}}),l.default.createElement(v.default,{form:this.refs.form}))}},{key:"renderReviews",value:function(){var t=this,a=1;return this.state.reviews.map(function(e){return l.default.createElement("div",{key:e.key},l.default.createElement("div",{className:"has-close-button"},l.default.createElement("h2",null,"EDITORIAL REVIEW #"+a++),l.default.createElement("div",{className:"icon-close-modal",tabIndex:"0",onKeyDown:t.makeClick,onClick:function(){return t.onRemoveAReview(e)}})),l.default.createElement(d.default,{id:e.key,initFirstName:e.firstName,passValidation:t.validationForm,initLastName:e.lastName,initSource:e.source,initText:e.text}))})}}])&&k(t.prototype,a),n&&k(t,n),r}();t.default=N},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1)),i=n(a(12)),s=n(a(66)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(9)),c=n(a(8));function n(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?h(a):n).state={showerror:!1},t.reviewChange=t.reviewChange.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,r.default.Component),t=o,(a=[{key:"reviewChange",value:function(e){var t=this,a=e.newValue,n="text"+this.props.id,o="review-box"+this.props.id,r=document.getElementsByName(n)[0],l=/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,i=/<script\b[^>]*>[\s\S]*?<\/script\b[^>]*>/g,s=/<([^<>\s]+)\s[^<>]*on[^<>="]+=[^<>]*>/g,u="";if(""!=a)if(r.classList.remove("error-border"),document.getElementsByClassName(o)[0].classList.remove("error-border-support"),l.test(a)||s.test(a)||i.test(a))this.setState({shortValid:!1,showerror:!0}),r.classList.add("error-border"),document.getElementsByClassName(o)[0].classList.add("error-border-support");else if(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g.test(a)){var c=l.test(a)||s.test(a)||i.test(a);u=a.split("//");for(var d=1;d<u.length;d++){var f=u[d];if("www."==u[d].substring(0,4)&&(f=(f=u[d].slice(4)).toLowerCase()),(c||"bn.com"!=f.substring(0,6))&&"barnesandnoble.com"!=f.substring(0,18)){this.setState({shortValid:!1,showerror:!0}),r.classList.add("error-border"),document.getElementsByClassName(o)[0].classList.add("error-border-support");break}this.setState({shortValid:!0,showerror:!1}),r.classList.remove("error-border"),document.getElementsByClassName(o)[0].classList.remove("error-border-support")}}else r.classList.remove("error-border"),document.getElementsByClassName(o)[0].classList.remove("error-border-support"),this.setState({shortValid:!0,showerror:!1});else r.classList.remove("error-border"),document.getElementsByClassName(o)[0].classList.remove("error-border-support"),this.setState({shortValid:!0,showerror:!1});setTimeout(function(){t.props.passValidation(t.state.shortValid)},500)}},{key:"render",value:function(){c.default.project().isEBook;return r.default.createElement("div",null,r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-4"},r.default.createElement(i.default,{name:"firstName"+this.props.id,label:"Reviewer's First Name",maxLength:100,initValue:this.props.initFirstName})),r.default.createElement("div",{className:"col-xs-4"},r.default.createElement(i.default,{name:"lastName"+this.props.id,label:"Reviewer's Last Name",maxLength:150,initValue:this.props.initLastName})),r.default.createElement("div",{className:"col-xs-4"},r.default.createElement(i.default,{name:"source"+this.props.id,label:"Source",maxLength:255,initValue:this.props.initSource,rules:[u.required("Please enter the source.")]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:(0,l.default)("col-xs-12","review-box"+this.props.id)},r.default.createElement("div",{className:(0,l.default)("message message-default-off",{"message-on":this.state.showerror})},"Text field cannot contain emails, external links and Javascript"),r.default.createElement(s.default,{name:"text"+this.props.id,id:"reviewField",label:"Review Excerpt",initValue:this.props.initText,allowHtml:!0,showRemainingCharCount:!0,note:"Excerpts do not need to include quotation marks, as they will be formatted correctly on BN.com.",onChange:this.reviewChange,rules:[u.required("Please enter the review excerpt."),u.maxLength(500)]}))))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=o},function(e,t,a){"use strict";function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.reviews=[],e&&(this.reviews=e.reviews.map(function(e){return{firstName:e.firstName,lastName:e.lastName,source:e.source,text:e.text}}))}var e,a,n;return e=t,(a=[{key:"toProject",value:function(e){var t=e.clone();return t.reviews=this.reviews.map(function(e){return{firstName:e.firstName,lastName:e.lastName,source:e.source,text:e.text}}),t}}])&&o(e.prototype,a),n&&o(e,n),t}();t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(13)),i=a(2),s=o(a(34)),u=o(a(6)),c=o(a(12)),d=o(a(27)),f=o(a(80)),p=o(a(47)),m=o(a(90)),h=o(a(1)),y=n(a(9)),b=n(a(32)),g=n(a(25)),v=o(a(29)),E=o(a(8)),S=n(a(14)),k=n(a(15)),P=n(a(10)),w=o(a(1311)),O=o(a(39)),C=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var M=[{value:"yes",label:"Yes"},{value:"no",label:"No"}],L=[{value:"ASSISTED",label:"AI-Assisted"},{value:"GENERATED",label:"AI-Created"}],A=[{value:k.FORMAT_CODES.ENCRYPTED,label:"Yes"},{value:k.FORMAT_CODES.UNENCRYPTED,label:"No"}],B=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=T(o).call(this,e))||"object"!==N(n)&&"function"!=typeof n?j(a):n).init=new w.default(E.default.project()),t.state={errorMessage:[],valid:!1,isAvailableElsewhere:!!t.init.nonNpIsbn,hasEBookIsbn:!!t.init.displayIsbn,aiDeclaration:t.init.aiDeclaration,nonNpIsbn:t.init.nonNpIsbn||"978",initManuscript:"GENERATED"==t.init.Manuscript||"ASSISTED"==t.init.Manuscript,initCoverscript:"GENERATED"==t.init.Coverscript||"ASSISTED"==t.init.Coverscript,initTranslations:"GENERATED"==t.init.Translations||"ASSISTED"==t.init.Translations,imageNotFound:!1,spinnerOn:!0,initialValues:{manuscript:t.init.Manuscript,images:t.init.Coverscript,translation:t.init.Translations,formatCode:t.init.formatCode?t.init.formatCode:null}},t.onValidationChange=t.onValidationChange.bind(j(j(t))),t.onSubmit=t.onSubmit.bind(j(j(t))),t.onAvailableElsewhereChange=t.onAvailableElsewhereChange.bind(j(j(t))),t.onAIDeclarationChange=t.onAIDeclarationChange.bind(j(j(t))),t.onAIDeclarationCheckedChange=t.onAIDeclarationCheckedChange.bind(j(j(t))),t.onHasEBookIsbnChange=t.onHasEBookIsbnChange.bind(j(j(t))),t.onNonNpIsbnChange=t.onNonNpIsbnChange.bind(j(j(t))),t.onImageNotFound=t.onImageNotFound.bind(j(j(t))),t.onIsbnSubmissionError=t.onIsbnSubmissionError.bind(j(j(t))),t.checkChange=t.checkChange.bind(j(j(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var e=this;this.refs.form.validateWithoutCommitting(),setTimeout(function(){e.setState({spinnerOn:!1})},1e3)}},{key:"componentWillMount",value:function(){E.default.addProjectChangedHasErrorsListener(this.onIsbnSubmissionError)}},{key:"componentWillUnmount",value:function(){E.default.removeProjectChangedHasErrorsListener(this.onIsbnSubmissionError)}},{key:"onValidationChange",value:function(){var e={},t=this.refs.form.gather();"no"==this.state.aiDeclaration?(e.manuscript="NONE",e.images="NONE",e.translation="NONE"):(e.manuscript=1==t.Manuscript?t.AIManuscript:"NONE",e.images=1==t.Coverinteriorimages?t.AICoverscript:"NONE",e.translation=1==t.Translations?t.aITranslations:"NONE"),e.formatCode=t.formatCode?t.formatCode:null;var a=(0,m.default)(this.state.initialValues,e,{strict:!0});"yes"==this.state.aiDeclaration&&0==this.state.initManuscript&&0==this.state.initCoverscript&&0==this.state.initTranslations?this.setState({valid:!1}):null==this.init.aiDeclaration&&"no"==this.state.aiDeclaration?this.setState({valid:this.refs.form.valid()}):"yes"==this.state.aiDeclaration&&1==this.state.initManuscript&&"NONE"==t.AIManuscript||1==this.state.initCoverscript&&"NONE"==t.AICoverscript||1==this.state.initTranslations&&"NONE"==t.aITranslations?this.setState({valid:!1}):"yes"==this.state.aiDeclaration&&1==this.state.initManuscript||1==this.state.initCoverscript||1==this.state.initTranslations?this.setState({valid:this.refs.form.valid()}):"no"==this.state.aiDeclaration?this.setState({valid:this.refs.form.valid()}):this.setState({valid:this.refs.form.valid()&&a})}},{key:"onAvailableElsewhereChange",value:function(e){this.setState({isAvailableElsewhere:"yes"===e.newValue})}},{key:"onAIDeclarationChange",value:function(e){var t=this;"no"===e.newValue?this.setState({aiDeclaration:"no",valid:this.refs.form.valid(),initManuscript:!1,initCoverscript:!1,initTranslations:!1}):this.setState({aiDeclaration:"yes",initManuscript:"GENERATED"==this.init.Manuscript||"ASSISTED"==this.init.Manuscript,initCoverscript:"GENERATED"==this.init.Coverscript||"ASSISTED"==this.init.Coverscript,initTranslations:"GENERATED"==this.init.Translations||"ASSISTED"==this.init.Translations},function(){t.checkChange()})}},{key:"checkChange",value:function(){var e={},t=this.refs.form.gather();e.manuscript=1==this.state.initManuscript?"NONE"==t.AIManuscript?"":t.AIManuscript:"NONE",e.images=1==this.state.initCoverscript?"NONE"==t.AICoverscript?"":t.AICoverscript:"NONE",e.translation=1==this.state.initTranslations?"NONE"==t.aITranslations?"":t.aITranslations:"NONE",e.formatCode=t.formatCode?t.formatCode:null;var a=(0,m.default)(this.state.initialValues,e,{strict:!0});"yes"==this.state.aiDeclaration&&0==this.state.initManuscript&&0==this.state.initCoverscript&&0==this.state.initTranslations?this.setState({valid:!1}):"yes"==this.state.aiDeclaration?1==this.state.initManuscript&&"NONE"==t.AIManuscript||1==this.state.initCoverscript&&"NONE"==t.AICoverscript||1==this.state.initTranslations&&"NONE"==t.aITranslations?this.setState({valid:!1}):1!=this.state.initManuscript&&1!=this.state.initCoverscript&&1!=this.state.initTranslations||this.setState({valid:this.refs.form.valid()}):this.refs.form.valid()?this.setState({valid:this.refs.form.valid()&&!a}):this.setState({valid:!1})}},{key:"onAIDeclarationCheckedChange",value:function(e){var t={},a=this.refs.form.gather();t.manuscript=1==this.state.initManuscript?"NONE"==a.AIManuscript?"":a.AIManuscript:"NONE",t.images=1==this.state.initCoverscript?"NONE"==a.AICoverscript?"":a.AICoverscript:"NONE",t.translation=1==this.state.initTranslations?"NONE"==a.aITranslations?"":a.aITranslations:"NONE",t.formatCode=a.formatCode?a.formatCode:null;var n=(0,m.default)(this.state.initialValues,t,{strict:!0});"yes"==this.state.aiDeclaration&&1==this.state.initManuscript&&"NONE"==a.AIManuscript||1==this.state.initCoverscript&&"NONE"==a.AICoverscript||1==this.state.initTranslations&&"NONE"==a.aITranslations?this.setState({valid:!1}):"yes"==this.state.aiDeclaration&&1==this.state.initManuscript||1==this.state.initCoverscript||1==this.state.initTranslations?this.setState({valid:this.refs.form.valid()}):this.refs.form.valid()?this.setState({valid:this.refs.form.valid()&&!n}):this.setState({valid:!1})}},{key:"onHasEBookIsbnChange",value:function(e){this.refs.displayIsbn&&this.refs.displayIsbn.setValue(null),this.setState({hasEBookIsbn:"yes"===e.newValue})}},{key:"onNonNpIsbnChange",value:function(e){this.setState({nonNpIsbn:e.newValue,imageNotFound:!1})}},{key:"onIsbnSubmissionError",value:function(){var e=E.default.errors(),t=k.ERRORS[e[0].code];t&&this.refs.form.setServerSideValidationMessage("displayIsbn",t),this.setState({errorMessage:[t||"An unknown error occurred. Please try again later"],valid:!1},function(){return(0,l.default)(".page-scroller").scrollTop(0)})}},{key:"onImageNotFound",value:function(){this.setState({imageNotFound:!0})}},{key:"onSubmit",value:function(){var e=E.default.project();if(this.refs.form.hasChanged()){var t=this.refs.form.gather(),a=new w.default;if(e.isEBook&&(a.formatCode=t.formatCode||e.formatCode),a.isPublicDomain="yes"===t.isPublicDomain,this.state.isAvailableElsewhere&&(a.nonNpIsbn=t.nonNpIsbn),this.state.hasEBookIsbn&&(a.displayIsbn=t.displayIsbn),e=a.toProject(E.default.project()),"no"==this.state.aiDeclaration){var n={manuscript:"NONE",images:"NONE",translation:"NONE"};e.aiDeclaration=n}else{var o={};o.manuscript=1==t.Manuscript?t.AIManuscript:"NONE",o.images=1==t.Coverinteriorimages?t.AICoverscript:"NONE",o.translation=1==t.Translations?t.aITranslations:"NONE",e.aiDeclaration=o}S.updateProject(e,!0,!0);var r={eventInfo:{eventName:"Book Details Complete",eventAction:"bookDetailsComplete",timeStamp:new Date},category:{primaryCategory:"Book Details"}};g.omnitureActionInvoked(r,"onBookDetailsComplete")}else b.go("next")}},{key:"render",value:function(){var t=this,e=E.default.project(),a=r.default.createElement("div",null,r.default.createElement("div",{className:"padding-top-10"},"With the increased use of generative artificial intelligence tools (",r.default.createElement("b",null,"Generative-AI"),") we will need you to disclose to us if you used ",r.default.createElement("b",null,"Generative-AI")," to self-publish new content or to edit and reissue existing content. There are a couple of ways that ",r.default.createElement("b",null,"Generative-AI")," can be used in connection with the creation of your content:"),r.default.createElement("div",{className:"padding-top-10"},"If you used ",r.default.createElement("b",null,"Generative-AI")," to create your content (this would include any, text, artwork, or translations) then your content would be considered ",r.default.createElement("b",null,"AI-Created"),". Even if you edited your content after it was created it will still be considered ",r.default.createElement("b",null,"AI-Created"),"."),r.default.createElement("div",{className:"padding-top-10"},"If you used ",r.default.createElement("b",null,"Generative-AI")," to edit or improve content that you created yourself or to help generate new ideas that you then combined into a work of your own authorship, then such content would be considered ",r.default.createElement("b",null,"AI-Assisted"),"."),r.default.createElement("div",{className:"padding-top-10"},"We will ask you to self-identify if your content is ",r.default.createElement("b",null,"AI-Created")," or ",r.default.createElement("b",null,"AI-Assisted"),". Regardless of whether or not you used ",r.default.createElement("b",null,"Generative-AI"),", any content that you submit must comply with the ",r.default.createElement(i.Link,{className:"underline-link",to:"/legal/content-policy",target:"_blank"},"Barnes & Noble Press Content Policy"),", including that such content may not infringe or violate any other partyâ€™s intellectual property or proprietary rights."));return r.default.createElement("div",{className:"rights"},this.state.spinnerOn&&r.default.createElement("div",{className:"spinner-container-absolute"},r.default.createElement(C.default,{backgroundColor:"rgba(255, 255, 255, 0)"})),0<this.state.errorMessage.length&&r.default.createElement(s.default,{messages:this.state.errorMessage,type:"error"}),r.default.createElement("header",null,r.default.createElement("h1",null,"Rights & Other Information")),r.default.createElement("section",null,r.default.createElement("div",{className:"panel"},r.default.createElement("div",{className:"panel-body"},r.default.createElement(u.default,{ref:"form",className:"section-form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},e.isEBook&&r.default.createElement("div",null,r.default.createElement("div",{className:"radio-label"},"Do you want DRM encryption for your eBook?",r.default.createElement("span",null,"*"),r.default.createElement(f.default,{info:!0,isHtml:!0,text:"<b>What is DRM?</b><br />DRM stands for Digital Rights Management, which is technology intended to prevent unauthorized access to or copying of your eBook. This choice can only be made once per eBook and cannot be changed once your eBook has been put on sale."})),r.default.createElement("div",{className:"radio-note"},"This is your only opportunity to select DRM encryption for this book. You canâ€™t change your selection once your book has been put on sale."),r.default.createElement(d.default,{name:"formatCode",options:A,initValue:this.init.formatCode,initDisabled:!!e.nookEan,showRadiosWhenReadOnly:!0,labelColClass:"no-label",rules:[y.required()]})),r.default.createElement("div",{className:"ai-section-container"},(e.isEBook||e.isSPB)&&r.default.createElement("div",null,r.default.createElement("div",{className:"radio-label"},"Is the content in this book created using artificial intelligence (AI)?",r.default.createElement("span",null,"*"),r.default.createElement("div",{className:"inlineBlock link",onClick:function(){P.showNotificationModal(a,"Use of Generative-AI To Create Your Content","I Understand")}},"Need help answering this question?")),r.default.createElement("div",{className:"radio-note"},"Please indicate whether Generative-AI was used, either partially or fully, in the creation of this book, including its cover or manuscripts."),r.default.createElement(d.default,{name:"aiDeclaration",options:M,initValue:this.init.aiDeclaration,onChange:this.onAIDeclarationChange,labelColClass:"no-label",rules:[y.required()]})),"yes"==this.state.aiDeclaration&&r.default.createElement("div",{className:"padding-left-20"},r.default.createElement("div",{className:"font-bold radio-label"},"I used AI for my book's:",r.default.createElement("span",null,"*")),r.default.createElement(p.default,{className:"",name:"Manuscript",label:"Manuscript",initValue:"GENERATED"==this.init.Manuscript||"ASSISTED"==this.init.Manuscript,onChange:function(e){t.setState({initManuscript:e.newValue},function(){t.checkChange()})}}),1==this.state.initManuscript&&r.default.createElement("div",{className:"map-edgetext position-relative"},r.default.createElement("div",{className:"left-indicator"}),r.default.createElement(d.default,{name:"AIManuscript",options:L,initValue:this.init.Manuscript,showRadiosWhenReadOnly:!0,onChange:this.onAIDeclarationCheckedChange,labelColClass:"no-label",radioColClass:"col-xs-6",rules:[y.required()]})),r.default.createElement(p.default,{className:"",name:"Coverinteriorimages",label:"Cover and interior images and artwork",initValue:"GENERATED"==this.init.Coverscript||"ASSISTED"==this.init.Coverscript,onChange:function(e){t.setState({initCoverscript:e.newValue},function(){t.checkChange()})}}),1==this.state.initCoverscript&&r.default.createElement("div",{className:"map-edgetext position-relative"},r.default.createElement("div",{className:"left-indicator"}),r.default.createElement(d.default,{name:"AICoverscript",options:L,initValue:this.init.Coverscript,onChange:this.onAIDeclarationCheckedChange,showRadiosWhenReadOnly:!0,labelColClass:"no-label",radioColClass:"col-xs-6",rules:1==this.state.initCoverscript&&[y.required()]})),r.default.createElement(p.default,{className:"",name:"Translations",label:"Translations",initValue:"GENERATED"==this.init.Translations||"ASSISTED"==this.init.Translations,onChange:function(e){t.setState({initTranslations:e.newValue},function(){t.checkChange()})}}),1==this.state.initTranslations&&r.default.createElement("div",{className:"map-edgetext position-relative"},r.default.createElement("div",{className:"left-indicator"}),r.default.createElement(d.default,{name:"aITranslations",options:L,initValue:this.init.Translations,onChange:this.onAIDeclarationCheckedChange,showRadiosWhenReadOnly:!0,labelColClass:"no-label",radioColClass:"col-xs-6",rules:1==this.state.initTranslations&&[y.required()]})))),r.default.createElement("div",{className:"radio-label"},"Is the content in this book in the public domain?",r.default.createElement("span",null,"*"),r.default.createElement(f.default,{info:!0,isHtml:!0,text:e.isEBook?"<b>What is public domain?</b><br /> Your eBook is in the public domain if you are publishing a work that is currently out of copyright. <br />You are responsible for ensuring that your eBook is, in fact, in the public domain or that you hold the rights to the content before making it available for sale.":"Your book is in the public domain if you are publishing a work that is currently out of copyright."})),r.default.createElement("div",{className:"radio-note"},"Youâ€™re responsible for ensuring that the content of your book is in the public domain, or that you have the rights to the content before putting your book on sale."),r.default.createElement(d.default,{name:"isPublicDomain",options:M,initValue:this.init.isPublicDomain?"yes":"no",labelColClass:"no-label",rules:[y.required()]}),e.isSPB&&r.default.createElement("div",null,r.default.createElement("div",{className:"radio-label"},"Do you have an existing version of this title available for sale on BN.com via another distributor?",r.default.createElement("span",null,"*")),r.default.createElement("div",{className:"radio-note"},"If the existing version is the same format as this B&N Press version, we can take the duplicate version off sale for you."),r.default.createElement(d.default,{name:"isAvailableElsewhere",options:M,labelColClass:"no-label",onChange:this.onAvailableElsewhereChange,initValue:e.nonNpIsbn?"yes":"no",rules:[y.required()]}),this.state.isAvailableElsewhere&&r.default.createElement("div",null,r.default.createElement("div",{className:"radio-label"},"Please enter the other print ISBN here:",r.default.createElement("span",null,"*")),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-6"},r.default.createElement(c.default,{name:"nonNpIsbn",ref:"nonNpIsbn",initValue:this.state.nonNpIsbn,onChange:this.onNonNpIsbnChange,labelAsPlaceholder:!0,maxLength:13,pattern:/^\d*$/,rules:[y.required("ISBN is missing."),y.minLength(13,"ISBN is invalid."),y.numOnly("Invalid ISBN - Please make sure the ISBN is numbers only")]})),r.default.createElement("div",{className:"col-xs-6"},r.default.createElement("div",{className:"cover-thumbnail-container"},!this.state.imageNotFound&&r.default.createElement("img",{onError:this.onImageNotFound,src:"https://img1.nook.com/p/"+this.state.nonNpIsbn+"_s145x218.jpg",height:"150px"})))))),e.isEBook&&r.default.createElement("div",null,r.default.createElement("div",{className:"radio-label"},"Do you have an eBook-specific ISBN?"),r.default.createElement("div",{className:"radio-note"},"Note: Your eBook-specific ISBN will only be used to identify your book in your sales reporting. You do not need an ISBN to put your eBook on sale through Barnes & Noble Press."),r.default.createElement(d.default,{name:"hasEBookIsbn",options:M,labelColClass:"no-label",initValue:e.displayIsbn?"yes":"no",onChange:this.onHasEBookIsbnChange}),this.state.hasEBookIsbn&&r.default.createElement("div",null,r.default.createElement("div",{className:"radio-label"},"Please enter the eBook ISBN here:",r.default.createElement("span",null,"*")),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-6"},r.default.createElement(c.default,{name:"displayIsbn",ref:"displayIsbn",serverSideValidationKey:"displayIsbn",initValue:e.displayIsbn,labelAsPlaceholder:!0,maxLength:13,pattern:/^\d*$/,rules:[y.required("ISBN/EAN is missing."),y.minLength(13,"Please enter a valid ISBN/EAN."),y.numOnly("Invalid ISBN/EAN - Please make sure the ISBN/EAN is numbers only")]}))))),r.default.createElement("div",{className:"position-relative"},r.default.createElement("div",{className:(0,h.default)("right-disclaimer",{"font-black":this.state.valid})},"By clicking 'Save & Continue', I certify that the information submitted above is true to the best of my knowledge and understand that providing any false or misleading information could result in having my book removed from sale on B&N Press.")))))),r.default.createElement(v.default,{disableNext:!this.state.valid,next:function(){return t.refs.form.submit()}}),r.default.createElement(O.default,{form:this.refs.form}))}}])&&_(t.prototype,a),n&&_(t,n),o}();t.default=B},function(e,t,a){"use strict";function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.formatCode=null,this.isPublicDomain=!1,this.nonNpIsbn=null,this.displayIsbn=null,this.aiDeclaration=null,this.Manuscript=null,this.Coverscript=null,this.Translations=null,e&&(this.formatCode=e.formatCode,this.isPublicDomain=e.isPublicDomain,this.nonNpIsbn=e.nonNpIsbn,this.displayIsbn=e.displayIsbn,this.Manuscript=e.aiDeclaration&&e.aiDeclaration.manuscript?e.aiDeclaration.manuscript:null,this.Coverscript=e.aiDeclaration&&e.aiDeclaration.images?e.aiDeclaration.images:null,this.Translations=e.aiDeclaration&&e.aiDeclaration.translation?e.aiDeclaration.translation:null,this.aiDeclaration=e.aiDeclaration?"GENERATED"==e.aiDeclaration.manuscript||"ASSISTED"==e.aiDeclaration.manuscript||"GENERATED"==e.aiDeclaration.translation||"ASSISTED"==e.aiDeclaration.translation||"GENERATED"==e.aiDeclaration.images||"ASSISTED"==e.aiDeclaration.images?"yes":"no":null)}var e,a,n;return e=t,(a=[{key:"toProject",value:function(e){var t=e.clone();return t.formatCode=this.formatCode,t.isPublicDomain=this.isPublicDomain,t.nonNpIsbn=this.nonNpIsbn,t.displayIsbn=this.displayIsbn,t.aiDeclaration=this.aiDeclaration?this.aiDeclaration:null,t.Manuscript=this.Manuscript?this.Manuscript:null,t.Coverscript=this.Coverscript?this.Coverscript:null,t.Translations=this.Translations?this.Translations:null,t}}])&&o(e.prototype,a),n&&o(e,n),t}();t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(90)),i=o(a(34)),s=o(a(369)),u=n(a(32)),c=(n(a(10)),n(a(25))),d=o(a(29)),f=n(a(14)),p=n(a(15)),m=o(a(8)),h=o(a(39));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=g(o).call(this,e))||"object"!==y(n)&&"function"!=typeof n?E(a):n).state={initialBookSizeType:null,showEditWarning:!1,valid:!1},t.hasFormChanged=t.hasFormChanged.bind(E(E(t))),t.onClick=t.onClick.bind(E(E(t))),t.setValidState=t.setValidState.bind(E(E(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var e,t=m.default.project(),a=!1;"0"!==t.pageCount&&t.allowedToEdit&&t.status===p.PROJECT_STATUSES.NEW&&(a=!0),e=t.getBookSizeTypeFields(),this.setState({initialBookSizeType:e,showEditWarning:a,valid:t.getBookSizeAndTypeStatus(!0)})}},{key:"componentWillMount",value:function(){m.default.addBookSizeTypeCompleteListener(this.setValidState),m.default.addBookSizeTypeResetListener(this.setValidState)}},{key:"componentWillUnmount",value:function(){m.default.removeBookSizeTypeCompleteListener(this.setValidState),m.default.removeBookSizeTypeResetListener(this.setValidState)}},{key:"hasFormChanged",value:function(){return{unChanged:(0,l.default)(this.state.initialBookSizeType,m.default.project().getBookSizeTypeFields(!0),{strict:!0})}}},{key:"onClick",value:function(){if((0,l.default)(this.state.initialBookSizeType,m.default.project().getBookSizeTypeFields(!0),{strict:!0}))u.go("next");else{m.default.project().setBookSizeTypeFields(!0);var e=m.default.project().clone();f.updateProject(e,!0,!0);var t={eventInfo:{eventName:"Book Size and Type Continue Click",eventAction:"bookSizeTypeContinueClick",timeStamp:new Date},category:{primaryCategory:"Build A Book"}};c.omnitureActionInvoked(t,"onBookSizeTypeContinueClick")}}},{key:"setValidState",value:function(e){this.setState({valid:e})}},{key:"render",value:function(){var e=this,t=null,a=null,n=null,o=m.default.project();return this.state.showEditWarning&&(t=r.default.createElement(i.default,{dismissable:!0,messages:["Please note: If you update your cover format or page size, you'll need to re-upload your interior."],type:"warning"})),this.state.showSameBookSizeWarning&&(n=r.default.createElement(i.default,{dismissable:!0,messages:["Please note: You already have a book matching this exact title, format and type."],type:"warning"})),o.allowedToEdit&&o.status!==p.PROJECT_STATUSES.NEW&&(a=r.default.createElement(i.default,{messages:["You are not able to make edits to the book size and type after your book has been submitted for approval."],type:"warning"})),r.default.createElement("div",null,r.default.createElement("div",{className:"book-size-type"},t,n,a,r.default.createElement("header",null,r.default.createElement("h1",null,"Choose Your Book Size & Type"),r.default.createElement("p",null,"This will help determine your printing cost. Please note that select combinations are not available at this time.")," ",r.default.createElement("p",null,"Need recommendations on how to select your Book Size & Type? ",r.default.createElement("a",{href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5358034341275-Trim-Sizes-and-Paper-Stock",target:"_blank"},"Learn More"))),r.default.createElement("section",null,r.default.createElement("div",{className:"panel"},r.default.createElement("div",{className:"panel-body"},r.default.createElement(s.default,{buildABook:!0})))),r.default.createElement(d.default,{disableNext:!this.state.valid,next:this.onClick}),r.default.createElement(h.default,{data:function(){return e.hasFormChanged()}})))}}])&&b(t.prototype,a),n&&b(t,n),o}();t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=o(a(13)),r=o(a(0)),l=o(a(1)),f=(a(2),o(a(64)),n(a(14))),p=n(a(15)),m=o(a(8)),i=o(a(3)),s=n(a(25)),u=o(a(6)),c=o(a(27)),h=n(a(9)),y=o(a(23)),b=o(a(12)),g=o(a(61)),v=n(a(11)),E=n(a(17));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=P(o).call(this,e))||"object"!==S(n)&&"function"!=typeof n?O(a):n).pageCountIn=null,t.state={formElements:[],metaData:[],price:"0.00",showPriceCalculator:!1,valid:!1,GrwValue:E.hasFeatureFlag(v.GRW_PAPER),disabledButton:!0,loader:!1},t.buildIncrementOptions=t.buildIncrementOptions.bind(O(O(t))),t.buildFormControls=t.buildFormControls.bind(O(O(t))),t.buildRadioFormControl=t.buildRadioFormControl.bind(O(O(t))),t.buildSelectFormControl=t.buildSelectFormControl.bind(O(O(t))),t.getPriceQuote=t.getPriceQuote.bind(O(O(t))),t.loadBookSizeTypeForm=t.loadBookSizeTypeForm.bind(O(O(t))),t.loadBookSizeTypeMetaData=t.loadBookSizeTypeMetaData.bind(O(O(t))),t.onChange=t.onChange.bind(O(O(t))),t.onPriceQuoteCompleted=t.onPriceQuoteCompleted.bind(O(O(t))),t.buildInputFormControl=t.buildInputFormControl.bind(O(O(t))),t.onSubmit=t.onSubmit.bind(O(O(t))),t.onCoverDownloadCompleted=t.onCoverDownloadCompleted.bind(O(O(t))),t.onBlur=t.onBlur.bind(O(O(t))),t.checkClick=t.checkClick.bind(O(O(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){if(!this.props.buildABook){m.default.onStartNewProject();var e={eventInfo:{eventName:"Page View",eventAction:"pageView",timeStamp:new Date},category:{primaryCategory:"pages"},attributes:{page:{pageInfo:{previousPageName:null,pageName:"bn press|book-cover-template-generator",pageType:"bn press:book cover template generator",destinationURL:window.location.href,referringURL:null}}}};s.omnitureActionInvoked(e,"onPageView")}var t=m.default.project();this.props.projectType&&(t.type=this.props.projectType),t.setBookSizeTypeFields(),this.loadBookSizeTypeMetaData(),window.addEventListener("click",this.checkClick),window.document.getElementById("app").classList.add("hide-extra-option")}},{key:"componentWillMount",value:function(){m.default.addBookSizeTypeCompleteListener(this.getPriceQuote),m.default.addBookSizeTypeMetaDataListener(this.loadBookSizeTypeForm),m.default.addCoverGenerateListener(this.onCoverDownloadCompleted)}},{key:"componentWillUnmount",value:function(){m.default.removeBookSizeTypeCompleteListener(this.getPriceQuote),m.default.removeBookSizeTypeMetaDataListener(this.loadBookSizeTypeForm),m.default.removeCoverGenerateListener(this.onCoverDownloadCompleted),setTimeout(function(){document.body.classList.remove("book-cover-template-generator-container")},1e3),window.removeEventListener("click",this.checkClick),window.document.getElementById("app").classList.remove("hide-extra-option")}},{key:"checkClick",value:function(e){if(this.state.GrwValue){if("tooltip-component"==e.target.className)return!1;1==(0,d.default)('[id*="popover"]').length&&(0,d.default)(".tooltip-component-text").click()}}},{key:"getPriceQuote",value:function(){m.default.project().getBookSizeTypeParams(!1,!0);this.setState({showPriceCalculator:!1})}},{key:"loadBookSizeTypeForm",value:function(e){var l,i=this,s=this.state.disabledButton,u=[],c=m.default.project(),t=c.getInitialBookSizeAndTypeStatus(!0);e.fields?(e.fields.map(function(t){(0,d.default)("input[name=pageSize]").parent().parent().removeAttr("style");var e=[];t.onChange=function(e){return i.onChange({field:t.key,values:e})},"pageCount"==t.key&&(t.onBlur=function(){return i.onBlur()}),t.options=e,t.ref=t.key,t.value=c[t.key+"Initial"],t.disabled=!(t.value||l&&null!==l&&c.allowedToEdit&&(null===c.status||c.status===p.PROJECT_STATUSES.NEW));var a=(0,d.default)("input[name=pageCount]");if("pageCount"!==t.key&&"coverFinish"!==t.key)for(var n in t.values)e.push({label:t.values[n].label.replace(/\\/g,""),value:t.values[n].key,disabled:0==a.length||(a.val()<17||801<a.val()||a.val()%2==1||!t.values[n].available)}),null!==t.image&&t.value===t.values[n].key&&(t.image=t.values[n].image);if("coverFinish"===t.key)for(var o in t.values)e.push({label:t.values[o].label.replace(/\\/g,""),value:t.values[o].key,disabled:0==a.length||(a.val()<17||801<a.val()||a.val()%2==1||!t.values[o].available)}),null!==t.image&&t.value===t.values[o].key&&(t.image=t.values[o].image);if("pageCount"===t.key){var r=t.value;t.disabled=!c.allowedToEdit||null!==c.status&&c.status!==p.PROJECT_STATUSES.NEW,t.value=r,t.format="text",t.minValue=18,s=!(17<t.value&&t.value<801&&t.value%2==0)}u.push(t),l=t.value}),this.setState({formElements:u,valid:t,disabledButton:s},function(){i.state.valid&&setTimeout(function(){f.bookSizeTypeComplete()},0),setTimeout(function(){i.refs.form.validateWithoutCommitting(),document.querySelector(".template_page_count .message")&&1==s&&document.querySelector(".template_page_count input").value&&(document.querySelector(".template_page_count .message").innerText="Please enter Page Count as multiple of 2, between 18 and 800",(0,d.default)("input[name=pageSize]").attr("disabled","disabled").val(""),(0,d.default)("input[name=pageSize]").parent().parent().addClass("disabled").removeClass("has-value").css("pointer-events","none"),(0,d.default)("input[name=pageSize-hidden]").val("")),document.body.classList.contains("setPageCoutFocus")&&i.pageCountIn.focus()},10)})):((0,d.default)("input[name=coverFinish]").attr("disabled","disabled"),(0,d.default)("input[name=coverFormat]").attr("disabled","disabled"),(0,d.default)("input[name=printColor]").attr("disabled","disabled"),(0,d.default)("input[name=paperColor]").attr("disabled","disabled"),(0,d.default)(".progress-buttons .btn-progress").attr("disabled","disabled"),(0,d.default)("input[name=pageSize]").attr("disabled","disabled").val(""),(0,d.default)("input[name=pageSize]").parent().parent().addClass("disabled").removeClass("has-value").css("pointer-events","none"),(0,d.default)("input[name=pageSize-hidden]").val(""))}},{key:"loadBookSizeTypeMetaData",value:function(){var e=m.default.project().getBookSizeTypeParams(!1,!0);f.loadBookSizeTypeMetaData(e)}},{key:"buildFormControls",value:function(){var n=this;return this.state.formElements.map(function(e){var t,a=e;return n.state.GrwValue||"paperColor"!=e.key||4!=a.options.length||(a.options=a.options.filter(function(e){return"GROUNDWOOD"!==e.value})),"radio"===e.format&&(t=n.buildRadioFormControl(a)),"select"===e.format&&(t=n.buildSelectFormControl(e)),"text"===e.format&&(t=n.buildInputFormControl(e)),n.state.GrwValue?r.default.createElement("div",{className:e.standAlone?"single-row-control":"paperColor"==e.key?"bst-column bst-color-weight":"bst-column",key:e.key},!e.standAlone&&r.default.createElement("h2",null,"paperColor"==e.key?"Paper Color & Weight ":e.label,"paperColor"==e.key&&r.default.createElement(g.default,{className:"heading3-replace",info:!0,isHtml:!0,text:"<b>Groundwood (38 lb):</b> Available for black & white printing</br>\n\t\t\t<a href='https://press.barnesandnoble.com/bnpress-blog/why-choose-groundwood-paper' target=\"_blank\" >Why Should I Use Groundwood Paper for My Book?</a></br>\n\t\t\t</br><b>Cream (50 lb):</b> Available for black & white printing</br>\n\t\t\t</br><b>White (50 lb):</b> Available for black & white printing and standard color printing</br>\n\t\t\t</br><b>White (70 lb): </b> Available for all color printing options"},r.default.createElement("span",{className:"tooltip-component"}))),e.image&&r.default.createElement("img",{alt:"book cover options",className:(0,l.default)("img-responsive",{disabled:e.disabled}),src:e.image}),t):r.default.createElement("div",{className:e.standAlone?"single-row-control":"paperColor"==e.key?"bst-column bst-color-weight":"bst-column",key:e.key},!e.standAlone&&r.default.createElement("h2",null,e.label),e.image&&r.default.createElement("img",{className:(0,l.default)("img-responsive",{disabled:e.disabled}),src:e.image,alt:e.label}),t)})}},{key:"buildIncrementOptions",value:function(e,t){var a,n=e.increment,o=e.maxPages,r=[];r.push({label:"18 - 50",value:50}),18<=t&&t<=50&&(a=50);for(var l=50;l<=o-n;l+=n){var i=l+1;i<t&&t<=l+n&&(a=l+n),r.push({label:i+" - "+(l+n),value:l+n})}return{options:r,selectedValue:a}}},{key:"buildRadioFormControl",value:function(e){return r.default.createElement(c.default,{name:e.key,disableValidationMessages:!0,options:e.options,unboundValue:e.value,onChange:e.onChange,initDisabled:e.disabled,readOnly:this.props.readOnly,fieldLayout:"vertical",radioLayout:"vertical",showRadiosWhenReadOnly:!0,rules:[h.requiredAllTheTime()]})}},{key:"buildSelectFormControl",value:function(e){return r.default.createElement(y.default,{name:e.key,label:e.label,disableValidationMessages:!0,options:e.options,unboundValue:e.value,onChange:e.onChange,initDisabled:e.disabled,readOnly:this.props.readOnly,rules:[h.requiredAllTheTime()]})}},{key:"buildInputFormControl",value:function(e){var t=this;return r.default.createElement(b.default,{name:e.key,ref:function(e){return t.pageCountIn=e},label:"Estimated Page Count",disableValidationMessages:!1,onChange:e.onChange,onBlur:e.onBlur,initDisabled:e.disabled,unboundValue:e.value,readOnly:this.props.readOnly,className:"template_page_count",onFocus:function(e){var t=e.target.value;e.target.value="",e.target.value=t,document.body.classList.add("setPageCoutFocus")},rules:[h.evenNumOnly("Please enter Page Count as multiple of 2, between 18 and 800")]})}},{key:"onBlur",value:function(){document.body.classList.remove("setPageCoutFocus")}},{key:"onChange",value:function(t){var e=this,a=(this.state.formElements.find(function(e){return e.key===t.field}),m.default.project()),n=this.props.showPrintPriceCalculator;if(a[t.field+"Initial"]=t.values.newValue,"pageCount"!==t.field){var o=this.state.formElements.map(function(e){return e.key}),r=o.findIndex(function(e){return e===t.field});r!==o.length-1&&this.setState({price:"0.00"}),f.bookSizeTypeReset(o.splice(r+1),n)}"pageCount"==t.field&&(!t.values.newValue||17<t.values.newValue&&t.values.newValue<801&&t.values.newValue%2==0||setTimeout(function(){document.querySelector(".template_page_count .message")&&t.values.newValue&&(document.querySelector(".template_page_count .message").innerText="Please enter Page Count as multiple of 2, between 18 and 800"),document.body.classList.contains("setPageCoutFocus")&&e.pageCountIn.focus()},10)),this.loadBookSizeTypeMetaData()}},{key:"onPriceQuoteCompleted",value:function(){var e,t=m.default.project();e=t.isSPB?t.quotedPrice.printCost:t.quotedPrice.price,this.props.showPrintPriceCalculator&&(t.price=t.quotedPrice.floorPrice),this.setState({price:e})}},{key:"onCoverDownloadCompleted",value:function(e){var t=e.result.param;e.result.url,t.coverFinish,t.coverType,t.pageColor,t.pageCount,t.pageTrim,t.paperColor}},{key:"onSubmit",value:function(){var e=this.pageCountIn.value();if(!(17<e&&e<801&&e%2==0))return this.pageCountIn.focus(),!1;var t,a=m.default.project(),n="/api/project/generateCover?"+a.getBookSizeTypeParams(!0,!0);"SOFTCOVER"==a.coverFormatInitial&&(t="Paperback"),"HARDCOVER"==a.coverFormatInitial&&(t="Hardcover_w_Printed_Case"),"HARDCOVER_DUST_JACKET"==a.coverFormatInitial&&(t="Hardcover_w_Dust_Jacket");var o=encodeURIComponent(a.pageSizeInitial.replace(" ","x").replace(/[\",\s]/g,"").replace(/\./g,"-")+"_"+t+"_Cover_Template"),r=encodeURIComponent(a.pageSizeInitial.replace(" ","x"));window.open(n+"&filename="+o,"_blank");var l={eventInfo:{eventName:"Create Your Cover Download PDF Click",eventAction:"createYourCoverDownloadPDFClick",timeStamp:new Date},category:{primaryCategory:"Book cover Template Page"},attributes:{coverFormat:a.coverFormatInitial,coverFinish:a.coverFinishInitial,interiorPrintColor:a.printColorInitial,paperColor:a.paperColorInitial,estimatedPageCount:a.pageCountInitial,pageSize:r}};s.omnitureActionInvoked(l,"onCreateYourCoverDownloadPDFClick")}},{key:"render",value:function(){setTimeout(function(){"book-cover-template-generator"==location.pathname.split("/")[1].toLowerCase()?document.body.classList.add("book-cover-template-generator-container"):document.body.classList.remove("book-cover-template-generator-container")},1500);var e=(new Date).getTime(),t=m.default.project();return r.default.createElement("div",{key:e,className:"book-cover-template-generator container-fluid"},r.default.createElement("div",{className:"book-size-type"},r.default.createElement("header",null,r.default.createElement("h1",null,"Create Your Print Book Cover Template"),r.default.createElement("p",null,"Use this tool to build a customized print book cover template. This template will match the exact specifications of your print book cover generated from information you provide in the below data fields.")," ",r.default.createElement("p",{className:"mrgTop"}," ",r.default.createElement("a",{href:"https://help.barnesandnoble.com/app/answers/detail/a_id/4411",target:"_blank"},"Learn More"))),r.default.createElement("section",null,r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"book-size-type-container"},r.default.createElement("div",null,r.default.createElement(u.default,{ref:"form",className:"bst-form clearfix"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 "},this.buildFormControls())))))))),r.default.createElement("div",{className:(0,l.default)("progress-buttons")},r.default.createElement("div",{className:"centered"},r.default.createElement("button",{className:"btn btn-progress",disabled:!t.getInitialBookSizeAndTypeStatus(!0)||this.state.disabledButton||!this.state.valid,onClick:this.onSubmit},"Download as PDF"))),this.state.loading&&r.default.createElement(i.default,null)))}}])&&k(t.prototype,a),n&&k(t,n),o}();t.default=C},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(1)),s=o(a(4)),u=n(a(33)),c=n(a(14)),d=n(a(32)),f=o(a(50)),p=o(a(1315)),m=n(a(10)),h=o(a(8));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=g(o).call(this,e))||"object"!==y(n)&&"function"!=typeof n?E(a):n).state={showPublishAlert:!1,user:s.default.getUser()},t.baseRoute=null,t.childRoute=null,t.projectId=null,t.updateRouteInfo=t.updateRouteInfo.bind(E(E(t))),t.onNavigationChanged=t.onNavigationChanged.bind(E(E(t))),t.onPublishAlertRemove=t.onPublishAlertRemove.bind(E(E(t))),t.onPublishAlertShow=t.onPublishAlertShow.bind(E(E(t))),t.onShowExistingProjectModal=t.onShowExistingProjectModal.bind(E(E(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){f.default.addNavigationChangedListener(this.onNavigationChanged),f.default.addShowExistingProjectModalListener(this.onShowExistingProjectModal),h.default.addPublishAlertRemoveListener(this.onPublishAlertRemove),h.default.addPublishAlertShowListener(this.onPublishAlertShow),this.updateRouteInfo(this.props)}},{key:"componentWillUnmount",value:function(){f.default.removeNavigationChangedListener(this.onNavigationChanged),f.default.removeShowExistingProjectModalListener(this.onShowExistingProjectModal),h.default.removePublishAlertRemoveListener(this.onPublishAlertRemove),h.default.removePublishAlertShowListener(this.onPublishAlertShow)}},{key:"componentWillReceiveProps",value:function(e){this.updateRouteInfo(e)}},{key:"onNavigationChanged",value:function(e){setTimeout(function(){l.browserHistory.push("/"+e.url)},0)}},{key:"onShowExistingProjectModal",value:function(){m.showConfirmationModal("Your Project Already Exists","You are working on an existing book. Do you want to create a new book?","Create New Book","Keep Editing Current Book",function(e,t){e&&(c.startNewProject(),l.browserHistory.push("/"+u.Base))})}},{key:"onPublishAlertRemove",value:function(){var e=this;setTimeout(function(){e.setState({showPublishAlert:!1})},300)}},{key:"onPublishAlertShow",value:function(){var e=this;setTimeout(function(){e.setState({showPublishAlert:!0})},500)}},{key:"updateRouteInfo",value:function(e){var t=e.params,a=e.routes,n=null,o=null,r=null;t.id&&(a.shift(),r=a[3]),a&&(n=a[5]?a[5].path:null,o=a[6]?a[6].path:null),this.baseRoute===n&&this.childRoute===o&&this.projectId===r||(this.baseRoute=n,this.childRoute=o,this.projectId=r,d.changeState(n,o))}},{key:"render",value:function(){return r.default.createElement("div",{className:(0,i.default)("bab-container",{"publish-alert-active":this.state.showPublishAlert})},r.default.createElement(p.default,null),this.props.children)}}])&&b(t.prototype,a),n&&b(t,n),o}();t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(1)),s=o(a(344)),u=n(a(189)),c=o(a(4)),d=n(a(32)),f=o(a(50)),p=o(a(370)),m=n(a(534)),h=n(a(11)),y=o(a(596));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=v(o).call(this,e))||"object"!==b(n)&&"function"!=typeof n?S(a):n).state={loggedState:c.default.getLoggedState(),user:c.default.getUser()},t.onNavigationConfirmed=t.onNavigationConfirmed.bind(S(S(t))),t.onUserLoggedOut=t.onUserLoggedOut.bind(S(S(t))),t.makeClick=t.makeClick.bind(S(S(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){c.default.addLogoutUserListener(this.onUserLoggedOut),f.default.addNavigationConfirmedListener(this.onNavigationConfirmed)}},{key:"componentWillUnmount",value:function(){c.default.removeLogoutUserListener(this.onUserLoggedOut),f.default.removeNavigationConfirmedListener(this.onNavigationConfirmed)}},{key:"componentWillReceiveProps",value:function(){this.setState({loggedState:c.default.getLoggedState(),user:c.default.getUser()})}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onNavigationConfirmed",value:function(e,t){"header"===t&&setTimeout(function(){l.browserHistory.push(e)},0)}},{key:"onSaveBeforeLeaving",value:function(e){d.onNavigationInitiated(e,"header")}},{key:"onUserLoggedOut",value:function(){this.setState({loggedState:c.default.getLoggedState(),user:c.default.getUser()},function(){return l.browserHistory.push("/")})}},{key:"render",value:function(){var e=this,t=this.state.loggedState.loggedIn?"/"+m.Base:"/"+u.SignIn,a=!!this.state.loggedState.loggedIn&&this.state.user.isImposter,n=!!this.state.loggedState.loggedIn&&this.state.user.authorShareKey,o=c.default.getUser();return r.default.createElement("div",null,r.default.createElement("div",{className:(0,i.default)("bab-header-container",{"bab-act-as-header-container":a||n})},r.default.createElement("header",{className:"bab-header"},r.default.createElement(s.default,{user:this.state.user}),r.default.createElement(l.Link,{onClick:function(){return e.onSaveBeforeLeaving("/")},className:"logo"},r.default.createElement("img",{alt:"Nook press logo",className:"brand new-logo-bab",src:"img/bnpress-logo-tm.svg"})),r.default.createElement("div",{className:"bab-header-navigation"},r.default.createElement("ul",null,r.default.createElement("li",{className:"dropdown"},r.default.createElement(l.Link,{onClick:function(){return e.onSaveBeforeLeaving(t)}},r.default.createElement("div",{tabIndex:"0",onKeyDown:this.makeClick,className:"icon-user"})),null!==this.state.user&&r.default.createElement("div",{className:"user-name"},this.state.user.firstName||this.state.user.first_name),r.default.createElement("div",{className:"separator"}," | "),r.default.createElement("a",{href:"javascript:void(0)",className:"dropdown-toggle","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},r.default.createElement("div",{className:"dropdown-trigger"},null!==this.state.user?"Menu":"My Account"),r.default.createElement("div",{className:"icon-down"})),r.default.createElement(p.default,{loggedState:this.state.loggedState,buildABook:!0})))))),o&&null!==o.authorShareKey&&!c.default.hasContributorPageAccessPermission(h.PROJECTS_SERIES)&&r.default.createElement(y.default,null))}}])&&g(t.prototype,a),n&&g(t,n),o}();t.default=k},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(13)),l=o(a(0)),i=o(a(1)),s=a(2),u=o(a(1317)),c=o(a(4)),d=n(a(33)),f=o(a(1318)),p=o(a(50)),m=o(a(1319)),h=n(a(11)),y=n(a(10)),b=n(a(14)),g=o(a(8)),v=o(a(1320)),E=o(a(1321)),S=o(a(1323)),k=n(a(15));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=O(o).call(this,e))||"object"!==P(n)&&"function"!=typeof n?N(a):n).state={subNavigation:!1,projectReady:!1,showPublishAlert:!1},t.onStateChanged=t.onStateChanged.bind(N(N(t))),t.onProjectChanged=t.onProjectChanged.bind(N(N(t))),t.onPublishAlertRemove=t.onPublishAlertRemove.bind(N(N(t))),t.onPublishAlertShow=t.onPublishAlertShow.bind(N(N(t))),t.onUpdateProjectStatus=t.onUpdateProjectStatus.bind(N(N(t))),t.onViewEditabilityDetails=t.onViewEditabilityDetails.bind(N(N(t))),t.onViewNoEditDetails=t.onViewNoEditDetails.bind(N(N(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(o,l.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.onStateChanged();var e=this.props.params&&this.props.params.id?this.props.params.id:null;b.loadProject(e,!1,!0)}},{key:"componentWillMount",value:function(){p.default.addStateChangedListener(this.onStateChanged),g.default.addProjectChangedListener(this.onProjectChanged),g.default.addPublishAlertRemoveListener(this.onPublishAlertRemove),g.default.addPublishAlertShowListener(this.onPublishAlertShow),g.default.addSetSaleStatusListener(this.onUpdateProjectStatus)}},{key:"componentWillReceiveProps",value:function(e){var t=e.params&&e.params.id?e.params.id:null;this.ensureProjectLoaded(t)}},{key:"componentWillUnmount",value:function(){p.default.removeStateChangedListener(this.onStateChanged),g.default.removeProjectChangedListener(this.onProjectChanged),g.default.removePublishAlertRemoveListener(this.onPublishAlertRemove),g.default.removePublishAlertShowListener(this.onPublishAlertShow),g.default.removeSetSaleStatusListener(this.onUpdateProjectStatus)}},{key:"onStateChanged",value:function(){(0,r.default)(window).scrollTop(0);var e=p.default.getSectionSubNavigationExists();this.setState({subNavigation:e[0].section&&e[0].children})}},{key:"onUpdateProjectStatus",value:function(e){this.setState({projectReady:!1},function(){return b.loadProject(e)})}},{key:"onPublishAlertRemove",value:function(){var e=this;setTimeout(function(){e.setState({showPublishAlert:!1})},500)}},{key:"onPublishAlertShow",value:function(){var e=this;setTimeout(function(){e.setState({showPublishAlert:!0})},300)}},{key:"onProjectChanged",value:function(){var e,t=this,a=g.default.project(),n=this.props.params&&this.props.params.id?this.props.params.id:null;e=!(!a||!n||a.id!==n),setTimeout(function(){t.setState({projectReady:e})},0)}},{key:"onViewEditabilityDetails",value:function(){var a=this,n=g.default.project();y.showEditOnSaleBookModal(function(e,t){e&&(n.isSPB&&n.showEditModal&&n.status===k.PROJECT_STATUSES.ONSALE&&c.default.hasCustomSamplingPermission(h.EDIT_SPB_RETIRED)?0<a.props.location.pathname.search("search")&&s.browserHistory.push("/"+d.Base+"/"+n.id+"/"+d.Summary):b.setEditStatus(n.id))},n)}},{key:"onViewNoEditDetails",value:function(){var e=g.default.project(),t=null;e.isSPB?t=l.default.createElement("div",null,l.default.createElement("span",null,"Youâ€™re currently unable to edit this book due to one or more of the following reasons:"),l.default.createElement("ul",null,l.default.createElement("li",null,"Your book is under review"),l.default.createElement("li",null,"A copy of this title is in your cart or has been ordered"),l.default.createElement("li",null,"Your book is being processed for sale"),l.default.createElement("li",null,"Your book is on sale and must first be taken off sale"))):e.isPOD&&(t=l.default.createElement("div",null,l.default.createElement("span",null,"Youâ€™re currently unable to edit this book due to one or more of the following reasons:"),l.default.createElement("ul",null,l.default.createElement("li",null,"Your book is under review"),l.default.createElement("li",null,"A copy of this title is in your cart or has been ordered")))),y.showNotificationModal(t,"Edit a Book")}},{key:"getViewNoEditDetails",value:function(){var e=g.default.project(),t=e.status,a=e.dropShipStatus,n=e.noDeleteReason;return"PROCESSING_ONSALE"===t||"LSI_ONSALE"===t?"You're currently unable to edit this book because your book is being processed for sale.":"PROCESSING_DROPSHIP"===a||"PROCESSING_DROPSHIP"===t?"You're currently unable to edit this book because your book is under review.":n===k.NODELETEREASON.PENDING_ORDER||n===k.NODELETEREASON.PENDING_ORDER_STATUS_BLOCK?"You're currently unable to edit this book because a recent order is still processing. You will be able to edit after the order is complete.":n===k.NODELETEREASON.PROJECT_IN_CART?"You're currently unable to edit this book because a copy of this title is in your cart.":"ONSALE"===t?"You're currently unable to edit this book because your book is on sale and must first be taken off sale.":l.default.createElement("span",null,"You're currently unable to edit this book. ",l.default.createElement("span",{className:"action-text",onClick:this.onViewNoEditDetails},"Learn more"))}},{key:"ensureProjectLoaded",value:function(e){var t=g.default.project();t&&e&&t.id===e?this.setState({projectReady:!0}):e&&b.loadProject(e,!1,!0)}},{key:"render",value:function(){if(!this.state.projectReady)return null;p.default.preventIllegalAccess();var e=null,t=g.default.project(),a=(c.default.getUser(),g.default.warning()?l.default.createElement("span",{dangerouslySetInnerHTML:{__html:g.default.warning()}}):null);t.allowedToEdit?t.isEBook&&t.status===k.PROJECT_STATUSES.ONSALE?e=0<this.props.location.pathname.search(d.DetailsPricing)?null:l.default.createElement("span",null,"Your eBook is currently on sale. Note that you may still make changes to the interior, cover, or any of your book details. After you're done with your changes, go to the Review & Publish page and click on the â€œPublish Changesâ€ button. Changes can take up to 24 hours to appear on BN.com."):t.isSPB&&t.showEditModal&&t.status===k.PROJECT_STATUSES.ONSALE&&c.default.hasCustomSamplingPermission(h.EDIT_SPB_RETIRED)&&(e=0<this.props.location.pathname.search(d.Interior)||0<this.props.location.pathname.search(d.Cover)?l.default.createElement("span",null,"If you upload a new interior or cover file, this book will remain on sale with the current file, and the new file will not take effect until you publish changes. ",l.default.createElement("span",{className:"action-text",onClick:this.onViewEditabilityDetails},"More Details")):null):e=t.status===k.PROJECT_STATUSES.CORRECTING?l.default.createElement("span",null,"We have successfully sent your file for correction. It may take up to 48 hours for your corrected file to be resubmitted."):t.isSPB&&t.showEditModal?l.default.createElement("span",null,"To make changes to an on-sale project, you must first take your book off sale. ",l.default.createElement("span",{className:"action-text",onClick:this.onViewEditabilityDetails},"Continue")):t.isEBook?"ERROR"==t.status?l.default.createElement("span",null,"You're currently unable to edit this book."):l.default.createElement("span",null,"Youâ€™re currently unable to edit this book because your book is being processed for sale."):this.getViewNoEditDetails();var n=this.props.location.pathname.split("/")||"root";return l.default.createElement("div",{className:"build-a-book"},l.default.createElement("div",{className:"navigation"},l.default.createElement(E.default,{currentPath:n})),l.default.createElement("div",{className:"bab-content"},l.default.createElement("div",{className:"book-title-container"},l.default.createElement(f.default,null)),l.default.createElement("div",{className:(0,i.default)("sub-navigation-container",{"has-sub-navigation":this.state.subNavigation})},l.default.createElement(S.default,{currentPath:n})),l.default.createElement("div",{className:"section page-scroller",ref:"sectionComponent"},l.default.createElement(m.default,null,l.default.createElement("div",null,l.default.createElement(u.default,{currentPath:n,editabilityMessage:e,warningMessage:a}),l.default.cloneElement(this.props.children,{key:this.props.location.pathname}))))),l.default.createElement(v.default,{project:t,show:this.state.showPublishAlert}))}}])&&w(t.prototype,a),n&&w(t,n),o}();t.default=_},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(34)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(33));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e=this.props.currentPath[3];return r.default.createElement("div",null,this.props.warningMessage&&e===i.Summary&&r.default.createElement(l.default,{messages:[this.props.warningMessage],type:"error"}),!!this.props.editabilityMessage&&r.default.createElement(l.default,{messages:[this.props.editabilityMessage],type:"warning"}))}}])&&s(a.prototype,n),o&&s(a,o),t}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1)),i=o(a(6)),s=o(a(12)),u=n(a(14)),c=(n(a(86)),n(a(10))),d=o(a(8)),f=(o(a(140)),n(a(9)));o(a(64)),n(a(247));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={editing:!1,isEditable:!0,existingTitles:[],selectedTitle:void 0,title:null,valid:!1},t.onChange=t.onChange.bind(b(b(t))),t.onEdit=t.onEdit.bind(b(b(t))),t.onFormValidationChange=t.onFormValidationChange.bind(b(b(t))),t.onProjectChanged=t.onProjectChanged.bind(b(b(t))),t.onSubmit=t.onSubmit.bind(b(b(t))),t.saveProject=t.saveProject.bind(b(b(t))),t.makeClick=t.makeClick.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.onProjectChanged()}},{key:"componentWillMount",value:function(){d.default.addProjectChangedListener(this.onProjectChanged)}},{key:"componentWillUnmount",value:function(){d.default.removeProjectChangedListener(this.onProjectChanged)}},{key:"makeClick",value:function(e){var t=this;if("Enter"===e.key){if(!t.state.isEditable)return;this.setState({editing:!0},function(){setTimeout(function(){t.refs.titleInput.focus(),t.refs.form.validateWithoutCommitting()},200)})}}},{key:"onEdit",value:function(){var e=this;this.state.isEditable&&this.setState({editing:!0},function(){e.refs.titleInput.focus(),e.refs.form.validateWithoutCommitting()})}},{key:"onChange",value:function(e){void 0!==this.state.selectedTitle&&e.newValue!=this.state.selectedTitle.title&&this.setState({selectedTitle:void 0})}},{key:"onFormValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"onProjectChanged",value:function(){this.setState({title:d.default.project().title,isEditable:d.default.project().allowedToEdit})}},{key:"onSubmit",value:function(){var a=this,e=d.default.project(),n=this.refs.form.gather().title,o=e.title;0===n.trim().length?this.refs.titleInput.setValue(o):n.trim()!==o.trim()&&(this.setState({title:n}),1<e.versions?c.showConfirmationModal("Change Book Title?","If you want to continue managing multiple versions of "+o+" as the same book, then the title must match. Would you like to continue?","OK","Cancel",function(e,t){e?a.saveProject(n):a.setState({title:o})}):this.saveProject(n)),this.setState({editing:!1})}},{key:"saveProject",value:function(e){var t=d.default.project();t.title=e,u.updateProject(t,!1,!0)}},{key:"render",value:function(){this.state.title;return r.default.createElement("div",{className:"book-title"},r.default.createElement("h4",{className:(0,l.default)({"not-active":this.state.editing}),onClick:this.onEdit,tabIndex:this.state.isEditable?0:-1,onKeyDown:this.makeClick},this.state.title,this.state.isEditable&&r.default.createElement("div",{onClick:this.onEdit,className:"fa fa-pencil","aria-hidden":"true"})),this.state.editing&&r.default.createElement(i.default,{className:"edit-book-title-form",ref:"form",name:"editBookTitleForm",onValidationChange:this.onFormValidationChange,onSubmit:this.onSubmit},r.default.createElement(s.default,{ref:"titleInput",name:"title",className:"title-control",label:"Book Title",disableValidationMessage:!0,onBlur:this.onSubmit,unboundValue:this.state.title,rules:[f.required(),f.maxLength(120)],maxLength:120})))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n},l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(32));function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={currentChild:t.props.children?r.default.Children.only(t.props.children):null,nextChild:null,changed:!1,animationLength:t.props.animationLength||200,opacity:1},t.queueNextChild=t.queueNextChild.bind(d(d(t))),t.resetView=t.resetView.bind(d(d(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.fadeInComplete()}},{key:"componentWillReceiveProps",value:function(e){var t=!!e.children&&r.default.Children.only(e.children);clearTimeout(this.timeoutID),t&&t.key===this.state.currentChild.key?this.setState({changed:!1,currentChild:t}):this.setState({nextChild:t,changed:!0})}},{key:"componentDidUpdate",value:function(){if(this.state.changed&&!1!==this.state.currentChild){var e,t=1;e=this.state.nextChild||!1===this.state.nextChild?(t=0,this.queueNextChild):this.resetView,this.currentChild.style.opacity=t,this.timeoutID=setTimeout(e,this.state.animationLength)}}},{key:"queueNextChild",value:function(){this.setState({currentChild:this.state.nextChild,nextChild:null,opacity:0})}},{key:"resetView",value:function(){this.setState({opacity:1,changed:!1},function(){l.fadeInComplete()})}},{key:"render",value:function(){var t=this,e=this.state,a=e.opacity,n=e.animationLength,o={opacity:a,transition:"opacity ".concat(n,"ms ease-in")};return r.default.createElement("div",{className:this.props.className},r.default.createElement("div",{ref:function(e){return t.currentChild=e},style:o},this.state.currentChild))}}])&&s(t.prototype,a),n&&s(t,n),o}();o.propTypes={children:r.default.PropTypes.element,animationLength:r.default.PropTypes.number};var f=o;t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(1)),s=o(a(4)),u=n(a(32)),c=(n(a(11)),n(a(10))),d=n(a(14)),f=n(a(83)),p=n(a(33));o(a(8));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n).onClick=t.onClick.bind(g(g(t))),t.onClose=t.onClose.bind(g(g(t))),t.onPublishChanges=t.onPublishChanges.bind(g(g(t))),t.onPutOnSale=t.onPutOnSale.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,r.default.Component),t=o,(a=[{key:"onClick",value:function(){var e=this.props.project;e.showPublishAlert&&this.onPublishChanges(),e.showPutOnSaleAlert&&this.onPutOnSale()}},{key:"onClose",value:function(){d.removePublishAlert()}},{key:"onPublishChanges",value:function(){var a=this.props.project;s.default.getUser();a.isPrintPreOrder()&&a.areAssetsComplete()?c.showFinalFilesModal(a.uploadByDate,function(e,t){e?(d.setSaleStatus(a.id,!0,!0,function(){return l.browserHistory.push("/"+f.Base)}),d.removePublishAlert()):u.go("next")}):(d.removePublishAlert(),d.postChanges(a.id,function(){return c.showNotificationModal("Your changes may take up to 24 hours to appear on BN.com.","Changes Submitted","OK")}))}},{key:"onPutOnSale",value:function(){var a=this.props.project;s.default.getUser();d.removePublishAlert(),a.isPrintPreOrder()&&a.areAssetsComplete()&&a.allowedToPutOnSale?c.showFinalFilesModal(a.uploadByDate,function(e,t){e?d.setSaleStatus(a.id,!0,!0,function(){return l.browserHistory.push("/"+f.Base)}):u.go("next")}):c.showPutOnSaleModal(function(e,t){e&&d.setSaleStatus(a.id,!0,!1,null,function(){return l.browserHistory.push("/"+p.Base+"/"+a.id+"/"+p.Summary)})})}},{key:"render",value:function(){var e,t,a=this.props.project;return a.showPublishAlert&&(e="Publish Changes",t=r.default.createElement("span",null,'Be sure to click "Save & Continue" if you make any additional changes.',r.default.createElement("br",null),'Go to your Review & Publish page to publish or click "Publish Changes" now.')),a.showPutOnSaleAlert&&(e="Put On Sale",t=r.default.createElement("span",null,'Be sure to click "Save & Continue" if you make any additional changes.',r.default.createElement("br",null),'Go to your Review & Publish page to put your book on sale or click "Put On Sale" now.')),r.default.createElement("div",{className:(0,i.default)("publish-alert-container",{show:this.props.show})},r.default.createElement("div",{className:"publish-alert"},r.default.createElement("div",{className:"message"},t),r.default.createElement("div",{className:"button"},r.default.createElement("p",{className:"text-center"},r.default.createElement("button",{className:"btn btn-primary","aria-label":"button",onClick:this.onClick},e))),r.default.createElement("div",{className:"icon-close-modal",onClick:this.onClose})))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1)),i=a(2),s=o(a(4)),u=n(a(32)),c=o(a(50)),d=n(a(33)),f=o(a(8)),p=o(a(1322));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n).state={hover:"",sections:[],user:s.default.getUser(),marketingAdContentIdentifiers:null},t.onRemoveHover=t.onRemoveHover.bind(g(g(t))),t.handleKeyDownLink=t.handleKeyDownLink.bind(g(g(t))),t.updateSectionNavigation=t.updateSectionNavigation.bind(g(g(t))),t.onNavigationChanged=t.onNavigationChanged.bind(g(g(t))),t.onNavigationConfirmed=t.onNavigationConfirmed.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){c.default.addNavigationConfirmedListener(this.onNavigationConfirmed),f.default.addProjectChangedListener(this.updateSectionNavigation),c.default.addStateChangedListener(this.onNavigationChanged)}},{key:"componentDidMount",value:function(){this.onNavigationChanged()}},{key:"componentWillUnmount",value:function(){c.default.removeNavigationConfirmedListener(this.onNavigationConfirmed),f.default.removeProjectChangedListener(this.updateSectionNavigation),c.default.removeStateChangedListener(this.onNavigationChanged)}},{key:"onAddHover",value:function(e){this.setState({hover:e})}},{key:"onRemoveHover",value:function(){this.setState({hover:""})}},{key:"handleKeyDownLink",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"updateSectionNavigation",value:function(){this.setState({sections:c.default.getSectionNavigation()}),this.buildLinks()}},{key:"onNavigationChanged",value:function(e){this.setState({marketingAdContentIdentifiers:c.default.getMarketingAdIdentifiers(),sections:c.default.getSectionNavigation()})}},{key:"onNavigationConfirmed",value:function(e,t){"sectionNavigation"===t&&setTimeout(function(){i.browserHistory.push(e)},0)}},{key:"onSaveBeforeLeaving",value:function(e,t){t||u.onNavigationInitiated(e,"sectionNavigation")}},{key:"buildLinks",value:function(){var a=this;return this.state.sections.map(function(e){var t=null;return null!==e&&null!==e.url&&(t=a.onSaveBeforeLeaving.bind(a,e.url,a.props.currentPath.includes(e.path))),r.default.createElement("div",{className:"section-navigation-link",key:e.key},r.default.createElement(i.Link,{onClick:t,onMouseEnter:a.onAddHover.bind(a,e.key),onMouseLeave:a.onRemoveHover,tabIndex:"0",onKeyDown:a.handleKeyDownLink,className:(0,l.default)({active:a.props.currentPath.includes(e.path),disabled:null===e.url})},r.default.createElement("div",{className:"section-navigation-icon"},r.default.createElement("span",{className:a.state.hover===e.key||a.props.currentPath.includes(e.path)?e.state+"-hover":e.state})),r.default.createElement("div",{className:"section-navigation-text"},e.newTitle)))})}},{key:"render",value:function(){var e=null;return c.default.getShowVendorSection(this.state.user.vendorStatus)&&(e=r.default.createElement("div",{className:"vendor-registration-call-out"},r.default.createElement("h4",null,r.default.createElement("strong",null,"Want to Sell Your Book?"),r.default.createElement("br",null),"Start Your Vendor Registration Now"),r.default.createElement("p",null,"Verification may take up to 72 hours to approve."),r.default.createElement(i.Link,{to:"/"+d.Base+"/"+f.default.project().id+"/"+d.Vendor+"/"+d.VendorPublisher},"Register Now ",r.default.createElement("i",{className:"fa fa-angle-double-right"})))),r.default.createElement("div",{className:"section-navigation-container"},this.buildLinks(),e,r.default.createElement(p.default,{contentIdentifiers:this.state.marketingAdContentIdentifiers,showOnMobile:"true"}))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1)),i=(n(a(28)),o(a(30))),s=n(a(59)),u=o(a(56));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this))||"object"!==c(n)&&"function"!=typeof n?m(a):n).state={content:null,loading:!1},t.onAdContentLoaded=t.onAdContentLoaded.bind(m(m(t))),t.onSiteModuleDisplay=t.onSiteModuleDisplay.bind(m(m(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){i.default.addAdContentLoadedListener(this.onAdContentLoaded),u.default.addSiteModuleDisplayListener(this.onSiteModuleDisplay)}},{key:"componentDidMount",value:function(e){this.updateAdContent(this.props.contentIdentifiers)}},{key:"componentWillReceiveProps",value:function(e){this.setState({newPropsValue:e.contentIdentifiers}),this.updateAdContent(e.contentIdentifiers)}},{key:"componentWillUnmount",value:function(){i.default.removeAdContentLoadedListener(this.onAdContentLoaded),u.default.removeSiteModuleDisplayListener(this.onSiteModuleDisplay)}},{key:"onSiteModuleDisplay",value:function(){this.result3=u.default.getSiteModuleDisplay(),this.setState({siteModuledisplay:this.result3.result3.data})}},{key:"onAdContentLoaded",value:function(){this.setState({loading:!1}),this.updateAdContent(this.props.contentIdentifiers)}},{key:"updateAdContent",value:function(e){var t;if(e&&e.map(function(e){-1!=e.indexOf("ebook")?(-1!=e.indexOf("interior")&&(t="ebook-interior"),-1!=e.indexOf("cover")&&(t="ebook-cover"),-1!=e.indexOf("details")&&(t="ebook-details"),-1!=e.indexOf("summary")&&(t="ebook-review")):(-1!=e.indexOf("book-size-and-type")&&(t="print-size"),-1!=e.indexOf("interior")&&(t="print-interior"),-1!=e.indexOf("cover")&&(t="print-cover"),-1!=e.indexOf("details")&&(t="print-details"),-1!=e.indexOf("summary")&&(t="print-review"))}),null!=t){s.onPageSiteModuleDisplay("LEFT_NAV_BAB",t)}}},{key:"render",value:function(){return"true"===this.props.showOnMobile?"":"true"===this.props.showOnlyOnMobile&&"visible-xs",r.default.createElement("div",null,this.state.siteModuledisplay&&r.default.createElement("div",{className:(0,l.default)("additional marketing-content np-mkt-included-content text-block"),dangerouslySetInnerHTML:{__html:this.state.siteModuledisplay}}))}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(4)),s=n(a(32)),u=o(a(50)),c=n(a(11)),d=(n(a(33)),o(a(8)));n(a(15));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={sectionLinks:null,sampleFlag:!1},t.buildLinks=t.buildLinks.bind(y(y(t))),t.handleKeyDownLink=t.handleKeyDownLink.bind(y(y(t))),t.getNavigation=t.getNavigation.bind(y(y(t))),t.onNavigationChanged=t.onNavigationChanged.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.getNavigation()}},{key:"componentWillMount",value:function(){u.default.addNavigationConfirmedListener(this.onNavigationChanged),u.default.addStateChangedListener(this.getNavigation),u.default.addRefeshSubNavigationListener(this.getNavigation)}},{key:"componentWillUnmount",value:function(){u.default.removeNavigationConfirmedListener(this.onNavigationChanged),u.default.removeStateChangedListener(this.getNavigation),u.default.removeRefeshSubNavigationListener(this.getNavigation)}},{key:"handleKeyDownLink",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onNavigationChanged",value:function(e,t){"sectionSubNavigation"===t&&setTimeout(function(){l.browserHistory.push(e)},0)}},{key:"onSaveBeforeLeaving",value:function(e,t){t||s.onNavigationInitiated(e,"sectionSubNavigation")}},{key:"buildLinks",value:function(){var a=this,e=d.default.project();return"interior"==this.props.currentPath[3]&&this.props.currentPath[2].length<=10?i.default.hasCustomSamplingPermission(c.BAB_CUSTOM_SAMPLE)?"SELECTED"===e.isDefaultSample?this.state.sectionLinks.slice(7,12).map(function(e){var t=null;return e.inactive||(t=a.onSaveBeforeLeaving.bind(a,e.url,a.props.currentPath[4]===e.path)),r.default.createElement("li",{key:e.title},r.default.createElement(l.Link,{onClick:t,onKeyDown:a.handleKeyDownLink,tabIndex:"0",className:a.props.currentPath[4]===e.path?"active":"",disabled:e.inactive},e.title))}):this.state.sectionLinks.slice(2,7).map(function(e){var t=null;return e.inactive||(t=a.onSaveBeforeLeaving.bind(a,e.url,a.props.currentPath[4]===e.path)),r.default.createElement("li",{key:e.title},r.default.createElement(l.Link,{onClick:t,onKeyDown:a.handleKeyDownLink,tabIndex:"0",className:a.props.currentPath[4]===e.path?"active":"",disabled:e.inactive},e.title))}):this.state.sectionLinks.slice(0,2).map(function(e){var t=null;return e.inactive||(t=a.onSaveBeforeLeaving.bind(a,e.url,a.props.currentPath[4]===e.path)),r.default.createElement("li",{key:e.title},r.default.createElement(l.Link,{onClick:t,tabIndex:"0",onKeyDown:a.handleKeyDownLink,className:a.props.currentPath[4]===e.path?"active":"",disabled:e.inactive},e.title))}):this.state.sectionLinks.map(function(e){var t=null;return e.inactive||(t=a.onSaveBeforeLeaving.bind(a,e.url,a.props.currentPath[4]===e.path)),r.default.createElement("li",{key:e.title},r.default.createElement(l.Link,{"aria-disabled":e.inactive,onKeyDown:a.handleKeyDownLink,tabIndex:"0",onClick:t,className:a.props.currentPath[4]===e.path?"active":"",disabled:e.inactive},e.title))})}},{key:"getNavigation",value:function(){var e=u.default.getSectionSubNavigation();this.state.sectionLinks!==e&&this.setState({sectionLinks:e})}},{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement("div",{className:"section-sub-navigation-container"},r.default.createElement("ul",null,this.state.sectionLinks?this.buildLinks():null)))}}])&&p(t.prototype,a),n&&p(t,n),o}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=n(a(33)),i=o(a(8));n(a(15));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,d(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e="/"+l.Base+"/"+i.default.project().id+"/"+l.Cover+"/"+l.CoverUpload;return r.default.createElement("div",null,r.default.cloneElement(this.props.children,{url:e}))}}])&&u(a.prototype,n),o&&u(a,o),t}();t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(13)),y=o(a(0)),b=o(a(1)),g=o(a(47)),v=o(a(6)),E=o(a(1326)),S=o(a(1327)),k=o(a(1328)),P=o(a(1329)),w=o(a(1330)),O=o(a(1331)),C=o(a(1332)),N=o(a(29)),l=n(a(14)),_=n(a(15)),T=o(a(8)),D=o(a(39)),j=o(a(80)),M=o(a(150));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={barcodeToggle:!0,bleedToggle:!0,flapToggle:!0,marginsToggle:!0,sizeToggle:!0,spineToggle:!0,specsMarginTop:0,widthToggle:!0,formattingBleedZone:null,formattingCoverWidth:null,formattingFlapWidth:null,formattingGutter:null,formattingMargin:null,formattingSpineWidth:null,formattingTotalHeight:null,formattingTotalWidth:null,formattingWrap:null},t.onCoverFormattingSpecsLoaded=t.onCoverFormattingSpecsLoaded.bind(d(d(t))),t.onSelectBarcode=t.onSelectBarcode.bind(d(d(t))),t.onSelectBleed=t.onSelectBleed.bind(d(d(t))),t.onSelectFlap=t.onSelectFlap.bind(d(d(t))),t.onSelectMargins=t.onSelectMargins.bind(d(d(t))),t.onSelectSize=t.onSelectSize.bind(d(d(t))),t.onSelectSpine=t.onSelectSpine.bind(d(d(t))),t.onSelectWidth=t.onSelectWidth.bind(d(d(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,y.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var e=T.default.project();this.setState({specsMarginTop:((0,r.default)(this.optionsDiv).outerHeight(!0)-(0,r.default)(this.specsDiv).outerHeight(!0))/2}),(0,r.default)('[data-toggle="popover"]').popover(),e.isEBook||l.getCoverFormattingSpecs(e.id)}},{key:"componentWillMount",value:function(){T.default.addCoverFormattingSpecsLoadedListener(this.onCoverFormattingSpecsLoaded)}},{key:"componentWillUnmount",value:function(){T.default.removeCoverFormattingSpecsLoadedListener(this.onCoverFormattingSpecsLoaded)}},{key:"onCoverFormattingSpecsLoaded",value:function(){var e=T.default.project();this.setState({formattingBleedZone:e.formattingBleedZone,formattingCoverWidth:e.formattingCoverWidth,formattingFlapWidth:e.formattingFlapWidth,formattingGutter:e.formattingGutter,formattingMargin:e.formattingMargin,formattingSpineWidth:e.formattingSpineWidth,formattingTotalHeight:e.formattingTotalHeight,formattingTotalWidth:e.formattingTotalWidth,formattingWrap:e.formattingWrap})}},{key:"onSelectBarcode",value:function(){this.setState({barcodeToggle:!this.state.barcodeToggle})}},{key:"onSelectBleed",value:function(){this.setState({bleedToggle:!this.state.bleedToggle})}},{key:"onSelectFlap",value:function(){this.setState({flapToggle:!this.state.flapToggle})}},{key:"onSelectMargins",value:function(){this.setState({marginsToggle:!this.state.marginsToggle})}},{key:"onSelectSize",value:function(){this.setState({sizeToggle:!this.state.sizeToggle})}},{key:"onSelectSpine",value:function(){this.setState({spineToggle:!this.state.spineToggle})}},{key:"onSelectWidth",value:function(){this.setState({widthToggle:!this.state.widthToggle})}},{key:"render",value:function(){var e,t=this,a=T.default.project();"SOFTCOVER"==a.coverFormatByKey.label&&(e="Paperback"),"Hardcover w/ Printed Case"==a.coverFormatByKey.label&&(e="Hardcover_w_Printed_Case"),"Hardcover w/ Dust Jacket"==a.coverFormatByKey.label&&(e="Hardcover_w_Dust_Jacket");var n="/api/project/"+a.id+"/download/cover-template/"+encodeURIComponent(a.pageSizeByKey.label.replace(/[\",\s]/g,"").replace(/\./g,"-")+"_"+e+"_Cover_Template");if(a.isEBook||!a.isEBook&&!a.coverType)return null;var o,r,l,i,s,u,c=null,d=null,f=null,p=null,m=null,h=null;return s=a.coverType===_.COVER_TYPES.SEPARATE?(r="Since you are uploading a front and back cover separately, we'll generate white front and back flaps and will stitch these to the front and back covers. Please note that the front and back flaps will be left blank in this case.",l="front & back cover files",i=this.state.formattingCoverWidth,"We'll help create your book's spine design for you. You will be able to pick out the color of your spine and the text you would like to include. Books with a page count of 50 pages or fewer cannot contain spine text."):(r="Dust jackets have an additional "+this.state.formattingFlapWidth+'" area that wraps around the front and back hardcover boards of the book.',l="full cover file",i=this.state.formattingTotalWidth,"The width of your spine is based on your book's page count. Books with a page count of 50 pages or fewer cannot contain spine text."),u={barcode:a.isSPB?"We add a barcode with your ISBN to the bottom right-hand side of your back cover, so be sure not to put important content in this area.":"Your print book for personal use will have a white box on the bottom right-hand corner where a barcode will go. This barcode will appear on your final book but is for internal purposes only.",bleed:"The bleed value is the margin beyond the edge of the page to which the image should extend in order to ensure that printing consistently reaches the edge of the page. If you don't want aspects of an image cut off, don't put them on the very edge of the page in the bleed zone.",flap:r,margins:"All background color and images should extend throughout this area. Please note that any important images and text that fall within the margin are at risk of being trimmed.",size:"The size of your "+l+" should be "+i+'" x '+this.state.formattingTotalHeight+'". Make sure that no images or text falls outside those dimensions.',spine:s,width:"The width of your front and back cover files should each be "+this.state.formattingTotalWidth+'" and does not include the spine.'},this.state.barcodeToggle&&(c=y.default.createElement(E.default,{coverType:a.coverType,gutter:this.state.formattingGutter,coverFormat:a.coverFormatByKey})),this.state.bleedToggle&&(d=y.default.createElement(S.default,{coverType:a.coverType,coverFormat:a.coverFormatByKey,bleed:this.state.formattingBleedZone})),this.state.flapToggle&&(f=y.default.createElement(k.default,{coverType:a.coverType,coverFormat:a.coverFormatByKey,flap:this.state.formattingFlapWidth})),this.state.marginsToggle&&(p=y.default.createElement(P.default,{coverType:a.coverType,coverFormat:a.coverFormatByKey,margin:this.state.formattingMargin,gutter:this.state.formattingGutter,wrap:this.state.formattingWrap})),this.state.sizeToggle&&(m=y.default.createElement(w.default,{coverType:a.coverType,coverFormat:a.coverFormatByKey,height:this.state.formattingTotalHeight,width:this.state.formattingTotalWidth})),this.state.spineToggle&&(o=y.default.createElement(O.default,{coverType:a.coverType,coverFormat:a.coverFormatByKey,spine:this.state.formattingSpineWidth})),this.state.widthToggle&&(h=y.default.createElement(C.default,{coverType:a.coverType,coverFormat:a.coverFormatByKey,width:this.state.formattingCoverWidth})),y.default.createElement("div",null,y.default.createElement("header",null,y.default.createElement("h1",null,"How to Format Your Cover ",a.coverType===_.COVER_TYPES.SEPARATE?"Files":"File"),y.default.createElement("p",null,"Hereâ€™s how to correctly format your cover for book size and type: ",y.default.createElement("strong",null,a.pageSizeByKey.label," ",a.coverFormatByKey.label),y.default.createElement("br",null),y.default.createElement("small",null,"For more details, download our ",y.default.createElement("a",{href:"http://www2.nookassets.com/npassets-spb/pod/resources/BN-Press-Formatting-Guide.pdf",target:"_blank"},"Formatting Guide")," or our ",y.default.createElement("a",{href:a.coverFormatByKey.quickGuide,target:"_blank"},"Quick Guide"),". If you need a template, download our ",y.default.createElement("a",{href:n,download:!0},"Cover Template")))),y.default.createElement(M.default,{url:this.props.url,plural:a.coverType===_.COVER_TYPES.SEPARATE}),y.default.createElement("section",null,y.default.createElement("div",{className:"panel"},y.default.createElement("div",{className:"panel-body cover-formatting"},y.default.createElement("div",{className:(0,b.default)("left",a.coverFormatByKey.id),ref:function(e){return t.optionsDiv=e}},y.default.createElement("h2",null,"Formatting"),y.default.createElement("p",null,"For a ",a.coverFormatByKey.label,", set your cover size to ",a.coverType===_.COVER_TYPES.SEPARATE?this.state.formattingCoverWidth:this.state.formattingTotalWidth,'" x ',this.state.formattingTotalHeight,'". The image to the right illustrates your book type. Toggle the size specs on and off using the checkboxes below.'),y.default.createElement(v.default,{className:"cover-formatting-form",name:"interiorFormatting"},y.default.createElement("div",{className:"checkbox-tooltip"},y.default.createElement(g.default,{name:"size",className:"size-checkbox",label:"Cover Size",initValue:!0,onChange:this.onSelectSize}),y.default.createElement(j.default,{info:!0,text:u.size})),y.default.createElement("div",{className:"checkbox-tooltip"},y.default.createElement(g.default,{name:"width",className:"width-checkbox",label:"Cover Width",initValue:!0,onChange:this.onSelectWidth}),y.default.createElement(j.default,{info:!0,text:u.width})),y.default.createElement("div",{className:"checkbox-tooltip"},y.default.createElement(g.default,{name:"margins",className:"margins-checkbox",label:"Margins",initValue:!0,onChange:this.onSelectMargins}),y.default.createElement(j.default,{info:!0,text:u.margins})),y.default.createElement("div",{className:"checkbox-tooltip"},y.default.createElement(g.default,{name:"bleed",className:"bleed-checkbox",label:"Bleed",initValue:!0,onChange:this.onSelectBleed}),y.default.createElement(j.default,{info:!0,text:u.bleed})),y.default.createElement("div",{className:"checkbox-tooltip"},y.default.createElement(g.default,{name:"barcode",className:"barcode-checkbox",label:"Barcode",initValue:!0,onChange:this.onSelectBarcode}),y.default.createElement(j.default,{info:!0,text:u.barcode})),a.coverType===_.COVER_TYPES.FULL&&y.default.createElement("div",{className:"checkbox-tooltip"},y.default.createElement(g.default,{name:"spine",className:"spine-checkbox",label:"Spine",initValue:!0,onChange:this.onSelectSpine}),y.default.createElement(j.default,{info:!0,text:u.spine})),a.coverFormatByKey.key===_.COVER_FORMAT.HARDCOVER_JACKET&&y.default.createElement("div",{className:"checkbox-tooltip"},y.default.createElement(g.default,{name:"flap",className:"flap-checkbox",label:"Flap",initValue:!0,onChange:this.onSelectFlap}),y.default.createElement(j.default,{info:!0,text:u.flap}))),y.default.createElement("p",null,y.default.createElement("strong",null,"Need more information? ",y.default.createElement("a",{href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5357997658139-Create-a-PDF-Cover",target:"_blank"},"Show me how ",y.default.createElement("i",{className:"fa fa-angle-double-right"}))))),y.default.createElement("div",{className:(0,b.default)("right",a.coverFormatByKey.id),ref:function(e){return t.specsDiv=e},style:{marginTop:this.state.specsMarginTop,marginLeft:a.coverFormatByKey.key===_.COVER_FORMAT.HARDCOVER_JACKET?-30:0}},c,d,p,m,a.coverType===_.COVER_TYPES.FULL?o:null,h,a.coverFormatByKey.key===_.COVER_FORMAT.HARDCOVER_JACKET&&y.default.createElement("div",null,f),y.default.createElement("div",{className:"cover-formatting-bg"},y.default.createElement("img",{alt:"cover formatting section",src:a.coverFormatByKey.coverImage[a.coverType].base})))))),y.default.createElement(N.default,{buttonText:"Continue"}),y.default.createElement(D.default,null))}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e=this.props,t=e.coverFormat,a=e.coverType,n=e.gutter;return r.default.createElement("div",{className:"cover-formatting-section barcode"},r.default.createElement("div",{className:(0,l.default)("barcode-container",t.key.toLowerCase(),a)},r.default.createElement("div",{className:"spec spec-width-height"},'1.5" x 1.125"'),n&&r.default.createElement("div",{className:"spec spec-right"},n,'"'),r.default.createElement("div",{className:"spec spec-bottom"},'0.25"')),r.default.createElement("div",{className:"cover-formatting-section-bg"},r.default.createElement("img",{alt:"cover formatting section",src:t.coverImage[a].barcode})))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e=this.props,t=e.bleed,a=e.coverFormat,n=e.coverType;return r.default.createElement("div",{className:"cover-formatting-section bleed"},null!==t&&r.default.createElement("div",{className:(0,l.default)("bleed-container",a.key.toLowerCase())},r.default.createElement("div",{className:"spec spec-top"},t,'"'),r.default.createElement("div",{className:"spec spec-right"},t,'"'),r.default.createElement("div",{className:"spec spec-bottom"},t,'"'),r.default.createElement("div",{className:"spec spec-left"},t,'"')),r.default.createElement("div",{className:"cover-formatting-section-bg"},r.default.createElement("img",{alt:"cover formatting section",src:a.coverImage[n].bleed})))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1));!function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(a(15));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e=this.props,t=e.coverFormat,a=e.coverType,n=e.flap;return r.default.createElement("div",{className:"cover-formatting-section flap"},null!==n&&r.default.createElement("div",{className:(0,l.default)("flap-container",t.key.toLowerCase())},r.default.createElement("div",{className:"spec spec-left"},n,'"'),r.default.createElement("div",{className:"spec spec-right"},n,'"')),r.default.createElement("div",{className:"cover-formatting-section-bg"},r.default.createElement("img",{alt:"cover formatting section",src:t.coverImage[a].flap})))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),i=n(a(1));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,l.default.Component),a=t,(n=[{key:"render",value:function(){var e=this.props,t=e.coverFormat,a=e.coverType,n=e.gutter,o=e.margin,r=e.wrap;return l.default.createElement("div",{className:"cover-formatting-section margins"},null!==o&&l.default.createElement("div",{className:(0,i.default)("margins-container left-margin ",t.key.toLowerCase(),a)},l.default.createElement("div",{className:"spec spec-top"},o,'"'),l.default.createElement("div",{className:"spec spec-right"},n,'"'),l.default.createElement("div",{className:"spec spec-bottom"},o,'"'),l.default.createElement("div",{className:"spec spec-left"},r,'"')),null!==o&&l.default.createElement("div",{className:(0,i.default)("margins-container right-margin ",t.key.toLowerCase(),a)},l.default.createElement("div",{className:"spec spec-top"},o,'"'),l.default.createElement("div",{className:"spec spec-right"},r,'"'),l.default.createElement("div",{className:"spec spec-bottom"},o,'"'),l.default.createElement("div",{className:"spec spec-left"},n,'"')),l.default.createElement("div",{className:"cover-formatting-section-bg"},l.default.createElement("img",{alt:"cover formatting section",src:t.coverImage[a].margins})))}}])&&r(a.prototype,n),o&&r(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(15));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e=this.props,t=e.coverFormat,a=e.coverType,n=e.height,o=e.width;return r.default.createElement("div",{className:"cover-formatting-section page-size"},null!==n&&r.default.createElement("div",{className:(0,l.default)("page-size-container",t.key.toLowerCase(),a)},a===i.COVER_TYPES.FULL&&r.default.createElement("div",{className:"horizontal-container"},r.default.createElement("div",{className:"width"},o,'"')),r.default.createElement("div",{className:"vertical-container"},r.default.createElement("div",{className:"height"},n,'"'))),r.default.createElement("div",{className:"cover-formatting-section-bg"},r.default.createElement("img",{alt:"cover formatting section",src:t.coverImage[a].pageSize})))}}])&&s(a.prototype,n),o&&s(a,o),t}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e=this.props,t=e.coverFormat,a=e.coverType,n=e.spine;return r.default.createElement("div",{className:"cover-formatting-section spine"},null!==n&&r.default.createElement("div",{className:(0,l.default)("spine-container",t.key.toLowerCase())},n,'"'),r.default.createElement("div",{className:"cover-formatting-section-bg"},r.default.createElement("img",{alt:"cover formatting section",src:t.coverImage[a].spine})))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(15));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e=this.props,t=e.coverFormat,a=e.coverType,n=e.width;return r.default.createElement("div",{className:"cover-formatting-section width"},null!==n&&r.default.createElement("div",{className:(0,l.default)("width-container",t.key.toLowerCase())},r.default.createElement("div",{className:"spec spec-left"},n,'"'),a===i.COVER_TYPES.SEPARATE&&r.default.createElement("div",{className:"spec spec-right"},n,'"')),r.default.createElement("div",{className:"cover-formatting-section-bg"},r.default.createElement("img",{alt:"cover formatting section",src:t.coverImage[a].width})))}}])&&s(a.prototype,n),o&&s(a,o),t}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(13)),l=n(a(0)),i=n(a(29)),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(15)),u=n(a(8)),c=n(a(39)),d=n(a(150));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=p(this,m(a).call(this,e))).state={specsMarginTop:0},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,l.default.Component),t=a,(n=[{key:"componentDidMount",value:function(){this.setState({specsMarginTop:((0,r.default)(this.optionsDiv).outerHeight(!0)-(0,r.default)(this.specsDiv).outerHeight(!0))/2})}},{key:"render",value:function(){var e,t=this,a=u.default.project();"SOFTCOVER"==a.coverFormatByKey.label&&(e="Paperback"),"Hardcover w/ Printed Case"==a.coverFormatByKey.label&&(e="Hardcover_w_Printed_Case"),"Hardcover w/ Dust Jacket"==a.coverFormatByKey.label&&(e="Hardcover_w_Dust_Jacket");var n="/api/project/"+a.id+"/download/cover-template/"+encodeURIComponent(a.pageSizeByKey.label.replace(/[\",\s]/g,"").replace(/\./g,"-")+"_"+e+"_Cover_Template");return a.isEBook||!a.isEBook&&!a.coverType?null:l.default.createElement("div",null,l.default.createElement("header",null,l.default.createElement("h1",null,"How to Prepare Your Cover Images"),l.default.createElement("p",null,"For more details, download our ",l.default.createElement("a",{href:"http://www2.nookassets.com/npassets-spb/pod/resources/BN-Press-Formatting-Guide.pdf",target:"_blank",wnload:!0},"Formatting Guide")," or our ",l.default.createElement("a",{href:a.coverFormatByKey.quickGuide,target:"_blank"},"Quick Guide"),". If you need a template, download our ",l.default.createElement("a",{href:n,download:!0},"Cover Template"),".")),l.default.createElement(d.default,{url:this.props.url,plural:a.coverType===s.COVER_TYPES.SEPARATE}),l.default.createElement("section",null,l.default.createElement("div",{className:"panel"},l.default.createElement("div",{className:"panel-body cover-images"},l.default.createElement("div",{className:"left",ref:function(e){return t.optionsDiv=e}},l.default.createElement("h2",null,"Images"),l.default.createElement("p",null,"For your cover design to go to the edges, some of it will need to be trimmed off. Use high resolution images (at least 300 DPI) for crisp-looking graphics."),l.default.createElement("p",null,"Caution: Images taken from the web are usually a much lower resolution."),l.default.createElement("p",null,l.default.createElement("strong",null,"Need more information? ",l.default.createElement("a",{href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5357997658139-Create-a-PDF-Cover",target:"_blank"},"Show me how ",l.default.createElement("i",{className:"fa fa-angle-double-right"}))))),l.default.createElement("div",{className:"right",ref:function(e){return t.specsDiv=e},style:{marginTop:this.state.specsMarginTop}},l.default.createElement("img",{alt:"cover images",src:"img/buildabook/cover-interior/hi-res-images-foldonly.png",width:"500",height:"375"}))))),l.default.createElement(i.default,{buttonText:"Continue"}),l.default.createElement(c.default,null))}}])&&f(t.prototype,n),o&&f(t,o),a}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(13)),l=n(a(0)),i=n(a(29)),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(15)),u=n(a(8)),c=n(a(39)),d=n(a(150));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=p(this,m(a).call(this,e))).state={specsMarginTop:0},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,l.default.Component),t=a,(n=[{key:"componentDidMount",value:function(){this.setState({specsMarginTop:((0,r.default)(this.optionsDiv).outerHeight(!0)-(0,r.default)(this.specsDiv).outerHeight(!0))/2})}},{key:"render",value:function(){var e,t=this,a=u.default.project();"SOFTCOVER"==a.coverFormatByKey.label&&(e="Paperback"),"Hardcover w/ Printed Case"==a.coverFormatByKey.label&&(e="Hardcover_w_Printed_Case"),"Hardcover w/ Dust Jacket"==a.coverFormatByKey.label&&(e="Hardcover_w_Dust_Jacket");var n="/api/project/"+a.id+"/download/cover-template/"+encodeURIComponent(a.pageSizeByKey.label.replace(/[\",\s]/g,"").replace(/\./g,"-")+"_"+e+"_Cover_Template");return a.isEBook||!a.isEBook&&!a.coverType?null:l.default.createElement("div",null,l.default.createElement("header",null,l.default.createElement("h1",null,"How to Prepare Your Cover Fonts"),l.default.createElement("p",null,"For more details, download our ",l.default.createElement("a",{href:"http://www2.nookassets.com/npassets-spb/pod/resources/BN-Press-Formatting-Guide.pdf",target:"_blank"},"Formatting Guide")," or our ",l.default.createElement("a",{href:a.coverFormatByKey.quickGuide,target:"_blank"},"Quick Guide"),". If you need a template, download our ",l.default.createElement("a",{href:n,download:!0},"Cover Template"),".")),l.default.createElement(d.default,{url:this.props.url,plural:a.coverType===s.COVER_TYPES.SEPARATE}),l.default.createElement("section",null,l.default.createElement("div",{className:"panel"},l.default.createElement("div",{className:"panel-body cover-fonts"},l.default.createElement("div",{className:"left",ref:function(e){return t.optionsDiv=e}},l.default.createElement("h2",null,"Embedded Fonts"),l.default.createElement("p",null,"Usually, fonts automatically embed in a PDF."),l.default.createElement("p",null,"However, when using Microsoft Word on a PC, you need to change your settings to enable embedded fonts."),l.default.createElement("p",null,l.default.createElement("strong",null,"Need more information? ",l.default.createElement("a",{href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5357997658139-Create-a-PDF-Cover",target:"_blank"},"Show me how ",l.default.createElement("i",{className:"fa fa-angle-double-right"}))))),l.default.createElement("div",{className:"right",ref:function(e){return t.specsDiv=e},style:{marginTop:this.state.specsMarginTop}},l.default.createElement("img",{alt:"cover fonts",src:"img/buildabook/cover-interior/embedded-fonts.png",width:"500",height:"310"}))))),l.default.createElement(i.default,{buttonText:"Continue"}),l.default.createElement(c.default,null))}}])&&f(t.prototype,n),o&&f(t,o),a}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(13)),l=n(a(0)),i=n(a(29)),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(15)),u=n(a(8)),c=n(a(39)),d=n(a(150));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=p(this,m(a).call(this,e))).state={specsMarginTop:0},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,l.default.Component),t=a,(n=[{key:"componentDidMount",value:function(){this.setState({specsMarginTop:((0,r.default)(this.optionsDiv).outerHeight(!0)-(0,r.default)(this.specsDiv).outerHeight(!0))/2})}},{key:"render",value:function(){var t=this,e=u.default.project();return e.isEBook||!e.isEBook&&!e.coverType?null:l.default.createElement("div",null,l.default.createElement("header",null,l.default.createElement("h1",null,"How to Save Your Cover ",e.coverType===s.COVER_TYPES.SEPARATE?"Files":"File"),l.default.createElement("p",null,"Just save your files in PDF format and then youâ€™ll be ready to upload them.")),l.default.createElement(d.default,{url:this.props.url,plural:e.coverType===s.COVER_TYPES.SEPARATE}),l.default.createElement("section",null,l.default.createElement("div",{className:"panel"},l.default.createElement("div",{className:"panel-body cover-file-type"},l.default.createElement("div",{className:"left",ref:function(e){return t.optionsDiv=e}},l.default.createElement("h2",null,"File Type"),l.default.createElement("p",null,"Be sure to save your file in PDF format."),l.default.createElement("p",null,l.default.createElement("strong",null,"Need more information? ",l.default.createElement("a",{href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5357997658139-Create-a-PDF-Cover",target:"_blank"},"Show me how ",l.default.createElement("i",{className:"fa fa-angle-double-right"}))))),l.default.createElement("div",{className:"right",ref:function(e){return t.specsDiv=e},style:{marginTop:this.state.specsMarginTop}},l.default.createElement("img",{alt:"cover file type",src:"img/buildabook/cover-interior/file-type.png",width:"500",height:"310"}))))),l.default.createElement(i.default,{buttonText:"Continue"}),l.default.createElement(c.default,null))}}])&&f(t.prototype,n),o&&f(t,o),a}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(a(0)),l=u(a(1)),c=u(a(4)),o=n(a(10)),i=n(a(25)),s=u(a(29)),d=u(a(8)),f=n(a(32)),p=n(a(14)),m=n(a(15)),h=u(a(3)),y=u(a(217)),b=n(a(218)),g=u(a(39));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=function(e){function u(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a=this,t=!(n=S(u).call(this,e))||"object"!==v(n)&&"function"!=typeof n?P(a):n;var o=d.default.project(),r=c.default.getUser(),l=b.browserCanViewPdf(),i=o.isPrintPreOrder(),s=o.coverBackApproved&&o.coverFrontApproved||i&&!o.interiorApproved&&o.coverTempApproved||o.coverFullApproved;return t.state={isPreOrder:i,loaded:!o.isEBook&&!l,approved:s,checked:s,canShowPdf:l,cacheBusta:(new Date).getTime(),initialChecked:s,activeTab:O[0].value,ownrights:"POD"!=o.type||(o.hasCopyRightFull?o.hasCopyRightFull:o.hasCopyRightFront),XUserId:r.customerId},t.onApproveChanged=t.onApproveChanged.bind(P(P(t))),t.hasFormChanged=t.hasFormChanged.bind(P(P(t))),t.onPreviewLoaded=t.onPreviewLoaded.bind(P(P(t))),t.onProjectChanged=t.onProjectChanged.bind(P(P(t))),t.onSubmit=t.onSubmit.bind(P(P(t))),t.onTabChange=t.onTabChange.bind(P(P(t))),t.onOwnRightChanged=t.onOwnRightChanged.bind(P(P(t))),t.makeClick=t.makeClick.bind(P(P(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(u,r.default.Component),t=u,(a=[{key:"componentDidMount",value:function(){var e=this;d.default.project().isEBook||b.supportsPdfOnLoadEvent()||(this.loadTimeout=setTimeout(function(){e.onPreviewLoaded()},2e3))}},{key:"componentWillMount",value:function(){d.default.addProjectChangedListener(this.onProjectChanged)}},{key:"componentWillUnmount",value:function(){d.default.removeProjectChangedListener(this.onProjectChanged)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"hasFormChanged",value:function(){return{unChanged:this.state.initialChecked===this.state.checked,secondaryReason:!this.state.checked,title:"Your Cover Is Not Approved",message:"You still need to approve your Cover. If you leave this page now, you'll need to return later to approve it. Do you want to leave this page without approving?",leave:"Yes, Leave Page",stay:"No, Stay on Page"}}},{key:"onApproveChanged",value:function(){this.setState({checked:this.refs.approve.checked})}},{key:"onOwnRightChanged",value:function(){this.setState({ownrights:this.refs.ownrights.checked})}},{key:"onPreviewLoaded",value:function(){this.loadTimeout&&(clearTimeout(this.loadTimeout),this.loadTimeout=null),this.setState({loaded:!0})}},{key:"onProjectChanged",value:function(){var a=d.default.project();this.state.isPreOrder&&a.interiorApproved&&(a.allowedToPutOnSale||a.allowedToPostChanges)?setTimeout(function(){o.showFinalFilesModal(a.uploadByDate,function(e,t){e?p.setSaleStatus(a.id,!0,!0,function(){return f.go("next")}):f.go("next")})},0):setTimeout(function(){f.go("next")},0)}},{key:"onSubmit",value:function(){var e=d.default.project();c.default.getUser();if(this.state.approved&&(e.hasCopyRightFull||e.hasCopyRightFront))f.go("next");else if(e.isEBook){var t=e.clone();t.coverFullApproved=!0,p.updateProject(t,!0,!0)}else{var a=this.state.isPreOrder&&!e.interiorApproved?m.SPB_PRE_ORDER_COVER:m.LSI_COVER;p.approveCover(e.id,a,!1,!0)}var n={eventInfo:{eventName:"Review Your Cover File Continue Click",eventAction:"reviewYourCoverClick",timeStamp:new Date},category:{primaryCategory:"Build A Book"}};i.omnitureActionInvoked(n,"onReviewYourCoverClick")}},{key:"onTabChange",value:function(e){this.setState({activeTab:e.value})}},{key:"render",value:function(){var e=this,t=d.default.project(),a=t.isEBook,n=t.type,o=this.state.isPreOrder&&!t.interiorApproved;return r.default.createElement("div",{className:"review"},r.default.createElement("header",null,r.default.createElement("h1",null,"Review Your Cover File"),(a||o)&&r.default.createElement("div",null,r.default.createElement("p",null,"Your cover file has been successfully uploaded!",r.default.createElement("br",null),"Please review before continuing.")),!a&&!o&&r.default.createElement("div",null,r.default.createElement("p",null,"Please review the proof below or download a digital proof to review your file before continuing.",r.default.createElement("br",null),"Before approving, please ensure your cover adheres to these guidelines:"),r.default.createElement("div",{className:"instructions"},r.default.createElement("p",null,"1. Don't put images in the bleed area (shown by red dotted lines ",r.default.createElement("img",{src:"img/buildabook/cover/bleed.png",alt:"red dotted lines"})," below)."),r.default.createElement("p",null,"2. Make sure that the spine text does not hang over the bleed area. Books with a page count below 48 cannot contain spine text."),r.default.createElement("p",null,"3. The blue dotted lines ",r.default.createElement("img",{src:"img/buildabook/cover/margin.png",alt:"blue dotted lines"}),' represent the 0.25" recommended margin. All text, images, logos, and the barcode must remain inside the margin.'),r.default.createElement("p",null,"4. The orange dotted lines ",r.default.createElement("img",{src:"img/buildabook/cover/barcode.png",alt:"orange dotted lines"})," represents the area that the barcode with ISBN will be printed."),t.coverFormat===m.COVER_FORMAT.HARDCOVER_JACKET&&r.default.createElement("p",null,"5. The red overlay ",r.default.createElement("img",{src:"img/buildabook/cover/red_overlay.jpg"})," represents the areawhere the dust jacket flap wraps around the book."),r.default.createElement("p",null,"*Dotted lines are print zone markings and will not appear on your final book cover.")),r.default.createElement("div",{className:"upload-button"},r.default.createElement("div",{className:"centered"},r.default.createElement("a",{type:"button",className:"btn btn-progress",href:"/api/project/"+t.id+"/download/cover?t="+this.state.cacheBusta,target:"_blank"},"Download Cover")))),a&&!t.interiorContainsCover&&r.default.createElement("div",{className:"upload-button"},r.default.createElement("div",{className:"centered"},r.default.createElement("a",{type:"button",className:"btn btn-progress",href:"/api/project/"+t.id+"/download/interior?t="+this.state.cacheBusta,target:"_blank"},"Download ePub")))),r.default.createElement("section",{className:"iframe-container"},!t.isEBook&&this.renderTabs(),!t.isEBook&&this.renderTabContents(),r.default.createElement("div",{className:(0,l.default)({ebook:t.isEbook,preview:t.isEBook&&!t.interiorContainsCover||!t.isEbook,show:this.state.activeTab===O[0].value})},!this.state.loaded&&r.default.createElement("div",{className:"spinner-area"},t.isEBook&&!t.interiorContainsCover&&r.default.createElement(h.default,{top:180,spinnerTextStyle:{margin:"10px auto"},message:"It may take a moment to load your preview. Please do not refresh this page.<br/><br/>You can also download a copy of your file to review by clicking â€œDownload ePubâ€ above."}),!t.isEBook&&r.default.createElement(h.default,{top:180})),this.renderPreview())),r.default.createElement("div",{className:"page-buttons"},"POD"==n&&r.default.createElement("div",{className:"approve approve_ownright"},r.default.createElement("input",{ref:"ownrights",id:"ownrights",type:"checkbox",className:"big-checkbox",tabIndex:"-1",onChange:this.onOwnRightChanged,checked:this.state.ownrights,disabled:this.state.approved&&this.state.ownrights}),r.default.createElement("label",{tabIndex:this.state.approved&&this.state.ownrights?"-1":"0",onKeyDown:this.makeClick,htmlFor:"ownrights"},"By submitting this content, I certify that it is not subject to any copyright or other proprietary rights restrictions, or if subject to any such restrictions, the owner or licensor of the content has given express authorization for me to distribute such content.",r.default.createElement("span",{className:"icon-info-color-blue"},"Â ",r.default.createElement("a",{title:"see more",href:"https://help.barnesandnoble.com/app/answers/detail/a_id/4423",target:"_blank",className:"icon-info icon-info-style"})))),r.default.createElement("div",{className:"POD"==n?" approve approve_down_cover":"approve"},r.default.createElement("input",{ref:"approve",id:"approve",type:"checkbox",className:"big-checkbox",tabIndex:"-1",onChange:this.onApproveChanged,checked:this.state.checked,disabled:this.state.approved}),r.default.createElement("label",{htmlFor:"approve",tabIndex:this.state.approved?"-1":"0",onKeyDown:this.makeClick},"I have reviewed and approved my cover.")),r.default.createElement(s.default,{disableNext:!this.state.checked||!this.state.ownrights,next:this.onSubmit})),r.default.createElement(g.default,{data:function(){return e.hasFormChanged()}}))}},{key:"renderTabs",value:function(){var t=this,e=O.map(function(e){return t.renderTab(e)});return r.default.createElement("div",{className:"navigation-container"},r.default.createElement("ul",null,r.default.createElement("li",null,"Review:"),e))}},{key:"renderTab",value:function(e){var t=this,a=d.default.project();return e.dustJacketOnly&&a.coverFormat!==m.COVER_FORMAT.HARDCOVER_JACKET?null:r.default.createElement("li",{key:e.value},r.default.createElement("a",{className:(0,l.default)({active:this.state.activeTab===e.value}),onClick:function(){return t.onTabChange(e)}},e.label))}},{key:"renderTabContents",value:function(){var t,a=this,n=d.default.project();return O.map(function(e){if(e.dustJacketOnly&&n.coverFormat!==m.COVER_FORMAT.HARDCOVER_JACKET)return null;if(e.value===O[0].value)return null;"BACK_COVER"===e.value&&null!=n.isbn&&(t=n.getBookDimensions().width/2+15+"px");r.default.createElement("img",{className:"img-responsive",src:e.src.replace("{projectId}",n.id)+"?t="+a.state.cacheBusta});return r.default.createElement("div",{className:(0,l.default)("preview","static-content",{show:a.state.activeTab===e.value}),key:e.value+"Image",style:{position:"relative"}},r.default.createElement("img",{className:"img-responsive",src:e.src.replace("{projectId}",n.id)+"?t="+a.state.cacheBusta,alt:e.label}),"BACK_COVER"===e.value&&null!=n.isbn&&r.default.createElement("div",{className:"barcode-disclaimer",style:{left:"calc(50% + "+t+")"}},"This barcode image is for layout purposes only and may not be clearly visible."))})}},{key:"renderPreview",value:function(){var e=d.default.project(),t="/api/project/"+e.id+"/inline/cover?";this.state.isPreOrder&&!e.interiorApproved&&(t+="type="+m.SPB_PRE_ORDER_COVER+"&");var a=r.default.createElement("div",{className:"ebook-cover-preview"},r.default.createElement("img",{className:"ebook-cover",alt:"cover-image",src:t+"t="+this.state.cacheBusta,onLoad:this.onPreviewLoaded}));return e.isEBook?e.interiorContainsCover?a:r.default.createElement(y.default,{XUserId:this.state.XUserId,onLoaded:this.onPreviewLoaded}):this.state.canShowPdf?this.state.isPreOrder&&!e.interiorApproved?a:r.default.createElement("iframe",{src:t+"t="+this.state.cacheBusta+"#page=1",name:"review_iframe",id:"review_iframe",width:"100%",height:"100%",onLoad:this.onPreviewLoaded,title:"Preview Cover"}):r.default.createElement("div",{className:"no-viewer-message"},"We are unable to display your cover.",r.default.createElement("br",null),"Please download your cover and review before approving.")}}])&&E(t.prototype,a),n&&E(t,n),u}();t.default=w;var O=[{value:"FULL_COVER",label:"Full Cover"},{value:"BACK_FLAP",label:"Back Flap",src:"/api/project/{projectId}/element/BACK_FLAP",dustJacketOnly:!0},{value:"BACK_COVER",label:"Back Cover",src:"/api/project/{projectId}/element/BACK_COVER"},{value:"SPINE",label:"Spine",src:"/api/project/{projectId}/element/SPINE"},{value:"FRONT_COVER",label:"Front Cover",src:"/api/project/{projectId}/element/FRONT_COVER"},{value:"FRONT_FLAP",label:"Front Flap",src:"/api/project/{projectId}/element/FRONT_FLAP",dustJacketOnly:!0}]},function(e,n,r){"use strict";(function(l){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=t(r(0)),o=(t(r(1)),r(597),t(r(50))),s=e(r(32)),u=t(r(1492)),c=t(r(631)),d=t(r(6)),f=(e(r(99)),t(r(12))),p=e(r(10)),m=t(r(29)),h=e(r(14)),y=t(r(8)),b=(t(r(27)),e(r(9))),g=t(r(23)),v=t(r(39));function e(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function t(e){return e&&e.__esModule?e:{default:e}}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=k(r).call(this,e))||"object"!==E(n)&&"function"!=typeof n?w(a):n;var o=y.default.project();return t.isThickEnoughForTitle=48<=+o.pageCount,t.maxPreviewImageWidth=254,t.previewDPI=72,t.fontOptions=[{value:"Archivo Narrow",label:"Archivo"},{value:"BioRhyme",label:"BioRhyme"},{value:"Lato",label:"Lato"},{value:"Libre Baskerville",label:"Libre Baskerville"},{value:"Poppins",label:"Poppins"}],t.state={formValid:!1,initialSelected:o.spineColor,selected:o.spineColor,busy:!1,spineColor:o.spineColor?o.spineColor:"#ffffff",spineFont:o.spineFont,spineFontColor:o.spineFontColor?o.spineFontColor:"#000000"},t.getHeightOffset=t.getHeightOffset.bind(w(w(t))),t.hasFormChanged=t.hasFormChanged.bind(w(w(t))),t.loadPreviewCanvas=t.loadPreviewCanvas.bind(w(w(t))),t.setFormValue=t.setFormValue.bind(w(w(t))),t.onCoverGenerationComplete=t.onCoverGenerationComplete.bind(w(w(t))),t.onCoverGenerationError=t.onCoverGenerationError.bind(w(w(t))),t.onSubmit=t.onSubmit.bind(w(w(t))),t.onValidationChange=t.onValidationChange.bind(w(w(t))),t.onColorChange=t.onColorChange.bind(w(w(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(r,i.default.Component),t=r,(a=[{key:"componentWillMount",value:function(){y.default.addPollingAttachmentSuccess(this.onCoverGenerationComplete),y.default.addPollingAttachmentError(this.onCoverGenerationError)}},{key:"componentDidMount",value:function(){var e=y.default.project();e.interiorApproved&&this.refs.form.validateWithoutCommitting(),this.loadPreviewCanvas(document.getElementById("preview-front"),"/api/project/"+e.id+"/element/FRONT_COVER_NAS?t="+l().format()),this.loadPreviewCanvas(document.getElementById("preview-back"),"/api/project/"+e.id+"/element/BACK_COVER_NAS?t="+l().format())}},{key:"componentWillUnmount",value:function(){y.default.removePollingAttachmentSuccess(this.onCoverGenerationComplete),y.default.removePollingAttachmentError(this.onCoverGenerationError)}},{key:"hasFormChanged",value:function(){return{unChanged:!this.refs.form.hasChanged()&&this.state.initialSelected===this.state.selected}}},{key:"getHeightOffset",value:function(e){var t=+e.width.slice(0,e.width.length-1)*this.previewDPI,a=t>this.maxPreviewImageWidth?this.maxPreviewImageWidth/t:t/this.maxPreviewImageWidth;return+e.height.slice(0,e.height.length-1)*this.previewDPI*a|0}},{key:"loadPreviewCanvas",value:function(e,t){var a=e.getContext("2d");e.style.width=e.width+"px",e.style.height=e.height+"px";var n=new Image;n.onload=function(){a.drawImage(this,0,0,254,e.height)},n.src=t}},{key:"setFormValue",value:function(e,t){var a={};a[e]=t,this.setState(a)}},{key:"onSelectSpineColor",value:function(e){this.setState({selected:e})}},{key:"onSubmit",value:function(){if(!y.default.project().coverFullPreFlightCheckStatus||this.refs.form.hasChanged()||this.state.selected!==y.default.project().spineColor){this.setState({busy:!0});var e=this.refs.form.gather();h.updateSpine({projectId:y.default.project().id,author:this.isThickEnoughForTitle?e.spineAuthor:null,backgroundColor:e.spineColorHex?e.spineColorHex:null,fontColor:e.fontColorHex?e.fontColorHex:null,font:e.spineFont?e.spineFont:null,title:this.isThickEnoughForTitle?e.spineTitle:null},!0),p.showSpineProgressModal()}else s.go("next")}},{key:"onValidationChange",value:function(){this.setState({formValid:this.refs.form.valid()})}},{key:"onCoverGenerationComplete",value:function(){o.default.go("next")}},{key:"onCoverGenerationError",value:function(){}},{key:"onColorChange",value:function(e,t){var a=this,n={};"#"!==e.hex.charAt(0)&&(e.hex="#"+e.hex),n[t.stateKey]=e.hex,this.setState(n),this.refs[t.refKey].setValue(e.hex),setTimeout(function(){return a.refs.form.validateWithoutCommitting()})}},{key:"render",value:function(){var a=this,e=y.default.project(),t=1;if(e.isEBook||!e.isEBook&&!e.coverType)return null;var n=e.id,o=e.pageSizeByKey.dimensions,r=this.getHeightOffset(o);return e.isSPB&&(n=n.split("_")[1]),i.default.createElement("div",{className:"cover-spine"},i.default.createElement("header",null,i.default.createElement("h1",null,"Prepare the Spine of Your Book"),this.isThickEnoughForTitle&&i.default.createElement("p",null,"Please note: If your book title is long, youâ€™ll need to shorten it here so that your name ",i.default.createElement("br",null),"can also fit on the spine. Altering your book title here will not affect it anywhere else on your book."),!this.isThickEnoughForTitle&&i.default.createElement("p",null,"Select a spine color for your book. ",i.default.createElement("br",null),"Please note: For books with a page count below 48, the spine is too small to include any text without it being cramped and hard to read.")),i.default.createElement("section",null,i.default.createElement("div",{className:"panel"},i.default.createElement("div",{className:"panel-body"},i.default.createElement("div",{className:"panel-section"},i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-5 spine-form"},i.default.createElement(d.default,{ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},this.isThickEnoughForTitle&&i.default.createElement("div",null,i.default.createElement("div",{className:"panel-header"},i.default.createElement("div",{className:"section-number"},t++),i.default.createElement("h2",null,"Spine Text")),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12"},i.default.createElement(f.default,{ref:"spineTitle",name:"spineTitle",label:"Title (optional)",initValue:e.spineTitle,rules:[b.maxLength(85)],maxLength:85,showRemainingCharCount:!0}))),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12"},i.default.createElement(f.default,{ref:"spineAuthor",name:"spineAuthor",label:"Author's Full Name (optional)",initValue:e.spineAuthor,rules:[b.maxLength(35)],maxLength:35,showRemainingCharCount:!0})))),i.default.createElement("div",{className:"panel-header"},this.isThickEnoughForTitle&&i.default.createElement("div",null,i.default.createElement("div",{className:"section-number"},t++),i.default.createElement("h2",null,"Spine Color")),!this.isThickEnoughForTitle&&i.default.createElement("h2",{style:{paddingLeft:"30px"}},"Spine Color")),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12",style:{marginBottom:"20px"}},i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12 color-picker-blurb"},"Click the box below to select a color from the palette or use the eyedropper on the cover")),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-3"},i.default.createElement(u.default,{color:{hex:this.state.spineColor},onChangeComplete:function(e,t){a.onColorChange(e,{stateKey:"spineColor",refKey:"spineColorHex"})}})),i.default.createElement("div",{className:"col-xs-9"},i.default.createElement(f.default,{ref:"spineColorHex",name:"spineColorHex",label:"Hex Value",initValue:this.state.spineColor,onChange:function(e){a.onColorChange({hex:e.newValue},{stateKey:"spineColor",refKey:"spineColorHex"})},rules:[b.required("Please select or enter a color"),b.maxLength(7),b.pattern(/^#?(?:[0-9a-fA-F]{3}){1,2}$/,"Color must be a 3 or 6 hex value")],maxLength:7}))))),this.isThickEnoughForTitle&&i.default.createElement("div",null,i.default.createElement("div",{className:"panel-header"},i.default.createElement("div",{className:"section-number"},t++),i.default.createElement("h2",null,"Font Type and Color")),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12"},i.default.createElement(g.default,{ref:"spineFont",name:"spineFont",label:"Choose Font (Optional)",initValue:e.spineFont,onChange:function(e){return a.setFormValue("spineFont",e.newValue)},options:this.fontOptions}))),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12"},i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12 color-picker-blurb"},"Click the box below to select a color from the palette or use the eyedropper on the cover")),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-3"},i.default.createElement(u.default,{color:{hex:this.state.spineFontColor},onChangeComplete:function(e,t){a.onColorChange(e,{stateKey:"spineFontColor",refKey:"fontColorHex"})}})),i.default.createElement("div",{className:"col-xs-9"},i.default.createElement(f.default,{ref:"fontColorHex",name:"fontColorHex",label:"Hex Value",initValue:this.state.spineFontColor,onChange:function(e){a.onColorChange({hex:e.newValue},{stateKey:"spineFontColor",refKey:"fontColorHex"})},rules:[b.maxLength(7),b.pattern(/^#?(?:[0-9a-fA-F]{3}){1,2}$/,"Color must be a 3 or 6 hex value")],maxLength:7})))))))),i.default.createElement("div",{className:"col-xs-7"},i.default.createElement(c.default,{recalcHeight:!0},i.default.createElement("div",{className:"preview-image",style:{height:r+"px"}},i.default.createElement("canvas",{id:"preview-back",width:"254px",height:r+"px"}),i.default.createElement("img",{className:"img-responsive",src:"/api/project/"+e.id+"/element/BACK_COVER_NAS?t="+l().format(),style:{display:"none"}})),i.default.createElement("div",{className:"preview-spine",style:{height:r+"px",backgroundColor:this.state.spineColor}},i.default.createElement("div",{className:"preview-spine",style:{height:r+"px"}},i.default.createElement("div",{className:"title",style:{fontFamily:this.state.spineFont,color:this.state.spineFontColor}},this.isThickEnoughForTitle&&i.default.createElement("span",null,"Your Title Here")),i.default.createElement("div",{className:"author",style:{fontFamily:this.state.spineFont,color:this.state.spineFontColor}},this.isThickEnoughForTitle&&i.default.createElement("span",null,"Author Name")))),i.default.createElement("div",{className:"preview-image",style:{height:r+"px"}},i.default.createElement("canvas",{id:"preview-front",width:"254px",height:r+"px"}),i.default.createElement("img",{className:"img-responsive",src:"/api/project/"+e.id+"/element/FRONT_COVER_NAS?t="+l().format(),style:{display:"none"}})),i.default.createElement("div",{className:"preview-disclaimer text-center small"},i.default.createElement("em",null,"Spine preview is not to scale. Advance to the Review tab for the true to scale version."))))))))),i.default.createElement(m.default,{disableBack:this.state.busy,disableNext:!this.state.formValid||this.state.busy,next:function(){return a.refs.form.submit()}}),i.default.createElement(v.default,{data:!!e.interiorApproved&&function(){return a.hasFormChanged()}}))}}])&&S(t.prototype,a),n&&S(t,n),r}();n.default=a}).call(this,r(117))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),n=a(597),l=a(49),i=o(a(1493)),s=o(a(104));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?m(a):n).state={displayPicker:!1},t.preColors=["#000000","#ffffff","#ebdbc2","#0d5071","#10693a","#6d070c","#eaeaea","#acacac"],t.onColorClose=t.onColorClose.bind(m(m(t))),t.onColorDisplay=t.onColorDisplay.bind(m(m(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,r.default.Component),t=o,(a=[{key:"onColorDisplay",value:function(){this.setState({displayPicker:!0})}},{key:"onColorClose",value:function(){this.setState({displayPicker:!1})}},{key:"render",value:function(){var n=this;return r.default.createElement("div",null,r.default.createElement("div",{className:"color-picker-display-container",onClick:this.onColorDisplay},r.default.createElement("div",{className:"color-picker-display",style:{backgroundColor:this.props.color.hex}})),this.state.displayPicker&&r.default.createElement("div",{className:"color-picker-container"},r.default.createElement("div",{className:"color-picker"},r.default.createElement("div",{className:"sketch-picker"},r.default.createElement("div",{className:"close-picker-container",onClick:this.onColorClose},r.default.createElement("div",{className:"close-picker",onClick:this.onColorClose},"Â ")),r.default.createElement("div",{className:"saturation"},r.default.createElement(l.Saturation,c({},this.props,{onChange:this.props.onChange}))),r.default.createElement("div",{className:"flexbox-fix hue-container"},r.default.createElement("div",{className:"hue"},r.default.createElement("div",{className:"pull-left",style:{width:"89%"}},r.default.createElement("div",{className:"control"},r.default.createElement(l.Hue,{style:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hsl:this.props.hsl,onChange:this.props.onChange}))),r.default.createElement("div",{className:"pull-left swatch-control"},r.default.createElement(l.Swatch,{color:this.props.hex,style:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}})))),r.default.createElement("div",{className:"flexbox-fix editable-container"},r.default.createElement("div",{className:"editable"},r.default.createElement(l.EditableInput,{style:{input:{width:"63%",paddingTop:"4px",paddingBottom:"3px",paddingLeft:"2px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{float:"left",fontSize:"11px",color:"#222",paddingTop:"5px",paddingBottom:"4px",paddingRight:"5px",textTransform:"capitalize"}},label:"Hex Value #",value:this.props.hex.replace("#",""),onChange:function(e,t){var a=e["Hex Value #"];a&&0!==a.length&&(a="#"+a,s.default.isValidHex(a)&&n.props.onChange({hex:a,source:"hex"}))}})),r.default.createElement("div",{className:"editable eye-dropper-container"},r.default.createElement(i.default,{onChange:function(e){var t=e.hex;s.default.isValidHex(t)&&n.props.onChange({hex:t,source:"hex"})}}))),r.default.createElement("div",{className:"flexbox-fix pre-colors"},this.preColors.map(function(e){return r.default.createElement("div",{className:"pre-color",key:e},r.default.createElement(l.Swatch,{color:e,style:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"},onClick:n.props.onChange,onHover:n.props.onSwatchHover,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px ".concat(e)}}))}))))))}}])&&d(t.prototype,a),n&&d(t,n),o}(),y=(0,n.CustomPicker)(h);t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={enabled:!1},t.rgbToHex=t.rgbToHex.bind(d(d(t))),t.processEventHandlers=t.processEventHandlers.bind(d(d(t))),t.onClick=t.onClick.bind(d(d(t))),t.onWindowMouseMove=t.onWindowMouseMove.bind(d(d(t))),t.onWindowClick=t.onWindowClick.bind(d(d(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillUnmount",value:function(){this.state.enabled&&this.processEventHandlers(!1)}},{key:"processEventHandlers",value:function(e){e?(document.body.style.cursor='url("img/controls/color-picker/eyedropper.png") 0 25, wait',document.body.addEventListener("mousemove",this.onWindowMouseMove),document.body.addEventListener("click",this.onWindowClick)):(document.body.style.cursor="default",document.body.removeEventListener("mousemove",this.onWindowMouseMove),document.body.removeEventListener("click",this.onWindowClick))}},{key:"rgbToHex",value:function(e,t,a){if(255<e||255<t||255<a)throw"Invalid color component";return(e<<16|t<<8|a).toString(16)}},{key:"onWindowMouseMove",value:function(e){var t=e.target||e.srcElement;if("canvas"===t.tagName.toLowerCase()){var a=e.layerX,n=e.layerY,o=t.getContext("2d").getImageData(a,n,1,1).data;if(0==o[0]&&0==o[1]&&0==o[2]&&0==o[3])return;var r="#"+("000000"+this.rgbToHex(o[0],o[1],o[2])).slice(-6);this.props.onChange&&this.props.onChange({hex:r})}}},{key:"onWindowClick",value:function(e){this.setState({enabled:!1}),this.processEventHandlers(!1),e.preventDefault(),e.stopPropagation()}},{key:"onClick",value:function(){var e=!this.state.enabled;this.setState({enabled:e}),this.processEventHandlers(e)}},{key:"render",value:function(){return r.default.createElement("div",{className:(0,l.default)("eye-dropper",{"eye-dropper-selected":this.state.enabled}),onClick:this.onClick},"Â ")}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(173)),i=o(a(29)),s=(o(a(64)),n(a(14))),u=n(a(32)),c=o(a(8)),d=n(a(15)),f=n(a(10)),p=o(a(39));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n).state={choice:c.default.project().coverType},t.hasFormChanged=t.hasFormChanged.bind(g(g(t))),t.onFullSelected=t.onFullSelected.bind(g(g(t))),t.onSeparateSelected=t.onSeparateSelected.bind(g(g(t))),t.onSubmit=t.onSubmit.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,r.default.Component),t=o,(a=[{key:"hasFormChanged",value:function(){return{unChanged:c.default.project().coverType===this.state.choice}}},{key:"onSeparateSelected",value:function(){this.setState({choice:d.COVER_TYPES.SEPARATE})}},{key:"onFullSelected",value:function(){this.setState({choice:d.COVER_TYPES.FULL})}},{key:"onSubmit",value:function(){var a=this;if(c.default.project().coverType!==this.state.choice){var e=this.determineTypeOfCoverFiles();if(e&&this.state.choice!==e){var t="Your previously uploaded "+(e===d.COVER_TYPES.FULL?"Full Cover File":"Front and Back Cover Files")+" will be removed if you change your cover type.";f.showConfirmationModal("Are you sure you want to change your cover type?",t,null,"No",function(e){if(e){var t=c.default.project().clone();t.coverType=a.state.choice,s.updateProject(t,!0,!0)}else a.setState({choice:c.default.project().coverType},function(){a.refs.progressButtons.enableButtons()})})}else{var n=c.default.project().clone();n.coverType=this.state.choice,s.updateProject(n,!0,!0)}}else u.go("next")}},{key:"determineTypeOfCoverFiles",value:function(){var e=c.default.project();return!e.coverFullPreFlightCheckStatus||e.coverBackPreFlightCheckStatus||e.coverFrontPreFlightCheckStatus?e.coverBackPreFlightCheckStatus||e.coverFrontPreFlightCheckStatus?d.COVER_TYPES.SEPARATE:null:d.COVER_TYPES.FULL}},{key:"render",value:function(){var e=this;if(c.default.project().isEBook)return null;var t=[{icon:"choose-separate-not-selected",iconSelected:"choose-separate-selected",key:d.COVER_TYPES.SEPARATE,onSelectIcon:this.onSeparateSelected,text:"Upload Front & Back Cover Files",subText:"If youâ€™re not working with a cover designer, you may find it easier to upload a front and back cover separately and weâ€™ll create your bookâ€™s spine for you."},{icon:"choose-together-not-selected",iconSelected:"choose-together-selected",key:d.COVER_TYPES.FULL,onSelectIcon:this.onFullSelected,text:"Upload Full Cover File",subText:"If you have a full cover spread already designed, choose this option. You may need to make minor page size adjustments."}];return r.default.createElement("div",{className:"cover-type"},r.default.createElement("header",null,r.default.createElement("h1",null,"How Do You Want to Upload Your Cover File?"),r.default.createElement("p",null,"For the best results, we recommend creating your cover in Photoshop, Illustrator, or InDesign.")),r.default.createElement("section",null,r.default.createElement("div",{className:"panel"},r.default.createElement("div",{className:"panel-body cover-upload"},r.default.createElement("div",{className:"btn-container"},r.default.createElement(l.default,{options:t,selected:this.state.choice}))))),r.default.createElement(i.default,{ref:"progressButtons",next:this.onSubmit,disableNext:!this.state.choice}),r.default.createElement(p.default,{data:function(){return e.hasFormChanged()}}))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s(this,u(a).call(this,e))).state={selected:e.selected},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,r.default.Component),t=a,(n=[{key:"componentWillReceiveProps",value:function(e){this.props!==e&&this.setState({selected:e.selected})}},{key:"render",value:function(){var e=this.props.options;e.iconSelected;return r.default.createElement("div",{className:"option-icon-wrapper"},r.default.createElement("div",{className:(0,l.default)("option-icon",{active:this.state.selected===e.key})},r.default.createElement("button",{className:(0,l.default)({active:this.state.selected===e.key}),value:e.key,onClick:e.onSelectIcon},r.default.createElement("i",{className:"sprite "+(this.state.selected===e.key?e.iconSelected:e.icon)}),r.default.createElement("div",{className:"text"},e.text))),e.subText&&0<e.subText.length&&r.default.createElement("div",{className:"sub-text"},e.subText))}}])&&i(t.prototype,n),o&&i(t,o),a}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var p=r(a(0)),m=r(a(1)),h=r(a(34)),l=r(a(385)),y=r(a(4)),o=r(a(50)),b=r(a(206)),i=(n(a(11)),n(a(10))),g=r(a(29)),s=n(a(14)),v=r(a(8)),E=n(a(15)),S=r(a(39));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P="tempCover",w="finalCover",O=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=d(r).call(this,e))||"object"!==u(n)&&"function"!=typeof n?k(a):n;var o=v.default.project();return t.state={activeTab:o.isPrintPreOrder()?P:null,clientSideErrorNoFile:!1,errors:[],file:{},fileSize:!1,maxFiles:!1,rejected:!1,serverSideError:!1,successAlert:!1,validFull:o.coverFullPreFlightCheckStatus&&o.coverType===E.COVER_TYPES.FULL||o.isEBook&&o.coverFullPreFlightCheckStatus||o.preOrder&&o.coverTempPreFlightCheckStatus,validSeparate:o.coverBackPreFlightCheckStatus&&o.coverFrontPreFlightCheckStatus&&o.coverType===E.COVER_TYPES.SEPARATE,widthHeight:!1,formattingCoverWidth:null,formattingTotalHeight:null,formattingTotalWidth:null,cacheBusta:(new Date).getTime()},t.Attachments=new l.default,t.projectElementType=null,t.counter=1,t.createAttachmentData=t.createAttachmentData.bind(k(k(t))),t.getAttachmentStatusError=t.getAttachmentStatusError.bind(k(k(t))),t.getAttachmentStatusSuccess=t.getAttachmentStatusSuccess.bind(k(k(t))),t.onCoverFormattingSpecsLoaded=t.onCoverFormattingSpecsLoaded.bind(k(k(t))),t.onDropBack=t.onDropBack.bind(k(k(t))),t.onDropFront=t.onDropFront.bind(k(k(t))),t.onDropFull=t.onDropFull.bind(k(k(t))),t.onDropAccepted=t.onDropAccepted.bind(k(k(t))),t.onDropRejected=t.onDropRejected.bind(k(k(t))),t.onMaxFilesExceeded=t.onMaxFilesExceeded.bind(k(k(t))),t.onTabClick=t.onTabClick.bind(k(k(t))),t.openCoverInfoModal=t.openCoverInfoModal.bind(k(k(t))),t.removeUploadErrors=t.removeUploadErrors.bind(k(k(t))),t.showProgressModal=t.showProgressModal.bind(k(k(t))),t.showUploadErrors=t.showUploadErrors.bind(k(k(t))),t.makeClick=t.makeClick.bind(k(k(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(r,p.default.Component),t=r,(a=[{key:"componentDidMount",value:function(){var e=v.default.project();e.isEBook||s.getCoverFormattingSpecs(e.id)}},{key:"componentWillMount",value:function(){v.default.addAttachmentReadyForPolling(this.createAttachmentData),v.default.addCoverFormattingSpecsLoadedListener(this.onCoverFormattingSpecsLoaded),v.default.addPollingAttachmentError(this.getAttachmentStatusError),v.default.addPollingAttachmentSuccess(this.getAttachmentStatusSuccess),v.default.addRemoveUploadError(this.removeUploadErrors)}},{key:"componentWillUnmount",value:function(){v.default.removeAttachmentReadyForPolling(this.createAttachmentData),v.default.removeCoverFormattingSpecsLoadedListener(this.onCoverFormattingSpecsLoaded),v.default.removePollingAttachmentError(this.getAttachmentStatusError),v.default.removePollingAttachmentSuccess(this.getAttachmentStatusSuccess),v.default.removeRemoveUploadError(this.removeUploadErrors)}},{key:"createAttachmentData",value:function(e){var t={id:e.projectId,projectType:e.projectType};this.Attachments.checkFileStatus(t,this.projectElementType)}},{key:"getAttachmentStatusError",value:function(e){var t,a=this,n=v.default.project(),o="";if("BARCODE_POSITION_ERROR"==e.preFlightCheckError[0].preFlightEnum||"BARCODE_VALUE_ERROR"==e.preFlightCheckError[0].preFlightEnum){if("BARCODE_POSITION_ERROR"==e.preFlightCheckError[0].preFlightEnum)if(this.setState({validFull:!1,validSeparate:!1}),0!=e.preFlightCheckError[0].detail.split("|").length)for(var r=0;r<e.preFlightCheckError[0].detail.split("|").length;r++)t="/api/project/"+n.id+"/element/"+e.preFlightCheckError[0].detail.split("|")[r]+"?t="+this.state.cacheBusta,o+="<img src="+t+"/><br/><br/>";else t="/api/project/"+n.id+"/element/"+e.preFlightCheckError[0].detail+"?t="+this.state.cacheBusta,o+="<img src="+t+"/>";"BARCODE_VALUE_ERROR"==e.preFlightCheckError[0].preFlightEnum&&(this.setState({validFull:!1,validSeparate:!1}),t="/api/project/"+n.id+"/element/"+e.preFlightCheckError[0].detail.split("|")[1]+"?t="+this.state.cacheBusta,o+="<img src="+t+"/>"),setTimeout(function(){i.showNotificationModal('<div>The bottom right corner of the back cover is designated for the barcode, which will be automatically applied upon completion of the ISBN information. Ensure your cover design is barcode-free, removing any existing barcodes before re-uploading the file.</div><div style="text-align: center"><br/>'+o+"</div>","Barcode Problem Found","Fix & Re-Upload",function(e,t){e&&a.setState({deleting:!0})},!0)},500)}else this.setState({errors:e.preFlightCheckError,serverSideError:!0,validFull:!1,validSeparate:!1})}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"getAttachmentStatusSuccess",value:function(){var e=this,t=v.default.project();t.tempCover=!0,this.setState({validFull:t.coverFullPreFlightCheckStatus&&t.coverType===E.COVER_TYPES.FULL||t.isEBook&&t.coverFullPreFlightCheckStatus||t.preOrder&&t.coverTempPreFlightCheckStatus&&this.state.activeTab===P,validSeparate:t.coverBackPreFlightCheckStatus&&t.coverFrontPreFlightCheckStatus&&t.coverType===E.COVER_TYPES.SEPARATE},function(){(e.state.validFull||e.state.validSeparate)&&e.state.activeTab!==P&&o.default.go("next")})}},{key:"onCoverFormattingSpecsLoaded",value:function(){var e=v.default.project();this.setState({formattingCoverWidth:e.formattingCoverWidth,formattingTotalHeight:e.formattingTotalHeight,formattingTotalWidth:e.formattingTotalWidth})}},{key:"onDropBack",value:function(e){this.projectElementType=E.BACK_COVER,this.setState({clientSideErrorNoFile:!1,errors:[],file:e,maxFiles:!1,rejected:!1,serverSideError:!1,successAlert:!1,widthHeight:!1})}},{key:"onDropFront",value:function(e){this.projectElementType=E.FRONT_COVER,this.setState({clientSideErrorNoFile:!1,errors:[],file:e,maxFiles:!1,rejected:!1,serverSideError:!1,successAlert:!1,widthHeight:!1})}},{key:"onDropFull",value:function(e){var t=v.default.project();t.isEBook?this.projectElementType=E.FRONT_COVER:t.preOrder&&this.state.activeTab===P?this.projectElementType=E.SPB_PRE_ORDER_COVER:this.projectElementType=E.LSI_COVER,this.setState({clientSideErrorNoFile:!1,errors:[],file:e,fileSize:!1,maxFiles:!1,rejected:!1,serverSideError:!1,successAlert:!1,widthHeight:!1})}},{key:"onDropAccepted",value:function(a,e){var n=this;this.setState({clientSideErrorNoFile:!1,maxFiles:!1,rejected:!1});var t=v.default.project(),o=this.Attachments.uploadFiles({projectId:t.id,file:a,projectElementType:this.projectElementType});if(t.isEBook||t.preOrder&&!t.interiorApproved)if(5e3<a[0].size&&a[0].size<22e5){var r={fileEmpty:"Your cover image must be at least 750px on one side (height or width). Please edit your file and try again.",fileExists:"Your cover image must be at least 750px on one side (height or width). Please edit your file and try again, or use your previously approved file instead."},l=new Image;l.src=window.URL.createObjectURL(a[0]),l.onload=function(){var e=l.naturalWidth,t=l.naturalHeight;window.URL.revokeObjectURL(l.src),750<=e||750<=t?(s.uploadAttachment(o,v.default.project(),"cover"),n.showProgressModal(a[0].name)):n.setState({widthHeight:!0},n.showUploadErrors(r))}}else{this.setState({fileSize:!0},this.showUploadErrors({fileEmpty:"Your cover file must be between 5KB and 2MB. Please edit your file and try again.",fileExists:"Your cover file must be between 5KB and 2MB. Please edit your file and try again, or use your previously approved file instead."}))}else s.uploadAttachment(o,t,"cover"),this.showProgressModal(a[0].name)}},{key:"onDropRejected",value:function(){var e=v.default.project(),t=e.isEBook||e.preOrder&&!e.interiorApproved?{fileEmpty:"We only accept jpg and png files. Please edit your file and try again.",fileExists:"We only accept jpg and png files. Please edit your file and try again, or use your previously approved file instead."}:{fileEmpty:"We only accept pdf files. Please edit your file and try again.",fileExists:"We only accept pdf files. Please edit your file and try again, or use your previously approved file instead."};this.setState({rejected:!0},this.showUploadErrors(t))}},{key:"onMaxFilesExceeded",value:function(e){this.setState({maxFiles:!0},this.showUploadErrors({fileEmpty:"You may only upload one file at a time. Please try again.",fileExists:"You may only upload one file at a time. Please try again or use your previously approved file instead."}))}},{key:"onTabClick",value:function(e){this.setState({activeTab:e})}},{key:"openCoverInfoModal",value:function(){i.showNotificationModal("If you are uploading a full cover document that you have downloaded from another platform, be sure to create a new document with the page dimensions preconfigured as provided by our platform. Then copy and paste the cover image into this new document with the correct preconfigured dimensions and save the new document as a PDF. Use this new PDF to upload to our platform.")}},{key:"removeUploadErrors",value:function(){this.setState({fileSize:!1,maxFiles:!1,rejected:!1,widthHeight:!1})}},{key:"showProgressModal",value:function(e){i.showUploadProgressModal(e)}},{key:"showUploadErrors",value:function(e){var t=v.default.project();if({BACK_COVER:t.coverBackFile,FRONT_COVER:t.coverFrontFile||t.coverFile&&t.isEBook,LsiCover:t.coverFile}[this.projectElementType])i.showUploadErrorModal(e.fileExists);else{var a={detail:e.fileEmpty};this.setState({clientSideErrorNoFile:!0,errors:[a]})}}},{key:"render",value:function(){var e,t,a,n=this,o=v.default.project(),r=this.state.activeTab,l=o.interiorApproved&&o.coverType===E.COVER_TYPES.FULL,i=o.interiorApproved&&o.coverType===E.COVER_TYPES.SEPARATE,s=o.isPrintPreOrder()&&r===P,u=!s&&(o.isEBook||l&&(!o.preOrder||o.preOrder&&r===w||o.everOnSale)),c=!s&&!o.isEBook&&i&&(!o.preOrder||o.preOrder&&r===w||o.everOnSale),d=!0,f=o.isPrintPreOrder()&&o.tempCover?"/api/project/"+o.id+"/element/SPB_PRE_ORDER_COVER?count="+this.counter++:null;y.default.getUser();return(this.state.serverSideError||this.state.clientSideErrorNoFile)&&(a=this.state.errors.map(function(e){return e.detail})),e=o.isEBook||o.preOrder&&r===P?(t=["image/jpg","image/jpeg","image/png",".jpg",".jpeg",".png"],p.default.createElement("header",null,p.default.createElement("h1",null,o.isEBook?"Upload Your Cover File":"Upload Your Temporary Cover File"),o.isEBook&&p.default.createElement("p",null,"Your cover will be shown on your bookâ€™s product page on BN.com. We accept jpg or png files between 5KB and 2MB.",p.default.createElement("br",null),"We recommend a height and width of at least 1400 pixels. You need to have the rights to any image you upload."))):(t=["application/pdf",".pdf"],p.default.createElement("header",null,p.default.createElement("h1",null,"Upload Your Cover ",o.coverType===E.COVER_TYPES.FULL?"File":"Files"),!o.preOrder&&p.default.createElement("p",null,"Your ",p.default.createElement("strong",null,o.pageSizeByKey.label," ",o.coverFormatByKey.label)," needs to have a cover size of ",p.default.createElement("strong",null,o.coverType===E.COVER_TYPES.SEPARATE?this.state.formattingCoverWidth:this.state.formattingTotalWidth,'" x ',this.state.formattingTotalHeight,'"'),p.default.createElement("br",null),"Are you uploading a full cover document that you have downloaded from another platform? ",p.default.createElement("span",{className:"link",onClick:this.openCoverInfoModal},"Learn more"),p.default.createElement("br",null),p.default.createElement("small",null,"For more information, go back.")))),o.interiorApproved||o.preOrder||(d=!1),p.default.createElement("div",null,e,p.default.createElement("section",null,(this.state.serverSideError||this.state.clientSideErrorNoFile)&&p.default.createElement(h.default,{messages:a,type:"error"}),d&&p.default.createElement("div",{className:"panel"},p.default.createElement("div",{className:"panel-body cover-upload"},o.isPrintPreOrder()&&p.default.createElement("div",null,p.default.createElement("ul",{className:"nav nav-tabs"},p.default.createElement("li",{className:(0,m.default)({active:r===P}),tabIndex:"0",onKeyDown:this.makeClick,onClick:function(){return n.onTabClick(P)}},p.default.createElement("a",null,"Pre-Order Cover")),p.default.createElement("li",{className:(0,m.default)({active:r===w,disabled:!o.interiorApproved}),tabIndex:"0",onKeyDown:this.makeClick,onClick:o.interiorApproved?function(){return n.onTabClick(w)}:null},p.default.createElement("a",null,"Final Cover"))),r===P&&p.default.createElement("p",{className:"preorder-cover-text"},"This pre-order cover will be shown on your book's product page on BN.com until your final cover is ready. We accept jpg or png files between 5KB and 2MB. We recommend a height and width of at least 1400 pixels. You must have the rights to any image you upload."),r===w&&p.default.createElement("p",{className:"preorder-cover-text"},"Your ",p.default.createElement("strong",null,o.pageSizeByKey.label," ",o.coverFormatByKey.label)," needs to have a cover size of ",p.default.createElement("strong",null,o.coverType===E.COVER_TYPES.SEPARATE?this.state.formattingCoverWidth:this.state.formattingTotalWidth,'" x ',this.state.formattingTotalHeight,'"'),p.default.createElement("br",null),"Are you uploading a full cover document that you have downloaded from another platform? ",p.default.createElement("span",{className:"link",onClick:this.openCoverInfoModal,tabIndex:"0",onKeyDown:this.makeClick},"Learn more"),p.default.createElement("br",null),p.default.createElement("small",null,"For more information, go back."))),u&&p.default.createElement(b.default,{status:v.default.project().status,orderallowed:v.default.project().allowedToOrder,accept:t.toString(),complete:o.coverFullPreFlightCheckStatus,error:this.state.rejected||this.state.fileSize||this.state.maxFiles||this.state.serverSideError||this.state.widthHeight,errorText:"Please edit and then re-upload your file",fileName:o.coverFile,icon:"sprite icon-interior-not-selected",iconActive:"sprite icon-interior-selected",multiple:!1,onDrop:this.onDropFull,onDropAccepted:this.onDropAccepted,onDropRejected:this.onDropRejected,onMaxFilesExceeded:this.onMaxFilesExceeded,disableClick:!o.allowedToEdit,text:"Drag & Drop Your Cover File",textDifferent:"Drag & Drop a Different Cover File"}),s&&p.default.createElement(b.default,{status:v.default.project().status,orderallowed:v.default.project().allowedToOrder,accept:t.toString(),complete:o.preOrder&&o.coverTempPreFlightCheckStatus,completeImage:f,error:this.state.rejected||this.state.fileSize||this.state.maxFiles||this.state.serverSideError||this.state.widthHeight,errorText:"Please edit and then re-upload your file",fileName:o.coverTempFile,icon:"sprite icon-interior-not-selected",iconActive:"sprite icon-interior-selected",multiple:!1,onDrop:this.onDropFull,onDropAccepted:this.onDropAccepted,onDropRejected:this.onDropRejected,onMaxFilesExceeded:this.onMaxFilesExceeded,disableClick:!o.allowedToEdit,text:"Drag & Drop Your Pre-Order Cover File",textDifferent:"Drag & Drop a Different Pre-Order Cover File"}),c&&p.default.createElement("ul",{className:"upload-separate-covers list-inline"},p.default.createElement("li",null,p.default.createElement(b.default,{status:v.default.project().status,orderallowed:v.default.project().allowedToOrder,accept:t.toString(),complete:o.coverFrontPreFlightCheckStatus,error:(this.state.rejected||this.state.fileSize||this.state.maxFiles||this.state.serverSideError||this.state.widthHeight)&&this.projectElementType===E.FRONT_COVER,errorText:"Please edit and then re-upload your file",fileName:o.coverFrontFile,icon:"sprite separate-front-selected",iconActive:"sprite separate-front-selected",multiple:!1,onDrop:this.onDropFront,onDropAccepted:this.onDropAccepted,onDropRejected:this.onDropRejected,onMaxFilesExceeded:this.onMaxFilesExceeded,disableClick:!o.allowedToEdit,text:"Drag & Drop Your Front Cover File",textDifferent:"Drag & Drop a Different Front Cover File",typeText:"Front Cover: "})),p.default.createElement("li",null,p.default.createElement(b.default,{status:v.default.project().status,accept:t.toString(),orderallowed:v.default.project().allowedToOrder,complete:o.coverBackPreFlightCheckStatus,disableClick:!o.allowedToEdit||!o.coverFrontPreFlightCheckStatus&&!o.coverBackPreFlightCheckStatus,error:(this.state.rejected||this.state.fileSize||this.state.maxFiles||this.state.serverSideError||this.state.widthHeight)&&this.projectElementType===E.BACK_COVER,errorText:"Please edit and then re-upload your file",fileName:o.coverBackFile,icon:"sprite separate-back-not-selected",iconActive:"sprite separate-back-selected",multiple:!1,onDrop:this.onDropBack,onDropAccepted:this.onDropAccepted,onDropRejected:this.onDropRejected,onMaxFilesExceeded:this.onMaxFilesExceeded,text:"Drag & Drop Your Back Cover File",textDifferent:"Drag & Drop a Different Back Cover File",typeText:"Back Cover: "}))))),!d&&p.default.createElement(h.default,{messages:["You must upload and approve your interior, before you can upload or review your cover."],type:"error"})),p.default.createElement(g.default,{buttonText:"Continue",disableNext:!this.state.validFull&&!this.state.validSeparate}),p.default.createElement(S.default,null))}}])&&c(t.prototype,a),n&&c(t,n),r}();t.default=O},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=n(a(33)),i=o(a(8));n(a(15));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,d(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e="/"+l.Base+"/"+i.default.project().id+"/"+l.Interior+"/"+l.InteriorUpload;return r.default.createElement("div",null,r.default.cloneElement(this.props.children,{url:e}))}}])&&u(a.prototype,n),o&&u(a,o),t}();t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(13)),l=n(a(0)),i=n(a(47)),s=n(a(6)),u=n(a(1499)),c=n(a(1500)),d=n(a(1501)),f=n(a(29)),p=n(a(8)),m=n(a(39)),h=n(a(80)),y=n(a(150));function n(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=v(o).call(this,e))||"object"!==b(n)&&"function"!=typeof n?S(a):n).state={bleedToggle:!0,marginsToggle:!0,pageSizeToggle:!0,specsMarginTop:0},t.onSelectPageSize=t.onSelectPageSize.bind(S(S(t))),t.onSelectMargins=t.onSelectMargins.bind(S(S(t))),t.onSelectBleed=t.onSelectBleed.bind(S(S(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(o,l.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.setState({specsMarginTop:((0,r.default)(this.optionsDiv).outerHeight(!0)-(0,r.default)(this.specsDiv).outerHeight(!0))/2})}},{key:"onSelectBleed",value:function(){this.setState({bleedToggle:!this.state.bleedToggle})}},{key:"onSelectMargins",value:function(){this.setState({marginsToggle:!this.state.marginsToggle})}},{key:"onSelectPageSize",value:function(){this.setState({pageSizeToggle:!this.state.pageSizeToggle})}},{key:"render",value:function(){var t=this,e=p.default.project();if(e.isEBook||!e.isEBook&&!e.getBookSizeAndTypeStatus(!0))return null;var a=null,n=null,o=null,r={bleed:"The bleed value is the margin beyond the edge of the page where the sheet will be trimmed.",margins:"Place your text and images inside the margins. Text and images that are outside the margins may get cut off.",pageSize:"Page Size for your interior file should be "+e.pageSizeByKey.label+". Make sure that no images or text falls outside those dimensions."};return this.state.bleedToggle&&(a=l.default.createElement(u.default,null)),this.state.marginsToggle&&(n=l.default.createElement(c.default,null)),this.state.pageSizeToggle&&(o=l.default.createElement(d.default,{dimensions:e.pageSizeByKey.dimensions})),l.default.createElement("div",null,l.default.createElement("header",null,l.default.createElement("h1",null,"Let's Prepare Your Interior File"),l.default.createElement("p",null,"Here's how to correctly format your manuscript for book size and type: ",l.default.createElement("strong",null,e.pageSizeByKey.label," ",e.coverFormatByKey.label),l.default.createElement("br",null),l.default.createElement("small",null,"For more details, download our ",l.default.createElement("a",{target:"_blank",href:"http://www2.nookassets.com/npassets-spb/pod/resources/BN-Press-Formatting-Guide.pdf"},"Formatting Guide")," or our ",l.default.createElement("a",{target:"_blank",href:"http://www2.nookassets.com/npassets-spb/pod/resources/book-interior-preparation-quick-guide.pdf"},"Quick Guide")))),l.default.createElement(y.default,{url:this.props.url}),l.default.createElement("section",null,l.default.createElement("div",{className:"panel"},l.default.createElement("div",{className:"panel-body interior-formatting"},l.default.createElement("div",{className:"left",ref:function(e){return t.optionsDiv=e}},l.default.createElement("h2",null,"Formatting"),l.default.createElement("p",null,l.default.createElement("strong",null,"Set your page to ",e.pageSizeByKey.label,".")),l.default.createElement("p",null,"Toggle the three check boxes below to see how your page size, margins and bleed must be prepared."),l.default.createElement(s.default,{className:"interior-formatting-form",name:"interiorFormatting"},l.default.createElement("div",{className:"checkbox-tooltip"},l.default.createElement(i.default,{name:"pageSize",className:"size-checkbox",label:"Page Size",initValue:!0,onChange:this.onSelectPageSize}),l.default.createElement(h.default,{info:!0,text:r.pageSize})),l.default.createElement("div",{className:"checkbox-tooltip"},l.default.createElement(i.default,{name:"margins",className:"margins-checkbox",label:"Margins",initValue:!0,onChange:this.onSelectMargins}),l.default.createElement(h.default,{info:!0,text:r.margins})),l.default.createElement("div",{className:"checkbox-tooltip"},l.default.createElement(i.default,{name:"bleed",className:"bleed-checkbox",label:"Bleed",initValue:!0,onChange:this.onSelectBleed}),l.default.createElement(h.default,{info:!0,text:r.bleed}))),l.default.createElement("p",null,l.default.createElement("strong",null,"Need help? ",l.default.createElement("a",{href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5358034341275-Trim-Sizes-and-Paper-Stock",target:"_blank"},"Show Me How ",l.default.createElement("i",{className:"fa fa-angle-double-right"}))))),l.default.createElement("div",{className:"right",ref:function(e){return t.specsDiv=e},style:{marginTop:this.state.specsMarginTop}},a,n,o,l.default.createElement("div",{className:"interior-formatting-bg"},l.default.createElement("img",{alt:"interior formatting example",src:e.coverFormatByKey.interiorImage})))))),l.default.createElement(f.default,{buttonText:"Continue"}),l.default.createElement(m.default,null))}}])&&g(t.prototype,a),n&&g(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"bleed-container"},r.default.createElement("div",{className:"spec spec-top"},r.default.createElement("div",{className:"center-line"}),r.default.createElement("div",{className:"spec-text"},'0.125"')),r.default.createElement("div",{className:"spec spec-right"},r.default.createElement("div",{className:"center-line"}),r.default.createElement("div",{className:"spec-text"},'0.125"')),r.default.createElement("div",{className:"spec spec-bottom"},r.default.createElement("div",{className:"center-line"}),r.default.createElement("div",{className:"spec-text"},'0.125"')),r.default.createElement("div",{className:"bleed"}))}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"margins-container"},r.default.createElement("div",{className:"spec spec-top"},r.default.createElement("div",{className:"arrow-up"}),r.default.createElement("div",{className:"center-line"}),r.default.createElement("div",{className:"arrow-down"}),r.default.createElement("div",{className:"spec-text"},'0.5"')),r.default.createElement("div",{className:"spec spec-right"},r.default.createElement("div",{className:"arrow-up"}),r.default.createElement("div",{className:"center-line"}),r.default.createElement("div",{className:"arrow-down"}),r.default.createElement("div",{className:"spec-text"},'0.5"')),r.default.createElement("div",{className:"spec spec-bottom"},r.default.createElement("div",{className:"arrow-up"}),r.default.createElement("div",{className:"center-line"}),r.default.createElement("div",{className:"arrow-down"}),r.default.createElement("div",{className:"spec-text"},'0.5"')),r.default.createElement("div",{className:"spec spec-left"},r.default.createElement("div",{className:"arrow-up"}),r.default.createElement("div",{className:"center-line"}),r.default.createElement("div",{className:"arrow-down"}),r.default.createElement("div",{className:"spec-text"},'0.75"')))}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"page-size-container"},r.default.createElement("div",{className:"horizontal-container"},r.default.createElement("div",{className:"arrow-left"}),r.default.createElement("div",{className:"horizontal horizontal-left"}),r.default.createElement("div",{className:"width"},this.props.dimensions.width),r.default.createElement("div",{className:"arrow-right"}),r.default.createElement("div",{className:"horizontal horizontal-right"})),r.default.createElement("div",{className:"vertical-container"},r.default.createElement("div",{className:"arrow-up"}),r.default.createElement("div",{className:"vertical vertical-top"}),r.default.createElement("div",{className:"height"},this.props.dimensions.height),r.default.createElement("div",{className:"vertical vertical-bottom"}),r.default.createElement("div",{className:"arrow-down"})))}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(13)),l=n(a(0)),i=n(a(29)),s=n(a(8)),u=n(a(39)),c=n(a(150));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=f(this,p(a).call(this,e))).state={specsMarginTop:0},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,l.default.Component),t=a,(n=[{key:"componentDidMount",value:function(){this.setState({specsMarginTop:((0,r.default)(this.optionsDiv).outerHeight(!0)-(0,r.default)(this.specsDiv).outerHeight(!0))/2})}},{key:"render",value:function(){var t=this,e=s.default.project();return e.isEBook||!e.isEBook&&!e.getBookSizeAndTypeStatus(!0)?null:l.default.createElement("div",null,l.default.createElement("header",null,l.default.createElement("h1",null,"Prepare Your Interior Images"),l.default.createElement("p",null,l.default.createElement("small",null,"For more details, download our ",l.default.createElement("a",{href:"http://www2.nookassets.com/npassets-spb/pod/resources/BN-Press-Formatting-Guide.pdf",target:"_blank"},"Formatting Guide")," or our ",l.default.createElement("a",{href:"http://www2.nookassets.com/npassets-spb/pod/resources/book-interior-preparation-quick-guide.pdf",target:"_blank"},"Quick Guide")))),l.default.createElement(c.default,{url:this.props.url}),l.default.createElement("section",null,l.default.createElement("div",{className:"panel"},l.default.createElement("div",{className:"panel-body interior-images"},l.default.createElement("div",{className:"left",ref:function(e){return t.optionsDiv=e}},l.default.createElement("h2",null,"Images"),l.default.createElement("p",null,"Use high resolution images (at least 300 DPI) for crisp-looking graphics."),l.default.createElement("p",null,"Please note: Images taken from the web are usually a much lower resolution."),l.default.createElement("p",null,l.default.createElement("strong",null,"Need help? ",l.default.createElement("a",{href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5359012400411-Including-Photos-and-Illustrations",target:"_blank"},"Show Me How ",l.default.createElement("i",{className:"fa fa-angle-double-right"}))))),l.default.createElement("div",{className:"right",ref:function(e){return t.specsDiv=e},style:{marginTop:this.state.specsMarginTop}},l.default.createElement("img",{alt:"interior image example",src:"img/buildabook/cover-interior/hi-res-images.png",width:"500",height:"166"}))))),l.default.createElement(i.default,{buttonText:"Continue"}),l.default.createElement(u.default,null))}}])&&d(t.prototype,n),o&&d(t,o),a}();t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(13)),l=n(a(0)),i=n(a(29)),s=n(a(8)),u=n(a(39)),c=n(a(150));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=f(this,p(a).call(this,e))).state={specsMarginTop:0},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,l.default.Component),t=a,(n=[{key:"componentDidMount",value:function(){this.setState({specsMarginTop:((0,r.default)(this.optionsDiv).outerHeight(!0)-(0,r.default)(this.specsDiv).outerHeight(!0))/2})}},{key:"render",value:function(){var t=this,e=s.default.project();return e.isEBook||!e.isEBook&&!e.getBookSizeAndTypeStatus(!0)?null:l.default.createElement("div",null,l.default.createElement("header",null,l.default.createElement("h1",null,"Prepare Your Interior Fonts"),l.default.createElement("p",null,l.default.createElement("small",null,"For more details, download our ",l.default.createElement("a",{href:"http://www2.nookassets.com/npassets-spb/pod/resources/BN-Press-Formatting-Guide.pdf",target:"_blank"},"Formatting Guide")," or our ",l.default.createElement("a",{href:"http://www2.nookassets.com/npassets-spb/pod/resources/book-interior-preparation-quick-guide.pdf",target:"_blank"},"Quick Guide")))),l.default.createElement(c.default,{url:this.props.url}),l.default.createElement("section",null,l.default.createElement("div",{className:"panel"},l.default.createElement("div",{className:"panel-body interior-fonts"},l.default.createElement("div",{className:"left",ref:function(e){return t.optionsDiv=e}},l.default.createElement("h2",null,"Embedded Fonts"),l.default.createElement("p",null,"Usually, fonts automatically embed in a PDF."),l.default.createElement("p",null,"However, when using Microsoft Word on a PC, you need to change your settings to enable embedded fonts."),l.default.createElement("p",null,l.default.createElement("strong",null,"Need help? ",l.default.createElement("a",{href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5358735081883-Embedding-Fonts",target:"_blank"},"Show Me How ",l.default.createElement("i",{className:"fa fa-angle-double-right"}))))),l.default.createElement("div",{className:"right",ref:function(e){return t.specsDiv=e},style:{marginTop:this.state.specsMarginTop}},l.default.createElement("img",{alt:"interior font example",src:"img/buildabook/cover-interior/embedded-fonts.png",width:"500",height:"310"}))))),l.default.createElement(i.default,{buttonText:"Continue"}),l.default.createElement(u.default,null))}}])&&d(t.prototype,n),o&&d(t,o),a}();t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(13)),l=n(a(0)),i=n(a(29)),s=n(a(8)),u=n(a(39)),c=n(a(150));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=f(this,p(a).call(this,e))).state={specsMarginTop:0},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,l.default.Component),t=a,(n=[{key:"componentDidMount",value:function(){this.setState({specsMarginTop:((0,r.default)(this.optionsDiv).outerHeight(!0)-(0,r.default)(this.specsDiv).outerHeight(!0))/2})}},{key:"render",value:function(){var t=this,e=s.default.project();return e.isEBook||!e.isEBook&&!e.getBookSizeAndTypeStatus(!0)?null:l.default.createElement("div",null,l.default.createElement("header",null,l.default.createElement("h1",null,"Save Your Interior File"),l.default.createElement("p",null,"Just save your file as a PDF and then you'll be ready to upload it.",l.default.createElement("br",null),l.default.createElement("small",null,"For more details, download our ",l.default.createElement("a",{href:"http://www2.nookassets.com/npassets-spb/pod/resources/BN-Press-Formatting-Guide.pdf",target:"_blank"},"Formatting Guide")," or our ",l.default.createElement("a",{href:"http://www2.nookassets.com/npassets-spb/pod/resources/book-interior-preparation-quick-guide.pdf",target:"_blank"},"Quick Guide")))),l.default.createElement(c.default,{url:this.props.url}),l.default.createElement("section",null,l.default.createElement("div",{className:"panel"},l.default.createElement("div",{className:"panel-body interior-file-type"},l.default.createElement("div",{className:"left",ref:function(e){return t.optionsDiv=e}},l.default.createElement("h2",null,"File Type"),l.default.createElement("p",null,"You can use any word processing program to format your files, but we recommend using either Microsoft Word for Mac or PC or Mac Pages."),l.default.createElement("p",null,"Verify your page size and upload your Word document or print-ready PDF."),l.default.createElement("p",null,l.default.createElement("strong",null,"Need help? ",l.default.createElement("a",{href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5359113942811-Save-Word-Document-as-a-PDF",target:"_blank"},"Show Me How ",l.default.createElement("i",{className:"fa fa-angle-double-right"}))))),l.default.createElement("div",{className:"right",ref:function(e){return t.specsDiv=e},style:{marginTop:this.state.specsMarginTop}},l.default.createElement("img",{alt:"file type example",src:"img/buildabook/cover-interior/file-type.png",width:"500",height:"310"}))))),l.default.createElement(i.default,{buttonText:"Continue"}),l.default.createElement(u.default,null))}}])&&d(t.prototype,n),o&&d(t,o),a}();t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a(0)),s=i(a(4)),o=n(a(32)),l=i(a(217)),u=(n(a(11)),n(a(10))),c=n(a(25)),d=n(a(218)),f=i(a(29)),p=i(a(8)),m=n(a(14)),h=i(a(39)),y=i(a(3)),b=i(a(34)),g=i(a(386));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=function(e){function i(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a=this,t=!(n=S(i).call(this,e))||"object"!==v(n)&&"function"!=typeof n?P(a):n;var o=d.browserCanViewPdf(),r=p.default.project(),l=s.default.getUser();return t.state={isPreOrder:r.isPrintPreOrder(),loaded:!r.isEBook&&!o,approved:r.interiorApproved,checked:r.interiorApproved,initialChecked:r.interiorApproved,canShowPdf:o,cacheBusta:(new Date).getTime(),warning:r.preflightWarningInterior,ownrights:"POD"!=r.type||r.hasCopyRight,XUserId:l.customerId},t.hasFormChanged=t.hasFormChanged.bind(P(P(t))),t.onApproveChanged=t.onApproveChanged.bind(P(P(t))),t.onPreviewLoaded=t.onPreviewLoaded.bind(P(P(t))),t.onProjectChanged=t.onProjectChanged.bind(P(P(t))),t.onSubmit=t.onSubmit.bind(P(P(t))),t.onOwnRightChanged=t.onOwnRightChanged.bind(P(P(t))),t.makeClick=t.makeClick.bind(P(P(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(i,r.default.Component),t=i,(a=[{key:"componentDidMount",value:function(){var e=this;p.default.project().isEBook||d.supportsPdfOnLoadEvent()||(this.loadTimeout=setTimeout(function(){e.onPreviewLoaded()},2e3))}},{key:"componentWillMount",value:function(){p.default.addProjectChangedListener(this.onProjectChanged)}},{key:"componentWillUnmount",value:function(){p.default.removeProjectChangedListener(this.onProjectChanged)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"showInformationModal",value:function(e){u.showInformationModal(e)}},{key:"hasFormChanged",value:function(){return{unChanged:this.state.initialChecked===this.state.checked,secondaryReason:!this.state.checked,title:"You have not approved your interior.",message:"You still need to approve your interior. If you leave this page now, you'll need to return later to approve it. Do you want to leave this page without approving?",leave:"Yes, leave page",stay:"No, stay on page"}}},{key:"onApproveChanged",value:function(){this.setState({checked:this.refs.approve.checked})}},{key:"onOwnRightChanged",value:function(){this.setState({ownrights:this.refs.ownrights.checked})}},{key:"onPreviewLoaded",value:function(){this.loadTimeout&&(clearTimeout(this.loadTimeout),this.loadTimeout=null),this.setState({loaded:!0})}},{key:"onProjectChanged",value:function(){var a=p.default.project();this.state.isPreOrder&&a.interiorApproved&&(a.allowedToPutOnSale||a.allowedToPostChanges)?setTimeout(function(){u.showFinalFilesModal(a.uploadByDate,function(e,t){e?m.setSaleStatus(a.id,!0,!0,function(){return o.go("next")}):o.go("next")})},0):a.isEBook||setTimeout(function(){o.go("next")},0)}},{key:"onSubmit",value:function(){var e=p.default.project();if(this.state.approved&&e.hasCopyRight)o.go("next");else if(e.isEBook){var t=e.clone();t.interiorApproved=!0,m.updateProject(t,!0,!0)}else m.approveInterior(e.id,!1,!0);var a={eventInfo:{eventName:"Review File Continue Click",eventAction:"reviewFileContinueClick",timeStamp:new Date},category:{primaryCategory:"Build A Book"}};c.omnitureActionInvoked(a,"onReviewFileContinueClick")}},{key:"render",value:function(){var e,t=this,a=p.default.project(),n=a.isEBook,o=a.type;return this.state.warning&&(e=r.default.createElement("span",null,this.state.warning.detail," ",r.default.createElement("a",{className:"formatting-info-link",onClick:this.showInformationModal.bind(this,r.default.createElement(g.default,null))},"Learn more about section breaks."))),r.default.createElement("div",{className:"review"},e&&r.default.createElement(b.default,{messages:[e],type:"warning"}),r.default.createElement("header",null,r.default.createElement("h1",null,"Review Your Interior File"),n&&r.default.createElement("div",null,r.default.createElement("p",null,"Please review the proof below or download a digital proof to review before continuing. eBook files will automatically adapt to the device on which theyâ€™re being viewed.")),!n&&r.default.createElement("div",null,r.default.createElement("p",null,"Please review the proof below or download a digital proof to review your file before continuing. Before approving:"),r.default.createElement("div",{className:"instructions"},r.default.createElement("p",null,"1. Confirm that you have uploaded the correct file."),r.default.createElement("p",null,"2. Make sure that all text is within the margin regions."),r.default.createElement("p",null,"3. Check that your page numbers, footers, and headers are within the margin lines."),r.default.createElement("p",null,"4. Confirm that your fonts appear as expected."))),r.default.createElement("div",{className:"upload-button"},r.default.createElement("div",{className:"centered"},r.default.createElement("a",{type:"button",className:"btn btn-progress",href:"/api/project/"+a.id+"/download/interior?t="+this.state.cacheBusta,target:"_blank"},n?"Download ePub":"Download Proof")))),r.default.createElement("section",null,r.default.createElement("div",{className:a.isEBook?"preview ebook show":"preview show"},!this.state.loaded&&r.default.createElement("div",{className:"spinner-area"},a.isEBook&&r.default.createElement(y.default,{top:180,spinnerTextStyle:{margin:"10px auto"},message:"It may take a moment to load your preview. Please do not refresh this page.<br/><br/>You can also download a copy of your file to review by clicking â€œDownload ePubâ€ above."}),!a.isEBook&&r.default.createElement(y.default,{top:180})),this.renderPrintPreview())),r.default.createElement("div",{className:"page-buttons"},"POD"==o&&r.default.createElement("div",{className:"approve approve_ownright"},r.default.createElement("input",{ref:"ownrights",id:"ownrights",type:"checkbox",tabIndex:"-1",className:"big-checkbox",onChange:this.onOwnRightChanged,checked:this.state.ownrights,disabled:this.state.approved&&this.state.ownrights}),r.default.createElement("label",{tabIndex:this.state.approved&&this.state.ownrights?"-1":"0",onKeyDown:this.makeClick,htmlFor:"ownrights"},"By submitting this content, I certify that it is not subject to any copyright or other proprietary rights restrictions, or if subject to any such restrictions, the owner or licensor of the content has given express authorization for me to distribute such content.",r.default.createElement("span",{className:"icon-info-color-blue"},"Â ",r.default.createElement("a",{title:"see more",href:"https://help.barnesandnoble.com/app/answers/detail/a_id/4423",target:"_blank",className:"icon-info icon-info-style"})))),r.default.createElement("div",{className:"POD"==o?" approve approve_down":"approve"},r.default.createElement("input",{ref:"approve",id:"approve",tabIndex:"-1",type:"checkbox",className:"big-checkbox",onChange:this.onApproveChanged,checked:this.state.checked,disabled:this.state.approved}),r.default.createElement("label",{htmlFor:"approve",tabIndex:this.state.approved?"-1":"0",onKeyDown:this.makeClick},"I have reviewed and approved my manuscript.")),r.default.createElement(f.default,{disableNext:!this.state.checked||!this.state.ownrights,next:this.onSubmit})),r.default.createElement(h.default,{data:function(){return t.hasFormChanged()}}))}},{key:"renderPrintPreview",value:function(){var e=p.default.project();if(!e.isEBook&&!this.state.canShowPdf)return r.default.createElement("div",{className:"no-viewer-message"},"We are unable to display your PDF proof.",r.default.createElement("br",null),"Please download your PDF to review your proof before approving.");return e.isEBook?r.default.createElement(l.default,{XUserId:this.state.XUserId,onLoaded:this.onPreviewLoaded}):r.default.createElement("iframe",{src:"/api/project/"+e.id+"/inline/interior?t="+this.state.cacheBusta,width:"100%",height:"100%",title:"preview",onLoad:this.onPreviewLoaded})}}])&&E(t.prototype,a),n&&E(t,n),i}();t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(7),d=o(a(0)),f=a(2),p=o(a(34)),r=o(a(385)),m=o(a(4)),l=o(a(50)),h=o(a(206)),y=n(a(11)),b=o(a(632)),g=o(a(633)),v=o(a(634)),E=o(a(386)),i=n(a(10)),s=n(a(25)),S=n(a(33)),k=o(a(29)),u=n(a(14)),P=o(a(8)),w=o(a(39)),O=(o(a(45)),n(a(48))),C=n(a(17));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var M=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=T(o).call(this,e))||"object"!==N(n)&&"function"!=typeof n?j(a):n).state={eBookSize:22,printBookSize:"",clientSideErrorNoFile:!1,errors:[],file:{},fileSize:!1,maxFiles:!1,rejected:!1,serverSideError:!1,successAlert:!1,showProgress:!1,valid:P.default.project().interiorPreFlightCheckStatus,fixedFormatFFAPI:C.hasFeatureFlag(y.FIXED_FORMAT),eBooksizeActual:20},t.Attachments=new r.default,t.createAttachmentData=t.createAttachmentData.bind(j(j(t))),t.getAttachmentStatusError=t.getAttachmentStatusError.bind(j(j(t))),t.getAttachmentStatusSuccess=t.getAttachmentStatusSuccess.bind(j(j(t))),t.onDrop=t.onDrop.bind(j(j(t))),t.onDropAccepted=t.onDropAccepted.bind(j(j(t))),t.onDropRejected=t.onDropRejected.bind(j(j(t))),t.onMaxFilesExceeded=t.onMaxFilesExceeded.bind(j(j(t))),t.removeUploadErrors=t.removeUploadErrors.bind(j(j(t))),t.showUploadErrors=t.showUploadErrors.bind(j(j(t))),t.showProgressModal=t.showProgressModal.bind(j(j(t))),t.printBookSize=t.printBookSize.bind(j(j(t))),t.eBookSize=t.eBookSize.bind(j(j(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(o,d.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){P.default.addAttachmentReadyForPolling(this.createAttachmentData),P.default.addPollingAttachmentError(this.getAttachmentStatusError),P.default.addPollingAttachmentSuccess(this.getAttachmentStatusSuccess),P.default.addRemoveUploadError(this.removeUploadErrors),P.default.addPrintSizeListener(this.printBookSize),P.default.addEBookSizeListener(this.eBookSize)}},{key:"componentWillUnmount",value:function(){P.default.removeAttachmentReadyForPolling(this.createAttachmentData),P.default.removePollingAttachmentError(this.getAttachmentStatusError),P.default.removePollingAttachmentSuccess(this.getAttachmentStatusSuccess),P.default.removeRemoveUploadError(this.removeUploadErrors),P.default.removePrintSizeListener(this.printBookSize),P.default.removeEBookSizeListener(this.eBookSize)}},{key:"componentDidMount",value:function(){O.loadEBookSize(this.state.fixedFormatFFAPI),O.loadPrintBookSize()}},{key:"printBookSize",value:function(){var e=P.default.printBookSize().data.settings.setting.map(function(e){return parseInt(e.SettingValue)});this.setState({printBookSize:e[0]+.1*e[0]})}},{key:"eBookSize",value:function(){var e=P.default.eBookSize().data.settings.setting.map(function(e){return parseInt(e.SettingValue)});this.setState({eBookSizeActual:e[0],eBookSize:e[0]+.1*e[0]})}},{key:"createAttachmentData",value:function(e){var t={id:e.projectId,projectType:e.projectType};this.Attachments.checkFileStatus(t,"Book")}},{key:"getAttachmentStatusError",value:function(e){this.setState({errors:e.preFlightCheckError,serverSideError:!0,valid:!1})}},{key:"getAttachmentStatusSuccess",value:function(e){var t=this,a={eventInfo:{eventName:"File Upload Continue Click",eventAction:"fileUploadContinueClick",timeStamp:new Date},category:{primaryCategory:"Build A Book"}};setTimeout(function(){s.omnitureActionInvoked(a,"onFileUploadContinueClick")},0),this.setState({valid:!0}),1<e.preFlightCheckError.length?"PRINT_COST_INCREASED_WARNING"===e.preFlightCheckError[1].preFlightEnum&&setTimeout(function(){t.showPriceChangeModal(e.preFlightCheckError[1].detail)},0):l.default.go("next")}},{key:"onDrop",value:function(e){this.setState({clientSideErrorNoFile:!1,errors:[],file:e,fileSize:!1,maxFiles:!1,rejected:!1,serverSideError:!1,successAlert:!1})}},{key:"onDropAccepted",value:function(t,e){var a=this,n=P.default.project().clone();n.isDefaultSample=null,n.samplePath=null,n.sampleFilePath=null,n.sampleConversionStatus=null,n.sampleApproved=!1,n.sampleIds=null,this.setState({clientSideErrorNoFile:!1,maxFiles:!1,rejected:!1});var o=this.Attachments.uploadFiles({projectId:P.default.project().id,file:t,projectElementType:"Book"});if(P.default.project().isEBook)if(t[0].size>1024*this.state.eBookSize*1024||t[0].size<1e3){var r={fileEmpty:"ERROR: Uploaded File Exceeds the Maximum Limit of"+this.state.eBookSizeActual+" MB.",fileExists:"ERROR: Uploaded File Exceeds the Maximum Limit of "+this.state.eBookSizeActual+" MB. Please edit your file and try again, or use your previously approved file instead."};this.setState({fileSize:!0},this.showUploadErrors(r))}else i.showConfirmationModalWithOptions({title:"Does your interior file include your cover?",question:null,confirmButtonText:"Yes",cancelButtonText:"No",footnote:"Note: If your interior file doesn't include your cover, we'll automatically add it to your file for you. If your interior file already has a cover, we won't be able to add another cover for you.",extraClass:"small-header footnote",noAbort:!0},function(e){o.append("coverStitching",e?"NONE":"STITCH"),u.uploadAttachment(o,n,"interior"),a.showProgressModal(t[0].name)});else if(P.default.project().isSPB)if(t[0].size>1024*this.state.printBookSize*1024){this.setState({fileSize:!0},this.showUploadErrors({fileEmpty:"ERROR: Uploaded File Exceeds the Maximum Limit of 750 MegaByte(s) size.",fileExists:"ERROR: Uploaded File Exceeds the Maximum Limit of 750 MegaByte(s) size. Please edit your file and try again, or use your previously approved file instead."}))}else u.uploadAttachment(o,P.default.project(),"interior"),this.showProgressModal(t[0].name);else u.uploadAttachment(o,P.default.project(),"interior"),this.showProgressModal(t[0].name)}},{key:"onDropRejected",value:function(){var e=P.default.project().isEBook?{fileEmpty:"We only accept epub, html, htm, doc, docx, txt or rtf files. Please edit your file and try again.",fileExists:"We only accept epub, html, htm, doc, docx, txt or rtf files. Please edit your file and try again, or use your previously approved file instead."}:{fileEmpty:"We only accept pdf, doc or docx files. Please edit your file and try again.",fileExists:"We only accept pdf, doc or docx files. Please edit your file and try again, or use your previously approved file instead."};this.setState({rejected:!0},this.showUploadErrors(e))}},{key:"onMaxFilesExceeded",value:function(e){this.setState({maxFiles:!0},this.showUploadErrors({fileEmpty:"You may only upload one file at a time. Please try again.",fileExists:"You may only upload one file at a time. Please try again or use your previously approved file instead."}))}},{key:"removeUploadErrors",value:function(){this.setState({fileSize:!1,maxFiles:!1,rejected:!1})}},{key:"showInformationModal",value:function(e){i.showInformationModal(e)}},{key:"showPriceChangeModal",value:function(e){i.showNotificationModal(e,"Change in Print Cost","OK",function(){return l.default.go("next")})}},{key:"showProgressModal",value:function(e){i.showUploadProgressModal(e)}},{key:"showUploadErrors",value:function(e){if(P.default.project().interiorFile)i.showUploadErrorModal(e.fileExists);else{var t={detail:e.fileEmpty};this.setState({clientSideErrorNoFile:!0,errors:[t]})}}},{key:"render",value:function(){var e,t,a,n,o,r=P.default.project(),l="/"+S.Base+"/"+r.id+"/"+S.Cover+"/"+S.CoverFormatting,i="/"+S.Base+"/"+r.id+"/"+S.Interior+"/"+S.InteriorFormatting;m.default.getUser(),C.hasFeatureFlag(y.FIXED_FORMAT);if(!r.isEBook&&!r.getBookSizeAndTypeStatus(!0))return null;if((this.state.serverSideError||this.state.clientSideErrorNoFile)&&(n=this.state.errors.map(function(e){return e.detail})),t=r.isEBook?(a=["application/epub+zip","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/rtf","text/html","text/plain","text/rtf",".doc",".docx",".rtf",".txt",".html",".epub"],e=d.default.createElement("h1",null,"Let's Prepare Your Interior File"),d.default.createElement("p",null,"You can use any word processing program to format your file, but we recommend using Microsoft Word for Mac or PC or Mac Pages.",d.default.createElement("br",null),"For the best results, format your file according to our guidelines for ",d.default.createElement("a",{className:"formatting-info-link",onClick:this.showInformationModal.bind(this,d.default.createElement(E.default,null))},"doc/docx"),", ",d.default.createElement("a",{className:"formatting-info-link",onClick:this.showInformationModal.bind(this,d.default.createElement(v.default,null))},"txt"),", ",d.default.createElement("a",{className:"formatting-info-link",onClick:this.showInformationModal.bind(this,d.default.createElement(g.default,null))},"html")," and ",d.default.createElement("a",{className:"formatting-info-link",onClick:this.showInformationModal.bind(this,d.default.createElement(b.default,null))},"epub"),".")):(a=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document",".pdf",".docx",".doc"],e=d.default.createElement("h1",null,"Upload Your Interior File"),d.default.createElement("p",null,"Upload your doc/docx or PDF file for your book size and type: ",d.default.createElement("strong",null,r.pageSizeByKey.label," ",r.coverFormatByKey.label),".",d.default.createElement("br",null),d.default.createElement("small",null,"For more information, ",d.default.createElement(f.Link,{to:i},"Go Back"),"."))),r.preOrder){var s;if(r.isPrintPreOrder()){var u=(0,c.bn_moment)(r.uploadByDate).format("MMMM Do, YYYY");s="at least 10 business days before the publication date",null!==r.uploadByDate&&(s="by "+u)}else s="at least 72 hours before the publication date";o=d.default.createElement("span",null,"Note: You can skip this step if your interior file is not ready. You must upload your interior file ",s,". ",d.default.createElement(f.Link,{to:l},"Skip This Step")," for now.")}return d.default.createElement("div",null,d.default.createElement("header",null,e,t),d.default.createElement("section",null,r.preOrder&&!r.interiorPreFlightCheckStatus&&d.default.createElement(p.default,{messages:[o],type:"warning"}),(this.state.serverSideError||this.state.clientSideErrorNoFile)&&d.default.createElement(p.default,{messages:n,type:"error"}),d.default.createElement("div",{className:"panel"},d.default.createElement("div",{className:"panel-body interior-upload"},d.default.createElement(h.default,{accept:a.toString(),status:P.default.project().status,orderallowed:P.default.project().allowedToOrder,complete:P.default.project().interiorPreFlightCheckStatus,error:this.state.rejected||this.state.fileSize||this.state.maxFiles||this.state.serverSideError,errorText:"Please edit and then re-upload your file",fileName:P.default.project().interiorFile,icon:"sprite icon-interior-not-selected",iconActive:"sprite icon-interior-selected",multiple:!1,onDrop:this.onDrop,onDropAccepted:this.onDropAccepted,onDropRejected:this.onDropRejected,onMaxFilesExceeded:this.onMaxFilesExceeded,disableClick:!P.default.project().allowedToEdit,text:"Drag & Drop Your Interior File",textDifferent:"Drag & Drop a Different Interior File"})))),d.default.createElement(k.default,{buttonText:"Continue",disableNext:!this.state.valid}),d.default.createElement(w.default,null))}}])&&_(t.prototype,a),n&&_(t,n),o}();t.default=M},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(14));function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.files=[],this.projectElementType=null}var t,a,n;return t=e,(a=[{key:"checkFileStatus",value:function(e,t,a){var n={id:e.id,projectType:e.projectType,projectElementType:t,fileType:a};o.getPreflightStatus(n)}},{key:"uploadSampleFiles",value:function(e){var t=e.fileSample[0],a=new FormData;return a.append("authenticity_token","gdrAe7DK9aHyYOSbFM9KgaumjDQUv2GVo+sHK4JmJV8="),a.append("file",t,t.name),a.append("projectElementType",e.projectElementType),a.append("projectId",e.projectId),a}}])&&r(t.prototype,a),n&&r(t,n),e}();t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(44),n=d(a(16)),l=d(a(18)),i=(o(a(11)),o(a(17)),d(a(64))),s=o(a(15)),u=d(a(516)),c=d(a(517));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=m(this,h(t).call(this)))._coupons=null,e._errors=[],e._priceUpdateWindow=null,e._project=new i.default,e._projectConstants={},e}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r.EventEmitter),a=t,(n=[{key:"addSampleAttachmentReadyForPolling",value:function(e){this.addListener(v,e)}},{key:"removeSampleAttachmentReadyForPolling",value:function(e){this.removeListener(v,e)}},{key:"addCategoriesSearchedListener",value:function(e){this.addListener(j,e)}},{key:"removeCategoriesSearchedListener",value:function(e){this.removeListener(j,e)}},{key:"addCategoriesLoadedListener",value:function(e){this.addListener(D,e)}},{key:"removeCategoriesLoadedListener",value:function(e){this.removeListener(D,e)}},{key:"addCouponSpecsListener",value:function(e){this.addListener(P,e)}},{key:"removeCouponSpecsListener",value:function(e){this.removeListener(P,e)}},{key:"addCoverFormattingSpecsLoadedListener",value:function(e){this.addListener(M,e)}},{key:"removeCoverFormattingSpecsLoadedListener",value:function(e){this.removeListener(M,e)}},{key:"addEbookCouponsLoadedListener",value:function(e){this.addListener(w,e)}},{key:"removeEbookCouponsLoadedListener",value:function(e){this.removeListener(w,e)}},{key:"addPDFConversionCompleteListener",value:function(e){this.addListener(O,e)}},{key:"removePDFConversionCompleteListener",value:function(e){this.removeListener(O,e)}},{key:"addPollingAttachmentError",value:function(e){this.addListener(C,e)}},{key:"removePollingAttachmentError",value:function(e){this.removeListener(C,e)}},{key:"addPollingAttachmentSuccess",value:function(e){this.addListener(N,e)}},{key:"removePollingAttachmentSuccess",value:function(e){this.removeListener(N,e)}},{key:"addProjectCreatedListener",value:function(e){this.addListener(A,e)}},{key:"removeProjectCreatedListener",value:function(e){this.removeListener(A,e)}},{key:"addPreviewReadyListener",value:function(e){this.addListener(K,e)}},{key:"removePreviewReadyListener",value:function(e){this.removeListener(K,e)}},{key:"addPreviewFailedListener",value:function(e){this.addListener(q,e)}},{key:"removePreviewFailedListener",value:function(e){this.removeListener(q,e)}},{key:"addPriceUpdateWindowListener",value:function(e){this.addListener(L,e)}},{key:"removePriceUpdateWindowListener",value:function(e){this.removeListener(L,e)}},{key:"addProjectChangedListener",value:function(e){this.addListener(_,e)}},{key:"removeProjectChangedListener",value:function(e){this.removeListener(_,e)}},{key:"addProjectChangedNotSavedListener",value:function(e){this.addListener(T,e)}},{key:"removeProjectChangedNotSavedListener",value:function(e){this.removeListener(T,e)}},{key:"addProjectChangedHasErrorsListener",value:function(e){this.addListener(W,e)}},{key:"removeProjectChangedHasErrorsListener",value:function(e){this.removeListener(W,e)}},{key:"addProjectQuoteStartedListener",value:function(e){this.addListener(x,e)}},{key:"removeProjectQuoteStartedListener",value:function(e){this.removeListener(x,e)}},{key:"addProjectQuoteListener",value:function(e){this.addListener(R,e)}},{key:"addProjectCalculateBookPriceStartedListener",value:function(e){this.addListener(F,e)}},{key:"removeProjectCalculateBookPriceStartedListener",value:function(e){this.removeListener(F,e)}},{key:"addProjectCalculateBookPriceErrorListener",value:function(e){this.addListener(I,e)}},{key:"removeProjectCalculateBookPriceErrorListener",value:function(e){this.removeListener(I,e)}},{key:"addProjectCalculateBookPriceListener",value:function(e){this.addListener(Y,e)}},{key:"removeProjectCalculateBookPriceListener",value:function(e){this.removeListener(Y,e)}},{key:"removeProjectQuoteListener",value:function(e){this.removeListener(R,e)}},{key:"addProjectBookSizeExistsStartedListener",value:function(e){this.addListener(U,e)}},{key:"removeProjectBookSizeExistsStartedListener",value:function(e){this.removeListener(U,e)}},{key:"addProjectBookSizeExistsCompletedListener",value:function(e){this.addListener(V,e)}},{key:"removeProjectBookSizeExistsCompletedListener",value:function(e){this.removeListener(V,e)}},{key:"addRemoveUploadError",value:function(e){this.addListener($,e)}},{key:"removeRemoveUploadError",value:function(e){this.removeListener($,e)}},{key:"addUploadAttachmentError",value:function(e){this.addListener(H,e)}},{key:"removeUploadAttachmentError",value:function(e){this.removeListener(H,e)}},{key:"addOrderStatusErrorListener",value:function(e){this.addListener(G,e)}},{key:"removeOrderStatusErrorListener",value:function(e){this.removeListener(G,e)}},{key:"addOrderStatusSetListener",value:function(e){this.addListener(z,e)}},{key:"removeOrderStatusSetListener",value:function(e){this.removeListener(z,e)}},{key:"addPublishAlertRemoveListener",value:function(e){this.addListener(X,e)}},{key:"removePublishAlertRemoveListener",value:function(e){this.removeListener(X,e)}},{key:"addPublishAlertShowListener",value:function(e){this.addListener(Z,e)}},{key:"removePublishAlertShowListener",value:function(e){this.removeListener(Z,e)}},{key:"addSetSaleStatusListener",value:function(e){this.addListener(te,e)}},{key:"removeSetSaleStatusListener",value:function(e){this.removeListener(te,e)}},{key:"addSetSaleStatusErrorListener",value:function(e){this.addListener(ae,e)}},{key:"removeSetSaleStatusErrorListener",value:function(e){this.removeListener(ae,e)}},{key:"addStartDeleteListener",value:function(e){this.addListener(ee,e)}},{key:"removeStartDeleteListener",value:function(e){this.removeListener(ee,e)}},{key:"addBookSizeTypeCompleteListener",value:function(e){this.addListener(E,e)}},{key:"removeBookSizeTypeCompleteListener",value:function(e){this.removeListener(E,e)}},{key:"addBookSizeTypeMetaDataListener",value:function(e){this.addListener(S,e)}},{key:"removeBookSizeTypeMetaDataListener",value:function(e){this.removeListener(S,e)}},{key:"addBookSizeTypeResetListener",value:function(e){this.addListener(k,e)}},{key:"removeBookSizeTypeResetListener",value:function(e){this.removeListener(k,e)}},{key:"addProjectConstantsLoadedListener",value:function(e){this.addListener(Q,e)}},{key:"removeProjectConstantsLoadedListener",value:function(e){this.removeListener(Q,e)}},{key:"addScheduledPricesListener",value:function(e){this.addListener(J,e)}},{key:"removeScheduledPricesListener",value:function(e){this.removeListener(J,e)}},{key:"addUserCouponSavedListener",value:function(e){this.addListener(ne,e)}},{key:"removeUserCouponSavedListener",value:function(e){this.removeListener(ne,e)}},{key:"addUserCouponSavedErrorListener",value:function(e){this.addListener(oe,e)}},{key:"removeUserCouponSavedErrorListener",value:function(e){this.removeListener(oe,e)}},{key:"coupons",value:function(){return this._coupons}},{key:"couponSpecs",value:function(){return this._couponSpecs}},{key:"errors",value:function(){return this._errors}},{key:"project",value:function(){return this._project}},{key:"projectConstants",value:function(e,t){return this._projectConstants[e].values.find(function(e){return t===e.key})}},{key:"isValidProjectType",value:function(e){return e===s.EBOOK||e===s.PRINT||e===s.POD}},{key:"priceUpdateWindow",value:function(){return this._priceUpdateWindow}},{key:"retailAndDistributionPercentage",value:function(t){if(this._project.isSPB)return s.SPB_RETAIL_AND_DISTRIBUTION_PERCENTAGE;var a=0;return s.EBOOK_RETAIL_AND_DISTRIBUTION_PERCENTAGES.map(function(e){e.floorPrice<=t&&t<=e.ceilingPrice&&(a=e.percentage)}),a}},{key:"eBookRetailAndDistributionPercentage",value:function(t){var a=0;return s.EBOOK_RETAIL_AND_DISTRIBUTION_PERCENTAGES.map(function(e){e.floorPrice<=t&&t<=e.ceilingPrice&&(a=e.percentage)}),a}},{key:"warning",value:function(){return this._project.warningMessage}},{key:"onAcknowledgePageCountChanged",value:function(){this._project.hasPageCountChanged=!1}},{key:"onBookSizeTypeReset",value:function(e){this._project.resetBookSizeType(e.elements),e.resetPrice&&(this._project.price=0,this._project._quotedPrice=new c.default(0,0,0,0,0)),this.emit(k,!1)}},{key:"onChangeProject",value:function(e){this._project=e.project,this._errors=[],window.postMessage("spinnerOff","*"),!0===e.publish&&(this._project.showPublishAlert||this._project.showPutOnSaleAlert)&&this.emit(Z),this._project.showPublishAlert||this._project.showPutOnSaleAlert||this.emit(X),this.emit(_)}},{key:"onChangeProjectNotSaved",value:function(e){this._project=e.project,this._errors=[],this.emit(T)}},{key:"onChangeProjectHasErrors",value:function(e){this._errors=e,this.emit(W)}},{key:"onCouponSpecsLoaded",value:function(e){this._couponSpecs=e,this.emit(P)}},{key:"onStartDeleteProject",value:function(){this.emit(ee)}},{key:"onDeleteProject",value:function(){this._project=new i.default}},{key:"onDeleteSearchProject",value:function(){this._project=new i.default}},{key:"onEbookCouponsLoaded",value:function(e){var t=[],a=[],n=[];e&&0<e.length&&(t=e.filter(function(e){return"ACTIVE"===e.status}),a=e.filter(function(e){return"EXPIRED"===e.status}),n=e.filter(function(e){return"SCHEDULED"===e.status})),this._coupons={activeCoupons:t,expiredCoupons:a,scheduledCoupons:n},this.emit(w)}},{key:"onCoverFormattingSpecsLoaded",value:function(e){var t=this.project();t.formattingBleedZone=e.bleedZone,t.formattingCoverWidth=e.coverWidth,t.formattingFlapWidth=e.flapWidth,t.formattingGutter=e.gutter,t.formattingMargin=e.margin,t.formattingSpineWidth=e.spineWidth,t.formattingTotalHeight=e.totalHeight,t.formattingTotalWidth=e.totalWidth,t.formattingWrap=e.wrap,this.emit(M)}},{key:"onLoadCategories",value:function(e){this.emit(D,e.categories)}},{key:"onLoadPriceUpdateWindow",value:function(e){this._priceUpdateWindow=e.data,this.emit(L,e.data)}},{key:"onSearchCategories",value:function(e){this.emit(j,e)}},{key:"onProjectQuoteCompleted",value:function(e){var t=this.project();void 0!==t&&(t.quotedPrice=this._setQuotedPrice(e),this.emit(R,e.floor_price))}},{key:"onProjectCalculateBookPriceStarted",value:function(){this.emit(F)}},{key:"onProjectCalculateBookPriceCompleted",value:function(e){this.emit(Y,e)}},{key:"onProjectCalculateBookPriceError",value:function(e){this.emit(I,e)}},{key:"onProjectBookSizeExistsStarted",value:function(){void 0!==this.project()&&this.emit(U)}},{key:"onProjectBookSizeExistsCompleted",value:function(e){void 0!==this.project()&&this.emit(V,e.doProjectsExist)}},{key:"onProjectPreflightSuccess",value:function(e){this.emit(N,e.data)}},{key:"onStartNewProject",value:function(){this._project=new i.default,this.emit(A)}},{key:"onSetProjectId",value:function(e){this._project.id=e.id,this._project.grouped=e.isExisting,this.emit(B)}},{key:"onPreviewReady",value:function(e){this.emit(K,e)}},{key:"onPreviewFailed",value:function(e){this.emit(q,e)}},{key:"onProjectConstantsLoaded",value:function(e){var t=!0,a=!1,n=void 0;try{for(var o,r=e.fields[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var l=o.value;this._projectConstants[l.key]=l}}catch(e){a=!0,n=e}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}this.emit(Q)}},{key:"_setQuotedPrice",value:function(e){return this.project().type===s.PRINT?new c.default(e.floor_price,e.retail_margin,e.printing_cost,e.net_royalty,e.cost_per_page):new u.default(e.price)}},{key:"handleActions",value:function(e){switch(e.type){case l.default.Project.ACKNOWLEDGE_PAGECOUNT_CHANGED:this.onAcknowledgePageCountChanged();break;case l.default.Project.BOOK_SIZE_TYPE_COMPLETE:this.emit(E,!0);break;case l.default.Project.BOOK_SIZE_TYPE_METADATA:this.emit(S,e.args.data);break;case l.default.Project.BOOK_SIZE_TYPE_RESET:this.onBookSizeTypeReset(e.args);break;case l.default.Project.CHANGE_PROJECT:case l.default.ProjectGroups.CLONE_PROJECT_IN_GROUP:this.onChangeProject(e.args);break;case l.default.Project.CHANGE_PROJECT_NOT_SAVED:this.onChangeProjectNotSaved(e.args);break;case l.default.Project.CHANGE_PROJECT_ERROR:this.onChangeProjectHasErrors(e.args.errors);break;case l.default.Project.COUPON_SPECS_LOADED:this.onCouponSpecsLoaded(e.args);break;case l.default.Project.SET_PROJECT_ID:this.onSetProjectId(e.args);break;case l.default.Project.LOAD_EBOOK_COUPONS:this.onEbookCouponsLoaded(e.args);break;case l.default.Project.LOAD_EBOOK_PREVIEW:this.onPreviewReady(e.args);break;case l.default.Project.LOAD_EBOOK_PREVIEW_FAILED:case l.default.Project.LOAD_EBOOK_PREVIEW_TIMEDOUT:this.onPreviewFailed(e.args);break;case l.default.Project.LOAD_PRICE_UPDATE_WINDOW:this.onLoadPriceUpdateWindow(e.args);break;case l.default.Project.GET_PREFLIGHT_STATUS_ERROR:this.emit(C,e.args.data);break;case l.default.Project.GET_PREFLIGHT_STATUS_SUCCESS:this.onProjectPreflightSuccess(e.args);break;case l.default.Project.LOAD_CATEGORIES:this.onLoadCategories(e.args);break;case l.default.Project.SEARCH_CATEGORIES:this.onSearchCategories(e.args);break;case l.default.Project.COVER_FORMATTING_SPECS:this.onCoverFormattingSpecsLoaded(e.args.data.coverSpecsDetail[0]);break;case l.default.Project.LOAD_NEW_PROJECT:this.onStartNewProject();break;case l.default.Project.DELETE_PROJECT:this.onDeleteProject();break;case l.default.Project.PROJECT_CONSTANTS_LOADED:this.onProjectConstantsLoaded(e.args.data);break;case l.default.Project.START_DELETE_PROJECT:this.onStartDeleteProject();break;case l.default.Project.START_PRICE_ESTIMATE:this.onProjectQuoteStarted();break;case l.default.Project.COMPLETE_PRICE_ESTIMATE:this.onProjectQuoteCompleted(e.args.quote);break;case l.default.Project.PDF_COVERSION_COMPLETE:this.emit(O);break;case l.default.Project.RESET_PRICE_ESTIMATE:this.onProjectQuoteReset(e.args.project);break;case l.default.Project.START_CALCULATE_BOOK_PRICE:this.onProjectCalculateBookPriceStarted();break;case l.default.Project.COMPLETE_CALCULATE_BOOK_PRICE:this.onProjectCalculateBookPriceCompleted(e.args);break;case l.default.Project.ERROR_CALCULATE_BOOK_PRICE:this.onProjectCalculateBookPriceError(e.args);break;case l.default.Project.START_PROJECT_BOOKSIZE_EXIST:this.onProjectBookSizeExistsStarted();break;case l.default.Project.COMPLETE_PROJECT_BOOKSIZE_EXIST:this.onProjectBookSizeExistsCompleted(e.args);break;case l.default.Project.REMOVE_UPLOAD_ERRORS:this.emit($);break;case l.default.Project.UPLOAD_SAMPLE_ATTACHMENT:this.emit(v,e.args.project);break;case l.default.Project.UPLOAD_ATTACHMENT_ERROR:this.emit(H);break;case l.default.Project.ORDER_STATUS_ERROR:this.emit(G,e.args.response);break;case l.default.Project.ORDER_STATUS_SET:this.emit(z);break;case l.default.Project.PUBLISH_ALERT_REMOVE:this.emit(X);break;case l.default.Project.SCHEDULED_PRICES:this.emit(J,e.args.prices);break;case l.default.Project.SET_SALE_STATUS:this.emit(te,e.args.id);break;case l.default.Project.SET_SALE_STATUS_ERROR:this.emit(ae,e.args);break;case l.default.Project.USER_COUPON_SAVED:this.emit(ne);break;case l.default.Project.USER_COUPON_SAVED_ERROR:this.emit(oe,e.args.errors)}}}])&&p(a.prototype,n),o&&p(a,o),t}());b.setMaxListeners(0),b.dispatchToken=n.default.register(b.handleActions.bind(b));var g=b;t.default=g;var v="attachmentReadyForPolling",E="bookSizeTypeComplete",S="bookSizeTypeMetaData",k="bookSizeTypeReset",P="couponSpecsLoaded",w="ebookCouponsLoaded",O="pdfConversionComplete",C="pollingAttachmentError",N="pollingAttachmentSuccess",_="projectChanged",T="projectChangedNotSaved",D="categoriesLoaded",j="categoriesSearched",M="coverFormattingSpecsLoaded",L="priceUpdateWindowLoaded",A="projectCreated",B="onProjectIdSet",x="onProjectQuoteStarted",R="onProjectQuoted",I="onProjectBookPriceSetError",F="onProjectBookPriceSetStarted",Y="onProjectBookPriceSet",U="onProjectBookSizeExistsStarted",V="onProjectBookSizeExists",W="onProjectChangedError",H="onUploadAttachmentError",G="orderStatusError",z="orderStatusSet",K="onPreviewReady",q="onPreviewFailed",$="removeUploadErrors",Q="projectConstantsLoaded",X="publishAlertRemove",Z="publishAlertShow",J="scheduledPrices",ee="startDeleteProject",te="setSaleStatus",ae="setSaleStatusError",ne="userCouponSaved",oe="userCouponSavedError"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=l(a(0)),u=a(2),i=a(24),c=l(a(34)),d=l(a(4)),f=n(a(33)),o=n(a(83)),r=n(a(55)),p=n(a(208)),m=l(a(52)),h=n(a(11)),y=n(a(10)),b=n(a(25)),g=l(a(29)),v=l(a(8)),E=n(a(14)),S=n(a(15)),k=l(a(39)),P=l(a(1510)),w=l(a(1511)),O=l(a(1512)),C=l(a(1513)),N=l(a(1514)),_=l(a(1515)),T=l(a(1516)),D=l(a(1517));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var x=function(e){function l(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a=this,t=!(n=L(l).call(this,e))||"object"!==j(n)&&"function"!=typeof n?B(a):n;var o=v.default.project(),r=d.default.getUser();return t.state={languages:null,isPrintPreOrder:o.isPrintPreOrder(),project:o,valid:!1,ordering:!1,placingOnSale:!1,errors:null,showPreOrderPutOnSaleError:!1,showPricingError:!1,showIsbnError:!1,user:r},t.onLanguageLoaded=t.onLanguageLoaded.bind(B(B(t))),t.getSummaryErrorContainer=t.getSummaryErrorContainer.bind(B(B(t))),t.onCorrectClick=t.onCorrectClick.bind(B(B(t))),t.onProjectChanged=t.onProjectChanged.bind(B(B(t))),t.onPublishChanges=t.onPublishChanges.bind(B(B(t))),t.onPutOnSale=t.onPutOnSale.bind(B(B(t))),t.onSetSaleStatusError=t.onSetSaleStatusError.bind(B(B(t))),t.onTakeOffSale=t.onTakeOffSale.bind(B(B(t))),t.onSubmitForApproval=t.onSubmitForApproval.bind(B(B(t))),t.onSubmitPreOrderFinal=t.onSubmitPreOrderFinal.bind(B(B(t))),t.onOrderStatusError=t.onOrderStatusError.bind(B(B(t))),t.onOrderStatusSet=t.onOrderStatusSet.bind(B(B(t))),t.onOrderCopy=t.onOrderCopy.bind(B(B(t))),t.onProjectAddedToCart=t.onProjectAddedToCart.bind(B(B(t))),t.onDebounceSubmitForApproval=(0,i.debounce)(5e3,!0,t.onSubmitForApproval),t.onDebunceOrderCopy=(0,i.debounce)(5e3,!0,t.onOrderCopy),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(l,s.default.Component),t=l,(a=[{key:"componentWillMount",value:function(){v.default.addLanguageListener(this.onLanguageLoaded),v.default.addProjectChangedListener(this.onProjectChanged),v.default.addOrderStatusErrorListener(this.onOrderStatusError),v.default.addOrderStatusSetListener(this.onOrderStatusSet),v.default.addSetSaleStatusErrorListener(this.onSetSaleStatusError),m.default.addProjectAddedListener(this.state.project.id,this.onProjectAddedToCart)}},{key:"componentDidMount",value:function(){E.getAllLanguages()}},{key:"componentWillUnmount",value:function(){v.default.removeLanguageListener(this.onLanguageLoaded),v.default.removeProjectChangedListener(this.onProjectChanged),v.default.removeOrderStatusSetListener(this.onOrderStatusSet),v.default.removeOrderStatusErrorListener(this.onOrderStatusError),v.default.removeSetSaleStatusErrorListener(this.onSetSaleStatusError),m.default.removeProjectAddedListener(this.state.project.id,this.onProjectAddedToCart)}},{key:"getSummaryErrorContainer",value:function(e){var t=null,a=S.CORRECTION_TYPES.FREE;if(e.inErrorStatus)if("184"==e.reasonCode||"185"==e.reasonCode||"186"==e.reasonCode){var n=s.default.createElement("p",null,s.default.createElement("span",{dangerouslySetInnerHTML:{__html:e.errorMessage}}));"184"==e.reasonCode?t=s.default.createElement(c.default,{messages:[n],type:"error"}):"185"==e.reasonCode?t=s.default.createElement(c.default,{messages:[n],type:"error"}):"186"==e.reasonCode&&(t=s.default.createElement(c.default,{messages:[n],type:"error"}))}else t=e.correction&&e.correction===a?s.default.createElement(_.default,null,s.default.createElement(D.default,null),s.default.createElement(T.default,{onCorrect:this.onCorrectClick})):s.default.createElement(_.default,null,s.default.createElement(D.default,null));return t}},{key:"onLanguageLoaded",value:function(){var e=v.default.allLanguages(),a=[];e.setting.map(function(e,t){return a.push({value:e.SettingId,label:e.SettingValue,separatorAbove:1==t})}),this.setState({languages:a})}},{key:"onProjectChanged",value:function(){this.setState({project:v.default.project()})}},{key:"onCorrectClick",value:function(){E.requestCorrection(v.default.project().id)}},{key:"onPutOnSale",value:function(){var a=this;v.default.project();y.showPutOnSaleModal(function(e,t){e?a.setState({placingOnSale:!0},function(){E.setSaleStatus(a.state.project.id,!0,!1,function(){var e={eventInfo:{eventName:"Put on Sale Click",eventAction:"putOnSaleClick",timeStamp:new Date},category:{primaryCategory:"Build A Book"}};b.omnitureActionInvoked(e,"onPutOnSaleClick"),u.browserHistory.push("/"+o.Base)})}):a.refs.progressButtons.enableButtons()})}},{key:"onSetSaleStatusError",value:function(e){var t=this,a=e[0].code;"COST_CHANGE_SALE_ERROR"===S.ERRORS[a]?(window.scrollTo(0,0),this.setState({showPricingError:!0})):S.ISBN_ERRORS.includes(a)?(window.scrollTo(0,0),this.setState({showIsbnError:!0})):"PREORDER_SALE_ERROR"===S.ERRORS[a]?(window.scrollTo(0,0),this.setState({showPreOrderPutOnSaleError:!0})):this.setState({showPricingError:!1,showIsbnError:!1}),setTimeout(function(){E.loadProject(t.state.project.id)},0)}},{key:"onPublishChanges",value:function(){var e=this;E.postChanges(this.state.project.id,function(){e.refs.progressButtons.enableButtons(),y.showNotificationModal("Your changes may take up to 24 hours to appear on BN.com.","Changes Submitted","OK",function(){return u.browserHistory.push("/"+o.Base)})})}},{key:"onTakeOffSale",value:function(){var n=this,e=v.default.project(),t=v.default.coupons(),a=d.default.getUser(),o=t?t.activeCoupons.length+t.scheduledCoupons.length:0;t&&0<o?y.showTakeOffSaleWithCouponModal(this.state.project.id,a,function(e,t){if(e){var a={eventInfo:{eventName:"Take off Sale Click",eventAction:"takeOffSaleClick",timeStamp:new Date},category:{primaryCategory:"Build A Book"}};b.omnitureActionInvoked(a,"onTakeOffSaleClick")}else n.refs.progressButtons.enableButtons()}):y.showTakeOffSaleModal(e.type,a,function(e,t){if(e){E.setSaleStatus(n.state.project.id,!1);var a={eventInfo:{eventName:"Take off Sale Click",eventAction:"takeOffSaleClick",timeStamp:new Date},category:{primaryCategory:"Build A Book"}};b.omnitureActionInvoked(a,"onTakeOffSaleClick")}else n.refs.progressButtons.enableButtons()})}},{key:"onSubmitForApproval",value:function(){E.setOrderStatus(this.state.project.id)}},{key:"onSubmitPreOrderFinal",value:function(){var a=this,n=v.default.project();y.showFinalFilesModal(n.uploadByDate,function(e,t){e?E.setSaleStatus(n.id,!0,!0,function(){return u.browserHistory.push("/"+o.Base)}):a.refs.progressButtons.enableButtons()})}},{key:"onOrderStatusError",value:function(e){var t=e[0].code;S.ISBN_ERRORS.includes(t)?(window.scrollTo(0,0),this.setState({showIsbnError:!0})):this.setState({showPricingError:!1,showIsbnError:!1})}},{key:"onOrderStatusSet",value:function(){setTimeout(function(){y.showNotificationModal("Once our editors approve the formatting and details, we'll send you an email notifying you that your book is ready to be ordered. You can make updates to your project after the review is complete.","Submitted for Approval","OK",function(){return u.browserHistory.push("/"+o.Base)})},0)}},{key:"onOrderCopy",value:function(){var a=this;this.state.user&&this.state.user.authorShareKey&&!d.default.hasContributorPageAccessPermission(h.ORDER_COPIES)?setTimeout(function(){y.showOrderCopyCompleteBookModalNoAccess(a.state.project.title,null!==a.state.project.coverFormat?a.state.project.coverFormatByKey.label:"",null!==a.state.project.pageSize?a.state.project.pageSizeByKey.label:"",a.state.project.coverThumbnail,function(e,t){e?u.browserHistory.push("/"+p.Base):a.setState({isOrdering:!1})})},0):(this.setState({ordering:!0}),r.addProject(this.state.project.id))}},{key:"onProjectAddedToCart",value:function(){var a=this,n=this.state.project;setTimeout(function(){var e,t;y.showOrderCopyCompleteBookModal(n.title,(t=v.default.project()).coverFormatByKey?t.coverFormatByKey.label:"",(e=v.default.project()).pageSizeByKey?e.pageSizeByKey.label:"",n.coverThumbnail,function(e,t){e?u.browserHistory.push("/"+p.Base):(a.refs.progressButtons.enableButtons(),a.setState({ordering:!1}),setTimeout(function(){E.loadProject(n.id)},0))})},0)}},{key:"renderProgressButtons",value:function(){var e=this.state.project,t=null,a=!1,n=null,o=!1;d.default.getUser();return e.isSPB||e.isEBook?e.allowedToPostChanges?(t="Publish Changes",n=this.onPublishChanges,this.state.isPrintPreOrder&&e.areAssetsComplete()&&(n=this.onSubmitPreOrderFinal)):"PROCESSING_ONSALE"===e.status||"LSI_ONSALE"===e.status?(t="Put On Sale",a=!0):e.allowedToPutOnSale?(t="Put On Sale",n=this.onPutOnSale,this.state.isPrintPreOrder&&e.areAssetsComplete()&&(n=this.onSubmitPreOrderFinal)):"PROCESSING_OFFSALE"===e.status?(t="Take Off Sale",a=!0):e.allowedToTakeOffSale?(t="Take Off Sale",n=this.onTakeOffSale):o=!0:e.isPOD&&(e.allowedVerification?(t="Submit for Approval",n=this.onSubmitForApproval):"PROCESSING_DROPSHIP"===e.status?(t="Submit for Approval",a=!0):e.allowedToOrder?(t="Order Copy",n=this.onOrderCopy,a=this.state.ordering):o=!0),s.default.createElement(g.default,{ref:"progressButtons",buttonText:t,next:n,disableNext:!1,actionTaken:a,hideNext:o,ignoreAllowEdit:!0})}},{key:"render",value:function(){var e=this.state.project,t=null,a=S.PROJECT_STATUSES,n=this.getSummaryErrorContainer(e);e.status===a.PROCESSING_ONSALE||e.status===a.LSI_ONSALE?t="Processing for Publication":e.status===a.PROCESSING_OFFSALE?t="Processing to Take Off Sale":e.status!==a.PROCESSING_DROPSHIP&&(e.status!==a.OFFSALE&&e.status!==a.EDITING||e.dropShipStatus!==a.PROCESSING_DROPSHIP&&e.dropShipStatus!==a.REQUESTED_DROPSHIP)?e.status===a.CORRECTING&&(t="Processing for Correction"):t="Review in Progress";var o="/"+f.Base+"/"+e.id+"/"+f.Details+"/",r=s.default.createElement("p",null,"Sorry, this ISBN is already registered with NOOK/Barnes & Noble or another publishing platform. You will have to ",s.default.createElement(u.Link,{to:o+f.DetailsIsbn},"enter another ISBN")," that has not already been used or create a free ISBN with Barnes & Noble Press."),l=s.default.createElement("p",null,"Please update your pre-order publication date as it needs to be 10 business days from today, and then put your book on sale."),i=s.default.createElement("p",null,"There was a recent print cost change to this book's size and type. Please go to ",s.default.createElement(u.Link,{to:o+f.DetailsPricing},"Pricing")," and enter a price that meets the new minimum retail price.");return s.default.createElement("div",{className:"summary"},this.state.showPricingError&&s.default.createElement(c.default,{messages:[i],type:"error"}),this.state.showIsbnError&&s.default.createElement(c.default,{messages:[r],type:"error"}),this.state.showPreOrderPutOnSaleError&&s.default.createElement(c.default,{messages:[l],type:"error"}),n,s.default.createElement("header",null,s.default.createElement("h1",null,"Review Your ",e.isEBook?"eBook":e.isSPB?"Print Book":"Book"," Summary"),s.default.createElement("p",null,"Please ensure all details are correct before ",e.isPOD?"you place your order":"publishing",".",s.default.createElement("br",null),"Sections marked in red have not yet been completed.")),s.default.createElement("section",null,this.state.preOrderWarning&&s.default.createElement(c.default,{messages:[this.state.preOrderWarning],type:"error"}),!e.isEBook&&s.default.createElement(w.default,{project:e}),s.default.createElement(C.default,{project:e}),s.default.createElement(O.default,{project:e}),this.state.languages&&s.default.createElement(P.default,{featureFlagConstants:h,allLanguages:this.state.languages,user:d.default.getUser()}),!e.isPOD&&s.default.createElement(N.default,{project:e})),s.default.createElement("div",{className:"page-buttons"},this.renderProgressButtons(),e.isSPB&&"PROCESSING_ONSALE"!==e.status&&"ONSALE"!==e.status&&(e.allowedVerification||"PROCESSING_DROPSHIP"===e.status||"PROCESSING_DROPSHIP"===e.dropShipStatus||"REQUESTED_DROPSHIP"===e.dropShipStatus)&&s.default.createElement("div",{className:"approve taller"},s.default.createElement("h3",null,"Would you like to order a copy of your book before putting it on sale?"),s.default.createElement("p",null,s.default.createElement("button",{className:"btn btn-primary btn-inline",disabled:"PROCESSING_DROPSHIP"===e.status||"REQUESTED_DROPSHIP"===e.dropShipStatus||!e.allowedVerification,onClick:this.onDebounceSubmitForApproval},"Submit for Approval"),"Â to have our team review your book details before you order.")),e.isSPB&&e.allowedToOrder&&s.default.createElement("div",{className:"approve taller"},s.default.createElement("h3",null,"We recommend first ordering a single proof to confirm print quality. Bulk orders for new titles may be canceled at our discretion.Â ",s.default.createElement("button",{className:"btn btn-primary btn-inline btn-s",disabled:this.state.ordering||this.state.placingOnSale,onClick:this.onDebunceOrderCopy},"Order Copy"))),e.isPOD&&e.allowedVerification&&s.default.createElement("div",{className:"approve"},s.default.createElement("p",null,"Our team will review your book details before you order.")),e.isPOD&&e.allowedToOrder&&s.default.createElement("div",{className:"approve"},s.default.createElement("h3",null,"We recommend first ordering a single proof to confirm print quality. Bulk orders for new titles may be canceled at our discretion."))),t&&s.default.createElement("div",{className:"process-status-display"},t),s.default.createElement(k.default,null))}}])&&M(t.prototype,a),n&&M(t,n),l}();t.default=x},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var b=d(a(0)),g=a(7),i=d(a(1)),v=a(245),E=a(2),S=d(a(4)),n=r(a(100)),k=(r(a(11)),r(a(17)),r(a(33))),o=r(a(14)),P=d(a(8)),w=r(a(15)),l=r(a(48)),s=d(a(45)),u=r(a(31)),c=d(a(79));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var O=n.PROMO_TYPE,C=n.PROMO_LABEL,N=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=m(r).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n;var o=P.default.project();return t.state={couponRows:null,expandDescription:!1,printingCost:0,retailPrice:o.price?o.price:null,bookDescription:o.shortDescription?o.shortDescription:null,royalty:0,scheduledPrices:[]},o.isEBook&&(t.state.eBookRetailAndDistrib="0"),t.onCopyUrl=t.onCopyUrl.bind(y(y(t))),t.onCouponsLoaded=t.onCouponsLoaded.bind(y(y(t))),t.onPriceQuoteCompleted=t.onPriceQuoteCompleted.bind(y(y(t))),t.onProjectCalculatePrice=t.onProjectCalculatePrice.bind(y(y(t))),t.onScheduledPricesLoaded=t.onScheduledPricesLoaded.bind(y(y(t))),t.onVendorInfoLoaded=t.onVendorInfoLoaded.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,b.default.Component),t=r,(a=[{key:"componentWillMount",value:function(){P.default.addEbookCouponsLoadedListener(this.onCouponsLoaded),P.default.addProjectCalculateBookPriceListener(this.onProjectCalculatePrice),P.default.addProjectQuoteListener(this.onPriceQuoteCompleted),P.default.addScheduledPricesListener(this.onScheduledPricesLoaded),s.default.addVendorInfoLoadedListener(this.onVendorInfoLoaded)}},{key:"componentWillUnmount",value:function(){P.default.removeEbookCouponsLoadedListener(this.onCouponsLoaded),P.default.removeProjectCalculateBookPriceListener(this.onProjectCalculatePrice),P.default.removeProjectQuoteListener(this.onPriceQuoteCompleted),s.default.removeVendorInfoLoadedListener(this.onVendorInfoLoaded)}},{key:"componentDidMount",value:function(){var e=P.default.project(),t=e.getBookSizeTypeParams();!e.isEBook&&e.getBookSizeAndTypeStatus(!0)?o.calculateQuotedBookPrice(e.type,t):this.state.retailPrice&&o.calculateBookPrice(e,this.state.retailPrice),s.default.loaded||l.loadVendorInfo(),e.isEBook&&(e.everOnSale&&o.scheduledPrices(e.id),e.bnid&&o.getEbookCoupons(e.bnid,"oldest"))}},{key:"onCopyUrl",value:function(){c.default.getToastStatus()||u.toggleToast(!0,"Link Copied to Clipboard")}},{key:"onCouponsLoaded",value:function(){var e=[],t=P.default.coupons(),a=t.activeCoupons,n=t.scheduledCoupons;if(0<a.length||0<n.length)for(var o=a.length>=n.length?a.length:n.length,r=a.length>n.length,l=0;l<o;l++)e.push(b.default.createElement("div",{key:l},0===l&&b.default.createElement("div",{className:"row"},a[l]&&b.default.createElement("dl",{className:"col-xs-6"},b.default.createElement("dt",null,"Current Promotions"),b.default.createElement("dd",{className:"hidden"})),n[l]&&b.default.createElement("dl",{className:"col-xs-6"},b.default.createElement("dt",null,"Future Promotions"),b.default.createElement("dd",{className:"hidden"}))),b.default.createElement("div",{key:l+10,className:"row coupon-row"},a[l]&&b.default.createElement("div",{className:(0,i.default)("col-xs-6",{"left-coupons":r&&0<n.length})},b.default.createElement("dl",null,b.default.createElement("dt",{className:"hidden"}),this._renderCoupon(a[l]))),0<l&&a[0]&&n[0]&&!a[l]&&b.default.createElement("div",{className:"col-xs-6"},b.default.createElement("dl",null)),n[l]&&b.default.createElement("div",{className:(0,i.default)("col-xs-6",{"right-coupons":!r&&0<a.length})},b.default.createElement("dl",null,b.default.createElement("dt",{className:"hidden"}),this._renderCoupon(n[l]))),0<l&&a[0]&&n[0]&&!n[l]&&b.default.createElement("div",{className:"col-xs-6"},b.default.createElement("dl",null)))));this.setState({couponRows:e})}},{key:"onPriceQuoteCompleted",value:function(){var e=P.default.project(),t=Number(e.quotedPrice.printCost),a=this.state.retailPrice?.55*this.state.retailPrice-t:null,n=null;e.quotedPrice&&0<e.quotedPrice.price&&(n=Number(e.quotedPrice.price).toFixed(2)),this.setState({printingCost:Number(t).toFixed(2),royalty:Number(a).toFixed(2),podPrice:n})}},{key:"onProjectCalculatePrice",value:function(e){this.setState({royalty:e.details.royalty,eBookRetailAndDistrib:e.details.retailDistribution})}},{key:"onScheduledPricesLoaded",value:function(a){var e=[];a&&a.length&&(a.forEach(function(e,t){a[t].status=e.status.toLowerCase(),a[t].startDate=e.startDate,a[t].startDateFormatted=(0,g.bn_moment)(e.startDate).format("MMMM D, YYYY"),a[t].price=Number(e.price).toFixed(2),a[t].retailPrice=Number(e.retailPrice).toFixed(2),a[t].royalty=Number(e.royalty).toFixed(2),a[t].endDate=e.endDate?e.endDate:null,a[t].endDateFormatted=e.endDate?(0,g.bn_moment)(e.endDate).format("MMMM D, YYYY"):null,a[t].endDatePrice=e.priceAtEnd?Number(e.priceAtEnd).toFixed(2):null}),e=a.filter(function(e){return"scheduled"===e.status}).reverse()),this.setState({scheduledPrices:e})}},{key:"onVendorInfoLoaded",value:function(){var e=function(o){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(e){var t,a,n;t=o,n=r[a=e],a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n})}return o}({},this.state);e.vendorLoaded=!0,this.setState(e)}},{key:"_renderCoupon",value:function(e){var t,a=!1,n=e.promoType===O.BOGO||e.promoType.BOGO_FREE?"N/A":e.couponCode,o="/projects/coupon?id="+e.id,r=(0,g.bn_moment)(e.endDate,"MM/DD/YYYY").format("MMM D, YYYY"),l=null,i=(0,g.bn_moment)(e.startDate,"MM/DD/YYYY"),s=i.format("dddd");return l=e.promoType===O.BOGO||e.promoType===O.BOGO_FREE?100!=+e.discountPercentage&&e.discountPercentage?"".concat(C.BOGO," ").concat(+e.discountPercentage,"% OFF"):"".concat(C.BOGO," FREE"):+e.discountPercentage+"% OFF",t="Saturday"===s||"Sunday"===s?i.clone().add(-7,"days").day(7):i.clone().add(-14,"days").day(7),"SCHEDULED"===e.status&&(0,g.bn_moment)().isSameOrBefore(t,"day")&&(a=!0),b.default.createElement("dd",{className:"coupon-info"},l,b.default.createElement("div",{className:"date-style"},i.format("MMM D, YYYY")," (12:00 AM ET) - ",r," (2:59 AM ET)"),b.default.createElement("div",{className:"lower-info"},b.default.createElement("span",{className:"coupon-code"},"CODE: ",b.default.createElement("span",{className:"text"},n))),b.default.createElement("div",{className:"edit-link"},a?b.default.createElement("a",{href:o},"Edit"):b.default.createElement("span",null,"Â ")))}},{key:"_renderValue",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return e&&e.length?t?b.default.createElement("span",{className:"description"},e):b.default.createElement("span",null,e):b.default.createElement("span",{className:"none-provided"},"None Provided")}},{key:"_renderOtherCategories",value:function(e){for(var t=[],a=2<e.length,n=1;n<e.length;n++)t.push(this._renderCategory(e[n],a));return t}},{key:"_renderCategory",value:function(e,t){return b.default.createElement("dd",{key:e.categoryId,className:(0,i.default)("small-margin-bottom",{"category-with-bullets":t}),dangerouslySetInnerHTML:{__html:e.categoryCrumbs}})}},{key:"_renderLongDescription",value:function(e,t,a,n){var o=e;return!t&&a&&(o=o.substring(0,a),e.length>a&&(o+="...")),b.default.createElement("dd",{className:"break-word"},b.default.createElement("span",{className:"description",dangerouslySetInnerHTML:{__html:o}}),!!a&&e.length>a&&b.default.createElement("div",{className:"expand-control"},t&&b.default.createElement("a",{onClick:n},"Show Less ",b.default.createElement("i",{className:"fa fa-angle-up"})),!t&&b.default.createElement("a",{onClick:n},"Show More ",b.default.createElement("i",{className:"fa fa-angle-down"}))))}},{key:"render",value:function(){var a=this,e=null,t=null,n=null,o=P.default.project(),r=null!==o.ageRange?w.AGE_RANGES.find(function(e){return e.value===o.ageRange}):null,l=null!==o.audience?w.AUDIENCES.find(function(e){return e.value===o.audience}):null,i="/"+k.Base+"/"+o.id+"/"+k.Details+"/",s=o.categories,u=(S.default.getUser().couponsAvailable,o.bnid&&o.status===w.PROJECT_STATUSES.ONSALE?"/projects/coupon?ean="+o.bnid:"/projects/coupon"),c=null,d=null!==o.languageCode?this.props.allLanguages.find(function(e){return e.value===o.languageCode}):null,f=o.publishedDate?(0,g.bn_moment)(o.publishedDate).format("MMMM D, YYYY"):null,p=null;if(o.publisherName&&0<o.publisherName.length&&(p=o.publisherName),null!==o.formatCode&&(c=o.formatCode===w.FORMAT_CODES.ENCRYPTED?"Yes":"No"),o.contributors.length){var m=0;e=o.contributors.map(function(t){return b.default.createElement("div",{className:"row contributor-row",key:m++},t.firstName&&b.default.createElement("div",{className:"col-xs-4"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Contributor's First Name"),b.default.createElement("dd",null,t.firstName))),b.default.createElement("div",{className:"col-xs-4"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Contributor's Last Name",b.default.createElement("span",null,"*")),b.default.createElement("dd",null,a._renderValue(t.lastName)))),b.default.createElement("div",{className:"col-xs-4"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Contributor's Role",b.default.createElement("span",null,"*")),b.default.createElement("dd",{className:"text-capitalize"},a._renderValue(Object.keys(w.CONTRIBUTOR_ENUMS).find(function(e){return w.CONTRIBUTOR_ENUMS[e]===t.role}))))))})}else e=b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-6"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Author's Last Name",b.default.createElement("span",null,"*")),b.default.createElement("dd",null,this._renderValue(null)))),b.default.createElement("div",{className:"col-xs-6"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Author's Role",b.default.createElement("span",null,"*")),b.default.createElement("dd",null,this._renderValue(null)))));if(o.reviews.length){var h=1;t=o.reviews.map(function(e){var t=h++;return b.default.createElement("span",{key:t},b.default.createElement("div",{className:"row bottom-margin"},e.firstName&&b.default.createElement("div",{className:"col-xs-4"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Reviewers's First Name"),b.default.createElement("dd",null,e.firstName))),e.lastName&&b.default.createElement("div",{className:"col-xs-4"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Reviewers's Last Name"),b.default.createElement("dd",null,e.lastName))),b.default.createElement("div",{className:"col-xs-4"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Source",b.default.createElement("span",null,"*")),b.default.createElement("dd",{className:"text-capitalize"},a._renderValue(e.source))))),b.default.createElement("div",{className:"row bottom-margin"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Review Excerpt #",t,b.default.createElement("span",null,"*")),b.default.createElement("dd",{className:"break-word"},a._renderLongDescription(e.text,!0,0))))))})}if(this.state.scheduledPrices.length){var y=1;n=this.state.scheduledPrices.map(function(e){return b.default.createElement("span",{key:y++},b.default.createElement("dd",null,"$"+e.price," ",b.default.createElement("span",{className:"scheduled-price-dates"},e.startDateFormatted," - ",null!==e.endDateFormatted?e.endDateFormatted:"Ongoing")),b.default.createElement("ul",{className:"list-unstyled"},b.default.createElement("li",null,"Retail & Distribution $",e.retailPrice),b.default.createElement("li",null,"Author Royalty Per ",o.isEBook?"eBook":"Print Book"," $",e.royalty)))})}return b.default.createElement("div",{className:"panel"},b.default.createElement("div",{className:"panel-body"},b.default.createElement("div",{className:"panel-section"},b.default.createElement("div",{className:"panel-header top-header"},b.default.createElement("div",{className:"section-number"},o.isEBook?"3":"4"),b.default.createElement("h2",null,"Book Details"),b.default.createElement("div",{className:"section-status"},!o.isPOD&&b.default.createElement("div",{className:"link"},b.default.createElement(E.Link,{to:i+k.DetailsAbout},"Edit Book Details")),b.default.createElement("span",{className:"sprite "+(o.getBookDetailsStatus(!0)?"success-md":"error-md")}))),b.default.createElement("div",{className:"panel-section-body panel-section-body-first"},!o.isPOD&&b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("h3",{className:"sub-section"},b.default.createElement(E.Link,{to:i+k.DetailsAbout},"Book Information")))),!o.isPOD&&b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-6"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Title",b.default.createElement("span",null,"*")),b.default.createElement("dd",{className:"break-word"},this._renderValue(o.title)),b.default.createElement("dt",null,"Publisher Name",b.default.createElement("span",null,"*")),b.default.createElement("dd",null,this._renderValue(p)),o.editionNumber&&b.default.createElement("div",{className:"not-required"},b.default.createElement("dt",null,"Edition Number"),b.default.createElement("dd",null,o.editionNumber)),o.inSeries&&b.default.createElement("div",{className:"not-required"},b.default.createElement("dt",null,"Series Name"),b.default.createElement("dd",null,this._renderValue(o.seriesName))),!o.inSeries&&b.default.createElement("div",{className:"bottom-gap"},b.default.createElement("dt",{className:"font-black inlineBlock"},"Is this book part of a series?*"),b.default.createElement("dd",{className:"inlineBlock"},"Â Â ",o.inSeries?"Yes":"No")))),b.default.createElement("div",{className:"col-xs-6"},b.default.createElement("dl",null,o.subtitle&&b.default.createElement("div",{className:"not-required"},b.default.createElement("dt",null,"Subtitle"),b.default.createElement("dd",{className:"break-word"},o.subtitle)),!o.subtitle&&b.default.createElement("div",{className:"not-required"},b.default.createElement("dt",null,"Â "),b.default.createElement("dd",null,"Â ")),b.default.createElement("dt",null,"Publication Date",b.default.createElement("span",null,"*")),b.default.createElement("dd",null,this._renderValue(f)),o.editionDescription&&b.default.createElement("div",{className:"not-required"},b.default.createElement("dt",null,"Edition Description"),b.default.createElement("dd",null,o.editionDescription)),o.seriesNumber&&b.default.createElement("div",{className:"not-required"},b.default.createElement("dt",null,"Series Number"),b.default.createElement("dd",null,this._renderValue(o.seriesNumber)))))),!o.isPOD&&b.default.createElement("div",{className:"row padding-top-10"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Default Book Description",b.default.createElement("span",null,"*")),b.default.createElement("dd",{className:"hidden"}),this.state.bookDescription&&b.default.createElement("div",{className:"break-word"},b.default.createElement("dt",{className:"hidden"}),this._renderLongDescription(o.shortDescription,!0,0)),!this.state.bookDescription&&b.default.createElement("dd",null,b.default.createElement("div",{className:"none-provided font-bold"},"None Provided")),o.description&&0<o.description.length&&b.default.createElement("dt",null,"Long Book Description"),o.description&&0<o.description.length&&this._renderLongDescription(o.description,this.state.expandDescription,500,function(){return a.setState({expandDescription:!a.state.expandDescription})})))),o.isPOD&&b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-6"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Title"),b.default.createElement("dd",{className:"break-word"},this._renderValue(o.title)))),b.default.createElement("div",{className:"col-xs-6"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Price Per Book"),b.default.createElement("dd",null,this.state.podPrice?"$"+this.state.podPrice:"TBD"))))),!o.isPOD&&b.default.createElement("div",{className:"panel-section-body"},b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("h3",{className:"sub-section"},b.default.createElement(E.Link,{to:i+k.DetailsAuthor},"Author(s) & Contributors")))),e,o.authorInfo&&b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("dl",null,b.default.createElement("dt",null,"About the Author(s)"),b.default.createElement("dd",{className:"break-word"},this._renderLongDescription(o.authorInfo,!0,0)))))),!o.isPOD&&b.default.createElement("div",{className:"panel-section-body"},b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("h3",{className:"sub-section"},b.default.createElement(E.Link,{to:i+k.DetailsCategories},"Audience")))),b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-6"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Language",b.default.createElement("span",null,"*")),b.default.createElement("dd",null,this._renderValue(d?d.label:null)),"JUV"===o.audience&&b.default.createElement("div",null,b.default.createElement("dt",null,"Audience Age Range",b.default.createElement("span",null,"*")),b.default.createElement("dd",null,this._renderValue(r?r.label:null))))),b.default.createElement("div",{className:"col-xs-6"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Audience",b.default.createElement("span",null,"*")),b.default.createElement("dd",null,this._renderValue(l?l.label:null)))))),!o.isPOD&&b.default.createElement("div",{className:"panel-section-body"},b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("h3",{className:"sub-section"},b.default.createElement(E.Link,{to:i+k.DetailsCategories},"Categories & Keywords")))),b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Primary Category",b.default.createElement("span",null,"*")),0<s.length&&this._renderCategory(s[0]),0===s.length&&b.default.createElement("dd",null,this._renderValue(null))))),1<o.categories.length&&b.default.createElement("div",{className:"row top-margin"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Other Categories"),this._renderOtherCategories(s)))),o.searchKeyWords&&b.default.createElement("div",{className:"row top-margin"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Keywords"),b.default.createElement("dd",null,o.searchKeyWords))))),!o.isPOD&&b.default.createElement("div",{className:"panel-section-body"},b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("h3",{className:"sub-section"},b.default.createElement(E.Link,{to:i+k.DetailsPricing},"Pricing")))),b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-6"},b.default.createElement("dl",{className:"prices"},b.default.createElement("dt",null,o.isEBook?"eBook":"Print Book"," Retail Price",b.default.createElement("span",null,"*")),this.state.retailPrice&&b.default.createElement("dd",null,"$"+this.state.retailPrice),!this.state.retailPrice&&b.default.createElement("dd",null,b.default.createElement("span",{className:"none-provided"},"None Provided")),this.state.retailPrice&&b.default.createElement("dt",{className:"hidden"}),this.state.retailPrice&&b.default.createElement("dd",null,b.default.createElement("ul",{className:"list-unstyled"},b.default.createElement("li",null,"Retail & Distribution $",this.state.eBookRetailAndDistrib||Number(.45*this.state.retailPrice).toFixed(2)),o.type!==w.EBOOK&&b.default.createElement("li",null,"Printing Cost $",this.state.printingCost),b.default.createElement("li",null,"Author Royalty Per ",o.isEBook?"eBook":"Print Book"," $",this.state.royalty))))),0<this.state.scheduledPrices.length&&b.default.createElement("div",{className:"col-xs-6"},b.default.createElement("dl",{className:"prices"},b.default.createElement("dt",null,"Scheduled Price Change"),n)))),o.isEBook&&b.default.createElement("div",{className:"panel-section-body"},b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("h3",{className:"sub-section"},b.default.createElement("a",{href:u},"Promotions")))),(!this.state.couponRows||0===this.state.couponRows.length)&&b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("dl",null,b.default.createElement("dt",{className:"hidden"}),b.default.createElement("dd",null,"You currently don't have any promotions scheduled. ","ONSALE"==o.status&&b.default.createElement("a",{href:u},"Create a promotion."))))),this.state.couponRows&&this.state.couponRows),!o.isPOD&&b.default.createElement("div",{className:"panel-section-body"},b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("h3",{className:"sub-section"},b.default.createElement(E.Link,{to:i+k.DetailsRights},"Rights & Other Information")))),b.default.createElement("div",{className:"row bottom-margin"},o.aiDeclaration?b.default.createElement("div",{className:"bottom-gap col-xs-12 section-body"},b.default.createElement("dl",null,b.default.createElement("dt",{className:"font-black inlineBlock"},"Is the content in this book created using artificial intelligence (AI)?",b.default.createElement("span",null,"*")),b.default.createElement("dd",{className:"inlineBlock font-bold"},"Â Â ","GENERATED"==o.aiDeclaration.images||"ASSISTED"==o.aiDeclaration.images||"GENERATED"==o.aiDeclaration.manuscript||"ASSISTED"==o.aiDeclaration.manuscript||"GENERATED"==o.aiDeclaration.translation||"ASSISTED"==o.aiDeclaration.translation?"Yes":"No")),("GENERATED"==o.aiDeclaration.manuscript||"ASSISTED"==o.aiDeclaration.manuscript)&&b.default.createElement("div",{className:"font-bold font-size-15"},"Manuscript - ","GENERATED"==o.aiDeclaration.manuscript?"AI-Created":"AI-Assisted"),("GENERATED"==o.aiDeclaration.images||"ASSISTED"==o.aiDeclaration.images)&&b.default.createElement("div",{className:"font-bold font-size-15"},"Cover and interior images and artwork - ","GENERATED"==o.aiDeclaration.images?"AI-Created":"AI-Assisted"),("GENERATED"==o.aiDeclaration.translation||"ASSISTED"==o.aiDeclaration.translation)&&b.default.createElement("div",{className:"font-bold font-size-15"},"Translations  - ","GENERATED"==o.aiDeclaration.translation?"AI-Created":"AI-Assisted")):b.default.createElement("div",{className:"bottom-gap col-xs-12 section-body"},b.default.createElement("dl",null,b.default.createElement("dt",{className:"font-black inlineBlock"},"Is the content in this book created using artificial intelligence (AI)? ",b.default.createElement("span",null,"*")," "),b.default.createElement("dd",{className:"inlineBlock "},b.default.createElement("span",{className:"none-provided"},"Â Â  None Provided")," ")))),b.default.createElement("div",{className:"row bottom-margin"},b.default.createElement("div",{className:"col-xs-4"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Public Domain",b.default.createElement("span",null,"*")),b.default.createElement("dd",null,o.isPublicDomain?"Yes":"No"))),b.default.createElement("div",{className:"col-xs-4"},o.isEBook&&b.default.createElement("dl",null,b.default.createElement("dt",null,"DRM Encryption",b.default.createElement("span",null,"*")),b.default.createElement("dd",null,this._renderValue(c))),!o.isEBook&&b.default.createElement("dl",null,b.default.createElement("dt",null,b.default.createElement(E.Link,{to:i+k.DetailsIsbn},"Print Book ISBN Number"),b.default.createElement("span",null,"*")),b.default.createElement("dd",null,this._renderValue(o.isbn),o.isbnTransferred?" (Transferred)":""))),b.default.createElement("div",{className:"col-xs-4"},o.isEBook&&o.bnid&&b.default.createElement("dl",null,b.default.createElement("dt",null,"eBook BNID"),b.default.createElement("dd",null,o.bnid))))),!o.isPOD&&0<o.reviews.length&&b.default.createElement("div",{className:"panel-section-body"},b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("h3",{className:"sub-section"},b.default.createElement(E.Link,{to:i+k.DetailsEditorials},"Editorial Reviews")))),t),!o.isPOD&&b.default.createElement("div",{className:"panel-section-body"},b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("h3",{className:"sub-section"},"barnesandnoble.com Product Page"))),b.default.createElement("div",{className:"row bottom-margin"},b.default.createElement("div",{className:"col-xs-12"},b.default.createElement("dl",null,b.default.createElement("dt",null,"Product URL"),null===o.productPageUrl&&b.default.createElement("dd",null,"If your book is on sale, you will see the BN.com Product Page URL here."),null!==o.productPageUrl&&b.default.createElement("dd",{className:"copy-to-clipboard"},b.default.createElement("a",{href:o.productPageUrl,target:"_blank"},o.productPageUrl),b.default.createElement(v.CopyToClipboard,{text:o.productPageUrl,onCopy:this.onCopyUrl},b.default.createElement("button",{className:"btn btn-primary btn-s",type:"button"},"Copy Link"))))))))))}}])&&p(t.prototype,a),n&&p(t,n),r}();t.default=N},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n},l=a(2),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(33));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.default.Component),a=t,(n=[{key:"_renderValue",value:function(e){return e&&e.length?r.default.createElement("span",null,e):r.default.createElement("span",{className:"none-provided"},"None Provided")}},{key:"render",value:function(){var e=this.props.project;return r.default.createElement("div",{className:"panel"},r.default.createElement("div",{className:"panel-body"},r.default.createElement("div",{className:"panel-section"},r.default.createElement("div",{className:"panel-header top-header"},r.default.createElement("div",{className:"section-number"},"1"),r.default.createElement("h2",null,"Book Size & Type"),r.default.createElement("div",{className:"section-status"},r.default.createElement("div",{className:"link"},r.default.createElement(l.Link,{to:"/"+i.Base+"/"+e.id+"/"+i.SizeAndType},"Edit Book Size & Type"))," ",r.default.createElement("span",{className:"sprite "+(e.getBookSizeAndTypeStatus(!0)?"success-md":"error-md")}))),r.default.createElement("div",{className:"panel-section-body"},r.default.createElement("div",{className:"col-xs-4"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Cover Format",r.default.createElement("span",null,"*")),r.default.createElement("dd",null,this._renderValue(e.coverFormat?e.coverFormatByKey.label:null)),r.default.createElement("dt",null,"Print Color",r.default.createElement("span",null,"*")),r.default.createElement("dd",null,this._renderValue(e.printColor?e.printColorByKey.label:null)))),r.default.createElement("div",{className:"col-xs-4"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Page Size",r.default.createElement("span",null,"*")),r.default.createElement("dd",null,this._renderValue(e.pageSize?e.pageSizeByKey.label:null)),r.default.createElement("dt",null,"Paper Color & Weight",r.default.createElement("span",null,"*")),r.default.createElement("dd",null,this._renderValue(e.paperColor?e.paperColorByKey.label:null)))),r.default.createElement("div",{className:"col-xs-4"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Page Count",r.default.createElement("span",null,"*")),r.default.createElement("dd",null,this._renderValue(e.pageCount)),r.default.createElement("dt",null,"Cover Finish",r.default.createElement("span",null,"*")),r.default.createElement("dd",null,this._renderValue(e.coverFinish?e.coverFinishByKey.label:null))))))))}}])&&s(a.prototype,n),o&&s(a,o),t}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=a(0))&&n.__esModule?n:{default:n},s=a(2),u=o(a(33)),c=o(a(15));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,f(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.default.Component),a=t,(n=[{key:"_renderValue",value:function(e,t){return e&&e.length?i.default.createElement("span",null,e):i.default.createElement("span",{className:"none-provided"},t||"None Provided")}},{key:"render",value:function(){var e,t,a=this.props.project,n=null,o=null,r=null,l="/"+u.Base+"/"+a.id+"/"+u.Cover+"/";return a.coverFile?(n=l+u.CoverUpload,o=i.default.createElement(s.Link,{className:"preview-link",to:l+u.CoverReview},"Preview")):n=l+(a.isEBook?u.CoverUpload:u.CoverType),a.preOrder&&(a.tempCover&&(r=i.default.createElement(s.Link,{className:"preview-link",to:l+u.CoverUpload},"Preview")),t=this._renderValue(a.coverTempFile)),e=a.coverType===c.COVER_TYPES.SEPARATE?i.default.createElement("span",{className:"no-bold"},"Front: ",i.default.createElement("strong",null,this._renderValue(a.coverFrontFile))," Back: ",i.default.createElement("strong",null,this._renderValue(a.coverBackFile))):this._renderValue(a.coverFile),i.default.createElement("div",{className:"panel"},i.default.createElement("div",{className:"panel-body"},i.default.createElement("div",{className:"panel-section"},i.default.createElement("div",{className:"panel-header top-header"},i.default.createElement("div",{className:"section-number"},a.isEBook?"2":"3"),i.default.createElement("h2",null,"Cover"),i.default.createElement("div",{className:"section-status"},i.default.createElement("div",{className:"link"},i.default.createElement(s.Link,{to:n},"Upload New Files"))," ",i.default.createElement("span",{className:"sprite "+(a.getCoverStatus(!0)?"success-md":"error-md")}))),i.default.createElement("div",{className:"panel-section-body clearfix"},i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12"},i.default.createElement("dl",null,a.isSPB&&a.preOrder&&i.default.createElement("dt",null,"Pre-Order Cover",i.default.createElement("span",null,"*")),a.isSPB&&a.preOrder&&i.default.createElement("dd",{className:"dont-wrap-text"},t,r),i.default.createElement("dt",null,a.isEBook?"eBook":"Print"," Cover",i.default.createElement("span",null,"*")),i.default.createElement("dd",{className:"dont-wrap-text cover-assets"},e,(a.coverFrontFile||a.coverBackFile)&&!a.coverFullApproved&&i.default.createElement("span",{className:"not-approved no-bold"},"(Not Approved)"),o))))))))}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(a(0)),i=a(2),s=n(a(11)),u=o(a(4)),c=n(a(33)),d=n(a(15));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,m(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,l.default.Component),a=t,(n=[{key:"_renderValue",value:function(e,t){return e&&e.length?l.default.createElement("span",null,e):l.default.createElement("span",{className:"none-provided"},t||"None Provided")}},{key:"render",value:function(){var e,t=this.props.project,a=null,n=null,o=null,r="/"+c.Base+"/"+t.id+"/"+c.Interior+"/";return t.interiorFile?(a=r+c.InteriorUpload,n=l.default.createElement(i.Link,{className:"preview-link",to:r+c.InteriorReview},"Preview")):a=r+(t.isEBook?c.InteriorUpload:c.InteriorFormatting),t.sampleFilePath?(a=r+c.InteriorUpload,o=l.default.createElement(i.Link,{className:"preview-link",to:r+c.InteriorReviewSample},"Preview")):a=r+(t.isEBook?c.InteriorUpload:c.InteriorFormatting),e=l.default.createElement(i.Link,{className:"preview-link",to:t.interiorPreFlightCheckStatus?r+c.InteriorSamplePreference:r+c.InteriorUpload},"Edit Preference"),l.default.createElement("div",{className:"panel"},l.default.createElement("div",{className:"panel-body"},l.default.createElement("div",{className:"panel-section"},l.default.createElement("div",{className:"panel-header top-header"},l.default.createElement("div",{className:"section-number"},t.isEBook?"1":"2"),l.default.createElement("h2",null,"Interior"),!u.default.hasCustomSamplingPermission(s.BAB_CUSTOM_SAMPLE)&&l.default.createElement("div",{className:"section-status"},l.default.createElement("div",{className:"link"},l.default.createElement(i.Link,{to:a},"Upload New Files"))," ",l.default.createElement("span",{className:"sprite "+(t.getInteriorStatus(!0)?"success-md":"error-md")})),u.default.hasCustomSamplingPermission(s.BAB_CUSTOM_SAMPLE)&&!t.isEBook&&l.default.createElement("div",{className:"section-status"},l.default.createElement("div",{className:"link"},l.default.createElement(i.Link,{to:a},"Upload New Files"))," ",l.default.createElement("span",{className:"sprite "+(t.getInteriorStatus(!0)?"success-md":"error-md")})),u.default.hasCustomSamplingPermission(s.BAB_CUSTOM_SAMPLE)&&t.isEBook&&l.default.createElement("div",{className:"section-status"},l.default.createElement("div",{className:"link"},l.default.createElement(i.Link,{to:a},"Upload New Files")),null===t.isDefaultSample&&l.default.createElement("span",{className:"sprite "+(null!=t.isDefaultSample?"success-md":"error-md")}),t.isDefaultSample===d.DEFAULT_SAMPLE&&l.default.createElement("span",{className:"sprite "+(t.getInteriorStatus(!0)?"success-md":"error-md")}),!(null===t.isDefaultSample||t.isDefaultSample===d.DEFAULT_SAMPLE)&&l.default.createElement("span",{className:"sprite "+(t.getSampleSummaryStatus(!0)?"success-md":"error-md")}),"none"==t.isDefaultSample&&l.default.createElement("span",{className:"sprite "+(t.getSampleSummaryStatus(!0)?"success-md":"error-md")}))),l.default.createElement("div",{className:"panel-section-body clearfix"},l.default.createElement("div",{className:"col-xs-12"},l.default.createElement("dl",null,l.default.createElement("dt",null,t.isEBook?"eBook":"Print"," Interior",l.default.createElement("span",null,"*")),l.default.createElement("dd",{className:"dont-wrap-text"},this._renderValue(t.interiorFile),t.interiorFile&&!t.interiorApproved&&l.default.createElement("span",{className:"not-approved no-bold"},"(Not Approved)"),n)),t.isEBook&&u.default.hasCustomSamplingPermission(s.BAB_CUSTOM_SAMPLE)&&l.default.createElement("dl",null,l.default.createElement("dt",null),l.default.createElement("dd",null),l.default.createElement("dt",null,"eBook Sample",l.default.createElement("span",null,"*")),null===t.isDefaultSample||t.isDefaultSample===d.DEFAULT_SAMPLE?null===t.isDefaultSample?l.default.createElement("dd",{className:"dont-wrap-text"},l.default.createElement("span",{className:"none-provided"},"None Provided")):l.default.createElement("dd",{className:"dont-wrap-text"},"Default Sample automatically includes the first 5% of your book.",e):l.default.createElement("dd",{className:"dont-wrap-text"},this._renderValue(t.sampleFilePath),t.sampleFilePath&&!t.sampleApproved&&l.default.createElement("span",{className:"not-approved no-bold"},"(Approval Required)"),o)))))))}}])&&f(a.prototype,n),o&&f(a,o),t}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(1)),s=o(a(4)),u=o(a(45)),c=n(a(33)),d=n(a(339));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).getStatus=t.getStatus.bind(y(y(t))),t.onSeeDetails=t.onSeeDetails.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default.Component),t=o,(a=[{key:"getStatus",value:function(){return"Active"===s.default.user.vendorStatus}},{key:"onSeeDetails",value:function(){"Active"===s.default.user.vendorStatus?l.browserHistory.push("/"+d.Base):l.browserHistory.push("/"+c.Base+"/"+this.props.project.id+"/"+c.Vendor+"/"+c.VendorPublisher)}},{key:"render",value:function(){var e=this.props.project;return r.default.createElement("div",{className:"panel"},r.default.createElement("div",{className:"panel-body"},r.default.createElement("div",{className:"panel-section"},r.default.createElement("div",{className:"panel-header top-header"},r.default.createElement("div",{className:"section-number"},e.isEBook?"4":"5"),r.default.createElement("h2",null,"Registration"),r.default.createElement("div",{className:"section-status"},r.default.createElement("div",{className:"link"},r.default.createElement("a",{onClick:this.onSeeDetails},"See Details"))," ",r.default.createElement("span",{className:"sprite "+(this.getStatus()?"success-md":"error-md")}))),r.default.createElement("div",{className:"panel-section-body"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("p",{className:"text-center"},"Vendor Registration Status",r.default.createElement("span",null,"*")," ",r.default.createElement("span",{className:(0,i.default)("vendor-status",s.default.user.vendorStatus?s.default.user.vendorStatus.toLowerCase():"")},u.default.toDisplayAccountStatus(s.default.user.vendorStatus))))))))}}])&&p(t.prototype,a),n&&p(t,n),o}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(8));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){l.default.project();return r.default.createElement("div",{className:"panel summary-error"},r.default.createElement("div",{className:"panel-body"},r.default.createElement("div",{className:"panel-section"},r.default.createElement("div",{className:"panel-section-body"},r.default.createElement("h3",null,"Your book for publication encountered an error while processing."),this.props.children))))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(a(24),n(a(62))),i=n(a(8));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?f(a):n).onSubmit=t.onSubmit.bind(f(f(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,r.default.Component),t=o,(a=[{key:"onSubmit",value:function(){this.props.onCorrect&&this.props.onCorrect()}},{key:"render",value:function(){i.default.project();return r.default.createElement("div",{className:"correction-error"},r.default.createElement("div",{className:"message"},"We can fix this formatting error for you. At this time, B&N Press is offering your first correction for free. Do you want us to fix the error and resubmit on your behalf?",r.default.createElement(l.default,{buttonText:"Yes, Fix the Error",click:this.onSubmit})))}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(8));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e=l.default.project();return r.default.createElement("div",null,!e.isEBook&&r.default.createElement("p",{className:"first"},"Unfortunately, an issue occurred with your print project. The error is described in more detail below. If you feel you can fix it, please click on the Upload New Files link below. If you need further help, please don't hesitate to contact our Customer Service department."),e.isEBook&&r.default.createElement("p",{className:"first"},"Unfortunately, an issue occurred with your project. If you feel like you can fix it, please click on the Upload New Files link below. If you need further help, please don't hesitate to contact our Customer Service department."),!!e.errorMessage&&r.default.createElement("p",null,r.default.createElement("span",{className:"prefix"},"ERROR:")," ",r.default.createElement("span",{dangerouslySetInnerHTML:{__html:e.errorMessage}})),!!e.errorMessageComment&&r.default.createElement("p",null,r.default.createElement("span",{className:"prefix"},"COMMENTS:")," ",r.default.createElement("span",{dangerouslySetInnerHTML:{__html:e.errorMessageComment}})))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(48)),i=n(a(45));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.default.Component),a=t,(n=[{key:"componentDidMount",value:function(){i.default.loaded||l.loadVendorInfo()}},{key:"render",value:function(){return r.default.createElement("div",{className:"vendor"},this.props.children)}}])&&s(a.prototype,n),o&&s(a,o),t}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(29)),i=o(a(3)),s=o(a(45)),u=n(a(48)),c=(n(a(32)),o(a(638)));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?h(a):n).state={loaded:s.default.loaded,valid:!1},t.onVendorInfoLoaded=t.onVendorInfoLoaded.bind(h(h(t))),t.onValidationChange=t.onValidationChange.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){s.default.addVendorInfoLoadedListener(this.onVendorInfoLoaded)}},{key:"componentWillUnmount",value:function(){s.default.removeVendorInfoLoadedListener(this.onVendorInfoLoaded),u.resetVendorInfo()}},{key:"onVendorInfoLoaded",value:function(){this.setState({loaded:s.default.loaded})}},{key:"onValidationChange",value:function(e){this.setState({valid:e})}},{key:"render",value:function(){var e=this;return r.default.createElement("div",{className:"publisher"},r.default.createElement("header",null,r.default.createElement("h1",null,"Enter Your Publisher Name & Website"),r.default.createElement("p",null,"If you donâ€™t have a publisher name, just enter your name.")),r.default.createElement("section",null,r.default.createElement("div",{className:"panel"},r.default.createElement("div",{className:"panel-body"},!this.state.loaded&&r.default.createElement("div",{className:"spinner-area"},r.default.createElement(i.default,{top:12})),this.state.loaded&&r.default.createElement(c.default,{ref:"publisherForm",forBaB:!0,onValidationChange:this.onValidationChange})))),r.default.createElement(l.default,{disableNext:!this.state.valid,next:function(){return e.refs.publisherForm.submit()}}))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(13)),i=o(a(1)),s=o(a(639)),u=o(a(29)),c=o(a(3)),d=o(a(34)),f=n(a(48)),p=o(a(45)),m=n(a(146)),h=n(a(14)),y=o(a(8));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,o=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=E(o).call(this,e))||"object"!==b(n)&&"function"!=typeof n?k(a):n).state={loaded:p.default.loaded,valid:!1,citizen:p.default.loaded?p.default.citizen:null,pageBanner:!1,errorMessages:[]},t.enableProgress=t.enableProgress.bind(k(k(t))),t.scrollToTop=t.scrollToTop.bind(k(k(t))),t.onVendorInfoLoaded=t.onVendorInfoLoaded.bind(k(k(t))),t.onValidationChanged=t.onValidationChanged.bind(k(k(t))),t.onSubmit=t.onSubmit.bind(k(k(t))),t.onSubmitCancelled=t.onSubmitCancelled.bind(k(k(t))),t.onTaxBankFormError=t.onTaxBankFormError.bind(k(k(t))),t.onPaymentErrorsReceived=t.onPaymentErrorsReceived.bind(k(k(t))),t.onErrorAlertClosed=t.onErrorAlertClosed.bind(k(k(t))),t.getBanners=t.getBanners.bind(k(k(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,r.default.Component),t=o,(a=[{key:"readOnly",value:function(){return p.default.accountStatus===m.AccountStatus.PENDING||p.default.accountStatus===m.AccountStatus.REJECTED||p.default.businessStatus===m.BusinessStatus.ON_HOLD||p.default.businessStatus===m.BusinessStatus.TERMINATED}},{key:"componentWillMount",value:function(){p.default.addVendorInfoLoadedListener(this.onVendorInfoLoaded),p.default.addPaymentErrorsReceivedListener(this.onPaymentErrorsReceived),y.default.addPageBannersListener(this.getBanners)}},{key:"componentDidMount",value:function(){this.refs.form&&this.refs.form.validateWithoutCommitting(),h.getPageBanners()}},{key:"componentWillUnmount",value:function(){p.default.removeVendorInfoLoadedListener(this.onVendorInfoLoaded),p.default.removePaymentErrorsReceivedListener(this.onPaymentErrorsReceived),f.resetVendorInfo(),y.default.removePageBannersListener(this.getBanners)}},{key:"getBanners",value:function(){var e=y.default.banners();this.setState({pageBanner:e.data.setting[1].SettingValue,pageBannerColor:e.data.setting[1].SettingId});var t=e.data.setting[1].SettingId.split("|");if(2==t.length){var a=g(t,2),n=a[0],o=a[1];this.setState({SettingId1:n,SettingId2:"true"===o})}}},{key:"onVendorInfoLoaded",value:function(){this.setState({loaded:!0,citizen:p.default.citizen})}},{key:"onValidationChanged",value:function(e){this.setState({valid:e})}},{key:"onTaxBankFormError",value:function(e){this.setState({errorMessages:[e]}),this.scrollToTop(),this.enableProgress()}},{key:"onSubmit",value:function(){this.refs.taxBankForm.submit()}},{key:"onSubmitCancelled",value:function(){this.enableProgress()}},{key:"onPaymentErrorsReceived",value:function(e){this.setState({errorMessages:[e[0].description]}),this.scrollToTop(),this.enableProgress()}},{key:"onErrorAlertClosed",value:function(){this.setState({errorMessages:[]})}},{key:"scrollToTop",value:function(){(0,l.default)(".page-scroller").scrollTop(0)}},{key:"enableProgress",value:function(){this.refs.cmdSave.enableButtons()}},{key:"parseHTMLString",value:function(e){for(var t,a=/<b>(.*?)<\/b>/g,n=[],o=0;null!==(t=a.exec(e));)t.index>o&&n.push(e.slice(o,t.index)),n.push(r.default.createElement("b",{key:t.index},t[1])),o=a.lastIndex;return o<e.length&&n.push(e.slice(o)),n}},{key:"render",value:function(){var e=this,t=p.default.statusMessage;return r.default.createElement("div",{className:"tax-and-bank-information overlay-parent"},r.default.createElement("div",{className:(0,i.default)("extra-overlay ",{"overlay-container-bab":this.state.SettingId2})},"Â "),this.state.pageBanner&&r.default.createElement("div",{className:(0,i.default)("extra-color-bab ",{"color-container-bab":this.state.pageBanner})},r.default.createElement(d.default,{messages:[this.parseHTMLString(this.state.pageBanner)],type:"alert"})),r.default.createElement("header",null,r.default.createElement("h1",null,"Tax & Banking Information"),r.default.createElement("p",null,"Youâ€™ll need to complete this vendor registration form before you can put your book on sale.")),r.default.createElement("section",null,0<this.state.errorMessages.length&&r.default.createElement(d.default,{dismissable:!0,messages:this.state.errorMessages,type:"error",onClose:this.onErrorAlertClosed}),this.state.loaded&&r.default.createElement("div",{className:"status-display row"},r.default.createElement("div",{className:"field col-xs-6"},r.default.createElement("span",{className:"label"},"Vendor Status:"),r.default.createElement("span",{className:(0,i.default)("value","vendor-status",p.default.accountStatus?p.default.accountStatus.toLowerCase():"")},p.default.displayAccountStatus)),r.default.createElement("div",{className:"field col-xs-6"},r.default.createElement("span",{className:"label"},"Vendor Number:"),r.default.createElement("span",{className:"value vendor-number"},p.default.vendorNumber)),t&&r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"status-message",dangerouslySetInnerHTML:{__html:t.message}}))),r.default.createElement("div",{className:"panel"+(this.state.loaded?" no-top-margin":"")},r.default.createElement("div",null,!this.state.loaded&&r.default.createElement("div",{className:"spinner-area"},r.default.createElement(c.default,{top:12})),this.state.loaded&&r.default.createElement(s.default,{ref:"taxBankForm",forBaB:!0,onSubmitCancelled:this.onSubmitCancelled,onValidationChanged:this.onValidationChanged,onError:this.onTaxBankFormError})))),r.default.createElement(u.default,{ref:"cmdSave",disableNext:!this.readOnly()&&!this.state.valid,next:function(){return e.refs.taxBankForm.onSubmit()}}))}}])&&v(t.prototype,a),n&&v(t,n),o}();t.default=P},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1)),i=o(a(12)),s=o(a(27)),u=o(a(23)),c=n(a(9)),d=n(a(221)),f=o(a(640)),p=n(a(48)),m=o(a(45));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=g(o).call(this,e))||"object"!==h(n)&&"function"!=typeof n?E(a):n).state=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){y(t,e,a[e])})}return t}({},t.buildTaxpayerTypeState(),{otherContainer:!1,companyContainer:!1,taxType:m.default.taxpayerType?m.default.taxpayerType:""}),t.onTaxpayerTypeChanged=t.onTaxpayerTypeChanged.bind(E(E(t))),t.sendToParent=t.sendToParent.bind(E(E(t))),t.callBackSent=t.callBackSent.bind(E(E(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){""!=this.state.taxType&&this.callBackSent(this.sendToParent)}},{key:"componentWillMount",value:function(){m.default.addUSTaxpayerTypeChangedListener(this.onTaxpayerTypeChanged)}},{key:"componentWillUnmount",value:function(){m.default.removeUSTaxpayerTypeChangedListener(this.onTaxpayerTypeChanged)}},{key:"sendToParent",value:function(){var e=this.state.taxType;this.props.setTaxTypePass(e)}},{key:"callBackSent",value:function(e){e()}},{key:"onTaxpayerTypeChanged",value:function(){var e=m.default.taxpayerType,t=m.default.taxpayerIdType;this.refs.taxpayerType.setValue(e),this.refs.taxpayerIdType&&this.refs.taxpayerIdType.setValue(t),this.setState(this.buildTaxpayerTypeState()),"SoleProprietor"!=e&&(0<document.getElementsByClassName("hide-w9-new-form-fields").length&&document.getElementById("w9NewFields").classList.remove("hide-w9-new-form-fields"),this.setState({taxType:"SoleProprietor"})),"SoleProprietor"==e&&(0==document.getElementsByClassName("hide-w9-new-form-fields").length&&document.getElementById("w9NewFields").classList.add("hide-w9-new-form-fields"),this.setState({taxType:"company"})),this.callBackSent(this.sendToParent)}},{key:"applyAddress",value:function(e){this.refs.addressForm.applyAddress(e)}},{key:"buildTaxpayerTypeState",value:function(){var e=m.default.isUSTaxpayerTypeForOther();return{showOtherTaxpayerFields:e,showIndividualTaxpayerFields:m.default.isUSTaxpayerTypeForIndividual()||e&&"SSN"===m.default.taxpayerIdType,showCompanyTaxpayerFields:m.default.isUSTaxpayerTypeForCompany()||e&&"EIN"===m.default.taxpayerIdType}}},{key:"render",value:function(){return r.default.createElement("div",y({className:"us-tax-form "},"className",(0,l.default)("us-tax-form",{"under-other":this.state.showOtherTaxpayerFields},{"under-company":this.state.showCompanyTaxpayerFields})),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12 additional-w9"},r.default.createElement(u.default,{ref:"taxpayerType",name:"taxpayerType",label:"Taxpayer Type",initDisabled:m.default.approved,options:m.default.taxpayerTypeOptions,initValue:m.default.taxpayerType,onChange:function(e){return p.setTaxpayerType(e.newValue)},rules:[c.required("Please enter a taxpayer type.")]}))),r.default.createElement("div",{id:"w9NewFields",className:(0,l.default)("row",{"hide-w9-new-form-fields":"Other"!=m.default.taxpayerType&&(this.state.showIndividualTaxpayerFields||void 0===m.default.taxpayerType)})},r.default.createElement("div",{className:"additional-container-w9"},r.default.createElement("div",{className:"col-xs-4 change-big-margin-default-row"},"Exemption Codes:",r.default.createElement("br",null),"(",r.default.createElement("a",{href:"https://www.irs.gov/pub/irs-pdf/iw9.pdf#page=2",target:"_blank",className:"underline-link"},"backup withholding and FATCA exemptions instructions"),")"),r.default.createElement("div",{className:"col-xs-4"},r.default.createElement(u.default,{ref:"payeeCode",name:"payeeCode",label:"Backup Withholding (optional)",options:m.default.withholdingOptions,initValue:m.default.withholding,onChange:function(e){return p.setWithholding(e.newValue)}})),r.default.createElement("div",{className:"col-xs-4"},r.default.createElement(u.default,{ref:"fatcaCode",name:"fatcaCode",label:"FATCA Reporting (optional)",options:m.default.fatcaOptions,initValue:m.default.fatca,onChange:function(e){return p.setFatca(e.newValue)}})))),this.state.showOtherTaxpayerFields&&r.default.createElement("div",null,r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(i.default,{name:"taxpayerEntity",label:"Your Taxpayer Entity",maxLength:25,initValue:m.default.taxpayerEntity,onChange:function(e){return p.setTaxpayerEntity(e.newValue)},rules:[c.required("Please enter a taxpayer entity.")]}))),r.default.createElement("div",{className:"row",id:"otherTaxContainer"}),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(s.default,{ref:"taxpayerIdType",name:"taxpayerIdType",label:"Do you have a SSN or EIN?",fieldLayout:"horizontal",radioLayout:"horizontal",initDisabled:m.default.approved,options:m.default.taxpayerIdTypeOptions,initValue:m.default.taxpayerIdType,onChange:function(e){return p.setTaxpayerIdType(e.newValue)},rules:[c.required("Please enter a SSN or EIN.")]})))),this.state.showIndividualTaxpayerFields&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-4"},r.default.createElement(i.default,{name:"ssn",label:"SSN",maxLength:11,initDisabled:m.default.approved,initValue:m.default.ssn,onChange:function(e){return p.setSSN(e.newValue)},rules:[c.required("Please enter a SSN."),d.ssn(m.default.originalSSN)]})),r.default.createElement("div",{className:"col-md-4"},r.default.createElement(i.default,{name:"taxFirstName",label:"First Name",maxLength:35,initValue:m.default.taxFirstName,onChange:function(e){return p.setTaxFirstName(e.newValue)},rules:[c.required("Please enter a first name."),c.pattern(/^[a-zA-Z0-9\s\-]*$/,"First name must contain only alphanumeric characters and hypens.")]})),r.default.createElement("div",{className:"col-md-4"},r.default.createElement(i.default,{name:"taxLastName",label:"Last Name",maxLength:35,initValue:m.default.taxLastName,onChange:function(e){return p.setTaxLastName(e.newValue)},rules:[c.required("Please enter a last name."),c.pattern(/^[a-zA-Z0-9\s\-]*$/,"Last name must contain only alphanumeric characters and hypens.")]}))),this.state.showCompanyTaxpayerFields&&r.default.createElement("div",null,r.default.createElement("div",{className:"row",id:"companyTaxContainer"}),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6"},r.default.createElement(i.default,{name:"ein",label:"EIN",maxLength:10,initDisabled:m.default.approved,initValue:m.default.ein,onChange:function(e){return p.setEIN(e.newValue)},rules:[c.required("Please enter an EIN."),d.ein(m.default.originalEIN)]})),r.default.createElement("div",{className:"col-md-6"},r.default.createElement(i.default,{name:"taxCompanyName",label:"Company Name",maxLength:60,initValue:m.default.taxCompanyName,onChange:function(e){return p.setTaxCompanyName(e.newValue)},rules:[c.required("Please enter a company name. "),c.maxLength(60)]})))),r.default.createElement(f.default,{ref:"addressForm"}))}}])&&b(t.prototype,a),n&&b(t,n),o}();t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(12)),i=o(a(27)),s=o(a(23)),u=n(a(9)),c=n(a(221)),d=o(a(640)),f=n(a(48)),p=o(a(45));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n).state={individualOrCompany:p.default.individualOrCompany,tin:p.default.tin,country:p.default.taxCountry},t.onIndividualOrCompanyChanged=t.onIndividualOrCompanyChanged.bind(g(g(t))),t.onTINChanged=t.onTINChanged.bind(g(g(t))),t.onCountryChanged=t.onCountryChanged.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){p.default.addIndividualOrCompanyChangedListener(this.onIndividualOrCompanyChanged),p.default.addTINChangedListener(this.onTINChanged)}},{key:"componentWillUnmount",value:function(){p.default.removeIndividualOrCompanyChangedListener(this.onIndividualOrCompanyChanged),p.default.removeTINChangedListener(this.onTINChanged)}},{key:"onIndividualOrCompanyChanged",value:function(){this.setState({individualOrCompany:p.default.individualOrCompany})}},{key:"onTINChanged",value:function(){this.setState({tin:p.default.tin})}},{key:"onCountryChanged",value:function(){this.setState({country:p.default.taxCountry})}},{key:"render",value:function(){var e=p.default.getCountryFormat(p.default.taxCountry);return r.default.createElement("div",{className:"non-us-tax-form"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(i.default,{ref:"individualOrCompany",name:"individualOrCompany",label:"Are you an individual or a company?",fieldLayout:"horizontal",radioLayout:"horizontal",disabled:p.default.approved,options:p.default.individualOrCompanyOptions,initValue:p.default.individualOrCompany,onChange:function(e){return f.setIndividualOrCompany(e.newValue)},rules:[u.required()]}))),"individual"===this.state.individualOrCompany&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6"},r.default.createElement(l.default,{name:"taxFirstName",label:"First Name",maxLength:35,initValue:p.default.taxFirstName,onChange:function(e){return f.setTaxFirstName(e.newValue)},rules:[u.required("Please enter a first name."),u.pattern(/^[a-zA-Z0-9\s\-]*$/,"First name must contain only alphanumeric characters and hypens.")]})),r.default.createElement("div",{className:"col-md-6"},r.default.createElement(l.default,{name:"taxLastName",label:"Last Name",maxLength:35,initValue:p.default.taxLastName,onChange:function(e){return f.setTaxLastName(e.newValue)},rules:[u.required("Please enter a last name."),u.pattern(/^[a-zA-Z0-9\s\-]*$/,"Last name must contain only alphanumeric characters and hypens.")]}))),"company"===this.state.individualOrCompany&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(l.default,{name:"taxCompanyName",label:"Company Name",maxLength:60,initValue:p.default.taxCompanyName,onChange:function(e){return f.setTaxCompanyName(e.newValue)},rules:[u.required("Please enter a company name. "),u.maxLength(60)]}))),r.default.createElement(d.default,{excludePhone:!0,onCountryChanged:this.onCountryChanged}),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6"},r.default.createElement(l.default,{name:"tin",label:e.tin.label,maxLength:e.tin.length,initDisabled:p.default.approved&&p.default.originalTIN&&0<p.default.originalTIN.length,initValue:p.default.tin,onChange:function(e){return f.setTIN(e.newValue)},rules:[c.tin(p.default.originalTIN)]})),r.default.createElement("div",{className:"col-md-6"},r.default.createElement(l.default,{name:"vat",label:e.vat.label,maxLength:e.vat.length,initValue:p.default.vat,onChange:function(e){return f.setVAT(e.newValue)},rules:[c.vat()]}))),this.state.tin&&0<this.state.tin.length&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(s.default,{ref:"taxpayerType",name:"taxpayerType",label:"Taxpayer Type",initDisabled:p.default.approved&&p.default.originalTIN&&0<p.default.originalTIN.length,options:p.default.taxpayerTypeOptions,initValue:p.default.taxpayerType,onChange:function(e){return f.setTaxpayerType(e.newValue)},rules:[u.required()]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6"},r.default.createElement(l.default,{name:"phone",label:"Phone Number",maxLength:18,initValue:p.default.phone,onChange:function(e){return f.setPhone(e.newValue)},rules:[u.required("Please enter a phone number."),c.phoneNumber()]}))))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(4)),i=(n(a(11)),o(a(12))),s=o(a(27)),u=n(a(9)),c=o(a(23)),d=n(a(48)),f=o(a(45)),p=(n(a(146)),n(a(221)));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n).state={accountOwnerType:f.default.accountOwnerType,currency:f.default.currency,ibanRuleMessage:f.default.bankCountry?t.setIbanMessage(f.default.bankCountry):"Please enter an IBAN."},t.onAccountOwnerTypeChanged=t.onAccountOwnerTypeChanged.bind(g(g(t))),t.onBankCountryChanged=t.onBankCountryChanged.bind(g(g(t))),t.setIbanMessage=t.setIbanMessage.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){f.default.addAccountOwnerTypeListener(this.onAccountOwnerTypeChanged),f.default.addBankCountryListener(this.onBankCountryChanged)}},{key:"componentWillUnmount",value:function(){f.default.removeAccountOwnerTypeListener(this.onAccountOwnerTypeChanged),f.default.removeBankCountryListener(this.onBankCountryChanged)}},{key:"onAccountOwnerTypeChanged",value:function(){this.setState({accountOwnerType:f.default.accountOwnerType})}},{key:"onBankCountryChanged",value:function(e){this.setState({currency:f.default.currency}),this.refs.currency&&this.refs.currency.setValue(f.default.currency),e&&(d.setBankCountry(e),this.setState({ibanRuleMessage:this.setIbanMessage(e)}))}},{key:"setBankName",value:function(e){var t={bankName:e};f.default.setBankName(t)}},{key:"setAccountNumber",value:function(e){var t={accountNumber:e};f.default.setAccountNumber(t)}},{key:"setIBAN",value:function(e){var t={iban:e};f.default.setIBAN(t)}},{key:"setSWIFT",value:function(e){var t={swift:e};f.default.setSWIFT(t)}},{key:"setIbanMessage",value:function(e){var t="Please enter an IBAN.";return"AU"===e||"NZ"===e?t="Please enter a BSB number.":"CA"===e&&(t="Please enter a routing number."),t}},{key:"render",value:function(){var e,t=this;"no"==f.default.citizen&&(e=f.default.getBankCountryFormat(f.default.bankCountry));l.default.getUser();var a="yes"===f.default.citizen||"no"===f.default.citizen&&"US"===f.default.bankCountry;return r.default.createElement("div",{className:"bank-form"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12 info-message"},"This is where youâ€™ll receive payment for sales of your book. If you want to update your account at any time, please do so by 5 p.m. EST on the 19th of the month for the updates to be reflected in that monthâ€™s payment.")),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(s.default,{name:"accountOwnerType",label:"Does this account belong to an individual or company?",options:f.default.individualOrCompanyOptions,initValue:f.default.accountOwnerType,onChange:function(e){return d.setAccountOwnerType(e.newValue)},rules:[u.required()]}))),"individual"===this.state.accountOwnerType&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6"},r.default.createElement(i.default,{name:"accountOwnerFirstName",label:"First Name",maxLength:35,initValue:f.default.accountOwnerFirstName,onChange:function(e){return d.setAccountOwnerFirstName(e.newValue)},rules:[u.required("Please enter a first name."),u.pattern(/^[a-zA-Z0-9\s\-]*$/,"First name must contain only alphanumeric characters and hypens.")]})),r.default.createElement("div",{className:"col-md-6"},r.default.createElement(i.default,{name:"accountOwnerLastName",label:"Last Name",maxLength:35,initValue:f.default.accountOwnerLastName,onChange:function(e){return d.setAccountOwnerLastName(e.newValue)},rules:[u.required("Please enter a last name."),u.pattern(/^[a-zA-Z0-9\s\-]*$/,"Last name must contain only alphanumeric characters and hypens.")]}))),"company"===this.state.accountOwnerType&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(i.default,{name:"accountOwnerCompanyName",label:"Company Name",maxLength:60,initValue:f.default.accountOwnerCompanyName,onChange:function(e){return d.setAccountOwnerCompanyName(e.newValue)},rules:[u.required("Please enter a company name."),u.maxLength(60)]}))),"no"===f.default.citizen&&r.default.createElement("div",null,r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6"},r.default.createElement(c.default,{name:"bankCountry",label:"Bank Country",options:f.default.bankCountryOptions,initValue:f.default.bankCountry,onChange:function(e){return t.onBankCountryChanged(e.newValue)},rules:[u.required("Please enter a bank country.")]})),r.default.createElement("div",{className:"col-md-6"},r.default.createElement(i.default,{ref:"currency",name:"currency",label:"Currency of Payment",readOnly:!0,initValue:this.state.currency}),e.currency.usdNote&&r.default.createElement("span",{style:{fontSize:"11px"}},"Note: You will be paid in USD ($). Your bank will be responsible for converting to your local currency at the time of payment."))),f.default.bankCountry&&!a&&r.default.createElement("div",null,r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6"},r.default.createElement(i.default,{name:"bankName",ref:"bankName",label:"Bank Name",maxLength:60,initValue:f.default.bankName,onChange:function(e){return t.setBankName(e.newValue)},rules:[u.required("Please enter a bank name. ")]})),r.default.createElement("div",{className:"col-md-6"},e.accountNumber&&r.default.createElement(i.default,{name:"accountNumber",ref:"accountNumber",label:e.accountNumber.label,maxLength:e.accountNumber.length,initValue:f.default.originalAccountNumber,onChange:function(e){return t.setAccountNumber(e.newValue)},rules:[u.required("Please enter an account number."),p.accountNumber(f.default.originalAccountNumber)]}),!e.accountNumber&&r.default.createElement(i.default,{name:"accountNumber",ref:"accountNumber",label:"Account Number",maxLength:100,initValue:f.default.originalAccountNumber,onChange:function(e){return d.setAccountNumber(e.newValue)},rules:[u.required("Please enter an account number."),p.accountNumber(f.default.originalAccountNumber)]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6"},r.default.createElement(i.default,{name:"iban",ref:"iban",label:e.iban.label,maxLength:e.iban.length,initValue:f.default.iban,onChange:function(e){return t.setIBAN(e.newValue)},rules:[u.required(this.state.ibanRuleMessage),p.iban(f.default.originalIBAN)]})),r.default.createElement("div",{className:"col-md-6"},r.default.createElement(i.default,{name:"swift",ref:"swift",label:e.swift.label,maxLength:e.swift.length,initValue:f.default.swift,onChange:function(e){return t.setSWIFT(e.newValue)},rules:[u.required("Please enter a SWIFT."),p.swift()]}))))),a&&r.default.createElement("div",null,"yes"===f.default.citizen&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12 info-message"},"Currency of Payment: US Dollar ($)")),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(s.default,{name:"accountType",label:"What type of account will you use?",options:f.default.accountTypeOptions,initValue:f.default.accountType,onChange:function(e){return d.setAccountType(e.newValue)},rules:[u.required()]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-4"},r.default.createElement(i.default,{name:"bankName",ref:"bankName",label:"Bank Name",maxLength:60,initValue:f.default.bankName,onChange:function(e){return t.setBankName(e.newValue)},rules:[u.required("Please enter a bank name. ")]})),r.default.createElement("div",{className:"col-md-4"},r.default.createElement(i.default,{name:"routingNumber",label:"Routing Number",maxLength:15,initValue:f.default.routingNumber,onChange:function(e){return d.setRoutingNumber(e.newValue)},rules:[u.required("Please enter a routing number."),u.pattern(/^[0-9]*$/,"Routing number must contain only digits."),p.routingNumber()]})),r.default.createElement("div",{className:"col-md-4"},r.default.createElement(i.default,{name:"accountNumber",label:"Account Number",maxLength:100,initValue:f.default.originalAccountNumber,onChange:function(e){return d.setAccountNumber(e.newValue)},rules:[u.required("Please enter an account number."),p.accountNumber(f.default.originalAccountNumber)]})))))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(39)),i=n(a(1525));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e=this.props.location.pathname.split("/")[2]+Math.random();return r.default.createElement("div",{className:"build-a-book"},r.default.createElement("div",{className:"container-fluid welcome-container"},r.default.createElement(i.default,null,r.default.cloneElement(this.props.children,{key:e}))),r.default.createElement(l.default,null))}}])&&s(a.prototype,n),o&&s(a,o),t}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0));n(a(1));function n(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=s(o).call(this,e))||"object"!==l(n)&&"function"!=typeof n?c(a):n).state={animationLength:t.props.animationLength||200,currentChild:t.props.children?r.default.Children.only(t.props.children):null,nextChild:null,transform:"translate3d(0, 0, 0)",update:!1},t.queueNextChild=t.queueNextChild.bind(c(c(t))),t.resetView=t.resetView.bind(c(c(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){var t=!!e.children&&r.default.Children.only(e.children);clearTimeout(this.timeoutID),t&&t.key===this.state.currentChild.key?this.setState({update:!1,currentChild:t}):this.setState({nextChild:t,update:!0})}},{key:"componentDidUpdate",value:function(){var e,t=this;this.state.update&&!1!==this.state.currentChild&&(this.state.nextChild||!1===this.state.nextChild?(e=this.queueNextChild,this.currentChild.style.transform="translate3d(-100%, 0, 0)",requestAnimationFrame(function(){t.currentChild.style.opacity=0})):(e=this.resetView,this.currentChild.style.transform="translate3d(100%, 0, 0)"),this.timeoutID=setTimeout(e,this.state.animationLength))}},{key:"queueNextChild",value:function(){this.setState({currentChild:this.state.nextChild,nextChild:null})}},{key:"resetView",value:function(){this.currentChild.style.opacity=1,this.currentChild.style.transform="translate3d(0, 0, 0)"}},{key:"render",value:function(){var t=this,e=this.state,a=e.transform,n=e.animationLength,o={transform:a,transition:"all ease-out ".concat(n,"ms")};return r.default.createElement("div",{className:this.props.className},r.default.createElement("div",{ref:function(e){return t.currentChild=e},style:o},this.state.currentChild))}}])&&i(t.prototype,a),n&&i(t,n),o}();o.propTypes={children:r.default.PropTypes.element,animationLength:r.default.PropTypes.number};var d=o;t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(82)),s=o(a(50)),u=(n(a(11)),n(a(17)),n(a(33))),c=n(a(25)),d=o(a(173)),f=o(a(29)),p=n(a(14)),m=n(a(86)),h=o(a(8)),y=n(a(15)),b=o(a(64)),g=o(a(1527));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=S(o).call(this,e))||"object"!==v(n)&&"function"!=typeof n?P(a):n).state={projectReset:!1,choice:null},t.buildPricedProject=t.buildPricedProject.bind(P(P(t))),t.onProjectCreatedWithoutSave=t.onProjectCreatedWithoutSave.bind(P(P(t))),t.onProjectCreated=t.onProjectCreated.bind(P(P(t))),t.onPrintSelected=t.onPrintSelected.bind(P(P(t))),t.onEBookSelected=t.onEBookSelected.bind(P(P(t))),t.onSubmit=t.onSubmit.bind(P(P(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var e=h.default.project(),t=window.location.search,a=1<t.length?i.default.parse(t.substring(1)):{};a.type&&h.default.isValidProjectType(a.type)?(this.setState({projectReset:!1}),e=this.buildPricedProject(a),p.updateProjectWithoutSave(e)):null===e||null!==e.id?(this.setState({projectReset:!1}),p.startNewProject()):this.setState({projectReset:!0})}},{key:"componentWillMount",value:function(){h.default.addProjectChangedNotSavedListener(this.onProjectCreatedWithoutSave),h.default.addProjectCreatedListener(this.onProjectCreated),s.default.preventIllegalAccess()}},{key:"componentWillUnmount",value:function(){h.default.removeProjectChangedNotSavedListener(this.onProjectCreatedWithoutSave),h.default.removeProjectCreatedListener(this.onProjectCreated)}},{key:"buildPricedProject",value:function(e){var t=new b.default;return t.isSetProject=!0,t.type=e.type,t.type===y.EBOOK?t.price=e.price:(t.type===y.PRINT&&(t.price=e.price),t.pageCount=e.pageCount,t.coverFormat=e.coverFormat,t.pageSize=e.pageSize,t.printColor=e.printColor,t.paperColor=e.paperColor,t.coverFinish=e.coverFinish),t}},{key:"onProjectCreated",value:function(){this.setState({projectReset:!0})}},{key:"onProjectCreatedWithoutSave",value:function(){this.setState({projectReset:!0},function(){l.browserHistory.replace("/"+u.Base+"/"+u.CreateBookTitle)})}},{key:"onPrintSelected",value:function(){this.setState({choice:y.PRINT})}},{key:"onEBookSelected",value:function(){this.setState({choice:y.EBOOK})}},{key:"onSubmit",value:function(){var e=new g.default;e.type=this.state.choice;var t=e.toProject(h.default.project());t.isEBook&&t.isGroupConfirmed?m.clone(t,!0,!0):p.updateProject(t,!0);var a={eventInfo:{eventName:"Book Version Next Click",eventAction:"bookVersionNextClick",timeStamp:new Date},category:{primaryCategory:"Build A Book"},attributes:{type:this.state.choice===y.EBOOK?"eBook":"Print"}};c.omnitureActionInvoked(a,"onBookVersionNextClick")}},{key:"render",value:function(){if(!this.state.projectReset)return null;var e=[{icon:"print-not-selected",iconSelected:"print-selected",key:y.PRINT,onSelectIcon:this.onPrintSelected,text:"Print"},{icon:"ebook-not-selected",iconSelected:"ebook-selected",key:y.EBOOK,onSelectIcon:this.onEBookSelected,text:"eBook"}];return r.default.createElement("div",{className:"welcome-container"},r.default.createElement("header",null,r.default.createElement("h1",null,"Let's get started on your book"),r.default.createElement("p",null,"What type of book would you like to create?"),r.default.createElement("p",{className:"small"},"You can always create another version of this book later.")),r.default.createElement("section",null,r.default.createElement("div",{className:"btn-container"},r.default.createElement(d.default,{options:e,selected:this.state.choice})),r.default.createElement(f.default,{buttonText:"Next",disableNext:!this.state.choice,next:this.onSubmit,visible:!0})))}}])&&E(t.prototype,a),n&&E(t,n),o}();t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=a(64))&&n.__esModule?n:{default:n};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=null}var t,a,n;return t=e,(a=[{key:"toProject",value:function(e){var t;return(t=e?e.clone():new o.default).type=this.type,t}}])&&r(t.prototype,a),n&&r(t,n),e}();t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(50)),i=(n(a(11)),n(a(17)),o(a(173))),s=o(a(29)),u=n(a(14)),c=n(a(86)),d=n(a(10)),f=n(a(32)),p=o(a(8));o(a(64)),o(a(641));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n).state={choice:null},t.onYesSelected=t.onYesSelected.bind(g(g(t))),t.onNoSelected=t.onNoSelected.bind(g(g(t))),t.workProject=t.workProject.bind(g(g(t))),t.onSubmit=t.onSubmit.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){l.default.preventIllegalAccess()}},{key:"onYesSelected",value:function(){this.setState({choice:"yes"})}},{key:"onNoSelected",value:function(){this.setState({choice:"no"})}},{key:"workProject",value:function(){var e=p.default.project();e.isEBook?(e=p.default.project(),c.clone(e,!0,!0)):f.go("next")}},{key:"onSubmit",value:function(){var a=this,n=p.default.project().clone();"yes"===this.state.choice&&n.grouped?this.workProject():d.showConfirmationModal("Different Book?","If this is a different book, then please change your book title.","OK","Cancel",function(e,t){e?((n=p.default.project()).grouped=!1,n.groupProjectId=null,n.isGroupConfirmed=!1,u.updateProject(n,!1),f.go("back")):a.refs.progress.enableButtons()})}},{key:"render",value:function(){var e=[{icon:"associate-not-selected",iconSelected:"associate-selected",key:"yes",onSelectIcon:this.onYesSelected,text:"Yes, it's the same book"},{icon:"dont-associate-not-selected",iconSelected:"dont-associate-selected",key:"no",onSelectIcon:this.onNoSelected,text:"No, it's a different book"}],t=p.default.project();return r.default.createElement("div",{className:"welcome-container"},r.default.createElement("header",null,r.default.createElement("h1",null,"You have an existing book with this title"),r.default.createElement("p",null,"Do you want to associate this book with your other formats of ",r.default.createElement("i",null,t.title)," ? This will ensure that all versions of your book appear on the same product page on BN.com.")),r.default.createElement("section",null,r.default.createElement("div",{className:"btn-container"},r.default.createElement(i.default,{options:e,selected:this.state.choice})),r.default.createElement(s.default,{ref:"progress",buttonText:"Next",disableNext:null===this.state.choice,shouldHideBack:!0,next:this.onSubmit,visible:!0})))}}])&&h(t.prototype,a),n&&h(t,n),o}();(t.default=v).contextTypes={router:r.default.PropTypes.object.isRequired}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(4)),i=o(a(50)),s=(n(a(11)),n(a(17)),o(a(6))),u=o(a(12)),c=n(a(25)),d=o(a(29)),f=n(a(9)),p=n(a(14)),m=n(a(86)),h=o(a(8)),y=o(a(140)),b=(o(a(64)),o(a(641))),g=n(a(247));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=S(o).call(this,e))||"object"!==v(n)&&"function"!=typeof n?P(a):n).init=new b.default(h.default.project()),t.state={existingTitles:[],selectedTitle:void 0,shouldShow:!1,valid:!1},t.filterSuggestionMatches=t.filterSuggestionMatches.bind(P(P(t))),t.onSuggestionSelected=t.onSuggestionSelected.bind(P(P(t))),t.onExistingTitlesLoaded=t.onExistingTitlesLoaded.bind(P(P(t))),t.onFormValidationChange=t.onFormValidationChange.bind(P(P(t))),t.onClonePrep=t.onClonePrep.bind(P(P(t))),t.onChange=t.onChange.bind(P(P(t))),t.onSimulateSubmit=t.onSimulateSubmit.bind(P(P(t))),t.onSubmit=t.onSubmit.bind(P(P(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var e=h.default.project();e.grouped&&e.groupProjectId?this.onClonePrep({id:e.groupProjectId,title:e.title}):m.loadExistingTitles()}},{key:"componentWillMount",value:function(){y.default.addExistingTitlesLoadedListener(this.onExistingTitlesLoaded),i.default.preventIllegalAccess()}},{key:"componentWillUnmount",value:function(){y.default.removeExistingTitlesLoadedListener(this.onExistingTitlesLoaded)}},{key:"filterSuggestionMatches",value:function(e){return g.filterTitle(this.refs.selTitle.value(),e)}},{key:"onSuggestionSelected",value:function(t){var e=this.state.existingTitles.find(function(e){return t.id==e.id});return void 0!==e&&this.refs.selTitle.setValue(e.title),this.setState({selectedTitle:e}),!1}},{key:"onChange",value:function(e){void 0!==this.state.selectedTitle&&e.newValue!=this.state.selectedTitle.title&&this.setState({selectedTitle:void 0})}},{key:"onExistingTitlesLoaded",value:function(e){for(var t=this,a=0;a<e.length;a++){var n=e[a],o=1<n.projectCount?" versions)":" version)";n.projectCountLabel="("+n.projectCount.toString()+o,0<n.author.trim().length?n.suggestedTitle=n.title+" by "+n.author:n.suggestedTitle=n.title}this.setState({existingTitles:e,shouldShow:!0},function(){return t.refs.form.validateWithoutCommitting()})}},{key:"onFormValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"onClonePrep",value:function(e){var t=h.default.project();t.title=e.title,t.grouped=!0,t.groupProjectId=e.id,t.isEBook&&t.isGroupConfirmed?m.clone(t,!0,!0):p.updateProject(t,!0)}},{key:"onSimulateSubmit",value:function(){this.refs.progNext.clickNext()}},{key:"onSubmit",value:function(){var e,t=h.default.project(),a=this.refs.form.gather().title;if(e=void 0!==this.state.selectedTitle?this.state.selectedTitle:this.state.existingTitles.find(function(e){return!!e.title&&g.isTitleEqual(e.title,a)}))this.onClonePrep(e);else if(t.grouped&&t.isGroupConfirmed&&t.preOrder)t.preOrder=this.state.preOrderChecked,p.updateProject(t,!0);else{var n=new b.default;n.grouped=!1,n.isGroupConfirmed=!1,n.title=a,(t=n.toProject(h.default.project())).isEBook?p.createProject(t,!0):p.updateProject(t,!0)}var o={eventInfo:{eventName:"Book Title Next Click",eventAction:"bookTitleNextClick",timeStamp:new Date},category:{primaryCategory:"Build A Book"}};c.omnitureActionInvoked(o,"onBookTitleNextClick")}},{key:"render",value:function(){var e=this;if(!this.state.shouldShow)return null;h.default.project().isSPB,l.default.getUser();var t={labelKey:"suggestedTitle",rightLabelKey:"projectCountLabel",filter:this.filterSuggestionMatches,items:this.state.existingTitles?this.state.existingTitles:[]};return r.default.createElement("div",{className:"create-book-title"},r.default.createElement("header",null,r.default.createElement("h1",null,"Give your book a title")),r.default.createElement("section",null,r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(s.default,{ref:"form",name:"createBookTitleForm",onValidationChange:this.onFormValidationChange,onSubmit:this.onSimulateSubmit},r.default.createElement(u.default,{ref:"selTitle",name:"title",className:"title-control",label:"Book Title",labelAsPlaceholder:!0,showRemainingCharCount:!0,maxLength:120,suggestions:t,onChange:this.onChange,onSuggestionSelected:this.onSuggestionSelected,initValue:this.init.title,rules:[f.required(),f.maxLength(120)]})),r.default.createElement(d.default,{ref:"progNext",buttonText:"Next",disableNext:!this.state.valid,next:function(){return e.onSubmit()},visible:!0})))))}}])&&E(t.prototype,a),n&&E(t,n),o}();t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(4)),i=o(a(50)),s=(n(a(11)),n(a(17)),o(a(173))),u=o(a(29)),c=n(a(14)),d=o(a(8)),f=n(a(86)),p=n(a(15)),m=o(a(1531));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=b(o).call(this,e))||"object"!==h(n)&&"function"!=typeof n?v(a):n).state={choice:null,shouldShow:!1},t.onSellSelected=t.onSellSelected.bind(v(v(t))),t.onPersonalSelected=t.onPersonalSelected.bind(v(v(t))),t.onSubmit=t.onSubmit.bind(v(v(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){var e=this,t=d.default.project();t.isSetProject&&d.default.isValidProjectType(t.type)?c.createProject(t,!0):setTimeout(function(){e.setState({shouldShow:!0})},0),i.default.preventIllegalAccess()}},{key:"onSellSelected",value:function(){this.setState({choice:p.PRINT})}},{key:"onPersonalSelected",value:function(){this.setState({choice:p.POD})}},{key:"onSubmit",value:function(){var e=l.default.getUser(),t=new m.default;t.type=this.state.choice===p.POD?p.POD:p.PRINT;var a=t.toProject(d.default.project());a.grouped?f.clone(a,!0,0<e.spbPreSellDays||void 0):c.createProject(a,!0)}},{key:"render",value:function(){if(!this.state.shouldShow)return null;var e=[{icon:"sell-book-not-selected",iconSelected:"sell-book-selected",key:p.PRINT,onSelectIcon:this.onSellSelected,text:"Sell your book"},{icon:"personal-use-not-selected",iconSelected:"personal-use-selected",key:p.POD,onSelectIcon:this.onPersonalSelected,text:"Keep it personal"}];return r.default.createElement("div",{className:"welcome-container"},r.default.createElement("header",null,r.default.createElement("h1",null,"Do you want to sell your book or is it for personal use?")),r.default.createElement("section",null,r.default.createElement("div",{className:"btn-container"},r.default.createElement(s.default,{options:e,selected:this.state.choice})),r.default.createElement(u.default,{buttonText:"Next",disableNext:!this.state.choice,next:this.onSubmit,visible:!0})))}}])&&y(t.prototype,a),n&&y(t,n),o}();t.default=E},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n;(n=a(64))&&n.__esModule;function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=null}var t,a,n;return t=e,(a=[{key:"toProject",value:function(e){var t=e.clone();return t.type=this.type,t}}])&&o(t.prototype,a),n&&o(t,n),e}();t.default=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(7),i=o(a(50)),s=(n(a(11)),n(a(17)),o(a(173))),u=o(a(29)),c=n(a(14)),d=(n(a(86)),n(a(10)),n(a(32)),o(a(8)));o(a(64));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={choice:null},t.onYesSelected=t.onYesSelected.bind(y(y(t))),t.onNoSelected=t.onNoSelected.bind(y(y(t))),t.onSubmit=t.onSubmit.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){i.default.preventIllegalAccess()}},{key:"onYesSelected",value:function(){this.setState({choice:"yes"})}},{key:"onNoSelected",value:function(){this.setState({choice:"no"})}},{key:"onSubmit",value:function(){var e=d.default.project().clone();e.preOrder="yes"===this.state.choice,e.preOrder&&(e.isSPB?e.publishedDate=(0,l.bn_moment)((0,l.bn_moment)().format("MM/DD/YYYY")).add(15,"days"):e.publishedDate=(0,l.bn_moment)((0,l.bn_moment)().format("MM/DD/YYYY")).add(1,"days")),c.updateProject(e,!0)}},{key:"render",value:function(){var e=[{icon:"preorder-yes-not-selected",iconSelected:"preorder-yes-selected",key:"yes",onSelectIcon:this.onYesSelected,text:"Yes, it's a pre-order"},{icon:"preorder-no-not-selected",iconSelected:"preorder-no-selected",key:"no",onSelectIcon:this.onNoSelected,text:"No, it's not"}];return r.default.createElement("div",{className:"welcome-container"},r.default.createElement("header",null,r.default.createElement("h1",null,"Do you want this book to be set up as a pre-order?"),r.default.createElement("p",null,"Pre-orders give you the option to sell your book on BN.com ahead of publication."),r.default.createElement("p",null,"Go to our ",r.default.createElement("a",{className:"underline-link",href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5357441677211-Making-Books-Available-for-Pre-Order",target:"_blank"},"Help Center ")," for more information about pre-orders.")),r.default.createElement("section",null,r.default.createElement("div",{className:"btn-container"},r.default.createElement(s.default,{options:e,selected:this.state.choice})),r.default.createElement(u.default,{ref:"progress",buttonText:"Next",disableNext:null===this.state.choice,shouldHideBack:!0,next:this.onSubmit,visible:!0})))}}])&&p(t.prototype,a),n&&p(t,n),o}();(t.default=b).contextTypes={router:r.default.PropTypes.object.isRequired}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(173)),i=o(a(29)),s=(n(a(32)),n(a(14))),u=o(a(8));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this,e))||"object"!==c(n)&&"function"!=typeof n?m(a):n).state={choice:null},t.onYesSelected=t.onYesSelected.bind(m(m(t))),t.onNoSelected=t.onNoSelected.bind(m(m(t))),t.onSubmit=t.onSubmit.bind(m(m(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,r.default.Component),t=o,(a=[{key:"onYesSelected",value:function(){this.setState({choice:"yes"})}},{key:"onNoSelected",value:function(){this.setState({choice:"no"})}},{key:"onSubmit",value:function(){var e=u.default.project().clone();e.vendorRegistrationFirst="yes"===this.state.choice,s.updateProject(e,!0)}},{key:"render",value:function(){var e=[{icon:"start-vendor-not-selected",iconSelected:"start-vendor-selected",key:"yes",onSelectIcon:this.onYesSelected,text:"Yes, I'll do it now"},{icon:"later-vendor-not-selected",iconSelected:"later-vendor-selected",key:"no",onSelectIcon:this.onNoSelected,text:"No, I'll do it later"}];return r.default.createElement("div",null,r.default.createElement("div",{className:"welcome-container"},r.default.createElement("header",null,r.default.createElement("h1",null,"Register to sell your book"),r.default.createElement("p",null,"All you need to do is complete a vendor registration form. Would you like to complete it now?")),r.default.createElement("section",null,r.default.createElement("div",{className:"btn-container"},r.default.createElement(l.default,{options:e,selected:this.state.choice})),r.default.createElement(i.default,{buttonText:"Next",disableNext:!this.state.choice,next:this.onSubmit,visible:!0}))))}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=[{input:"&lt;p&gt;<span>paragraph</span>&lt;/p&gt;",display:"<p>Paragraph of text</p>"},{input:"&lt;i&gt;<span>italics</span>&lt;/i&gt;",display:"Makes text <i>italic</i>"},{input:"&lt;b&gt;<span>bold</span>&lt;/b&gt;",display:"Makes text <b>bold</b>"},{input:"&lt;u&gt;<span>underline</span>&lt;/u&gt;",display:"Makes text <u>underline</u>"},{input:"&lt;br&gt;",display:"Adds line break"},{input:"&lt;ul&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;<span>item a</span>&lt;/li&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;<span>item b</span>&lt;/il&gt;<br/>&lt;/ul&gt;",display:"Makes a bulleted list <ul><li>item a</il> <li>item b</il></ul>"},{input:"&lt;ol&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;<span>item 1</span>&lt;/il&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;<span>item 2</span>&lt;/il&gt;<br/>&lt;/ol&gt;",display:"Makes a numbered list <ol><li>item 1</il> <li>item 2</il></ol>"}],d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"html-guide-container"},r.default.createElement("div",{className:"html-guide"},r.default.createElement("div",{className:"logo-container"},r.default.createElement("img",{alt:"Barnes & Noble Press",className:"logo",src:"img/bnpress-logo-tm.svg",width:"295"})),r.default.createElement("h3",null,"HTML GUIDE"),r.default.createElement("table",{className:"table"},r.default.createElement("thead",null,r.default.createElement("tr",null,r.default.createElement("td",null,r.default.createElement("b",null,"HTML Tags")),r.default.createElement("td",null,r.default.createElement("b",null,"Display")))),r.default.createElement("tbody",null,c.map(function(e){return r.default.createElement("tr",{key:e.input},r.default.createElement("td",{dangerouslySetInnerHTML:{__html:e.input}}),r.default.createElement("td",{dangerouslySetInnerHTML:{__html:e.display}}))})))))}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;var n,l=(n=a(0))&&n.__esModule?n:{default:n},i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(25));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.create=function(n,r){return function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?p(a):n).onPageVisited=t.onPageVisited.bind(p(p(t))),t}var t,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,l.default.Component),c((t=o).prototype,[{key:"onPageVisited",value:function(){var e=r||{pageName:"bn press|home",pageType:"bnpress:landing"},t={eventInfo:{eventName:"Page View",eventAction:"pageView",timeStamp:new Date},category:{primaryCategory:"Pages"},attributes:{page:{pageInfo:{previousPageName:null,pageName:e.pageName,pageType:e.pageInfo,destinationURL:window.location.href,referringURL:null}}}};i.omnitureActionInvoked(t,"onPageView")}},{key:"render",value:function(){return l.default.createElement(n,u({},this.props,{onPageVisited:this.onPageVisited}))}}]),a&&c(t,a),o}()}},function(e,t,a){"use strict";var n=_(a(1537)),o=_(a(1538)),r=_(a(1539)),l=_(a(1540)),i=_(a(1542)),s=_(a(1543)),u=_(a(1544)),c=_(a(1545)),d=_(a(1546)),f=_(a(1547)),p=_(a(1548)),m=_(a(1549)),h=_(a(1550)),y=_(a(1551)),b=_(a(1552)),g=_(a(1553)),v=_(a(1554)),E=_(a(1555)),S=_(a(1556)),k=_(a(1557)),P=_(a(1558)),w=_(a(1559)),O=_(a(1560)),C=_(a(1561)),N=_(a(1562));function _(e){return e&&e.__esModule?e:{default:e}}e.exports={AuthorIndex:p.default,AuthorPlatformBasics:h.default,AuthorPromotions:m.default,Advertising:y.default,BNPressPathToPublication:b.default,BroadcastMessage:o.default,CopyBasics:g.default,MetaDataBasics:v.default,PartnerServices:E.default,Promotion:u.default,TitleSubTitleBasics:S.default,WhatsUnderTheCover:k.default,AboutUs:n.default,HowItWorks:r.default,Index:l.default,MakeMoreMoney:i.default,PrintOnDemand:s.default,ReachMillionsOfReaders:c.default,Sitemap:d.default,WhatsNew:f.default,ContentPolicy:P.default,MembershipAgreement:w.default,RoyaltyPaymentTerms:O.default,ReferralProgramTerms:C.default,TermsOfUse:N.default}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("about-us")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("about-us"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=a(2),i=n(a(30)),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),u=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function n(){var e,t,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(a=f(n).call(this))||"object"!==c(a)&&"function"!=typeof a?m(t):a).state={messagesLoaded:!1,message:null,headline:null,preview:!1},e.onBroadcastMessageLoaded=e.onBroadcastMessageLoaded.bind(m(m(e))),e.onPreviewMessageLoaded=e.onPreviewMessageLoaded.bind(m(m(e))),e}var t,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,r.default.Component),t=n,(a=[{key:"componentDidMount",value:function(){this.props.location.query.previewMessage&&s.loadPreviewMessage(),i.default.getBroadcastMessages()&&this.onBroadcastMessageLoaded()}},{key:"componentWillReceiveProps",value:function(e){e.location.query!==this.props.location.query&&this.onBroadcastMessageLoaded(e.location.query.id)}},{key:"componentWillMount",value:function(){i.default.addBroadcastMessagesLoadedListener(this.onBroadcastMessageLoaded),i.default.addPreviewMessageLoadedListener(this.onPreviewMessageLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeBroadcastMessagesLoadedListener(this.onBroadcastMessageLoaded),i.default.removePreviewMessageLoadedListener(this.onPreviewMessageLoaded)}},{key:"onBroadcastMessageLoaded",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props.location.query.id;t&&(e=i.default.getBroadcastMessage(t),this._setMessage(e))}},{key:"onPreviewMessageLoaded",value:function(){var e=i.default.getPreviewMessage();this._setMessage(e)}},{key:"_setMessage",value:function(e){this.setState({messagesLoaded:!0,message:e?e.longDetails:null,headline:e?e.headline:null})}},{key:"render",value:function(){var e=this.state.message,t=this.state.headline;return r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},r.default.createElement("div",{className:"long-message-container"},this.state.messagesLoaded&&r.default.createElement("h1",null,t),this.state.messagesLoaded&&this.state.message&&r.default.createElement("div",{className:"broadcast-message",dangerouslySetInnerHTML:{__html:e}}),this.state.messagesLoaded&&!this.state.message&&r.default.createElement("div",{className:"broadcast-message-expired"},"We're sorry, this page has expired.  Return to our ",r.default.createElement(l.Link,{to:"/"},"homepage"),"."),!this.state.messagesLoaded&&r.default.createElement(u.default,null))))}}])&&d(t.prototype,a),o&&d(t,o),n}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=n(a(28)),i=o(a(30)),s=o(a(3)),u=n(a(59)),c=o(a(56)),d=o(a(1));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(y(y(t))),t.onSiteModuleDisplay=t.onSiteModuleDisplay.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("how-it-works");u.onPageSiteModuleDisplay("BANNER","how-it-works")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded),c.default.addSiteModuleDisplayListener(this.onSiteModuleDisplay)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded),c.default.removeSiteModuleDisplayListener(this.onSiteModuleDisplay)}},{key:"onSiteModuleDisplay",value:function(){this.result3=c.default.getSiteModuleDisplay(),this.setState({siteModuledisplay:this.result3.result3.data})}},{key:"onStaticContentLoaded",value:function(e){if("how-it-works"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",null,this.state.siteModuledisplay&&r.default.createElement("div",{className:(0,d.default)("additional marketing-content np-mkt-included-content text-block"),dangerouslySetInnerHTML:{__html:this.state.siteModuledisplay}}),r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}}))):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&p(t.prototype,a),n&&p(t,n),o}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1)),i=n(a(28)),s=o(a(30)),u=n(a(25)),c=o(a(387)),d=o(a(3)),f=n(a(59)),p=o(a(56)),m=o(a(1541));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=b(o).call(this,e))||"object"!==h(n)&&"function"!=typeof n?v(a):n).state={contentBottom:null,contentMiddle:null,contentTop:null,siteModuledisplay:null,windowWidth:window.innerWidth,content:s.default.getFooterContent()},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(v(v(t))),t.onSiteModuleDisplay=t.onSiteModuleDisplay.bind(v(v(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){i.loadStaticContent("index");f.onPageSiteModuleDisplay("BANNER","home")}},{key:"componentWillMount",value:function(){s.default.addStaticContentLoadedListener(this.onStaticContentLoaded),p.default.addSiteModuleDisplayListener(this.onSiteModuleDisplay)}},{key:"componentWillUnmount",value:function(){s.default.removeStaticContentLoadedListener(this.onStaticContentLoaded),u.pageNameChanged("bn press|home"),p.default.removeSiteModuleDisplayListener(this.onSiteModuleDisplay)}},{key:"onSiteModuleDisplay",value:function(){this.result3=p.default.getSiteModuleDisplay(),this.setState({siteModuledisplay:this.result3.result3.data})}},{key:"onStaticContentLoaded",value:function(e){if("index"===e.identifier){var t=e.content;null!==t&&this.setState({contentBottom:t.match(/<!-- %%%CQ-PART3%%% -->([\s\S]*?)<!-- %%%END-CQ-PART3%%% -->/g),contentMiddle:t.match(/<!-- %%%CQ-PART2%%% -->([\s\S]*?)<!-- %%%END-CQ-PART2%%% -->/g),contentTop:t.match(/<!-- %%%CQ-PART1%%% -->([\s\S]*?)<!-- %%%END-CQ-PART1%%% -->/g),showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;768<=this.state.windowWidth?this.state.content.desktop:this.state.content.mobile;return e=this.state.showContent?r.default.createElement("div",null,r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{className:"content-top",dangerouslySetInnerHTML:{__html:this.state.contentTop}}),this.state.siteModuledisplay&&r.default.createElement("div",{className:(0,l.default)("additional marketing-content np-mkt-included-content text-block "),dangerouslySetInnerHTML:{__html:this.state.siteModuledisplay}}),r.default.createElement("div",{className:"content-middle",dangerouslySetInnerHTML:{__html:this.state.contentMiddle}})),r.default.createElement(m.default,null),r.default.createElement("h1",null,"Find Out How Much You Can Make"),r.default.createElement(c.default,null),r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{className:"content-bottom",dangerouslySetInnerHTML:{__html:this.state.contentBottom}}))):r.default.createElement(d.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&y(t.prototype,a),n&&y(t,n),o}();t.default=E},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=n(a(48)),i=o(a(30)),s=(n(a(31)),o(a(6))),u=o(a(12)),c=n(a(9));o(a(1));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?h(a):n).emailMessageTimeout=null,t.state={content:i.default.getFooterContent(),windowWidth:window.innerWidth,check:!1,message:"",currentPage:window.location.pathname,emailpreferenceMessageIndex:!1},t.onSubmit=t.onSubmit.bind(h(h(t))),t.onMailToAlert=t.onMailToAlert.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){i.default.addMailToAlertLoadedListener(this.onMailToAlert)}},{key:"componentWillUnmount",value:function(){i.default.removeMailToAlertLoadedListener(this.onMailToAlert)}},{key:"componentDidMount",value:function(){this.setState({emailpreferenceMessageIndex:!1})}},{key:"onSubmit",value:function(){var e=this.refs.emailPreferenceIndex.gather().email;this.setState({loaded:!1},function(){l.loadMailToAlertSettings(e,"H")})}},{key:"onMailToAlert",value:function(){var e=i.default.getMailToAlert();this.setState({emailpreferenceMessageIndex:e.result.settings.pass,currentPage:window.location.pathname})}},{key:"render",value:function(){this.state.windowWidth;return r.default.createElement("div",{className:"container-email-preference-index"},r.default.createElement("div",null,this.state.emailpreferenceMessageIndex&&r.default.createElement("p",{className:"index-email-message"},"Thank you for submitting your email address."),!this.state.emailpreferenceMessageIndex&&r.default.createElement("p",{className:"index-email-label"},"Submit your email to receive exclusive B&N Press updates & special offers."),!this.state.emailpreferenceMessageIndex&&r.default.createElement(s.default,{className:"form-container",ref:"emailPreferenceIndex",onSubmit:this.onSubmit},r.default.createElement("div",{className:"input-email-pref-index"},r.default.createElement(u.default,{name:"email",ref:"email",label:"Email Address",maxLength:50,rules:[c.required("Please enter an email address."),c.pattern(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Please enter a valid email address.",!0)]})),r.default.createElement("div",{className:"button-container-email-pref"},r.default.createElement("button",{className:"btn submit-email-pref glyphicon glyphicon-menu-right","data-action":"submit"})))))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=n(a(28)),i=o(a(30)),s=o(a(387)),u=o(a(3)),c=n(a(59)),d=o(a(56)),f=o(a(1));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(b(b(t))),t.onSiteModuleDisplay=t.onSiteModuleDisplay.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("make-more-money");c.onPageSiteModuleDisplay("BANNER","make-more-money")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded),d.default.addSiteModuleDisplayListener(this.onSiteModuleDisplay)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded),d.default.removeSiteModuleDisplayListener(this.onSiteModuleDisplay)}},{key:"onSiteModuleDisplay",value:function(){this.result3=d.default.getSiteModuleDisplay(),this.setState({siteModuledisplay:this.result3.result3.data?this.result3.result3.data:null})}},{key:"onStaticContentLoaded",value:function(e){if("make-more-money"===e.identifier){var t=e.content;null!==t&&this.setState({contentBottom:t.match(/<!-- %%%CQ-PART2%%% -->([\s\S]*?)<!-- %%%END-CQ-PART2%%% -->/g),contentTop:t.match(/<!-- %%%CQ-PART1%%% -->([\s\S]*?)<!-- %%%END-CQ-PART1%%% -->/g),showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",null,this.state.siteModuledisplay&&r.default.createElement("div",{className:(0,f.default)("additional marketing-content np-mkt-included-content text-block"),dangerouslySetInnerHTML:{__html:this.state.siteModuledisplay}}),r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.contentTop}}),r.default.createElement(s.default,null),r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.contentBottom}}))):r.default.createElement(u.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(369)),i=n(a(28)),s=o(a(30)),u=n(a(15)),c=o(a(3)),d=n(a(59)),f=o(a(56)),p=o(a(1));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n).state={contentBottom:null,contentTop:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(g(g(t))),t.onSiteModuleDisplay=t.onSiteModuleDisplay.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){i.loadStaticContent("print-on-demand");d.onPageSiteModuleDisplay("BANNER","print-on-demand")}},{key:"componentWillMount",value:function(){s.default.addStaticContentLoadedListener(this.onStaticContentLoaded),f.default.addSiteModuleDisplayListener(this.onSiteModuleDisplay)}},{key:"componentWillUnmount",value:function(){s.default.removeStaticContentLoadedListener(this.onStaticContentLoaded),f.default.removeSiteModuleDisplayListener(this.onSiteModuleDisplay)}},{key:"onSiteModuleDisplay",value:function(){this.result3=f.default.getSiteModuleDisplay(),this.setState({siteModuledisplay:this.result3.result3.data})}},{key:"onStaticContentLoaded",value:function(e){if("print-on-demand"===e.identifier){var t=e.content;null!==t&&this.setState({contentBottom:t.match(/<!-- %%%CQ-PART3%%% -->([\s\S]*?)<!-- %%%END-CQ-PART3%%% -->/g),contentMid:t.match(/<!-- %%%CQ-PART2%%% -->([\s\S]*?)<!-- %%%END-CQ-PART2%%% -->/g),contentTop:t.match(/<!-- %%%CQ-PART1%%% -->([\s\S]*?)<!-- %%%END-CQ-PART1%%% -->/g),showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.contentTop}}),this.state.siteModuledisplay&&r.default.createElement("div",{className:(0,p.default)("additional marketing-content np-mkt-included-content text-block"),dangerouslySetInnerHTML:{__html:this.state.siteModuledisplay}}),r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.contentMid}}),r.default.createElement("div",{className:"book-size-type-landing"},r.default.createElement(l.default,{showGetStartedButtons:!0,projectType:u.POD})),r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.contentBottom}})):r.default.createElement(c.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=a(2),i=n(a(30)),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),u=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function n(){var e,t,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(a=f(n).call(this))||"object"!==c(a)&&"function"!=typeof a?m(t):a).state={messageLoaded:!1,message:null},e.onPromotionLoaded=e.onPromotionLoaded.bind(m(m(e))),e}var t,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,r.default.Component),t=n,(a=[{key:"componentDidMount",value:function(){s.loadPromotion(this.props.location.query.id)}},{key:"componentWillMount",value:function(){i.default.addPromotionLoadedListener(this.onPromotionLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removePromotionLoadedListener(this.onPromotionLoaded)}},{key:"onPromotionLoaded",value:function(e){this.setState({messageLoaded:!0,message:e?e.loadingPageTerms:null})}},{key:"render",value:function(){var e=this.state,t=e.message,a=e.messageLoaded;return r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},r.default.createElement("div",{className:"long-message-container"},a&&t&&r.default.createElement("div",{className:"broadcast-message",dangerouslySetInnerHTML:{__html:t}}),a&&!t&&r.default.createElement("div",{className:"broadcast-message-expired"},"We're sorry. This promotion has ended. Look out for new promotions. Return to our ",r.default.createElement(l.Link,{to:"/"},"homepage"),"."),!a&&r.default.createElement(u.default,null))))}}])&&d(t.prototype,a),o&&d(t,o),n}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=n(a(28)),i=o(a(30)),s=o(a(3)),u=n(a(59)),c=o(a(56)),d=o(a(1));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(y(y(t))),t.onSiteModuleDisplay=t.onSiteModuleDisplay.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("reach-millions-of-readers");u.onPageSiteModuleDisplay("BANNER","reach-millions-of-readers")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded),c.default.addSiteModuleDisplayListener(this.onSiteModuleDisplay)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded),c.default.removeSiteModuleDisplayListener(this.onSiteModuleDisplay)}},{key:"onSiteModuleDisplay",value:function(){this.result3=c.default.getSiteModuleDisplay(),this.setState({siteModuledisplay:this.result3.result3.data})}},{key:"onStaticContentLoaded",value:function(e){if("reach-millions-of-readers"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",null,this.state.siteModuledisplay&&r.default.createElement("div",{className:(0,d.default)("additional marketing-content np-mkt-included-content text-block"),dangerouslySetInnerHTML:{__html:this.state.siteModuledisplay}}),r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}}))):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&p(t.prototype,a),n&&p(t,n),o}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("sitemap")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("sitemap"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("whats-new")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("whats-new"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=n(a(28)),i=o(a(30)),s=n(a(25)),u=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this,e))||"object"!==c(n)&&"function"!=typeof n?m(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(m(m(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("author-index")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded),s.pageNameChanged("bn press|author-tools-and-tips")}},{key:"onStaticContentLoaded",value:function(e){if("author-index"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(u.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("author-promotions")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("author-promotions"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("author-platform-basics")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("author-platform-basics"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=n(a(28)),i=o(a(30)),s=n(a(25)),u=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this,e))||"object"!==c(n)&&"function"!=typeof n?m(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(m(m(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("advertising")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded),s.pageNameChanged("bn press|advertising")}},{key:"onStaticContentLoaded",value:function(e){if("advertising"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(u.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("bn-press-path-to-publication")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("bn-press-path-to-publication"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("copy-basics")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("copy-basics"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("metadata-basics")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("metadata-basics"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=n(a(28)),i=o(a(30)),s=n(a(25)),u=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this,e))||"object"!==c(n)&&"function"!=typeof n?m(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(m(m(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("partner-services")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded),s.pageNameChanged("bn press|self-publishing services")}},{key:"onStaticContentLoaded",value:function(e){if("partner-services"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(u.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("title-subtitle-basics")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("title-subtitle-basics"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("whats-under-the-cover")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("whats-under-the-cover"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0}),this.props.onPageVisited()}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("content-policy")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("content-policy"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0})}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("membership-agreement")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("membership-agreement"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0})}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("royalty-payment-terms")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("royalty-payment-terms"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0})}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=(n(a(387)),n(a(3)));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("referral-program-terms")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("referral-program-terms"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0})}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),i=n(a(30)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={content:null,showContent:!1},t.onStaticContentLoaded=t.onStaticContentLoaded.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){l.loadStaticContent("terms-of-use")}},{key:"componentWillMount",value:function(){i.default.addStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeStaticContentLoadedListener(this.onStaticContentLoaded)}},{key:"onStaticContentLoaded",value:function(e){if("terms-of-use"===e.identifier){var t=e.content;null!==t&&this.setState({content:t,showContent:!0})}}},{key:"render",value:function(){var e;return e=this.state.showContent?r.default.createElement("div",{className:"np-mkt-included-content"},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.content}})):r.default.createElement(s.default,null),r.default.createElement("div",{className:"landing-page-wrapper"},r.default.createElement("div",{className:"landing-page-container"},e))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(13)),r=n(a(0)),l=(n(a(43)),function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(a(28)),n(a(345))),s=n(a(1564)),u=n(a(1572)),c=n(a(79));function n(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?h(a):n).state={mobileMenuState:c.default.getMobileMenuState()},t.resizeLayout=t.resizeLayout.bind(h(h(t))),t.toggleMobileClass=t.toggleMobileClass.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.resizeLayout()}},{key:"componentWillMount",value:function(){c.default.addLayoutChangeListener(this.resizeLayout),c.default.addMobileMenuChangeListener(this.toggleMobileClass),c.default.addWindowResizeListener(this.resizeLayout),setTimeout(function(){0<document.querySelectorAll(".landing-page-wrapper").length&&document.getElementById("app").classList.add("change-footer-class")},500)}},{key:"componentWillUnmount",value:function(){c.default.removeLayoutChangeListener(this.resizeLayout),c.default.removeMobileMenuChangeListener(this.toggleMobileClass),c.default.removeWindowResizeListener(this.resizeLayout),document.getElementById("app").classList.remove("change-footer-class")}},{key:"resizeLayout",value:function(){var e=(0,i.default)("footer"),t=(0,i.default)("header.primary-header");if(e.length&&t.length&&this.refs.contentContainer){var a=e.innerHeight(),n=t.innerHeight(),o=window.innerHeight,r=n+a;if(r<o){var l=o-r;(0,i.default)(this.refs.contentContainer).css({"min-height":l})}}}},{key:"toggleMobileClass",value:function(){this.setState({mobileMenuState:c.default.getMobileMenuState()})}},{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement("div",{id:"v-next",className:"v-next"+("opened"===this.state.mobileMenuState?" mobile-menu-opened":"")},r.default.createElement(s.default,null),r.default.createElement("div",{className:"content-container",ref:"contentContainer"},this.props.children),r.default.createElement(l.default,null)),r.default.createElement(u.default,null))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(13)),l=n(a(0)),i=a(2),s=n(a(344)),u=n(a(4)),c=n(a(1565)),d=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(28)),f=n(a(30)),p=n(a(1566)),m=n(a(1568)),h=n(a(1569)),y=n(a(1570));function n(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=v(o).call(this,e))||"object"!==b(n)&&"function"!=typeof n?S(a):n).state={loggedState:u.default.getLoggedState(),promotionMessages:[],user:u.default.getUser(),menuClosed:!0,profile:u.default.getProfile()},t.onPromotionMessagesLoaded=t.onPromotionMessagesLoaded.bind(S(S(t))),t.onUserLoggedOut=t.onUserLoggedOut.bind(S(S(t))),t.onToggleMenu=t.onToggleMenu.bind(S(S(t))),t.onProfileLoaded=t.onProfileLoaded.bind(S(S(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(o,l.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){u.default.addLogoutUserListener(this.onUserLoggedOut),f.default.addPromotionMessagesLoadedListener(this.onPromotionMessagesLoaded),u.default.addProfileLoadedListener(this.onProfileLoaded)}},{key:"componentDidMount",value:function(){d.loadPromotionMessages()}},{key:"componentWillUnmount",value:function(){u.default.removeLogoutUserListener(this.onUserLoggedOut),f.default.removePromotionMessagesLoadedListener(this.onPromotionMessagesLoaded),u.default.removeProfileLoadedListener(this.onProfileLoaded)}},{key:"componentWillReceiveProps",value:function(){this.setState({loggedState:u.default.getLoggedState(),user:u.default.getUser()})}},{key:"onProfileLoaded",value:function(){this.setState({profile:u.default.getProfile()})}},{key:"onPromotionMessagesLoaded",value:function(){this.setState({promotionMessages:f.default.getPromotionMessages()})}},{key:"onUserLoggedOut",value:function(){this.setState({loggedState:u.default.getLoggedState(),user:u.default.getUser()},function(){return i.browserHistory.push("/")})}},{key:"onToggleMenu",value:function(){var e;e=!this.state.menuClosed,this.setState({menuClosed:e}),(0,r.default)(document.getElementsByClassName("dropdown")).removeClass("open")}},{key:"render",value:function(){return setTimeout(function(){"vendor-account"==location.pathname.split("/")[1].toLowerCase()||"my-profile"==location.pathname.split("/")[1].toLowerCase()||"checkout"==location.pathname.split("/")[1].toLowerCase()?document.body.classList.add("recaptcha-module-outer"):document.body.classList.remove("recaptcha-module-outer")},1500),l.default.createElement("header",{ref:"header",className:"primary-header"},l.default.createElement("div",null,l.default.createElement(s.default,{user:this.state.user}),l.default.createElement(c.default,null),l.default.createElement("div",{className:"promotion-desktop"},l.default.createElement(p.default,{mobile:!1,messages:this.state.promotionMessages})),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-12"},l.default.createElement("div",{className:"account-menu-container"},l.default.createElement(m.default,{user:this.state.user,profile:this.state.profile,loggedState:this.state.loggedState}),l.default.createElement("div",{className:"logo-container"},l.default.createElement("a",{href:"/",onFocus:this.onToggleMenu},l.default.createElement("img",{alt:"Barnes & Noble Press",className:"logo",src:"img/bnpress-logo-tm.svg"}))),l.default.createElement(h.default,{loggedState:this.state.loggedState})))),l.default.createElement(y.default,{user:this.state.user}),l.default.createElement("div",{className:"promotion"},l.default.createElement(p.default,{mobile:!0,messages:this.state.promotionMessages}))))}}])&&g(t.prototype,a),n&&g(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(13)),l=o(a(82)),i=o(a(0)),s=a(2),u=o(a(1)),c=n(a(28)),d=o(a(30)),f=n(a(99));n(a(31)),n(a(10)),a(7);function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function n(){var e,t,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(a=h(n).call(this))||"object"!==p(a)&&"function"!=typeof a?b(t):a).index=-1,e.state={showBroadcast:!1,broadcastMessage:null,hover:!1,previewMore:!1,featureModelLength:0,downArrow:!0,broadcastMessageExist:!1,leftClick:!0,rightArrowSequence:[],nextMessageOneTime:!0},e.onBroadcastMessageLoaded=e.onBroadcastMessageLoaded.bind(b(b(e))),e.onDismiss=e.onDismiss.bind(b(b(e))),e.removeBroadcastMessages=e.removeBroadcastMessages.bind(b(b(e))),e.rotateBroadcastMessages=e.rotateBroadcastMessages.bind(b(b(e))),e.broadcastClick=e.broadcastClick.bind(b(b(e))),e.removeBackground=e.removeBackground.bind(b(b(e))),e.leftMessage=e.leftMessage.bind(b(b(e))),e.rightMessage=e.rightMessage.bind(b(b(e))),e.generateRightArrowSequence=e.generateRightArrowSequence.bind(b(b(e))),e.adjustUIBasedOnMessageHeight=e.adjustUIBasedOnMessageHeight.bind(b(b(e))),e.makeClick=e.makeClick.bind(b(b(e))),e.onWindowResize=e.onWindowResize.bind(b(b(e))),e}var t,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(n,i.default.Component),t=n,(a=[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onWindowResize);var e=l.default.parse(window.location.search.substring(1));e.previewBroadcastMessage?c.createPreviewMessage(decodeURIComponent(e.previewBroadcastMessage)):c.loadBroadcastMessages(),"true"===e.more&&this.setState({previewMore:!0})}},{key:"componentWillMount",value:function(){d.default.addBroadcastMessagesLoadedListener(this.onBroadcastMessageLoaded)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize),d.default.removeBroadcastMessagesLoadedListener(this.onBroadcastMessageLoaded)}},{key:"onWindowResize",value:function(){var e=document.querySelector(".additional-promotional-box"),t=document.querySelector(".additional-promotional-box-small-device");if(768<=window.innerWidth){var a=document.getElementsByClassName("promotion-desktop")[0];if(!e){var n=document.createElement("div");n.classList.add("additional-promotional-box"),a.prepend(n)}t&&t.remove(),e&&e.classList.remove("additional-promotional-box-small-device")}if(window.innerWidth<768){var o=document.getElementsByClassName("account-menu-container")[0];if(!t){var r=document.createElement("div");r.classList.add("additional-promotional-box-small-device"),o.prepend(r)}e&&e.remove(),t&&t.classList.remove("additional-promotional-box")}}},{key:"broadcastClick",value:function(){var e=this,t=document.getElementsByClassName("broadcast-message-container")[0],a=document.getElementsByClassName("broadcast-message")[0],n=document.getElementsByClassName("broadcast-container-arrow")[0],o=document.getElementsByClassName("text-hover")[0],r=t?t.offsetHeight:"",l=a?a.offsetHeight:"";57==r?t&&t.classList.add("adding-height"):t&&t.classList.remove("adding-height"),this.state.downArrow?(this.setState({downArrow:!1,hover:!0}),document.getElementsByClassName("broadcast-expand-background")[0].style.display="block",document.getElementsByTagName("body")[0].classList.add("body-fixed"),o&&o.classList.remove("text-shadow"),o&&(o.style.display="none")):(setTimeout(function(){e.setState({downArrow:!0,hover:!1})},100),document.getElementsByClassName("broadcast-expand-background")[0].style.display="none",document.getElementsByTagName("body")[0].classList.remove("body-fixed"),768<=window.innerWidth?23==l||22==l?(o&&o.classList.remove("text-shadow"),o&&(o.style.display="none"),setTimeout(function(){n&&n.classList.add("message-hide")},500)):(o&&(o.style.display="block"),o&&o.classList.add("text-shadow"),setTimeout(function(){n&&n.classList.remove("message-hide")},500)):(46<l?t&&t.classList.add("adding-padding-for-three-line"):t&&t.classList.remove("adding-padding-for-three-line"),l<=46?(o&&o.classList.remove("text-shadow"),o&&(o.style.display="none"),setTimeout(function(){n&&n.classList.add("message-hide")},500)):(o&&(o.style.display="block"),o&&o.classList.add("text-shadow"),setTimeout(function(){n&&n.classList.remove("message-hide")},500))))}},{key:"removeBackground",value:function(){document.getElementsByClassName("broadcast-expand-background")[0].style.display="none",this.broadcastClick()}},{key:"onBroadcastMessageLoaded",value:function(){var t=this,e=d.default.getBroadcastMessages();null!=e[0]&&(this.setState({broadcastMessageExist:!0}),768<=window.innerWidth?setTimeout(function(){if(t.state.broadcastMessageExist){var e=document.createElement("div");e.classList.add("additional-promotional-box"),document.getElementsByClassName("promotion-desktop")[0].prepend(e)}},500):setTimeout(function(){if(t.state.broadcastMessageExist){var e=document.createElement("div");e.classList.add("additional-promotional-box-small-device"),document.getElementsByClassName("account-menu-container")[0].prepend(e)}},500)),this.setState({broadcastMessages:e},function(){return t.rotateBroadcastMessages()})}},{key:"leftMessage",value:function(){var t=this;this.index=(this.index+1)%this.state.broadcastMessages.length,this.setState({broadcastMessage:this.state.broadcastMessages[this.index]},function(){var e=(0,r.default)(t.refs.broadcastMessage);e.css({left:(0,r.default)(window).width()}),e.animate({left:0},500)}),setTimeout(function(){return t.adjustUIBasedOnMessageHeight()},100)}},{key:"generateRightArrowSequence",value:function(){var e=this.state.broadcastMessages,t=[];if(1<e.length)for(var a=0,n=e.length-1;a<=n;)t.push(a),a!==n&&t.push(n),a++,n--;else t=[0];return t}},{key:"rightMessage",value:function(){var t=this;1<this.state.broadcastMessages.length&&(this.index=(this.index-1+this.state.broadcastMessages.length)%this.state.broadcastMessages.length,this.setState({broadcastMessage:this.state.broadcastMessages[this.index]},function(){var e=(0,r.default)(t.refs.broadcastMessage);e.css({left:-(0,r.default)(window).width()}),e.animate({left:0},500)})),setTimeout(function(){return t.adjustUIBasedOnMessageHeight()},100)}},{key:"removeBroadcastMessages",value:function(){var e=this,t=document.getElementsByClassName("additional-promotional-box")[0],a=document.getElementsByClassName("additional-promotional-box-small-device")[0];!this.state.hover&&1<this.state.broadcastMessages.length?(0,r.default)(this.refs.broadcastMessage).animate({left:-900},750,function(){(0,r.default)(e.refs.broadcastMessage).css({left:0}),e.setState({leftClick:!0,rightClick:!1}),e.rotateBroadcastMessages()}):setTimeout(this.removeBroadcastMessages.bind(this),f.ROTATE_MESSAGES),0===this.state.broadcastMessages.length&&(768<=window.innerWidth?t&&(t.style.display="none"):a&&(a.style.display="none"))}},{key:"rotateBroadcastMessages",value:function(){var t=this;this.index=(this.index+1)%this.state.broadcastMessages.length;var a=(0,r.default)(this.refs.broadcastMessage),e=this.state.broadcastMessages[this.index];this.setState({broadcastMessage:e},function(){var e=(0,r.default)(t.refs.broadcastMessage);a.css({opacity:1,transform:"translate3d(0, 0, 0)",display:"block"}),t.state.nextMessageOneTime?e.css({opacity:1,transform:"translate3d(0, 0, 0)",display:"block"}):e.css({opacity:1,transform:"translate3d(100%, 0, 0)",display:"block"}),a[0].style.transition="transform 750ms ease",a[0].style.transform="translate3d(-100%, 0px, 0px)",a[0].style.opacity=1,setTimeout(function(){t.state.nextMessageOneTime?(e[0].style.transition="transform 300ms ease",e[0].style.transform="translate3d(-100%, 0, 0)"):(e[0].style.transition="transform 300ms ease",e[0].style.transform="translate3d(0, 0, 0)"),e[0].style.opacity=1},50),t.setState({nextMessageOneTime:!1})}),setTimeout(function(){return t.adjustUIBasedOnMessageHeight()},100),setTimeout(this.removeBroadcastMessages,f.ROTATE_MESSAGES)}},{key:"adjustUIBasedOnMessageHeight",value:function(){var e=document.getElementsByClassName("broadcast-message")[0],t=e?e.offsetHeight:"",a=document.getElementsByClassName("broadcast-message-container")[0],n=document.getElementsByClassName("broadcast-container-arrow")[0],o=document.getElementsByClassName("text-hover")[0];768<=window.innerWidth?this.state.downArrow?23==t||22==t?(o&&o.classList.remove("text-shadow"),n&&n.classList.add("message-hide"),o&&(o.style.display="none")):(o&&(o.style.display="block"),o&&o.classList.add("text-shadow"),n&&n.classList.remove("message-hide")):(a&&a.classList.add("adding-height"),n&&n.classList.remove("message-hide")):(46<t?a&&a.classList.add("adding-padding-for-three-line"):a&&a.classList.remove("adding-padding-for-three-line"),this.state.downArrow?t<=46?(o&&o.classList.remove("text-shadow"),n&&n.classList.add("message-hide"),o&&(o.style.display="none"),23==t||22==t?a&&a.classList.add("adding-padding"):a&&a.classList.remove("adding-padding")):(o&&(o.style.display="block"),o&&o.classList.add("text-shadow"),n&&n.classList.remove("message-hide")):(a&&a.classList.add("adding-height"),n&&n.classList.remove("message-hide"),23==t||22==t?(a&&a.classList.add("adding-padding"),a&&a.classList.add("adding-height-fix")):(a&&a.classList.remove("adding-padding"),a&&a.classList.remove("adding-height-fix"))))}},{key:"onDismiss",value:function(t){var e=this.state.broadcastMessages;e.splice(this.index,1),this.index=this.index%e.length,this.setState({broadcastMessages:e,broadcastMessage:0<e.length?e[this.index]:null,isDismissing:!0},function(e){return c.dismissBroadcastMessage(t.messageId)})}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.broadcastMessage,o=a.previewMore;return n&&(e="/message/?"+(o?"previewMessage="+encodeURIComponent(n.details)+"&more=true":"id="+n.messageId)),n?i.default.createElement("div",null,i.default.createElement("div",{className:"broadcast-expand-background",onMouseEnter:function(){return t.setState({hover:!0})},onMouseLeave:function(){return t.setState({hover:!1})},onClick:this.removeBackground},"Â "),i.default.createElement("div",{className:"broadcast-container",onMouseEnter:function(){return t.setState({hover:!0})},onMouseLeave:function(){return t.setState({hover:!1})}},i.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},i.default.createElement("div",{className:"broadcast-outer"},1<this.state.broadcastMessages.length&&i.default.createElement("div",{onClick:this.leftMessage,className:"glyphicon glyphicon-menu-left broadcast-left",tabIndex:"0",title:"Left arrow",onKeyDown:this.makeClick}),1==this.state.broadcastMessages.length&&i.default.createElement("div",{className:"broadcast-left"}),i.default.createElement("div",{className:"broadcast-text-container"},i.default.createElement("div",{className:"text-hover"}),i.default.createElement("div",{className:"broadcast-message-container fade-in",ref:"broadcastMessage",key:n.messageId,style:{left:"0"}},i.default.createElement("span",{className:"broadcast-message"},i.default.createElement("p",{dangerouslySetInnerHTML:{__html:n.details}}),(n.longDetails||o)&&i.default.createElement(s.Link,{to:e,className:"more"},"more")))),1<this.state.broadcastMessages.length&&i.default.createElement("div",{onClick:this.rightMessage,className:"glyphicon glyphicon-menu-right broadcast-right",tabIndex:"0",title:"Right arrow",onKeyDown:this.makeClick}),1==this.state.broadcastMessages.length&&i.default.createElement("div",{onClick:this.rightMessage,className:"broadcast-right"}))),i.default.createElement("div",{className:(0,u.default)("broadcast-container-arrow glyphicon",{"glyphicon-menu-down":this.state.downArrow,"glyphicon-menu-up":!this.state.downArrow}),onClick:this.broadcastClick,tabIndex:"0",title:"Down arrow",onKeyDown:this.makeClick},"Â "))):null}}])&&m(t.prototype,a),o&&m(t,o),n}();t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(13)),l=o(a(82)),i=o(a(0)),s=n(a(28)),u=n(a(99)),c=o(a(1567));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?h(a):n).index=-1,t.state={promotionMessages:[],hover:!1,messageId:null,previewing:!1,promotionMessage:null,showPromotion:!0},t.removePromotionMessages=t.removePromotionMessages.bind(h(h(t))),t.rotatePromotionMessages=t.rotatePromotionMessages.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,i.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var e=this,t=l.default.parse(window.location.search.substring(1));if(t.previewMarketingMessage){var a=t.previewMarketingMessage;a=(a=(a=a.replace("<p>","")).replace(/<\/p>/g,"")).split("<p>"),this.setState({previewing:!0,promotionMessages:a},function(){return e.rotatePromotionMessages()})}}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.messages!==e.messages&&(this.state.previewing||this.setState({messageId:e.messages.messageId,promotionMessages:e.messages.messages},function(){return t.rotatePromotionMessages()}))}},{key:"onClose",value:function(){this.setState({showPromotion:!1},s.dismissBroadcastMessage(this.state.messageId))}},{key:"removePromotionMessages",value:function(){var e=this;!this.state.hover&&1<this.state.promotionMessages.length?(0,r.default)(this.refs.promotionMessage).animate({top:-40},750,function(){(0,r.default)(e.refs.promotionMessage).css({top:0}),e.rotatePromotionMessages()}):setTimeout(this.removePromotionMessages,u.ROTATE_MESSAGES)}},{key:"rotatePromotionMessages",value:function(){this.index=(this.index+1)%this.state.promotionMessages.length,this.setState({promotionMessage:this.state.promotionMessages[this.index]}),setTimeout(this.removePromotionMessages,u.ROTATE_MESSAGES)}},{key:"render",value:function(){var e=this;if(this.props.mobile&&(0===this.state.promotionMessages.length||!this.state.showPromotion))return null;var t=null;return this.state.showPromotion&&0!==this.state.promotionMessages.length&&(t=i.default.createElement("div",{className:"message-container",onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})}},i.default.createElement("div",{className:"message",ref:"promotionMessage"},i.default.createElement(c.default,{key:this.state.promotionMessage,message:this.state.promotionMessage})),i.default.createElement("div",{className:"icon-close-modal",onClick:this.onClose.bind(this)}))),i.default.createElement("div",{className:"promotion-container"},t,i.default.createElement("div",{className:"bn-link"},i.default.createElement("a",{target:"_blank",href:"https://www.barnesandnoble.com/b/indie-books/_/N-8r8"},i.default.createElement("span",{className:"icon-book"})," Shop Indie Books on BN.com")))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i(this,s(a).call(this,e))).state={message:t.props.message},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,r.default.Component),t=a,(n=[{key:"componentWillReceiveProps",value:function(e){this.props.message!==e.message&&this.setState({message:e.message})}},{key:"render",value:function(){return r.default.createElement("p",{className:"fade-in",dangerouslySetInnerHTML:{__html:this.state.message}})}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(13)),l=o(a(0)),i=(o(a(43)),a(2)),s=o(a(370)),u=n(a(108)),c=(n(a(31)),o(a(79))),d=o(a(4)),f=n(a(28)),p=o(a(30));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n).state={menuClosed:!0,mobileMenuClosed:!0,openMenuToggle:!1,windowWidth:window.innerWidth,user:t.props.user,loggedState:t.props.loggedState,profile:t.props.profile},t.closeMenu=t.closeMenu.bind(g(g(t))),t.closeMobileMenu=t.closeMobileMenu.bind(g(g(t))),t.onToggleMenu=t.onToggleMenu.bind(g(g(t))),t.onToggleMobileMenu=t.onToggleMobileMenu.bind(g(g(t))),t.onWindowResize=t.onWindowResize.bind(g(g(t))),t.onProfileUpdated=t.onProfileUpdated.bind(g(g(t))),t.onJWTGenerateToken=t.onJWTGenerateToken.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,l.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onWindowResize),c.default.addMenuLinkClickedListener(this.closeMenu),c.default.addMobileMenuLinkClickedListener(this.closeMobileMenu),d.default.addProfileUpdatedListener(this.onProfileUpdated),p.default.addJWTLoadedListener(this.onJWTGenerateToken),f.loadJWTgenerate()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize),c.default.removeMenuLinkClickedListener(this.closeMenu),c.default.removeMobileMenuLinkClickedListener(this.closeMobileMenu),d.default.removeProfileUpdatedListener(this.onProfileUpdated),p.default.removeJWTLoadedListener(this.onJWTGenerateToken)}},{key:"onJWTGenerateToken",value:function(e){if(this.state.user){var t=p.default.getJWTToken();document.cookie="site_token="+encodeURIComponent(t.jwt)+"; Domain=.barnesandnoble.com; Path=/; Secure; SameSite=None"}}},{key:"componentWillReceiveProps",value:function(e){this.props!==e&&this.setState({user:e.user,loggedState:e.loggedState})}},{key:"onProfileUpdated",value:function(e){var t=this.state.user;t.firstName=e.profile.firstName,this.setState({user:t,profile:t})}},{key:"closeMenu",value:function(){this.setState({menuClosed:!0})}},{key:"closeMobileMenu",value:function(){this.onToggleMobileMenu()}},{key:"onMobileMenuClose",value:function(){(0,r.default)(document.body).removeClass("has-active-menu"),(0,r.default)(document.getElementById("mobile-menu")).removeClass("is-active"),(0,r.default)(document.getElementById("v-next")).removeClass("mobile-menu-opened"),this.setState({openMenuToggle:!1})}},{key:"onMobileMenuOpen",value:function(){(0,r.default)(document.body).addClass("has-active-menu"),(0,r.default)(document.getElementById("mobile-menu")).addClass("is-active"),(0,r.default)(document.getElementById("v-next")).addClass("mobile-menu-opened"),this.setState({openMenuToggle:!0})}},{key:"onToggleMenu",value:function(){var e;e=!this.state.menuClosed,this.setState({menuClosed:e})}},{key:"onToggleMobileMenu",value:function(){var e;this.state.mobileMenuClosed?(e=!1,this.onMobileMenuOpen()):(e=!0,this.onMobileMenuClose()),this.setState({mobileMenuClosed:e})}},{key:"onWindowResize",value:function(){this.setState({windowWidth:window.innerWidth}),!this.state.mobileMenuClosed&&767<this.state.windowWidth&&(this.onMobileMenuClose(),this.setState({mobileMenuClosed:!0})),!this.state.menuClosed&&this.state.windowWidth<768&&this.setState({menuClosed:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loggedState,n=t.user,o=null,r=null;return a.loggedIn?window.claripDNSSCustomerData={loggedIn:!!this.state.user,source:"web",firstName:this.state.user?this.state.user.firstName:"",lastName:this.state.user?this.state.user.lastName:"",email:this.state.user?this.state.user.email:"",phoneNumber:""}:window.claripDNSSCustomerData={loggedIn:!!this.state.user,source:"web",firstName:"",lastName:"",email:"",phoneNumber:""},(a.loggedIn||a.timedOutUser)&&(o=l.default.createElement("span",null,l.default.createElement(i.Link,{className:"welcome-user-text",to:a.loggedIn?"/"+u.ProfilePaths.Base:"/"+u.AuthenticationPaths.SignIn},"Welcome, ",a.loggedIn?this.state.profile?this.state.profile.firstName:n.firstName||n.first_name:a.timedOutUserName),l.default.createElement("span",{className:"logged-in-dot"},"|"))),a.loggedIn||a.timedOutUser||(r=l.default.createElement("span",{className:"welcome-user-text"},l.default.createElement(i.Link,{to:"/"+u.AuthenticationPaths.SignIn,className:"primary-link"},"Sign In"),l.default.createElement("span",{className:"logged-in-dot dot-no-margin"},"|"),l.default.createElement(i.Link,{to:"/"+u.AuthenticationPaths.CreateAccount,className:"primary-link dot-extra"},"Create Account"),l.default.createElement("span",{className:"logged-in-dot create-extra"},"|"))),l.default.createElement("div",{className:"nav-menu",onMouseLeave:function(){return e.setState({menuClosed:!0})}},l.default.createElement("div",{className:"account-container-desktop icon-profile-img"},l.default.createElement(i.Link,{title:"my profile",to:a.loggedIn?"/"+u.ProfilePaths.Base:"/"+u.AuthenticationPaths.SignIn},l.default.createElement("span",{className:"icon-user"})),r,o),l.default.createElement("div",{className:"dropdown"+(this.state.menuClosed?"":" open"),onClick:this.onToggleMenu},l.default.createElement("a",{href:"javascript:void(0)",title:"Click enter to open the Menu dropdown"},l.default.createElement("span",{className:"account-container-desktop my-account-link"},"Menu ",l.default.createElement("span",{className:"icon-down"}))),l.default.createElement(s.default,{loggedState:a})),l.default.createElement("div",{className:"dropdown"+(this.state.menuClosed?"":" open")},l.default.createElement("a",null,l.default.createElement("span",{className:"mobile-menu-icon"+(this.state.openMenuToggle?" open":""),onClick:this.onToggleMobileMenu},l.default.createElement("span",null),l.default.createElement("span",null),l.default.createElement("span",null),l.default.createElement("span",null)))),l.default.createElement("div",{className:"dropdown-overlay"+(this.state.menuClosed&&this.state.mobileMenuClosed?"":" active"),onClick:767<this.state.windowWidth?this.onToggleMenu:this.onToggleMobileMenu}))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=(n(a(189)),n(a(55))),s=n(a(208)),u=o(a(52));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this,e))||"object"!==c(n)&&"function"!=typeof n?m(a):n).state={numItems:0,inError:!1},t.onCartChange=t.onCartChange.bind(m(m(t))),t.onCartChangeError=t.onCartChangeError.bind(m(m(t))),t.onClick=t.onClick.bind(m(m(t))),t.makeClick=t.makeClick.bind(m(m(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){i.loadCart(!0)}},{key:"componentWillMount",value:function(){u.default.addCartChangedListener(this.onCartChange),u.default.addCartChangedErrorListener(this.onCartChangeError)}},{key:"componentWillUnmount",value:function(){u.default.removeCartChangedListener(this.onCartChange),u.default.removeCartChangedErrorListener(this.onCartChangeError)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onCartChange",value:function(){this.setState({numItems:u.default.numItems(),inError:!1})}},{key:"onCartChangeError",value:function(e){this.setState({inError:!0})}},{key:"onClick",value:function(){l.browserHistory.push("/"+s.Base)}},{key:"render",value:function(){var e=this.state.inError?"":this.state.numItems;return r.default.createElement("span",{className:"icon-cart my-cart-icon",tabIndex:"0",onClick:this.onClick,onKeyDown:this.makeClick},r.default.createElement("div",{className:"item-number-indicator"},e))}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=h},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=o(a(0)),d=a(2),f=o(a(4)),p=n(a(11)),m=o(a(1571)),h=n(a(108)),y=n(a(17));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,c.default.Component),a=t,(n=[{key:"render",value:function(){var e,t=f.default.getUser(),a=0<f.default.hasEaaPermission().length,n=f.default.hasSharedAccessPermission(p.SHARED_ACCESS)&&null==t.authorShareKey,o=!f.default.hasPermissions(p.AUTHOR_PROFILE)||(!t||!t.authorAccess),r=y.hasFeatureFlag(p.BOOK_COVER_TEMPLATE),l=[{label:"Profile",to:"/"+h.ProfilePaths.Base,useLink:!0},{label:"Vendor Account",to:"/"+h.VendorPaths.Base,useLink:!0},{label:"Manage Contributors",to:"/"+h.ManageContributorsPaths.Base,useLink:!0,hide:!n},{label:"Analytics Subscription",to:"/analytics/"+h.AnalyticsPaths.ManageAnalyticsSubscription,useLink:!0,hide:!a},{label:"Order History",to:"/"+h.OrderHistoryPaths.Base,useLink:!0},{label:"B&N Author Page",to:"/"+h.AuthorPaths.Base,useLink:!0,hide:o}],i=[{label:"Author Tools & Tips",to:"/"+h.LandingPagesPaths.BaseAuthor,useLink:!0},{label:"Author Self-Publishing",label2:"Services",to:"/"+h.LandingPagesPaths.AuthorPublishingServices,useLink:!0,breakLine:!0},{label:"Book Cover Template",label2:"Generator",to:"/"+h.LandingPagesPaths.BookCoverTemplateGenerator,useLink:!0,breakLine:!0,hide:!r},{label:"Blog",to:"/"+h.LandingPagesPaths.Blog+"/",useLink:!1}],s=f.default.hasEaaPermission()?"analytic-navigation-view":"navigation-view",u=f.default.hasEaaPermission()?f.default.hasEaaPermission():[];return 0<u.length&&(e=3==u.length?"/"+h.AnalyticsPaths.Base:f.default.hasEaaPermission().includes(p.CUSTOMER)?"/"+h.AnalyticsPaths.Base:f.default.hasEaaPermission().includes(p.READING)?"/"+h.AnalyticsPaths.Base+"/"+h.AnalyticsPaths.ReadingData:"/"+h.AnalyticsPaths.Base+"/"+h.AnalyticsPaths.SiteData),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-md-12"},c.default.createElement("div",{className:"navigation-container"},null===this.props.user&&c.default.createElement("ul",{className:"signed-out"},c.default.createElement("li",null,c.default.createElement(d.Link,{to:"/"+h.LandingPagesPaths.HowItWorks,activeClassName:"active"},"How It Works")),c.default.createElement("li",null,c.default.createElement(d.Link,{to:"/"+h.LandingPagesPaths.ReachMillionsOfReaders,activeClassName:"active"},"Reach Millions")),c.default.createElement("li",null,c.default.createElement(d.Link,{to:"/"+h.LandingPagesPaths.MakeMoreMoney,activeClassName:"active"},"Make Money")),c.default.createElement("li",null,c.default.createElement(d.Link,{to:"/"+h.LandingPagesPaths.PrintOnDemand,activeClassName:"active"},"Print Personal Books")),c.default.createElement("li",null,c.default.createElement(m.default,{dropdownLabel:"AUTHOR RESOURCES",links:i}))),null!==this.props.user&&c.default.createElement("ul",{className:s},c.default.createElement("li",null,y.hasFeatureFlag(p.TOP_NAV)?c.default.createElement(m.default,{dropdownLabel:"PROJECTS",links:[{label:"All Projects",to:"/projects",useLink:!0},{label:"Manage Promotions",to:"/projects/coupon",useLink:!0},{label:"Manage Series",to:"/projects/series",useLink:!0},{label:"Ad Banner Design Tool",to:"/projects/promote-book",useLink:!0}]}):c.default.createElement(d.Link,{to:"/"+h.ProjectPaths.Base,activeClassName:"active"},"Projects")),c.default.createElement("li",null,c.default.createElement(d.Link,{to:"/"+h.SalesReportingPaths.Base,title:"SALES REPORTS",activeClassName:"active"},"Sales Reports")),0<f.default.hasEaaPermission().length&&c.default.createElement("li",null,c.default.createElement(d.Link,{to:e,activeClassName:"active"},"Analytics")),c.default.createElement("li",null,c.default.createElement(m.default,{dropdownLabel:"AUTHOR RESOURCES",links:i})),c.default.createElement("li",null,c.default.createElement(m.default,{dropdownLabel:"MY ACCOUNT",links:l}))))))}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(13)),l=n(a(0)),i=a(2);!function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(a(108));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?f(a):n).state={menuClosed:!0},t.onEnterMenu=t.onEnterMenu.bind(f(f(t))),t.onLeaveMenu=t.onLeaveMenu.bind(f(f(t))),t.onFocusDropdown=t.onFocusDropdown.bind(f(f(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,l.default.Component),t=o,(a=[{key:"onEnterMenu",value:function(){var e=this;setTimeout(function(){e.setState({menuClosed:!1})},0)}},{key:"onLeaveMenu",value:function(){var e=this;setTimeout(function(){e.setState({menuClosed:!0})},0)}},{key:"onFocusDropdown",value:function(e){"MY ACCOUNT "===e.currentTarget.firstChild.innerText?(0,r.default)(document.getElementsByClassName("dropdown-author-resources")).parents(".dropdown").removeClass("open"):(0,r.default)(document.getElementsByClassName("dropdown-my-account")).parents(".dropdown").removeClass("open")}},{key:"renderLink",value:function(e){return e.hide?null:l.default.createElement("li",{key:e.label,className:"dropdown-link"},e.breakLine?l.default.createElement(i.Link,{to:e.to,target:e.target},e.label,l.default.createElement("br",null),e.label2):e.useLink?l.default.createElement(i.Link,{to:e.to,target:e.target},e.label):l.default.createElement("a",{href:e.to},e.label))}},{key:"render",value:function(){var t=this,e=this.props,a=e.dropdownLabel,n=e.links,o=this.state.menuClosed;return l.default.createElement("span",{className:"my-account-menu"},l.default.createElement("span",{className:"dropdown"+(o?"":" open"),onClick:function(){return t.setState({menuClosed:!o})},onMouseOver:function(){return t.setState({menuClosed:!1})},onMouseLeave:function(){return t.setState({menuClosed:!0})},style:{zIndex:"10002"}},l.default.createElement("a",{href:"javascript:void(0)",title:a,onFocus:this.onFocusDropdown,onBlur:this.onFocusDropdown,className:"AUTHOR RESOURCES"==a?"dropdown-author-resources":"dropdown-my-account"},l.default.createElement("span",{className:"account-container-desktop my-account-link"},a," ",l.default.createElement("span",{className:"icon-down"}))),l.default.createElement("ul",{id:"dropdown-menu",className:"dropdown-menu my-account-menu-links ",role:"menu",ref:"dropdownMenu"},n.map(function(e){return t.renderLink(e)}))))}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(a(13));var r=n(a(0)),l=n(a(4)),i=n(a(370)),s=n(a(79));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={mobileMenuState:s.default.getMobileMenuState()},t.toggleMobileClass=t.toggleMobileClass.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){s.default.addMobileMenuChangeListener(this.toggleMobileClass)}},{key:"componentWillUnmount",value:function(){s.default.removeMobileMenuChangeListener(this.toggleMobileClass)}},{key:"toggleMobileClass",value:function(){this.setState({mobileMenuState:s.default.getMobileMenuState()})}},{key:"render",value:function(){return r.default.createElement("div",{id:"mobile-menu",className:"mobile-menu"+("opened"===this.state.mobileMenuState?" is-active":"")},r.default.createElement(i.default,{mobile:!0,loggedState:l.default.getLoggedState()}))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1574)),i=o(a(4)),s=n(a(67)),u=o(a(1578)),c=n(a(1579)),d=o(a(1580)),f=n(a(25)),p=o(a(3)),m=n(a(513)),h=o(a(514)),y=n(a(31)),b=o(a(79)),g=o(a(30)),v=n(a(28)),E=a(7),S=n(a(10));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var N=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=w(o).call(this,e))||"object"!==k(n)&&"function"!=typeof n?C(a):n).state={loading:!0,maxTime:"true",toast:{active:!1,content:""}},t.onServiceError=t.onServiceError.bind(C(C(t))),t.onToggleToast=t.onToggleToast.bind(C(C(t))),t.onUserChanged=t.onUserChanged.bind(C(C(t))),t.onFeatureModelLoaded=t.onFeatureModelLoaded.bind(C(C(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){s.setErrorHandler(this.onServiceError),s.setHeaderInspector(function(e){return m.setToday(e)});var e=localStorage.getItem("sessionStarted"),t=localStorage.getItem("visitCount"),a=localStorage.getItem("sessionSub"),n=localStorage.getItem("sessionId"),o=localStorage.getItem("maxTimeVisit");n||"true"===a||o||(n=Date.now().toString(),localStorage.setItem("sessionId",n),localStorage.setItem("isNewSessionSub","true"),e||"true"===e||(localStorage.setItem("sessionStarted","true"),localStorage.setItem("visitCount","first"),v.loadFeatureModel()),"true"==e&&"first"==t&&(localStorage.setItem("sessionStarted","false"),localStorage.setItem("visitCount","second"),v.loadFeatureModel()),"false"==e&&"second"==t&&(localStorage.setItem("sessionStarted","true"),localStorage.setItem("visitCount","third"),v.loadFeatureModel(),this.onDismissFeatureModel(this.state.featureModel))),window.addEventListener("beforeunload",function(){localStorage.removeItem("sessionId"),localStorage.removeItem("sessionSub")})}},{key:"componentWillMount",value:function(){i.default.addChangeListener(this.onUserChanged),f.locationChanged(window.location.href),b.default.addToggleToastListener(this.onToggleToast),g.default.addFeatureModelLoadedListener(this.onFeatureModelLoaded)}},{key:"componentWillUnmount",value:function(){i.default.removeChangeListener(this.onUserChanged),b.default.removeToggleToastListener(this.onToggleToast),g.default.removeFeatureModelLoadedListener(this.onFeatureModelLoaded)}},{key:"componentWillUpdate",value:function(){setTimeout(function(){return f.locationChanged(window.location.href)},0)}},{key:"onDismissFeatureModel",value:function(t){Array.isArray(t)&&0<t.length&&this.setState({isDismissing:!0},function(e){return v.dismissBroadcastMessage(t[0].messageId)})}},{key:"onFeatureModelLoaded",value:function(){var a=this,n=g.default.getFeatureModel();if(Array.isArray(n)&&0<n.length){var e=(0,E.bn_moment)(n[0].endDateTime).format("MM/D/YYYY"),t=n[0].headline.replace(/;4$/,""),o=n[0].longDetails.replace(/for money\./i,"for money.<br/><br/>");this.setState({featureModel:n[0],featureModelLength:n.length,featureModelHeading:t,featureModelDetails:n[0].details,featureModelLongDetails:o,asOfDate:e}),setTimeout(function(){0<a.state.featureModelLength&&"n"!=a.state.featureModel&&S.showConfirmationModal(a.state.featureModelHeading+": "+a.state.featureModelDetails,a.state.featureModelLongDetails,"I understand. Do not show me this message again.","Close",function(e,t){if(e){localStorage.setItem("visitCount",4),a.setState({visitCount:4}),localStorage.setItem("maxTimeVisit","true"),a.onDismissFeatureModel(n)}document.querySelectorAll(".modal-backdrop").forEach(function(e){return e.remove()})})},1)}}},{key:"onServiceError",value:function(e,t){c.raiseGenericServiceError(e);var a={eventInfo:{eventName:"Error",eventAction:"error",timeStamp:new Date},category:{primaryCategory:"Errors"},attributes:{errorCode:"500",errorMessage:e}};f.omnitureActionInvoked(a,"onError")}},{key:"onUserChanged",value:function(){this.setState({loading:!1})}},{key:"onToggleToast",value:function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3e3,n={active:e,content:t};this.setState({toast:n},function(){b.default.getToastStatus()&&setTimeout(function(){y.toggleToast(!1)},a)})}},{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement("div",null,this.state.loading&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(p.default,null)),r.default.createElement(d.default,null)),this.props.children,r.default.createElement(d.default,null),r.default.createElement(u.default,{routes:this.props.routes})),r.default.createElement(l.default,null),r.default.createElement(h.default,{toast:this.state.toast}))}}])&&P(t.prototype,a),n&&P(t,n),o}();t.default=N},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=(o(a(1575)),n(a(251))),i=n(a(11)),s=o(a(1576));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=d(this,f(a).call(this,e))).AdWordsComponent=l.createFeatureProtectedComponent(i.ADWORDS),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,r.default.Component),t=a,(n=[{key:"render",value:function(){var e=this.AdWordsComponent;return r.default.createElement("div",{className:"hidden"},r.default.createElement(s.default,null),r.default.createElement(e,null))}}])&&c(t.prototype,n),o&&c(t,o),a}();t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0));n(a(4)),n(a(52)),n(a(45));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),a=t,(n=[{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"onAdEvent",value:function(e,t){window.gtag("event","conversion",{send_to:e})}},{key:"render",value:function(){return null}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=a(7),i=n(a(4)),s=n(a(1577));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).onTrackEvent=t.onTrackEvent.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){s.default.addOnOmnitureEventFiredListener(this.onTrackEvent)}},{key:"componentWillUnmount",value:function(){s.default.removeOnOmnitureEventFiredListener(this.onTrackEvent)}},{key:"onTrackEvent",value:function(e,t){var a=i.default.getUser(),n={event:[],page:{pageInfo:{ipAddress:a&&a.ipAddress?a.ipAddress:null,language:a&&a.language?a.language:null,previousPageName:null,breadCrumbs:[],geoRegion:null,pageName:null,pageType:null},timestamp:(0,l.bn_moment)().format("ddd MMM DD HH:mm:ss [EST] YYYY"),category:{hierarchy:null,primaryCategory:null,subCategory:[],primaryCategoryId:0},attributes:{internalCampaign:{adFormat:null,cta:null,description:null,element:null,pageType:null}}},session:{serverName:null,sessionID:null,platformName:null},cart:{price:{basePrice:0,priceWithTax:0,shipping:0,transationalTotal:0,currency:"USD"},item:[]},user:[{cohort:null,profile:[{profileInfo:{profileID:null,userName:a&&a.firstName&&a.firstName?a.firstName+" "+a.lastName:null,email:a?a.email:null,language:null,membershipID:null,customerKey:a?a.customerId:null,isPandoraEligible:!1,pandoraEligibilityBalance:0},address:{line1:null,line2:null,stateProvince:null,postalCode:null,country:null,city:null}}]}]};"onPageView"===t&&(e.attributes.page.pageInfo.previousPageName=window.previousPageName,e.attributes.page.pageInfo.referringURL=window.previousLocation),n.event.push(e),window.digitalData=n,window._satellite&&window._satellite.track(t)}},{key:"render",value:function(){return null}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(44),n=o(a(16)),l=o(a(18));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f="omnitureEventFired",p=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=u(this,c(t).call(this)),window.previousLocation=null,window.previousPageName=null,e}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.EventEmitter),a=t,(n=[{key:"addOnOmnitureEventFiredListener",value:function(e){this.addListener(f,e)}},{key:"removeOnOmnitureEventFiredListener",value:function(e){this.removeListener(f,e)}},{key:"onLocationChanged",value:function(e){window.previousLocation=e}},{key:"onOmnitureEventFired",value:function(e,t){this.emit(f,e,t)}},{key:"onPageNameChanged",value:function(e){window.previousPageName=e}},{key:"handleActions",value:function(e){switch(e.type){case l.default.Omniture.LOCATION_CHANGED:this.onLocationChanged(e.args.data);break;case l.default.Omniture.OMNITURE_EVENT_FIRED:this.onOmnitureEventFired(e.args.data,e.args.event);break;case l.default.Omniture.PAGE_NAME_CHANGED:this.onPageNameChanged(e.args.data)}}}])&&s(a.prototype,n),o&&s(a,o),t}());n.default.register(p.handleActions.bind(p));var m=p;t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(13));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={description:null,title:null,keywords:null},t.checkMeta=t.checkMeta.bind(d(d(t))),t.setDescription=t.setDescription.bind(d(d(t))),t.setTitle=t.setTitle.bind(d(d(t))),t.setKeywords=t.setKeywords.bind(d(d(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.checkMeta(this.props.routes)}},{key:"componentWillReceiveProps",value:function(e){this.checkMeta(e.routes)}},{key:"checkMeta",value:function(e){var t=e[e.length-1];void 0===t.description?this.setDescription("B&N Press"):t.description!==this.state.description&&this.setDescription(t.description),void 0===t.title?this.setTitle("B&N Press"):t.title!==this.state.title&&this.setTitle(t.title),void 0===t.keywords?this.setKeywords(""):t.keywords!==this.state.keywords&&this.setKeywords(t.keywords)}},{key:"setDescription",value:function(e){this.setState({description:e},function(){return(0,l.default)("meta[name=description]").attr("content",e)})}},{key:"setTitle",value:function(e){this.setState({title:e},function(){return document.title=e})}},{key:"setKeywords",value:function(e){this.setState({keywords:e},function(){return(0,l.default)("meta[name=keywords]").attr("content",e)})}},{key:"render",value:function(){return null}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.raiseGenericServiceError=function(e){n.default.dispatch({type:o.default.Errors.GENERIC_SERVICE_ERROR,args:e})};var n=r(a(16)),o=r(a(18));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1581)),i=n(a(1582)),s=n(a(1583)),u=n(a(500)),c=n(a(1584)),d=n(a(502)),f=n(a(503)),p=n(a(504)),m=n(a(505)),h=n(a(506)),y=n(a(333)),b=n(a(1585)),g=n(a(501)),v=n(a(507)),E=n(a(1586)),S=n(a(1587)),k=n(a(508)),P=n(a(509)),w=n(a(510)),O=n(a(511)),C=n(a(1588)),N=n(a(1589)),_=n(a(1590)),T=n(a(512)),D=n(a(1591)),j=n(a(1592)),M=n(a(1593)),L=n(a(1594)),A=n(a(1595)),B=n(a(1596)),x=n(a(1597)),R=n(a(1598)),I=n(a(1599)),F=n(a(1600)),Y=n(a(1601));function n(e){return e&&e.__esModule?e:{default:e}}function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function W(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){o(t,e,a[e])})}return t}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function H(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var q=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=G(o).call(this,e))||"object"!==U(n)&&"function"!=typeof n?K(a):n).state={modals:[]},t.onOpenModal=t.onOpenModal.bind(K(K(t))),t.onModalClosed=t.onModalClosed.bind(K(K(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){w.default.addOpenListener(this.onOpenModal),w.default.addClosedListener(this.onModalClosed)}},{key:"componentWillUnmount",value:function(){w.default.removeOpenListener(this.onOpenModal),w.default.removeClosedListener(this.onModalClosed)}},{key:"onOpenModal",value:function(t){if(t.params&&t.params.singleModalOnly){var e=this.state.modals.findIndex(function(e){return e.handle===t.handle});-1<e?this.state.modals[e]=t:this.state.modals.push(t)}else this.state.modals.push(t);this.setState(W({},this.state))}},{key:"onModalClosed",value:function(t){this.state.modals=this.state.modals.filter(function(e){return e.handle!==t}),this.setState(W({},this.state))}},{key:"buildModals",value:function(){return this.state.modals.map(function(e){return"NotificationModal"===e.type?r.default.createElement(O.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"AddNewModal"===e.type?r.default.createElement(i.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"AddressValidationModal"===e.type?r.default.createElement(s.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"AddContributorModal"===e.type?r.default.createElement(l.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"BusyModal"===e.type?r.default.createElement(u.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"CategorySearchModal"===e.type?r.default.createElement(c.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"ChangeAccountPermissionModal"===e.type?r.default.createElement(d.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"CollectingMobileNumberModal"===e.type?r.default.createElement(f.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"CollectingEmailIdModal"===e.type?r.default.createElement(p.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"TwoFaProfileModal"===e.type?r.default.createElement(Y.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"TwoFaMaxAttemptErrorModal"===e.type?r.default.createElement(F.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"ChangeBusinessStatusModal"===e.type?r.default.createElement(m.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"ChangeUserRoleModal"===e.type?r.default.createElement(h.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"ConfirmationModal"===e.type?r.default.createElement(y.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"OrderCancelModal"===e.type?r.default.createElement(b.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"CopyTextModal"===e.type?r.default.createElement(g.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"DeactivateUserModal"===e.type?r.default.createElement(v.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"EBookPreviewRefreshModal"===e.type?r.default.createElement(E.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"EditOnSaleConfirmationModal"===e.type?r.default.createElement(S.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"InformationModal"===e.type?r.default.createElement(P.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"OrderCopyCompleteBookModal"===e.type?r.default.createElement(C.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"OrderCopyCompleteBookModalNoAccess"===e.type?r.default.createElement(N.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"RecipientModal"===e.type?r.default.createElement(T.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"ReferralWelcomeModal"===e.type?r.default.createElement(D.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"ReportRowDetailModal"===e.type?r.default.createElement(j.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"SpineProgressModal"===e.type?r.default.createElement(_.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"TakeOffSaleModal"===e.type?r.default.createElement(I.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"ErrorModal"===e.type?r.default.createElement(k.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"UploadErrorModal"===e.type?r.default.createElement(M.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"UploadProgressModal"===e.type?r.default.createElement(L.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"SearchExhaustModal"===e.type?r.default.createElement(A.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"SelectProgressModal"===e.type?r.default.createElement(B.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"VerifyCreditCardSecurityCodeModal"===e.type?r.default.createElement(x.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):"VerifyTinW9Modal"===e.type?r.default.createElement(R.default,V({key:e.handle},e.params,{handle:e.handle,callback:e.callback})):void 0})}},{key:"render",value:function(){return r.default.createElement("div",{className:"modal-container"},this.buildModals())}}])&&H(t.prototype,a),n&&H(t,n),o}();t.default=q},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(0)),r=(o(a(4)),o(a(21))),s=o(a(47)),u=(n(a(11)),o(a(6))),c=o(a(12)),d=n(a(9)),l=o(a(135)),f=n(a(75));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={initManagePromotion:null!=e.managePromotion&&e.managePromotion,initFirstName:e.firstName?e.firstName:"",initLastName:e.lastName?e.lastName:"",initEmail:e.email?e.email:"",valid:!1,editable:!!e.editable,checkBoxEdit:e.editable,tableData:{result:{data:[]}},removeDuplicteFn:!1},t.onGettingContributorDetails=t.onGettingContributorDetails.bind(b(b(t))),t.onChange=t.onChange.bind(b(b(t))),t.onSubmit=t.onSubmit.bind(b(b(t))),t.onEdit=t.onEdit.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,r.default),t=o,(a=[{key:"componentWillMount",value:function(){l.default.addGetContributorAddLoadedListener(this.onGettingContributorDetails),f.getContributorDetails();var e=this.props.accessListChecked[4]?{PROJECTS_SERIES:!(!this.props.accessListChecked[0]||"PROJECTS_SERIES"!=this.props.accessListChecked[0].value)&&this.props.accessListChecked[0].isChecked,ORDER_COPIES:!(!this.props.accessListChecked[1]||"ORDER_COPIES"!=this.props.accessListChecked[1].value)&&this.props.accessListChecked[1].isChecked,PROMOTIONS:!(!this.props.accessListChecked[2]||"PROMOTIONS"!=this.props.accessListChecked[2].value)&&this.props.accessListChecked[2].isChecked,SALES_REPORTS:!(!this.props.accessListChecked[3]||"SALES_REPORTS"!=this.props.accessListChecked[3].value)&&this.props.accessListChecked[3].isChecked,AUTHOR_PAGES:!(!this.props.accessListChecked[4]||"AUTHOR_PAGES"!=this.props.accessListChecked[4].value)&&this.props.accessListChecked[4].isChecked}:{PROJECTS_SERIES:!(!this.props.accessListChecked[0]||"PROJECTS_SERIES"!=this.props.accessListChecked[0].value)&&this.props.accessListChecked[0].isChecked,ORDER_COPIES:!(!this.props.accessListChecked[1]||"ORDER_COPIES"!=this.props.accessListChecked[1].value)&&this.props.accessListChecked[1].isChecked,PROMOTIONS:!(!this.props.accessListChecked[2]||"PROMOTIONS"!=this.props.accessListChecked[2].value)&&this.props.accessListChecked[2].isChecked,SALES_REPORTS:!(!this.props.accessListChecked[3]||"SALES_REPORTS"!=this.props.accessListChecked[3].value)&&this.props.accessListChecked[3].isChecked};this.setState({initialCheckboxValues:e})}},{key:"componentWillUnmount",value:function(){l.default.removeGetContributorAddLoadedListener(this.onGettingContributorDetails)}},{key:"onGettingContributorDetails",value:function(){var e=l.default.contributorDetails();e.result.data&&this.setState({tableData:e})}},{key:"onChange",value:function(){if(this.state.initEmail){var e=this.state.initialCheckboxValues,t=this.refs.form.gather(),a=e.PROJECTS_SERIES!==t.PROJECTS_SERIES&&""!==t.PROJECTS_SERIES,n=e.ORDER_COPIES!==t.ORDER_COPIES&&""!==t.ORDER_COPIES,o=e.PROMOTIONS!==t.PROMOTIONS&&""!==t.PROMOTIONS,r=e.SALES_REPORTS!==t.SALES_REPORTS&&""!==t.SALES_REPORTS,l=e.hasOwnProperty("AUTHOR_PAGES")&&e.AUTHOR_PAGES!==t.AUTHOR_PAGES&&""!==t.AUTHOR_PAGES,i=t.firstName&&t.firstName!==this.state.initFirstName,s=t.lastName&&t.lastName!==this.state.initLastName,u=t.email&&t.email!==this.state.initEmail;a||n||o||r||l||u||s||i?this.setState({valid:this.refs.form.valid()}):this.setState({valid:!1})}else{var c;c=!!(this.refs.firstName._value&&this.refs.lastName._value&&this.refs.email._value),"Add Contributor"==this.props.leftButton?this.setState({valid:!!c&&this.refs.form.valid()}):this.setState({valid:c})}}},{key:"onSubmit",value:function(e){var t=this.refs.form.gather();"deleteContributor"===e?this.complete({deleteContributor:e}):t&&this.complete({firstName:t.firstName,lastName:t.lastName,email:t.email?t.email.toLowerCase():t.email,data:t})}},{key:"onEdit",value:function(){this.setState({editable:!0,removeDuplicteFn:!0})}},{key:"render",value:function(){var e,t,a=this,n=!0,o=!1,r=this.state.checkBoxEdit;(this.state.initEmail||this.state.initFirstName||this.state.initLastName)&&(e=this.state.initEmail,t=this.state.initFirstName+" "+this.state.initLastName),this.refs.form&&this.refs.form._controls&&(r=!0,n=!this.refs.form._controls.PROJECTS_SERIES.value(),this.refs.form._controls.PROJECTS_SERIES._value||(this.refs.form._controls.ORDER_COPIES._value=this.refs.form._controls.PROJECTS_SERIES._value,this.refs.form._controls.PROMOTIONS._value=this.refs.form._controls.PROJECTS_SERIES._value)),r||this.props.accessListChecked.map(function(e){return"PROJECTS_SERIES"==e.value&&(o=e.isChecked,n=!e.isChecked),o});var l=this.props.accessListChecked.map(function(e){return i.default.createElement(s.default,{className:e.disable?"contributorChild":"",name:e.value,label:e.description,initValue:e.isChecked,disableCustom:e.disable?n:e.disable,onChange:function(e){return a.setState({initManagePromotion:e.newValue})}})});return i.default.createElement("div",{ref:"modal",className:"modal fade change-business-status-modal",role:"dialog","aria-hidden":"true"},i.default.createElement("div",{className:"modal-dialog"},i.default.createElement("div",{className:"modal-content"},i.default.createElement("div",{className:"modal-close-icon"},i.default.createElement("span",{className:"icon-close-modal","data-dismiss":"modal"})),i.default.createElement("div",{className:"modal-header"},i.default.createElement("h3",null,this.props.heading)),i.default.createElement(u.default,{ref:"form",onSubmit:this.onSubmit,onChange:this.onChange},i.default.createElement("div",{className:"modal-body row"},this.state.initEmail&&i.default.createElement("div",{className:"col-md-12 col-sm-12"},i.default.createElement("hr",null)),i.default.createElement("div",{className:"col-md-6 col-sm-12"},this.state.initEmail&&!this.state.editable&&i.default.createElement("div",null,i.default.createElement("div",null,"CONTRIBUTOR"),i.default.createElement("div",{className:"contributorDetails"},t)),this.state.editable&&i.default.createElement(c.default,{name:"firstName",ref:"firstName",label:"First Name",initValue:this.state.initFirstName,maxLength:20,pattern:/^[a-zA-Z0-9 \-.]*$/,rules:[d.required("Please enter a first name")]})),this.state.editable&&i.default.createElement("div",{className:"col-md-6 col-sm-12"},i.default.createElement(c.default,{name:"lastName",ref:"lastName",label:"Last Name",initValue:this.state.initLastName,maxLength:24,pattern:/^[a-zA-Z0-9 \-.]*$/,rules:[d.required("Please enter a last name")]})),this.state.initEmail&&!this.state.editable&&i.default.createElement("div",{className:"col-md-6 col-sm-12"},i.default.createElement("div",null,"CONTRIBUTOR EMAIL"),i.default.createElement("div",{className:"contributorDetails inlineBlock"},e),i.default.createElement("div",{className:"edit-link inlineBlock padding-left-10",onClick:function(){return a.onEdit()}}," Edit")),this.state.editable&&i.default.createElement("div",{className:"col-md-12 col-sm-12 mar-contrbtr"},i.default.createElement(c.default,{name:"email",ref:"email",label:"Email Address",initValue:this.state.initEmail,autoComplete:"off",maxLength:50,rules:this.state.removeDuplicteFn?[d.required("Please enter your email address"),d.pattern(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Please enter a valid email address")]:[d.required("Please enter your email address"),d.pattern(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Please enter a valid email address"),d.duplicateEmail(this.state.tableData.result.data)]})),i.default.createElement("div",{className:"col-md-12 col-sm-12"},i.default.createElement("hr",null)),i.default.createElement("div",{className:"col-md-12 col-sm-12"},i.default.createElement("p",null,i.default.createElement("strong",null,"Select features you would like to approve for the contributor"))),i.default.createElement("div",{className:"col-md-12 col-sm-12"},l),i.default.createElement("div",{className:"col-md-12 col-sm-12"},i.default.createElement("hr",null))),i.default.createElement("div",{className:"modal-footer"},"Update Permissions"===this.props.leftButton&&i.default.createElement("button",{className:"pull-left floatNoneContr back btn btn-primary",disabled:!this.state.valid,onClick:this.onSubmit},this.props.leftButton),"Delete Contributor"===this.props.rightButton&&i.default.createElement("button",{className:"pull-right floatNoneContr forward btn btn-cancel","data-dismiss":"modal",onClick:function(){return a.onSubmit("deleteContributor")}},this.props.rightButton),"Cancel"===this.props.rightButton&&i.default.createElement("button",{className:"pull-left floatNoneContr back btn btn-cancel","data-dismiss":"modal"},"Cancel"),"Add Contributor"===this.props.leftButton&&i.default.createElement("button",{className:"pull-right floatNoneContr forward btn btn-primary",disabled:!this.state.valid,onClick:this.onSubmit},this.props.leftButton))))))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),r=n(a(21)),i=n(a(62)),s=n(a(6)),u=n(a(12)),c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(9));function n(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,a){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?y(a):n).state={valid:!1},t.onSubmit=t.onSubmit.bind(y(y(t))),t.onValidationChange=t.onValidationChange.bind(y(y(t))),t.makeClick=t.makeClick.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default),t=o,(a=[{key:"componentDidMount",value:function(){p(m(o.prototype),"componentDidMount",this).call(this),setTimeout(function(){var e='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',t=document.querySelector(".modal-container"),a=t.querySelectorAll(e)[0],n=t.querySelectorAll(e),o=n[n.length-1];document.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===a&&(o.focus(),e.preventDefault()):document.activeElement===o&&(a.focus(),e.preventDefault()))}),a.focus()},1e3)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onSubmit",value:function(){var e="series"===this.props.subject?this.refs.seriesName.value():[this.refs.firstName.value(),this.refs.lastName.value()],t={value:e,label:e};this.props.submitFunction(t),this.complete()}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"render",value:function(){var o,r,e="series"===this.props.subject?"Add New Series Name":"Add New Contributor's Name";return l.default.createElement("div",{ref:"modal",className:"modal fade information-modal",role:"dialog","aria-hidden":"true"},l.default.createElement("div",{className:"modal-dialog"},l.default.createElement("div",{className:"add-new-modal-content"},l.default.createElement("div",{className:"modal-content"},l.default.createElement("div",{className:"modal-close-icon"},l.default.createElement("span",{className:"icon-close-modal",tabIndex:"0",onKeyDown:this.makeClick,"data-dismiss":"modal"})),l.default.createElement("div",{className:"add-new-title"},e),l.default.createElement(s.default,{ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},l.default.createElement("div",{className:"row add-new-input-row"},l.default.createElement("div",{className:"col-xs-8"},"series"===this.props.subject&&l.default.createElement(u.default,{className:"new-series-title-box",ref:"seriesName",name:"seriesName",label:"Series Name",autoComplete:"off",maxLength:120,rules:[c.required("Please enter the title.")]}),"contributor"===this.props.subject&&l.default.createElement("div",null,l.default.createElement("div",{className:"col-xs-6 new-contributor-row"},l.default.createElement(u.default,{className:"new-contributor-input",name:"contributorsFirstName",ref:"firstName",label:"Contributor's First Name",autoComplete:"off",rules:[(r="contributorsLastName",{key:"firstNameLength",dependsOn:{controlKeys:[r],onEveryChange:!0},test:function(e,t,a){if(!a[r])return null;var n=e.length+a[r].value().length;return n<=38?null:"Please enter a first name. First and last name combined can't exceed 38 characters."}})]})),l.default.createElement("div",{className:"col-xs-6 contributor-last-name"},l.default.createElement(u.default,{className:"new-contributor-input",name:"contributorsLastName",ref:"lastName",label:"Contributor's Last Name",autoComplete:"off",rules:[(o="contributorsFirstName",{key:"lastNameLength",dependsOn:{controlKeys:[o],onEveryChange:!0},test:function(e,t,a){if(!a[o])return null;var n=e.length+a[o].value().length;return n<=38?null:" "}}),c.required("Please enter a last name.")]})))),l.default.createElement("div",{className:"col-xs-4"},l.default.createElement(i.default,{buttonText:"Submit",ref:"saveButton",disabled:!this.state.valid,click:this.onSubmit}))))))))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(21));n(a(4));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={message:e.message,suggestions:e.suggestions||[],address:t.transformAddress(e.address),choice:null,chosenAddress:null},t.transformAddress=t.transformAddress.bind(d(d(t))),t.onSubmit=t.onSubmit.bind(d(d(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,l.default),t=o,(a=[{key:"transformAddress",value:function(e){var t=e;return void 0!==e.address1&&(t={addressLine1:e.address1,addressLine2:void 0!==e.address2?e.address2:"",city:e.city,state:e.state,zip:e.postalCode}),t}},{key:"onSelection",value:function(e,t){t=t||null,this.setState({choice:e,chosenAddress:t})}},{key:"onSubmit",value:function(){"cancel"===this.state.choice?this.cancel():this.complete(this.state.chosenAddress)}},{key:"render",value:function(){var e=this;return r.default.createElement("div",{ref:"modal",className:"modal fade address-validation-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal","data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Address Verification")),r.default.createElement("div",{className:"modal-body"},r.default.createElement("p",null,"We checked your address with the U.S. Postal Service.",r.default.createElement("br",null),this.state.message)),0===this.state.suggestions.length&&r.default.createElement("div",{className:"radio-choice"},r.default.createElement("label",null,r.default.createElement("input",{type:"radio",name:"choice",value:"cancel",onChange:function(){return e.onSelection("cancel")}}),"Correct My Address Before Saving")),0<this.state.suggestions.length&&r.default.createElement("div",null,this.renderSuggestions()),this.renderEnteredAddress(),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-cancel","data-dismiss":"modal"},"Cancel"),r.default.createElement("button",{className:"btn btn-primary",disabled:!this.state.choice,onClick:this.onSubmit},"Continue")))))}},{key:"renderSuggestions",value:function(){var n=this,a=1,e=this.state.suggestions,t=void 0;return 0<e.length&&this.state.address.addressLine2&&0<this.state.address.addressLine2.trim().length&&(void 0===(t=this.state.suggestions.find(function(e){var t=n.transformAddress(n.state.address),a=n.transformAddress(e);return t.addressLine1.trim()===a.addressLine1.trim()&&void 0!==a.addressLine2&&void 0!==t.addressLine2&&t.addressLine2.trim()===a.addressLine2.trim()&&t.city.trim()===a.city.trim()&&t.state.trim()===a.state.trim()}))?0===(e=this.state.suggestions.filter(function(e){var t=n.transformAddress(e);return t.addressLine2&&0<t.addressLine2.trim().length})).length&&(e=this.state.suggestions):e=[t]),e.map(function(e){var t=n.transformAddress(e);return r.default.createElement("div",{key:a++,className:"radio-choice"},r.default.createElement("div",null,r.default.createElement("label",null,r.default.createElement("input",{type:"radio",name:"choice",value:"change",onChange:function(){return n.onSelection("change",e)}}),"Use Suggested USPS Address")),r.default.createElement("div",{className:"address"},r.default.createElement("span",null,t.addressLine1),t.addressLine2&&0<t.addressLine2.length&&r.default.createElement("span",null,r.default.createElement("br",null),t.addressLine2),r.default.createElement("span",null,r.default.createElement("br",null),t.city,", ",t.state," ",t.zip)))})}},{key:"renderEnteredAddress",value:function(){var e=this,t=this.state.address;return r.default.createElement("div",{className:"radio-choice"},r.default.createElement("div",null,r.default.createElement("label",null,r.default.createElement("input",{type:"radio",name:"choice",value:"keep",onChange:function(){return e.onSelection("keep")}}),"Continue with Address I Entered")),r.default.createElement("div",{className:"address"},r.default.createElement("span",null,t.addressLine1),t.addressLine2&&0<t.addressLine2.length&&r.default.createElement("span",null,r.default.createElement("br",null),t.addressLine2),r.default.createElement("span",null,r.default.createElement("br",null),t.city,", ",t.state," ",t.zip)))}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(21)),i=o(a(547)),s=(o(a(47)),o(a(6))),u=o(a(12)),c=o(a(72)),d=n(a(14)),f=n(a(15)),p=o(a(8)),m=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,a){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,n=g(o).call(this,e),(t=!n||"object"!==h(n)&&"function"!=typeof n?E(a):n).state={audience:t.props.audience,subjectType:t.props.subjectType,language:t.props.language,loading:!1,audienceLabel:f.AUDIENCES.find(function(e){return e.value===t.props.audience}).label,languageLabel:t.props.allLanguages.find(function(e){return e.value===t.props.language}).label,subjectTypeLabel:t.props.subjectType===f.FICTION_SUBJECT_TYPE?"Fiction":"Nonfiction",selectedCategories:t.props.categories||[],searchResults:[],page:1,recordsPerPage:8,noResultsMessage:"Enter a keyword into the search field to begin picking your categories."},t.onPageChange=t.onPageChange.bind(E(E(t))),t.onCategorySelectionChange=t.onCategorySelectionChange.bind(E(E(t))),t.onSearch=t.onSearch.bind(E(E(t))),t.onSubmit=t.onSubmit.bind(E(E(t))),t.onCategoriesSearched=t.onCategoriesSearched.bind(E(E(t))),t.onCategoryOrderChange=t.onCategoryOrderChange.bind(E(E(t))),t.makeClick=t.makeClick.bind(E(E(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,l.default),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this._setStateFromProps(e)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"componentDidMount",value:function(){b(g(o.prototype),"componentDidMount",this).call(this),setTimeout(function(){var e='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',t=document.querySelector(".modal-container"),a=t.querySelectorAll(e)[0],n=t.querySelectorAll(e),o=n[n.length-1];document.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===a&&(o.focus(),e.preventDefault()):document.activeElement===o&&(a.focus(),e.preventDefault()))}),a.focus()},800)}},{key:"componentWillMount",value:function(){p.default.addCategoriesSearchedListener(this.onCategoriesSearched)}},{key:"componentWillUnmount",value:function(){p.default.removeCategoriesSearchedListener(this.onCategoriesSearched)}},{key:"onSearch",value:function(){var e=this,t=this.refs.searchForm.gather();t.categorySearch&&0<t.categorySearch.length&&this.setState({loading:!0},function(){return d.searchCategories(t.categorySearch,e.props.audience,e.props.subjectType,1,e.state.recordsPerPage)})}},{key:"onSubmit",value:function(){this.complete(this.state.selectedCategories)}},{key:"onPageChange",value:function(e){var t=this;if((e=e.toString())!==this.state.page){var a=this.refs.searchForm.gather();this.setState({page:e,loading:!0},function(){return d.searchCategories(a.categorySearch,t.props.audience,t.props.subjectType,e,t.state.recordsPerPage)})}}},{key:"onCategoriesSearched",value:function(e){this.setState({searchResults:e.categories||[],numRecords:e.numRecords,loading:!1,noResultsMessage:"We found no categories matching your search criteria. Please try another search."})}},{key:"onCategoryOrderChange",value:function(e,t){this.setState({selectedCategories:e.map(function(e){return e.category})})}},{key:"onCategorySelectionChange",value:function(e,t){var a=this.state.selectedCategories;e?(a.push(t),this.setState({selectedCategories:a})):a.some(function(e){return e.categoryId===t.categoryId})&&(a.splice(a.findIndex(function(e){return e.categoryId===t.categoryId}),1),this.setState({selectedCategories:a}))}},{key:"_setStateFromProps",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!1};this.setState({audience:t.audience,subjectType:t.subjectType,language:t.language,audienceLabel:f.AUDIENCES.find(function(e){return e.value===t.audience}).label,languageLabel:this.props.allLanguages.find(function(e){return e.value===t.language}).label,subjectTypeLabel:t.subjectType===f.FICTION_SUBJECT_TYPE?"Fiction":"Nonfiction",selectedCategories:t.categories||[]},e)}},{key:"render",value:function(){var e=this.state,t=e.searchResults,a=e.selectedCategories;return r.default.createElement("div",{ref:"modal",className:"modal fade category-search-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content project-sort-options"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal",tabIndex:"0",onKeyDown:this.makeClick,"data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Search Categories")),r.default.createElement("p",null,"Use the search bar and select up to five categories that are most relevant to your book. ",r.default.createElement("br",null)," Your current selection is:",r.default.createElement("strong",null," ",this.state.audienceLabel," Audience, ",this.state.languageLabel," Language, ",this.state.subjectTypeLabel,".")),r.default.createElement("div",{className:"project-list-sort project-list-search"},r.default.createElement(s.default,{ref:"searchForm",onSubmit:this.onSearch},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-4"},r.default.createElement("div",{className:"search-container"},r.default.createElement(u.default,{ref:"categorySearch",className:"category-search",name:"categorySearch",label:"Search",disableValidationMessages:!0,onSubmit:this.onSubmit,commitOnEnterKey:!0}),r.default.createElement("div",{className:"glyphicon glyphicon-search",onClick:this.onSearch}))),r.default.createElement("div",{className:"col-xs-8"},r.default.createElement(c.default,{currentPage:parseInt(this.state.page),totalPages:Math.ceil(parseInt(this.state.numRecords)/this.state.recordsPerPage),onChange:this.onPageChange})))),r.default.createElement(s.default,{ref:"resultForm",onSubmit:function(){return!1}},this.state.loading&&r.default.createElement("div",{className:"spinner-area"},r.default.createElement(m.default,{top:"150"})),!this.state.loading&&0===t.length&&r.default.createElement("div",{className:"no-results-area"},r.default.createElement("p",{className:"no-results-message"},this.state.noResultsMessage)),!this.state.loading&&0<t.length&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(i.default,{categories:t,selectedCategories:a,onCategorySelect:this.onCategorySelectionChange}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(c.default,{currentPage:parseInt(this.state.page),totalPages:Math.ceil(parseInt(this.state.numRecords)/this.state.recordsPerPage),onChange:this.onPageChange}))))),r.default.createElement("p",{className:"drag-drop-copy"},"Your first category will be your Primary Category. You can always change the order of your categories."),0<a.length&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(i.default,{categories:a,showSelectedCategoriesHeader:!0,onSort:this.onCategoryOrderChange,onCategoryDelete:this.onCategorySelectionChange}))),0<a.length&&r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-primary",onClick:this.onSubmit},"Continue")))))}}])&&y(t.prototype,a),n&&y(t,n),o}();t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=(o(a(43)),o(a(21))),i=o(a(13)),s=(n(a(32)),n(a(10)),n(a(14))),u=o(a(8)),c=n(a(9)),d=o(a(23)),f=o(a(6)),p=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,a){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=b(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?v(a):n).state={valid:!1,Reason:"",canselReson:[]},e.noAbort&&(t.forbidCloseByUser=!0),t.onCancel=t.onCancel.bind(v(v(t))),t.onSubmit=t.onSubmit.bind(v(v(t))),t.makeClick=t.makeClick.bind(v(v(t))),t.selectReason=t.selectReason.bind(v(v(t))),t.onGetDeleteReason=t.onGetDeleteReason.bind(v(v(t))),t.findselectReasonValue=t.findselectReasonValue.bind(v(v(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,l.default),t=o,(a=[{key:"componentWillMount",value:function(){u.default.addDeleteReasonCompleteListener(this.onGetDeleteReason)}},{key:"componentDidMount",value:function(){y(b(o.prototype),"componentDidMount",this).call(this),s.orderDeleteReasonComplete(),setTimeout(function(){var e='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',t=document.querySelector(".modal-container"),a=t.querySelectorAll(e)[0],n=t.querySelectorAll(e),o=n[n.length-1];document.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===a&&(o.focus(),e.preventDefault()):document.activeElement===o&&(a.focus(),e.preventDefault()))}),a.focus()},1e3)}},{key:"componentWillUnmount",value:function(){u.default.removeDeleteReasonCompleteListener(this.onGetDeleteReason)}},{key:"onGetDeleteReason",value:function(e){this.setState({canselReson:e},function(){(0,i.default)(".del-modal .has-value").removeClass("has-value")})}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onCancel",value:function(){this.finish()}},{key:"onSubmit",value:function(){var e=this.refs.canselReson.value();this.complete(e)}},{key:"findselectReasonValue",value:function(){return this.refs.canselReson.value()}},{key:"selectReason",value:function(){var e=this.refs.canselReson.value();""!==e&&this.setState({valid:this.refs.form.valid(),Reason:e})}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade confirmation-modal del-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog",style:this.props.dialogStyles||{}},r.default.createElement(f.default,{ref:"form",name:"createAccount",className:"create-account-form"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onCancel,"data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Are you sure you want to cancel this order?")),r.default.createElement("div",{className:"modal-body"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},0<this.state.canselReson.length?r.default.createElement(d.default,{name:"canselReson",ref:"canselReson",label:"Select cancelation reason (required)",options:this.state.canselReson,initValue:this.findselectReasonValue,onChange:this.selectReason,rules:[c.required(" ")]}):r.default.createElement("div",{className:"spinner-area"},r.default.createElement(p.default,{top:"150"}))))),r.default.createElement("div",{className:"modal-footer margin-bottom15"},r.default.createElement("button",{tabIndex:"0",className:"btn btn-cancel pull-left",onClick:this.onCancel},"Exit"),r.default.createElement("button",{tabIndex:"0",className:"btn btn-primary pull-right",disabled:!this.state.valid,onClick:this.onSubmit},"Cancel Order"))))))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=E},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(21));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={},t.onSubmit=t.onSubmit.bind(d(d(t))),t.onDownload=t.onDownload.bind(d(d(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,l.default),t=o,(a=[{key:"onSubmit",value:function(){this.complete(!0)}},{key:"onDownload",value:function(){this.complete(!1)}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade change-business-status-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"We're Sorry ...")),r.default.createElement("div",{className:"modal-body"},r.default.createElement("p",null,"We're currently unable to load your preview, but you can download a copy of your file to review.")),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-cancel",onClick:this.onSubmit},"Retry"),r.default.createElement("button",{className:"btn btn-primary",onClick:this.onDownload},"Download")))))}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(4)),i=a(7),s=o(a(333)),u=n(a(14)),c=o(a(8)),d=n(a(11)),f=n(a(15));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?g(a):n).state={project:e.project,priceWindowCutoff:c.default.priceUpdateWindow()?(0,i.bn_moment)(c.default.priceUpdateWindow().startDate):null},t.onPriceUpdateWindowLoaded=t.onPriceUpdateWindowLoaded.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){c.default.priceUpdateWindow()||u.getPriceUpdateWindow(),window.document.getElementById("app").classList.add("editmodal-width")}},{key:"componentWillMount",value:function(){c.default.addPriceUpdateWindowListener(this.onPriceUpdateWindowLoaded)}},{key:"componentWillUnmount",value:function(){c.default.removePriceUpdateWindowListener(this.onPriceUpdateWindowLoaded),window.document.getElementById("app").classList.remove("editmodal-width")}},{key:"onPriceUpdateWindowLoaded",value:function(e){this.setState({priceWindowCutoff:(0,i.bn_moment)(e.startDate)})}},{key:"render",value:function(){this.state.priceWindowCutoff&&r.default.createElement("span",null,r.default.createElement("b",null,this.state.priceWindowCutoff.format("MMMM DD, YYYY"))),(0,i.bn_moment)().isSameOrBefore(this.state.priceWindowCutoff,"day")?(0,i.bn_moment)().format("MMMM"):(0,i.bn_moment)().add(1,"month").format("MMMM");var e="",t=this.state.project;e=t&&t.isSPB&&t.showEditModal&&t.status===f.PROJECT_STATUSES.ONSALE&&l.default.hasCustomSamplingPermission(d.EDIT_SPB_RETIRED)?r.default.createElement("div",null,r.default.createElement("p",{className:"diff-division"},r.default.createElement("strong",null,"UPDATE: "),"You will no longer be required to take your book off sale before making edits."),r.default.createElement("p",{className:"diff-division"},r.default.createElement("h3",null,"Editing Meta Data"),'Meta data is the information you provide in the Book Details section. After making edits to meta data, you will be prompted to save and then publish your edits by clicking the "Publish Changes" button. When making multiple edits, we suggest you complete all edits before clicking Publish Changes. This is because projects are temporarily frozen from further changes immediately after publishing until the changes are fully validated in all our systems.'),r.default.createElement("p",{className:"diff-division"},r.default.createElement("h3",null,"Editing Price"),"You can update the list price of your print book at any point, but please know that price changes won't take effect until the end of each week. Please make any price updates by ",r.default.createElement("strong",null,"Thursday 11:59PM ET")," for the list price to be updated on BN.com by Saturday."),r.default.createElement("p",{className:"diff-division"},r.default.createElement("h3",null,"Editing Interior or Cover File"),'If you upload a new interior or cover file, you will be prompted to save and then publish your edits by clicking the "Publish Changes" button. When making multiple edits, we suggest you complete all changes before clicking "Publish Changes". Your book will remain on sale on BN.com until you click the "Publish Changes" button.',r.default.createElement("p",null,"Please note:"),r.default.createElement("ul",null,r.default.createElement("li",null,"You will not be able to order a copy of this title if you encountered an error while uploading a new file or you did not publish changes after uploading a new file."))),r.default.createElement("p",{className:"diff-division"},r.default.createElement("h3",null,"Publishing Edits"),"After you publish your changes, your book will go off sale temporarily. While changes to the cover or interior will take longer to process, meta data changes will only take your book off sale for a brief, potentially unnoticeable, period."),r.default.createElement("p",null,"Please note:"),r.default.createElement("ul",null,r.default.createElement("li",null,"Our system will only overwrite interior or cover files when it is a different from the published file."),r.default.createElement("li",null,"You may not make any edits to your ISBN or to your publication date to books that are or have been on sale."),r.default.createElement("li",null,"Books that have been recently edited may not be immediately order-able until the edits have been processed."),r.default.createElement("li",null,"Books that recently been taken off sale are not immediately order-able. If you want to order a copy of a recently taken off sale book, please expect to wait 4-5 business days after the off-sale date."))):r.default.createElement("div",null,r.default.createElement("p",null,"In order to make edits to an on-sale book, your book will be taken off sale. This process may take up to 24 hours, but you can make your edits, then click 'Publish Changes,' which will save your changes and put your book on sale. Changes to book details will take effect within 24-72 hours, while cover or interior changes may take longer.",r.default.createElement("br",null)),r.default.createElement("br",null),r.default.createElement("p",null,"Do you still wish to continue?"),r.default.createElement("br",null),r.default.createElement("p",null,"Please note:"),r.default.createElement("ul",null,r.default.createElement("li",null,"You can update the list price of your print book at any point, but please know that price changes won't take effect until the end of each week."),r.default.createElement("li",null,"Please make any price updates by ",r.default.createElement("strong",null,"Thursday 11:59PM ET")," for the list price to be updated on BN.com by Saturday."),r.default.createElement("li",null,"You may not make any edits to your ISBN or to your publication date to books that have been on sale."),r.default.createElement("li",null,"If you want to order a copy of the book after taking it off sale, you will need to wait 4-5 business days.")));var a="Edit Book";return l.default.hasCustomSamplingPermission(d.EDIT_SPB_RETIRED)&&t.isSPB&&(a="Continue"),r.default.createElement(s.default,m({},this.props,{content:e,title:"Edit On-Sale Book",confirmButtonText:a,cancelButtonText:"Cancel"}))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(n(a(43)),n(a(21)));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,a){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?f(a):n).onSubmit=t.onSubmit.bind(f(f(t))),t.makeClick=t.makeClick.bind(f(f(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,l.default),t=o,(a=[{key:"componentDidMount",value:function(){u(c(o.prototype),"componentDidMount",this).call(this),setTimeout(function(){var e='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',t=document.querySelector(".modal-container"),a=t.querySelectorAll(e)[0],n=t.querySelectorAll(e),o=n[n.length-1];document.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===a&&(o.focus(),e.preventDefault()):document.activeElement===o&&(a.focus(),e.preventDefault()))}),a.focus()},1e3)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onSubmit",value:function(){this.complete()}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade order-copy-complete-book-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal",tabIndex:"0",onKeyDown:this.makeClick,"data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Item successfully added to your cart."),r.default.createElement("p",null,"We recommend first ordering a single proof to confirm print quality. Bulk orders for new titles may be canceled at our discretion.")),r.default.createElement("div",{className:"modal-body"},r.default.createElement("div",{className:"left-content"},r.default.createElement("img",{src:this.props.coverThumbnail,className:"img-responsive",alt:"cover image"})),r.default.createElement("div",{className:"right-content"},r.default.createElement("h3",null,this.props.title),r.default.createElement("dl",null,r.default.createElement("dt",null,"Format"),r.default.createElement("dd",null,this.props.format),r.default.createElement("dt",null,"Size"),r.default.createElement("dd",null,this.props.size)))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-primary",onClick:this.onSubmit},"View Shopping Cart")))))}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(n(a(43)),n(a(21)));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,a){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?f(a):n).onSubmit=t.onSubmit.bind(f(f(t))),t.makeClick=t.makeClick.bind(f(f(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,l.default),t=o,(a=[{key:"componentDidMount",value:function(){u(c(o.prototype),"componentDidMount",this).call(this),setTimeout(function(){var e='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',t=document.querySelector(".modal-container"),a=t.querySelectorAll(e)[0],n=t.querySelectorAll(e),o=n[n.length-1];document.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===a&&(o.focus(),e.preventDefault()):document.activeElement===o&&(a.focus(),e.preventDefault()))}),a.focus()},1e3)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onSubmit",value:function(){this.complete()}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade order-copy-complete-book-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal",tabIndex:"0",onKeyDown:this.makeClick,"data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h2",{className:"modal-noaccess-content"},"Item was not added to your cart."),r.default.createElement("p",null,"You don't have access to this feature. Please contact the author for access.")))))}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(21)),i=n(a(8)),s=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).forbidCloseByUser=!0,t.getAttachmentStatusError=t.getAttachmentStatusError.bind(p(p(t))),t.getAttachmentStatusSuccess=t.getAttachmentStatusSuccess.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,l.default),t=o,(a=[{key:"componentWillMount",value:function(){i.default.addPollingAttachmentError(this.getAttachmentStatusError),i.default.addPollingAttachmentSuccess(this.getAttachmentStatusSuccess),i.default.addUploadAttachmentError(this.getAttachmentStatusError)}},{key:"componentWillUnmount",value:function(){i.default.removePollingAttachmentError(this.getAttachmentStatusError),i.default.removePollingAttachmentSuccess(this.getAttachmentStatusSuccess),i.default.removeUploadAttachmentError(this.getAttachmentStatusError)}},{key:"getAttachmentStatusError",value:function(){var e=this;setTimeout(function(){return e.complete()},0)}},{key:"getAttachmentStatusSuccess",value:function(){var e=this;setTimeout(function(){return e.complete()},200)}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade upload-progress-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Processing Your File")),r.default.createElement("div",{className:"modal-body"},r.default.createElement("p",null,"Please wait while we are creating the full cover with these spine details."),r.default.createElement("div",{className:"spinner-container"},r.default.createElement(s.default,{top:"80",backgroundColor:"transparent"}))))))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(21));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,l.default),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade referral-welcome-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal","data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Welcome to B&N Press!")),r.default.createElement("div",{className:"modal-body"},this.props.message),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{ref:"closeButton",className:"btn btn-primary","data-dismiss":"modal"},"Learn More"),r.default.createElement("div",{className:"footer-text",dangerouslySetInnerHTML:{__html:this.props.footerContent}})))))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(n(a(43)),a(7)),i=n(a(21)),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(22));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,d(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i.default),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade report-row-detail-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog",style:this.props.dialogStyles||{}},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal","data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-body"},this.renderFields()))))}},{key:"renderFields",value:function(){var t=this;return this.props.reportDef.fields.filter(function(e){return!!e.desktopWidth&&"paymentReports"!==e.format}).map(function(e){return r.default.createElement("div",{key:e.key,className:"field"},r.default.createElement("span",{className:"field-name"},e.name,":"),"Â Â Â Â ",r.default.createElement("span",{className:"field-value"},t.renderFieldValue(e)))})}},{key:"renderFieldValue",value:function(e){var t=this.props.data;return"currency"===e.format?s.formatCurrency(parseFloat(t[e.key]),t[e.currencyKey]):"year"===e.format?(0,l.bn_moment)(t[e.key].substring(0,10),"MM/DD/YYYY").format("YYYY"):"month"===e.format?(0,l.bn_moment)(t[e.key],"MM/DD/YYYY").format("MMMM"):"paymentMonth"===e.format?(0,l.bn_moment)(t.paymentDate,"MM/DD/YYYY").format("MMMM YYYY"):t[e.key]||""}}])&&u(a.prototype,n),o&&u(a,o),t}();t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(21)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(14));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,a){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?p(a):n).closeModal=t.closeModal.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,l.default),t=o,(a=[{key:"componentDidMount",value:function(){c(d(o.prototype),"componentDidMount",this).call(this)}},{key:"closeModal",value:function(){i.removeUploadErrors(),this.complete()}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade upload-error-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal","data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"We're Sorry ...")),r.default.createElement("div",{className:"modal-body"},this.props.message),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-primary",onClick:this.closeModal},"OK")))))}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(21)),i=n(a(388)),s=n(a(8)),u=n(a(3));function n(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this,e))||"object"!==c(n)&&"function"!=typeof n?m(a):n).forbidCloseByUser=!0,t.state={progressProperties:{stepCount:4,stepOne:{active:!0,complete:!1,title:"Uploading"},stepTwo:{active:!1,complete:!1,title:"Converting File"},stepThree:{active:!1,complete:!1,title:"Validating"},stepFour:{active:!1,complete:!1,title:"Complete"}}},t.getAttachmentStatusError=t.getAttachmentStatusError.bind(m(m(t))),t.updatePDFConversionStatus=t.updatePDFConversionStatus.bind(m(m(t))),t.getAttachmentStatusSuccess=t.getAttachmentStatusSuccess.bind(m(m(t))),t.updatePollingStatus=t.updatePollingStatus.bind(m(m(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,l.default),t=o,(a=[{key:"componentWillMount",value:function(){s.default.addAttachmentReadyForPolling(this.updatePollingStatus),s.default.addPDFConversionCompleteListener(this.updatePDFConversionStatus),s.default.addPollingAttachmentError(this.getAttachmentStatusError),s.default.addPollingAttachmentSuccess(this.getAttachmentStatusSuccess),s.default.addUploadAttachmentError(this.getAttachmentStatusError)}},{key:"componentWillUnmount",value:function(){s.default.removeAttachmentReadyForPolling(this.updatePollingStatus),s.default.removePDFConversionCompleteListener(this.updatePDFConversionStatus),s.default.removePollingAttachmentError(this.getAttachmentStatusError),s.default.removePollingAttachmentSuccess(this.getAttachmentStatusSuccess),s.default.removeUploadAttachmentError(this.getAttachmentStatusError)}},{key:"getAttachmentStatusError",value:function(){var e=this;setTimeout(function(){return e.complete()},0)}},{key:"getAttachmentStatusSuccess",value:function(){var e=this,t=this.state.progressProperties;t.stepThree.complete=!0,t.stepFour.complete=!0,this.setState({progressProperties:t}),setTimeout(function(){return e.complete()},200)}},{key:"updatePDFConversionStatus",value:function(){var e=this.state.progressProperties;e.stepTwo.complete=!0,e.stepThree.active=!0,this.setState({progressProperties:e})}},{key:"updatePollingStatus",value:function(){var e=this.state.progressProperties;e.stepOne.complete=!0,e.stepTwo.active=!0,this.setState({progressProperties:e})}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade upload-progress-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Processing Your File")),r.default.createElement("div",{className:"modal-body"},r.default.createElement("p",null,"We're analyzing your file to confirm it is ready..."),r.default.createElement("p",{className:"upload-progress-file-name "},"Uploading: ",r.default.createElement("strong",null,this.props.fileName)),r.default.createElement("div",{className:"spinner-container"},r.default.createElement(u.default,{top:"80",backgroundColor:"transparent"})),r.default.createElement(i.default,{progressProperties:this.state.progressProperties})))))}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(21)),i=a(2),s=n(a(108));n(a(68));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={error:e.error},t.onClick=t.onClick.bind(p(p(t))),t.onCancel=t.onCancel.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,l.default),t=o,(a=[{key:"onClick",value:function(e){i.browserHistory.push(e),this.finish()}},{key:"onCancel",value:function(){window.location.reload()}},{key:"render",value:function(){var e,t=this;if(this.props.error[0].description.includes("Your search counter resets on")){var a=this.props.error[0].description.split("->");e=a[1]+a[2]}else e=!1;return document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0].getElementsByTagName("input")[0].value="",document.getElementById("app").classList.remove("analyticLineGraphHeight"),r.default.createElement("div",{ref:"modal",id:"searchExhaustModal",className:"modal fade confirmation-modal"+(this.props.extraClass?" "+this.props.extraClass:""),role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog",style:this.props.dialogStyles||{}},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal",onClick:this.onCancel,"data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Search Limit Reached")),e&&r.default.createElement("div",{className:"modal-body"},e),!e&&r.default.createElement("div",{className:"modal-body"},"Your daily search limit has been reached. You can still view data for the titles you previously searched.",r.default.createElement("a",{onClick:function(){return t.onClick("/analytics/"+s.AnalyticsPaths.ManageAnalyticsSubscription)}}," Subscribe again")," to enable new searches."),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{onClick:function(){return t.onClick("/analytics/"+s.AnalyticsPaths.ManageAnalyticsSubscription)},className:"btn btn-cancel","data-dismiss":"modal"},"Subscription Details"),r.default.createElement("button",{className:"btn btn-primary",onClick:this.onCancel},"View Dashboard")))))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(21)),i=n(a(388)),s=n(a(8)),u=n(a(3)),c=n(a(50));function n(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?h(a):n).forbidCloseByUser=!0,t.state={progressProperties:{stepCount:4,stepOne:{active:!0,complete:!1,title:"Uploading"},stepTwo:{active:!1,complete:!1,title:"Converting File"},stepThree:{active:!1,complete:!1,title:"Validating"},stepFour:{active:!1,complete:!1,title:"Complete"}}},t.getAttachmentStatusError=t.getAttachmentStatusError.bind(h(h(t))),t.updatePDFConversionStatus=t.updatePDFConversionStatus.bind(h(h(t))),t.getAttachmentStatusSuccess=t.getAttachmentStatusSuccess.bind(h(h(t))),t.updatePollingStatus=t.updatePollingStatus.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,l.default),t=o,(a=[{key:"componentWillMount",value:function(){s.default.addAttachmentReadyForPolling(this.updatePollingStatus),s.default.addPDFConversionCompleteListener(this.updatePDFConversionStatus),s.default.addPollingAttachmentError(this.getAttachmentStatusError),s.default.addPollingAttachmentSuccess(this.getAttachmentStatusSuccess),s.default.addUploadAttachmentError(this.getAttachmentStatusError)}},{key:"componentWillUnmount",value:function(){s.default.removeAttachmentReadyForPolling(this.updatePollingStatus),s.default.removePDFConversionCompleteListener(this.updatePDFConversionStatus),s.default.removePollingAttachmentError(this.getAttachmentStatusError),s.default.removePollingAttachmentSuccess(this.getAttachmentStatusSuccess),s.default.removeUploadAttachmentError(this.getAttachmentStatusError)}},{key:"getAttachmentStatusError",value:function(){var e=this;setTimeout(function(){return e.complete()},0)}},{key:"getAttachmentStatusSuccess",value:function(){var e=this,t=this.state.progressProperties;t.stepThree.complete=!0,t.stepFour.complete=!0,this.setState({progressProperties:t}),setTimeout(function(){return e.complete()},200),setTimeout(function(){c.default.onSelectSampleSelection()},500)}},{key:"updatePDFConversionStatus",value:function(){var e=this.state.progressProperties;e.stepOne.complete=!0,e.stepTwo.complete=!0,e.stepThree.active=!0,this.setState({progressProperties:e})}},{key:"updatePollingStatus",value:function(){var e=this.state.progressProperties;e.stepOne.complete=!0,e.stepTwo.active=!0,this.setState({progressProperties:e})}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade upload-progress-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Processing Your File")),r.default.createElement("div",{className:"modal-body"},r.default.createElement("p",null,"We're analyzing your file to confirm it is ready..."),r.default.createElement("p",{className:"upload-progress-file-name "},"Uploading: ",r.default.createElement("strong",null,this.props.fileName)),r.default.createElement("div",{className:"spinner-container"},r.default.createElement(u.default,{top:"80",backgroundColor:"transparent"})),r.default.createElement(i.default,{progressProperties:this.state.progressProperties})))))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(21)),i=o(a(6)),s=o(a(12)),u=n(a(9)),c=o(a(52)),d=o(a(80)),f=n(a(55)),p=n(a(11)),m=n(a(17)),h=n(a(26)),y=o(a(4));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,a){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P="Please provide security code for credit card.",w=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=E(o).call(this,e))||"object"!==b(n)&&"function"!=typeof n?k(a):n).state={card:c.default.cart().paymentGroups[0],valid:!1,worldpayFeatureFlagValue:m.hasFeatureFlag(p.WORLDPAY),eprotectid:null,url:""},t.onValidationChange=t.onValidationChange.bind(k(k(t))),t.onSubmit=t.onSubmit.bind(k(k(t))),t.worldpayCheckoutId=t.worldpayCheckoutId.bind(k(k(t))),t.onCartChanged=t.onCartChanged.bind(k(k(t))),t.onCartLoaded=t.onCartLoaded.bind(k(k(t))),t.onUpdateEprotect=t.onUpdateEprotect.bind(k(k(t))),t.getEprotect=t.getEprotect.bind(k(k(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,l.default),t=o,(a=[{key:"componentWillMount",value:function(){c.default.addCartChangedListener(this.onCartChanged),c.default.addCartChangedListener(this.onCartLoaded),c.default.addEprotectUpdatedListener(this.onUpdateEprotect),y.default.addGetEprotectListener(this.getEprotect)}},{key:"componentWillUnmount",value:function(){c.default.removeCartChangedListener(this.onCartChanged),c.default.removeCartChangedListener(this.onCartLoaded),c.default.removeEprotectUpdatedListener(this.onUpdateEprotect),y.default.removeGetEprotectListener(this.getEprotect)}},{key:"componentDidMount",value:function(){f.loadCart(),v(E(o.prototype),"componentDidMount",this).call(this),this.refs.form.validateWithoutCommitting(),f.updateEprotect(),h.getEnvPath()}},{key:"getEprotect",value:function(e){this.setState({url:e.users})}},{key:"onUpdateEprotect",value:function(){var e=c.default.getEprotect();this.setState({eprotectid:e})}},{key:"onCartLoaded",value:function(){var e=c.default.cart();this.setState({worldPayOrderId:e.worldPayOrderId,worldPayPaypageId:e.worldPayPaypageId,worldPayReportGroup:e.worldPayReportGroup})}},{key:"worldpayCheckoutId",value:function(t){var a="americanexpress"===this.state.card.creditCardType.toLowerCase()?4:3;function n(e){l(e)}function o(){alert("We are experiencing issue")}function r(e){return l(e),!1}function l(e){t.newValue.length==a&&(document.getElementById("response$checkoutId").value=e.checkoutId,document.getElementById("checkoutId").value=e.checkoutId,document.getElementById("response$vantivTxnId").value=e.vantivTxnId,document.getElementById("response$responseTime").value=e.responseTime)}t.newValue.length==a&&(document.getElementById("securityCodePassWorldpay").value=t.newValue),0<t.newValue.length&&(document.getElementById("eProtectId").value=this.state.eprotectid),t.newValue.length==a&&function(e){"object"!=b(new eProtect)&&alert("We are experiencing technical difficulties");var t={cvv2:document.getElementById("securityCodePassWorldpay"),paypageRegistrationId:document.getElementById("response$paypageRegistrationId"),bin:document.getElementById("response$bin")};l({response:"",message:""});var a={paypageId:document.getElementById("request$paypageId").value,reportGroup:document.getElementById("request$reportGroup").value,orderId:document.getElementById("request$orderId").value,id:document.getElementById("request$merchantTxnId").value,checkoutIdMode:!0,url:e};console.log("environment:","production"),console.log("url:",a.url),(new eProtect).sendToEprotect(a,t,n,r,o,15e3),document.getElementById("eProtectId").focus(),setTimeout(function(){document.getElementById("checkoutId").focus()},1e3),setTimeout(function(){document.getElementById("cvv2Num").focus()},1500)}(this.state.url)}},{key:"onCartChanged",value:function(){this.setState({card:c.default.cart().paymentGroups[0]})}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"onSubmit",value:function(){var e=this.refs.form.gather();this.complete(e)}},{key:"render",value:function(){var e=m.hasFeatureFlag(p.WORLDPAY),t=this.state.card,a="americanexpress"===t.creditCardType.toLowerCase()?4:3,n=this.props.message,o='<div><h2>Where is your Security Code?</h2><p>Your credit card\'s security code is a 3-or-4 digit Number located on its front or back.</p><img alt="CVV" class="img-responsive" src="img/find-security-code.png" /></div>';return r.default.createElement("div",{ref:"modal",className:"modal fade verify-credit-card-security-code-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal","data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Verify Credit Card Security Code")),r.default.createElement(i.default,{ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},e&&r.default.createElement("div",null,r.default.createElement("div",{className:"modal-body"},!!n.length&&n!==P&&r.default.createElement("div",{className:"alert-error"}," ",n),r.default.createElement("div",{className:"card-info clearfix"},r.default.createElement("div",{className:"float"},r.default.createElement("div",{className:"credit-card-image"},r.default.createElement("div",{className:"credit-card "+t.creditCardType.toLowerCase()}))),r.default.createElement("div",{className:"float"},r.default.createElement("span",null,r.default.createElement("strong",null,r.default.createElement("span",{className:"text-capitalize"},t.creditCardType))," ending ",t.creditCardNumber)),r.default.createElement("div",{className:"float"},r.default.createElement("span",null,"Â Â Â |Â Â Â ")),r.default.createElement("div",{className:"float"},r.default.createElement("span",null,"Exp. ",t.expirationMonth+"/"+t.expirationYear))),r.default.createElement("div",null,"For security purposes, please verify your credit card security code."),r.default.createElement("div",{className:"cvv-input-area"},r.default.createElement("input",{type:"text",id:"paypageRegistrationId",name:"paypageRegistrationId",readonly:"true",hidden:!0}),r.default.createElement("input",{type:"text",id:"bin",name:"bin",readonly:"true",hidden:!0}),r.default.createElement("input",{type:"hidden",id:"request$paypageId",name:"request$paypageId",value:this.state.worldPayPaypageId}),r.default.createElement("input",{type:"hidden",id:"request$merchantTxnId",name:"request$merchantTxnId",value:this.state.eprotectid}),r.default.createElement("input",{type:"hidden",id:"request$orderId",name:"request$orderId",value:this.state.worldPayOrderId}),r.default.createElement("input",{type:"hidden",id:"request$reportGroup",name:"request$reportGroup",value:this.state.worldPayReportGroup}),r.default.createElement(s.default,{name:"securityCode",id:"cvv2Num",label:"Security Code",onChange:this.worldpayCheckoutId,maxLength:a,rules:[u.required("Please enter a security code."),u.pattern(/^\d+$/,"Credit card security code must contain only digits."),u.minLength(a,"Credit card security code must be "+a+" digits."),u.maxLength(a,"Credit card security code must be "+a+" digits.")]}),r.default.createElement("input",{name:"securityCodePassWorldpay",type:"hidden",id:"securityCodePassWorldpay"}),r.default.createElement(d.default,{className:"cvv-tooltip-icon",info:!0,isHtml:!0,text:o})),r.default.createElement("div",{style:{position:"absolute",left:"-10000px"}},r.default.createElement(s.default,{name:"checkoutId",type:"text",id:"checkoutId",label:"Checkout Id",rules:[u.required("Please enter a security code."),u.pattern(/^\d+$/,"Credit card security code must contain only digits.")]}),r.default.createElement(s.default,{name:"eProtectId",type:"text",label:"eProtectId",id:"eProtectId",initValue:this.state.eprotectid,rules:[u.required("Please enter a security code.")]}))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-primary",disabled:!this.state.valid},"Confirm and Submit Order"),r.default.createElement("input",{type:"hidden",id:"response$paypageRegistrationId",name:"response$paypageRegistrationId",readOnly:"true",value:""}),r.default.createElement("input",{type:"hidden",id:"response$checkoutId",name:"response$checkoutId",readOnly:"true",value:""}),r.default.createElement("input",{type:"hidden",id:"response$vantivTxnId",name:"response$vantivTxnId",readOnly:"true"}),r.default.createElement("input",{type:"hidden",id:"response$responseTime",name:"response$responseTime",readOnly:"true"}))),!e&&r.default.createElement("div",null,r.default.createElement("div",{className:"modal-body"},!!n.length&&n!==P&&r.default.createElement("div",{className:"alert-error"}," ",n),r.default.createElement("div",{className:"card-info clearfix"},r.default.createElement("div",{className:"float"},r.default.createElement("div",{className:"credit-card-image"},r.default.createElement("div",{className:"credit-card "+t.creditCardType.toLowerCase()}))),r.default.createElement("div",{className:"float"},r.default.createElement("span",null,r.default.createElement("strong",null,r.default.createElement("span",{className:"text-capitalize"},t.creditCardType))," ending ",t.creditCardNumber)),r.default.createElement("div",{className:"float"},r.default.createElement("span",null,"Â Â Â |Â Â Â ")),r.default.createElement("div",{className:"float"},r.default.createElement("span",null,"Exp. ",t.expirationMonth+"/"+t.expirationYear))),r.default.createElement("div",null,"For security purposes, please verify your credit card security code."),r.default.createElement("div",{className:"cvv-input-area"},r.default.createElement(s.default,{name:"securityCode",label:"Security Code",type:"password",maxLength:a,rules:[u.required("Please enter a security code."),u.pattern(/^\d+$/,"Credit card security code must contain only digits."),u.minLength(a,"Credit card security code must be "+a+" digits."),u.maxLength(a,"Credit card security code must be "+a+" digits.")]}),r.default.createElement(d.default,{className:"cvv-tooltip-icon",info:!0,isHtml:!0,text:o}))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-primary",disabled:!this.state.valid},"Confirm and Submit Order")))))))}}])&&g(t.prototype,a),n&&g(t,n),o}();t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(21)),i=o(a(6)),s=o(a(12)),u=n(a(9)),c=(o(a(27)),o(a(52))),d=(o(a(80)),n(a(55))),f=(n(a(11)),n(a(17)),n(a(48))),p=o(a(45)),m=n(a(221));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,a){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=g(o).call(this,e))||"object"!==h(n)&&"function"!=typeof n?E(a):n).state={message:t.props.message,textTypeW9:t.props.textTypeW9,card:c.default.cart().paymentGroups[0],valid:!1,eprotectid:null,errorss:null},t.onValidationChange=t.onValidationChange.bind(E(E(t))),t.onSubmit=t.onSubmit.bind(E(E(t))),t.verifyTin=t.verifyTin.bind(E(E(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,l.default),t=o,(a=[{key:"componentWillMount",value:function(){p.default.addUSTaxpayerTypeChangedListener(this.onTaxpayerTypeChanged),p.default.addTinValidateListener(this.verifyTin)}},{key:"componentWillUnmount",value:function(){p.default.removeUSTaxpayerTypeChangedListener(this.onTaxpayerTypeChanged),p.default.removeTinValidateListener(this.verifyTin)}},{key:"componentDidMount",value:function(){d.loadCart(),b(g(o.prototype),"componentDidMount",this).call(this),this.refs.form.validateWithoutCommitting()}},{key:"verifyTin",value:function(e){var t=this;1==e.data.success?(this.setState({errorss:!1}),setTimeout(function(){t.onSubmit()},0)):this.setState({errorss:!0})}},{key:"onTaxpayerTypeChanged",value:function(){var e=p.default.taxpayerType,t=p.default.taxpayerIdType;this.refs.taxpayerType.setValue(e),this.refs.taxpayerIdType&&this.refs.taxpayerIdType.setValue(t),this.setState(this.buildTaxpayerTypeState()),"SoleProprietor"!=e&&(document.getElementById("w9NewFields").classList.remove("hide-w9-new-form-fields"),"Other"==e?(this.setState({otherContainer:!0}),document.getElementById("otherTaxContainer").append(document.getElementById("w9NewFields"))):(this.setState({companyContainer:!0}),document.getElementById("companyTaxContainer").append(document.getElementById("w9NewFields")))),"SoleProprietor"==e&&document.getElementById("w9NewFields").classList.add("hide-w9-new-form-fields")}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid(),errorss:null})}},{key:"onSubmit",value:function(){if(null===this.state.errorss){this.refs.form.gather();if(this.refs.form.gather().data){this.refs.form.gather().data;f.tinVerify(this.refs.form.gather(),this.state.textTypeW9)}}else this.state.errorss||this.complete(this.refs.form.gather().data)}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade verify-credit-card-security-code-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog additional-tin"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal","data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Verify TIN")),r.default.createElement(i.default,{ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},r.default.createElement("div",null,r.default.createElement("div",{className:"modal-body"},this.state.errorss&&r.default.createElement("div",{className:"alert-error"}," ",this.state.message),r.default.createElement("div",null,"Please input your Taxpayer Identification Number (TIN) to confirm your identity"),r.default.createElement("div",null,"SSN"==this.state.textTypeW9&&r.default.createElement(s.default,{name:"data",label:"Social Security Number (SSN)",maxLength:11,rules:[u.required("Please enter a SSN."),m.ssn(p.default.originalSSN)]}),"EIN"==this.state.textTypeW9&&r.default.createElement(s.default,{name:"data",label:"Employer Identification Number (EIN)",maxLength:10,rules:[u.required("Please enter an EIN."),m.ein(p.default.originalEIN)]}))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"tin-verify-button-position pull-left btn btn-primary",disabled:!this.state.valid},"Verify TIN & Review Form W-9"),r.default.createElement("button",{className:"tin-cancel-button-position pull-right btn btn-cancel","data-dismiss":"modal"},"Cancel. I'll update my vendor account later")))))))}}])&&y(t.prototype,a),n&&y(t,n),o}();t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=(o(a(43)),o(a(21))),i=n(a(86)),s=o(a(8)),u=n(a(32));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,a){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,t=!(n=p(o).call(this,e))||"object"!==c(n)&&"function"!=typeof n?h(a):n,e.noAbort&&(t.forbidCloseByUser=!0),t.state={errorCode:null,errorMessage:null},t.onCancel=t.onCancel.bind(h(h(t))),t.onSubmit=t.onSubmit.bind(h(h(t))),t.onSetSaleStatusError=t.onSetSaleStatusError.bind(h(h(t))),t.makeClick=t.makeClick.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,l.default),t=o,(a=[{key:"componentWillMount",value:function(){s.default.addSetSaleStatusErrorListener(this.onSetSaleStatusError)}},{key:"componentDidMount",value:function(){f(p(o.prototype),"componentDidMount",this).call(this);i.setSaleStatus(this.props.projectId,!1,!1),setTimeout(function(){var e='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',t=document.querySelector(".modal-container"),a=t.querySelectorAll(e)[0],n=t.querySelectorAll(e),o=n[n.length-1];document.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===a&&(o.focus(),e.preventDefault()):document.activeElement===o&&(a.focus(),e.preventDefault()))}),a.focus()},1e3)}},{key:"componentWillUnmount",value:function(){s.default.removeSetSaleStatusErrorListener(this.onSetSaleStatusError)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onCancel",value:function(){u.enableProgressButtons(),this.finish()}},{key:"onSubmit",value:function(){var e=this;i.setSaleStatus(this.props.projectId,!1,!0),setTimeout(function(){return e.complete()},0)}},{key:"onSetSaleStatusError",value:function(e){if(e){var t=e.response[0].description,a=e.response[0].code;t=(t=t.substring(t.indexOf("|")+1,t.lastIndexOf("|"))).replace(/&nbsp;/g," "),this.setState({errorMessage:t,errorCode:a})}}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade confirmation-modal"+(this.props.extraClass?" "+this.props.extraClass:""),role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog",style:this.props.dialogStyles||{}},r.default.createElement("div",{className:"modal-content"},!this.props.noAbort&&r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal",tabIndex:"0",onKeyDown:this.makeClick,"data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,this.props.title||"Confirm")),!!this.props.question&&r.default.createElement("div",{className:"modal-body",dangerouslySetInnerHTML:{__html:"<p>"+this.props.question+"</p>"}}),!!this.props.content&&r.default.createElement("div",{className:"modal-body"},this.props.content),!!this.state.errorMessage&&r.default.createElement("div",{className:"modal-body"},this.state.errorMessage),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-cancel",onClick:this.onCancel},this.props.cancelButtonText||"Cancel"),r.default.createElement("button",{className:"btn btn-primary",onClick:this.onSubmit},this.props.confirmButtonText||"Yes")),!!this.props.footnote&&r.default.createElement("div",{className:"footnote",dangerouslySetInnerHTML:{__html:"<p>"+this.props.footnote+"</p>"}}))))}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=(n(a(26)),o(a(4)),o(a(21)));o(a(47)),o(a(6)),o(a(12)),n(a(9)),o(a(27));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,l.default),a=t,(n=[{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade change-business-status-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal","data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Two-Step Verification")),r.default.createElement("div",{className:"modal-body"},r.default.createElement("div",{className:"diff-division1"},"You've reached the maximum number of code re-send attempts. Please try again later or contact customer service at 1-800-843-2665. For a list of reasons you may not have received your code,",r.default.createElement("a",{target:"_blank",href:"https://help.barnesandnoble.com/app/answers/detail/a_id/4421"}," See FAQ"),".")),r.default.createElement("div",{className:"modal-footer twofa-modal"},r.default.createElement("button",{className:"btn btn-primary margintop","data-dismiss":"modal"},"Close")))))}}])&&s(a.prototype,n),o&&s(a,o),t}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(a(0)),f=n(a(26)),p=n(a(48)),m=n(a(55)),h=o(a(4)),r=o(a(45)),l=o(a(52)),i=o(a(21)),u=o(a(47)),c=o(a(6)),d=o(a(12)),y=n(a(9)),b=(o(a(27)),n(a(10))),g=o(a(1));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,a){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var O=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=k(o).call(this,e))||"object"!==v(n)&&"function"!=typeof n?w(a):n).state={valid:!1,message:null,requestPayload:e.phoneno&&e.phoneno.cellPhoneNumber?e.phoneno.cellPhoneNumber:e.phoneno,type:e.type&&e.type.updateType?e.type.updateType:e.type,payloadData:e.type,success:!1,errorCode:null,isLoading:!1,showPhone:!1,orderSuccess:!1,enableMediumSelection:!0,errorCodeServiceDown:e.errorCode,otpSentType:1084==e.errorCode?"":1082==e.errorCode?"CELL_PHONE_TEXT":"EMAIL",emailServiceDown:1082==e.errorCode||1084==e.errorCode,smsServiceDown:1083==e.errorCode||1084==e.errorCode,buttonClicked:!1},t.onSubmit=t.onSubmit.bind(w(w(t))),t.onValidationChange=t.onValidationChange.bind(w(w(t))),t.onVerifyotpLoaded=t.onVerifyotpLoaded.bind(w(w(t))),t.onProfileUpdateBegun=t.onProfileUpdateBegun.bind(w(w(t))),t.onProfileUpdated=t.onProfileUpdated.bind(w(w(t))),t.onProfileUpdatedError=t.onProfileUpdatedError.bind(w(w(t))),t.resendCode=t.resendCode.bind(w(w(t))),t.onResendCodeLoaded=t.onResendCodeLoaded.bind(w(w(t))),t.mobileNumberChange=t.mobileNumberChange.bind(w(w(t))),t.generateCode=t.generateCode.bind(w(w(t))),t.onGenerateCodeLoaded=t.onGenerateCodeLoaded.bind(w(w(t))),t.onPaymentInfoLoaded=t.onPaymentInfoLoaded.bind(w(w(t))),t.onPaymentErrorsReceived=t.onPaymentErrorsReceived.bind(w(w(t))),t.onShippingMethodChanged=t.onShippingMethodChanged.bind(w(w(t))),t.onOrderSubmitted=t.onOrderSubmitted.bind(w(w(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(o,i.default),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){S(k(o.prototype),"componentDidMount",this).call(this),this.refs.form.validateWithoutCommitting();var e=h.default.getProfile().clone();this.setState({showPhoneWhenEmailDown:!e.cellPhoneNumber&&this.state.emailServiceDown}),e.cellPhoneNumber||this.state.emailServiceDown||f.generateCode("EMAIL")}},{key:"componentWillMount",value:function(){h.default.addVerifyOtpLoadedListener(this.onVerifyotpLoaded),h.default.addProfileUpdateBegunListener(this.onProfileUpdateBegun),h.default.addProfileUpdatedListener(this.onProfileUpdated),h.default.addProfileUpdatedErrorListener(this.onProfileUpdatedError),h.default.addResendCodeLoadedListener(this.onResendCodeLoaded),h.default.addGenerateCodeLoadedListener(this.onGenerateCodeLoaded),r.default.addPaymentInfoLoadedListener(this.onPaymentInfoLoaded),r.default.addPaymentErrorsReceivedListener(this.onPaymentErrorsReceived),l.default.addCheckoutStateChangedListener(this.onShippingMethodChanged),l.default.addOrderSubmittedListener(this.onOrderSubmitted)}},{key:"componentWillUnmount",value:function(){h.default.removeVerifyOtpLoadedListener(this.onVerifyotpLoaded),h.default.removeProfileUpdateBegunListener(this.onProfileUpdateBegun),h.default.removeProfileUpdatedListener(this.onProfileUpdated),h.default.removeProfileUpdatedErrorListener(this.onProfileUpdatedError),h.default.removeResendCodeLoadedListener(this.onResendCodeLoaded),h.default.removeGenerateCodeLoadedListener(this.onGenerateCodeLoaded),r.default.removePaymentInfoLoadedListener(this.onPaymentInfoLoaded),r.default.removePaymentErrorsReceivedListener(this.onPaymentErrorsReceived),l.default.removeCheckoutStateChangedListener(this.onShippingMethodChanged),l.default.removeOrderSubmittedListener(this.onOrderSubmitted)}},{key:"onShippingMethodChanged",value:function(){var e=this;l.default.checkoutState().isShippingDisplay,this.setState({updating:!1,success:!0},function(){setTimeout(function(){e.complete()},3e3)})}},{key:"onPaymentInfoLoaded",value:function(){var e=this;this.setState({updating:!1,success:!0},function(){setTimeout(function(){e.complete()},3e3)})}},{key:"onOrderSubmitted",value:function(e){var t=this;e.summary.orderNumber,e.summary.totals.find(function(e){return"orderTotal"===e.name}).value;this.setState({updating:!1,success:!0,orderSuccess:!0},function(){setTimeout(function(){t.complete()},3e3)})}},{key:"onProfileUpdateBegun",value:function(){this.setState({updating:!0,errorMessages:[]})}},{key:"onProfileUpdated",value:function(){var e=this,t=this.state.updating;document.getElementById("otpInput").parentElement.parentElement.querySelector(".message").innerHTML="",this.setState({updating:!1,success:!this.state.payloadData||!this.state.payloadData.accountType,profile:h.default.getProfile()},function(){t&&setTimeout(function(){e.complete()},3e3)})}},{key:"onProfileUpdatedError",value:function(){var e=this,t=h.default.getProfileErrors()[0];h.default.getProfile().clone();if(1077==t)setTimeout(function(){e.complete(),setTimeout(function(){},1e3)},0);else{var a=s.default.createElement("span",{dangerouslySetInnerHTML:{__html:h.default.getProfileErrors()[0]}});setTimeout(function(){e.complete()},0),this.setState({updating:!1,errorMessages:[a]},function(){window.scrollTo(0,0)})}}},{key:"onPaymentErrorsReceived",value:function(e,t){var a=this;if(1077==t.errors[0].code)setTimeout(function(){a.complete(),setTimeout(function(){},1e3)},0);else{var n=s.default.createElement("span",{dangerouslySetInnerHTML:{__html:e[0].description}});setTimeout(function(){a.complete()},0),this.setState({updating:!1,errorMessages1:[n]},function(){window.scrollTo(0,0)})}}},{key:"onVerifyotpLoaded",value:function(e){var t=this,a=h.default.getProfile().clone(),n=this.state.payloadData,o="tax and bank Information"==this.state.type,r="Shipping Address"==this.state.type,l="Payment Information"==this.state.type,i="order"==this.state.type;if(e&&e.data.success){if(a=this.props.phoneno,this.state.showPhone){var s=this.refs.otpCellPhoneNumber.value();a.cellPhoneNumber=s}setTimeout(function(){o?p.updatePaymentInfo(n,!1):r?m.updateShippingAddress(n):l?m.updatePaymentMethod(n,!1):i?m.submitOrder(n.securityCode,n.eProtectId,n.recaptchaToken):f.updateProfile(a,1)},0)}else{var u=e.data.code?e.data.code:0;if(this.setState({buttonClicked:!1}),1090==u)document.getElementById("otpInput").parentElement.parentElement.querySelector(".message").innerHTML="Incorrect code. Please try again";else if(1091==u||1092==u){var c=!1,d=!1;1092==u?c=!0:!a.cellPhoneNumber&&this.state.emailServiceDown&&(d=!0),this.refs.otp.reset(),this.setState({errorCode:u,enableMediumSelection:c,showPhoneWhenEmailDown:d}),document.getElementById("otpInput").parentElement.parentElement.querySelector(".message").innerHTML=""}else 1087!=u&&1085!=u||setTimeout(function(){t.complete(),setTimeout(function(){b.showTwofaMaxAttemptErrorModal()},1e3)},0)}}},{key:"onResendCodeLoaded",value:function(e){var t=this;e&&e.data.success?(this.setState({errorCode:"resendCode"}),this.refs.otp.reset(),document.getElementById("otpInput").parentElement.parentElement.querySelector(".message").innerHTML=""):1085==(e.data.code?e.data.code:0)&&setTimeout(function(){t.complete(),setTimeout(function(){b.showTwofaMaxAttemptErrorModal()},1e3)},0);this.setState({isLoading:!1})}},{key:"resendCode",value:function(){var e=h.default.getProfile().clone();if(e.cellPhoneNumber)this.setState({enableMediumSelection:!0,errorCode:"resendCode"});else if(!e.cellPhoneNumber&&this.state.emailServiceDown)this.setState({showPhoneWhenEmailDown:!0,errorCode:"resendCode"});else{this.setState({isLoading:!0}),f.resendCode("EMAIL")}}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"onSubmit",value:function(){this.setState({buttonClicked:!0});var e=this.refs.form.gather(),t=""==this.state.otpSentType?"EMAIL":this.state.otpSentType;f.verifyOtp(e.otp,t)}},{key:"generateCode",value:function(){var e=this.state.otpSentType,t=0;this.refs.otpCellPhoneNumber&&(t=this.refs.otpCellPhoneNumber.value()),this.setState({isLoading:!0}),f.generateCode(e,t)}},{key:"onGenerateCodeLoaded",value:function(e){var t=this;e&&e.data.success?this.setState({enableMediumSelection:!1,isLoading:!1,showPhoneWhenEmailDown:!1}):1085==(e.data.code?e.data.code:0)&&setTimeout(function(){t.complete(),setTimeout(function(){b.showTwofaMaxAttemptErrorModal()},1e3)},0);this.setState({isLoading:!1})}},{key:"mobileNumberChange",value:function(e,t){var a=this,n=e.newValue;"otpCellPhoneNumber"==t&&this.refs.otpCellPhoneNumber.setValue(y.formatUSNumber(n)),setTimeout(function(){a.refs.form.validateWithoutCommitting()},0)}},{key:"render",value:function(){var t=this,e=h.default.getProfile().clone(),a="1091"==this.state.errorCode||"resendCode"==this.state.errorCode?"Send a New Code":"Didn't receive a one-time code?",n=!e.cellPhoneNumber&&"phone"!=this.state.type&&!this.state.emailServiceDown,o=e.cellPhoneNumber,r=this.state.showPhoneWhenEmailDown,l=this.state.enableMediumSelection&&o||r,i="";return i="email"==this.state.type?"email":"name"==this.state.type?"name":"phone"==this.state.type?"mobile phone number":"tax and bank Information"==this.state.type?"taxpayer/banking information":"Shipping Address"==this.state.type?"shipping information":"Payment Information"==this.state.type?"payment information":"order"==this.state.type?"order":this.state.type,s.default.createElement("div",{ref:"modal",className:"modal fade two-fa-otp-modal ",role:"dialog","aria-hidden":"true"},s.default.createElement("div",{className:"modal-dialog"},s.default.createElement("div",{className:"modal-content"},s.default.createElement("div",{className:"modal-close-icon"},s.default.createElement("span",{className:"icon-close-modal","data-dismiss":"modal"})),s.default.createElement("div",{className:"modal-header "+(1091==this.state.errorCode?"rmMrg":"")},s.default.createElement("h3",null,"Two-Step Verification")),l&&s.default.createElement(c.default,{name:"form",ref:"form",onSubmit:this.generateCode,onValidationChange:this.onValidationChange},s.default.createElement("div",{className:"modal-body"},("phone"==this.state.type||"email"==this.state.type)&&s.default.createElement("div",{className:"mar-contrbtr warning-dialogue"},s.default.createElement("aside",{className:"alert-error-white panel",role:"alert"},s.default.createElement("span",{className:"alert-content"},s.default.createElement("ul",{className:"left-sidebar-wrapper list-unstyled padding-top-10"},s.default.createElement("li",null,s.default.createElement("span",null,"Note: For your security, this action will result in the removal of the payment information saved to your account. You can re-add these in account settings or during checkout")))))),1092==this.state.errorCode&&s.default.createElement("div",{className:"base-control"},s.default.createElement("p",{className:"diff-division message"},s.default.createElement("strong",{className:"diff-division message"},"Youâ€™ve reached the maximum number of attempts for this code. Please select a method to receive a new one-time code and try again."))),1092!=this.state.errorCode&&"resendCode"!=this.state.errorCode&&s.default.createElement("p",{className:"diff-division"},"For your account security, we will send you a ",s.default.createElement("strong",null,"one-time code")," to complete this action. How would you like to receive your ",s.default.createElement("strong",null,"one-time code"),"? "),"resendCode"==this.state.errorCode&&s.default.createElement("div",null,s.default.createElement("p",{className:"diff-division1"},"Please select a method to receive your new ",s.default.createElement("strong",null,"one-time code")," ."),s.default.createElement("p",{className:"diff-division"},"(",s.default.createElement("a",{target:"_blank",href:"https://help.barnesandnoble.com/app/answers/detail/a_id/4421"}," See FAQ")," for a list of reasons you may not have received your last code.)")),s.default.createElement("div",{className:"col-xs-12 diff-division align-radio"},s.default.createElement("div",{className:"col-xs-1 align-radio "+(this.state.emailServiceDown?"disabled":"")},s.default.createElement("input",{disabled:this.state.emailServiceDown,value:"EMAIL",checked:!this.state.emailServiceDown&&"EMAIL"==this.state.otpSentType,onChange:function(e){return t.setState({otpSentType:e.target.value})},type:"radio",className:"form-check-input with-gap",id:"radioGap1",name:"otpSentType"})),s.default.createElement("div",{className:"col-xs-1 align-radio "+(this.state.emailServiceDown?"disabled":"")}," ",s.default.createElement("span",{className:"fa fa-desktop"}," ")),s.default.createElement("div",{className:"col-xs-10 align-radio"},s.default.createElement("label",{className:"form-check-label "+(this.state.emailServiceDown?"disabled":""),for:"radioGap1"}," Send it to my email address",s.default.createElement("strong",null," ",e.email)),this.state.emailServiceDown&&s.default.createElement("label",{className:"form-check-label service-unavailabel"}," Temporarily Unavailable"))),s.default.createElement("div",{className:"col-xs-12 diff-division align-radio"},s.default.createElement("div",{className:"col-xs-1 align-radio "+(this.state.smsServiceDown?"disabled":"")},s.default.createElement("input",{disabled:this.state.smsServiceDown,value:"CELL_PHONE_TEXT",checked:"CELL_PHONE_TEXT"==this.state.otpSentType,onChange:function(e){return t.setState({otpSentType:e.target.value})},type:"radio",className:"form-check-input with-gap",id:"radioGap2",name:"otpSentType"})),s.default.createElement("div",{className:"col-xs-1 align-radio "+(this.state.smsServiceDown?"disabled":"")},s.default.createElement("span",{className:"fa fa-mobile fa-2x"})),s.default.createElement("div",{className:"col-xs-10 align-radio "},r?s.default.createElement("div",null,s.default.createElement("div",{className:"diff-division1  mobilecode"},s.default.createElement("label",{className:"form-check-label",for:"radioGap2"},"Text me my code"),s.default.createElement("div",{className:"col-xs-12  align-radio algin-uscode-left"},s.default.createElement(d.default,{name:"otpCellPhoneNumber",ref:"otpCellPhoneNumber",label:"Mobile Phone Number",maxLength:12,onChange:function(e){return t.mobileNumberChange(e,"otpCellPhoneNumber")},rules:[y.required("Please enter a mobile phone number"),y.pattern(/^((1|\+1)?(\s|-|.)?)?((\(|\s\()?[2-9]{1}\d{2}|[2-9]{1}\d{2}(\)|\)\s)?)(\s|-|.)?(\d{3}(\s|-|.)?\d{4})/,"Please enter a valid mobile phone number.")]}),s.default.createElement("span",{className:"uscode"},s.default.createElement("img",{src:"img/usa-flag-icon.png",height:"15px",alt:"usa flag image"}),"+1"),s.default.createElement(u.default,{name:"agreeToConfirmText",label:"I give B&N permission to text me via SMS.",rules:[y.required("Please enter a mobile phone number")],onChange:function(e){return t.setState({agreeToConfirmText:e.newValue})}})))):s.default.createElement("div",null,s.default.createElement("label",{className:"form-check-label "+(this.state.smsServiceDown?"disabled":""),for:"radioGap2"},"Text my phone number",s.default.createElement("strong",null," +1 ",e.cellPhoneNumber)),this.state.smsServiceDown&&s.default.createElement("label",{className:"form-check-label service-unavailabel"}," Temporarily Unavailable"))),s.default.createElement("div",{className:"col-xs-10 pull-right align-radio"},"CELL_PHONE_TEXT"==this.state.otpSentType&&s.default.createElement("p",{className:"diff-division1"},'You will receive a text to this mobile phone number once you hit "Continue". Reply HELP for help. Message and data rates may apply. View our  ',s.default.createElement("a",{target:"_blank",className:"underline-link",href:"https://bn.clarip.com/privacycenter/?brand=barnesandnoble"}," Privacy Policy page")," for more details. Carriers are not liable for delayed or undelivered messages.")))),s.default.createElement("div",{className:"modal-footer twofa-modal"},s.default.createElement("button",{className:"btn btn-primary",disabled:r&&!this.state.valid||!this.state.otpSentType||this.state.isLoading},"Continue"))),!l&&s.default.createElement(c.default,{name:"form",ref:"form",onSubmit:this.onSubmit,onValidationChange:this.onValidationChange},s.default.createElement("div",{className:"modal-body"},("phone"==this.state.type||"email"==this.state.type)&&s.default.createElement("div",{className:"mar-contrbtr warning-dialogue"},s.default.createElement("aside",{className:"alert-error-white panel",role:"alert"},s.default.createElement("span",{className:"alert-content"},s.default.createElement("ul",{className:"left-sidebar-wrapper list-unstyled padding-top-10"},s.default.createElement("li",null,s.default.createElement("span",null,"Note: For your security, this action will result in the removal of the payment information saved to your account. You can re-add these in account settings or during checkout")))))),!this.state.errorCode&&s.default.createElement("div",null,!o&&!this.state.emailServiceDown&&s.default.createElement("p",{className:"diff-division"},"For your account security, we have sent a ",s.default.createElement("strong",null,"one-time code")," to your email address ",s.default.createElement("strong",null," ",e.email)),s.default.createElement("div",{className:"diff-division1"},"Please enter the ",s.default.createElement("strong",null,"one-time code")," below to complete this action:")),1091==this.state.errorCode&&s.default.createElement("div",{className:"base-control"},s.default.createElement("p",{cltassName:"diff-division1 message"},s.default.createElement("strong",{className:"diff-division message margin-bottom15"},"You've reached the maximum number of attempts for this code. We have sent a new code to your email. Please try again.")),s.default.createElement("p",{className:"diff-division3"}," ",s.default.createElement("span",{className:"icon-check"})," ",s.default.createElement("strong",null,"A new  one-time code")," has been sent to your email. Please enter it below.")),("resendCode"==this.state.errorCode||1092==this.state.errorCode)&&s.default.createElement("div",{className:"base-control"},s.default.createElement("p",{className:"diff-division1"}," ",s.default.createElement("span",{className:"icon-check"})," ",s.default.createElement("strong",null,"A new  one-time code")," has been sent to your ","EMAIL"==this.state.otpSentType?" email":" phone",". Please enter it below.")),s.default.createElement("div",{className:"diff-division1"},s.default.createElement("div",{className:"col-xs-8"},s.default.createElement(d.default,{name:"otp",id:"otpInput",ref:"otp",label:"6 Digit Code",maxLength:6,initValue:"",pattern:/^\d*$/,rules:[y.required("Please enter the one-time code.")]}))),s.default.createElement("div",null,s.default.createElement("a",{disabled:this.state.isLoading,onClick:this.state.isLoading?"":this.resendCode,className:(0,g.default)({"disalbled-link":this.state.buttonClicked})},a)),n&&s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-xs-12"},s.default.createElement(u.default,{name:"showPhone",label:"Iâ€™d like to receive future one-time codes by text.",onChange:function(e){return t.setState({showPhone:e.newValue})}})),this.state.showPhone&&s.default.createElement("div",{className:"diff-division1  mobilecode"}," ",s.default.createElement("div",{className:"col-xs-8  mrgTop"},s.default.createElement(d.default,{name:"otpCellPhoneNumber",ref:"otpCellPhoneNumber",label:"Mobile Phone Number",maxLength:12,onChange:function(e){return t.mobileNumberChange(e,"otpCellPhoneNumber")},rules:[y.required("Please enter a mobile phone number"),y.pattern(/^((1|\+1)?(\s|-|.)?)?((\(|\s\()?[2-9]{1}\d{2}|[2-9]{1}\d{2}(\)|\)\s)?)(\s|-|.)?(\d{3}(\s|-|.)?\d{4})/,"Please enter a valid mobile phone number.")]}),s.default.createElement("span",{className:"uscode"},s.default.createElement("img",{src:"img/usa-flag-icon.png",height:"15px",alt:"usa flag image"}),"+1")))),("1091"==this.state.errorCode||"resendCode"==this.state.errorCode)&&s.default.createElement("p",{className:"diff-division"},"(For a list of reasons why you may not have received your code, ",s.default.createElement("a",{target:"_blank",href:"https://help.barnesandnoble.com/app/answers/detail/a_id/4421"}," See FAQ"),").")),s.default.createElement("div",{className:"modal-footer twofa-modal"},!this.state.success&&s.default.createElement("button",{className:"btn btn-primary",disabled:!this.state.valid||this.state.updating||this.state.isLoading||this.state.buttonClicked},"order"==this.state.type?"Verify & Submit Order":"Verify"),this.state.errorMessages1&&s.default.createElement("div",{className:"mrgTop"},s.default.createElement("p",{className:"diff-division1"},this.state.errorMessages1)),this.state.success&&s.default.createElement("div",{className:"mrgTop"},s.default.createElement("p",{className:"diff-division1"},s.default.createElement("span",{className:"fa fa-check-circle"})," Verification Successful! "),s.default.createElement("p",{className:"diff-division1"},"Your ",i," has now been ",this.state.orderSuccess?"placed":"updated",".")))))))}}])&&E(t.prototype,a),n&&E(t,n),o}();t.default=O},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LANDING_PAGE_INFO=void 0;t.LANDING_PAGE_INFO={AUTHOR_TOOLS_TIPS:{pageName:"bn press|author-tools-and-tips",pageType:"bn press:author tools and tips"},PARTNER_SERVICES:{pageName:"bn press|self-publishing services",pageType:"bn press:self-publishing services"},ADVERTISING:{pageName:"bn press|advertising",pageType:"bn press:advertising"}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=n(a(249)),s=n(a(22)),u=o(a(52)),c=n(a(83)),d=n(a(10));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={orderNumber:null,orderTotal:null,customerId:null},t.popupCall=t.popupCall.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.props.location;t&&t.query&&t.query.orderNumber&&t.query.orderTotal||l.browserHistory.replace("/"+c.Base);var a=u.default.getPromoMessage();this.setState({orderNumber:t.query.orderNumber,orderTotal:t.query.orderTotal,messageHeader:a.messageHeader,messageBody:a.messageBody,messageLink:a.messageLink,messageLinkText:a.messageLinkText},function(){setTimeout(function(){null!=a.messageBody&&e.popupCall()},1e3)})}},{key:"componentWillMount",value:function(){window.document.getElementById("app").classList.add("hide-cancel")}},{key:"componentWillUnmount",value:function(){window.document.getElementById("app").classList.remove("hide-cancel")}},{key:"popupCall",value:function(){d.showConfirmationModal(this.state.messageHeader,this.state.messageBody+" <br/><a href="+this.state.messageLink+' target="_blank"> '+this.state.messageLinkText+"<a/>","OK")}},{key:"render",value:function(){return this.state.orderNumber?r.default.createElement("div",null,r.default.createElement("div",{className:"cart-checkout-wrapper"},r.default.createElement("div",{className:"cart-checkout-container"},r.default.createElement("header",{className:"sidelines"},r.default.createElement("h1",null,"Order Confirmation")),r.default.createElement("h2",null,"Thanks for shopping with us! Your order has been confirmed!"),r.default.createElement("div",{className:"order-confirmation"},r.default.createElement("div",null,r.default.createElement("span",null,r.default.createElement("p",null,"Your Order Number:"),r.default.createElement("h3",null,this.state.orderNumber))),r.default.createElement("div",null,r.default.createElement("span",null,r.default.createElement("p",null,"Order Total:"),r.default.createElement("h3",null,s.formatPrice(parseFloat(this.state.orderTotal))))),r.default.createElement("p",null,"An email confirming the details of your order will be sent to you soon."),r.default.createElement("p",{className:"order-history-link"},"Visit the ",r.default.createElement(l.Link,{to:"/"+i.Base},"My Orders")," page to review order details."),r.default.createElement("span",{className:"container-message-icon"},r.default.createElement("span",{className:"container-icon-clock"},r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-alarm",viewBox:"0 0 16 16"},r.default.createElement("path",{d:"M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9z"}),r.default.createElement("path",{d:"M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1zm1.038 3.018a6 6 0 0 1 .924 0 6 6 0 1 1-.924 0M0 3.5c0 .753.333 1.429.86 1.887A8.04 8.04 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5M13.5 1c-.753 0-1.429.333-1.887.86a8.04 8.04 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1"})))," ",r.default.createElement("p",{className:"order-history-link"},"If you placed this order by mistake, you can cancel it and place a new one within a short time after purchase by visiting theÂ ",r.default.createElement(l.Link,{to:"/"+i.Base},"My Orders"),"Â page.")))))):r.default.createElement("div",null)}}])&&p(t.prototype,a),n&&p(t,n),o}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(13)),i=(a(2),o(a(34))),s=o(a(147)),u=o(a(121)),c=o(a(72)),d=o(a(248)),f=n(a(25)),p=o(a(1605)),m=n(a(642)),h=n(a(525)),y=n(a(249)),b=o(a(643)),g=o(a(3)),v=n(a(31));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var O=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=k(o).call(this,e))||"object"!==E(n)&&"function"!=typeof n?w(a):n).state={orderGroups:[],orderGroupsLoaded:!1,page:null,sortOption:null,totalPages:null,error:""},t.paginationSupport=new d.default(h.SORT_PARAMS.default,"/"+y.Base),t.onOrderHistoryChanged=t.onOrderHistoryChanged.bind(w(w(t))),t.onPageChange=t.onPageChange.bind(w(w(t))),t.onSortChange=t.onSortChange.bind(w(w(t))),t.renderCancelDetails=t.renderCancelDetails.bind(w(w(t))),t.renderOrderDetailsError=t.renderOrderDetailsError.bind(w(w(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.loadOrderHistory(this.props.location.query.page,this.props.location.query.sort);var e={eventInfo:{eventName:"Page View",eventAction:"pageView",timeStamp:new Date},category:{primaryCategory:"Pages"},attributes:{page:{pageInfo:{previousPageName:null,pageName:"bn press|orderhistory",pageType:"bn press:order history",destinationURL:window.location.href,referringURL:null}}}};f.omnitureActionInvoked(e,"onPageView")}},{key:"componentWillMount",value:function(){b.default.addOrdersLoadedListener(this.onOrderHistoryChanged),b.default.addCancelOrderDetailsLoadedListener(this.renderCancelDetails),b.default.addOrderDetailsErrorLoadedListener(this.renderOrderDetailsError)}},{key:"componentWillReceiveProps",value:function(e){this.loadOrderHistory(e.location.query.page,e.location.query.sort)}},{key:"componentWillUnmount",value:function(){b.default.removeOrdersLoadedListener(this.onOrderHistoryChanged),b.default.removeCancelOrderDetailsLoadedListener(this.renderCancelDetails),b.default.removeOrderDetailsErrorLoadedListener(this.renderOrderDetailsError),f.pageNameChanged("bn press|orderhistory")}},{key:"renderCancelDetails",value:function(){m.loadOrderHistory(null,null,1,5,"oldest"),this.setState({error:""}),setTimeout(function(){v.toggleToast(!0,"This order has been canceled.",5e3)},1e3)}},{key:"renderOrderDetailsError",value:function(e){if((0,l.default)(window).scrollTop(0),"31006"==e[0].code){var t=e[0].description.split("->")[1]?e[0].description.split("->")[1]:"We are sorry, your order is no longer eligible for cancellation.";this.setState({error:t})}}},{key:"onPageChange",value:function(e){this.paginationSupport.onPageChange(e,this.state.page,this.state.sortOption)}},{key:"onSortChange",value:function(e){this.paginationSupport.onSortChange(e,this.state.sortOption)}},{key:"loadOrderHistory",value:function(e,t){var a=this.paginationSupport.setPaginationOptions(e,t);this.setState({page:a.page,sortOption:a.sortOption,totalPages:null,orderGroups:[],error:"",orderGroupsLoaded:!1}),m.loadOrderHistory(null,null,a.page,5,a.sortOption)}},{key:"onOrderHistoryChanged",value:function(){var e=Math.ceil(b.default.totalCount/5);this.paginationSupport.updateLocation(e,this.state.page,this.state.sortOption),this.setState({totalPages:e,orderGroups:b.default.orderGroups,orderGroupsLoaded:!0},function(){window.scrollTo(0,0)})}},{key:"render",value:function(){var e=null;return this.state.orderGroups&&0<this.state.orderGroups.length&&(e=this.state.orderGroups.map(function(e){var t=r.default.createElement(p.default,{order:e,key:e.orderNumber,id:e.orderNumber,initExpanded:!0});return!1,t})),r.default.createElement("div",{className:"left-sidebar-wrapper"},r.default.createElement("div",{className:"left-sidebar-container order-history"},0<this.state.error.length&&r.default.createElement(i.default,{messages:[this.state.error],type:"error"}),r.default.createElement("header",{className:"sidelines"},r.default.createElement("h1",null,"My Orders")),this.state.orderGroupsLoaded&&0<this.state.orderGroups.length&&r.default.createElement("div",null,r.default.createElement("div",{className:"sidebar-left"},r.default.createElement(u.default,null),r.default.createElement("hr",{className:"hidden-xs"}),r.default.createElement(s.default,{contentIdentifier:"orders"})),r.default.createElement("div",{className:"content-right"},this.state.orderGroupsLoaded&&e,this.state.orderGroupsLoaded&&r.default.createElement(c.default,{currentPage:this.state.page,totalPages:this.state.totalPages,onChange:this.onPageChange}))),this.state.orderGroupsLoaded&&0===this.state.orderGroups.length&&r.default.createElement("div",{className:"no-orders"},r.default.createElement("p",null,"You have not placed any orders")),!this.state.orderGroupsLoaded&&r.default.createElement(g.default,null)))}}])&&S(t.prototype,a),n&&S(t,n),o}();t.default=O},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var p=o(a(0)),m=a(7),h=o(a(1)),y=o(a(4)),r=n(a(11)),l=n(a(642)),i=o(a(643)),b=o(a(1608)),g=n(a(22)),s=n(a(17)),u=n(a(10));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this,e))||"object"!==c(n)&&"function"!=typeof n?E(a):n).state={detail:null,toggle:t.props.initExpanded,EDDValue:s.hasFeatureFlag(r.EDD),cancelOrderErrornumber:""},t.getOrderDetails=t.getOrderDetails.bind(E(E(t))),t.renderDetails=t.renderDetails.bind(E(E(t))),t.cancelOrder=t.cancelOrder.bind(E(E(t))),t.renderOrderDetailsError=t.renderOrderDetailsError.bind(E(E(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,p.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.props.initExpanded&&this.getOrderDetails()}},{key:"componentWillMount",value:function(){i.default.addOrderDetailsLoadedListener(this.props.order.orderNumber,this.renderDetails),i.default.addOrderDetailsErrorLoadedListener(this.renderOrderDetailsError)}},{key:"componentWillUnmount",value:function(){i.default.removeOrderDetailsLoadedListener(this.props.order.orderNumber,this.renderDetails),i.default.removeOrderDetailsErrorLoadedListener(this.renderOrderDetailsError)}},{key:"getOrderDetails",value:function(){var e=this.props.order;l.loadOrderDetails(e.orderNumber)}},{key:"renderOrderDetailsError",value:function(e){this.setState({cancelOrderErrornumber:e[0].order})}},{key:"renderDetails",value:function(e){var t,a=e.data.detail,n=this.props.order;0<n.shippingInformation.length&&(t=a.items.map(function(t){var e=n.shippingInformation.find(function(e){return e.projectId===t.projectId});return function(o){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(e){var t,a,n;t=o,n=r[a=e],a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n})}return o}({},t,{delivaryinfo:e.DeliveryInfo||""})}),a.items=t,a.status=n.status),this.setState({detail:a})}},{key:"cancelOrder",value:function(n){u.showOrderCancelModal(function(e,t){if(1==e){var a={orderNumber:n,reason:t};l.cancelOrder(a)}})}},{key:"render",value:function(){var e,t,a=this,n=this.props,o=n.id,r=n.initExpanded,l=n.order,i="orderGroup"+o,s="#orderGroup"+o,u=this.state.detail&&0<this.state.detail.items.length,c=(y.default.getUser(),null),d=null;if(t=0<l.shippingInformation.length?l.shippingInformation.map(function(e){return p.default.createElement("div",{key:e.trackingId},p.default.createElement("strong",null,p.default.createElement("a",{onClick:function(){return window.open(e.trackingUrl)}},e.trackingId)))}):p.default.createElement("strong",null,"Pending"),e=p.default.createElement("div",{className:"totals"},p.default.createElement("h3",null,"Pricing Information"),p.default.createElement("table",null,p.default.createElement("tbody",null,p.default.createElement("tr",null,p.default.createElement("td",{className:"totals-label"},"Sub Total"),p.default.createElement("td",{className:"totals-value"},g.formatPrice(l.cartItemTotal))),0<l.discountTotal&&p.default.createElement("tr",null,p.default.createElement("td",{className:"totals-label"},"Discount"),p.default.createElement("td",{className:"totals-value"},"-",g.formatPrice(l.discountTotal))),null!==l.handlingCharge&&p.default.createElement("tr",null,p.default.createElement("td",{className:"totals-label"},"Handling"),p.default.createElement("td",{className:"totals-value"},g.formatPrice(l.handlingCharge))),p.default.createElement("tr",null,p.default.createElement("td",{className:"totals-label"},"Shipping"),p.default.createElement("td",{className:"totals-value"},g.formatPrice(l.shipping))),p.default.createElement("tr",null,p.default.createElement("td",{className:"totals-label"},"Tax"),p.default.createElement("td",{className:"totals-value"},g.formatPrice(l.orderTaxTotal))),p.default.createElement("tr",null,p.default.createElement("td",{className:"totals-label"},"Total"),p.default.createElement("td",{className:"totals-value"},g.formatPrice(l.orderTotal)))))),u){var f=this.state.detail;d=p.default.createElement("div",{className:"shipping-billing clearfix"},p.default.createElement("hr",{className:"visible-xs-block"}),p.default.createElement("div",{className:"shipping"},p.default.createElement("h3",null,"Shipping Information"),p.default.createElement("address",null,f.shippingFirstName," ",f.shippingLastName,p.default.createElement("br",null),f.shippingAddress1,p.default.createElement("br",null),f.shippingAddress2&&p.default.createElement("span",null,f.shippingAddress2,p.default.createElement("br",null)),f.shippingCity,", ",f.shippingState," ",f.shippingPostalCode),p.default.createElement("p",null,f.shippingMethod)),p.default.createElement("hr",{className:"visible-xs-block"}),p.default.createElement("div",{className:"billing"},p.default.createElement("h3",null,"Billing Information"),p.default.createElement("div",{className:"credit-card-info clearfix"},p.default.createElement("div",{className:"credit-card "+f.creditCardType.toLowerCase()}),p.default.createElement("div",null,f.creditCardType," ****",f.creditCardNumber)),p.default.createElement("address",null,f.billingFirstName," ",f.billingLastName,p.default.createElement("br",null),f.billingAddress1,p.default.createElement("br",null),f.billingAddress2&&p.default.createElement("span",null,f.billingAddress2,p.default.createElement("br",null)),f.billingCity,", ",f.billingState&&"null"!==f.billingState?f.billingState:""," ",f.billingPostalCode,p.default.createElement("br",null),f.billingCountry)),p.default.createElement("hr",{className:"visible-xs-block"}),e),c=this.state.detail.items.map(function(e,t){return p.default.createElement(b.default,{item:e,key:t++,status:a.state.detail.status})})}return p.default.createElement("div",{className:"group-collapse order-group"},p.default.createElement("header",{className:(0,h.default)({collapsed:!r}),"data-toggle":"collapse",href:s,"aria-controls":i,onClick:this.getOrderDetails},p.default.createElement("div",{className:"group-collapse-left"},p.default.createElement("h2",null,"Order Number: ",l.orderNumber)),p.default.createElement("div",{className:"group-collapse-right"},p.default.createElement("div",{className:"group-collapse-button"},p.default.createElement("span",{className:"icon-add"}),p.default.createElement("span",{className:"icon-remove"}))),this.state.EDDValue?p.default.createElement("div",{className:"order-group-info clearfix"},p.default.createElement("div",null,"Order Date: ",p.default.createElement("strong",null,l.orderDate?(0,m.bn_moment)(l.orderDate).format("MMM D, YYYY"):"Pending")),p.default.createElement("div",null,"Total: ",p.default.createElement("strong",null,g.formatPrice(l.orderTotal))),p.default.createElement("div",null,"Status: ",p.default.createElement("strong",null,l.status)),p.default.createElement("br",null),"Canceled"!==l.status&&"Shipped"!==l.status&&"Delivered"!==l.status&&p.default.createElement("div",null,"Estimated Delivery Date: ",p.default.createElement("strong",null,l.estimatedDeliveryDate?(0,m.bn_moment)(l.estimatedDeliveryDate).format("MMM D, YYYY"):"Pending")),"Canceled"!==l.status&&l.shippingDate&&p.default.createElement("div",null,"Ship Date: ",p.default.createElement("strong",null,l.shippingDate?(0,m.bn_moment)(l.shippingDate).format("MMM D, YYYY"):"Pending")),"Canceled"!==l.status&&("Shipped"==l.status||"Delivered"==l.status&&l.estimatedDeliveryDate)&&p.default.createElement("div",null,"Delivery Date: ",p.default.createElement("strong",null,l.estimatedDeliveryDate?(0,m.bn_moment)(l.estimatedDeliveryDate).format("MMM D, YYYY"):"Pending"))):p.default.createElement("div",{className:"order-group-info clearfix"},p.default.createElement("div",null,"Order Date: ",p.default.createElement("strong",null,l.orderDate?(0,m.bn_moment)(l.orderDate).format("MMMM D, YYYY"):"Pending")),p.default.createElement("div",null,"Order Total: ",p.default.createElement("strong",null,g.formatPrice(l.orderTotal))),p.default.createElement("div",null,"Status: ",p.default.createElement("strong",null,l.status)),p.default.createElement("div",null,"Ship Date: ",p.default.createElement("strong",null,l.shippingDate?(0,m.bn_moment)(l.shippingDate).format("MMMM D, YYYY"):"Pending")),p.default.createElement("div",{className:"tracking-information"},p.default.createElement("div",null,"Track Order:Â "),p.default.createElement("div",null,t))),1==l.allowedToCancel&&"Pending"==l.status&&l.orderNumber!==this.state.cancelOrderErrornumber&&p.default.createElement("a",{className:"cancel-order-btn",onClick:function(){return a.cancelOrder(l.orderNumber)}},"Cancel Order ")),p.default.createElement("section",{id:i,className:"collapse "+(r?"in":"")},u&&p.default.createElement("div",null,p.default.createElement("div",{className:"hidden-xs"},d),p.default.createElement("table",{className:"order-list"},p.default.createElement("thead",{className:"order-list-headings hidden-xs"},p.default.createElement("tr",null,p.default.createElement("td",{className:"cover"},p.default.createElement("p",null,"Item(s)")),p.default.createElement("td",{className:"title"},"Â "),p.default.createElement("td",{className:"author"},p.default.createElement("p",null,"Author")),p.default.createElement("td",{className:"type-size"},p.default.createElement("p",null,"Type/Size")),p.default.createElement("td",{className:"quantity"},p.default.createElement("p",null,"Qty")),p.default.createElement("td",{className:"price"},p.default.createElement("p",null,"Price")),p.default.createElement("td",{className:"total"},p.default.createElement("p",null,"Total")))),p.default.createElement("tbody",null,c)),p.default.createElement("div",{className:"visible-xs-block"},d))))}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadOrderDetails=function(e,t,a){i.loadOrderDetails(e,a).then(function(e){try{t(new n.default(e))}catch(e){console.log(e)}})},t.cancelOrder=function(e,t,a){i.cancelOrder(e,a).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadOrderHistory=function(e,t,a,n,o,r,l){i.loadOrderHistory(e,t,a,n,o,l).then(function(e){try{var t=e.orderGroups.map(function(e){return new s.default(e)}),a=e.totalCount;r({orderGroups:t,totalCount:a})}catch(e){console.log(e)}})};var i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(1607)),n=o(a(495)),s=o(a(496));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadOrderHistory=function(e,t,a,n,o,r){var l={page:a,limit:n};e&&e.length&&(l.dateStart=e);t&&t.length&&(l.dateEnd=t);o&&o.length&&(l.sortOption=o);return i.get("/api/orderhistory",{params:l},r)},t.loadOrderDetails=function(e,t){return i.get("/api/orderhistory/details/"+e,{},t)},t.cancelOrder=function(e,t){return i.post("/api/orderhistory/cancelOrder",e,t)};var i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(67))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=a(2),i=n(a(13)),s=n(a(8)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(33)),c=n(a(61)),d=n(a(1609)),f=n(a(188));function n(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).checkClick=t.checkClick.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){window.addEventListener("click",this.checkClick)}},{key:"checkClick",value:function(e){if("glyphicon glyphicon-info-sign"==e.target.className&&1==(0,i.default)('[id*="popover"]').length)return!1;if(0<(0,i.default)('[id*="popover"]').length){var t="[aria-describedby="+(0,i.default)('[id*="popover"]').first().attr("id")+"]";(0,i.default)('[id*="popover"]').first().remove(),(0,i.default)(t).removeAttr("aria-describedby")}}},{key:"render",value:function(){var e,t=this.props.item,a=(this.props.key,t.isbn?"(ISBN: "+t.isbn+")":"(Personal Book)"),n="/"+u.Base+"/"+t.projectId+"/"+u.Summary;return e=0<t.delivaryinfo.length?t.delivaryinfo.map(function(e){return r.default.createElement("p",{key:e.trackingId},r.default.createElement("strong",null,r.default.createElement("a",{onClick:function(){return window.open(e.trackingUrl)}},e.trackingId)),r.default.createElement(c.default,{info:!0,isHtml:!0,text:f.default.renderToStaticMarkup(r.default.createElement(d.default,{item:e}))},r.default.createElement("span",{className:"glyphicon glyphicon-info-sign"})))}):r.default.createElement("p",null,r.default.createElement("strong",null,"Pending")),r.default.createElement("tr",{className:"single-order"},r.default.createElement("td",{className:"cover"},t.projectId?r.default.createElement(l.Link,{title:"cover",to:n},r.default.createElement("img",{alt:"cover",src:t.thumbnail,width:"100%",className:"img-responsive"})):r.default.createElement("img",{alt:"cover",src:t.thumbnail,width:"100%",className:"img-responsive"})),r.default.createElement("td",{className:"details visible-xs-inline-block"},r.default.createElement("p",{className:"title"},t.title),r.default.createElement("p",null,"By ",t.author),r.default.createElement("p",null," ",a," "),r.default.createElement("p",null,s.default.projectConstants("coverFormat",t.coverType).label," | ",s.default.projectConstants("pageSize",t.trimSize).label.replace(/\\/g,"")),r.default.createElement("p",null,t.proofQuantity&&r.default.createElement("span",null,"Qty: ",t.proofQuantity,"Â "),t.proofPricePerBook&&r.default.createElement("span",null,"@ $",t.proofPricePerBook,"Â "),t.proofTotalPrice&&r.default.createElement("strong",null,"Total: $",t.proofTotalPrice)),r.default.createElement("p",null,t.eanQuantity&&r.default.createElement("span",null,"Qty: ",t.eanQuantity,"Â "),t.pricePerBook&&r.default.createElement("span",null,"@ $",t.pricePerBook,"Â "),t.eanTotalPrice&&r.default.createElement("strong",null,"Total: $",t.eanTotalPrice))),r.default.createElement("td",{className:"title hidden-xs"},r.default.createElement("p",null,t.title),r.default.createElement("p",null," ",a," "),"Canceled"!==this.props.status&&r.default.createElement("p",{className:"margin-bottom15"},"Track my book:"),"Canceled"!==this.props.status&&r.default.createElement("div",{className:"tracking-information"},r.default.createElement("div",null,e))),r.default.createElement("td",{className:"author hidden-xs"},r.default.createElement("p",null,t.author)),r.default.createElement("td",{className:"type-size hidden-xs"},r.default.createElement("p",null,s.default.projectConstants("coverFormat",t.coverType).label," | ",s.default.projectConstants("pageSize",t.trimSize).label.replace(/\\/g,""))),r.default.createElement("td",{className:"quantity hidden-xs"},t.proofQuantity&&r.default.createElement("p",null,t.proofQuantity),t.eanQuantity&&r.default.createElement("p",null,t.eanQuantity)),r.default.createElement("td",{className:"price hidden-xs"},t.proofPricePerBook&&r.default.createElement("p",null,"$",t.proofPricePerBook),t.pricePerBook&&r.default.createElement("p",null,"$",t.pricePerBook)),r.default.createElement("td",{className:"total hidden-xs"},t.proofTotalPrice&&r.default.createElement("p",null,"$",t.proofTotalPrice),t.eanTotalPrice&&r.default.createElement("p",null,"$",t.eanTotalPrice)))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){var e=this.props.item.products.map(function(e){return r.default.createElement("tr",{key:e.productId},r.default.createElement("td",null,r.default.createElement("span",null,e.title)),r.default.createElement("td",null,r.default.createElement("span",null,e.quantity)))});return r.default.createElement("div",null,r.default.createElement("table",{className:"order-item-tooltip-table table"},r.default.createElement("thead",null," ",r.default.createElement("tr",null," ",r.default.createElement("td",null,r.default.createElement("span",{className:"font-bold"},"Title"))," ",r.default.createElement("td",null,r.default.createElement("span",{className:"font-bold"},"Qty"))," ")," "),r.default.createElement("tbody",null,e)),r.default.createElement("div",null,r.default.createElement("strong",null,r.default.createElement("a",{href:this.props.item.trackingUrl,className:"underline-link",target:"_blank"},"Track "))))}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var h=s(a(0)),y=a(2),b=(s(a(1)),s(a(34))),o=n(a(26)),u=s(a(4)),g=(s(a(1611)),s(a(1612))),v=s(a(1613)),E=n(a(11)),S=n(a(17)),k=s(a(631)),P=s(a(147)),w=s(a(1614)),O=s(a(121)),r=n(a(25)),C=s(a(1615)),N=s(a(1616)),_=s(a(1617)),T=s(a(1618)),D=s(a(3)),j=s(a(1619)),M=s(a(1620)),L=s(a(192)),l=n(a(48)),A=s(a(45)),i=n(a(31)),c=n(a(10)),d=s(a(13));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var R=function(e){function s(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),a=this,t=!(n=m(s).call(this,e))||"object"!==f(n)&&"function"!=typeof n?x(a):n;var o=u.default.getProfile(),r=u.default.getSecurityQuestions(),l=u.default.getUser(),i=A.default.loaded;return t.state={updating:!1,errorMessages:[],profile:o,securityQuestions:r,user:l,vendorLoaded:i,emailPreferenceFeatureFlagValue:S.hasFeatureFlag(E.EMAIL_PREF)},t.onProfileLoaded=t.onProfileLoaded.bind(x(x(t))),t.onProfileUpdateBegun=t.onProfileUpdateBegun.bind(x(x(t))),t.onProfileUpdated=t.onProfileUpdated.bind(x(x(t))),t.onProfileUpdatedError=t.onProfileUpdatedError.bind(x(x(t))),t.onSecurityQuestionsLoaded=t.onSecurityQuestionsLoaded.bind(x(x(t))),t.onUserLoaded=t.onUserLoaded.bind(x(x(t))),t.onVendorInfoLoaded=t.onVendorInfoLoaded.bind(x(x(t))),t.scrollTopPhone=t.scrollTopPhone.bind(x(x(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(s,h.default.Component),t=s,(a=[{key:"componentDidMount",value:function(){if(!this.state.user.authorShareKey){this.state.profile||o.loadProfile(),this.state.securityQuestions||o.loadSecurityQuestions(),this.state.vendor||l.loadVendorInfo();var e={eventInfo:{eventName:"Page View",eventAction:"pageView",timeStamp:new Date},category:{primaryCategory:"Pages"},attributes:{page:{pageInfo:{previousPageName:null,pageName:"bn press|my-profile",pageType:"bn press:my profile",destinationURL:window.location.href,referringURL:null}}}};r.omnitureActionInvoked(e,"onPageView")}}},{key:"componentWillMount",value:function(){u.default.addChangeListener(this.onUserLoaded),u.default.addProfileLoadedListener(this.onProfileLoaded),u.default.addProfileUpdateBegunListener(this.onProfileUpdateBegun),u.default.addProfileUpdatedListener(this.onProfileUpdated),u.default.addProfileUpdatedErrorListener(this.onProfileUpdatedError),u.default.addSecurityQuestionsLoadedListener(this.onSecurityQuestionsLoaded),A.default.addVendorInfoLoadedListener(this.onVendorInfoLoaded)}},{key:"componentWillUnmount",value:function(){u.default.removeChangeListener(this.onUserLoaded),u.default.removeProfileLoadedListener(this.onProfileLoaded),u.default.removeProfileUpdateBegunListener(this.onProfileUpdateBegun),u.default.removeProfileUpdatedListener(this.onProfileUpdated),u.default.removeProfileUpdatedErrorListener(this.onProfileUpdatedError),u.default.removeSecurityQuestionsLoadedListener(this.onSecurityQuestionsLoaded),A.default.removeVendorInfoLoadedListener(this.onVendorInfoLoaded),r.pageNameChanged("bn press|my-profile")}},{key:"onProfileLoaded",value:function(){this.setState({profile:u.default.getProfile()})}},{key:"onProfileUpdateBegun",value:function(){this.setState({updating:!0,errorMessages:[]})}},{key:"onProfileUpdated",value:function(e){var t=this.state.updating;this.setState({updating:t,profile:u.default.getProfile()},function(){t&&!e.twoRequest&&(document.querySelector('[name*="secretAnswer"]').value="",setTimeout(function(){return i.toggleToast(!0,"Changes Saved")},0))})}},{key:"onProfileUpdatedError",value:function(e){var t=u.default.getProfileErrors()[0],a=e.profile,n="";1077!=t&&1082!=t&&1083!=t&&1084!=t||!S.hasFeatureFlag(E.TWO_F_A_AUTH)?1087==t||1085==t?setTimeout(function(){c.showTwofaMaxAttemptErrorModal()},1e3):1094==t?setTimeout(function(){c.showNotificationModal("Sorry! Weâ€™re not able to verify or save your mobile phone number at this time. Please try again later.","Phone Number Not Saved","Close")},1e3):(n=h.default.createElement("span",{dangerouslySetInnerHTML:{__html:u.default.getProfileErrors()[0]}}),this.setState({updating:!1,errorMessages:[n]},function(){window.scrollTo(0,0)})):(setTimeout(function(){c.TwoFaProfileModal(a.updateType,a,t)},0),this.setState({updating:!1}))}},{key:"onSecurityQuestionsLoaded",value:function(){this.setState({securityQuestions:u.default.getSecurityQuestions()})}},{key:"onVendorInfoLoaded",value:function(){var e=u.default.getUser();this.setState({loaded:!0,vendorLoaded:!0}),"Yes"==A.default.getW8Message().mismatch?this.setState({vendorStatus:"Existing"}):this.setState({vendorStatus:e.vendorStatus})}},{key:"onUserLoaded",value:function(){this.setState({user:u.default.getUser()})}},{key:"scrollTopPhone",value:function(){(0,d.default)("html, body").animate({scrollTop:(0,d.default)("#phone").offset().top},250,"linear")}},{key:"render",value:function(){var e=this.state,t=e.profile,a=e.securityQuestions,n=e.updating,o=e.user,r=e.vendorLoaded,l=r&&A.default.isUSCitizen,i=t&&a&&r,s=!o.approvalDate||l,u=o.canRefer&&S.hasFeatureFlag(E.REFERRAL),c=S.hasFeatureFlag(E.TWO_F_A_AUTH)&&t&&t.domesticUser,d=[{color:"#3D6DB5",label:"First & Last Name",value:"name",show:!0},{color:"#f69455",label:"Email Address",value:"email",show:!0},{color:"#54fc5f",label:"Mobile Phone Number",value:"phone",show:c},{color:"#6275a0",label:"Password",value:"password",show:!0},{color:"#fa6465",label:"Security Question",value:"security",show:!0},{color:"#54fc5f",label:"Digital 1099-MISC Tax Form",value:"tax-form",show:s},{color:"#347d56",label:"Referral Program",value:"referrals",show:u},{color:"#db7461",label:"Payment & Shipping",value:"payment",show:!0}],f=[{color:"#3D6DB5",label:"First & Last Name",value:"name",show:!0},{color:"#f69455",label:"Email Address",value:"email",show:!0},{color:"#54fc5f",label:"Mobile Phone Number",value:"phone",show:c},{color:"#6275a0",label:"Password",value:"password",show:!0},{color:"#fa6465",label:"Security Question",value:"security",show:!0},{color:"#54fc5f",label:"Digital 1099-MISC Tax Form",value:"tax-form",show:s},{color:"#7f00ff",label:"Email Preferences",value:"emailpreference",show:!0},{color:"#347d56",label:"Referral Program",value:"referrals",show:u},{color:"#db7461",label:"Payment & Shipping",value:"payment",show:!0}],p=!!this.state.user.authorShareKey,m=h.default.createElement("span",null,"This account has no default mobile phone number. ",h.default.createElement(y.Link,{onClick:this.scrollTopPhone},h.default.createElement("span",{className:"next-line"},"Add Mobile Phone Number")));return h.default.createElement("div",{className:"left-sidebar-wrapper"},!p&&h.default.createElement("div",{className:"left-sidebar-container my-profile"},this.state.vendorStatus&&h.default.createElement(L.default,{status:this.state.vendorStatus}),0<this.state.errorMessages.length&&h.default.createElement(b.default,{messages:this.state.errorMessages,type:"error"}),S.hasFeatureFlag(E.TWO_F_A_AUTH)&&t&&t.domesticUser&&!t.cellPhoneNumber&&h.default.createElement(b.default,{messages:[m],type:"error-white"}),h.default.createElement("header",{className:"sidelines"},h.default.createElement("h1",null,"My Profile")),h.default.createElement("div",{className:"sidebar-left"},h.default.createElement(O.default,null),i&&!this.state.emailPreferenceFeatureFlagValue&&h.default.createElement(k.default,null,h.default.createElement(T.default,{sections:d})),i&&this.state.emailPreferenceFeatureFlagValue&&h.default.createElement(k.default,null,h.default.createElement(T.default,{sections:f})),h.default.createElement(P.default,{contentIdentifier:"profile"})),h.default.createElement("div",{className:"content-right"},!i&&h.default.createElement(D.default,{top:100}),i&&h.default.createElement("div",{className:"panel"},h.default.createElement("div",{className:"panel-body"},h.default.createElement(w.default,{id:"name",profile:t,disableInput:n}),h.default.createElement(g.default,{id:"email",profile:t,disableInput:n}),S.hasFeatureFlag(E.TWO_F_A_AUTH)&&t&&t.domesticUser&&h.default.createElement(v.default,{id:"phone",profile:t,disableInput:n}),h.default.createElement(C.default,{id:"password",profile:t,disableInput:n}),h.default.createElement(_.default,{id:"security",profile:t,securityQuestions:a,disableInput:n}),s&&h.default.createElement(j.default,{id:"tax-form",profile:t,vendorApprovalDate:o.approvalDate}),!1,this.state.emailPreferenceFeatureFlagValue&&h.default.createElement(M.default,{id:"emailpreference",profile:t,disableInput:n}),u&&h.default.createElement(N.default,{id:"referrals",referralCode:o.referralCode}),h.default.createElement("div",{id:"payment",className:"my-profile-section payment-shipping-information"},h.default.createElement("h2",null,"Payment & Shipping Information"),h.default.createElement("p",null,"You may add, delete or edit your payment and shipping information in My Account at ",h.default.createElement("a",{href:"https://www.barnesandnoble.com/account/",className:"underline-link",target:"_blank"},"bn.com"),".")))))),p&&h.default.createElement("div",{className:"no-permission"},"You don't have access to this page."))}}])&&p(t.prototype,a),n&&p(t,n),s}();t.default=R},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1)),i=n(a(6));!function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(a(9));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?f(a):n).state={checked:!1,profile:t.props.profile,disableInput:t.props.disableInput},t.onSubmit=t.onSubmit.bind(f(f(t))),t.onCancel=t.onCancel.bind(f(f(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({profile:e.profile,disableInput:e.disableInput})}},{key:"onSubmit",value:function(){}},{key:"onCancel",value:function(){}},{key:"render",value:function(){var e=this.state.disableInput;return r.default.createElement("div",{className:"my-profile-section contact-preferences"},r.default.createElement("h2",null,"Contact Preferences"),r.default.createElement(i.default,{ref:"form"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("input",{id:"contact-preferences",type:"checkbox",className:"big-checkbox",onChange:this.onApproveChanged,checked:this.state.checked,disabled:!this.props.loaded}),r.default.createElement("label",{htmlFor:"contact-preferences"},"Send me notices about special offers, events, new products and services from NOOK & trusted third parties."))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"save-or-cancel"},r.default.createElement("button",{className:"btn",onClick:this.onSubmit,disabled:e},"Save Changes"),r.default.createElement("span",{className:(0,l.default)("cancel",{disabled:e}),onClick:this.onCancel,disabled:e},"Cancel"))))))}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1)),i=o(a(13)),s=o(a(6)),u=o(a(12)),c=n(a(9)),d=o(a(4)),f=n(a(26));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={profile:t.props.profile,disableInput:t.props.disableInput,valid:!1},t.onSubmit=t.onSubmit.bind(b(b(t))),t.onValidationChange=t.onValidationChange.bind(b(b(t))),t.resetFields=t.resetFields.bind(b(b(t))),t.emailChange=t.emailChange.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting()}},{key:"componentWillReceiveProps",value:function(e){e!==this.props&&(this.setState({profile:e.profile,disableInput:e.disableInput}),e.profile!==this.props.profile&&this.resetFields())}},{key:"emailChange",value:function(e){e.newValue==this.state.profile.email?((0,i.default)(".same-email-error").text("New email must be different than the current email"),(0,i.default)(".same-email-error").next().hasClass("error")||(0,i.default)(".same-email-error").next().addClass("error"),this.setState({disableInput:!0})):((0,i.default)(".same-email-error").empty(),this.setState({disableInput:!1}))}},{key:"onSubmit",value:function(e){if(this.refs.form.validate(),this.refs.form.valid()){var t=this.refs.form.gather(),a=d.default.getProfile().clone();a.newEmail=t.email,a.password=t.password,a.updateType="email",window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){a.recaptchaToken=e,f.updateProfile(a)}).catch(function(){f.updateProfile(a)})})}}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"resetFields",value:function(){this.refs.email.reset(),this.refs.confirm.reset(),this.refs.password.reset()}},{key:"render",value:function(){var t=this,e=this.state,a=e.valid,n=e.profile,o=e.disableInput;return r.default.createElement("div",{id:this.props.id,className:"my-profile-section"},r.default.createElement("h2",null,"Email Address"),r.default.createElement("p",null,"For security purposes changing your email address will result in the removal of all of your saved payment information."),r.default.createElement("p",{className:"helper-text"},"Current Email Address: ",n.email),r.default.createElement(s.default,{ref:"form",autoComplete:"nope",onValidationChange:this.onValidationChange},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement("div",{className:"same-email-error"}),r.default.createElement(u.default,{name:"email",ref:"email",label:"New Email Address",autoComplete:"new-password",maxLength:50,onChange:function(e){return t.emailChange(e)},rules:[c.required("Please enter an email address."),c.pattern(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Please enter a valid email address.",!0)]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(u.default,{name:"confirm",ref:"confirm",label:"Confirm New Email Address",autoComplete:"new-password",maxLength:50,rules:[c.required("Please enter an email address."),c.pattern(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Please enter a valid email address.",!0),c.matchesControl("email","Email addresses do not match.",!0)]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(u.default,{name:"password",ref:"password",label:"Current Password",type:"password",autoComplete:"new-password",maxLength:50,rules:[c.required("Please enter a password.")]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"save-or-cancel"},r.default.createElement("button",{className:"btn g-recaptcha",onClick:this.onSubmit,disabled:!a||o,"data-sitekey":"6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v","data-callback":"onSubmit","data-action":"submit"},"Save Changes"),r.default.createElement("span",{className:(0,l.default)("cancel",{disabled:o}),onClick:this.resetFields,disabled:!a&&o},"Cancel"))))))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1)),i=o(a(13)),s=o(a(6)),u=o(a(12)),c=n(a(9)),d=o(a(4)),f=n(a(26));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={profile:t.props.profile,disableInput:t.props.disableInput,valid:!1},t.onSubmit=t.onSubmit.bind(b(b(t))),t.onValidationChange=t.onValidationChange.bind(b(b(t))),t.resetFields=t.resetFields.bind(b(b(t))),t.mobileNumberChange=t.mobileNumberChange.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting()}},{key:"componentWillReceiveProps",value:function(e){e!==this.props&&(this.setState({profile:e.profile,disableInput:e.disableInput}),e.profile!==this.props.profile&&this.resetFields())}},{key:"onSubmit",value:function(e){if(this.refs.form.validate(),this.refs.form.valid()){var t=this.refs.form.gather(),a=d.default.getProfile().clone();a.cellPhoneNumber=t.cellPhoneNumber,a.updateType="phone",window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){a.recaptchaToken=e,f.updateProfile(a)}).catch(function(){f.updateProfile(a)})})}}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"resetFields",value:function(){setTimeout(function(){document.querySelector('[name*="confirmcellPhoneNumber"]').value="",document.querySelector('[name*="cellPhoneNumber"]').value=""},100)}},{key:"mobileNumberChange",value:function(e,t){var a=this,n=e.newValue;this.state.profile.cellPhoneNumber==n?((0,i.default)(".same-val-error").text("New number must be different than the current number"),(0,i.default)(".same-val-error").next().hasClass("error")||(0,i.default)(".same-val-error").next().addClass("error"),this.setState({disableInput:!0})):"cellPhoneNumber"==t?((0,i.default)(".same-val-error").empty(),this.setState({disableInput:!1}),this.refs.cellPhoneNumber.setValue(c.formatUSNumber(n))):((0,i.default)(".same-val-error").empty(),this.setState({disableInput:!1}),this.refs.confirmcellPhoneNumber.setValue(c.formatUSNumber(n))),setTimeout(function(){a.refs.form.validateWithoutCommitting()},0)}},{key:"render",value:function(){var t=this,e=this.state,a=e.valid,n=e.profile,o=e.disableInput;return r.default.createElement("div",{id:this.props.id,className:"my-profile-section"},r.default.createElement("h2",null,"Mobile Phone Number (U.S. Only)"),r.default.createElement("p",null,"For increased account security and future SMS identity verification, we recommend adding a primary mobile phone number to your account. By adding a mobile phone number to your account, you agree to potentially receive SMS messages for account verification (one-time codes)."),r.default.createElement("p",{className:"helper-text"},"Current Mobile Phone Number:  ",n.cellPhoneNumber?"+1 "+n.cellPhoneNumber:"None"),r.default.createElement(s.default,{ref:"form",autoComplete:"nope",onValidationChange:this.onValidationChange},r.default.createElement("div",{className:"row  authormobile"},r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement("div",{className:"same-val-error"}),r.default.createElement(u.default,{name:"cellPhoneNumber",ref:"cellPhoneNumber",label:"New Mobile Phone Number",maxLength:12,onChange:function(e){return t.mobileNumberChange(e,"cellPhoneNumber")},rules:[c.required("Please enter a mobile phone number"),c.pattern(/^((1|\+1)?(\s|-|.)?)?((\(|\s\()?[2-9]{1}\d{2}|[2-9]{1}\d{2}(\)|\)\s)?)(\s|-|.)?(\d{3}(\s|-|.)?\d{4})/,"Please enter a valid mobile phone number.",!0)]}),r.default.createElement("span",{className:"uscode"},r.default.createElement("img",{src:"img/usa-flag-icon.png",height:"15px",alt:"usa flag image"}),"+1"))),r.default.createElement("div",{className:"row  authormobile"},r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(u.default,{name:"confirmcellPhoneNumber",ref:"confirmcellPhoneNumber",label:"Confirm New Mobile Phone Number",maxLength:12,onChange:function(e){return t.mobileNumberChange(e,"confirmcellPhoneNumber")},rules:[c.required("Please enter a mobile phone number"),c.pattern(/^((1|\+1)?(\s|-|.)?)?((\(|\s\()?[2-9]{1}\d{2}|[2-9]{1}\d{2}(\)|\)\s)?)(\s|-|.)?(\d{3}(\s|-|.)?\d{4})/,"Please enter a valid mobile phone number.",!0),c.matchesControl("cellPhoneNumber","Mobile phone numbers do not match.",!0)]}),r.default.createElement("span",{className:"uscode"},r.default.createElement("img",{src:"img/usa-flag-icon.png",height:"15px",alt:"usa flag image"}),"+1"))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"save-or-cancel"},r.default.createElement("button",{className:"btn g-recaptcha",onClick:this.onSubmit,disabled:!a||o,"data-sitekey":"6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v","data-callback":"onSubmit","data-action":"submit"},"Save Changes"),r.default.createElement("span",{className:(0,l.default)("cancel",{disabled:o}),onClick:this.resetFields,disabled:!a&&o},"Cancel"))))))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1)),i=o(a(6)),s=o(a(12)),u=n(a(9)),c=o(a(4)),d=n(a(26));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={profile:t.props.profile,disableInput:t.props.disableInput,valid:!1},t.onSubmit=t.onSubmit.bind(y(y(t))),t.onCancel=t.onCancel.bind(y(y(t))),t.onValidationChange=t.onValidationChange.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting()}},{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({profile:e.profile,disableInput:e.disableInput})}},{key:"onSubmit",value:function(){if(this.refs.form.validate(),this.refs.form.valid()){var e=this.refs.form.gather(),t=c.default.getProfile().clone();t.firstName=e.firstName,t.lastName=e.lastName,t.updateType="name",window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){t.recaptchaToken=e,d.updateProfile(t)}).catch(function(){d.updateProfile(t)})})}}},{key:"onCancel",value:function(){var e=c.default.getProfile().clone();this.refs.firstName.setValue(e.firstName),this.refs.lastName.setValue(e.lastName)}},{key:"onValidationChange",value:function(){var e=!0;this.refs.firstName.value()===this.state.profile.firstName&&this.refs.lastName.value()===this.state.profile.lastName?(e=!1,this.setState({disableInput:!0})):this.setState({disableInput:!1}),this.setState({valid:this.refs.form.valid()&&e})}},{key:"render",value:function(){var e=this.state,t=e.valid,a=e.profile,n=e.disableInput;return r.default.createElement("div",{id:this.props.id,className:"my-profile-section"},r.default.createElement("h2",null,"First & Last Name"),r.default.createElement(i.default,{ref:"form",onValidationChange:this.onValidationChange},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(s.default,{name:"firstName",ref:"firstName",label:"First Name",maxLength:15,initValue:a.firstName,pattern:/^[a-zA-Z0-9 \-.]*$/,onChange:this.onValidationChange,rules:[u.required("Please enter a first name."),u.maxLength(15)]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(s.default,{name:"lastName",ref:"lastName",label:"Last Name",maxLength:25,initValue:a.lastName,onChange:this.onValidationChange,pattern:/^[a-zA-Z0-9 \-.]*$/,rules:[u.required("Please enter a last name."),u.maxLength(25)]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"save-or-cancel"},r.default.createElement("button",{className:"btn",onClick:this.onSubmit,"data-sitekey":"6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v","data-callback":"onSubmit","data-action":"submit",disabled:!t||n},"Save Changes"),r.default.createElement("span",{className:(0,l.default)("cancel",{disabled:n}),onClick:this.onCancel,disabled:!t&&n},"Cancel"))))))}}])&&p(t.prototype,a),n&&p(t,n),o}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1)),i=o(a(6)),s=o(a(12)),u=n(a(9)),c=o(a(80)),d=o(a(4)),f=n(a(26));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={profile:t.props.profile,disableInput:t.props.disableInput,showValidationPane:!1,valid:!1},t.onSubmit=t.onSubmit.bind(b(b(t))),t.onNewPasswordBlur=t.onNewPasswordBlur.bind(b(b(t))),t.onNewPasswordChange=t.onNewPasswordChange.bind(b(b(t))),t.onConfirmPasswordChange=t.onConfirmPasswordChange.bind(b(b(t))),t.onUpdateErrorReceived=t.onUpdateErrorReceived.bind(b(b(t))),t.onValidationChange=t.onValidationChange.bind(b(b(t))),t.resetFields=t.resetFields.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){d.default.addProfileUpdatedErrorListener(this.onUpdateErrorReceived)}},{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting()}},{key:"componentWillUnmount",value:function(){d.default.removeProfileUpdatedErrorListener(this.onUpdateErrorReceived)}},{key:"componentWillReceiveProps",value:function(e){e!==this.props&&(this.setState({profile:e.profile,disableInput:e.disableInput}),e.profile!==this.props.profile&&this.resetFields())}},{key:"onSubmit",value:function(e){if(this.refs.form.validate(),this.refs.form.valid()){var t=this.refs.form.gather(),a=d.default.getProfile().clone();a.password=t.password,a.newPassword=t.newPassword,a.updateType="password",window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){a.recaptchaToken=e,f.updateProfile(a)}).catch(function(){f.updateProfile(a)})})}}},{key:"onNewPasswordChange",value:function(){!this.state.showValidationPane&&0<this.refs.newPassword.value().length?this.setState({showValidationPane:!0}):this.state.showValidationPane&&0===this.refs.newPassword.value().length&&this.setState({showValidationPane:!1})}},{key:"onConfirmPasswordChange",value:function(){this.refs.newPassword.value()==this.refs.newPasswordConfirmation.value()&&this.refs.newPasswordConfirmation.value().length,this.setState({disableInput:!1})}},{key:"onNewPasswordBlur",value:function(){this.setState({showValidationPane:!1})}},{key:"onUpdateErrorReceived",value:function(){d.default.getProfileErrors()[0].includes("account has been locked")&&f.logoutUser()}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"resetFields",value:function(){this.refs.password.reset(),this.refs.newPassword.reset(),this.refs.newPasswordConfirmation.reset()}},{key:"render",value:function(){var e=this.state,t=e.valid,a=e.disableInput,n=e.profile.email;return r.default.createElement("div",{id:this.props.id,className:"my-profile-section"},r.default.createElement("h2",null,"Password"),r.default.createElement(i.default,{ref:"form",autoComplete:"nope",onValidationChange:this.onValidationChange},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(s.default,{name:"password",type:"password",ref:"password",autoComplete:"new-password",label:"Current Password",maxLength:50,rules:[u.required("Please enter the current password.")]}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(s.default,{name:"newPassword",type:"password",ref:"newPassword",autoComplete:"new-password",label:"New Password",maxLength:15,showValidationPane:this.state.showValidationPane,ruleList:u.getPasswordRuleList(),rules:u.getPasswordRules(n),onChange:this.onNewPasswordChange,onBlur:this.onNewPasswordBlur}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-6 col-sm-12"},r.default.createElement(s.default,{name:"newPasswordConfirmation",type:"password",ref:"newPasswordConfirmation",autoComplete:"new-password",label:"Confirm New Password",maxLength:15,onChange:this.onConfirmPasswordChange,rules:[u.required("Please confirm your password."),u.matchesControl("newPassword","The passwords you entered do not match.",!0)]}),r.default.createElement(c.default,{className:"password-confirmation-tooltip",info:!0,text:"Password Requirements: Your password must be between 8-15 characters and contain at least one uppercase letter & one number. Your password can't be the same as your username. Avoid using a password that might be easy for someone to guess."}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"save-or-cancel"},r.default.createElement("button",{className:"btn g-recaptcha",onClick:this.onSubmit,disabled:!t||a,"data-sitekey":"6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v","data-callback":"onSubmit","data-action":"submit"},"Save Changes"),r.default.createElement("span",{className:(0,l.default)("cancel",{disabled:a}),onClick:this.resetFields,disabled:!t&&a},"Cancel"))))))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),i=a(245),r=(a(2),function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(31))),s=n(a(79));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).buildReferralURL=t.buildReferralURL.bind(p(p(t))),t.onShare=t.onShare.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,l.default.Component),t=o,(a=[{key:"buildReferralURL",value:function(e){return"https://press.barnesandnoble.com/referral/?referral="+e}},{key:"onCopy",value:function(){s.default.getToastStatus()||r.toggleToast(!0,"Link Copied to Clipboard")}},{key:"onShare",value:function(e){var t=screen.height,a=screen.width,n=Math.round(a/2-275),o=420<t?Math.round(t/2-210):0;e.preventDefault(),window.open(e.target.href,e.target.id,"left=".concat(n,", top=").concat(o,", width=").concat(550,", height=").concat(420,", ").concat("scrollbars=yes,resizable=yes,toolbar=no,location=yes"))}},{key:"render",value:function(){var e=encodeURIComponent("I love using Barnes & Noble Press to publish my books to B&N / NOOK readers. Sign up and sell your book on BN.com"),t=encodeURIComponent("I love using Barnes & Noble Press to publish my books to B&N / NOOK readers. Sign up and sell your book with"),a=this.props.referralCode,n=this.buildReferralURL(a),o="https://www.facebook.com/dialog/share?app_id="+m+"&quote="+e+"&href="+encodeURIComponent(n),r="https://twitter.com/intent/tweet?url="+encodeURIComponent(n)+"&text="+t;return l.default.createElement("div",{id:this.props.id,className:"my-profile-section"},l.default.createElement("h2",null,"Referral Program"),l.default.createElement("p",null," Please share this referral link with authors who are new to B&N Press to earn rewards when they sign up as new vendors.",l.default.createElement("a",{href:"https://press.barnesandnoble.com/legal/referral-program-terms"}," See details")),l.default.createElement("div",{className:"url-box"},n),l.default.createElement("div",{className:"share-links"},"SHARE: Â  ",l.default.createElement(i.CopyToClipboard,{text:n,onCopy:this.onCopy},l.default.createElement("a",null,"COPY LINK")),"Â  | Â  ",l.default.createElement("a",{href:o,id:"facebook_dialog",onClick:this.onShare},"FACEBOOK"),"Â  | Â  ",l.default.createElement("a",{href:r,id:"twitter_dialog",onClick:this.onShare},"TWITTER")))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o;var m="1894289203961412"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(a(0)),i=o(a(1)),s=o(a(6)),u=o(a(12)),c=n(a(9)),d=o(a(23)),r=o(a(4)),f=n(a(26));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={profile:t.props.profile,disableInput:t.props.disableInput,securityQuestions:t.props.securityQuestions},t.onSubmit=t.onSubmit.bind(b(b(t))),t.onCancel=t.onCancel.bind(b(b(t))),t.onValidationChange=t.onValidationChange.bind(b(b(t))),t.answerChange=t.answerChange.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,l.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting()}},{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({profile:e.profile,disableInput:e.disableInput,securityQuestions:e.securityQuestions})}},{key:"onSubmit",value:function(){if(this.refs.form.validate(),this.refs.form.valid()){var e=this.refs.form.gather(),t=r.default.getProfile().clone();t.secretQuestion=e.secretQuestion,t.secretAnswer=e.secretAnswer,t.updateType="security question",window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){t.recaptchaToken=e,f.updateProfile(t),document.querySelector('[name*="secretAnswer"]').value=""}).catch(function(){f.updateProfile(t),document.querySelector('[name*="secretAnswer"]').value=""})})}}},{key:"answerChange",value:function(e){e.newValue.length<3&&this.setState({disableInput:!1})}},{key:"onCancel",value:function(){var e=r.default.getProfile().clone();this.refs.secretQuestion.setValue(e.secretQuestion),""===e.secretAnswer?this.refs.secretAnswer.reset():this.refs.secretAnswer.setValue(e.secretAnswer.replace(/./gi,"â—"))}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"render",value:function(){var t=this,e=this.state,a=e.valid,n=e.profile,o=e.securityQuestions,r=e.disableInput;return l.default.createElement("div",{id:this.props.id,className:"my-profile-section"},l.default.createElement("h2",null,"Security Question"),l.default.createElement(s.default,{ref:"form",onValidationChange:this.onValidationChange},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-12"},l.default.createElement(d.default,{name:"secretQuestion",ref:"secretQuestion",label:"Security Question",options:o,initValue:n.secretQuestion,rules:[c.required("Please select a security question.")]}))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-6 col-sm-12"},l.default.createElement(u.default,{name:"secretAnswer",ref:"secretAnswer",label:"Security Answer",minLength:4,maxLength:15,onChange:function(e){return t.answerChange(e)},autoComplete:"nope",rules:[c.minLength(4,"Security answer must be at least 4 characters."),c.maxLength(15,"Security answer cannot exceed 15 characters."),c.required("Please provide an answer to the security question.")]}))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-12"},l.default.createElement("div",{className:"save-or-cancel"},l.default.createElement("button",{className:"btn g-recaptcha",onClick:this.onSubmit,disabled:!a||r,"data-sitekey":"6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v","data-callback":"onSubmit","data-action":"submit"},"Save Changes"),l.default.createElement("span",{className:(0,i.default)("cancel",{disabled:r}),onClick:this.onCancel,disabled:!a&&r},"Cancel"))))))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=a(2),i=n(a(13));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.default.Component),a=t,(n=[{key:"componentDidMount",value:function(){window.location.hash&&this.navigate(window.location.hash.split("#")[1])}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onScroll)}},{key:"onLinkClick",value:function(e){l.browserHistory.push(window.location.pathname+"#"+e.value),this.navigate(e.value)}},{key:"navigate",value:function(e){(0,i.default)("html, body").animate({scrollTop:(0,i.default)("#"+e).offset().top},250,"linear")}},{key:"renderSection",value:function(e){var t=this;if(e.show)return r.default.createElement("li",{key:e.value,className:"section-link",onClick:function(){return t.onLinkClick(e)}},r.default.createElement("div",{className:"bullet",style:e.color?{borderColor:e.color}:null}),r.default.createElement("div",{className:"bullet-fill",style:e.color?{backgroundColor:e.color,borderColor:e.color}:null}),r.default.createElement("span",null,e.label))}},{key:"render",value:function(){var t=this,e=this.props.sections.map(function(e){return t.renderSection(e)});return r.default.createElement("ul",{id:"section-navigator",ref:"section-navigator",className:"list-unstyled section-navigator"},e)}}])&&s(a.prototype,n),o&&s(a,o),t}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=o(a(0)),r=a(7),c=o(a(47)),d=o(a(6)),l=n(a(10)),i=n(a(48)),s=o(a(45));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={enrolledEmail:s.default.digital1099Email,inLockout:!1,taxYear:null,userEnrolled:s.default.isDigital1099,valid:!1},t.onEnrollmentChange=t.onEnrollmentChange.bind(y(y(t))),t.onSubmit=t.onSubmit.bind(y(y(t))),t.onUnenroll=t.onUnenroll.bind(y(y(t))),t.onValidationChange=t.onValidationChange.bind(y(y(t))),t.setTaxDates=t.setTaxDates.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,u.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){i.load1099Settings()}},{key:"componentWillMount",value:function(){s.default.addUpdateDigital1099Enrollment(this.onEnrollmentChange),s.default.add1099SettingsLoadedListener(this.setTaxDates)}},{key:"componentWillUnmount",value:function(){s.default.removeUpdateDigital1099Enrollment(this.onEnrollmentChange),s.default.remove1099SettingsLoadedListener(this.setTaxDates)}},{key:"onEnrollmentChange",value:function(e){this.setState({userEnrolled:e,valid:!1})}},{key:"onSubmit",value:function(){var e="<span>You are leaving the B&N Press site and going to our tax partner site: viewmyforms.com.\n\t\t\t<br/><br/> You will need to create a new account on viewmyforms.com using ".concat(this.props.profile.email,"\n\t\t\tas your email address. Viewmyforms.com will send you a temporary password after you sign up.</span>");i.setDigital1099Enrollment(!0,s.default.vendorNumber),l.showNotificationModal(e," ","OK",function(){window.open("https://www.viewmyforms.com/","_blank")},!0)}},{key:"onUnenroll",value:function(){var e="Please confirm that you are opting out of receiving your ".concat(this.state.taxYear,"\n\t\t\t(and subsequent years) Form 1099-MISC electronically and choosing to receive your tax form by mail.");l.showConfirmationModal("Are you sure?",e,"Yes","No",function(e){e&&i.setDigital1099Enrollment(!1,s.default.vendorNumber)})}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.checkbox&&this.refs.checkbox.value()})}},{key:"setTaxDates",value:function(){var e=s.default.digital1099Settings,t=(0,r.bn_moment)().isSameOrAfter((0,r.bn_moment)(e.start,"MM/DD"),"day")&&(0,r.bn_moment)().isSameOrBefore((0,r.bn_moment)(e.end,"MM/DD"),"day"),a=(0,r.bn_moment)().isSameOrAfter((0,r.bn_moment)("01/01","MM/DD"),"day")&&(0,r.bn_moment)().isBefore((0,r.bn_moment)(e.start,"MM/DD"),"day")?(0,r.bn_moment)().subtract(1,"year").year():(0,r.bn_moment)().year();this.setState({inLockout:t,taxYear:a})}},{key:"render",value:function(){var e=this.state,t=e.enrolledEmail,a=e.inLockout,n=e.taxYear,o=e.userEnrolled,r=e.valid,l=u.default.createElement("a",{target:"_blank",href:"https://help-press.barnesandnoble.com/hc/en-us/articles/5359338849051-1099-MISC-Tax-Form-FAQs"},"Help Center"),i=this.props.profile.email,s=encodeURIComponent("B&N Press Paper Form 1099-MISC Request");return u.default.createElement("div",{id:this.props.id,className:"my-profile-section tax-form"},u.default.createElement("h2",null,"Digital 1099-MISC Tax Form"),this.props.vendorApprovalDate&&u.default.createElement(d.default,{ref:"form",onValidationChange:this.onValidationChange},u.default.createElement("div",{className:"row"},!a&&u.default.createElement("div",{className:"col-xs-12"},!o&&u.default.createElement("p",null," If you are eligible to receive a Form 1099-MISC, you can enroll to receive it electronically in place of a physical copy sent through the mail. Sign up for an electronic version for the ",n," tax year by January 10, ",n+1,". Go to our ",l," for more information."),o&&u.default.createElement("p",null," Visit ",u.default.createElement("a",{href:"https://www.viewmyforms.com",target:"_blank"},"viewmyforms.com")," using your ",u.default.createElement("strong",null,t||i)," email to download your Form 1099-MISC electronically. ",u.default.createElement("br",null)," ",u.default.createElement("br",null),'If you wish to opt out of the digital download option and prefer to have the form mailed to you, click on the "Unenroll" button. Go to our ',l," for more information.")),a&&u.default.createElement("div",{className:"col-xs-12"},!o&&u.default.createElement("p",null," If you are eligible to receive a Form 1099-MISC, you can enroll to receive it electronically in place of a physical copy sent through the mail. Sign up for an electronic version for the ",n," tax year starting in February. Go to our ",l," for more information."),o&&u.default.createElement("p",null," Visit ",u.default.createElement("a",{href:"https://www.viewmyforms.com",target:"_blank"},"viewmyforms.com")," using your ",u.default.createElement("strong",null,t)," email to download your Form 1099-MISC electronically. ",u.default.createElement("br",null)," ",u.default.createElement("br",null),"Changing your digital download option is not available while we are preparing the forms for the ",n-1," tax year. If you consented to receive your tax form electronically, yet would still prefer to have the form mailed to you, email us at ",u.default.createElement("a",{href:"mailto:vendorrelation@bn.com?Subject="+s,target:"_top"},"vendorrelation@bn.com"),". Go to our ",l," for more information."))),!a&&u.default.createElement("div",null,!o&&u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12"},u.default.createElement(c.default,{className:"strong",ref:"checkbox",name:"receiveFormsElectronically",label:"By clicking this checkbox, you consent to receive your tax form(s) electronically.",onChange:this.onValidationChange,initValue:o}),u.default.createElement("br",null))),!o&&u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12"},u.default.createElement("p",null,"NOTE: Once you click the button below, you will be sent to our partner website where you need to create a new account on viewmyforms.com using ",u.default.createElement("strong",null,i)," as your email address. Viewmyforms.com will send you a temporary password after you sign up."))),!o&&u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12"},u.default.createElement("div",{className:"save-or-cancel"},u.default.createElement("button",{className:"btn",onClick:this.onSubmit,disabled:!r},"Enroll")))),o&&u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12"},u.default.createElement("div",{className:"save-or-cancel"},u.default.createElement("button",{className:"btn",onClick:this.onUnenroll},"Unenroll")))))),!this.props.vendorApprovalDate&&u.default.createElement("p",null,"You must be an active US vendor to receive your Form 1099-MISC electronically. Go to our ",l," for more information."))}}])&&p(t.prototype,a),n&&p(t,n),o}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(a(0)),i=o(a(1)),s=a(2),u=o(a(6)),c=o(a(27)),d=n(a(108)),r=(n(a(9)),o(a(4))),f=n(a(11)),p=n(a(17)),m=n(a(26));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=[{value:"true",label:"Receive exclusive B&N Press updates, special offers, and the latest news."},{value:"false",label:"Opt-out from marketing email communications."}],S=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=b(o).call(this,e))||"object"!==h(n)&&"function"!=typeof n?v(a):n).state={profile:t.props.profile,disableInput:t.props.disableInput,valid:!1,buttonDisabled:!0,emailPreferenceFeatureFlagValue:p.hasFeatureFlag(f.EMAIL_PREF),errorchange:!1},t.onSubmit=t.onSubmit.bind(v(v(t))),t.onCancel=t.onCancel.bind(v(v(t))),t.onValidationChange=t.onValidationChange.bind(v(v(t))),t.emailPrefChange=t.emailPrefChange.bind(v(v(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,l.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting()}},{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({disableInput:e.disableInput})}},{key:"onSubmit",value:function(){if(this.refs.form.validate(),this.refs.form.valid()){var e=this.refs.form.gather(),t=r.default.getProfile().clone();t.emailOptedIn=e.emailOptedIn,t.updateType="emailPreference",window.grecaptcha.ready(function(){window.grecaptcha.execute("6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v",{action:"submit"}).then(function(e){t.recaptchaToken=e,m.updateProfile(t)}).catch(function(){m.updateProfile(t)})})}}},{key:"onCancel",value:function(){var e=r.default.getProfile().clone();this.refs.emailOptedIn.setValue(e.emailOptedIn),this.setState({disableInput:!0})}},{key:"emailPrefChange",value:function(e){this.setState({emailPrefValue:e.newValue,valid:this.refs.form.valid()}),e.newValue==r.default.getProfile().emailOptedIn?this.setState({disableInput:!0,buttonDisabled:!0}):this.setState({disableInput:!1,buttonDisabled:!1})}},{key:"onValidationChange",value:function(){this.setState({errorchange:!0})}},{key:"render",value:function(){var t=this,e=this.state,a=e.valid,n=e.profile,o=e.disableInput,r=e.buttonDisabled;return l.default.createElement("div",{id:this.props.id,className:"my-profile-section email-pref-container"},l.default.createElement("h2",null,"Email Preferences"),l.default.createElement(u.default,{ref:"form",onValidationChange:this.onValidationChange},l.default.createElement("p",null,"Update your email preferences. You have the flexibility to unsubscribe at any time. Please note that you are opted-out by default if you have never selected a preference."),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-12"},l.default.createElement(c.default,{name:"emailOptedIn",ref:"emailOptedIn",radioLayout:"vertical",fieldLayout:"vertical",labelColClass:"no-label",radioColClass:"col-md-12",initValue:null==n.emailOptedIn?"false":n.emailOptedIn,options:E,onChange:function(e){return t.emailPrefChange(e)}}))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-lg-12"},l.default.createElement("p",{className:"terms-smaller"},"By clicking on the button below you're agreeing to our ",l.default.createElement(s.Link,{className:"underline-link",to:"/"+d.LandingPagesPaths.BaseLegal+"/"+d.LandingPagesPaths.TermsOfUse,target:"_blank"},"Terms of Use")," and ",l.default.createElement("a",{className:"underline-link",href:"https://bn.clarip.com/privacycenter/?brand=barnesandnoble",target:"_blank"},"Privacy Policy"),"."))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-12"},l.default.createElement("div",{className:"save-or-cancel"},l.default.createElement("button",{className:"btn",onClick:this.onSubmit,"data-sitekey":"6LdspeQUAAAAADObEWJ6oo7G-QvgkhiLgMgDXn_v","data-callback":"onSubmit","data-action":"submit",disabled:!a||o||r},"Save Changes"),l.default.createElement("span",{className:(0,i.default)("cancel",{disabled:o}),onClick:this.onCancel,disabled:!a&&o},"Cancel"))))))}}])&&y(t.prototype,a),n&&y(t,n),o}();t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=b(a(0)),r=a(2),i=b(a(1)),s=b(a(82)),u=b(a(34)),c=b(a(4)),n=l(a(100)),d=(l(a(11)),l(a(17)),b(a(121))),f=l(a(14)),p=l(a(83)),m=b(a(8)),h=b(a(3)),y=l(a(31));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P=n.COUPON_VIEWS,w=function(e){function l(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a=this,t=!(n=E(l).call(this,e))||"object"!==g(n)&&"function"!=typeof n?k(a):n;var o=window.location.pathname.split("/"),r=s.default.parse(window.location.search.substring(1)).id?"Edit":"Create";return t.state={fromManageCoupons:!1,loading:!1,showCreateCoupon:!o[3]||"summary"===o[3]||"bn-promo"===o[3],showCreateBNPRomo:!(!o[3]||"summary"!==o[3]),titleActionText:r,couponFrom:!1,activeTab:t.props.location.query.activeTab?t.props.location.query.activeTab:"SCHEDULED",totalPages:1,page:1},t.onCouponError=t.onCouponError.bind(k(k(t))),t.onCouponsLoaded=t.onCouponsLoaded.bind(k(k(t))),t.onCouponSaved=t.onCouponSaved.bind(k(k(t))),t.onViewChange=t.onViewChange.bind(k(k(t))),t.tabUpdate=t.tabUpdate.bind(k(k(t))),t.makeClick=t.makeClick.bind(k(k(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(l,o.default.Component),t=l,(a=[{key:"componentWillMount",value:function(){m.default.addUserCouponSavedListener(this.onCouponSaved),m.default.addEbookCouponsLoadedListener(this.onCouponsLoaded)}},{key:"componentDidMount",value:function(){var e=this;"manage"===s.default.parse(window.location.search.substring(1)).tab&&this.setState({fromManageCoupons:!0,loading:!0},function(){e.onViewChange(P.CREATE_COUPON,!1,!0)})}},{key:"componentWillUnmount",value:function(){m.default.removeUserCouponSavedListener(this.onCouponSaved),m.default.removeEbookCouponsLoadedListener(this.onCouponsLoaded)}},{key:"onCouponError",value:function(e){this.setState({couponError:e})}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onCouponSaved",value:function(){var e=this,t=o.default.createElement("span",null,o.default.createElement("span",{className:"customToastSpan"},"Your promotion was created successfully."),o.default.createElement("p",null,"Remember to share the promotion with your readers,"),o.default.createElement("p",null,"so they can take advantage of this great deal."));this.setState({couponFrom:!0,loading:!0},function(){document.getElementById("app").classList.add("customToast"),setTimeout(function(){return y.toggleToast(!0,t,9e3)},0),setTimeout(function(){return f.getEbookCoupons(c.default.getUser().vendorNumber,"",e.state.activeTab,e.state.page,50)},0),e.onViewChange(P.COUPON_SUMMARY)}),setTimeout(function(){document.getElementById("app").classList.remove("customToast")}.bind(this),1e4),window.scrollTo(0,250)}},{key:"onCouponsLoaded",value:function(){if(this.setState({loading:!1}),this.state.fromManageCoupons){var e=m.default.coupons();0<e.activeCoupons.length||0<e.expiredCoupons.length||e.scheduledCoupons.length;this.onViewChange(P.COUPON_SUMMARY,!1,!0)}}},{key:"onSidebarNavigation",value:function(e){r.browserHistory.replace(e)}},{key:"onViewChange",value:function(e){var t=this,a=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];switch(e){case P.CREATE_COUPON:a?this.setState({titleActionText:"Edit",loading:!1,isCreateCouponSelected:!0,isSummarySelected:!1}):(r.browserHistory.push("/projects/coupon"),this.setState({loading:!1,isCreateCouponSelected:!0,isSummarySelected:!1}));break;case P.BN_PROMO:n||(r.browserHistory.push("/projects/coupon/bn-promo"),this.setState({loading:!0,isCreateCouponSelected:!0,isSummarySelected:!1}),setTimeout(function(){t.setState({loading:!1})},2e3));break;case P.COUPON_SUMMARY:n?r.browserHistory.replace("/projects/coupon/summary"):("/projects/coupon/bn-promo"===this.props.location.pathname?r.browserHistory.push("/projects/coupon/bn-promo-summary"):this.state.couponFrom?r.browserHistory.push("/projects/coupon/summary?activeTab=SCHEDULED"):r.browserHistory.push("/projects/coupon/summary"),this.setState({loading:!0,isCreateCouponSelected:!1,isSummarySelected:!0}),setTimeout(function(){t.setState({loading:!1})},2e3));break;case P.BN_PROMO_SUMMARY:r.browserHistory.push("/projects/coupon/bn-promo-summary"),this.setState({loading:!0}),setTimeout(function(){t.setState({loading:!1})},2e3)}}},{key:"tabUpdate",value:function(e){switch(e){case P.CREATE_COUPON:case P.BN_PROMO:this.setState({showCreateCoupon:!0,showCreateBNPromo:!1});break;case P.COUPON_SUMMARY:this.setState({showCreateCoupon:!1,showCreateBNPromo:!0,titleActionText:"Create",couponError:null},function(){window.scrollTo(0,0)});break;case P.BN_PROMO_SUMMARY:this.setState({showCreateCoupon:!1,showCreateBNPromo:!0})}}},{key:"render",value:function(){var t=this,e=o.default.Children.map(this.props.children,function(e){return o.default.cloneElement(e,{onError:t.onCouponError,onViewChange:t.onViewChange,tabUpdate:t.tabUpdate})});return o.default.createElement("div",{className:"coupon-layout"},o.default.createElement("div",{className:"container-fluid"},this.state.couponError&&o.default.createElement("div",null,o.default.createElement("div",null,o.default.createElement(u.default,{messages:["There are one or more errors with your form. Please review and resubmit."],type:"error-white"}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement("header",{className:"sidelines reports"},o.default.createElement("h1",null,"My Promotions")))),o.default.createElement("div",{className:"left-sidebar-container"},o.default.createElement("div",{className:"sidebar-left"},o.default.createElement(d.default,null),o.default.createElement("div",{tabIndex:"0",onKeyDown:this.makeClick,className:"btn btn-secondary btn-block",onClick:function(){return t.onSidebarNavigation("/"+p.Base)}},o.default.createElement("span",null,"Manage Projects")),o.default.createElement("div",{tabIndex:"0",onKeyDown:this.makeClick,className:"btn btn-secondary btn-block",onClick:function(){return t.onSidebarNavigation("/"+p.Base+"/"+p.Series)}},o.default.createElement("span",null,"Manage Series")))),o.default.createElement("section",null,o.default.createElement("div",{className:"content-right panel"},o.default.createElement("div",{className:"panel-body"},o.default.createElement("div",{className:"panel-section coupon-content"},o.default.createElement("div",null,o.default.createElement("ul",{className:"nav nav-tabs"},o.default.createElement("li",{className:(0,i.default)("coupon-navs",{active:this.state.showCreateCoupon}),tabIndex:"0",onKeyDown:this.makeClick,onClick:function(){return t.onViewChange(P.CREATE_COUPON)}},o.default.createElement("a",null,this.state.titleActionText," Promotion")),o.default.createElement("li",{className:(0,i.default)("coupon-navs",{active:this.state.showCreateBNPromo}),tabIndex:"0",onKeyDown:this.makeClick,onClick:function(){return t.onViewChange(P.COUPON_SUMMARY)}},o.default.createElement("a",null,"Summary")))),e,this.state.loading&&o.default.createElement(h.default,null)))))))}}])&&v(t.prototype,a),n&&v(t,n),l}();t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=o(a(0)),p=a(2),m=o(a(34)),h=o(a(4)),s=n(a(33)),y=(o(a(62)),n(a(11)),n(a(17)),o(a(147)),o(a(121))),r=n(a(25)),b=o(a(72)),l=o(a(248)),u=n(a(15)),g=o(a(1623)),i=n(a(84)),c=n(a(86)),v=o(a(140)),d=n(a(83)),E=o(a(8)),S=o(a(647)),k=o(a(3)),P=o(a(192)),w=n(a(59)),O=o(a(56)),C=o(a(1)),N=n(a(31)),_=n(a(14));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var A="project",B="series",x=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=j(o).call(this,e))||"object"!==T(n)&&"function"!=typeof n?L(a):n).state={filterOption:i.FILTER_PARAMS.default,newBookTriggered:!1,page:null,preOrderPutOnSaleError:null,preOrderWarnings:v.default.warnings,projectId:null,projectGroups:[],projectGroupsLoaded:!1,putOnSaleError:null,query:null,showPreOrderPutOnSaleError:!1,showPricingError:!1,sortOption:null,statusOption:i.STATUS_PARAMS.default,toggle:!1,totalPages:null,pageBanner:!1},t.paginationSupport=new l.default(t.layoutType()===B?i.SORT_PARAMS.ascending:i.SORT_PARAMS.default,window.location.pathname),t.onSortChange=t.onSortChange.bind(L(L(t))),t.onPageChange=t.onPageChange.bind(L(L(t))),t.onProjectGroupsChange=t.onProjectGroupsChange.bind(L(L(t))),t.onProjectDeletedFromGroup=t.onProjectDeletedFromGroup.bind(L(L(t))),t.onSetSaleStatusError=t.onSetSaleStatusError.bind(L(L(t))),t.onStartProjectDelete=t.onStartProjectDelete.bind(L(L(t))),t.onSwitchLayout=t.onSwitchLayout.bind(L(L(t))),t.onToggleProjects=t.onToggleProjects.bind(L(L(t))),t.onCreateCouponClick=t.onCreateCouponClick.bind(L(L(t))),t.onSiteModuleDisplay=t.onSiteModuleDisplay.bind(L(L(t))),t.makeClick=t.makeClick.bind(L(L(t))),t.onProfileUpdated=t.onProfileUpdated.bind(L(L(t))),t.getBanners=t.getBanners.bind(L(L(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(o,f.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){setTimeout(function(){_.getPageBanners()},500);w.onPageSiteModuleDisplay("LEFT_NAV_PROJECT","projects"),this.loadGroups(this.props.location.query.page,this.props.location.query.sort,this.state.filterOption,this.props.location.query.q);var e={eventInfo:{eventName:"Page View",eventAction:"pageView",timeStamp:new Date},category:{primaryCategory:"Pages"},attributes:{page:{pageInfo:{previousPageName:null,pageName:"bn press|projects",pageType:"bn press:projects",destinationURL:window.location.href,referringURL:null}}}};r.omnitureActionInvoked(e,"onPageView")}},{key:"componentWillMount",value:function(){v.default.addProjectGroupsChangedListener(this.onProjectGroupsChange),v.default.addProjectGroupsProjectDeletedFromGroupListener(this.onProjectDeletedFromGroup),E.default.addSetSaleStatusErrorListener(this.onSetSaleStatusError),E.default.addStartDeleteListener(this.onStartProjectDelete),c.reset(),O.default.addSiteModuleDisplayListener(this.onSiteModuleDisplay),h.default.addProfileUpdatedListener(this.onProfileUpdated),E.default.addPageBannersListener(this.getBanners)}},{key:"componentWillReceiveProps",value:function(e){this.paginationSupport=new l.default(this.layoutType()===B?i.SORT_PARAMS.ascending:i.SORT_PARAMS.default,e.location.pathname),this.loadGroups(e.location.query.page,e.location.query.sort,this.state.filterOption,e.location.query.q)}},{key:"componentWillUnmount",value:function(){v.default.removeProjectGroupsChangedListener(this.onProjectGroupsChange),v.default.removeProjectGroupsProjectDeletedFromGroupListener(this.onProjectDeletedFromGroup),E.default.removeSetSaleStatusErrorListener(this.onSetSaleStatusError),r.pageNameChanged("bn press|projects"),O.default.removeSiteModuleDisplayListener(this.onSiteModuleDisplay),h.default.removeProfileUpdatedListener(this.onProfileUpdated),E.default.removePageBannersListener(this.getBanners)}},{key:"getBanners",value:function(){var e=E.default.banners();if(e.data&&Array.isArray(e.data.setting))if(0<e.data.setting.length){var t=f.default.createElement("span",{dangerouslySetInnerHTML:{__html:e.data.setting[0].SettingValue}});this.setState({pageBanner:t,pageBannerColor:e.data.setting[0].SettingId})}else this.setState({pageBanner:!1,pageBannerColor:null});document.documentElement.style.setProperty("--message-color",this.state.pageBannerColor)}},{key:"onProfileUpdated",value:function(e){e&&setTimeout(function(){return N.toggleToast(!0,"Thank you for subscribing")},0)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onSiteModuleDisplay",value:function(){this.result3=O.default.getSiteModuleDisplay(),this.setState({siteModuledisplay:this.result3.result3.data})}},{key:"onPageChange",value:function(e){this.paginationSupport.onPageChange(e,this.state.page,this.state.sortOption),this.setState({toggle:!1})}},{key:"onSetSaleStatusError",value:function(e){var t=e.response[0].projectId,a=e.response[0].code,n=v.default.findProjectById(t).title,o="/"+s.Base+"/"+t+"/"+s.Details+"/";if("COST_CHANGE_SALE_ERROR"===u.ERRORS[a]){var r=f.default.createElement("p",null,"There was a recent print cost change to ",f.default.createElement("i",null,n),"'s size and type. Please go to ",f.default.createElement(p.Link,{to:o+s.DetailsPricing},"Pricing")," and enter a price that meets the new minimum retail price.");window.scrollTo(0,0),this.setState({showPricingError:!0,projectId:t,putOnSaleError:r})}else if(u.ISBN_ERRORS.includes(a)){var l=f.default.createElement("p",null,"Sorry, the ISBN for ",f.default.createElement("i",null,n)," is already registered with NOOK/Barnes & Noble or another publishing platform. You will have to ",f.default.createElement(p.Link,{to:o+s.DetailsIsbn},"enter another ISBN")," that has not already been used or create a free ISBN with Barnes & Noble Press.");window.scrollTo(0,0),this.setState({showIsbnError:!0,projectId:t,isbnError:l})}else if("PREORDER_SALE_ERROR"===u.ERRORS[a]){var i=f.default.createElement("p",null,"Please update your pre-order publication date as it needs to be 10 business days from today, and then put your book on sale.");window.scrollTo(0,0),this.setState({preOrderPutOnSaleError:i,showPreOrderPutOnSaleError:!0})}else this.setState({showPricingError:!1,projectId:null,putOnSaleError:null})}},{key:"onStartProjectDelete",value:function(){this.setState({projectGroupsLoaded:!1})}},{key:"onSortChange",value:function(e){var t=this.refs.searchFilters.refs.projectSearch.getValue();t&&0<t.length?this.refs.searchFilters.onFilterSearchSortSubmit():this.paginationSupport.onSortChange(e,this.state.sortOption)}},{key:"onProjectGroupsChange",value:function(e){var t=this;if(e&&e.shouldRefresh)this.loadGroups(this.props.location.query.page,this.props.location.query.sort,this.state.filterOption,this.props.location.query.q);else{var a=v.default.warnings,n=v.default.projectGroups,o=(v.default.deletedProjectCount,Math.ceil(v.default.totalCount/10));this.paginationSupport.updateLocation(o,this.state.page,this.state.sortOption),this.setState({totalPages:o,preOrderWarnings:a,projectGroups:n,projectGroupsLoaded:!0},function(){0<n.length&&t.refs.searchFilters.refs.projectSort.setValue(t.state.sortOption),window.scrollTo(0,0)})}}},{key:"onProjectDeletedFromGroup",value:function(){c.query(this.state.sortOption,this.state.page,10,this.layoutType()===B,this.state.query),this.setState({projectGroups:v.default.projectGroups})}},{key:"onToggleProjects",value:function(){var e=this;this.setState({toggle:!this.state.toggle},function(){return c.toggleProjects(e.state.toggle)})}},{key:"onCreateCouponClick",value:function(){p.browserHistory.push("/"+d.Base+"/"+d.Coupon+"?tab=manage")}},{key:"loadGroups",value:function(e,t,a,n){var o=this.paginationSupport.setPaginationOptions(e,t,i.SORT_PARAMS,null,null,n);this.setState({page:o.page,query:o.query,sortOption:o.sortOption,totalPages:null,projectGroups:[],projectGroupsLoaded:!1}),c.query(o.sortOption,o.page,10,this.layoutType()===B,o.query)}},{key:"errorInfo",value:function(){var t={count:0,title:null};return this.state.projectGroups&&this.state.projectGroups.length&&this.state.projectGroups.forEach(function(e){e.projects.forEach(function(e){e.inErrorStatus&&(t.count++,1===t.count&&(t.title=e.title))})}),t}},{key:"layoutType",value:function(){return window.location.href.includes("series")?B:A}},{key:"onSwitchLayout",value:function(){var e=this.layoutType()===B?"/"+d.Base:"/"+d.Base+"/"+d.Series;p.browserHistory.push(e),this.paginationSupport.updateUrl(e)}},{key:"render",value:function(){var a=this,n=!0,e="--",t=0,o=h.default.getUser(),r=this.layoutType()===B,l=this.state.projectGroups.map(function(e){var t=f.default.createElement(g.default,{project:e,key:e.id,id:e.id,query:a.state.query,initExpanded:n&&1===a.state.page,isSeries:r});return n=!1,t}),i=this.state.toggle||null===this.state.toggle?f.default.createElement("span",{tabIndex:"0",onKeyDown:this.makeClick},f.default.createElement("div",{className:"expand-collapse-text"},f.default.createElement("p",null,"Collapse All")),f.default.createElement("div",{className:"icon-remove"})):f.default.createElement("span",{tabIndex:"0",onKeyDown:this.makeClick},f.default.createElement("div",{className:"expand-collapse-text"},f.default.createElement("p",null,"Expand All")),f.default.createElement("div",{className:"icon-add"}));v.default.totalCount&&(e=0<v.default.totalCount?v.default.totalProjectsCount:0),v.default.deletedProjectCount&&(t=v.default.deletedProjectCount);var s=null,u=this.state.preOrderWarnings;u&&(1===u.length?s=f.default.createElement("span",{dangerouslySetInnerHTML:{__html:u.find(function(e){return"1"===e.code}).description}}):1<u.length&&(s=0<o.spbPreSellDays?f.default.createElement("span",null,"You have more than one pre-order title that requires your attention. Please see below for more details.",f.default.createElement("br",null),f.default.createElement("br",null)," NOTE: For eBooks, you must upload your final files 72 hours before the publication date. For Print Books, you must upload your final files at least 10 business days before the publication date. If youâ€™re unable to do so, you must push your publication date or your book will go off sale. Please disregard this message, if you have already uploaded your final files."):f.default.createElement("span",null,"You have more than one pre-order title that requires your attention. Please see below for more details. ",f.default.createElement("br",null),f.default.createElement("br",null)," NOTE: For eBooks, you must upload your final files 72 hours before the publication date. Please disregard this message, if you have already uploaded your final files.")));var c=r?[]:this.errorInfo(),d=null;return 1===c.count?d=f.default.createElement("span",null,"Your book ",f.default.createElement("em",null,c.title)," requires attention before it can be published or purchased. Please see below to make changes to your book."):1<c.count&&(d=f.default.createElement("span",null,"You have several books that require your attention before they can be published or purchased. Please see below to make changes to your books.")),f.default.createElement("div",null,this.state.projectGroupsLoaded&&(0<this.state.projectGroups.length||this.state.query)&&f.default.createElement("div",{className:"left-sidebar-wrapper"},f.default.createElement("div",{className:"left-sidebar-container projects"},this.state.pageBanner&&f.default.createElement("div",{style:{color:this.state.pageBannerColor},className:(0,C.default)("extra-color ",{"color-container":this.state.pageBanner})},f.default.createElement(m.default,{messages:[this.state.pageBanner],type:"alert"})),f.default.createElement(P.default,{status:o.vendorStatus}),s&&f.default.createElement("div",null,f.default.createElement(m.default,{messages:[s],type:"error"})),d&&f.default.createElement("div",null,f.default.createElement(m.default,{messages:[d],type:"error-white"})),this.state.showPricingError&&f.default.createElement(m.default,{messages:[this.state.putOnSaleError],type:"error"}),this.state.showIsbnError&&f.default.createElement(m.default,{messages:[this.state.isbnError],type:"error"}),this.state.showPreOrderPutOnSaleError&&f.default.createElement(m.default,{messages:[this.state.preOrderPutOnSaleError],type:"error"}),f.default.createElement("header",{className:"sidelines"},f.default.createElement("h1",null,"My ",r?"Series":"Projects")),f.default.createElement("div",{className:"sidebar-left"},f.default.createElement(y.default,null),f.default.createElement("div",{tabIndex:"0",onKeyDown:this.makeClick,className:"btn btn-secondary btn-block hidden-xs",onClick:this.onCreateCouponClick},f.default.createElement("span",null,"Manage Promotions")),f.default.createElement("div",{tabIndex:"0",onKeyDown:this.makeClick,className:"btn btn-secondary btn-block hidden-xs",onClick:this.onSwitchLayout},f.default.createElement("span",null,"Manage ",r?"Projects":"Series")),!r&&f.default.createElement("h2",{className:"hidden-xs total-books"},"Total Books: ",e),f.default.createElement(S.default,{ref:"searchFilters",query:this.state.query,isSeriesLayout:r,filterOption:this.state.filterOption,statusOption:this.state.statusOption,sortOption:this.state.sortOption,onSortChange:this.onSortChange}),f.default.createElement("div",{className:"btn btn-secondary btn-block visible-xs",onClick:this.onCreateCouponClick},f.default.createElement("span",null,"Manage Promotions")),f.default.createElement("div",{className:"btn btn-secondary btn-block visible-xs",onClick:this.onSwitchLayout},f.default.createElement("span",null,"Manage ",r?"Projects":"Series")),this.state.siteModuledisplay&&f.default.createElement("div",{className:(0,C.default)("additional marketing-content np-mkt-included-content text-block hidden-xs "),dangerouslySetInnerHTML:{__html:this.state.siteModuledisplay}})),0<this.state.projectGroups.length&&f.default.createElement("div",{className:"content-right"},f.default.createElement("div",null,f.default.createElement("div",{className:"expand-collapse clearfix",onClick:this.onToggleProjects},i),f.default.createElement("div",{className:"pagination-top"},f.default.createElement(b.default,{currentPage:this.state.page,totalPages:this.state.totalPages,onChange:this.onPageChange}))),l,f.default.createElement(b.default,{currentPage:this.state.page,totalPages:this.state.totalPages,onChange:this.onPageChange})),0===this.state.projectGroups.length&&f.default.createElement("div",{className:"content-right"},f.default.createElement("p",{className:"text-center no-results"},"We found no books within series matching your search criteria. Please try another search. ",f.default.createElement("br",null),f.default.createElement("br",null),"Search Term: ",f.default.createElement("strong",null,this.state.query||"None Provided"),f.default.createElement("br",null),f.default.createElement("br",null))),this.state.siteModuledisplay&&f.default.createElement("div",{className:(0,C.default)("additional marketing-content np-mkt-included-content text-block visible-xs "),dangerouslySetInnerHTML:{__html:this.state.siteModuledisplay}}))),this.state.projectGroupsLoaded&&0===this.state.projectGroups.length&&!this.state.query&&f.default.createElement("div",{className:"empty-projects-wrapper"},this.state.pageBanner&&f.default.createElement("div",{className:(0,C.default)("extra-color ",{"color-container":this.state.pageBanner})},f.default.createElement(m.default,{messages:[this.state.pageBanner],type:"alert"})),f.default.createElement("div",{className:"empty-projects-container"},f.default.createElement(P.default,{status:o.vendorStatus}),f.default.createElement("header",{className:"sidelines"},f.default.createElement("h1",null,"My ",r?"Series":"Projects")),f.default.createElement("div",{className:"empty-projects"},f.default.createElement("h2",null,"You don't have any ",r?"series":"projects"," yet."),f.default.createElement(y.default,{buttonBlock:!1,hiddenXs:!1}),0<t&&f.default.createElement("div",{className:"padding10 total-books"},f.default.createElement(p.Link,{to:"/projects/search?type=ALL&status=RECENTLY_DELETED"},"View your Recently Deleted books"))))),!this.state.projectGroupsLoaded&&f.default.createElement(k.default,null))}}])&&D(t.prototype,a),n&&D(t,n),o}();t.default=x},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=o(a(0)),r=a(2),c=o(a(1)),l=n(a(33)),i=n(a(25)),s=o(a(8)),d=o(a(140)),f=(n(a(86)),n(a(14))),p=o(a(645));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?g(a):n).state={clickTriggered:!1,toggle:t.props.initExpanded},t.onProjectChanged=t.onProjectChanged.bind(g(g(t))),t.onNewProjectClicked=t.onNewProjectClicked.bind(g(g(t))),t.onToggle=t.onToggle.bind(g(g(t))),t.onHeaderClick=t.onHeaderClick.bind(g(g(t))),t.makeClick=t.makeClick.bind(g(g(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,u.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){s.default.addProjectChangedListener(this.onProjectChanged),d.default.addProjectGroupsToggledListener(this.onToggle)}},{key:"componentWillUnmount",value:function(){s.default.removeProjectChangedListener(this.onProjectChanged),d.default.removeProjectGroupsToggledListener(this.onToggle)}},{key:"onProjectChanged",value:function(){this.state.clickTriggered?this.setState({clickTriggered:!1},function(){return r.browserHistory.push("/"+l.Base)}):this.setState({clickTriggered:!1})}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"hasError",value:function(){return!this.props.isSeries&&this.props.project.projects.some(function(e){return e.inErrorStatus})}},{key:"hasPreOrderIssue",value:function(){return!this.props.isSeries&&this.props.project.projects.some(function(e){return e.preOrderIssue})}},{key:"onNewProjectClicked",value:function(){f.startNewProject();var e=this.props.project,t=s.default.project();t.isGroupConfirmed=!0,t.grouped=!0,t.groupProjectId=e.projects[0].id,t.preOrder=e.projects[0].preOrder,t.title=e.title;var a={eventInfo:{eventName:"Start Different Version Click",eventAction:"startDifferentVersionClick",timeStamp:new Date},category:{primaryCategory:"My Projects"}};i.omnitureActionInvoked(a,"onStartDifferentVersionClick"),this.setState({clickTriggered:!0},function(){return f.updateProject(t,!1)})}},{key:"onToggle",value:function(e){this.setState({toggle:e.toggle})}},{key:"onHeaderClick",value:function(){this.setState({toggle:!this.state.toggle})}},{key:"seriesWithHighlightedSearchTerm",value:function(e,t){if(!e||0===e.length||!t)return t;var a=JSON.parse(JSON.stringify(t)),n=new RegExp(e,"ig");return a.seriesName=u.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.seriesName.replace(n,function(e){return'<span class="highlighted">'+e+"</span>"})}}),a}},{key:"render",value:function(){var e,t=this.props,a=t.id,n=t.project,o=t.isSeries,r=t.query,l=this.seriesWithHighlightedSearchTerm(r,n),i="projectGroup"+a,s=o?l.seriesName:n.title;return e=o?n.seriesNumbers.map(function(e){return u.default.createElement(p.default,{isSearchResult:o,isSeries:o,seriesNumber:e.seriesNumber,projects:e.projects,key:e.projects[0].id,query:r})}):n.projects.map(function(e){return u.default.createElement(p.default,{isSearchResult:o,project:e,key:e.id})}),u.default.createElement("div",{className:"group-collapse project-collapse"},u.default.createElement("header",{tabIndex:"0",onKeyDown:this.makeClick,className:(0,c.default)({collapsed:!this.state.toggle},{"has-error":this.hasError()},{"has-preorder-error":this.hasPreOrderIssue()}),"aria-controls":i,onClick:this.onHeaderClick},u.default.createElement("div",{className:"group-collapse-left"},u.default.createElement("h2",null,u.default.createElement("span",null,s)," ",!o&&u.default.createElement("small",null,n.authorName?"by "+n.authorName:""),this.hasPreOrderIssue()&&!o&&u.default.createElement("span",{className:"pre-order"},"[Pre-Order]"))),u.default.createElement("div",{className:"group-collapse-right"},u.default.createElement("div",{className:"group-collapse-button"},u.default.createElement("span",{className:"icon-add"}),u.default.createElement("span",{className:"icon-remove"})),u.default.createElement("div",{className:"project-versions"},o?n.seriesNumbers.length:n.projects.length," ",o?"Title":"Version",1<(o?n.seriesNumbers.length:n.projects.length)?"s":""))),u.default.createElement("section",{id:i,className:(0,c.default)("collapse clearfix",{in:this.state.toggle,series:o})},e,!o&&1===n.projects.length&&u.default.createElement("div",{className:"project"},u.default.createElement("div",{className:"new-project-button",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onNewProjectClicked},u.default.createElement("div",{className:"plus-icon"},u.default.createElement("span",{className:"sprite plus-lg"})),u.default.createElement("div",{className:"text clampText"},u.default.createElement("p",null,"Start a new version of"),u.default.createElement("p",{className:"title"},n.title))))))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(8)),s=n(a(33)),u=n(a(174)),c=n(a(14)),d=n(a(10)),f=n(a(15)),p=n(a(11)),m=o(a(4));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=b(o).call(this,e))||"object"!==h(n)&&"function"!=typeof n?v(a):n).state={clickTriggered:!1},t.checkBookStatus=t.checkBookStatus.bind(v(v(t))),t.onEditBookClick=t.onEditBookClick.bind(v(v(t))),t.onEditProject=t.onEditProject.bind(v(v(t))),t.makeClick=t.makeClick.bind(v(v(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){i.default.addProjectChangedListener(this.onEditProject)}},{key:"componentWillUnmount",value:function(){i.default.removeProjectChangedListener(this.onEditProject)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"checkBookStatus",value:function(){var e=this.props.project,t=u.getSummaryUrl(e.id);return!e.isSPB&&!e.isPOD||e.getBookSizeAndTypeStatus(!0)||(t="/"+s.Base+"/"+e.id+"/"+s.SizeAndType),t}},{key:"onEditProject",value:function(){var e=this;this.state.clickTriggered?this.setState({clickTriggered:!1},function(){return setTimeout(function(){l.browserHistory.push(e.checkBookStatus())},0)}):this.setState({clickTriggered:!1})}},{key:"onEditBookClick",value:function(){var a=this,n=this.props.project;!this.props.readOnly&&this.props.project.isSPB&&this.props.project.showEditModal?d.showEditOnSaleBookModal(function(e,t){e&&a.setState({clickTriggered:!0},function(){n.isSPB&&n.showEditModal&&n.status===f.PROJECT_STATUSES.ONSALE&&m.default.hasCustomSamplingPermission(p.EDIT_SPB_RETIRED)?-1!==window.location.href.search("search")?l.browserHistory.push("/"+s.Base+"/"+n.id+"/"+s.Summary):l.browserHistory.push("/"+s.Base+"/"+n.id+"/summary"):c.setEditStatus(a.props.project.id)})},n):l.browserHistory.push(this.checkBookStatus())}},{key:"render",value:function(){return this.props.text?r.default.createElement("a",{onClick:this.onEditBookClick,tabIndex:"0",onKeyDown:this.makeClick},this.props.text):r.default.createElement("a",{onClick:this.onEditBookClick,tabIndex:"0",onKeyDown:this.makeClick},"Edit",r.default.createElement("span",{className:"extra hidden-text"},"Â Book"))}}])&&y(t.prototype,a),n&&y(t,n),o}();t.default=E},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(6)),i=o(a(23)),n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(84));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?f(a):n).onSubmit=t.onSubmit.bind(f(f(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,r.default.Component),t=o,(a=[{key:"getValue",value:function(){return this.refs.sort.value()}},{key:"setValue",value:function(e){this.refs.sort.setValue(e)}},{key:"onSubmit",value:function(){}},{key:"render",value:function(){return r.default.createElement("div",{className:"project-list-sort"},r.default.createElement(l.default,{ref:"form",onSubmit:this.onSubmit},r.default.createElement(i.default,{ref:"sort",name:"sort",label:"Sort by",disableValidationMessages:!0,initValue:this.props.initValue,onChange:this.props.onChange,options:this.props.isSeriesLayout?h:m})))}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=p;var m=[{value:n.SORT_PARAMS.newest,label:"Last Updated: New to Old"},{value:n.SORT_PARAMS.oldest,label:"Last Updated: Old to New"},{value:n.SORT_PARAMS.ascending,label:"Title: A-Z"},{value:n.SORT_PARAMS.descending,label:"Title: Z-A"}],h=[{value:n.SORT_PARAMS.ascending,label:"Title: A-Z"},{value:n.SORT_PARAMS.descending,label:"Title: Z-A"}]},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a(0)),l=s(a(6)),i=s(a(23)),n=(o(a(86)),s(a(140)),o(a(84)));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,f(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r.default.Component),a=t,(n=[{key:"setValue",value:function(e){this.refs.filter.setValue(e)}},{key:"getValue",value:function(){return this.refs.filter.value()}},{key:"render",value:function(){return r.default.createElement("div",{className:"project-list-sort"},r.default.createElement(l.default,{ref:"form",onSubmit:this.props.onChange},r.default.createElement(i.default,{ref:"filter",name:"filter",label:"Filter by Book Type",disableValidationMessages:!0,initValue:this.props.initValue,onChange:this.props.onChange,options:h})))}}])&&c(a.prototype,n),o&&c(a,o),t}();t.default=m;var h=[{value:n.FILTER_PARAMS.all,label:n.FILTER_LABELS[n.FILTER_PARAMS.all]},{value:n.FILTER_PARAMS.eBook,label:n.FILTER_LABELS[n.FILTER_PARAMS.eBook]},{value:n.FILTER_PARAMS.print,label:n.FILTER_LABELS[n.FILTER_PARAMS.print]},{value:n.FILTER_PARAMS.personal,label:n.FILTER_LABELS[n.FILTER_PARAMS.personal]}]},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(a(0)),l=c(a(6)),i=c(a(23)),s=o(a(11)),u=o(a(17)),n=(o(a(86)),c(a(140)),o(a(84)));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,m(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r.default.Component),a=t,(n=[{key:"setValue",value:function(e){this.refs.statusFilter.setValue(e)}},{key:"getValue",value:function(){return this.refs.statusFilter.value()}},{key:"render",value:function(){return r.default.createElement("div",{className:"project-list-sort"},r.default.createElement(l.default,{ref:"form",onSubmit:this.props.onChange},r.default.createElement(i.default,{ref:"statusFilter",name:"statusFilter",label:"Filter by Project Status",disableValidationMessages:!0,initValue:this.props.initValue,onChange:this.props.onChange,options:u.hasFeatureFlag(s.UNARCHIVE)?b:g})))}}])&&f(a.prototype,n),o&&f(a,o),t}();t.default=y;var b=[{value:n.STATUS_PARAMS.all,label:n.STATUS_LABELS[n.STATUS_PARAMS.all]},{value:n.STATUS_PARAMS.onSale,label:n.STATUS_LABELS[n.STATUS_PARAMS.onSale]},{value:n.STATUS_PARAMS.offSale,label:n.STATUS_LABELS[n.STATUS_PARAMS.offSale]},{value:n.STATUS_PARAMS.inProgress,label:n.STATUS_LABELS[n.STATUS_PARAMS.inProgress]},{value:n.STATUS_PARAMS.inReview,label:n.STATUS_LABELS[n.STATUS_PARAMS.inReview]},{value:n.STATUS_PARAMS.readyToOrder,label:n.STATUS_LABELS[n.STATUS_PARAMS.readyToOrder]},{value:n.STATUS_PARAMS.needsAttention,label:n.STATUS_LABELS[n.STATUS_PARAMS.needsAttention]},{value:n.STATUS_PARAMS.publishing,label:n.STATUS_LABELS[n.STATUS_PARAMS.publishing]},{value:n.STATUS_PARAMS.takingOffSale,label:n.STATUS_LABELS[n.STATUS_PARAMS.takingOffSale]},{value:n.STATUS_PARAMS.editing,label:n.STATUS_LABELS[n.STATUS_PARAMS.editing]},{value:n.STATUS_PARAMS.correcting,label:n.STATUS_LABELS[n.STATUS_PARAMS.correcting]},{value:n.STATUS_PARAMS.recentlyDeleted,label:n.STATUS_LABELS[n.STATUS_PARAMS.recentlyDeleted]}],g=[{value:n.STATUS_PARAMS.all,label:n.STATUS_LABELS[n.STATUS_PARAMS.all]},{value:n.STATUS_PARAMS.onSale,label:n.STATUS_LABELS[n.STATUS_PARAMS.onSale]},{value:n.STATUS_PARAMS.offSale,label:n.STATUS_LABELS[n.STATUS_PARAMS.offSale]},{value:n.STATUS_PARAMS.inProgress,label:n.STATUS_LABELS[n.STATUS_PARAMS.inProgress]},{value:n.STATUS_PARAMS.inReview,label:n.STATUS_LABELS[n.STATUS_PARAMS.inReview]},{value:n.STATUS_PARAMS.readyToOrder,label:n.STATUS_LABELS[n.STATUS_PARAMS.readyToOrder]},{value:n.STATUS_PARAMS.needsAttention,label:n.STATUS_LABELS[n.STATUS_PARAMS.needsAttention]},{value:n.STATUS_PARAMS.publishing,label:n.STATUS_LABELS[n.STATUS_PARAMS.publishing]},{value:n.STATUS_PARAMS.takingOffSale,label:n.STATUS_LABELS[n.STATUS_PARAMS.takingOffSale]},{value:n.STATUS_PARAMS.editing,label:n.STATUS_LABELS[n.STATUS_PARAMS.editing]},{value:n.STATUS_PARAMS.correcting,label:n.STATUS_LABELS[n.STATUS_PARAMS.correcting]}]},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n},l=a(2);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"route-not-found"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12"},r.default.createElement("h1",null,"Oops! We're sorry"))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-lg-12"},r.default.createElement("p",null,"We can't find the page you're looking for",r.default.createElement("br",null),"Try double-checking the web address, or head to the ",r.default.createElement(l.Link,{to:"/"},"homepage")))))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),f=n(a(68)),i=n(a(109)),s=o(a(74)),u=o(a(4)),c=o(a(6)),d=n(a(11)),p=n(a(84)),m=n(a(60)),h=o(a(38)),y=o(a(46)),b=(o(a(61)),o(a(1630))),g=o(a(1632)),v=o(a(1633)),E=o(a(3)),S=o(a(135)),k=n(a(75));a(7);function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=O(o).call(this,e))||"object"!==P(n)&&"function"!=typeof n?N(a):n).state={data:"WHAT IS READING DATA? ",definition:"This section gives you insight into how customers consume your content â€“ how quickly they open your book after purchase, average time spent reading your book, and average completion rate.",bookList:"",text:"",eaaSearchStatus:!0,filterOption:p.FILTER_PARAMS.default,bestBook:"",searchedBook:"",consumptionResult:"",consumptionBarResult:"",loadingConsumption:!1,loadingPurchase:!1,loadingDounut:!1,eaaSubscriptionData:""},t.onClickReadingData=t.onClickReadingData.bind(N(N(t))),t.onClickSiteData=t.onClickSiteData.bind(N(N(t))),t.onClickCustomerData=t.onClickCustomerData.bind(N(N(t))),t.onBestBookLoaded=t.onBestBookLoaded.bind(N(N(t))),t.onAverageTimeToOpenLoaded=t.onAverageTimeToOpenLoaded.bind(N(N(t))),t.onSuggestionSelected=t.onSuggestionSelected.bind(N(N(t))),t.stoploader=t.stoploader.bind(N(N(t))),t.eaaSubscriptionLoaded=t.eaaSubscriptionLoaded.bind(N(N(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(o,r.default.Component),t=o,(a=[{key:"stoploader",value:function(){this.setState({loadingConsumption:!1,loadingPurchase:!1,loadingDounut:!1}),this.forceUpdate()}},{key:"onSuggestionSelected",value:function(e){var t=768<=window.innerWidth?"project-list-search":"Mobile-Search",a=document.getElementsByClassName(t)[0].getElementsByClassName("input-area")[0],n=a.getElementsByTagName("input")[0].value,o=a.getElementsByTagName("input")[0].id;if(document.getElementsByClassName(o).length&&"no match"==document.getElementsByClassName(o)[0].firstElementChild.innerText.toLowerCase())return a.getElementsByTagName("input")[0].value="",document.getElementById(o).parentElement.parentElement.classList.add("error"),document.getElementById(o).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.classList.add("nomatch-active"),document.getElementById(o).parentElement.parentElement.querySelector(".message").innerHTML="Please search for your Title, ISBN or Series",setTimeout(function(){a.getElementsByTagName("input")[0].value=""},500),document.getElementsByClassName(o)[0].parentElement.parentElement.style.display="none",this.setState({searchedBook:""}),!0;if((null==e||""==e.newValue)&&""==n)f.getConsumptionData(""),f.getReaderAverageCompletionRate("");else{var r,l=e&&e.currentTarget?e.currentTarget.parentNode.firstElementChild.lastElementChild.lastElementChild.lastElementChild.firstElementChild.firstElementChild:null,i=null!==l?l.innerText:"";if(void 0===e)return;if(r=void 0===e.newValue?i:e.newValue,e&&e.currentTarget){var s=768<=window.innerWidth?0:1,u=document.getElementsByClassName("options-dropdown")[s].getElementsByTagName("UL")[0].getElementsByTagName("LI")[0],c=e.currentTarget.parentNode.firstElementChild.lastElementChild.firstElementChild.value;if(void 0!==u)u.click();else if(""!==c&&null==u)return}if(""!==r){var d=h.default.findProjectForEaa(r);null!=d&&(f.getConsumptionData(d.title),f.getReaderAverageCompletionRate(d.title),this.setState({searchedBook:r}))}else f.getConsumptionData(""),f.getReaderAverageCompletionRate("")}this.setState({loadingConsumption:!0,loadingPurchase:!0,loadingDounut:!0}),this.forceUpdate()}},{key:"componentWillMount",value:function(){S.default.addEaaSubscriptionListener(this.eaaSubscriptionLoaded),s.default.addBestBookLoadedListener(this.onBestBookLoaded),s.default.addAverageTimeToOpenListener(this.onAverageTimeToOpenLoaded)}},{key:"componentWillUnmount",value:function(){S.default.removeEaaSubscriptionListener(this.eaaSubscriptionLoaded),s.default.removeBestBookLoadedListener(this.onBestBookLoaded),s.default.removeAverageTimeToOpenListener(this.onAverageTimeToOpenLoaded)}},{key:"componentDidMount",value:function(){k.getEaaSubscription(),m.loadEaaSearches(this.state.filterOption),f.getBestBook(),f.getAverageTimeToOpen(""),f.getReaderAverageCompletionRate(""),f.getConsumptionData("")}},{key:"onBestBookLoaded",value:function(){var e=s.default.bestBookData();this.setState({bestBook:e.result.title})}},{key:"onAverageTimeToOpenLoaded",value:function(){var e=s.default.averageTime();this.setState({bookList:e})}},{key:"onOver",value:function(e){this.setState({text:e.title})}},{key:"onClickCustomerData",value:function(e){l.browserHistory.push(e)}},{key:"onClickReadingData",value:function(e){l.browserHistory.push(e)}},{key:"onClickSiteData",value:function(e){l.browserHistory.push(e)}},{key:"eaaSubscriptionLoaded",value:function(){var e=S.default.eaaSubscription();this.setState({eaaSubscriptionData:e})}},{key:"parseMillisecondsIntoReadableTime",value:function(e){var t=e/36e5,a=Math.floor(t),n=9<a?a:"0"+a,o=60*(t-a),r=Math.floor(o),l=9<r?r:"0"+r,i=60*(o-r);Math.floor(i);return n+"hours,  "+l+"minutes"}},{key:"render",value:function(){var e,t,a,n=this;return this.state.eaaSubscriptionData&&(e=this.state.eaaSubscriptionData.result,t=new Date(e.resetDate).getTime()-(new Date).getTime()),a=!!u.default.hasEaaPermission()&&u.default.hasEaaPermission().includes(d.READING),r.default.createElement("div",null,a&&this.state.bestBook&&r.default.createElement("div",{className:"left-sidebar-wrapper analytics-layout"},r.default.createElement("div",{className:"left-sidebar-container projects"},r.default.createElement("header",{className:"sidelines padding-reading-table"},r.default.createElement("h1",null,"My Analytics Dashboard")),r.default.createElement("div",{className:"sidebar-left"}),r.default.createElement("div",{className:"content-right"},r.default.createElement("div",{className:"desktop-Search col-sm-12 project-list-search project-sort-options search-box search-icon-eaa"},r.default.createElement(c.default,null,r.default.createElement(y.default,{label:"Search Book by Title, ISBN, Series",ref:"projectSearch",defaultDropdownSelection:!0,filterOption:this.state.filterOption,onSubmit:this.onSuggestionSelected,eaaSearch:this.state.eaaSearchStatus,setBestBook:!0,initValue:this.state.bestBook,noValue:"true",firstRendor:!0})))),r.default.createElement("div",{className:"sidebar-left"},r.default.createElement("div",{className:"customer-display"},u.default.hasEaaPermission().includes(d.CUSTOMER)&&r.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return n.onClickCustomerData("/"+i.Base)}},r.default.createElement("span",null,"Customer Data")),u.default.hasEaaPermission().includes(d.READING)&&r.default.createElement("div",{className:"btn btn-new-project-analytics btn-block",onClick:function(){return n.onClickReadingData("/"+i.Base+"/"+i.ReadingData)}},r.default.createElement("span",null,"Reading Data")),u.default.hasEaaPermission().includes(d.SITE)&&r.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return n.onClickSiteData("/"+i.Base+"/"+i.SiteData)}},r.default.createElement("span",null,"Site Data"))),r.default.createElement("div",{className:" m-0 p-0  mobile-display"},u.default.hasEaaPermission().includes(d.CUSTOMER)&&r.default.createElement("div",{className:"col-33"},r.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return n.onClickCustomerData("/"+i.Base)}},r.default.createElement("span",null,"Customer Data"))),u.default.hasEaaPermission().includes(d.READING)&&r.default.createElement("div",{className:"col-33"},r.default.createElement("div",{className:"btn btn-new-project-analytics btn-block",onClick:function(){return n.onClickReadingData("/"+i.Base+"/"+i.ReadingData)}},r.default.createElement("span",null,"Reading Data"))),u.default.hasEaaPermission().includes(d.SITE)&&r.default.createElement("div",{className:"col-33"},r.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return n.onClickSiteData("/"+i.Base+"/"+i.SiteData)}},r.default.createElement("span",null,"Site Data")))),r.default.createElement("div",{className:"analytics-mar30 analytics-mar30-mobile"},r.default.createElement("p",{className:"analytics-data-text"},this.state.data),r.default.createElement("p",{className:"analytics-data-define"},this.state.definition," "),r.default.createElement("br",null),r.default.createElement("p",{className:"analytics-data-define"},"Please Note: This information derives from the last 2 years of data."),r.default.createElement("div",{className:"searches-remaining"},r.default.createElement("span",{className:"searches-remaining-bold"},e&&parseInt(e.dailyLimit)-parseInt(e.usageCount))," SEARCHES REMAINING",r.default.createElement("p",{className:"search-remaining-text"},"Search limit is based on incurred costs on B&N Press when processing data feeds."),r.default.createElement("p",{className:"search-reset"},"Searches Reset: ",e&&e.resetDate&&t?this.parseMillisecondsIntoReadableTime(t):"")," "))),r.default.createElement("div",{className:"Mobile-Search col-sm-4 project-list-search project-sort-options search-box search-icon-eaa"},r.default.createElement(c.default,null,r.default.createElement(y.default,{label:"Search Book by Title, ISBN, Series",ref:"projectSearch",defaultDropdownSelection:!0,filterOption:this.state.filterOption,onSubmit:this.onSuggestionSelected,eaaSearch:this.state.eaaSearchStatus,setBestBook:!0,initValue:this.state.bestBook,noValue:"true",firstRendor:!0}))),r.default.createElement("div",{className:"content-right  container article-main"},r.default.createElement("div",{className:"analytics-margin"},r.default.createElement("div",null,r.default.createElement(g.default,{loadingPurchase:this.state.loadingPurchase}))),r.default.createElement(v.default,{stoploader:this.stoploader}),r.default.createElement("div",{className:"COmplition-container"},r.default.createElement(b.default,{bestBook:this.state.searchedBook?this.state.searchedBook:this.state.bestBook,stoploader:this.stoploader,loadingPurchase:this.state.loadingPurchase}))))),!(a&&this.state.bestBook)&&r.default.createElement(E.default,null),!a&&r.default.createElement("div",{className:"no-permission"},"Oops you don't have permission to access this page"))}}])&&w(t.prototype,a),n&&w(t,n),o}();t.default=_},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=(a(2),n(a(68)),n(a(109)),o(a(74))),i=o(a(1631)),s=o(a(341)),u=n(a(57)),c=o(a(61)),d=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function n(){var e,t,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(a=m(n).call(this))||"object"!==f(a)&&"function"!=typeof a?y(t):a).state={bookType:u.BOOK_TYPES.ALL,bookTypeEnabled:!0,isFreeFilterEnabled:!0,complitionList:"",renderDonutData:"",hasNoDonutData:"",loading:!1},e.onBookReadingCompletionDataLoaded=e.onBookReadingCompletionDataLoaded.bind(y(y(e))),e.isEmpty=e.isEmpty.bind(y(y(e))),e}var t,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,r.default.Component),t=n,(a=[{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"componentWillMount",value:function(){l.default.addBookReadingCompletionLoadedListener(this.onBookReadingCompletionDataLoaded),this.setState({loading:!0})}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){l.default.removeBookReadingCompletionLoadedListener(this.onBookReadingCompletionDataLoaded)}},{key:"onBookReadingCompletionDataLoaded",value:function(){var e=l.default.averageCompletionRate();this.isEmpty(e.result)||null==e.result?this.setState({renderDonutData:!1,hasNoDonutData:!0}):0<e.result.eaaAvergaeActivity.timeToRead.eaaInterval.length?this.setState({complitionList:e,renderDonutData:!0,hasNoDonutData:!1}):this.setState({renderDonutData:!1,hasNoDonutData:!0}),this.props.stoploader(),this.setState({loading:!1})}},{key:"render",value:function(){var e,t,a=[];if(this.state.renderDonutData)for(var n=0;n<this.state.complitionList.result.eaaAvergaeActivity.timeToRead.eaaInterval.length;n++)t={name:this.state.complitionList.result.eaaAvergaeActivity.timeToRead.eaaInterval[n].label,y:parseFloat(this.state.complitionList.result.eaaAvergaeActivity.timeToRead.eaaInterval[n].value),colorIndex:n+1},a.push(t);else a=[{y:100,colorIndex:4}],e=r.default.createElement("span",null,r.default.createElement("p",{style:{marginTop:"17px !important"}},"You currently don't have")," data for your readers' average completion rate of",r.default.createElement("br",null)," ",r.default.createElement("p",{className:"reading-title truncate-text-reading-donut"},r.default.createElement("i",null,this.props.bestBook)));return r.default.createElement("div",{className:"analytics-margin article-main"},r.default.createElement("div",{className:"position-relative spin_height"},r.default.createElement("div",{className:"padding-reading-table"},r.default.createElement("h3",{className:"tooltip-description"},"Your Readers' Average Completion Rate by Book"),r.default.createElement(c.default,{info:!0,text:"This graph shows you what percentage of your customers completed reading your book in 1 Week, 2 Weeks, 3 Weeks, 4 Weeks or 5+ Weeks. A greater percentage of customers who complete the book in less time may indicate a greater interest of customers in this book.",trigger:"focus"},r.default.createElement("span",{className:"Whats-This"},"What's This?"))),r.default.createElement("div",{className:"book-consumption"},this.state.renderDonutData&&r.default.createElement("div",{className:"Slide col-sm-12 col-md-12 col-xs-12 col-lg-12 reading-donut",id:"donutChart1"},r.default.createElement(i.default,{data:a,height:355,width:800})),this.state.hasNoDonutData&&r.default.createElement("div",{className:"panel-body donut-analytics"},r.default.createElement("div",{className:"doughnut col-sm-3 col-md-3 col-xs-12"}),r.default.createElement("div",{className:"doughnut col-sm-4 col-md-4 col-xs-12"},r.default.createElement(s.default,{data:a,height:300,width:300,title:e,innersize:"75%"})),r.default.createElement("div",{className:"doughnut col-sm-4 col-md-4 col-xs-12"}))),this.props.loadingPurchase&&r.default.createElement("div",{className:"spinner-area"},r.default.createElement(d.default,{top:210})),this.state.loading&&r.default.createElement("div",{className:"spinner-area"},r.default.createElement(d.default,{top:200}))))}}])&&p(t.prototype,a),o&&p(t,o),n}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(n(a(13)),n(a(188))),i=n(a(148));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){o(t,e,a[e])})}return t}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?p(a):n).getInitialState=t.getInitialState.bind(p(p(t))),t.updateDimensions=t.updateDimensions.bind(p(p(t))),t.updateResize=t.updateResize.bind(p(p(t))),t.state=t.getInitialState(),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"updateDimensions",value:function(){document.getElementById("donutChart1")&&this.updateResize()}},{key:"updateResize",value:function(){300<screen.width&&screen.width<=400&&(document.getElementById("donutChart1").scrollLeft=280),400<screen.width&&screen.width<=450&&(document.getElementById("donutChart1").scrollLeft=240),420<screen.width&&screen.width<=768&&(document.getElementById("donutChart1").scrollLeft=150),768<screen.width&&screen.width<=1024&&(document.getElementById("donutChart1").scrollLeft=85)}},{key:"componentDidMount",value:function(){var t=this;i.default.setOptions({colors:this.props.colors}),window.addEventListener("resize",this.updateDimensions.bind(this)),this.chart=i.default.chart(this.refs.chart,{chart:u({events:{load:function(e){setTimeout(function(){t.updateResize()},1e3)}}},this.state.chart),credits:{enabled:!1},legend:{enabled:!1},title:u({},this.state.title),tooltip:{enabled:!1},plotOptions:{pie:{cursor:"pointer",borderWidth:3,edgeWidth:3,edgeColor:"white",size:"85%",dataLabels:{enabled:!0,softConnector:!1,connectorShape:"crookedLine",crookDistance:"40%",format:'<span class="font-normal">{point.y}%</span> <span class="divide"> | </span> <span class="font-normal">{point.name}</span>'}}},series:[{colorByPoint:!0,innerSize:"60%",data:this.state.data,enableMouseTracking:!1}]})}},{key:"componentWillReceiveProps",value:function(e){var t=this.chart,a=t.series[0];this.props.title!==e.title&&t.setTitle({text:l.default.renderToString(e.title)},"",!0),this.props.data!==e.data&&a.setData(e.data,!0)}},{key:"getInitialState",value:function(){var e={colors:this.props.colors,chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",height:this.props.height,width:this.props.width},data:this.props.data,title:{text:null,useHTML:!0,verticalAlign:"middle"}};return this.props.title&&(e.title.text=l.default.renderToString(this.props.title)),e}},{key:"render",value:function(){var e={height:this.props.height,width:this.props.width};return r.default.createElement("div",{ref:"chart",style:e})}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(a(2),n(a(74))),i=n(a(61)),s=n(a(3)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(75));function n(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function n(){var e,t,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(a=f(n).call(this))||"object"!==c(a)&&"function"!=typeof a?m(t):a).state={ConsumptiondataOpen:[],isOpenDayNull:!1,isOpenWeekNull:!1,isOpenMonthNull:!1,loading:!1},e.consumptionResultLoaded=e.consumptionResultLoaded.bind(m(m(e))),e.isEmpty=e.isEmpty.bind(m(m(e))),e}var t,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,r.default.Component),t=n,(a=[{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"componentWillMount",value:function(){l.default.addConsumptionListener(this.consumptionResultLoaded),this.setState({loading:!0})}},{key:"componentWillUnmount",value:function(){l.default.removeConsumptionListener(this.consumptionResultLoaded)}},{key:"consumptionResultLoaded",value:function(){var e=l.default.consumptionData();u.getEaaSubscription(),this.isEmpty(e.result)?this.setState({ConsumptiondataOpen:[]}):this.setState({ConsumptiondataOpen:e.result.eaaAvergaeActivity.timeToOpen}),null==this.state.ConsumptiondataOpen.day||0==this.state.ConsumptiondataOpen.day?this.setState({isOpenDayNull:!0}):this.setState({isOpenDayNull:!1}),null==this.state.ConsumptiondataOpen.week||0==this.state.ConsumptiondataOpen.week?this.setState({isOpenWeekNull:!0}):this.setState({isOpenWeekNull:!1}),null==this.state.ConsumptiondataOpen.month||0==this.state.ConsumptiondataOpen.month?this.setState({isOpenMonthNull:!0}):this.setState({isOpenMonthNull:!1}),this.setState({loading:!1})}},{key:"render",value:function(){var e=this.state.ConsumptiondataOpen;return r.default.createElement("div",{className:"book-consumption"},r.default.createElement("div",{className:"position-relative"},r.default.createElement("div",{className:"heading-container padding-reading-table"},r.default.createElement("h3",{className:"tooltip-description"},"Your Readersâ€™ Activity by Book"),r.default.createElement(i.default,{info:!0,text:"This graph shows you the average number of times customers opened your book in a Day, Week, and Month.",trigger:"focus"},r.default.createElement("span",{className:"Whats-This"},"What's This?"))),r.default.createElement("div",{className:"consumption-container"},r.default.createElement("div",{className:"container-box open-book"},r.default.createElement("h4",null,"Average number of opens by readers"),r.default.createElement("div",{className:"reading-new-container"},r.default.createElement("div",{className:"reading-sub-middle reading-right"},!this.state.isOpenDayNull&&r.default.createElement("div",{className:"reading-sub-container reading-data-font"},e.day&&e.day.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),r.default.createElement("sub",null,"x")),this.state.isOpenDayNull&&r.default.createElement("div",{className:"reading-sub-container reading-data-font"},"-"),r.default.createElement("div",{className:"reading-sub-container"},"PER DAY")),r.default.createElement("div",{className:"reading-sub-middle reading-middle"},!this.state.isOpenWeekNull&&r.default.createElement("div",{className:"reading-sub-container reading-data-font"},e.week&&e.week.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),r.default.createElement("sub",null,"x")),this.state.isOpenWeekNull&&r.default.createElement("div",{className:"reading-sub-container reading-data-font"},"-"),r.default.createElement("div",{className:"reading-sub-container"},"PER WEEK")),r.default.createElement("div",{className:"reading-left"},!this.state.isOpenMonthNull&&r.default.createElement("div",{className:"reading-sub-container reading-data-font"},e.month&&e.month.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),r.default.createElement("sub",null,"x")),this.state.isOpenMonthNull&&r.default.createElement("div",{className:"reading-sub-container reading-data-font"},"-"),r.default.createElement("div",{className:"reading-sub-container"},"PER MONTH"))))),this.state.loading&&r.default.createElement("div",{className:"spinner-area"},r.default.createElement(s.default,{top:40})),this.props.loadingPurchase&&r.default.createElement("div",{className:"spinner-area"},r.default.createElement(s.default,null))))}}])&&d(t.prototype,a),o&&d(t,o),n}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=o(a(0)),r=a(2),l=(n(a(68)),n(a(109))),i=o(a(74)),c=o(a(61)),d=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?h(a):n).state={bookList:"",text:"",seeEntireList:!1,renderData:"",hasNoData:"",loading:!1},t.onAverageTimeToOpenLoaded=t.onAverageTimeToOpenLoaded.bind(h(h(t))),t.isEmpty=t.isEmpty.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,u.default.Component),t=o,(a=[{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"componentWillMount",value:function(){i.default.addAverageTimeToOpenListener(this.onAverageTimeToOpenLoaded),this.setState({loading:!0})}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){i.default.removeAverageTimeToOpenListener(this.onAverageTimeToOpenLoaded)}},{key:"onAverageTimeToOpenLoaded",value:function(){var e=i.default.averageTime();(this.isEmpty(e.result)?this.setState({renderData:!1,hasNoData:!0}):this.setState({bookList:e,renderData:!0,hasNoData:!1}),this.state.bookList)&&(10<this.state.bookList.result.eaaAverageToOpenRate.eaaSegmentations.length?this.setState({seeEntireList:!0}):this.setState({seeEntireList:!1}));this.setState({loading:!1})}},{key:"onOver",value:function(e){this.setState({text:e.title})}},{key:"onSeeEntireList",value:function(e){r.browserHistory.push({pathname:e,state:{bookList:this.state.bookList}}),window.scrollTo(0,0)}},{key:"render",value:function(){var e,s=this;this.state.bookList&&(e=this.state.bookList.result.eaaAverageToOpenRate.eaaSegmentations);var t=e&&0<e.length&&!this.state.showMore?e.slice(0,10):e;return u.default.createElement("div",{className:"analytics-margin article-main"},u.default.createElement("div",{className:"position-relative"},u.default.createElement("div",{className:"padding-reading-table"},u.default.createElement("h3",{className:"tooltip-description"},"Your Readers' Average Time From Purchase to Open by Book"),u.default.createElement(c.default,{info:!0,text:"This graph shows you what percentage of your customers opened your books within 1 Week, 1 Month, 3 Months, or 6+ Months of its purchase. The graph lists all of your eBooks and the corresponding percentage of customers who opened your titles by elapsed time.",trigger:"focus"},u.default.createElement("span",{className:"Whats-This"},"What's This?"))),u.default.createElement("div",{className:"table-reading table-responsive padding-reading-table"},u.default.createElement("div",{className:"table-responsive table-reading"},this.state.renderData&&u.default.createElement("table",{className:"table"},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("th",{style:{textAlign:"left",width:"28%"}},"BOOK"),u.default.createElement("th",{style:{width:"18%"}},"1 WEEK"),u.default.createElement("th",{style:{width:"18%"}},"1 MONTH"),u.default.createElement("th",{style:{width:"18%"}},"3 MONTHS"),u.default.createElement("th",{style:{width:"18%"}},"6+ MONTHS")),t&&t.map(function(e,t){var a=e.title,n=e.ean,o=e.week1,r=e.month1,l=e.month3,i=e.month6Plus;return u.default.createElement("tr",{key:n,className:"border-bottom"},u.default.createElement("td",{style:{textAlign:"left"},onMouseOver:function(){return s.onOver(e)}},u.default.createElement(c.default,{className:"black-font ",isHtml:"true",trigger:"hover",info:!0,text:s.state.text},u.default.createElement("span",{style:{width:"220px"},className:"truncate-text-reading-data"},t+1,".Â ",a," "))),u.default.createElement("td",null,o,"%"),u.default.createElement("td",null,r,"%"),u.default.createElement("td",null,l,"%"),u.default.createElement("td",null,i,"%"))})))),this.state.hasNoData&&u.default.createElement("div",{className:"table-responsive table-reading"},u.default.createElement("table",{className:"table no-data-table"},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("th",{style:{textAlign:"left"}},"BOOK"),u.default.createElement("th",null,"1 WEEK"),u.default.createElement("th",null,"1 MONTH"),u.default.createElement("th",null,"3 MONTHS"),u.default.createElement("th",null,"6+ MONTHS")),u.default.createElement("tr",null,u.default.createElement("td",{className:"height-reading-table",colSpan:"5"},"You currently don't have data for your readers' average time from purchase to open")))))),this.state.seeEntireList&&u.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 reading_data_text_align"},u.default.createElement("a",{className:"Whats-This",onClick:function(){return s.onSeeEntireList("/"+l.Base+"/"+l.ReadingDataEntireList)}}," See entire list ")),this.state.loading&&u.default.createElement("div",{className:"spinner-area"},u.default.createElement(d.default,{top:40}))))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=o(a(0)),r=a(2),l=n(a(109)),i=(n(a(68)),o(a(74)),o(a(4))),c=n(a(11)),d=o(a(61)),s=o(a(135)),f=n(a(75));a(7);function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={data:"WHAT IS READING DATA? ",definition:"This section gives you insight into how customers consume your content â€“ how quickly they open your book after purchase, average time spent reading your book, and average completion rate.",bookList:"",text:"",eaaSubscriptionData:""},t.onClickReadingData=t.onClickReadingData.bind(b(b(t))),t.onClickSiteData=t.onClickSiteData.bind(b(b(t))),t.onClickCustomerData=t.onClickCustomerData.bind(b(b(t))),t.eaaSubscriptionLoaded=t.eaaSubscriptionLoaded.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,u.default.Component),t=o,(a=[{key:"onOver",value:function(e){this.setState({text:e.title})}},{key:"onSeeEntireList",value:function(e){r.browserHistory.push(e),window.scroll(0,800)}},{key:"onClickCustomerData",value:function(e){r.browserHistory.push(e)}},{key:"onClickReadingData",value:function(e){r.browserHistory.push(e)}},{key:"componentWillMount",value:function(){s.default.addEaaSubscriptionListener(this.eaaSubscriptionLoaded)}},{key:"componentWillUnmount",value:function(){s.default.removeEaaSubscriptionListener(this.eaaSubscriptionLoaded)}},{key:"componentDidMount",value:function(){f.getEaaSubscription()}},{key:"onClickSiteData",value:function(e){r.browserHistory.push(e)}},{key:"eaaSubscriptionLoaded",value:function(){var e=s.default.eaaSubscription();this.setState({eaaSubscriptionData:e})}},{key:"parseMillisecondsIntoReadableTime",value:function(e){var t=e/36e5,a=Math.floor(t),n=9<a?a:"0"+a,o=60*(t-a),r=Math.floor(o),l=9<r?r:"0"+r,i=60*(o-r);Math.floor(i);return n+"hours,  "+l+"minutes"}},{key:"render",value:function(){var e,t,s=this;this.state.eaaSubscriptionData&&(e=this.state.eaaSubscriptionData.result,t=new Date(e.resetDate).getTime()-(new Date).getTime());var a,n;return(n=!!i.default.hasEaaPermission()&&i.default.hasEaaPermission().includes(c.READING))&&this.props.location.state.bookList&&(a=this.props.location.state.bookList.result.eaaAverageToOpenRate.eaaSegmentations),u.default.createElement("div",null,n&&u.default.createElement("div",{className:"left-sidebar-wrapper analytics-layout"},u.default.createElement("div",{className:"left-sidebar-container projects"},u.default.createElement("header",{className:"sidelines"},u.default.createElement("h1",null,"My Analytics Dashboard")),u.default.createElement("div",{className:"sidebar-left"},u.default.createElement("div",{className:"customer-display"},i.default.hasEaaPermission().includes(c.CUSTOMER)&&u.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return s.onClickCustomerData("/"+l.Base)}},u.default.createElement("span",null,"Customer Data")),i.default.hasEaaPermission().includes(c.READING)&&u.default.createElement("div",{className:"btn btn-new-project-analytics btn-block",onClick:function(){return s.onClickReadingData("/"+l.Base+"/"+l.ReadingData)}},u.default.createElement("span",null,"Reading Data")),i.default.hasEaaPermission().includes(c.SITE)&&u.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return s.onClickSiteData("/"+l.Base+"/"+l.SiteData)}},u.default.createElement("span",null,"Site Data"))),u.default.createElement("div",{className:" m-0 p-0  mobile-display"},i.default.hasEaaPermission().includes(c.CUSTOMER)&&u.default.createElement("div",{className:"col-33"},u.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return s.onClickCustomerData("/"+l.Base)}},u.default.createElement("span",null,"Customer Data"))),i.default.hasEaaPermission().includes(c.READING)&&u.default.createElement("div",{className:"col-33"},u.default.createElement("div",{className:"btn btn-new-project-analytics btn-block",onClick:function(){return s.onClickReadingData("/"+l.Base+"/"+l.ReadingData)}},u.default.createElement("span",null,"Reading Data"))),i.default.hasEaaPermission().includes(c.SITE)&&u.default.createElement("div",{className:"col-33"},u.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return s.onClickSiteData("/"+l.Base+"/"+l.SiteData)}},u.default.createElement("span",null,"Site Data")))),u.default.createElement("div",{className:"analytics-mar30  analytics-mar30-mobile"},u.default.createElement("p",{className:"analytics-data-text"},this.state.data),u.default.createElement("p",{className:"analytics-data-define"},this.state.definition," "),u.default.createElement("p",{className:"analytics-data-define"},"Please Note: This information derives from the last 2 years of data."),u.default.createElement("div",{className:"searches-remaining"},u.default.createElement("span",{className:"searches-remaining-bold"},e&&parseInt(e.dailyLimit)-parseInt(e.usageCount))," SEARCHES REMAINING",u.default.createElement("p",{className:"search-remaining-text"},"Search limit is based on incurred costs on B&N Press when processing data feeds."),u.default.createElement("p",{className:"search-reset"},"Searches Reset: ",e&&e.resetDate&&t?this.parseMillisecondsIntoReadableTime(t):"")," "))),u.default.createElement("div",{className:"content-right  container article-main analytics-mar30"},u.default.createElement("div",{className:"analytics-margin article-main analytics-mar30"},u.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12"},u.default.createElement("a",{className:"go-back",onClick:function(){return s.onSeeEntireList("/"+l.Base+"/"+l.ReadingData)}},"<  ",u.default.createElement("span",{className:"UnderlineGoBack"},"Go Back")," ")),u.default.createElement("div",{className:"padding-reading-table"},u.default.createElement("h3",{className:"tooltip-description"},"Your Readers' Average Time From Purchase to Open by Book"),u.default.createElement(d.default,{info:!0,text:"This section shows what percentage of customers opened a book within a week of its purchase, within a month of its purchase, within first three month of its purchase, within first six months of its purchase, within a year of its purchase and after a year of its purchase.",trigger:"focus"},u.default.createElement("span",{className:"Whats-This"},"What's This?"))),u.default.createElement("div",{className:"table-reading table-responsive padding-reading-table"},u.default.createElement("table",{className:"table"},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("th",{style:{textAlign:"left",width:"28%"}},"BOOK"),u.default.createElement("th",{style:{width:"18%"}},"1 WEEK"),u.default.createElement("th",{style:{width:"18%"}},"1 MONTH"),u.default.createElement("th",{style:{width:"18%"}},"3 MONTHS"),u.default.createElement("th",{style:{width:"18%"}},"6+ MONTHS")),a&&a.map(function(e,t){var a=e.title,n=e.ean,o=e.week1,r=e.month1,l=e.month3,i=e.month6Plus;return u.default.createElement("tr",{key:n,className:"border-bottom"},u.default.createElement("td",{style:{textAlign:"left"},onMouseOver:function(){return s.onOver(e)}},u.default.createElement(d.default,{className:"black-font ",isHtml:"true",trigger:"hover",info:!0,text:s.state.text},u.default.createElement("span",{style:{width:"220px"},className:"truncate-text-reading-data"},t+1,".Â ",a," "))),u.default.createElement("td",null,o,"%"),u.default.createElement("td",null,r,"%"),u.default.createElement("td",null,l,"%"),u.default.createElement("td",null,i,"%"))}))))),u.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 sticky-reading"},u.default.createElement("a",{className:"entireList",onClick:function(){return s.onSeeEntireList("/"+l.Base+"/"+l.ReadingData)}},"< ",u.default.createElement("span",{className:"UnderlineGoBack"},"Go Back")," "))))),!n&&u.default.createElement("div",{className:"no-permission"},"Oops you don't have permission to access this page"))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(6)),i=n(a(12)),s=n(a(23)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(9));function n(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}for(var h=[{value:"option1",label:"Option 1"},{value:"option2",label:"Option 2"},{value:"option3",label:"Option 3"},{value:"option4",label:"Option 4"}],y=[{value:"fiction",label:"Fiction"},{value:"nonfiction",label:"Non-Fiction"},{value:"unknown",label:"Unknown"}],b={fiction:[{value:"romance",label:"Romance"},{value:"adventure",label:"Adventure"},{value:"scifi",label:"Science Fiction"}],nonfiction:[{value:"science",label:"Science"},{value:"history",label:"History"},{value:"health",label:"Health"},{value:"foreignlanguages",label:"Foreign Languages"}],unknown:null},g=["A lion ate my dog!","A dog ate my cat!","A cat ate my hamster!","A hamster ate my grasshopper!","A llama ate my sandwich!","A goat ate my shoes!","A turtle tried to eat my soup, but was too slow!","A pelican ate my fish!"],v=[],o=1;o<=25;o++)v.push({value:"option"+o,label:"Option "+o});var E=function(e){function n(){var e,t,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(a=f(n).call(this))||"object"!==c(a)&&"function"!=typeof a?m(t):a).state={valid:!1,addFields:!1,field12Options:null},e.onSetFields=e.onSetFields.bind(m(m(e))),e.onClearFields=e.onClearFields.bind(m(m(e))),e.onEnableFields=e.onEnableFields.bind(m(m(e))),e.onDisableFields=e.onDisableFields.bind(m(m(e))),e.onAddFields=e.onAddFields.bind(m(m(e))),e.onRemoveFields=e.onRemoveFields.bind(m(m(e))),e.onField11Changed=e.onField11Changed.bind(m(m(e))),e.onValidationChange=e.onValidationChange.bind(m(m(e))),e.onSubmit=e.onSubmit.bind(m(m(e))),e}var t,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,r.default.Component),t=n,(a=[{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting()}},{key:"onSetFields",value:function(){this.refs.field5.setValue("A programmatic value"),this.refs.field6.setValue("option3")}},{key:"onClearFields",value:function(){this.refs.field5.setValue(""),this.refs.field6.setValue("")}},{key:"onDisableFields",value:function(){this.refs.field7.setDisabled(!0),this.refs.field8.setDisabled(!0)}},{key:"onEnableFields",value:function(){this.refs.field7.setDisabled(!1),this.refs.field8.setDisabled(!1)}},{key:"onAddFields",value:function(){this.setState({addFields:!0})}},{key:"onRemoveFields",value:function(){this.setState({addFields:!1})}},{key:"onField11Changed",value:function(e){this.setState({field12Options:b[e.newValue]})}},{key:"onValidationChange",value:function(e){this.setState({valid:this.refs.form.valid()})}},{key:"onSubmit",value:function(){this.refs.form.hasChanged()?console.log("Submitted with changes"):console.log("Submitted without changes"),console.log(this.refs.form.gather())}},{key:"render",value:function(){return r.default.createElement(l.default,{ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},r.default.createElement("h1",null,"Input Controls"),r.default.createElement("div",{className:"row",style:{marginTop:20}},r.default.createElement("div",{className:"col-xs-6"},r.default.createElement(i.default,{name:"field1",label:"Field #1",initValue:"",suggestions:g,rules:[u.required(),u.maxLength(30)]}),r.default.createElement("p",{style:{fontStyle:"italic",textAlign:"right"}},"(Required, Max 30)")),r.default.createElement("div",{className:"col-xs-6"},r.default.createElement(i.default,{name:"field2",label:"Field #2",initValue:"Vendor",rules:[u.required(),u.maxLength(10)]}),r.default.createElement("p",{style:{fontStyle:"italic",textAlign:"right"}},"(Required, Max 10)")),r.default.createElement("div",{className:"col-xs-6"},r.default.createElement(i.default,{name:"field3",label:"Field #3",initValue:"Some text",rules:[u.required(),u.minLength(8),u.maxLength(10)]}),r.default.createElement("p",{style:{fontStyle:"italic",textAlign:"right"}},"(Required, Min 8, Max 10)")),r.default.createElement("div",{className:"col-xs-6"},r.default.createElement(s.default,{name:"field4",label:"Field #4",options:v,rules:[u.required()]}),r.default.createElement("p",{style:{fontStyle:"italic",textAlign:"right"}},"(Required)")),r.default.createElement("div",{className:"col-xs-12",style:{marginTop:24}},r.default.createElement("h3",null,"The following is an example of programmatically altering the values of controls")),r.default.createElement("div",{className:"col-xs-4"},r.default.createElement(i.default,{ref:"field5",name:"field5",label:"Field #5",rules:[u.required()]}),r.default.createElement("p",{style:{fontStyle:"italic",textAlign:"right"}},"(Required)")),r.default.createElement("div",{className:"col-xs-4"},r.default.createElement(s.default,{ref:"field6",name:"field6",label:"Field #6",options:h,rules:[u.required()]}),r.default.createElement("p",{style:{fontStyle:"italic",textAlign:"right"}},"(Required)")),r.default.createElement("div",{className:"col-xs-2",style:{marginTop:28}},r.default.createElement("button",{type:"button",onClick:this.onSetFields},"Set")),r.default.createElement("div",{className:"col-xs-2",style:{marginTop:28}},r.default.createElement("button",{type:"button",onClick:this.onClearFields},"Clear")),r.default.createElement("div",{className:"col-xs-12",style:{marginTop:24}},r.default.createElement("h3",null,"The following is an example of programmatically enabling / disabling controls")),r.default.createElement("div",{className:"col-xs-4"},r.default.createElement(i.default,{ref:"field7",name:"field7",label:"Field #7",initDisabled:!0,rules:[u.required()]}),r.default.createElement("p",{style:{fontStyle:"italic",textAlign:"right"}},"(Required)")),r.default.createElement("div",{className:"col-xs-4"},r.default.createElement(s.default,{ref:"field8",name:"field8",label:"Field #8",options:h,initDisabled:!0,rules:[u.required()]}),r.default.createElement("p",{style:{fontStyle:"italic",textAlign:"right"}},"(Required)")),r.default.createElement("div",{className:"col-xs-2",style:{marginTop:28}},r.default.createElement("button",{type:"button",onClick:this.onEnableFields},"Enable")),r.default.createElement("div",{className:"col-xs-2",style:{marginTop:28}},r.default.createElement("button",{type:"button",onClick:this.onDisableFields},"Disable")),r.default.createElement("div",{className:"col-xs-12",style:{marginTop:24}},r.default.createElement("h3",null,"The following is an example of programmatically adding / removing controls")),r.default.createElement("div",{className:"col-xs-4"},this.state.addFields&&r.default.createElement("div",null,r.default.createElement(i.default,{ref:"field9",name:"field9",label:"Field #9",rules:[u.required()]}),r.default.createElement("p",{style:{fontStyle:"italic",textAlign:"right"}},"(Required)"))),r.default.createElement("div",{className:"col-xs-4"},this.state.addFields&&r.default.createElement("div",null,r.default.createElement(s.default,{ref:"field10",name:"field10",label:"Field #10",options:h,rules:[u.required()]}),r.default.createElement("p",{style:{fontStyle:"italic",textAlign:"right"}},"(Required)"))),r.default.createElement("div",{className:"col-xs-2",style:{marginTop:28}},r.default.createElement("button",{type:"button",onClick:this.onAddFields},"Add")),r.default.createElement("div",{className:"col-xs-2",style:{marginTop:28}},r.default.createElement("button",{type:"button",onClick:this.onRemoveFields},"Remove")),r.default.createElement("div",{className:"col-xs-12",style:{marginTop:24}},r.default.createElement("h3",null,"The following is an example of dependent selects")),r.default.createElement("div",{className:"col-xs-6"},r.default.createElement(s.default,{ref:"field11",name:"field11",label:"Field #11",options:y,rules:[u.required()],onChange:this.onField11Changed}),r.default.createElement("p",{style:{fontStyle:"italic",textAlign:"right"}},"(Required)")),this.state.field12Options&&r.default.createElement("div",{className:"col-xs-6"},r.default.createElement(s.default,{ref:"field12",name:"field12",label:"Field #12",options:this.state.field12Options,rules:[u.required()]}),r.default.createElement("p",{style:{fontStyle:"italic",textAlign:"right"}},"(Required)"))),r.default.createElement("div",{className:"row",style:{marginTop:60}},r.default.createElement("div",{className:"col-xs-2",style:{textAlign:"right"}},r.default.createElement("input",{type:"submit",className:"btn btn--primary",disabled:!this.state.valid,value:"Submit"}))))}}])&&d(t.prototype,a),o&&d(t,o),n}();t.default=E},function(e,n,r){"use strict";(function(f){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=t(r(0)),o=t(r(13)),u=r(7),i=r(2),s=t(r(4)),c=t(r(1637)),d=(e(r(251)),e(r(11)),e(r(25))),p=e(r(174)),m=t(r(1638)),h=(e(r(86)),t(r(140)),e(r(60))),y=t(r(38)),b=t(r(1640)),g=t(r(389)),v=t(r(1642)),E=t(r(1645)),S=t(r(1647)),k=e(r(193)),P=e(r(57)),w=t(r(51)),O=t(r(1650)),C=e(r(22)),N=(t(r(1653)),t(r(3))),_=t(r(34)),T=e(r(48)),D=t(r(45)),j=t(r(192)),M=e(r(14)),L=t(r(8)),A=t(r(1));function e(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function t(e){return e&&e.__esModule?e:{default:e}}function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=R(r).call(this,e))||"object"!==B(n)&&"function"!=typeof n?F(a):n;var o=P;return t._reportPeriodMap={},t._isFirstRun=!0,t._dataPointers=new Map,t._reportRequestPointers=new Map,t._reportPeriodMap[o.PERIOD_TYPES.DAILY]=o.REPORT_TYPES.GRAPH_DAILY,t._reportPeriodMap[o.PERIOD_TYPES.WEEKLY]=o.REPORT_TYPES.GRAPH_WEEKLY,t._reportPeriodMap[o.PERIOD_TYPES.MONTHLY]=o.REPORT_TYPES.GRAPH_MONTHLY,t._reportPeriodMap[o.PERIOD_TYPES.THIRTY_DAY]=o.REPORT_TYPES.GRAPH_THIRTY_DAY,t.state={payments:null,recentSales:null,thirtyDaySales:null,royaltyEarned:null,seriesGraphByDate:null,seriesGraphByBook:null,seriesNames:[],summary:null,unitsSold:null,bestSellers:null,loading:!0,vendorStatus:"",showHoldError:!1,FormType:""},t.load=t.load.bind(F(F(t))),t.trackRequest=t.trackRequest.bind(F(F(t))),t.buildParamsForData=t.buildParamsForData.bind(F(F(t))),t.onReportMetadataLoaded=t.onReportMetadataLoaded.bind(F(F(t))),t.onReportLoaded=t.onReportLoaded.bind(F(F(t))),t.onSalesWidgetItemClicked=t.onSalesWidgetItemClicked.bind(F(F(t))),t.onSalesWidgetChanged=t.onSalesWidgetChanged.bind(F(F(t))),t.onSeriesNamesLoaded=t.onSeriesNamesLoaded.bind(F(F(t))),t.onSeriesSalesWidgetChanged=t.onSeriesSalesWidgetChanged.bind(F(F(t))),t.onSummaryWidgetChanged=t.onSummaryWidgetChanged.bind(F(F(t))),t.onVendorInfoLoaded=t.onVendorInfoLoaded.bind(F(F(t))),t.getBanners=t.getBanners.bind(F(F(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(r,l.default.Component),t=r,(a=[{key:"componentWillMount",value:function(){D.default.addVendorInfoLoadedListener(this.onVendorInfoLoaded),w.default.addReportMetadataLoadedListener(this.onReportMetadataLoaded),w.default.addReportDataLoadedListener(this.onReportLoaded),y.default.addSeriesNamesLoadedListener(this.onSeriesNamesLoaded),L.default.addPageBannersListener(this.getBanners),this.setState({loading:!0})}},{key:"componentDidMount",value:function(){setTimeout(function(){M.getPageBanners(5)},500),T.loadVendorInfo(),h.loadSeriesNames(),w.default.reportDefinitions?this.load():k.loadReportMetadata();var e={eventInfo:{eventName:"Page View",eventAction:"pageView",timeStamp:new Date},category:{primaryCategory:"Pages"},attributes:{page:{pageInfo:{previousPageName:null,pageName:"bn press|sales",pageType:"bn press:sales",destinationURL:window.location.href,referringURL:null}}}};d.omnitureActionInvoked(e,"onPageView")}},{key:"componentWillUnmount",value:function(){D.default.removeVendorInfoLoadedListener(this.onVendorInfoLoaded),w.default.removeReportMetadataLoadedListener(this.onReportMetadataLoaded),w.default.removeReportDataLoadedListener(this.onReportLoaded),y.default.removeSeriesNamesLoadedListener(this.onSeriesNamesLoaded),k.clearReportMetadata(),d.pageNameChanged("bn press|sales"),L.default.removePageBannersListener(this.getBanners)}},{key:"getBanners",value:function(){var e=L.default.banners();if(e.data)if(0<e.data.length){var t=l.default.createElement("span",{dangerouslySetInnerHTML:{__html:e.data[0].details}}),a=e.data[0].headline.split(/[;|]/),n=(a[0],a[1]),o=a[2];this.setState({pageBanner:t,pageBannerColor:n,backgroundColor:o})}else this.setState({pageBanner:!1,pageBannerColor:null});document.documentElement.style.setProperty("--message-color",this.state.pageBannerColor),document.documentElement.style.setProperty("--background-color",this.state.backgroundColor)}},{key:"onVendorInfoLoaded",value:function(){var e=s.default.getUser();this.setState({loaded:!0}),"Yes"==D.default.getW8Message().mismatch?this.setState({vendorStatus:"SalesExisting"}):this.setState({vendorStatus:e.vendorStatus})}},{key:"applyReportDataState",value:function(e,t){for(var a={},n=0;n<t.length;n++)a[t[n]]=e;this.setState(a)}},{key:"buildParamsForData",value:function(e,t,a,n,o,r,l,i){var s,u,c={};if(u=w.default.getReportDefinition(e),e===P.REPORT_TYPES.RECENT_SALES)s=new g.default(!0,u.defaultSortKey,"true","1");else if(e===P.REPORT_TYPES.GRAPH_DAILY||e===P.REPORT_TYPES.GRAPH_WEEKLY||e===P.REPORT_TYPES.GRAPH_MONTHLY)s=new g.default(!0,null,"false","1",5);else if(e===P.REPORT_TYPES.GRAPH_THIRTY_DAY)s=new g.default(!0,null,"false","1",30);else if(e===P.REPORT_TYPES.TITLE)s=new g.default(!0,void 0!==l?l:null,"true","1",6);else if(e===P.REPORT_TYPES.PAYMENTS){var d=f().subtract(1,"year").format("MM-DD-YYYY");(s=new g.default(!0,u.defaultSortKey,"desc"===u.defaultSortDirection,"1",5)).addFilterMap({fromDate:d})}else e===P.REPORT_TYPES.WEEKLY?(s=new g.default(!0,u.defaultSortKey,"desc"===u.defaultSortDirection,"1",1e4),c.year=f().format("YYYY")):e===P.REPORT_TYPES.MONTHLY?(s=new g.default(!1,u.defaultSortKey,"desc"===u.defaultSortDirection,"1",1e4),c.year=f().format("YYYY")):e===P.REPORT_TYPES.SUMMARY?s=new g.default(!0,null,"false","1"):e!==P.REPORT_TYPES.SERIES_SALES_BY_DAY&&e!==P.REPORT_TYPES.SERIES_SALES_BY_MONTH&&e!==P.REPORT_TYPES.SERIES_SALES_BY_BOOK||(s=new g.default(!1,null,"false",null,null));return void 0!==o&&(c.excludeFree=o),t&&t!==P.BOOK_TYPES.ALL&&(c.format=t),a&&n&&s.addFilterMap({fromDate:a,toDate:n}),0<Object.keys(c).length&&s.addFilterMap(c),r&&s.addFilterMap({searchText:r}),i&&s.addFilterMap({groupByTitle:!0}),s}},{key:"load",value:function(){var e=P.REPORT_TYPES.RECENT_SALES,t=P.REPORT_TYPES.PAYMENTS,a=P.REPORT_TYPES.GRAPH_DAILY,n=P.REPORT_TYPES.GRAPH_THIRTY_DAY,o=P.REPORT_TYPES.TITLE,r=P.REPORT_TYPES.SUMMARY,l=P.REPORT_TYPES.SERIES_SALES_BY_BOOK,i=P.REPORT_TYPES.SERIES_SALES_BY_DAY,s=P.REPORT_TYPES.SERIES_SALES_BY_MONTH;P.PERIOD_TYPES.DAILY;this._dataPointers=new Map,this.trackRequest(k.loadReportData(l,this.buildParamsForData(l)),l,["seriesGraphByBook"]),this.trackRequest(k.loadReportData(i,this.buildParamsForData(i)),i,["seriesGraphByDate"]),this.trackRequest(k.loadReportData(s,this.buildParamsForData(s)),s,["seriesGraphByDate"]),this.trackRequest(k.loadReportData(e,this.buildParamsForData(e)),e,["recentSales"]),this.trackRequest(k.loadReportData(a,this.buildParamsForData(a,null)),a,["unitsSold","royaltyEarned"]),this.trackRequest(k.loadReportData(n,this.buildParamsForData(n)),n,["thirtyDaySales"]),this.trackRequest(k.loadReportData(t,this.buildParamsForData(t)),t,["payments"]),this.trackRequest(k.loadReportData(r,this.buildParamsForData(r)),r,["summary"]),this.trackRequest(k.loadReportData(o,this.buildParamsForData(o,void 0,(0,u.bn_moment)().subtract(8,"days").format("MM-DD-YYYY"),(0,u.bn_moment)().subtract(2,"days").format("MM-DD-YYYY"),void 0,void 0,"totalRoyalty")),o,["bestSellers"])}},{key:"trackRequest",value:function(e,t,a,n){this._reportRequestPointers.set(t,e),this._dataPointers.set(e,a)}},{key:"onReportMetadataLoaded",value:function(e){1==e.paymentHold&&this.setState({showHoldError:e.paymentHold,FormType:"true"==e.domestic?"W-9":"W-8"},function(){(0,o.default)(".warning-dialogue").addClass("show")}),this.setState({loading:!1}),this.load()}},{key:"onReportLoaded",value:function(e,t){e===this._reportRequestPointers.get(t.reportType)?(this.applyReportDataState(t,this._dataPointers.get(e)),this._dataPointers.delete(e),this._isFirstRun&&0===this._dataPointers.size&&(this._isFirstRun=!1)):this._dataPointers.delete(e)}},{key:"onSalesWidgetItemClicked",value:function(e){var t,a,n=null,o=(0,u.bn_moment)(e.date,"MM-DD-YYYY"),r=o.clone().format("YYYY");e.bookType!==P.BOOK_TYPES.ALL&&(n=e.bookType),a=e.period===P.PERIOD_TYPES.DAILY?p.getCustomDateSalesReportPath(!1,null,n,o.format("MM-DD-YYYY"),o.format("MM-DD-YYYY")):e.period===P.PERIOD_TYPES.WEEKLY?((t=o.clone().endOf("week")).clone().add(1,"day").isSame((0,u.bn_moment)(),"day")&&t.subtract(1,"day"),t.isSame((0,u.bn_moment)().endOf("week"),"day")&&(t=(0,u.bn_moment)().subtract(2,"days").isBefore(o)?o:(0,u.bn_moment)().subtract(2,"days")),p.getWeeklySalesReportPath(n,o.format("MM-DD-YYYY"),t.format("MM-DD-YYYY"),r)):e.period===P.PERIOD_TYPES.THIRTY_DAY?p.getCustomDateSalesReportPath(!1,e&&e.searchText?e.searchText:null,n,o.format("MM-DD-YYYY"),o.format("MM-DD-YYYY")):((t=o.clone().endOf("month")).clone().add(1,"day").isSame((0,u.bn_moment)(),"day")&&t.subtract(1,"day"),t.isSame((0,u.bn_moment)().endOf("month"),"day")&&(t=(0,u.bn_moment)().subtract(2,"days").isBefore(o)?o:(0,u.bn_moment)().subtract(2,"days")),p.getMonthlySalesReportPath(n,o.format("MM-DD-YYYY"),t.format("MM-DD-YYYY"),r)),i.browserHistory.push(a)}},{key:"onSalesWidgetChanged",value:function(e){var t,a=[];t={reportType:this._reportPeriodMap[e.period],format:e.bookType,excludeFreeBooks:e.excludeFreeBooks,searchText:e.searchText},e.dataIdentifier===this.refs.royaltyWidget.dataIdentifier?a.push("royaltyEarned"):e.dataIdentifier===this.refs.unitsSoldWidget.dataIdentifier?a.push("unitsSold"):e.dataIdentifier===this.refs.bestSeller.props.dataIdentifier?(a.push("bestSellers"),t.reportType=P.REPORT_TYPES.TITLE,t.searchText=void 0,e.sort&&(t.sort=e.sort),t.fromDate=e.period===P.PERIOD_TYPES.WEEKLY?(0,u.bn_moment)().subtract(8,"days").format("MM-DD-YYYY"):(0,u.bn_moment)().subtract(31,"days").format("MM-DD-YYYY"),t.toDate=(0,u.bn_moment)().subtract(2,"days").format("MM-DD-YYYY")):a.push("thirtyDaySales"),this.trackRequest(k.loadReportData(t.reportType,this.buildParamsForData(t.reportType,t.format,t.fromDate,t.toDate,t.excludeFreeBooks,t.searchText,t.sort)),t.reportType,a)}},{key:"onSeriesNamesLoaded",value:function(){this.setState({seriesNames:y.default.seriesNames?y.default.seriesNames:[],loading:!1})}},{key:"onSummaryWidgetChanged",value:function(e){var t=P.REPORT_TYPES.SUMMARY;this.trackRequest(k.loadReportData(t,this.buildParamsForData(t,e)),t,["summary"])}},{key:"onSeriesSalesWidgetChanged",value:function(e,t,a,n,o,r,l,i){var s=n&&n.format("MM-DD-YYYY"),u=o&&o.format("MM-DD-YYYY"),c=e?"seriesGraphByBook":"seriesGraphByDate",d=null;d=e?P.REPORT_TYPES.SERIES_SALES_BY_BOOK:"CustomDateRange"==i.name?P.REPORT_TYPES.SERIES_SALES_BY_DAY:i===P.PERIOD_TYPES.SEVEN_DAY||i===P.PERIOD_TYPES.THIRTY_DAY?P.REPORT_TYPES.SERIES_SALES_BY_DAY:P.REPORT_TYPES.SERIES_SALES_BY_MONTH,a&&n&&o&&this.trackRequest(k.loadReportData(d,this.buildParamsForData(d,t,s,u,!l,a,null,e)),d,[c])}},{key:"render",value:function(){var e=w.default.hasUserPublishedBefore(),t=w.default.hasUserSeries(),a=l.default.createElement("span",null,"Your account is On Payment Hold due to updates you made in the Taxpayer Information section. Please submit a Form ",this.state.FormType," with information matching your updates to remove the payment hold ",l.default.createElement(i.Link,{to:"/vendor-account"},l.default.createElement("span",null,"See Details.")));return l.default.createElement("div",{className:"sales-reporting-dashboard-layout"},this.state.pageBanner&&l.default.createElement("div",{className:(0,A.default)("extra-color ",{"color-container":this.state.pageBanner})},l.default.createElement(_.default,{messages:[this.state.pageBanner],type:"alert"})),this.state.vendorStatus&&l.default.createElement(j.default,{status:this.state.vendorStatus}),this.state.showHoldError&&l.default.createElement(_.default,{messages:[a],type:"error",onClose:this.onErrorAlertClosed}),l.default.createElement("div",{className:"container-fluid"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-12"},l.default.createElement("header",{className:"sidelines reports"},l.default.createElement("h1",null,"My Sales Reports"))),l.default.createElement("div",{className:"container-fluid widget-container"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-12"},l.default.createElement(O.default,{onSummaryWidgetChanged:this.onSummaryWidgetChanged,summary:this.state.summary}))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-6"},l.default.createElement(v.default,{ref:"royaltyWidget",dataIdentifier:"royaltyEarned",data:this.state.royaltyEarned,dataSources:["totalRoyalty"],heading:"Royalty Earned",subHeading:l.default.createElement(i.Link,{to:"/legal/royalty-payment-terms"},"How are royalties calculated?",l.default.createElement("div",{className:"glyphicon glyphicon-menu-right"}),l.default.createElement("div",{className:"glyphicon glyphicon-menu-right"})),chartType:"currency",chartLabelFormat:this.state.royaltyEarned?this.state.royaltyEarned.royaltyCurrencySymbol:null,stackable:!1,onSalesWidgetChanged:this.onSalesWidgetChanged,onSalesWidgetItemClicked:this.onSalesWidgetItemClicked})),l.default.createElement("div",{className:"col-sm-6"},l.default.createElement(v.default,{ref:"unitsSoldWidget",dataIdentifier:"unitsSold",data:this.state.unitsSold,dataSources:["unitsFree","unitsPaid"],chartType:"text",heading:"Units Sold",applyColumnLabel:function(e,t){return t.isFreeFilterEnabled?C.formatWithCommas(t.items.unitsFree)+" Free <br />"+C.formatWithCommas(t.items.unitsPaid)+" Sold":C.formatWithCommas(t.items.unitsPaid)+" Sold"},stackable:!0,onSalesWidgetChanged:this.onSalesWidgetChanged,onSalesWidgetItemClicked:this.onSalesWidgetItemClicked}))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-12"},l.default.createElement(E.default,{dataIdentifier:"salesLine",data:this.state.thirtyDaySales,chartType:"text",heading:"Last 30 Day Sales",noSalesText:"You don't have any units sold information yet.",noRoyaltiesText:"You don't have any royalty earned information yet.",onSalesWidgetChanged:this.onSalesWidgetChanged,onSalesWidgetItemClicked:this.onSalesWidgetItemClicked}))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-12"},l.default.createElement(c.default,{ref:"bestSeller",dataIdentifier:"bestSeller",data:this.state.bestSellers,onSalesWidgetChanged:this.onSalesWidgetChanged}))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-12"},l.default.createElement(S.default,{ref:"seriesGraphByDate",name:"seriesGraphByDate",hasUserSeries:t,toolTipOnClickEnable:!0,seriesNames:this.state.seriesNames,onSalesWidgetChanged:this.onSeriesSalesWidgetChanged,onSalesWidgetItemClicked:this.onSalesWidgetItemClicked,data:this.state.seriesGraphByDate,label:"Series Sales By Date",applyColumnLabel:function(e,t){return t.isFreeFilterEnabled?C.formatWithCommas(t.items.unitsFree)+" Free <br />"+C.formatWithCommas(t.items.unitsPaid)+" Sold":C.formatWithCommas(t.items.unitsPaid)+" Sold"}}))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-12"},l.default.createElement(S.default,{ref:"seriesGraphByBook",name:"seriesGraphByBook",hasUserSeries:t,onSalesWidgetChanged:this.onSeriesSalesWidgetChanged,onSalesWidgetItemClicked:this.onSalesWidgetItemClicked,groupByBook:!0,toolTipOnClickEnable:!0,data:this.state.seriesGraphByBook,seriesNames:this.state.seriesNames,label:"Series Sales By Book #",xAxisTitle:"Book #",applyColumnLabel:function(e,t){return t.isFreeFilterEnabled?C.formatWithCommas(t.items.unitsFree)+" Free <br />"+C.formatWithCommas(t.items.unitsPaid)+" Sold":C.formatWithCommas(t.items.unitsPaid)+" Sold"}}))),l.default.createElement("div",{className:"row widget-row"},l.default.createElement("div",{className:"col-sm-12 sales-notice"},"Note: Recent Sales are your pending orders from today and yesterday. These orders are unaudited and may differ slightly from monthly royalty reports to account for any potential returns. Hence, Today and Yesterdayâ€™s sales are not included in any other sales reports or graphs.")),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-6"},l.default.createElement(b.default,{data:this.state.recentSales,hasAnyPublishedProjects:e})),l.default.createElement("div",{className:"col-sm-6"},l.default.createElement(m.default,{hasAnyPublishedProjects:e,recentPaymentsReport:this.state.payments})))))),this.state.loading&&l.default.createElement(N.default,null))}}])&&x(t.prototype,a),n&&x(t,n),r}();n.default=a}).call(this,r(117))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(a(0)),r=a(7),u=a(2),c=o(a(1)),l=o(a(13)),i=n(a(26)),d=o(a(4)),f=o(a(648)),p=(o(a(646)),n(a(174))),m=n(a(57)),h=o(a(51)),y=o(a(134)),b=n(a(22)),g=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var O=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=k(o).call(this,e))||"object"!==v(n)&&"function"!=typeof n?w(a):n).state={activeTab:"totalRoyalty",bookType:m.BOOK_TYPES.ALL,data:null,isFreeFilterEnabled:!0,noRoyaltiesText:"You don't have any royalty earned information ",noUnitsSoldText:"You don't have any units sold information ",periodType:m.PERIOD_TYPES.WEEKLY,showRoyaltyEarned:!0,showUnitsSold:!1,toggle:"1"===d.default.getPreferences().salesReporting.bestSellerWidget.max,loadingToggle:!1,loadingFilter:!1},t.getDateSpan=t.getDateSpan.bind(w(w(t))),t.onFilterChange=t.onFilterChange.bind(w(w(t))),t.onExpandCollapse=t.onExpandCollapse.bind(w(w(t))),t.onTabClick=t.onTabClick.bind(w(w(t))),t.onSeeMore=t.onSeeMore.bind(w(w(t))),t.onFreeFilterToggle=t.onFreeFilterToggle.bind(w(w(t))),t.raiseSalesWidgetChanged=t.raiseSalesWidgetChanged.bind(w(w(t))),t.onThumbnailClicked=t.onThumbnailClicked.bind(w(w(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(o,s.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var e=this;(0,l.default)("#bestSeller").on("hidden.bs.collapse",function(){return e.onExpandCollapse(!0)}),(0,l.default)("#bestSeller").on("shown.bs.collapse",function(){return e.onExpandCollapse(!1)})}},{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({data:e.data}),this.setState({loadingToggle:!1,loadingFilter:!1})}},{key:"onExpandCollapse",value:function(e){var t=d.default.getPreferences();t.salesReporting.bestSellerWidget.max=e?"0":"1",d.default.getUser().isImposter||i.savePreferences(t)}},{key:"onFilterChange",value:function(e){this.raiseSalesWidgetChanged(e.bookType,e.period,this.state.isFreeFilterEnabled,void 0,this.state.activeTab),this.setState({loadingFilter:!0})}},{key:"onFreeFilterToggle",value:function(e){this.setState({isFreeFilterEnabled:e,loadingToggle:!0}),this.raiseSalesWidgetChanged(this.state.bookType,this.state.periodType,e,void 0,this.state.activeTab)}},{key:"onTabClick",value:function(e){"totalUnitsSold"===e?this.setState({showUnitsSold:!0,showRoyaltyEarned:!1,loadingFilter:!0}):this.setState({showUnitsSold:!1,showRoyaltyEarned:!0,loadingFilter:!0}),this.raiseSalesWidgetChanged(this.state.bookType,this.state.periodType,this.state.isFreeFilterEnabled,void 0,e)}},{key:"onSeeMore",value:function(){var e=this.getDateSpan(),t=p.getCustomDateSalesReportPath(!0,void 0,this.state.bookType,e.fromDate,e.toDate,this.state.activeTab,!0);u.browserHistory.push(t)}},{key:"onThumbnailClicked",value:function(e){var t=this.getDateSpan(),a=p.getCustomDateSalesReportPath(!0,e.ean,this.state.bookType,t.fromDate,t.toDate,this.state.activeTab,!1);u.browserHistory.push(a)}},{key:"raiseSalesWidgetChanged",value:function(e,t,a,n,o){var r,l={};e!==this.state.bookType&&(l.bookType=e),t!==this.state.periodType&&(l.periodType=t),o!==this.state.activeTab&&(l.activeTab=o),a!==this.state.includeFreeBooks&&(l.includeFreeBooks=a),0<Object.keys(l).length&&this.props.onSalesWidgetChanged&&(this.setState(l),r={dataIdentifier:this.props.dataIdentifier,period:t,bookType:e},void 0!==a&&(r.excludeFreeBooks=!a),void 0!==o&&(r.sort=o),this.props.onSalesWidgetChanged(r))}},{key:"getDateSpan",value:function(){return{fromDate:this.state.periodType===m.PERIOD_TYPES.WEEKLY?(0,r.bn_moment)().subtract(8,"days").format("MM-DD-YYYY"):(0,r.bn_moment)().subtract(31,"days").format("MM-DD-YYYY"),toDate:(0,r.bn_moment)().subtract(2,"days").format("MM-DD-YYYY")}}},{key:"render",value:function(){var l=this,e=h.default.hasUserPublishedBefore(),t=m.BOOK_TYPES,a=m.PERIOD_TYPES,i=(this.state.bookType===t.ALL||this.state.bookType==t.EBOOK)&&this.state.showUnitsSold,o=this.state.data?this.state.data.reportsRecord:[],n=5<o.length,r=this.state.data&&o.length<5?E(Array(5-o.length)):this.state.data?[]:E(Array(5));return s.default.createElement("div",{className:(0,c.default)("best-seller-sales-widget","widget")},s.default.createElement("div",{className:"widget-panel collapsible"},s.default.createElement("div",{className:"group-collapse sales-widget-collapse"},s.default.createElement("header",{className:(0,c.default)({collapsed:!this.state.toggle}),"data-toggle":"collapse",href:"#bestSeller","aria-controls":"thirtyDay"},s.default.createElement("div",{className:"group-collapse-left"},s.default.createElement("h2",null,s.default.createElement("span",null,"Top 5"))),s.default.createElement("div",{className:"group-collapse-right"},s.default.createElement("div",{className:"group-collapse-button"},s.default.createElement("span",{className:"icon-add"}),s.default.createElement("span",{className:"icon-remove"})))),s.default.createElement("section",{id:"bestSeller",className:(0,c.default)("collapse ",{in:this.state.toggle})},s.default.createElement("div",{className:"widget-panel-content"},s.default.createElement("div",null,s.default.createElement("ul",{className:"nav nav-tabs"},s.default.createElement("li",{className:(0,c.default)({active:this.state.showRoyaltyEarned}),onClick:function(){return l.onTabClick("totalRoyalty")}},s.default.createElement("a",null,"Royalty Earned")),s.default.createElement("li",{className:(0,c.default)({active:this.state.showUnitsSold}),onClick:function(){return l.onTabClick("totalUnitsSold")}},s.default.createElement("a",null,"Units Sold")))),s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-12"},s.default.createElement(f.default,{filterType:m.FILTER_CHOOSER_TYPES.ALL,bookTypes:[{name:"all-books",type:t.ALL,text:"All Books"},{name:"ebook",type:t.EBOOK,text:"eBook"},{name:"print",type:t.PRINT,text:"Print"}],periodTypes:[{name:"weekly",type:a.WEEKLY,text:"Last 7 Days"},{name:"thirtyDays",type:a.THIRTY_DAY,text:"Last 30 Days"}],bookType:this.state.bookType,period:this.state.periodType,enabled:e,onFilterChange:this.onFilterChange}))),s.default.createElement("div",{className:"row",style:{marginBottom:"10px"}},s.default.createElement("div",{className:"col-sm-12 text-right toggle"},s.default.createElement(y.default,{action:this.onFreeFilterToggle,initValue:!0,containerStyle:{marginRight:10},disabled:!e,labelText:"Include free eBook units",labelLeft:!0,labelStyle:{color:"#999999"},visible:i}))),s.default.createElement("div",{className:"row best-seller"},s.default.createElement("div",{className:"best-seller-row"},0===o.length&&s.default.createElement("div",{className:"no-publish-indicator"},s.default.createElement("table",{cellPadding:"0",cellSpacing:"0"},s.default.createElement("tbody",null,s.default.createElement("tr",null,s.default.createElement("td",null,!e&&s.default.createElement("div",null,this.state.showRoyaltyEarned&&s.default.createElement("span",null,this.state.noRoyaltiesText," yet."),this.state.showUnitsSold&&s.default.createElement("span",null,this.state.noUnitsSoldText," yet."),s.default.createElement("br",null),s.default.createElement(u.Link,{to:"/build-a-book/choose-book-type"},"Create a book to get started")),e&&this.state.periodType===a.WEEKLY&&s.default.createElement("div",null,this.state.showRoyaltyEarned&&s.default.createElement("span",null,this.state.noRoyaltiesText," for the last 7 days."),this.state.showUnitsSold&&s.default.createElement("span",null,this.state.noUnitsSoldText," for the last 7 days.")),e&&this.state.periodType===a.THIRTY_DAY&&s.default.createElement("div",null,this.state.showRoyaltyEarned&&s.default.createElement("span",null,this.state.noRoyaltiesText," for the last 30 days."),this.state.showUnitsSold&&s.default.createElement("span",null,this.state.noUnitsSoldText," for the last 30 days."))))))),o.filter(function(e,t){return t<5}).map(function(e,t){var a="true"===e.print,n=a?"Print":"eBook",o=t+1===l.state.data.reportsRecord.length,r=(b.formatCurrency(+e.totalRoyalty,e.royaltyCurrency),l.state.showUnitsSold?s.default.createElement("div",null,s.default.createElement("div",{className:"price"},b.formatWithCommas(e.totalPaidUnitsSold)," Sold"),l.state.isFreeFilterEnabled&&i&&s.default.createElement("div",{className:"price"},b.formatWithCommas(e.totalFreeUnitsSold)," Free")):s.default.createElement("div",{className:"price"},b.formatCurrency(+e.totalRoyalty,e.royaltyCurrency)));return e.title=e.title.length<61?e.title:e.title.slice(0,61)+"...",s.default.createElement("div",{key:e.ean,className:(0,c.default)("col-sm-2","book-column",{"book-column-last":o})},s.default.createElement("div",{className:"row book-row"},s.default.createElement("div",{className:"col-sm-3 number"},s.default.createElement("span",null,t+1)),s.default.createElement("div",{className:"col-sm-8"},s.default.createElement("figure",null,s.default.createElement("p",null,s.default.createElement("img",{className:"img-responsive cover",src:e.cover,alt:e.title,onClick:function(){return l.onThumbnailClicked(e)}}),s.default.createElement("figcaption",{className:"book"},s.default.createElement("div",{className:(0,c.default)({print:a},{eBook:!a},"format")},n),s.default.createElement("div",{className:"title"},e.title),e.author&&s.default.createElement("div",{className:"author"},"by ",e.author),r))))),s.default.createElement("div",{className:"row book-row mobile"},s.default.createElement("div",{className:"col-sm-1 number"},s.default.createElement("span",null,t+1)),s.default.createElement("div",{className:"col-sm-2 inflexible"},s.default.createElement("img",{className:"cover",src:e.cover,onClick:function(){return l.onThumbnailClicked(e)}}),s.default.createElement("div",{className:(0,c.default)({print:a},{eBook:!a},"format")},n)),s.default.createElement("div",{className:"col-sm-9 book"},s.default.createElement("div",{className:"title"},e.title),e.author&&s.default.createElement("div",{className:"author"},"by ",e.author),r)))}),r.map(function(e,t){var a=t+1===r.length,n=t+1+o.length;return s.default.createElement("div",{key:t,className:(0,c.default)("col-sm-2","book-column",{"book-column-last":a})},s.default.createElement("div",{className:"row book-row"},s.default.createElement("div",{className:"col-sm-3 number"},s.default.createElement("span",null,n)),s.default.createElement("div",{className:"col-sm-8"},s.default.createElement("div",{className:"no-book-img"},"Â "),s.default.createElement("div",{className:"book"},s.default.createElement("div",{className:"no-book-row"},s.default.createElement("div",{className:"no-book no-book-format"},"Â ")),s.default.createElement("div",{className:"no-book-row"},s.default.createElement("div",{className:"no-book"},"Â ")),s.default.createElement("div",{className:"no-book-row"},s.default.createElement("div",{className:"no-book"},"Â ")),s.default.createElement("div",{className:"no-book-row"},s.default.createElement("div",{className:"no-book"},"Â ")),s.default.createElement("div",{className:"no-book-row"},s.default.createElement("div",{className:"no-book"},"Â "))))),s.default.createElement("div",{className:"row book-row mobile"},s.default.createElement("div",{className:"col-sm-1 number"},s.default.createElement("span",null,t+1)),s.default.createElement("div",{className:"col-sm-2 inflexible"},s.default.createElement("div",{className:"no-book-img"},"Â "),s.default.createElement("div",{className:"no-book-row"},s.default.createElement("div",{className:"no-book no-book-format"},"Â "))),s.default.createElement("div",{className:"col-sm-9 book"},s.default.createElement("div",{className:"no-book-row"},s.default.createElement("div",{className:"no-book"},"Â ")),s.default.createElement("div",{className:"no-book-row"},s.default.createElement("div",{className:"no-book"},"Â ")),s.default.createElement("div",{className:"no-book-row"},s.default.createElement("div",{className:"no-book"},"Â ")),s.default.createElement("div",{className:"no-book-row"},s.default.createElement("div",{className:"no-book"},"Â ")))))}))),s.default.createElement("div",{className:"row see-more-row"},s.default.createElement("div",{className:"col-sm-12 text-center"},n&&s.default.createElement("button",{className:"btn btn-s",onClick:this.onSeeMore},"SEE MORE")))))),this.state.loadingFilter&&s.default.createElement("div",{className:"spinner-area"},s.default.createElement(g.default,null)),this.state.loadingToggle&&s.default.createElement("div",{className:"spinner-area"},s.default.createElement(g.default,null))))}},{key:"dataIdentifier",get:function(){return this.props.dataIdentifier}}])&&S(t.prototype,a),n&&S(t,n),o}();t.default=O},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(0)),s=o(a(1)),u=a(2),c=n(a(122)),d=o(a(1639)),r=(n(a(48)),o(a(45))),f=o(a(192)),l=o(a(4));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={hasAnyPayments:!1,recentPayments:[],vendorStatus:""},t.onVendorInfoLoaded=t.onVendorInfoLoaded.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,i.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){if(e!==this.props){var t=0,a=[];null!=e.recentPaymentsReport&&e.recentPaymentsReport.numOfRecords&&(t=parseInt(e.recentPaymentsReport.numOfRecords),a=e.recentPaymentsReport.reportsRecord),this.setState({hasAnyPayments:0<t,recentPayments:a})}}},{key:"componentWillMount",value:function(){r.default.addVendorInfoLoadedListener(this.onVendorInfoLoaded)}},{key:"componentWillUnmount",value:function(){r.default.removeVendorInfoLoadedListener(this.onVendorInfoLoaded)}},{key:"onVendorInfoLoaded",value:function(){var e=l.default.getUser();this.setState({loaded:!0}),"Yes"==r.default.getW8Message().mismatch?this.setState({vendorStatus:"SalesExisting"}):this.setState({vendorStatus:e.vendorStatus})}},{key:"render",value:function(){var e=this.state,t=e.recentPayments,a=e.hasAnyPayments,n=this.props.hasAnyPublishedProjects,o="/"+c.Base+"/"+c.Reports+"?reportType=payments",r=0,l=t.map(function(e){return i.default.createElement(d.default,{key:r++,paymentDetails:e})});return i.default.createElement("div",{className:"recent-sales-widget widget"},i.default.createElement("div",{className:"widget-header clearfix"},i.default.createElement("h2",null,"Payments"),a&&i.default.createElement(u.Link,{className:"view-report-link",to:o},"View Report")),i.default.createElement("div",{className:(0,s.default)("widget-panel","fixed-height-widget",{"no-overflow":!this.state.hasAnyPayments},"position-relative")},!a&&i.default.createElement("svg",{className:"widget-panel-no-content hidden-xs"},i.default.createElement("line",{x1:"0",y1:"100%",x2:"100%",y2:"0"}),i.default.createElement("line",{x1:"0%",y1:"0%",x2:"100%",y2:"100%"})),!a&&i.default.createElement("div",{className:"no-content-indicator"},!n&&i.default.createElement("div",{className:"with-button"},"You don't have any payments information yet.",i.default.createElement("div",{className:"btn-block hidden-xs"},i.default.createElement(u.Link,{to:"/build-a-book/choose-book-type"},"Create a book to get started"))),n&&i.default.createElement("div",{className:"without-button"},"You don't have any recent payments information in the last 12 months.")),a&&i.default.createElement("div",null,this.state.vendorStatus&&i.default.createElement(f.default,{status:this.state.vendorStatus}),i.default.createElement("div",{className:"widget-panel-content no-controls"},l))))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,p=(n=a(0))&&n.__esModule?n:{default:n},m=a(7),h=a(2),y=o(a(122)),b=o(a(22));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i(this,s(a).call(this,e))).state={eBookRoyalty:null,paymentDate:null,paymentID:null,paymentMonth:null,printRoyalty:null,royaltyCurrency:null,saleDate:null,totalRoyalty:null,dummy:null},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,p.default.Component),t=a,(n=[{key:"componentDidMount",value:function(){var e=this.props.paymentDetails;this.setState({eBookRoyalty:e.eBookTotalRoyalty,paymentDate:e.paymentDate,paymentID:e.paymentId,paymentMonth:e.paymentMonth,printRoyalty:e.printTotalRoyalty,royaltyCurrency:e.royaltyCurrency,saleDate:e.saleDate,totalRoyalty:e.totalRoyalty})}},{key:"render",value:function(){var e=this.state,t=e.eBookRoyalty,a=e.paymentDate,n=e.paymentID,o=e.paymentMonth,r=e.printRoyalty,l=e.royaltyCurrency,i=e.saleDate,s=e.totalRoyalty,u=(0,m.bn_moment)(o,"MM").format("MMMM"),c="/"+y.Base+"/"+y.Reports+"?reportType=payments&drilldown=Y&f_paymentId="+n+"&p_reportType=payments&p_sort=paymentDate&p_descending=Y",d="/"+y.Base+"/"+y.Reports+"?reportType=payments&drilldown=Y&f_paymentId="+n+"&f_format=EBOOK&p_reportType=payments&p_sort=paymentDate&p_descending=Y",f="/"+y.Base+"/"+y.Reports+"?reportType=payments&drilldown=Y&f_paymentId="+n+"&f_format=SPB&p_reportType=payments&p_sort=paymentDate&p_descending=Y";return p.default.createElement("div",{className:"single-recent-sale"},p.default.createElement("div",{className:"payment-info"},p.default.createElement("ul",{className:"list-unstyled"},p.default.createElement("li",null,p.default.createElement("strong",{className:"payment-month"},u)," - Payment ID: ",p.default.createElement("strong",null,p.default.createElement(h.Link,{to:c},n))),p.default.createElement("li",null,"Statement Period: ",p.default.createElement("strong",{className:"bolded-value"},i)),p.default.createElement("li",null,p.default.createElement(h.Link,{to:d},"eBook Royalty Paid: ")," ",p.default.createElement("strong",{className:"bolded-value"},b.formatCurrency(parseFloat(t),l))," ",p.default.createElement(h.Link,{to:f}," Â  Â  Print Royalty Paid:")," ",p.default.createElement("strong",{className:"bolded-value"},b.formatCurrency(parseFloat(r),l))),p.default.createElement("li",null,"Total Royalty Paid: ",p.default.createElement("strong",{className:"bolded-value"},b.formatCurrency(parseFloat(s),l)),"Â  Â  Date Issued: ",p.default.createElement("strong",{className:"bolded-value"},a)))))}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=o(a(0)),p=a(7),m=o(a(1)),h=a(2),y=n(a(57)),b=o(a(1641)),g=n(a(22));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=i(o).call(this,e))||"object"!==r(n)&&"function"!=typeof n?u(a):n).state={data:null,displayData:null,hasAnyRecentSales:!1,daySelection:y.DAY_SELECTOR.TODAY,netRoyalty:null,netUnitsSold:null,royaltyCurrency:null},t.calculateCurrentTotals=t.calculateCurrentTotals.bind(u(u(t))),t.onDaySelectionChange=t.onDaySelectionChange.bind(u(u(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,f.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){if(e!==this.props){var t=!1,a=null;null!=e.data&&(t=0<e.data.reportsRecord.length,a=e.data.royaltyCurrency);var n=this.extractDisplayData(this.state.daySelection,e.data),o=this.calculateCurrentTotals(n),r=o.netUnitsSold,l=o.netRoyalty;this.setState({displayData:this.extractDisplayData(this.state.daySelection,e.data),hasAnyRecentSales:t,netRoyalty:l,netUnitsSold:r,royaltyCurrency:a})}}},{key:"onDaySelectionChange",value:function(e){var t=this.extractDisplayData(e,this.props.data),a=this.calculateCurrentTotals(t),n=a.netUnitsSold,o=a.netRoyalty;this.setState({daySelection:e,netUnitsSold:n,netRoyalty:o,displayData:t})}},{key:"calculateCurrentTotals",value:function(e){var a={netUnitsSold:0,netRoyalty:0};return e&&e.forEach(function(e){var t=+e.unitsSold;a.netUnitsSold+=t,a.netRoyalty+=t*+e.royalty}),a}},{key:"extractDisplayData",value:function(e,t){if(!t)return null;var a=(0,p.bn_moment)();return e===y.DAY_SELECTOR.YESTERDAY&&(a=a.subtract(1,"day")),a=a.format("MM/DD/YYYY"),t.reportsRecord.filter(function(e){return e.saleDate===a})}},{key:"render",value:function(){var e=this,t=this.state,a=t.displayData,n=t.hasAnyRecentSales,o=t.daySelection,r=t.netRoyalty,l=t.netUnitsSold,i=t.royaltyCurrency,s=(this.props.data,this.props.hasAnyPublishedProjects),u=0,c=null,d=a?a.map(function(e){return f.default.createElement(b.default,{data:e,key:u++})}):null;return c=s?n?o===y.DAY_SELECTOR.TODAY?f.default.createElement("div",{className:"without-button"},"You don't have any recent sales information today."):f.default.createElement("div",{className:"without-button"},"You don't have any recent sales information yesterday."):f.default.createElement("div",{className:"without-button"},"You don't have any recent sales information in the last 2 days."):f.default.createElement("div",{className:"with-button"},"You don't have any recent sales information yet.",f.default.createElement("div",{className:"btn-block hidden-xs"},f.default.createElement(h.Link,{to:"/build-a-book/choose-book-type"},"Create a book to get started"))),f.default.createElement("div",{className:(0,m.default)("recent-sales-widget","widget",{"show-scroll":d&&4<d.length})},f.default.createElement("div",{className:"widget-header clearfix"},f.default.createElement("h2",null,"Recent Sales"),n&&f.default.createElement(h.Link,{className:"view-report-link",onClick:function(){return h.browserHistory.push("/sales/reports?reportType=recentSales")}},"View Report")),f.default.createElement("div",{className:(0,m.default)("widget-panel","fixed-height-widget","position-relative")},n&&f.default.createElement("div",{className:"controls-container"},f.default.createElement("div",{className:"controls clearfix"},f.default.createElement("ul",{className:"book-type"},f.default.createElement("li",{className:(0,m.default)({"active-selection":this.state.daySelection===y.DAY_SELECTOR.TODAY}),onClick:function(){return e.onDaySelectionChange(y.DAY_SELECTOR.TODAY)}},"Today"),f.default.createElement("li",{className:(0,m.default)({"active-selection":this.state.daySelection===y.DAY_SELECTOR.YESTERDAY}),onClick:function(){return e.onDaySelectionChange(y.DAY_SELECTOR.YESTERDAY)}},"Yesterday")),f.default.createElement("ul",{className:"totals list-inline"},f.default.createElement("li",null,"Total Units Sold: ",f.default.createElement("strong",null,l)),f.default.createElement("li",null,"Total Royalty: ",f.default.createElement("strong",null,g.formatCurrency(parseFloat(r),i))))),f.default.createElement("div",{className:"timezone-container"},f.default.createElement("div",{className:"timezone"},"Based on Eastern Time Zone, currently ",f.default.createElement("strong",null,(0,p.bn_moment)().format("MMM D"))))),(!n||d&&0===d.length)&&f.default.createElement("svg",{className:"widget-panel-no-content hidden-xs"},f.default.createElement("line",{x1:"0",y1:"100%",x2:"100%",y2:"0"}),f.default.createElement("line",{x1:"0%",y1:"0%",x2:"100%",y2:"100%"})),(!n||d&&0===d.length)&&f.default.createElement("div",{className:(0,m.default)("no-content-indicator",{"controls-visible":n})},c),f.default.createElement("div",{className:"sales-scroll"},n&&d&&0<d.length&&f.default.createElement("div",{className:"widget-panel-content"},d))))}}])&&l(t.prototype,a),n&&l(t,n),o}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=n(a(0)),f=a(7),p=n(a(649)),m=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(22));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=l(this,i(a).call(this,e))).state={},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,d.default.Component),t=a,(n=[{key:"render",value:function(){var e=this.props.data,t=e.saleDate,a=e.title,n=e.author,o=e.format,r=e.unitsSold,l=e.royalty,i=e.royaltyCurrency,s=null,u=this.props.data.cover?this.props.data.cover:"img/projects/cover-default.png";if(this.props.data.projectCoupon&&this.props.data.projectCoupon.promoType){var c=d.default.createElement("img",{className:"coupon-tag",src:"img/price_tag.svg"});s=d.default.createElement(p.default,{coupon:this.props.data.projectCoupon,tagContent:c})}return d.default.createElement("div",{className:"single-recent-sale clearfix"},d.default.createElement("div",{className:"left-content"},d.default.createElement("img",{src:u,className:"img-responsive",alt:"cover image"})),d.default.createElement("div",{className:"right-content clearfix"},d.default.createElement("ul",{className:"list-unstyled"},d.default.createElement("li",null,d.default.createElement("strong",null,(0,f.bn_moment)(t,"MM/DD/YYYY").format("MMMM D, YYYY"))),d.default.createElement("li",null,d.default.createElement("span",{className:"title"},a)," by ",n),d.default.createElement("li",null,d.default.createElement("span",{className:"attribute-label"},"Format: "),d.default.createElement("strong",null,o)),d.default.createElement("li",null,d.default.createElement("span",{className:"no-wrap",style:{paddingRight:24}},d.default.createElement("span",{className:"attribute-label"},"Units Sold: "),d.default.createElement("strong",null,r)),d.default.createElement("span",{className:"no-wrap"},d.default.createElement("span",{className:"attribute-label"},"Royalty Earned: "),d.default.createElement("strong",null,m.formatCurrency(parseFloat(l)*parseFloat(r),i)),this.props.data.projectCoupon&&s)))))}}])&&r(t.prototype,n),o&&r(t,o),a}();t.default=u},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(a(0)),i=o(a(1)),s=o(a(650)),u=a(2),c=(n(a(193)),n(a(57))),d=o(a(51)),f=o(a(209)),p=o(a(210)),m=o(a(134)),h=n(a(22)),y=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var r=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=v(r).call(this,e))||"object"!==b(n)&&"function"!=typeof n?S(a):n;var o=d.default.getEmptyGraphData(c.PERIOD_TYPES.DAILY);return t.state={bookType:c.BOOK_TYPES.ALL,period:c.PERIOD_TYPES.DAILY,data:null,series:[{name:"empty",data:o.series.map(function(e){return 0})}],categories:o.categories,bookTypeEnabled:!0,periodEnabled:!0,isFreeFilterEnabled:!0,loadingBook:!1,loadingPeriod:!1,loadingToggle:!1},"unitsSold"===t.props.dataIdentifier?t.state.noPublishText="You don't have any units sold information yet.":t.state.noPublishText="You don't have any royalty earned information yet.",t.dataRequestId=null,t.getHeaderStyles=t.getHeaderStyles.bind(S(S(t))),t.raiseSalesWidgetChanged=t.raiseSalesWidgetChanged.bind(S(S(t))),t.applyColumnLabel=t.applyColumnLabel.bind(S(S(t))),t.onBarItemClicked=t.onBarItemClicked.bind(S(S(t))),t.onFreeFilterToggle=t.onFreeFilterToggle.bind(S(S(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(r,l.default.Component),t=r,(a=[{key:"componentWillReceiveProps",value:function(e){var a;if(e.data!==this.state.data){if(!this.props.dataSources||0===this.props.dataSources.length)return;a=d.default.formatSalesGraphData(this.state.period,e.data);var t=this.props.dataSources.map(function(t){var e={};return e.name=t,e.data=a.series.map(function(e){return{y:e[t],date:e.date}}),e});this.setState({data:e.data,series:t,categories:a.categories})}this.setState({loadingBook:!1,loadingPeriod:!1,loadingToggle:!1})}},{key:"onBookTypeChange",value:function(e){this.state.bookTypeEnabled&&e!==this.state.bookType&&(this.setState({bookType:e}),this.raiseSalesWidgetChanged(e,this.state.period,this.state.isFreeFilterEnabled)),this.setState({loadingBook:!0})}},{key:"onPeriodChange",value:function(e){e!==this.state.period&&(this.setState({period:e}),this.raiseSalesWidgetChanged(this.state.bookType,e,this.state.isFreeFilterEnabled)),this.setState({loadingPeriod:!0})}},{key:"onBarItemClicked",value:function(e){this.props.onSalesWidgetItemClicked&&e.date&&this.props.onSalesWidgetItemClicked({date:e.date,value:e.value,period:this.state.period,bookType:this.state.bookType})}},{key:"onFreeFilterToggle",value:function(e){this.setState({isFreeFilterEnabled:e,loadingToggle:!0}),this.raiseSalesWidgetChanged(this.state.bookType,this.state.period,e)}},{key:"applyColumnLabel",value:function(e,t){var a={items:{}};if(void 0!==t.empty)return t.empty;for(var n=0;n<this.props.dataSources.length;n++){var o=void 0!==t[this.props.dataSources[n]]?t[this.props.dataSources[n]]:0;a.items[this.props.dataSources[n]]=o}return a.isFreeFilterEnabled=this.state.bookType!==c.BOOK_TYPES.PRINT&&this.state.isFreeFilterEnabled,a.seriesIndex=t.seriesIndex,this.props.applyColumnLabel?this.props.applyColumnLabel(e,a):""}},{key:"raiseSalesWidgetChanged",value:function(e,t,a){var n;this.props.onSalesWidgetChanged&&(n={dataIdentifier:this.dataIdentifier,period:t,bookType:e},void 0!==a&&(n.excludeFreeBooks=!a),this.props.onSalesWidgetChanged(n))}},{key:"getHeaderStyles",value:function(e,t,a,n){return n=d.default.hasUserPublishedBefore()&&n,(0,i.default)(e,{"active-selection":t===a},{disabled:!n})}},{key:"render",value:function(){var a=this,e=c.BOOK_TYPES,t=(this.state.bookType===e.ALL||this.state.bookType==e.EBOOK)&&"unitsSold"===this.props.dataIdentifier,n=d.default.hasUserPublishedBefore(),o=this.props.applyColumnLabel?this.applyColumnLabel:null;return l.default.createElement("div",{className:(0,i.default)("sales-chart-widget","widget",this.dataIdentifier)},l.default.createElement("div",{className:"widget-header clearfix"},l.default.createElement("h2",{className:"no-wrap-text"},this.heading,l.default.createElement("span",{className:"sub-heading"},this.props.subHeading))),l.default.createElement("div",{className:"widget-panel"},l.default.createElement("div",{className:"widget-panel-content"},l.default.createElement("div",{className:"controls clearfix"},l.default.createElement("ul",{className:"book-type"},l.default.createElement("li",{className:this.getHeaderStyles("all-books",this.state.bookType,e.ALL,this.state.bookTypeEnabled),onClick:function(){return a.onBookTypeChange(e.ALL)}},"All Books"),l.default.createElement("li",{className:this.getHeaderStyles("ebook",this.state.bookType,e.EBOOK,this.state.bookTypeEnabled),onClick:function(){return a.onBookTypeChange(e.EBOOK)}},"eBook"),l.default.createElement("li",{className:this.getHeaderStyles("print",this.state.bookType,e.PRINT,this.state.bookTypeEnabled),onClick:function(){return a.onBookTypeChange(e.PRINT)}},"Print")),l.default.createElement("ul",{className:"period"},l.default.createElement("li",{className:this.getHeaderStyles("",this.state.period,"daily",this.state.periodEnabled)},l.default.createElement("a",{onClick:function(){return a.onPeriodChange("daily")}},"Daily")),l.default.createElement("li",{className:this.getHeaderStyles("",this.state.period,"weekly",this.state.periodEnabled)},l.default.createElement("a",{onClick:function(){return a.onPeriodChange("weekly")}},"Weekly")),l.default.createElement("li",{className:this.getHeaderStyles("",this.state.period,"monthly",this.state.periodEnabled)},l.default.createElement("a",{onClick:function(){return a.onPeriodChange("monthly")}},"Monthly")))),l.default.createElement(m.default,{action:this.onFreeFilterToggle,initValue:!0,containerStyle:{marginRight:10,marginTop:10},disabled:!n,visible:t,labelText:"Include Free Units",labelLeft:!0,labelStyle:{color:"#999999"}}),l.default.createElement("div",{className:"widget-information"},l.default.createElement("div",{className:"booktype-"+this.state.bookType.toLowerCase()},l.default.createElement(f.default,null,l.default.createElement(p.default,{id:"srGradient-0",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]}),l.default.createElement(p.default,{id:"srGradient-1",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]}),l.default.createElement(p.default,{id:"srGradient-2",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]})),!d.default.hasUserPublishedBefore()&&l.default.createElement("div",{className:"no-publish-indicator"},l.default.createElement("table",{cellPadding:"0",cellSpacing:"0"},l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,this.state.noPublishText,l.default.createElement("br",null),l.default.createElement(u.Link,{to:"/build-a-book/choose-book-type"},"Create a book to get started")))))),l.default.createElement(s.default,{type:this.props.chartType,disabled:!d.default.hasUserPublishedBefore(),format:this.props.chartLabelFormat,categories:this.state.categories,series:this.state.series,stackable:this.props.stackable,applyColumnLabel:o,formatYAxisLabel:function(e){var t=e.value;return"unitsSold"===a.props.dataIdentifier?h.formatWithCommas(t):t=a.state.data&&a.state.data.royaltyCurrencySymbol?a.state.data.royaltyCurrencySymbol+h.formatWithCommas(t):h.formatWithCommas(t)},onBarItemClicked:this.onBarItemClicked})))),this.state.loadingBook&&l.default.createElement("div",{className:"spinner-area"},l.default.createElement(y.default,null)),this.state.loadingPeriod&&l.default.createElement("div",{className:"spinner-area"},l.default.createElement(y.default,null)),this.state.loadingToggle&&l.default.createElement("div",{className:"spinner-area"},l.default.createElement(y.default,null))))}},{key:"dataIdentifier",get:function(){return this.props.dataIdentifier}},{key:"heading",get:function(){return this.props.heading}}])&&g(t.prototype,a),n&&g(t,n),r}();t.default=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadChart=function(e,t,a,n,o){r.loadChart(e,t,a,o).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.loadReportMetadata=function(t,e){r.loadReportMetadata(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadReportData=function(e,t,a,n){r.loadReportData(e,t,n).then(function(e){try{a(e)}catch(e){console.log(e)}})};var r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(1644))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadChart=function(e,t,a,n){var o="/api/salesreporting/chart?dataIdentifier="+e+"&bookType="+t+"&period="+a;return r.get(o,n)},t.loadReportMetadata=function(e){return r.get("/api/salesreporting/metadata",e)},t.loadReportData=function(e,t,a){var n="/api/salesreporting/"+e+function(e){var t=[],a=e.toJSON();for(var n in a)a[n]&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(a[n]));return 0<t.length?"?"+t.join("&"):""}(t);return r.get(n,a)};var r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(67))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=w(a(0)),l=w(a(1)),i=w(a(90)),s=w(a(13)),u=a(2),n=a(535),r=w(a(1646)),c=w(a(648)),d=w(a(46)),f=w(a(209)),p=w(a(210)),m=w(a(134)),h=w(a(3)),y=P(a(26)),b=(P(a(193)),P(a(84))),g=P(a(57)),v=w(a(4)),E=w(a(51)),S=P(a(22)),k=a(7);function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function w(e){return e&&e.__esModule?e:{default:e}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var D=(0,n.createChart)(r.default),j=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=N(r).call(this,e))||"object"!==O(n)&&"function"!=typeof n?T(a):n;var o=E.default.getEmptyGraphData(g.PERIOD_TYPES.THIRTY_DAY);return t.dataRequestId=null,t.determineMultiMonth=t.determineMultiMonth.bind(T(T(t))),t.getHeaderStyles=t.getHeaderStyles.bind(T(T(t))),t.getDataSourceSeries=t.getDataSourceSeries.bind(T(T(t))),t.getDataSource=t.getDataSource.bind(T(T(t))),t.raiseSalesWidgetChanged=t.raiseSalesWidgetChanged.bind(T(T(t))),t.onItemClicked=t.onItemClicked.bind(T(T(t))),t.onBookTextSearch=t.onBookTextSearch.bind(T(T(t))),t.onFilterChange=t.onFilterChange.bind(T(T(t))),t.onFreeFilterToggle=t.onFreeFilterToggle.bind(T(T(t))),t.onTabClick=t.onTabClick.bind(T(T(t))),t.onExpandCollapse=t.onExpandCollapse.bind(T(T(t))),t.state={bookType:g.BOOK_TYPES.ALL,period:g.PERIOD_TYPES.THIRTY_DAY,searchFilterOption:b.FILTER_PARAMS.default,searchText:null,currencyFormat:"",data:null,dataSources:t.getDataSource(!0,!1),isMultiMonth:!1,series:o.series.map(function(e){return 0}),categories:o.categories,noPublishText:e.noRoyaltiesText,bookTypeEnabled:!0,isFreeFilterEnabled:!0,showRoyaltyEarned:!0,showUnitsSold:!1,toggle:"1"===v.default.getPreferences().salesReporting.thirtyDayWidget.max,loadingToggle:!1,loadingSearch:!1,loadingFilter:!1},t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(r,o.default.Component),t=r,(a=[{key:"componentDidMount",value:function(){var e=this;(0,s.default)("#thirtyDay").on("hidden.bs.collapse",function(){return e.onExpandCollapse(!0)}),(0,s.default)("#thirtyDay").on("shown.bs.collapse",function(){return e.onExpandCollapse(!1)})}},{key:"componentWillReceiveProps",value:function(e){var t,a;if(a=this.getDataSource(this.state.showRoyaltyEarned,this.state.isFreeFilterEnabled),!(0,i.default)(e.data,this.state.data,{strict:!0})||this.state.dataSources.length!==a.length){t=E.default.formatSalesGraphData(this.state.period,e.data);var n=this.getDataSourceSeries(t,a);this.setState({data:e.data,isMultiMonth:this.determineMultiMonth(),currencyFormat:e.data&&e.data.royaltyCurrency?e.data.royaltyCurrency:"",series:n,dataSources:a,categories:t.categories})}this.setState({loadingToggle:!1,loadingSearch:!1,loadingFilter:!1})}},{key:"determineMultiMonth",value:function(){return(0,k.bn_moment)().month()!==(0,k.bn_moment)().subtract(30,"days").month()}},{key:"getDataSourceSeries",value:function(a,e){return e.map(function(t){var e={};return e.name=t,e.data=a.series.map(function(e){return{y:e[t],date:e.date}}),e})}},{key:"getDataSource",value:function(e,t){return e?["totalRoyalty"]:t&&this.state.bookType!==g.BOOK_TYPES.PRINT?["unitsPaid","unitsFree"]:["unitsPaid"]}},{key:"onExpandCollapse",value:function(e){var t=v.default.getPreferences();t.salesReporting.thirtyDayWidget.max=e?"0":"1",v.default.getUser().isImposter||y.savePreferences(t)}},{key:"onTabClick",value:function(e){var t,a,n=this;this.setState({loadingToggle:!0}),t=E.default.formatSalesGraphData(this.state.period,this.state.data),"royalty"===e?(a=this.getDataSource(!0,!1),this.setState({showRoyaltyEarned:!0,showUnitsSold:!1,dataSources:a,noPublishText:this.props.noRoyaltiesText,series:this.getDataSourceSeries(t,a)},function(){setTimeout(function(){n.setState({loadingToggle:!1})},1e3)})):(a=this.getDataSource(!1,this.state.isFreeFilterEnabled),this.setState({showUnitsSold:!0,showRoyaltyEarned:!1,dataSources:a,noPublishText:this.props.noSalesText,series:this.getDataSourceSeries(t,a)},function(){setTimeout(function(){n.setState({loadingToggle:!1})},1e3)}))}},{key:"onFilterChange",value:function(e){var t={};e.bookType!==this.state.bookType&&(t.bookType=e.bookType,t.searchFilterOption=e.bookType),0<Object.keys(t).length&&(this.setState(t),this.raiseSalesWidgetChanged(e.bookType,this.state.period,this.state.isFreeFilterEnabled,this.state.searchText)),this.setState({loadingFilter:!0})}},{key:"onBookTextSearch",value:function(){var e=this.refs.projectSearch.getValue();e&&0!==e.trim().length||(e=void 0),this.setState({searchText:e}),this.raiseSalesWidgetChanged(this.state.bookType,this.state.period,this.state.isFreeFilterEnabled,e),this.setState({loadingSearch:!0})}},{key:"onItemClicked",value:function(e){this.props.onSalesWidgetItemClicked&&this.props.onSalesWidgetItemClicked({date:e.date,value:e.value,period:this.state.period,bookType:this.state.bookType,searchText:this.state.searchText})}},{key:"onFreeFilterToggle",value:function(e){this.setState({isFreeFilterEnabled:e,loadingFilter:!0}),this.raiseSalesWidgetChanged(this.state.bookType,this.state.period,e,this.state.searchText)}},{key:"raiseSalesWidgetChanged",value:function(e,t,a,n){var o;this.props.onSalesWidgetChanged&&(o={dataIdentifier:this.dataIdentifier,period:t,bookType:e},void 0!==a&&(o.excludeFreeBooks=!a),o.searchText=n,this.props.onSalesWidgetChanged(o))}},{key:"getHeaderDate",value:function(){var e=E.default.getReportPeriodStartDate(this.state.period),t=E.default.getReportPeriodEndDate(this.state.period),a=e.format("MMMM YYYY");return e.month()===t.month()?a:a+" - "+t.format("MMMM YYYY")}},{key:"getHeaderStyles",value:function(e,t,a,n){return n=E.default.hasUserPublishedBefore()&&n,(0,l.default)(e,{"active-selection":t===a},{disabled:!n})}},{key:"render",value:function(){var r=this,e=g.BOOK_TYPES,t=E.default.hasUserPublishedBefore(),a=(this.state.bookType===e.ALL||this.state.bookType==e.EBOOK)&&this.state.showUnitsSold,n=this.state.searchText&&this.state.data&&this.state.data.error;return o.default.createElement("div",{className:"sales-chart-widget widget"},o.default.createElement("div",{className:"sales-line-widget widget-panel collapsible"},o.default.createElement("div",{className:"group-collapse sales-widget-collapse"},o.default.createElement("header",{className:(0,l.default)({collapsed:!this.state.toggle}),"data-toggle":"collapse",href:"#thirtyDay","aria-controls":"thirtyDay"},o.default.createElement("div",{className:"group-collapse-left"},o.default.createElement("h2",null,o.default.createElement("span",{dangerouslySetInnerHTML:{__html:this.heading}}))),o.default.createElement("div",{className:"group-collapse-right"},o.default.createElement("div",{className:"group-collapse-button"},o.default.createElement("span",{className:"icon-add"}),o.default.createElement("span",{className:"icon-remove"})))),o.default.createElement("section",{id:"thirtyDay",className:(0,l.default)("collapse ",{in:this.state.toggle})},o.default.createElement("div",{className:"widget-panel-content"},o.default.createElement("div",null,o.default.createElement("ul",{className:"nav nav-tabs"},o.default.createElement("li",{className:(0,l.default)({active:this.state.showRoyaltyEarned}),onClick:function(){return r.onTabClick("royalty")}},o.default.createElement("a",null,"Royalty Earned")),o.default.createElement("li",{className:(0,l.default)({active:this.state.showUnitsSold}),onClick:function(){return r.onTabClick("print")}},o.default.createElement("a",null,"Units Sold")))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-sm-4"},o.default.createElement(c.default,{filterType:g.FILTER_CHOOSER_TYPES.ALL,bookTypes:[{name:"all-books",type:e.ALL,text:"All Books"},{name:"ebook",type:e.EBOOK,text:"eBook"},{name:"print",type:e.PRINT,text:"Print"}],bookType:this.state.bookType,enabled:t,onFilterChange:this.onFilterChange})),o.default.createElement("div",{className:"col-sm-4 text-center"},o.default.createElement("b",null,this.getHeaderDate())),o.default.createElement("div",{className:"col-sm-4 text-right"},o.default.createElement(m.default,{action:this.onFreeFilterToggle,initValue:!0,containerStyle:{marginRight:10},disabled:!t,labelText:"Include free eBook units",labelLeft:!0,labelStyle:{color:"#999999"},visible:a}))),o.default.createElement("div",{className:"row search-row"},o.default.createElement("div",{className:"col-sm-4 search"},o.default.createElement(d.default,{ref:"projectSearch",disabled:!t,onSubmit:this.onBookTextSearch,disableValidationMessages:!0,filterOption:this.state.searchFilterOption})),o.default.createElement("div",{className:"col-sm-8 text-right legend"},o.default.createElement("div",{className:"legend-container"},a&&this.state.isFreeFilterEnabled&&o.default.createElement("span",{className:"series-2"},"Free + Sold Units"),this.state.showUnitsSold&&o.default.createElement("span",{className:"series-1-"+this.state.bookType.toLowerCase()},"Sold Units")))),o.default.createElement("div",{className:"widget-information"},o.default.createElement("div",{className:"booktype-"+this.state.bookType.toLowerCase()},o.default.createElement(f.default,null,o.default.createElement(p.default,{id:"srGradient-0",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]}),o.default.createElement(p.default,{id:"srGradient-1",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]}),o.default.createElement(p.default,{id:"srGradient-2",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]})),!E.default.hasUserPublishedBefore()&&o.default.createElement("div",{className:"no-publish-indicator"},o.default.createElement("table",{cellPadding:"0",cellSpacing:"0"},o.default.createElement("tbody",null,o.default.createElement("tr",null,o.default.createElement("td",null,this.state.noPublishText,o.default.createElement("br",null),o.default.createElement(u.Link,{to:"/build-a-book/choose-book-type"},"Create a book to get started")))))),n&&o.default.createElement("div",{className:"no-results-indicator"},o.default.createElement("table",{cellPadding:"0",cellSpacing:"0"},o.default.createElement("tbody",null,o.default.createElement("tr",null,o.default.createElement("td",{style:{textAlign:"center"}},"We found no books matching your search criteria. Please try another search.",o.default.createElement("div",null,"Â "),"Search Term: ",o.default.createElement("b",null,this.state.searchText),o.default.createElement("div",null,"Â "),"Book Type:Â ",o.default.createElement("b",null,this.state.bookType===e.PRINT?"PRINT":this.state.bookType)))))),o.default.createElement(D,{type:this.props.chartType,disabled:!E.default.hasUserPublishedBefore(),format:this.props.chartLabelFormat,categories:this.state.categories,series:this.state.series,removeUnusedSeries:!0,onItemClicked:this.onItemClicked,formatXAxisLabel:function(e){var t,a,n=e.value;return r.state.isMultiMonth&&0<e.chart.series[0].data.length&&(t=e.chart.series[0].data[e.pos].date,a=(0,k.bn_moment)().month(),t&&(0,k.bn_moment)(t,"MM-DD-YYYY").month()===a&&(n='<span class="month-break-marker">'+n+"</span>")),n},formatYAxisLabel:function(e){var t=e.value;return r.state.showRoyaltyEarned&&(t=r.state.data&&r.state.data.royaltyCurrencySymbol?r.state.data.royaltyCurrencySymbol+S.formatWithCommas(t):S.formatWithCommas(t)),t},formatLegendLabel:function(e){return r.state.showRoyaltyEarned?"Total Royalty":0===e?"Paid Units Sold":"Paid + Free Units Sold"},formatTooltip:function(a){var n="<b>";if(r.state.showRoyaltyEarned)n+=S.formatCurrency(a[0].y,r.state.currencyFormat,0)+" Earned";else{n="<b>";var o=a.length;a.forEach(function(e,t){n+=1===o?e.y+" Sold":0===t?e.y+" Sold / ":e.y-a[0].y+" Free"})}return n+="</b>"}})))))),this.state.loadingFilter&&o.default.createElement("div",{className:"spinner-area"},o.default.createElement(h.default,null)),this.state.loadingSearch&&o.default.createElement("div",{className:"spinner-area"},o.default.createElement(h.default,null)),this.state.loadingToggle&&o.default.createElement("div",{className:"spinner-area"},o.default.createElement(h.default,null))))}},{key:"dataIdentifier",get:function(){return this.props.dataIdentifier}},{key:"heading",get:function(){return this.props.heading}}])&&C(t.prototype,a),n&&C(t,n),r}();t.default=j},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(a(22)),n(a(148)));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){o(t,e,a[e])})}return t}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?f(a):n).yAxisLabelFormatter=function(e){return e.value},t.adjustMultiLine=t.adjustMultiLine.bind(f(f(t))),t.getInitialState=t.getInitialState.bind(f(f(t))),t.getExtraSeriesAttributes=t.getExtraSeriesAttributes.bind(f(f(t))),t.onItemClicked=t.onItemClicked.bind(f(f(t))),t.state=t.getInitialState(),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){var t=this;this.chart=l.default.chart(this.refs.chart,{chart:s({type:"line",animation:!0,backgroundColor:null},this.state.options.chart),credits:{enabled:!1},legend:{enabled:!1,align:"right",verticalAlign:"top",layout:"vertical",labelFormatter:function(){if(t.props.formatLegendLabel)return t.props.formatLegendLabel(this.index)},x:0,y:100},title:s({},this.state.options.title),xAxis:{categories:this.state.options.categories,crosshair:!0,labels:{useHTML:!0,formatter:function(){var e=this.value;return t.props.formatXAxisLabel&&(e=t.props.formatXAxisLabel(this)),e}}},yAxis:{min:0,max:100,tickAmount:8,allowDecimals:!1,title:{text:null},labels:{formatter:function(){return t.props.formatYAxisLabel?t.props.formatYAxisLabel(this):t.yAxisLabelFormatter(this)}}},tooltip:{enabled:!0,positioner:function(e,t,a){var n=this.chart.plotBox.width,o=a.plotX;return n-o<=125&&(o=o-e+50),{x:o,y:-5}},formatter:function(){var a="";if(t.props.formatTooltip)a=t.props.formatTooltip(this.points);else{a="<b>";this.points.length;this.points.forEach(function(e,t){a+=0===t?e.y+" / ":e.y}),a+="</b>"}return a},useHTML:!0,shadow:!1,borderWidth:0,style:{padding:0},shared:!0},plotOptions:{column:{pointPadding:-.2,borderWidth:0,events:{click:function(e){}}},series:{cursor:"pointer",dataLabels:{enabled:!0,inside:!1,crop:!1,overflow:!1,verticalAlign:"bottom",formatter:function(){}},point:{events:{click:function(){t.onItemClicked(this)}}}}},series:[{data:this.state.options.series,color:"white"}]})}},{key:"componentWillReceiveProps",value:function(e){this.props.series===e.series&&this.props.categories===e.categories||this.props.updateChart(this.chart,e.categories,this.adjustMultiLine(e.series),this.yAxisLabelFormatter)}},{key:"adjustMultiLine",value:function(e){for(var t=[e[0]],a=1;a<e.length;a++){for(var n=[],o=0;o<e[a].data.length;o++)0<e[a].data[o].y?n.push({y:e[a-1].data[o].y+e[a].data[o].y,date:e[a].data[o].date}):n.push(e[a-1].data[o]);t.push({name:e[a].name,data:n})}return t}},{key:"getExtraSeriesAttributes",value:function(e){return{marker:{symbol:"circle"}}}},{key:"onItemClicked",value:function(e){this.props.onItemClicked&&this.props.onItemClicked({date:e.date,value:e.y})}},{key:"getInitialState",value:function(){var e={options:{chart:{},title:{text:null}}};return this.props.title?e.options.title.text=this.props.title:e.options.chart.marginTop=30,this.props.subtitle&&(e.options.subtitle={text:this.props.subtitle}),e.options.categories=this.props.categories,e.options.series=this.props.series,e}},{key:"render",value:function(){return r.default.createElement("div",{className:this.props.disabled?"disabled":""},r.default.createElement("div",{ref:"chart",className:"line-chart"}))}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=p},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var W=r(a(0)),H=r(a(1)),G=a(2),o=r(a(13)),m=(r(a(90)),r(a(4))),h=n(a(26)),z=r(a(650)),K=a(7),y=r(a(120)),q=r(a(1648)),l=n(a(174)),$=n(a(57)),Q=r(a(51)),X=r(a(209)),Z=r(a(210)),J=r(a(134)),ee=n(a(22)),te=(n(a(193)),r(a(389)),r(a(3))),ae=r(a(61));a(122);function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=u(r).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n;var o=Q.default.getEmptySeriesSalesGraphData($.PERIOD_TYPES.SEVEN_DAY);return t._dataPointers=new Map,t._reportRequestPointers=new Map,t.state={bookType:$.BOOK_TYPES.ALL,dataSources:t.getDataSource(!0,!1),periodType:$.PERIOD_TYPES.SEVEN_DAY,isFreeFilterEnabled:!0,isMultiMonth:!1,series:[{name:"empty",data:o&&o.series.map(function(e){return 0}),toolTipDataDetails:[]}],categories:o&&o.categories,seriesBreakdown:[],seriesNames:t.props.seriesNames,seriesName:null,showRoyaltyEarned:!0,showUnitsSold:!1,toggle:!(!m.default.getPreferences().salesReporting[t.props.name]||"1"!==m.default.getPreferences().salesReporting[t.props.name].max),initSeriesName:m.default.getPreferences().salesReporting[t.props.name]&&m.default.getPreferences().salesReporting[t.props.name].lastSeriesSelected?m.default.getPreferences().salesReporting[t.props.name].lastSeriesSelected:null,startDate:null,endDate:null,data:null,loadingFilter:!1,loadingToggle:!1,publicationStartDate:!0,salesEndDate:!0,isSeriesSelected:!1,loadingPeriod:!1,loadingBook:!1,tooltipContents:[],vardiff:0,monthendValState:"",monthStartValState:"",showPagination:!1,bookPublicationDate:null,isLoadingTab:!0,noBookData:!1,tabActive:"",isCustomRange:!1,customRange:{name:"CustomDateRange",value:null,units:"day",defaultStartDateFromMaxEndDate:null},isCustomDatePaginate:!1,customDuration:null,disableBothPagination:!1,isMobileView:!1},t.applyColumnLabel=t.applyColumnLabel.bind(d(d(t))),t.applyThirtyDayLabel=t.applyThirtyDayLabel.bind(d(d(t))),t.determineMultiMonth=t.determineMultiMonth.bind(d(d(t))),t.getDataSource=t.getDataSource.bind(d(d(t))),t.getDataSourceSeries=t.getDataSourceSeries.bind(d(d(t))),t.formatTooltip=t.formatTooltip.bind(d(d(t))),t.onExpandCollapse=t.onExpandCollapse.bind(d(d(t))),t.onFilterChange=t.onFilterChange.bind(d(d(t))),t.onFreeFilterToggle=t.onFreeFilterToggle.bind(d(d(t))),t.onTabClick=t.onTabClick.bind(d(d(t))),t.raiseWidgetChanged=t.raiseWidgetChanged.bind(d(d(t))),t.getDateSpanSeries=t.getDateSpanSeries.bind(d(d(t))),t.onBarItemClicked=t.onBarItemClicked.bind(d(d(t))),t.seriesSalesPaginationClick=t.seriesSalesPaginationClick.bind(d(d(t))),t.changeStateLeftArrow=t.changeStateLeftArrow.bind(d(d(t))),t.changeStateRightArrow=t.changeStateRightArrow.bind(d(d(t))),t.showHidePagination=t.showHidePagination.bind(d(d(t))),t.handleResize=t.handleResize.bind(d(d(t))),t.onMoreDetailsClick=t.onMoreDetailsClick.bind(d(d(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,W.default.Component),t=r,(a=[{key:"handleResize",value:function(){window.innerWidth<768?this.setState({isMobileView:!0}):this.setState({isMobileView:!1})}},{key:"componentWillMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentDidMount",value:function(){var e=this;this.handleResize();var t="#"+this.props.name;(0,o.default)(t).on("hidden.bs.collapse",function(){return e.onExpandCollapse(!0)}),(0,o.default)(t).on("shown.bs.collapse",function(){return e.onExpandCollapse(!1)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"componentWillReceiveProps",value:function(e){var t,a,n=!1;if(a=this.getDataSource(this.state.showRoyaltyEarned,this.state.isFreeFilterEnabled),e.data){(e.data.reportType===$.REPORT_TYPES.SERIES_SALES_BY_DAY||$.REPORT_TYPES.SERIES_SALES_BY_MONTH)&&(n=!0),t=Q.default.formatSeriesSalesGraphData(this.state.periodType,e.data,n);var o=this.getDataSourceSeries(t,a,e.data),r=!1;if(e.data.reportsRecord.length<1)r=!0;else for(var l=0;l<e.data.reportsRecord.length;l++)r=0==e.data.reportsRecord[l].series.length;this.setState({data:e.data,isMultiMonth:this.determineMultiMonth(),currencyFormat:e.data&&e.data.royaltyCurrency?e.data.royaltyCurrency:"",royaltyCurrencySymbol:e.data.reportsRecord&&0<e.data.reportsRecord.length?e.data.reportsRecord[0].royaltyCurrencySymbol:"",series:o,seriesBreakdown:this.formatTooltip(e.data),dataSources:a,categories:t.categories,noBookData:r,toggle:!!(0<e.seriesNames.length&&m.default.getPreferences().salesReporting[this.props.name]&&"1"===m.default.getPreferences().salesReporting[this.props.name].max)}),e.seriesNames.length!==this.state.seriesNames.length&&this.setState({seriesNames:e.seriesNames}),this.setState({loadingToggle:!1,loadingFilter:!1})}this.changeStateLeftArrow(this.state.startDate)}},{key:"applyColumnLabel",value:function(e,t){var a={items:{}};if(void 0!==t.empty)return t.empty;for(var n=0;n<this.state.dataSources.length;n++){var o=void 0!==t[this.state.dataSources[n]]?t[this.state.dataSources[n]]:0;a.items[this.state.dataSources[n]]=o}return a.isFreeFilterEnabled=this.state.bookType!==$.BOOK_TYPES.PRINT&&this.state.isFreeFilterEnabled,a.seriesIndex=t.seriesIndex,12<this.state.categories.length?this.props.applyColumnLabel?this.applyThirtyDayLabel(e,a):"":this.props.applyColumnLabel?this.props.applyColumnLabel(e,a):""}},{key:"applyThirtyDayLabel",value:function(e,t){return t.isFreeFilterEnabled?ee.formatWithCommas(t.items.unitsFree)+" F <br />"+ee.formatWithCommas(t.items.unitsPaid)+" S":ee.formatWithCommas(t.items.unitsPaid)+" S"}},{key:"raiseWidgetChanged",value:function(e,t,a,n,o,r,l){var i=this,s={},u=!1,c=!1;if("CustomDateRange"==t.name&&(c=!!(0,K.bn_moment)(r,"M-D-YY").isBefore((0,K.bn_moment)(o,"M-D-YY")),u=30<y.default.duration((0,K.bn_moment)(r).diff((0,K.bn_moment)(o)))/864e5),e!==this.state.bookType&&(s.bookType=e,this.setState({loadingBook:!0}),setTimeout(function(){i.setState({loadingBook:!1})},3e3)),t!==this.state.periodType&&(s.periodType=t,this.setState({loadingPeriod:!0}),setTimeout(function(){i.setState({loadingPeriod:!1})},4e3)),a!==this.state.includeFreeBooks&&(s.includeFreeBooks=a),n!==this.state.seriesName){if(s.seriesName=n){var d=m.default.getPreferences();if(!m.default.getUser().isImposter&&!m.default.getUser().authorShareKey){var f=n,p=d.salesReporting[this.props.name].lastSeriesSelectedContributor?d.salesReporting[this.props.name].lastSeriesSelectedContributor:null;d.salesReporting[this.props.name]={lastSeriesSelected:f,lastSeriesSelectedContributor:p,max:d.salesReporting[this.props.name].max},h.savePreferences(d)}}this.setState({isSeriesSelected:!0}),setTimeout(function(){i.setState({isSeriesSelected:!1})},2e3)}o!==this.state.startDate&&(s.startDate=o,((0,K.bn_moment)(r).isBefore((0,K.bn_moment)(o))||u)&&this.state.periodType.name&&"CustomDateRange"==this.state.periodType.name?this.setState({publicationStartDate:!0,salesEndDate:!0,disableBothPagination:!0}):(this.setState({disableBothPagination:!1}),this.changeStateLeftArrow(o))),r!==this.state.endDate&&(s.endDate=r,((0,K.bn_moment)(r).isBefore((0,K.bn_moment)(o))||u)&&this.state.periodType.name&&"CustomDateRange"==this.state.periodType.name?this.setState({publicationStartDate:!0,salesEndDate:!0,disableBothPagination:!0}):(this.setState({disableBothPagination:!1}),this.changeStateRightArrow(r))),l&&l!==this.state.tabActive&&(this.setState({isLoadingTab:!0,tabActive:l}),setTimeout(function(){i.setState({isLoadingTab:!1})},4e3)),Object.keys(s).length&&this.setState(s),e==this.state.bookType&&n==this.state.seriesName&&l==this.state.activeTab&&a==this.state.includeFreeBooks&&"CustomDateRange"==this.state.periodType.name&&new Date(o).toDateString()==new Date(this.state.startDate).toDateString()&&new Date(r).toDateString()==new Date(this.state.endDate).toDateString()||u||c||this.props.onSalesWidgetChanged(this.props.groupByBook,e,n,o,r,this.state.showRoyaltyEarned,a,t)}},{key:"formatTooltip",value:function(e){var t=[];if(0<e.reportsRecord.length){for(var a=0;a<e.reportsRecord.length;a++)e.reportsRecord[a].series&&t.push(e.reportsRecord[a].series);var n=[];n=this.props.groupByBook?t.map(function(e){return e.map(function(e){return{seriesNumber:e.seriesNumber,title:e.title,royalty:e.totalRoyalty,freeUnitsSold:e.totalFreeUnitsSold,paidUnitsSold:e.totalPaidUnitsSold}})}):t.map(function(e){return e.map(function(e){return{seriesNumber:e.seriesNumber,title:e.title,royalty:e.totalRoyalty,freeUnitsSold:e.totalFreeUnitsSold,paidUnitsSold:e.totalPaidUnitsSold}})}),this.setState({tooltipContents:n})}}},{key:"getDataSource",value:function(e,t){return e?["totalRoyalty"]:t&&this.state.bookType!==$.BOOK_TYPES.PRINT?["unitsFree","unitsPaid"]:["unitsPaid"]}},{key:"getDataSourceSeries",value:function(r,e,l){return e.map(function(t){var e={};e.name=t,e.data=r.series.map(function(e){return{y:e[t],date:e.date?e.date:e.seriesNumber}});var a=[],n=[];if(l&&0<l.reportsRecord.length){for(var o=0;o<l.reportsRecord.length;o++)l.reportsRecord[o].series&&a.push(l.reportsRecord[o].series);n=a.map(function(e){return e.map(function(e){return{seriesNumber:e.seriesNumber,title:e.title,royalty:e.totalRoyalty,freeUnitsSold:e.totalFreeUnitsSold,paidUnitsSold:e.totalPaidUnitsSold}})})}return e.toolTipDataDetails=n,e})}},{key:"determineMultiMonth",value:function(){return(0,K.bn_moment)().month()!==(0,K.bn_moment)().subtract(30,"days").month()}},{key:"onExpandCollapse",value:function(e){var t=m.default.getPreferences();if(!m.default.getUser().isImposter&&!m.default.getUser().authorShareKey){var a=this.state.seriesName,n=t.salesReporting[this.props.name].lastSeriesSelectedContributor?t.salesReporting[this.props.name].lastSeriesSelectedContributor:null;t.salesReporting[this.props.name]={lastSeriesSelected:a,lastSeriesSelectedContributor:n,max:e?"0":"1"},h.savePreferences(t)}}},{key:"onFilterChange",value:function(e){var t,a=this;"CustomDateRange"==e.period.name?(t=y.default.duration((0,K.bn_moment)(e.endDate).diff(e.startDate))/864e5,this.setState({customDuration:t}),this.state.isCustomRange?e.startDate&&e.endDate&&this.state.isCustomRange&&(this.setState({loadingFilter:!0,isCustomDatePaginate:!1,customRange:{name:"CustomDateRange",value:null,units:"day",defaultStartDateFromMaxEndDate:null}}),setTimeout(function(){a.setState({loadingFilter:!1})},1e4)):(e.startDate=null,e.endDate=null,this.setState({series:[{data:Q.default.getEmptySeriesSalesGraphData($.PERIOD_TYPES.SEVEN_DAY)}],isCustomRange:!0,loadingFilter:!0,isCustomDatePaginate:!1,customRange:{name:"CustomDateRange",value:null,units:"day",defaultStartDateFromMaxEndDate:null}}),setTimeout(function(){a.setState({loadingFilter:!1})},3e3)),this.raiseWidgetChanged(e.bookType,e.period,this.state.isFreeFilterEnabled,e.seriesName,e.startDate,e.endDate)):"CustomDateRange"!=e.period.name&&(this.raiseWidgetChanged(e.bookType,e.period,this.state.isFreeFilterEnabled,e.seriesName,e.startDate,e.endDate),this.setState({isCustomRange:!1,loadingFilter:!0,isCustomDatePaginate:!1,customRange:{name:"CustomDateRange",value:null,units:"day",defaultStartDateFromMaxEndDate:null}}),setTimeout(function(){a.setState({loadingFilter:!1})},3e3))}},{key:"onFreeFilterToggle",value:function(e){var t=this;this.setState({isFreeFilterEnabled:e,loadingToggle:!0}),setTimeout(function(){t.setState({loadingToggle:!1})},3e3),this.raiseWidgetChanged(this.state.bookType,this.state.periodType,e,this.state.seriesName,this.state.startDate,this.state.endDate)}},{key:"onBarItemClicked",value:function(e){var t,a;if(!this.state.isMobileView)if(this.props.onSalesWidgetItemClicked&&e.date&&!this.props.groupByBook){"quarterly"==this.state.periodType||"semiAnnually"==this.state.periodType||"annually"==this.state.periodType?(t=(0,K.bn_moment)(e.date,"MM-DD-YYYY").startOf("month").format("MM-DD-YYYY"),a=(0,K.bn_moment)(e.date,"MM-DD-YYYY").endOf("month").format("MM-DD-YYYY")):t=a=(0,K.bn_moment)(e.date,"MM-DD-YYYY").format("MM-DD-YYYY");var n=l.getCustomDateSalesReportPath(!0,this.state.seriesName,this.state.bookType,t,a,this.state.activeTab,!0);G.browserHistory.push(n)}else if(this.props.onSalesWidgetItemClicked&&e.date&&this.props.groupByBook){var o=this.getDateSpanSeries();t=o.fromDate,a=o.toDate;var r=l.getCustomDateSalesReportPath(!0,this.state.seriesName,this.state.bookType,t,a,this.state.activeTab,!0,e.date);G.browserHistory.push(r)}}},{key:"getDateSpanSeries",value:function(){return{fromDate:(0,K.bn_moment)(this.state.startDate).format("MM-DD-YYYY"),toDate:(0,K.bn_moment)(this.state.endDate).format("MM-DD-YYYY")}}},{key:"onTabClick",value:function(e){var t,a,n=Q.default.getEmptySeriesSalesGraphData(this.state.periodType);t=Q.default.formatSeriesSalesGraphData(this.state.periodType,this.state.data),"royaltyEarned"===e?(this.state.seriesName?this.setState({series:[{name:"totalRoyalty",data:this.props.groupByBook?{y:0,date:0}:n.series.map(function(e){return 0})}]}):(a=this.getDataSource(this.state.showRoyaltyEarned,this.state.isFreeFilterEnabled),this.setState({series:this.getDataSourceSeries(t,a,this.state.data)})),this.setState({showRoyaltyEarned:!0,showUnitsSold:!1,tabActive:"royaltyEarned"})):(this.state.seriesName?this.setState({series:[{name:"unitsPaid",data:this.props.groupByBook?{y:0,date:0}:n.series.map(function(e){return 0})}]}):(a=this.getDataSource(this.state.showRoyaltyEarned,this.state.isFreeFilterEnabled),this.setState({series:this.getDataSourceSeries(t,a,this.state.data)})),this.setState({showUnitsSold:!0,showRoyaltyEarned:!1,tabActive:"unitsSold"})),this.raiseWidgetChanged(this.state.bookType,this.state.periodType,this.state.isFreeFilterEnabled,this.state.seriesName,this.state.startDate,this.state.endDate,e)}},{key:"seriesSalesPaginationClick",value:function(e){var t,a,n,o,r,l=this;if(e.stopPropagation(),e.currentTarget.classList.contains("leftPagination"))if("CustomDateRange"==this.state.periodType.name){r=y.default.duration((0,K.bn_moment)(this.state.endDate).diff(this.state.startDate))/864e5;var i=(0,K.bn_moment)(this.state.startDate).subtract(1,"day");a=(0,K.bn_moment)(i,"MM/DD/YYYY").format("MM-DD-YYYY"),n=t=null,o=(0,K.bn_moment)(a,"MM-DD-YYYY")}else{var s=(0,K.bn_moment)(this.state.startDate).subtract(1,"day");a=(0,K.bn_moment)(s,"MM/DD/YYYY").format("MM-DD-YYYY"),n=t=null,o=(0,K.bn_moment)(a,"MM-DD-YYYY")}else if(e.currentTarget.classList.contains("rightPagination"))if("CustomDateRange"==this.state.periodType.name){r=y.default.duration((0,K.bn_moment)(this.state.endDate).diff(this.state.startDate))/864e5;var u=(0,K.bn_moment)(this.state.endDate).add(1,"day");t=(0,K.bn_moment)(u,"MM/DD/YYYY").format("MM-DD-YYYY"),a=null,n=(0,K.bn_moment)(t,"MM-DD-YYYY"),o=a}else{var c=(0,K.bn_moment)(this.state.endDate).add(1,"day");t=(0,K.bn_moment)(c,"MM/DD/YYYY").format("MM-DD-YYYY"),a=null,n=(0,K.bn_moment)(t,"MM-DD-YYYY"),o=a}"CustomDateRange"==this.state.periodType.name?($.REPORT_TYPES.SERIES_SALES_BY_DAY,this.setState({isCustomDatePaginate:!0,customRange:{name:"CustomDateRange",value:r,units:"day",defaultStartDateFromMaxEndDate:null}},function(){return l.refs.childFilterChooser.onDateChange(n,o,l.state.isCustomDatePaginate)})):(this.state.periodType===$.PERIOD_TYPES.SEVEN_DAY||this.state.periodType===$.PERIOD_TYPES.THIRTY_DAY?$.REPORT_TYPES.SERIES_SALES_BY_DAY:$.REPORT_TYPES.SERIES_SALES_BY_MONTH,this.setState({isCustomDatePaginate:!1,customRange:{name:"CustomDateRange",value:null,units:"day",defaultStartDateFromMaxEndDate:null}},function(){return l.refs.childFilterChooser.onDateChange(n,o,l.state.isCustomDatePaginate)}))}},{key:"changeStateRightArrow",value:function(e){(new Date(e).toDateString()!==new Date((0,K.bn_moment)().subtract(2,"days")).toDateString()||"sevenDay"!=this.state.periodType&&"thirtyDay"!=this.state.periodType)&&(new Date(e).getMonth()!=new Date((0,K.bn_moment)().subtract(2,"days")).getMonth()||new Date(e).getFullYear()!=new Date((0,K.bn_moment)().subtract(2,"days")).getFullYear()||"quarterly"!=this.state.periodType&&"semiAnnually"!=this.state.periodType&&"annually"!=this.state.periodType)?(new Date(e).toDateString()==new Date((0,K.bn_moment)().subtract(2,"days")).toDateString()||new Date(e).valueOf()>new Date((0,K.bn_moment)().subtract(2,"days")).valueOf())&&"CustomDateRange"==this.state.periodType.name?this.setState({salesEndDate:!0}):this.setState({salesEndDate:!1}):this.setState({salesEndDate:!0})}},{key:"changeStateLeftArrow",value:function(e){var t,a=this;Q.default.bookPublicationDate&&(t=(0,K.bn_moment)(Q.default.bookPublicationDate,"YYYY-MM-DD").format("MM-DD-YYYY")),t&&(new Date(e).valueOf()<new Date(Q.default.bookPublicationDate).valueOf()||new Date(e).toDateString()==new Date(Q.default.bookPublicationDate).toDateString())?this.setState({publicationStartDate:!0},function(){return a.showHidePagination()}):(0,K.bn_moment)(this.state.endDate).isBefore((0,K.bn_moment)(e))&&"CustomDateRange"==this.state.periodType.name?this.setState({publicationStartDate:!0,salesEndDate:!0}):this.setState({publicationStartDate:!1},function(){return a.showHidePagination()})}},{key:"showHidePagination",value:function(){this.state.publicationStartDate&&new Date(this.state.endDate).toDateString()==new Date((0,K.bn_moment)().subtract(2,"days")).toDateString()?this.setState({showPagination:!1}):this.setState({showPagination:!0})}},{key:"onMoreDetailsClick",value:function(){var e,t;e=(0,K.bn_moment)(this.state.startDate,"MM-DD-YYYY").format("MM-DD-YYYY"),t=(0,K.bn_moment)(this.state.endDate,"MM-DD-YYYY").format("MM-DD-YYYY");var a=l.getCustomDateSalesReportPath(!0,this.state.seriesName,this.state.bookType,e,t,this.state.activeTab,!0);G.browserHistory.push(a)}},{key:"numberFormat",value:function(e){if(null==e||!e.toString().trim().length)return"";for(var t=e.toString().split("."),a=t[0],n=1<t.length?"."+t[1]:"",o=/(\d+)(\d{3})/;o.test(a);)a=a.replace(o,"$1,$2");return a+n}},{key:"render",value:function(){var e,t,a,n,o,r,l,S=this,i=this.state,s=i.bookType,u=i.data,c=i.isFreeFilterEnabled,d=i.periodType,f=i.showRoyaltyEarned,p=i.toggle,m=i.seriesName,h=i.seriesNames,y=i.showUnitsSold,b=i.noBookData,g=i.tabActive,v=i.customRange,E=i.disableBothPagination,k=i.isMobileView,P=i.startDate,w=i.endDate,O=i.isCustomRange,C=this.props,N=C.label,_=C.name,T=(C.groupByBook,$.BOOK_TYPES),D=_,j="#"+_,M=Q.default.hasUserPublishedBefore(),L=Q.default.hasUserSeries(),A=$.PERIOD_TYPES,B=[{name:"sevenDays",type:A.SEVEN_DAY,text:"7 Days"},{name:"thirtyDays",type:A.THIRTY_DAY,text:"30 Days"},{name:"quarterly",type:A.QUARTERLY,text:"3 Months"},{name:"semiAnnually",type:A.SEMI_ANNUALLY,text:"6 Months"},{name:"annually",type:A.ANNUALLY,text:"12 Months"},{name:"customDate",type:v,text:"Custom Date Range"}],x=(s===T.ALL||s==T.EBOOK)&&!f,R=(0,K.bn_moment)(this.state.startDate).format("MMM"),I=(0,K.bn_moment)(this.state.startDate).format("D"),F=(0,K.bn_moment)(this.state.endDate).format("MMM"),Y=(0,K.bn_moment)(this.state.endDate).format("D");u&&u.series&&(f?u.series.sort(function(e,t){return t.totalRoyalty-e.totalRoyalty}):y&&u.series.sort(function(e,t){return t.totalPaidUnitsSold-e.totalPaidUnitsSold}),e=(o=5<u.series.length?u.series.slice(0,5):u.series).map(function(e){return 20<e.title.length?r=e.title:e.title.length<=20&&(r=e.title),(1==(a=e.totalRoyalty.split(".")).length||a[1].length<3)&&(l=Number(e.totalRoyalty).toFixed(2)),f?n=W.default.createElement("div",{className:"p-o"},W.default.createElement("div",{className:"trancate-title p-o"},W.default.createElement(ae.default,{info:!0,text:"# "+e.seriesNumber+" "+r,className:"black-font w-100",trigger:"hover"},W.default.createElement("strong",null,"#"),e.seriesNumber," ",r))," ",W.default.createElement("span",{className:"royaltyText alignRight"},e.royaltyCurrencySymbol,S.numberFormat(l))):y&&(n=W.default.createElement("div",{className:"p-o"},W.default.createElement("div",{className:"trancate-title-1 p-o"},W.default.createElement(ae.default,{info:!0,text:"# "+e.seriesNumber+" "+r,className:"black-font w-100",trigger:"hover"},W.default.createElement("strong",null,"#"),e.seriesNumber," ",r))," ",W.default.createElement("span",{className:"royaltyText alignRight"},c&&W.default.createElement("span",{className:"freeUnit"},"Free: ",e.totalFreeUnitsSold),"Sold: ",S.numberFormat(e.totalPaidUnitsSold)))),o&&0<o.length&&o.length<5?(1==o.length&&(t=W.default.createElement("div",{className:"noTooltipData noData4"},W.default.createElement("span",null,"-"),W.default.createElement("span",null,"-"),W.default.createElement("span",null,"-"),W.default.createElement("span",null,"-"))),2==o.length&&(t=W.default.createElement("div",{className:"noTooltipData noData3"},W.default.createElement("span",null,"-"),W.default.createElement("span",null,"-"),W.default.createElement("span",null,"-"))),3==o.length&&(t=W.default.createElement("div",{className:"noTooltipData noData2"},W.default.createElement("span",null,"-"),W.default.createElement("span",null,"-"))),4==o.length&&(t=W.default.createElement("div",{className:"noTooltipData noData1"},W.default.createElement("span",null,"-")))):t="",W.default.createElement("div",{className:"saleSummaryParent",key:S.props.groupByBook?e.ean+"book":e.ean},5==o.length&&W.default.createElement("div",{className:"saleSummary5row"},n),5!=o.length&&W.default.createElement("div",{className:"saleSummary"},n))}));var U=!1;M&&L?U=!1:M&&!L?U=!0:M||L?!M&&L&&(U=!0):U=!0;var V;return V=this.state.monthStartValState==this.state.monthendValState,W.default.createElement("div",{className:y?"unitsSoldTab widget series-sales-widget":"widget series-sales-widget"},W.default.createElement("div",{className:c?"bothFreeSold":"onlySold"},W.default.createElement("div",{className:O?"isCustomDateRange":"notCustomDateRange"},W.default.createElement("div",{className:"widget-panel collapsible"},W.default.createElement("div",{className:"group-collapse sales-widget-collapse"},W.default.createElement("header",{className:(0,H.default)({collapsed:!p}),"data-toggle":"collapse",href:j,"aria-controls":D},W.default.createElement("div",{className:"group-collapse-left"},W.default.createElement("h2",null,W.default.createElement("span",null,N))),W.default.createElement("div",{className:"group-collapse-right"},W.default.createElement("div",{className:"group-collapse-button"},W.default.createElement("span",{className:"icon-add"}),W.default.createElement("span",{className:"icon-remove"})))),W.default.createElement("section",{id:D,className:(0,H.default)("collapse ",{in:p})},W.default.createElement("div",{className:"quarterly"==d||"semiAnnually"==d||"annually"==d?"graphByMonth widget-panel-content":"widget-panel-content"},W.default.createElement("div",null,W.default.createElement("ul",{className:(0,H.default)("nav nav-tabs")},W.default.createElement("li",{className:(0,H.default)({active:f}),onClick:function(){return S.onTabClick("royaltyEarned")}},W.default.createElement("a",null,"Royalty Earned")),W.default.createElement("li",{className:(0,H.default)({active:y}),onClick:function(){return S.onTabClick("unitsSold")}},W.default.createElement("a",null,"Units Sold")))),this.state.seriesName&&this.state.showPagination&&this.state.startDate&&this.state.endDate&&W.default.createElement("div",null,this.state.publicationStartDate&&!E&&W.default.createElement("div",{className:"sevenDay"==this.state.periodType||"thirtyDay"==this.state.periodType?"newpagination daysRightPaginate":"newpagination"},W.default.createElement("button",{disabled:this.state.publicationStartDate,className:this.state.periodType.name&&"CustomDateRange"==this.state.periodType.name?"paginationLeftDisabled customdateLeftArrow":"paginationLeftDisabled","aria-hidden":"true",onClick:this.seriesSalesPaginationClick},"Â "),"Â Â Â Â Â ",W.default.createElement("button",{disabled:this.state.salesEndDate,className:this.state.periodType.name&&"CustomDateRange"==this.state.periodType.name?" rightPagination customdateRightArrow":"rightPagination","aria-label":"next",onClick:this.seriesSalesPaginationClick},"Â ")),this.state.salesEndDate&&!E&&W.default.createElement("div",{className:"sevenDay"==this.state.periodType||"thirtyDay"==this.state.periodType?"newpagination daysRightPaginate":"newpagination"},W.default.createElement("button",{disabled:this.state.publicationStartDate,className:this.state.periodType.name&&"CustomDateRange"==this.state.periodType.name?"leftPagination customdateLeftArrow":"leftPagination","aria-label":"previous",onClick:this.seriesSalesPaginationClick},"Â "),"Â Â Â Â Â ",W.default.createElement("button",{disabled:this.state.salesEndDate,className:this.state.periodType.name&&"CustomDateRange"==this.state.periodType.name?" paginationRightDisabled customdateRightArrow":"paginationRightDisabled",onClick:this.seriesSalesPaginationClick,"aria-hidden":"true"},"Â ")),!this.state.salesEndDate&&!this.state.publicationStartDate&&W.default.createElement("div",{className:"sevenDay"==this.state.periodType||"thirtyDay"==this.state.periodType?"newpagination daysRightPaginate":"newpagination"},W.default.createElement("button",{disabled:this.state.publicationStartDate,className:this.state.periodType.name&&"CustomDateRange"==this.state.periodType.name?"leftPagination customdateLeftArrow":"leftPagination","aria-label":"previous",onClick:this.seriesSalesPaginationClick},"Â "),"Â Â Â Â Â ",W.default.createElement("button",{disabled:this.state.salesEndDate,className:this.state.periodType.name&&"CustomDateRange"==this.state.periodType.name?" rightPagination customdateRightArrow":"rightPagination","aria-label":"next",onClick:this.seriesSalesPaginationClick},"Â ")),E&&W.default.createElement("div",{className:"newpagination"},W.default.createElement("button",{disabled:this.state.publicationStartDate,className:"paginationLeftDisabled customdateLeftArrow","aria-hidden":"true",onClick:this.seriesSalesPaginationClick},"Â "),"Â Â Â Â Â ",W.default.createElement("button",{disabled:this.state.salesEndDate,className:"paginationRightDisabled customdateRightArrow",onClick:this.seriesSalesPaginationClick,"aria-label":"next"},"Â "))),W.default.createElement("div",{className:(0,H.default)("row",{disabled:U})},W.default.createElement("div",{className:"col-sm-12"},W.default.createElement(q.default,{ref:"childFilterChooser",filterType:$.FILTER_CHOOSER_TYPES.ALL,bookTypes:[{name:"all-books",type:T.ALL,text:"All Books"},{name:"ebook",type:T.EBOOK,text:"eBook"},{name:"print",type:T.PRINT,text:"Print"}],periodTypes:B,showDates:!0,startDate:this.state.startDate,endDate:this.state.endDate,seriesOptions:!0,initSeriesName:this.state.initSeriesName,seriesNames:h,seriesName:this.state.seriesName,bookType:s,isCustomDatePaginate:this.state.isCustomDatePaginate,period:this.state.isCustomRange?v:d,enabled:M,onFilterChange:this.onFilterChange}))),this.state.startDate&&this.state.endDate&&W.default.createElement(J.default,{action:this.onFreeFilterToggle,initValue:c,containerStyle:{marginRight:10,marginTop:10},disabled:!M,visible:x,labelText:"Include Free Units",labelLeft:!0,labelStyle:{color:"#999999"}}),W.default.createElement("div",{className:k?"mobileSvg":"desktopSvg"},W.default.createElement("div",{className:u&&u.series&&0<u.series.length?"hasData":"noData"},W.default.createElement("div",{className:y?"unitsSold widget-information chart_by_book_date":"widget-information chart_by_book_date"},W.default.createElement("div",{className:"royalty"},W.default.createElement("div",{className:"booktype-"+this.state.bookType.toLowerCase()},W.default.createElement(X.default,null,W.default.createElement(Z.default,{id:"srGradient-0",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]}),W.default.createElement(Z.default,{id:"srGradient-1",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]}),W.default.createElement(Z.default,{id:"srGradient-2",x1:0,y1:1,x2:0,y2:0,stopOffsets:["0","50%"]})),L&&0<h.length&&!m&&W.default.createElement("div",{className:"no-publish-indicator"},W.default.createElement("table",{cellPadding:"0",cellSpacing:"0"},W.default.createElement("tbody",null,W.default.createElement("tr",null,W.default.createElement("td",null,"Select a Series Name to Start"))))),m&&b&&!this.state.loadingFilter&&!this.state.loadingToggle&&!this.state.isLoadingTab&&!this.state.loadingBook&&!this.state.loadingPeriod&&!(this.state.isCustomRange&&(!this.state.startDate||!this.state.endDate))&&W.default.createElement("div",{className:"no-publish-indicator"},W.default.createElement("table",{cellPadding:"0",cellSpacing:"0"},W.default.createElement("tbody",null,W.default.createElement("tr",null,W.default.createElement("td",null,"We found no data matching your search criteria")),W.default.createElement("tr",null,W.default.createElement("td",null,"Search Term: ",m)),W.default.createElement("tr",null,W.default.createElement("td",null,"Book Type: ","SPB"==s?"Print Book":"EBOOK"==s?"eBook":"All Books")),"unitsSold"==g&&"SPB"!=s&&W.default.createElement("tr",null,W.default.createElement("td",null,"Include Free: ",c&&"SPB"!=s?"Yes":"No"))))),m&&this.state.isCustomRange&&(!this.state.startDate||!this.state.endDate)&&W.default.createElement("div",{className:"no-publish-indicator"},W.default.createElement("table",{cellPadding:"0",cellSpacing:"0"},W.default.createElement("tbody",null,W.default.createElement("tr",null,W.default.createElement("td",null,"Please select a start date and an end date â€” the maximum range is 31 days"))))),!L&&0==h.length&&!m&&!this.state.loadingFilter&&W.default.createElement("div",{className:"no-publish-indicator"},W.default.createElement("table",{cellPadding:"0",cellSpacing:"0"},W.default.createElement("tbody",null,W.default.createElement("tr",null,W.default.createElement("td",null,"You don't have any book series information yet.",W.default.createElement("br",null),W.default.createElement(G.Link,{to:"/build-a-book/choose-book-type"},"Create a book series to get started")))))),f&&m&&d&&P&&w&&u&&u.series&&0<u.series.length&&W.default.createElement("div",{className:"SummarySale royality-earned-bottom"},W.default.createElement("hr",{className:"summarySeparator"}),W.default.createElement("div",{className:"row side-margin-5"},W.default.createElement("span",{className:"royaltyDetail"},"Royalty ",R," ",I," - ",F," ",Y,": ",W.default.createElement("span",{className:"royaltyText"},u.royaltyCurrencySymbol,0<u.netRoyalty?this.numberFormat(Number(u.netRoyalty).toFixed(2)):this.numberFormat(parseInt(u.netRoyalty)))," "),W.default.createElement("span",{className:"more_detail_commonStyle w-45"},W.default.createElement("a",{className:"link_color",href:"javascript:void(0);",onClick:this.onMoreDetailsClick},"More Details"))),W.default.createElement("div",{className:"sale_sum"},e),t),f&&W.default.createElement(z.default,{ref:"royaltyChart",type:"currency",bookGraph:!!this.props.groupByBook,disabled:!m||m&&b||!this.state.startDate||!this.state.endDate,format:this.state.royaltyCurrencySymbol?this.state.royaltyCurrencySymbol:null,categories:this.state.categories,series:this.state.series,toolTipDetails:this.state.tooltipContents,periodTypesCondition:this.state.periodType,formatXAxisLabel:function(e){var t,a="",n=(0,K.bn_moment)((0,K.bn_moment)().subtract(2,"days")).format("MM-DD-YYYY"),o=((0,K.bn_moment)(S.state.startDate).format("MM-DD-YYYY"),(0,K.bn_moment)(S.state.endDate).format("MM-DD-YYYY"));if(Q.default.bookPublicationDate&&(t=(0,K.bn_moment)(Q.default.bookPublicationDate,"YYYY-MM-DD").format("MM-DD-YYYY")),"seriesGraphByDate"!=S.props.name)return e.value;if(t&&new Date(S.state.endDate).valueOf()<new Date(Q.default.bookPublicationDate).valueOf())return a=e.value,"quarterly"==S.state.periodType||"semiAnnually"==S.state.periodType||"annually"==S.state.periodType?a=(0,K.bn_moment)(a,"M-D-YY").format("MMM"):"thirtyDay"==S.state.periodType||6<S.state.customDuration&&"CustomDateRange"==S.state.periodType.name?a=(0,K.bn_moment)(a,"M-D-YY").format("D"):("sevenDay"==S.state.periodType||"CustomDateRange"==S.state.periodType.name&&S.state.customDuration<7)&&(a=(0,K.bn_moment)(a,"M-D-YY").format("M/D")),a='<span class="pastDatesColor">'+a+"</span>";if("quarterly"==S.state.periodType||"semiAnnually"==S.state.periodType||"annually"==S.state.periodType)if(a=isNaN(e.value)?e.value:"",t&&new Date(S.state.startDate).valueOf()<new Date(Q.default.bookPublicationDate).valueOf()){var r=(0,K.bn_moment)(new Date(Q.default.bookPublicationDate),"MM-DD-YYYY").format("M-D-YY"),l=(0,K.bn_moment)(new Date(Q.default.bookPublicationDate),"MM-DD-YYYY").format("MMM"),i=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");(0,K.bn_moment)(i,"M-D-YY").isBefore((0,K.bn_moment)(r,"M-D-YY"))?(a=(0,K.bn_moment)(i,"M-D-YY").format("MMM"))===l||(a='<span class="pastDatesColor">'+a+"</span>"):a=a&&(0,K.bn_moment)(a,"M-D-YY").format("MMM")}else a=a&&(0,K.bn_moment)(a,"M-D-YY").format("MMM");else if("thirtyDay"==S.state.periodType||6<S.state.customDuration&&"CustomDateRange"==S.state.periodType.name){var s,u;if(a=e.value,s=(0,K.bn_moment)(S.state.endDate).format("MMM"),u=(0,K.bn_moment)(S.state.startDate).format("MMM"),S.setState({monthendValState:s,monthStartValState:u}),t&&new Date(S.state.startDate).valueOf()<new Date(Q.default.bookPublicationDate).valueOf()){var c=(0,K.bn_moment)(new Date(Q.default.bookPublicationDate),"MM-DD-YYYY").format("M-D-YY"),d=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");if((0,K.bn_moment)(d,"M-D-YY").isBefore((0,K.bn_moment)(c,"M-D-YY")))a=d,a='<span class="pastDatesColor">'+(a=(0,K.bn_moment)(a,"M-D-YY").format("D"))+"</span>";else{var f=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");new Date(S.state.endDate).getMonth()!=new Date(S.state.startDate).getMonth()?(0,K.bn_moment)(f,"M-D-YY").isBefore((0,K.bn_moment)(o,"M-D-YY"))&&(a=(0,K.bn_moment)(f,"M-D-YY").format("MMM")===(0,K.bn_moment)(o,"M-D-YY").format("MMM")?'<span class="futureDatesColor">'+(0,K.bn_moment)(f,"M-D-YY").format("D")+"</span>":(0,K.bn_moment)(a,"M-D-YY").format("D")):a=(0,K.bn_moment)(a,"M-D-YY").format("D")}}else if(new Date((0,K.bn_moment)().subtract(2,"days")).valueOf()<new Date(S.state.endDate).valueOf()){var p=(0,K.bn_moment)(n,"MM-DD-YYYY").format("M-D-YY"),m=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");if((0,K.bn_moment)(p,"M-D-YY").isBefore((0,K.bn_moment)(m,"M-D-YY")))a=m,a='<span class="pastDatesColor">'+(a=(0,K.bn_moment)(a,"M-D-YY").format("D"))+"</span>";else{var h=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");new Date(S.state.endDate).getMonth()!=new Date(S.state.startDate).getMonth()?(0,K.bn_moment)(h,"M-D-YY").isBefore((0,K.bn_moment)(o,"M-D-YY"))&&(a=(0,K.bn_moment)(h,"M-D-YY").format("MMM")===(0,K.bn_moment)(o,"M-D-YY").format("MMM")?'<span class="futureDatesColor">'+(0,K.bn_moment)(h,"M-D-YY").format("D")+"</span>":(0,K.bn_moment)(a,"M-D-YY").format("D")):a=(0,K.bn_moment)(a,"M-D-YY").format("D")}}else{var y=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");new Date(S.state.endDate).getMonth()!=new Date(S.state.startDate).getMonth()?((0,K.bn_moment)(y,"M-D-YY").isBefore((0,K.bn_moment)(o,"M-D-YY"))||(0,K.bn_moment)(y,"M-D-YY").isSame((0,K.bn_moment)(o,"M-D-YY")))&&(a=(0,K.bn_moment)(y,"M-D-YY").format("MMM")===(0,K.bn_moment)(o,"M-D-YY").format("MMM")?'<span class="futureDatesColor">'+(0,K.bn_moment)(y,"M-D-YY").format("D")+"</span>":(0,K.bn_moment)(a,"M-D-YY").format("D")):a=(0,K.bn_moment)(a,"M-D-YY").format("D")}}else if("sevenDay"==S.state.periodType||"CustomDateRange"==S.state.periodType.name&&S.state.customDuration<7)if(a=e.value,t&&new Date(S.state.startDate).valueOf()<new Date(Q.default.bookPublicationDate).valueOf()){var b=(0,K.bn_moment)(new Date(Q.default.bookPublicationDate),"MM-DD-YYYY").format("M-D-YY"),g=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");a=(0,K.bn_moment)(g,"M-D-YY").isBefore((0,K.bn_moment)(b,"M-D-YY"))?(a=g,'<span class="pastDatesColor">'+(a=(0,K.bn_moment)(a,"M-D-YY").format("M/D"))+"</span>"):(0,K.bn_moment)(a,"M-D-YY").format("M/D")}else if(new Date((0,K.bn_moment)().subtract(2,"days")).valueOf()<new Date(S.state.endDate).valueOf()){var v=(0,K.bn_moment)(n,"MM-DD-YYYY").format("M-D-YY"),E=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");a=(0,K.bn_moment)(v,"M-D-YY").isBefore((0,K.bn_moment)(E,"M-D-YY"))?(a=E,'<span class="pastDatesColor">'+(a=(0,K.bn_moment)(a,"M-D-YY").format("M/D"))+"</span>"):(0,K.bn_moment)(a,"M-D-YY").format("M/D")}else a=(0,K.bn_moment)(a,"M-D-YY").format("M/D");return a},formatYAxisLabel:function(e){var t=e.value;return S.state.showUnitsSold?t:t=S.state.data&&S.state.data.royaltyCurrencySymbol?S.state.data.royaltyCurrencySymbol+ee.formatWithCommas(t):ee.formatWithCommas(t)},toolTipEnable:this.props.toolTipOnClickEnable,tooltipOnClick:!1,xAxisTitle:this.props.xAxisTitle,maxPointWidth:100,alwaysShowDesktopLabels:!0,seriesBreakdown:this.state.seriesBreakdown,onBarItemClicked:this.onBarItemClicked,isFreeFilterEnabled:c,p_type:this.state.periodType,sortBy:"royalty",mobileViewClick:!0,seriesName:this.state.seriesName,bookType:this.state.bookType,tabActive:this.state.tabActive,getDateSpanSeries:this.getDateSpanSeries,isMobileView:this.state.isMobileView}),y&&m&&d&&P&&w&&u&&u.series&&0<u.series.length&&W.default.createElement("div",{className:"SummarySale"},W.default.createElement("div",{className:"row side-margin-5"},W.default.createElement("span",{className:"royaltyDetail w-100"},"Units Sold ",R," ",I," - ",F," ",Y,": ",W.default.createElement("span",{className:"royaltyText"},u.netUnitsSold)," "),W.default.createElement("span",{className:"more_detail_commonStyle w-100"},W.default.createElement("a",{className:"link_color",href:"javascript:void(0);",onClick:this.onMoreDetailsClick},"More Details"))),c&&W.default.createElement("div",{className:"side-margin-5"},W.default.createElement("span",{className:"royaltyDetail"},"Free: ",W.default.createElement("span",{className:"royaltyText"},u.netFreeUnitsSold)," | "),W.default.createElement("span",{className:"royaltyDetail"},"Sold: ",W.default.createElement("span",{className:"royaltyText"},u.netPaidUnitsSold)," ")),W.default.createElement("div",{className:"sale_sum"},e),t),y&&W.default.createElement(z.default,{ref:"unitChart",type:"text",disabled:!m||m&&b||!this.state.startDate||!this.state.endDate,bookGraph:!!this.props.groupByBook,categories:this.state.categories,series:this.state.series,toolTipDetails:this.state.tooltipContents,periodTypesCondition:this.state.periodType,formatXAxisLabel:function(e){var t,a="",n=(0,K.bn_moment)((0,K.bn_moment)().subtract(2,"days")).format("MM-DD-YYYY"),o=((0,K.bn_moment)(S.state.startDate).format("MM-DD-YYYY"),(0,K.bn_moment)(S.state.endDate).format("MM-DD-YYYY"));if(Q.default.bookPublicationDate&&(t=(0,K.bn_moment)(Q.default.bookPublicationDate,"YYYY-MM-DD").format("MM-DD-YYYY")),"seriesGraphByDate"!=S.props.name)return e.value;if(t&&new Date(S.state.endDate).valueOf()<new Date(Q.default.bookPublicationDate).valueOf())return a=e.value,"quarterly"==S.state.periodType||"semiAnnually"==S.state.periodType||"annually"==S.state.periodType?a=(0,K.bn_moment)(a,"M-D-YY").format("MMM"):"thirtyDay"==S.state.periodType||6<S.state.customDuration&&"CustomDateRange"==S.state.periodType.name?a=(0,K.bn_moment)(a,"M-D-YY").format("D"):("sevenDay"==S.state.periodType||"CustomDateRange"==S.state.periodType.name&&S.state.customDuration<7)&&(a=(0,K.bn_moment)(a,"M-D-YY").format("M/D")),a='<span class="pastDatesColor">'+a+"</span>";if("quarterly"==S.state.periodType||"semiAnnually"==S.state.periodType||"annually"==S.state.periodType)if(a=isNaN(e.value)?e.value:"",t&&new Date(S.state.startDate).valueOf()<new Date(Q.default.bookPublicationDate).valueOf()){var r=(0,K.bn_moment)(new Date(Q.default.bookPublicationDate),"MM-DD-YYYY").format("M-D-YY"),l=(0,K.bn_moment)(new Date(Q.default.bookPublicationDate),"MM-DD-YYYY").format("MMM"),i=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");(0,K.bn_moment)(i,"M-D-YY").isBefore((0,K.bn_moment)(r,"M-D-YY"))?(a=(0,K.bn_moment)(i,"M-D-YY").format("MMM"))===l||(a='<span class="pastDatesColor">'+a+"</span>"):a=a&&(0,K.bn_moment)(a,"M-D-YY").format("MMM")}else a=a&&(0,K.bn_moment)(a,"M-D-YY").format("MMM");else if("thirtyDay"==S.state.periodType||6<S.state.customDuration&&"CustomDateRange"==S.state.periodType.name){var s,u;if(a=e.value,s=(0,K.bn_moment)(S.state.endDate).format("MMM"),u=(0,K.bn_moment)(S.state.startDate).format("MMM"),S.setState({monthendValState:s,monthStartValState:u}),t&&new Date(S.state.startDate).valueOf()<new Date(Q.default.bookPublicationDate).valueOf()){var c=(0,K.bn_moment)(new Date(Q.default.bookPublicationDate),"MM-DD-YYYY").format("M-D-YY"),d=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");if((0,K.bn_moment)(d,"M-D-YY").isBefore((0,K.bn_moment)(c,"M-D-YY")))a=d,a='<span class="pastDatesColor">'+(a=(0,K.bn_moment)(a,"M-D-YY").format("D"))+"</span>";else{var f=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");new Date(S.state.endDate).getMonth()!=new Date(S.state.startDate).getMonth()?(0,K.bn_moment)(f,"M-D-YY").isBefore((0,K.bn_moment)(o,"M-D-YY"))&&(a=(0,K.bn_moment)(f,"M-D-YY").format("MMM")===(0,K.bn_moment)(o,"M-D-YY").format("MMM")?'<span class="futureDatesColor">'+(0,K.bn_moment)(f,"M-D-YY").format("D")+"</span>":(0,K.bn_moment)(a,"M-D-YY").format("D")):a=(0,K.bn_moment)(a,"M-D-YY").format("D")}}else if(new Date((0,K.bn_moment)().subtract(2,"days")).valueOf()<new Date(S.state.endDate).valueOf()){var p=(0,K.bn_moment)(n,"MM-DD-YYYY").format("M-D-YY"),m=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");if((0,K.bn_moment)(p,"M-D-YY").isBefore((0,K.bn_moment)(m,"M-D-YY")))a=m,a='<span class="pastDatesColor">'+(a=(0,K.bn_moment)(a,"M-D-YY").format("D"))+"</span>";else{var h=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");new Date(S.state.endDate).getMonth()!=new Date(S.state.startDate).getMonth()?(0,K.bn_moment)(h,"M-D-YY").isBefore((0,K.bn_moment)(S.state.endDate,"M-D-YY"))&&(a=(0,K.bn_moment)(h,"M-D-YY").format("MMM")===(0,K.bn_moment)(S.state.endDate,"M-D-YY").format("MMM")?'<span class="futureDatesColor">'+(0,K.bn_moment)(h,"M-D-YY").format("D")+"</span>":(0,K.bn_moment)(a,"M-D-YY").format("D")):a=(0,K.bn_moment)(a,"M-D-YY").format("D")}}else{var y=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");new Date(S.state.endDate).getMonth()!=new Date(S.state.startDate).getMonth()?((0,K.bn_moment)(y,"M-D-YY").isBefore((0,K.bn_moment)(o,"M-D-YY"))||(0,K.bn_moment)(y,"M-D-YY").isSame((0,K.bn_moment)(o,"M-D-YY")))&&(a=(0,K.bn_moment)(y,"M-D-YY").format("MMM")===(0,K.bn_moment)(o,"M-D-YY").format("MMM")?'<span class="futureDatesColor">'+(0,K.bn_moment)(y,"M-D-YY").format("D")+"</span>":(0,K.bn_moment)(a,"M-D-YY").format("D")):a=(0,K.bn_moment)(a,"M-D-YY").format("D")}}else if("sevenDay"==S.state.periodType||"CustomDateRange"==S.state.periodType.name&&S.state.customDuration<7)if(a=e.value,t&&new Date(S.state.startDate).valueOf()<new Date(Q.default.bookPublicationDate).valueOf()){var b=(0,K.bn_moment)(new Date(Q.default.bookPublicationDate),"MM-DD-YYYY").format("M-D-YY"),g=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");a=(0,K.bn_moment)(g,"M-D-YY").isBefore((0,K.bn_moment)(b,"M-D-YY"))?(a=g,'<span class="pastDatesColor">'+(a=(0,K.bn_moment)(a,"M-D-YY").format("M/D"))+"</span>"):(0,K.bn_moment)(a,"M-D-YY").format("M/D")}else if(new Date((0,K.bn_moment)().subtract(2,"days")).valueOf()<new Date(S.state.endDate).valueOf()){var v=(0,K.bn_moment)(n,"MM-DD-YYYY").format("M-D-YY"),E=(0,K.bn_moment)(a,"M-D-YY").format("M-D-YY");a=(0,K.bn_moment)(v,"M-D-YY").isBefore((0,K.bn_moment)(E,"M-D-YY"))?(a=E,'<span class="pastDatesColor">'+(a=(0,K.bn_moment)(a,"M-D-YY").format("M/D"))+"</span>"):(0,K.bn_moment)(a,"M-D-YY").format("M/D")}else a=(0,K.bn_moment)(a,"M-D-YY").format("M/D");return a},stackable:!0,applyColumnLabel:this.applyColumnLabel,showUnitsSold:y,formatYAxisLabel:function(e){var t=e.value;return S.state.showUnitsSold?t:t=S.state.data&&S.state.data.royaltyCurrencySymbol?S.state.data.royaltyCurrencySymbol+ee.formatWithCommas(t):ee.formatWithCommas(t)},toolTipEnable:this.props.toolTipOnClickEnable,tooltipOnClick:!1,xAxisTitle:this.props.xAxisTitle,maxPointWidth:100,alwaysShowDesktopLabels:!0,seriesBreakdown:this.state.seriesBreakdown,onBarItemClicked:this.onBarItemClicked,isFreeFilterEnabled:c,sortBy:"unitsold",p_type:this.state.periodType,mobileViewClick:!0,seriesName:this.state.seriesName,bookType:this.state.bookType,tabActive:this.state.tabActive,getDateSpanSeries:this.getDateSpanSeries,isMobileView:this.state.isMobileView}),("thirtyDay"===this.state.periodType||6<this.state.customDuration&&"CustomDateRange"==this.state.periodType.name)&&W.default.createElement("div",null,W.default.createElement("span",{className:"monthStartDisplay1"},this.state.monthStartValState),W.default.createElement("span",{className:V?"monthEndDisplay1":"monthEndDisplay1 futureDatesColor"},this.state.monthendValState)))))))))),this.state.loadingBook&&W.default.createElement("div",{className:"spinner-area"},W.default.createElement(te.default,null)),this.state.loadingPeriod&&W.default.createElement("div",{className:"spinner-area"},W.default.createElement(te.default,null)),this.state.loadingFilter&&W.default.createElement("div",{className:"spinner-area"},W.default.createElement(te.default,null)),this.state.isSeriesSelected&&W.default.createElement("div",{className:"spinner-area"},W.default.createElement(te.default,null)),this.state.loadingToggle&&W.default.createElement("div",{className:"spinner-area"},W.default.createElement(te.default,null)),this.state.isLoadingTab&&this.state.tabActive&&W.default.createElement("div",{className:"spinner-area"},W.default.createElement(te.default,null))))))}}])&&s(t.prototype,a),n&&s(t,n),r}();t.default=f},function(e,n,o){"use strict";(function(f){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var h=t(o(0)),y=t(o(1)),r=o(24),b=o(7),g=t(o(1649)),v=t(o(6)),E=t(o(23)),S=e(o(57)),k=t(o(51));e(o(9)),t(o(13));function e(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function t(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=s(o).call(this,e))||"object"!==l(n)&&"function"!=typeof n?c(a):n).state={minEndDate:"CustomDateRange"===e.period.name?e.startDate:null,maxEndDate:"CustomDateRange"===e.period.name&&e.startDate?(0,b.bn_moment)(e.startDate).add(30,"days"):(0,b.bn_moment)().subtract(2,"days"),minStartDate:k.default.bookPublicationDate?(0,b.bn_moment)(k.default.bookPublicationDate):null,maxStartDate:"CustomDateRange"===e.period.name?(0,b.bn_moment)().subtract(2,"days"):null,startDateNew:null,endDateNew:null,endBeyondCurrentMaxDate:!1,endBeyondCurrentMinDate:!1,startBeyondCurrentMaxDate:!1,startBeyondCurrentMinDate:!1,beyondCustomDuration:!1,startBeyondEndDate:!1},t.periodOptions=e.periodTypes&&2<e.periodTypes.length?e.periodTypes.map(function(e){return{label:e.text,value:e.type}}):[],t.seriesNameOptions=e.seriesNames&&e.seriesNames.length?e.seriesNames.map(function(e){return{label:e,value:e}}):[],t.updatingDate=!1,t.formatDates=t.formatDates.bind(c(c(t))),t.getHeaderStyles=t.getHeaderStyles.bind(c(c(t))),t.onBookTypeChange=t.onBookTypeChange.bind(c(c(t))),t.onPeriodChange=t.onPeriodChange.bind(c(c(t))),t.onDebounceBookTypeChange=(0,r.debounce)(700,!0,t.onDebounceBookTypeChange.bind(c(c(t)))),t.onDebouncePeriodChange=(0,r.debounce)(700,!0,t.onDebouncePeriodChange.bind(c(c(t)))),t.onDebounceDateChange=(0,r.debounce)(700,!0,t.onDebounceDateChange.bind(c(c(t)))),t.onDebounceSeriesChange=(0,r.debounce)(700,!0,t.onDebounceSeriesChange.bind(c(c(t)))),t.onLoadSetSeriesData=(0,r.debounce)(1500,!0,t.onLoadSetSeriesData.bind(c(c(t)))),t.setState({seriesNameOptions:t.seriesNameOptions}),t.onStartDateFocus=t.onStartDateFocus.bind(c(c(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,h.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){e.period!==this.props.period&&e.showDates&&this.refs.startDate&&!e.isCustomDatePaginate&&this._setDatesByPeriod(e.period,e),e.seriesNames!==this.props.seriesNames&&(this.seriesNameOptions=e.seriesNames&&e.seriesNames.length?e.seriesNames.map(function(e){return{label:e,value:e}}):[],this.setState({seriesNameOptions:this.seriesNameOptions},this.onLoadSetSeriesData(this.props.initSeriesName)))}},{key:"onLoadSetSeriesData",value:function(e){e&&this.onDebounceSeriesChange(e)}},{key:"componentDidMount",value:function(){this._setDatesByPeriod(S.PERIOD_TYPES.WEEKLY)}},{key:"getHeaderStyles",value:function(e,t,a,n){return(0,y.default)(e,{"active-selection":t===a},{disabled:!n})}},{key:"onStartDateFocus",value:function(e){document.body.classList.add("startdate_align"),document.body.classList.remove("enddate_align")}},{key:"onEndDateFocus",value:function(e){document.body.classList.remove("startdate_align"),document.body.classList.add("enddate_align")}},{key:"onBookTypeChange",value:function(e){this.onDebounceBookTypeChange(e)}},{key:"onDebounceBookTypeChange",value:function(e){e!==this.props.bookType&&this.props.onFilterChange&&this.props.onFilterChange({filterType:this.props.filterType,bookType:e,period:this.props.period,seriesName:this.props.seriesName,startDate:this.props.startDate,endDate:this.props.endDate})}},{key:"onDebounceDateChange",value:function(e,t){this.props.onFilterChange({filterType:this.props.filterType,bookType:this.props.bookType,period:this.props.period,seriesName:this.props.seriesName,startDate:e,endDate:t})}},{key:"onDebouncePeriodChange",value:function(e){e!==this.props.period&&this.props.onFilterChange&&this.props.onFilterChange({filterType:this.props.filterType,bookType:this.props.bookType,period:e,seriesName:this.props.seriesName,startDate:null,endDate:null})}},{key:"onDebounceSeriesChange",value:function(e){e!==this.props.seriesName&&this.props.onFilterChange&&this.props.onFilterChange({filterType:this.props.filterType,bookType:this.props.bookType,period:this.props.period,seriesName:e,startDate:this.props.startDate,endDate:this.props.endDate})}},{key:"onPeriodChange",value:function(e){this.onDebouncePeriodChange(e)}},{key:"onDateChange",value:function(e,t,a){if("CustomDateRange"==this.props.period.name&&(e||t)){var n=!1,o=!1,r=!1,l=!1,i=!1,s=!1;i=30<f.duration((0,b.bn_moment)(t).diff((0,b.bn_moment)(e)))/864e5,new Date(t).valueOf()>new Date((0,b.bn_moment)().subtract(2,"days")).valueOf()&&(n=!0),new Date(e).valueOf()>new Date((0,b.bn_moment)().subtract(2,"days")).valueOf()&&(o=!0),(0,b.bn_moment)(e,"M-D-YY").isBefore((0,b.bn_moment)(k.default.bookPublicationDate,"M-D-YY"))&&(r=!0),(0,b.bn_moment)(t,"M-D-YY").isBefore((0,b.bn_moment)(k.default.bookPublicationDate,"M-D-YY"))&&(l=!0),(0,b.bn_moment)(t,"M-D-YY").isBefore((0,b.bn_moment)(e,"M-D-YY"))&&(s=!0),this.setState({endBeyondCurrentMaxDate:n,endBeyondCurrentMinDate:l,startBeyondCurrentMaxDate:o,startBeyondCurrentMinDate:r,beyondCustomDuration:i,startBeyondEndDate:s})}if("CustomDateRange"!=this.props.period.name||a||new Date(this.refs.startDate.state.date).toDateString()==new Date(e).toDateString()&&new Date(this.refs.endDate.state.date).toDateString()==new Date(t).toDateString()||(this.updatingDate=!1),"CustomDateRange"!=this.props.period.name||a||new Date(this.refs.startDate.state.date).toDateString()!=new Date(e).toDateString()||new Date(this.refs.endDate.state.date).toDateString()!=new Date(t).toDateString()||(this.updatingDate=!0),this.updatingDate)this.updatingDate=!1;else{var u=this.props.period,c=null,d=null;this.updatingDate=!0,"CustomDateRange"!=u.name||a?e?(c=e,(d="CustomDateRange"==u.name&&a?e.clone().add(u.value,"day"):u==S.PERIOD_TYPES.QUARTERLY||u==S.PERIOD_TYPES.SEMI_ANNUALLY||u==S.PERIOD_TYPES.ANNUALLY?(d=e.clone().add(S.RANGE[u].value,S.RANGE[u].units)).clone().endOf("month"):e.clone().add(S.RANGE[u].value,S.RANGE[u].units).subtract(1,"day"))!==this.refs.endDate.value()&&(this.refs.endDate.setValue(d),this.setState({endDateNew:d})),c!==this.refs.startDate.value()&&(this.refs.startDate.setValue(c),this.setState({startDateNew:c}))):t&&(d=t,c="CustomDateRange"==u.name&&a?t.clone().subtract(u.value,"day"):u==S.PERIOD_TYPES.QUARTERLY||u==S.PERIOD_TYPES.SEMI_ANNUALLY||u==S.PERIOD_TYPES.ANNUALLY?(c=t.clone().subtract(S.RANGE[u].value,S.RANGE[u].units)).clone().startOf("month"):t.clone().subtract(S.RANGE[u].value,S.RANGE[u].units).add(1,"day"),d!==this.refs.endDate.value()&&(this.refs.endDate.setValue(d),this.setState({endDateNew:d})),c!==this.refs.startDate.value()&&(this.refs.startDate.setValue(c),this.setState({startDateNew:c}))):(e&&!t&&(c=e,this.refs.startDate.setValue(c)),t&&!e&&(d=t,this.refs.endDate.setValue(d),this.setState({endDateNew:d})),e&&t&&(c=e,d=t,new Date(this.refs.startDate.state.date).toDateString()==new Date(c).toDateString()&&this.refs.endDate.setValue(d),new Date(this.refs.endDate.state.date).toDateString()==new Date(d).toDateString()&&this.refs.startDate.setValue(c))),"CustomDateRange"!=u.name||a?this.onDebounceDateChange((e||c).clone(),(t||d).clone()):e||t?e&&!t?this.onDebounceDateChange((e||c).clone(),d):t&&!e?this.onDebounceDateChange(c,(t||d).clone()):e&&t&&this.onDebounceDateChange((e||c).clone(),(t||d).clone()):(this.refs.startDate.setValue(c),this.refs.endDate.setValue(d),this.onDebounceDateChange(c,d))}}},{key:"onSeriesChange",value:function(e){this.onDebounceSeriesChange(e)}},{key:"_setDatesByPeriod",value:function(e,t){var a,n,o,r=this;"CustomDateRange"==e.name?t.startDate||t.endDate||e.value||(o=n=null,this.setState({minEndDate:null,maxEndDate:(0,b.bn_moment)().subtract(2,"days"),minStartDate:null,maxStartDate:(0,b.bn_moment)().subtract(2,"days"),endBeyondCurrentMaxDate:!1,endBeyondCurrentMinDate:!1,startBeyondCurrentMaxDate:!1,startBeyondCurrentMinDate:!1,beyondCustomDuration:!1,startBeyondEndDate:!1},function(){return r.refs.startDate&&r.refs.startDate.setValue(o)},function(){return r.refs.endDate&&r.refs.endDate.setValue(n)})):(this.updatingDate=!1,a=S.RANGE[e],n=(0,b.bn_moment)().subtract(2,"days"),o=n.clone().subtract(a.defaultStartDateFromMaxEndDate,a.units),this.setState({maxStartDate:o,endDateNew:n},function(){return r.refs.endDate&&r.refs.endDate.setValue(n)}))}},{key:"formatDates",value:function(e){var t=this.props.period;return t===S.PERIOD_TYPES.QUARTERLY||t===S.PERIOD_TYPES.SEMI_ANNUALLY||t===S.PERIOD_TYPES.ANNUALLY?e=(0,b.bn_moment)(e,"MM/DD/YYYY").format("MMM YYYY"):t!==S.PERIOD_TYPES.SEVEN_DAY&&t!==S.PERIOD_TYPES.THIRTY_DAY||(e=(0,b.bn_moment)(e,"MM/DD/YYYY").format("MMM DD, YYYY")),e}},{key:"render",value:function(){var e,t,a,n,o=this,r=this.state,l=r.maxStartDate,i=r.maxEndDate,s=r.minStartDate,u=r.minEndDate,c=S.FILTER_CHOOSER_TYPES,d=this.props.filterType,f=(this.props.period,"CustomDateRange"===this.props.period.name),p=(0,b.bn_moment)((0,b.bn_moment)().subtract(2,"days")).format("MM/DD/YYYY"),m=(0,b.bn_moment)(k.default.bookPublicationDate).format("MM/DD/YYYY");return f&&(n=this.refs.startDate.state.date&&(0,b.bn_moment)(this.refs.startDate.state.date),t=this.refs.endDate.state.date&&(0,b.bn_moment)(this.refs.endDate.state.date).subtract(30,"days"),a=(0,b.bn_moment)().subtract(2,"days"),this.refs.startDate.state.date&&(a=new Date((0,b.bn_moment)(this.refs.startDate.state.date).add(30,"days")).valueOf()>new Date((0,b.bn_moment)().subtract(2,"days")).valueOf()?(0,b.bn_moment)().subtract(2,"days"):(0,b.bn_moment)(this.refs.startDate.state.date).add(30,"days")),this.refs.endDate.state.date&&(e=new Date(this.refs.endDate.state.date).valueOf()>new Date((0,b.bn_moment)().subtract(2,"days")).valueOf()?(0,b.bn_moment)().subtract(2,"days"):(0,b.bn_moment)(this.refs.endDate.state.date)),this.refs.startDate.state.date&&new Date(this.refs.startDate.state.date).valueOf()<new Date((0,b.bn_moment)(k.default.bookPublicationDate)).valueOf()&&(t=(0,b.bn_moment)(k.default.bookPublicationDate))),h.default.createElement(v.default,{ref:"form"},h.default.createElement("div",{className:"row"},h.default.createElement("div",{className:"controls clearfix"},d!==c.PERIOD&&h.default.createElement("div",{className:"col-sm-10 col-xs-12"},h.default.createElement("ul",{className:"book-type"},this.props.bookTypes&&this.props.bookTypes.map(function(e){return h.default.createElement("li",{key:"bookType_"+e.type,className:o.getHeaderStyles(e.name,o.props.bookType,e.type,o.props.enabled),onClick:function(){return o.onBookTypeChange(e.type)}},e.text)}))),d!==c.BOOK_TYPE&&this.props.periodTypes&&this.props.periodTypes.length<=2&&h.default.createElement("div",{className:"col-sm-6 col-xs-12"},h.default.createElement("ul",{className:"period"},this.props.periodTypes&&this.props.periodTypes.map(function(e){return h.default.createElement("li",{key:"periodType_"+e.type,className:o.getHeaderStyles("",o.props.period,e.type,o.props.enabled)},h.default.createElement("a",{onClick:function(){return o.onPeriodChange(e.type)}},e.text))}))))),h.default.createElement("div",{className:"row reset-col"},h.default.createElement("div",{className:"col-sm-4 col-xs-12 seriesDD"},this.props.seriesNames&&0<this.props.seriesNames.length&&this.props.seriesOptions&&this.state.seriesNameOptions&&h.default.createElement(E.default,{name:"seriesName",label:"Select a Series",onChange:function(e){return o.onSeriesChange(e.newValue)},initValue:this.props.initSeriesName,options:this.state.seriesNameOptions,disableValidationMessages:!0,enabled:0<this.props.seriesNames.length,disableTabIndex:0===this.props.seriesNames.length}),this.props.seriesOptions&&this.props.seriesNames.length<1&&h.default.createElement(E.default,{name:"seriesName",label:"Select a Series",onChange:function(e){return o.onSeriesChange(e.newValue)},initValue:this.props.initSeriesName,options:this.seriesNameOptions,disableValidationMessages:!0,enabled:0<this.props.seriesNames.length,disableTabIndex:0===this.props.seriesNames.length})),h.default.createElement("div",{className:"blankDiv col-sm-1 hidden-xs"}),h.default.createElement("div",{className:"col-lg-12 col-sm-12"},d!==c.BOOK_TYPE&&this.props.periodTypes&&2<this.props.periodTypes.length&&h.default.createElement("div",{className:"widthInc col-sm-2 col-xs-12"},h.default.createElement(E.default,{name:"periodType",label:"Period",onChange:function(e){return o.onPeriodChange(e.newValue)},initValue:this.props.period,disableValidationMessages:!0,options:this.periodOptions,enabled:0<this.props.seriesNames.length,disableTabIndex:0===this.props.seriesNames.length})),!f&&h.default.createElement("div",{className:(0,y.default)("col-sm-3 col-xs-6 date-filter-date-start",{"hide-datePicker-Series":f,"show-datePicker-Series":!f})},h.default.createElement("div",{className:"startLabel"},"Start Date"),h.default.createElement("div",{className:"startText"},this.formatDates(this.state.startDateNew))),f&&this.state.beyondCustomDuration&&!(this.state.endBeyondCurrentMinDate||this.state.endBeyondCurrentMaxDate||this.state.startBeyondCurrentMaxDate||this.state.startBeyondCurrentMinDate)&&h.default.createElement("span",{className:"dateErrorMessage customDateErr"},"Enter a valid date range of 1â€“31 days."),f&&this.state.startBeyondEndDate&&!(this.state.endBeyondCurrentMinDate||this.state.endBeyondCurrentMaxDate||this.state.startBeyondCurrentMaxDate||this.state.startBeyondCurrentMinDate)&&h.default.createElement("span",{className:"dateErrorMessage customDateErr"},"Enter a valid date range of 1â€“31 days."),this.props.showDates&&h.default.createElement("div",{className:(0,y.default)("col-sm-3 col-xs-6 margin-left-mobile pl_38 date-filter seriesSaleDate",{"show-datePicker-Series":f,"hide-datePicker-Series":!f})},this.state.startBeyondCurrentMaxDate&&h.default.createElement("span",{className:"dateErrorMessage"},"Enter a start date of ",p," or earlier."),this.state.startBeyondCurrentMinDate&&h.default.createElement("span",{className:"dateErrorMessage"},"Enter a start date of ",m," or later."),h.default.createElement(g.default,{name:"startDate",label:"Start Date",ref:"startDate",minDate:t||s,maxDate:e||l,displayCalendar:"CustomDateRange"===this.props.period.name,onChange:"CustomDateRange"!==this.props.period.name||this.props.isCustomDatePaginate?function(e){return o.onDateChange(e.newValue,null,o.props.isCustomDatePaginate)}:function(e){return o.onDateChange(e.newValue,o.props.endDate,o.props.isCustomDatePaginate)},onDateFocus:this.onStartDateFocus})),!f&&h.default.createElement("div",{className:(0,y.default)("col-sm-3 col-xs-6 date-filter-date-end",{"hide-datePicker-Series":f,"show-datePicker-Series":!f})},h.default.createElement("div",{className:"endLabel"},"End Date"),h.default.createElement("div",{className:"endText"},this.formatDates(this.state.endDateNew))),this.props.showDates&&h.default.createElement("div",{className:(0,y.default)("col-sm-3 col-xs-6 margin-left-mobile pr_38 date-filter seriesSaleDate",{"show-datePicker-Series":f,"hide-datePicker-Series":!f})},this.state.endBeyondCurrentMaxDate&&h.default.createElement("span",{className:"dateErrorMessage"},"Enter an end date of ",p," or earlier."),this.state.endBeyondCurrentMinDate&&h.default.createElement("span",{className:"dateErrorMessage"},"Enter an end date of ",m," or later."),h.default.createElement(g.default,{name:"endDate",label:"End Date",ref:"endDate",maxDate:a||i,minDate:n||u,displayCalendar:"CustomDateRange"===this.props.period.name,onChange:"CustomDateRange"!==this.props.period.name||this.props.isCustomDatePaginate?function(e){return o.onDateChange(null,e.newValue,o.props.isCustomDatePaginate)}:function(e){return o.onDateChange(o.props.startDate,e.newValue,o.props.isCustomDatePaginate)},isStart:!1,period:this.props.period,onDateFocus:this.onEndDateFocus})))))}}])&&i(t.prototype,a),n&&i(t,n),o}();n.default=a}).call(this,o(117))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(0)),l=a(7),i=n(a(1)),s=n(a(483)),u=n(a(118)),c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(9));function n(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,a){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var r=function(e){function r(e,t){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(a=!(o=m(r).call(this,e,t))||"object"!==d(o)&&"function"!=typeof o?y(n):o).state={period:a.props.period||null,date:a.value()?(0,l.bn_moment)(a.value()):null,endDate:a.props.endDate||null,minDate:a.props.minDate,maxDate:a.props.maxDate,selectsEnd:a.props.selectsEnd||!1,selectsStart:a.props.selectsStart||!1,startDate:a.props.startDate||null,utc:a.props.utc||0},a.onChange=a.onChange.bind(y(y(a))),a.onBlur=a.onBlur.bind(y(y(a))),a}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,u.default),t=r,(a=[{key:"componentWillReceiveProps",value:function(e){p(m(r.prototype),"componentWillReceiveProps",this).call(this,e);this.props.period;e!==this.props&&this.setState({endDate:e.endDate,minDate:e.minDate,maxDate:e.maxDate,selectsEnd:e.selectsEnd,selectsStart:e.selectsStart,startDate:e.startDate,utc:e.utc||0})}},{key:"rules",value:function(){var e=p(m(r.prototype),"rules",this).call(this);return this.minDate()&&(e=e.concat(c.minDate(this.minDate()))),this.maxDate()&&(e=e.concat(c.maxDate(this.maxDate()))),e}},{key:"minDate",value:function(){return this.state.minDate||null}},{key:"maxDate",value:function(){return this.state.maxDate||null}},{key:"setValue",value:function(e,t){this.onChange(e,t)}},{key:"onChange",value:function(e,t){this.setState({date:e}),this._changeValue(e||null,t)}},{key:"onBlur",value:function(e){if(!this._controlEventsDisabled&&!this.props.disableOnBlur){var t=e.target.value,a=(0,l.bn_moment)(t),n=t&&a.isValid()?(0,l.bn_moment)(a.format("MM/DD/YYYY")):null;this.onChange(n),this._commitValue(n),this.refs.picker.refs.input.refs.input.blur(),p(m(r.prototype),"onBlur",this).call(this,e)}}},{key:"render",value:function(){this.props.isStart;return setTimeout(function(){"sales"==location.pathname.split("/")[1].toLowerCase()?document.body.classList.add("datepicker_zindex"):document.body.classList.remove("datepicker_zindex")},1500),o.default.createElement("div",{className:(0,i.default)("base-control","input-control","date-control","label-mode",{"has-value":this.hasValue()},{"read-only":this.readOnly()},this.className())},!this.disableValidationMessages()&&o.default.createElement("div",{className:"message"},o.default.createElement("div",{className:"new-position"})),o.default.createElement("div",{className:"input-area"},o.default.createElement(s.default,{ref:"picker",id:this.id(),name:this.name(),className:"primary",openToDate:this.state.minDate,selected:this.state.date,disabled:!this.props.displayCalendar,excludeDates:this.props.excludeDates,utcOffset:this.state.utc,onChange:this.onChange,onBlur:this.onBlur,minDate:this.state.minDate,maxDate:this.state.maxDate,selectsEnd:this.state.selectsEnd,selectsStart:this.state.selectsStart,endDate:this.state.endDate,startDate:this.state.startDate,autoComplete:"off",disabledKeyboardNavigation:!0,onFocus:this.props.onDateFocus}),this.props.displayCalendar&&o.default.createElement("div",{className:"glyphicon glyphicon-calendar hide-calender-in-mobile"}),o.default.createElement("label",{className:"primary",htmlFor:this.id()},this.label(),this.required()&&!this.disableValidationMessages()&&o.default.createElement("span",null,"*"))),this.props.children,this.note()&&o.default.createElement("div",{className:"note",dangerouslySetInnerHTML:{__html:this.note()}}))}}])&&f(t.prototype,a),n&&f(t,n),r}();r.propType=function(o){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(e){var t,a,n;t=o,n=r[a=e],a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n})}return o}({},u.default.propTypes,{minDate:o.default.PropTypes.object,maxDate:o.default.PropTypes.object});var b=r;t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=o(a(1)),s=o(a(1651)),u=o(a(1652)),c=n(a(57)),d=n(a(122)),f=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={bookType:c.BOOK_TYPES.ALL,currentMonthValues:[],currentWeekValues:[],lastMonthValues:[],lastWeekValues:[],royaltyCurrency:null,loadingSummary:!1},t.getReportData=t.getReportData.bind(b(b(t))),t.onClick=t.onClick.bind(b(b(t))),t.onBookTypeChange=t.onBookTypeChange.bind(b(b(t))),t.raiseSummaryWidgetChanged=t.raiseSummaryWidgetChanged.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){e.summary!==this.props.summary&&e.summary&&(this.getReportData(e.summary.reportsRecord),this.setState({royaltyCurrency:e.summary.reportsRecord[0]?e.summary.reportsRecord[0].royaltyCurrency:null})),this.setState({loadingSummary:!1})}},{key:"getReportData",value:function(e){for(var t,a,n=0;n<e.length;n++){var o=e[n];t=o.totalUnitsSold,a=o.totalRoyalty,"THIS_WEEK"===o.summaryDate?this.setState({currentWeekValues:[t,a]}):"LAST_WEEK"===o.summaryDate?this.setState({lastWeekValues:[t,a]}):"THIS_MONTH"===o.summaryDate?this.setState({currentMonthValues:[t,a]}):"LAST_MONTH"===o.summaryDate&&this.setState({lastMonthValues:[t,a]})}}},{key:"onBookTypeChange",value:function(e){e!==this.state.bookType&&(this.setState({bookType:e}),this.raiseSummaryWidgetChanged(e)),this.setState({loadingSummary:!0})}},{key:"onClick",value:function(){l.browserHistory.push(d.Base+"/"+d.Reports)}},{key:"raiseSummaryWidgetChanged",value:function(e){this.props.onSummaryWidgetChanged&&this.props.onSummaryWidgetChanged(e)}},{key:"render",value:function(){var e=this,t=c.BOOK_TYPES;return r.default.createElement("div",null,r.default.createElement("div",{className:"widget summary-widget container-fix"},r.default.createElement("div",{className:"widget-panel"},r.default.createElement("div",{className:"row view-summary"},r.default.createElement("div",{className:"col-xs-12 col-md-3 text-center"},r.default.createElement("div",{className:"row text-dropdown-row"},r.default.createElement("div",{className:"view-reports-text"},"Select a report to see detailed sales ",r.default.createElement("br",null),"and royalties information."),r.default.createElement("div",{className:"dropdown"},r.default.createElement(s.default,null)))),r.default.createElement("div",{className:"col-sm-12 col-md-9 module-section"},r.default.createElement("div",{className:"col-xs-12 col-sm-6 module-columns"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"summary-controls"},r.default.createElement("div",{className:"controls clearfix"},r.default.createElement("ul",{className:"book-type"},r.default.createElement("li",{className:(0,i.default)({"active-selection":this.state.bookType===t.ALL}),onClick:function(){return e.onBookTypeChange(t.ALL)}},"All Books"),r.default.createElement("li",{className:(0,i.default)({"active-selection":this.state.bookType===t.EBOOK}),onClick:function(){return e.onBookTypeChange(t.EBOOK)}},"eBook"),r.default.createElement("li",{className:(0,i.default)({"active-selection":this.state.bookType===t.PRINT}),onClick:function(){return e.onBookTypeChange(t.PRINT)}},"Print")))),r.default.createElement("div",{className:"row mobile-note"},"Note: These numbers do not include your sales from today and yesterday.")),r.default.createElement("div",{className:"row week-modules"},r.default.createElement(u.default,{bookType:this.state.bookType,currentValues:this.state.currentWeekValues,lastValues:this.state.lastWeekValues,period:"WEEK",royaltyCurrency:this.state.royaltyCurrency}),r.default.createElement("div",{className:"mobile-stretchy-line"},"Â "),r.default.createElement("div",{className:"stretchy-line"},"Â "))),r.default.createElement("div",{className:"col-xs-12 col-sm-6 module-columns"},r.default.createElement("div",{className:"row recent-sales-note"},"Note: These numbers do not include your sales from today and yesterday."),r.default.createElement("div",{className:"row month-modules"},r.default.createElement(u.default,{bookType:this.state.bookType,currentValues:this.state.currentMonthValues,lastValues:this.state.lastMonthValues,period:"MONTH",royaltyCurrency:this.state.royaltyCurrency}))))),this.state.loadingSummary&&r.default.createElement("div",{className:"spinner-area"},r.default.createElement(f.default,{top:40})))))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=a(7),i=a(2),s=n(a(4)),u=n(a(6)),c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(122)),d=n(a(51)),f=n(a(23));function n(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={reportTypeOptions:[]},t.onReportTypeChange=t.onReportTypeChange.bind(b(b(t))),t.onSubmit=t.onSubmit.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(){0===this.state.reportTypeOptions.length&&this.setState({reportTypeOptions:this.buildReportTypeOptions()})}},{key:"onReportTypeChange",value:function(){var e=this.refs.reportType.value(),t="/"+c.Base+"/"+c.Reports+"?reportType="+e;if("preOrder"===e){var a=s.default.getUser(),n=a.approvalDate?a.approvalDate:(0,l.bn_moment)().subtract(2,"days");t+="&f_fromDate="+(0,l.bn_moment)(n,"MM/DD/YYYY").format("MM-DD-YYYY")}i.browserHistory.push(t)}},{key:"onSubmit",value:function(){}},{key:"buildReportTypeOptions",value:function(){return d.default.reportDefinitions?d.default.reportDefinitions.filter(function(e){return e.name}).map(function(e){return{value:e.key,label:e.name,separatorAbove:e.separatorAbove}}):[]}},{key:"render",value:function(){return r.default.createElement("div",{className:"report-dropdown"},r.default.createElement(u.default,{ref:"form",onSubmit:this.onSubmit},r.default.createElement(f.default,{ref:"reportType",name:"reportDropdown",label:"Choose Report",autofocusDefault:!1,onChange:this.onReportTypeChange,options:this.state.reportTypeOptions,disableValidationMessages:!0})))}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=(n=a(0))&&n.__esModule?n:{default:n},u=a(7),r=a(2),c=o(a(174)),d=o(a(57)),i=o(a(22));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?h(a):n).state={currentLink:null,currentValues:[0,0],lastLink:null,lastValues:[0,0],royaltyCurrency:null},t.buildReportLinks=t.buildReportLinks.bind(h(h(t))),t.linkText=t.linkText.bind(h(h(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,l.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.props.period&&this.buildReportLinks()}},{key:"componentWillReceiveProps",value:function(e){if(this.props.currentValues!=e.currentValues||this.props.lastValues!=e.lastValues){var t=0===e.currentValues.length?this.state.currentValues:e.currentValues,a=0===e.lastValues.length?this.state.lastValues:e.lastValues;this.buildReportLinks(),this.setState({currentValues:t,lastValues:a,royaltyCurrency:e.royaltyCurrency})}}},{key:"buildReportLinks",value:function(){var e,t,a,n,o,r,l,i,s=null;this.props.bookType!=d.BOOK_TYPES.ALL&&(s=this.props.bookType),"WEEK"===this.props.period?(e=(0,u.bn_moment)().startOf("week"),n=(a=(0,u.bn_moment)().subtract(2,"days").isBefore(e)?e:(0,u.bn_moment)().subtract(2,"days")).year(),o=e.clone().subtract(1,"week"),i=(l=(0,u.bn_moment)().isSame(e,"day")?e.clone().subtract(2,"days"):e.clone().subtract(1,"day")).year(),t=c.getWeeklySalesReportPath(s,e.format("MM-DD-YYYY"),a.format("MM-DD-YYYY"),n),r=c.getWeeklySalesReportPath(s,o.format("MM-DD-YYYY"),l.format("MM-DD-YYYY"),i)):"MONTH"===this.props.period&&(e=(0,u.bn_moment)().startOf("month"),a=(0,u.bn_moment)().subtract(2,"days").isBefore(e)?e:(0,u.bn_moment)().subtract(2,"days"),o=e.clone().subtract(1,"month"),l=(0,u.bn_moment)().isSame(e,"day")?e.clone().subtract(2,"days"):e.clone().subtract(1,"day"),n=e.year(),i=l.year(),t=c.getMonthlySalesReportPath(s,e.format("MM-DD-YYYY"),a.format("MM-DD-YYYY"),n),r=c.getMonthlySalesReportPath(s,o.format("MM-DD-YYYY"),l.format("MM-DD-YYYY"),i)),this.setState({currentLink:t,lastLink:r})}},{key:"linkText",value:function(e,t,a){var n;switch(e){case"header":n=l.default.createElement("span",{className:"summary-item-header"}," ",t,l.default.createElement("div",{className:"glyphicon glyphicon-menu-right"}),l.default.createElement("div",{className:"glyphicon glyphicon-menu-right"}));break;case"value":n=l.default.createElement("span",{className:"summary-value"}," ",t," ");break;case"type":n=l.default.createElement("span",{className:"summary-type"}," ",t," ")}return l.default.createElement(r.Link,{to:a}," ",n," ")}},{key:"render",value:function(){var e=this.state,t=e.currentLink,a=e.currentValues,n=e.lastValues,o=e.lastLink,r=e.royaltyCurrency;return l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-6"},l.default.createElement("div",{className:"summary-item-header"},this.linkText("header","THIS "+this.props.period,t)),l.default.createElement("div",{className:"summary-item"},l.default.createElement("div",{className:"summary-item-container"},this.linkText("value",i.formatWithCommas(a[0]),t),this.linkText("type","Units Sold",t))),l.default.createElement("div",{className:"summary-item"},l.default.createElement("div",{className:"summary-item-container"},this.linkText("value",i.formatCurrency(parseFloat(a[1]),r),t),this.linkText("type","Royalty",t)))),l.default.createElement("div",{className:"col-xs-6"},l.default.createElement("div",{className:"summary-item-header"},this.linkText("header","LAST "+this.props.period,o)),l.default.createElement("div",{className:"summary-item"},l.default.createElement("div",{className:"summary-item-container"},this.linkText("value",i.formatWithCommas(n[0]),o),this.linkText("type","Units Sold",o))),l.default.createElement("div",{className:"summary-item"},l.default.createElement("div",{className:"summary-item-container"},this.linkText("value",i.formatCurrency(parseFloat(n[1]),r),o),this.linkText("type","Royalty",o)))))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=a(2),i=n(a(62)),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(122));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={},t.onClick=t.onClick.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"onClick",value:function(){l.browserHistory.push(s.Base+"/"+s.Reports)}},{key:"render",value:function(){return r.default.createElement("div",{className:"widget view-reports-widget"},r.default.createElement("div",{className:"widget-panel"},r.default.createElement("div",{className:"left-content"},r.default.createElement("p",null,"View your detailed sales information and royalties for current and prior weeks")),r.default.createElement("div",{className:"right-content"},r.default.createElement(i.default,{buttonText:"View Reports",click:this.onClick}))))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),c=a(2),d=a(7),l=o(a(1)),i=o(a(90)),s=o(a(3)),f=n(a(122)),u=o(a(1655)),p=o(a(1656)),m=o(a(1671)),h=o(a(1672)),y=o(a(1681)),b=o(a(72)),g=(n(a(10)),n(a(193))),v=o(a(389)),E=o(a(4)),S=o(a(51)),k=n(a(14)),P=o(a(8)),w=o(a(34));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){N(t,e,a[e])})}return t}function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var M=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=T(o).call(this,e))||"object"!==O(n)&&"function"!=typeof n?j(a):n).state={reportType:null,drilldown:!1,page:null,sort:null,descending:!1,filters:{},filterChange:!1,data:null,busy:!1,isLoadingTab:!0},t.lastDataRequestId=null,t.isComponentLeaving=!1,t.currentParams=null,t.busyModalDelayTimeout=null,t.busyModal=null,t.closeBusyModal=t.closeBusyModal.bind(j(j(t))),t.onReportMetadataLoaded=t.onReportMetadataLoaded.bind(j(j(t))),t.onReportDataLoaded=t.onReportDataLoaded.bind(j(j(t))),t.onReportTypeChange=t.onReportTypeChange.bind(j(j(t))),t.onFilterChange=t.onFilterChange.bind(j(j(t))),t.onPageChange=t.onPageChange.bind(j(j(t))),t.onMergeChange=t.onMergeChange.bind(j(j(t))),t.onSortChange=t.onSortChange.bind(j(j(t))),t.onDrillDown=t.onDrillDown.bind(j(j(t))),t.onDrillUp=t.onDrillUp.bind(j(j(t))),t.getBanners=t.getBanners.bind(j(j(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(o,r.default.Component),t=o,(a=[{key:"findReportDefinition",value:function(t,a){return S.default.reportDefinitions.find(function(e){return e.key===t+(a?"Detail":"")})}},{key:"hasData",value:function(){return!!this.state.data}},{key:"hasDataRows",value:function(){return this.hasData()&&this.state.data.reportsRecord&&0<this.state.data.reportsRecord.length}},{key:"componentWillMount",value:function(){S.default.addReportMetadataLoadedListener(this.onReportMetadataLoaded),S.default.addReportDataLoadedListener(this.onReportDataLoaded),this.setState({isLoadingTab:!0}),P.default.addPageBannersListener(this.getBanners)}},{key:"componentDidMount",value:function(){this.setState({isLoadingTab:!0}),setTimeout(function(){k.getPageBanners(5)},500),S.default.reportDefinitions?(this.currentParams=this.normalizeQueryParams(this.props),this.update()):g.loadReportMetadata()}},{key:"componentWillReceiveProps",value:function(e){var t=this.normalizeQueryParams(e);!(0,i.default)(t,this.currentParams)&&(this.currentParams=t,this.update())}},{key:"componentWillUnmount",value:function(){S.default.removeReportMetadataLoadedListener(this.onReportMetadataLoaded),S.default.removeReportDataLoadedListener(this.onReportDataLoaded),this.isComponentLeaving=!0,this.closeBusyModal(),setTimeout(this.closeBusyModal,1e3),g.clearReportMetadata(),P.default.removePageBannersListener(this.getBanners)}},{key:"getBanners",value:function(){var e=P.default.banners();if(e.data)if(0<e.data.length){var t=r.default.createElement("span",{dangerouslySetInnerHTML:{__html:e.data[0].details}}),a=e.data[0].headline.split(/[;|]/),n=(a[0],a[1]),o=a[2];this.setState({pageBanner:t,pageBannerColor:n,backgroundColor:o})}else this.setState({pageBanner:!1,pageBannerColor:null});document.documentElement.style.setProperty("--message-color",this.state.pageBannerColor),document.documentElement.style.setProperty("--background-color",this.state.backgroundColor)}},{key:"onReportMetadataLoaded",value:function(){this.currentParams=this.normalizeQueryParams(this.props),this.update()}},{key:"onReportDataLoaded",value:function(e,t){var a=this;if(this.lastDataRequestId===e){this.lastDataRequestId=null,A("Report data loaded",t),this.busyModalDelayTimeout&&(clearTimeout(this.busyModalDelayTimeout),this.busyModalDelayTimeout=null);this.closeBusyModal(),setTimeout(this.closeBusyModal,500),this.setState(C({},this.currentParams,{data:t,busy:!1}),function(){a.state.filterChange||window.scrollTo(0,0)}),this.setState({filterChange:!1})}}},{key:"onReportTypeChange",value:function(e){if(e!==this.currentParams.reportType){var t={reportType:e,drilldown:!1,page:"1",sort:null,descending:!1},a={};if("preOrder"===e){var n=E.default.getUser(),o=n.approvalDate?n.approvalDate:(0,d.bn_moment)().subtract(2,"days");a.fromDate=(0,d.bn_moment)(o,"MM/DD/YYYY").format("MM-DD-YYYY")}this.updateUrl(t,a)}}},{key:"onFilterChange",value:function(){var e={reportType:this.state.reportType,drilldown:this.state.drilldown,page:"1",sort:this.state.sort,descending:this.state.descending},t=this.gatherFiltersFromComponents();this.setState({filterChange:!0}),this.updateUrl(e,t)}},{key:"onPageChange",value:function(e){if((e=e.toString())!==this.currentParams.page){var t={reportType:this.state.reportType,drilldown:this.state.drilldown,page:e,sort:this.state.sort,descending:this.state.descending},a=this.gatherFiltersFromComponents();this.updateUrl(t,a)}}},{key:"onSortChange",value:function(e,t){var a="desc"===t;if(e!==this.currentParams.sort||a!==this.currentParams.descending){var n={reportType:this.state.reportType,drilldown:this.state.drilldown,page:this.state.page,sort:e,descending:a},o=this.gatherFiltersFromComponents();this.updateUrl(n,o)}}},{key:"onMergeChange",value:function(e){var t=!0;void 0!==this.state.filters.groupByTitle&&"true"===this.state.filters.groupByTitle&&(t=!1);var a={reportType:this.state.reportType,drilldown:this.state.drilldown,page:"1",sort:this.state.sort,descending:this.state.descending},n=this.gatherFiltersFromComponents();n.groupByTitle=t,this.updateUrl(a,n)}},{key:"onDrillDown",value:function(e){var t={reportType:this.currentParams.reportType};for(var a in 1<parseInt(this.currentParams.page)&&(t.page=this.currentParams.page),this.currentParams.sort&&(t.sort=this.currentParams.sort,this.currentParams.descending&&(t.descending="Y")),this.currentParams.filters)t["f_"+a]=this.currentParams.filters[a];var n={reportType:this.state.reportType,drilldown:!0,page:"1",sort:null,descending:!1},o=e.filter;if("preOrder"===this.currentParams.reportType){var r=E.default.getUser();o.fromDate=(0,d.bn_moment)(r.approvalDate,"YYYY-MM-DD").format("MM-DD-YYYY")}this.updateUrl(n,o,t)}},{key:"onDrillUp",value:function(){var e=this.currentParams.parentParams,t={reportType:e.reportType?e.reportType:this.props.location.query.reportType,drilldown:!1,page:e.page||"1",sort:e.sort||null,descending:"Y"===e.descending},a={};for(var n in e)n.startsWith("f")&&(a[n.substring(2)]=e[n]);this.updateUrl(t,a)}},{key:"normalizeQueryParams",value:function(e){var t,a=e.location.query,n={};if(!a.reportType||0===a.reportType.length)return this.buildDefaultParams();n.reportType=a.reportType,n.drilldown="Y"===a.drilldown;var o=this.findReportDefinition(n.reportType,n.drilldown);for(var r in n.page=a.page||"1",a.sort?(n.sort=a.sort,n.descending="true"===a.descending):(n.sort=o.defaultSortKey,n.descending="desc"===o.defaultSortDirection),n.filters={},a)if(r.startsWith("f_")){var l=a[r];l&&0!==l.trim().length||(l=null),n.filters[r.substring(2)]=l}if(o.filters.includes("year")&&!n.filters.year&&(n.filters.year=(0,d.bn_moment)().year().toString()),void 0!==a.groupByTitle&&a.groupByTitle&&(n.filters.groupByTitle=!0),"customDate"!==o.key||n.filters.fromDate&&n.filters.toDate||(a.fullSpan?(n.filters.fromDate=(0,d.bn_moment)().subtract(6,"months"),n.filters.toDate=1<(0,d.bn_moment)().weekday()?(0,d.bn_moment)().subtract(2,"days"):(0,d.bn_moment)()):S.default.firstSaleDate?1<(0,d.bn_moment)().weekday()?(t=(0,d.bn_moment)().startOf("week"),n.filters.fromDate=t,n.filters.toDate=(0,d.bn_moment)().subtract(2,"days")):(t=(0,d.bn_moment)().startOf("week").subtract(7,"days"),n.filters.fromDate=t,n.filters.toDate=(0,d.bn_moment)().startOf("week").subtract(1,"days")):(n.filters.fromDate=(0,d.bn_moment)().subtract(2,"days"),n.filters.toDate=(0,d.bn_moment)().subtract(2,"days")),n.filters.fromDate=n.filters.fromDate.format("MM-DD-YYYY"),n.filters.toDate=n.filters.toDate.format("MM-DD-YYYY"),a.searchText&&(n.filters.searchText=a.searchText)),n.parentParams={},n.drilldown)for(var i in a)i.startsWith("p_")&&(n.parentParams[i.substring(2)]=a[i]);return n}},{key:"buildDefaultParams",value:function(){var e=this.findReportDefinition("salesByMonth",!0),t=(0,d.bn_moment)();return{reportType:"salesByMonth",drilldown:!0,page:"1",sort:e.defaultSortKey,descending:"desc"===e.defaultSortDirection,filters:{fromDate:(0,d.bn_moment)([t.year(),t.month()]).format("MM-DD-YYYY"),toDate:t.format("MM-DD-YYYY")},parentParams:{reportType:"salesByMonth",f_year:t.year().toString()}}}},{key:"update",value:function(){var e=this,t=this.findReportDefinition(this.currentParams.reportType,this.currentParams.drilldown),a=new v.default(this.currentParams.drilldown,this.currentParams.sort,this.currentParams.descending?"true":"false",parseInt(this.currentParams.page),t.itemsPerPage);a.addFilterMap(this.currentParams.filters),A("Requesting data for report "+t.key+" with params",a),this.setState({busy:!0}),this.busyModalDelayTimeout=setTimeout(function(){e.busyModalDelayTimeout=null,!e.isComponentLeaving&&e.state.busy&&e.openBusyModal()},1e3),this.lastDataRequestId=g.loadReportData(t.key,a)}},{key:"gatherFiltersFromComponents",value:function(){var e=this.refs.filters?this.refs.filters.toFilterMap():{},t=this.refs.headerSelector?this.refs.headerSelector.toFilterMap():{};return e.fromDate&&t.fromDate&&e.fromDate!==t.fromDate&&((0,d.bn_moment)(e.fromDate,"MM-DD-YYYY").isBefore((0,d.bn_moment)(t.fromDate,"MM-DD-YYYY"))||(0,d.bn_moment)(e.fromDate,"MM-DD-YYYY").isAfter((0,d.bn_moment)(t.toDate,"MM-DD-YYYY")))&&(e.fromDate=t.fromDate,e.toDate=t.toDate),e.groupByTitle=void 0!==this.state.filters.groupByTitle&&this.state.filters.groupByTitle,C({},t,e)}},{key:"updateUrl",value:function(e,t,a){var n="?reportType="+e.reportType;e.drilldown&&(n+="&drilldown=Y"),1<parseInt(e.page)&&(n+="&page="+e.page),e.sort&&0<e.sort.length&&(n+="&sort="+e.sort,e.descending&&(n+="&descending=true"));var o=this.state.data.paymentDate?(0,d.bn_moment)(this.state.data.paymentDate,"MM/DD/YYYY").format("YYYY"):"";for(var r in t){var l=t[r].toString();"toDate"===r?o=(0,d.bn_moment)(l,"MM-DD-YYYY").format("YYYY"):"paymentYear"===r&&""!==l&&(o=l,l=""),l&&0<l.trim().length&&(n+="&f_"+r+"="+encodeURIComponent(l))}if(e.drilldown)if(a)for(var i in a){var s=a[i].toString();s&&0<s.trim().length&&(n+="&p_"+i+"="+encodeURIComponent(s))}else for(var u in this.currentParams.parentParams)"f_year"===u&&(this.currentParams.parentParams[u]=o),n+="&p_"+u+"="+encodeURIComponent(this.currentParams.parentParams[u]);n!==window.location.search&&(A("Pushing URL: "+(n="/"+f.Base+"/"+f.Reports+n)),c.browserHistory.push(n))}},{key:"buildExportUrl",value:function(){var e=this.findReportDefinition(this.currentParams.reportType,this.currentParams.drilldown),t="/api/salesreporting/export?reportType="+encodeURIComponent(e.key);return this.currentParams.filters.fromDate&&(t+="&fromDate="+encodeURIComponent(this.currentParams.filters.fromDate)),this.currentParams.filters.toDate&&(t+="&toDate="+encodeURIComponent(this.currentParams.filters.toDate)),this.currentParams.filters.year&&(t+="&year="+encodeURIComponent(this.currentParams.filters.year)),this.currentParams.filters.ean&&(t+="&ean="+encodeURIComponent(this.currentParams.filters.ean)),this.currentParams.filters.title&&(t+="&title="+encodeURIComponent(this.currentParams.filters.title)),this.currentParams.filters.groupByTitle&&"true"==this.currentParams.filters.groupByTitle&&(t+="&groupByTitle=true"),this.currentParams.filters.paymentId&&(t+="&paymentId="+encodeURIComponent(this.currentParams.filters.paymentId)),t+="&sort="+encodeURIComponent(e.defaultSortKey),"desc"===e.defaultSortDirection&&(t+="&descending=true"),t}},{key:"openBusyModal",value:function(){this.setState({isLoadingTab:!0})}},{key:"closeBusyModal",value:function(){this.setState({isLoadingTab:!1})}},{key:"render",value:function(){if(!this.state.reportType)return r.default.createElement("div",{className:"sales-reporting-reports-layout"},r.default.createElement(s.default,{top:40})," ");var e=this.findReportDefinition(this.state.reportType,this.state.drilldown),t=e.filters&&0<e.filters.length;return r.default.createElement("div",{className:(0,l.default)("sales-reporting-reports-layout",{"no-selection":this.state.busy})},this.state.pageBanner&&r.default.createElement("div",{className:(0,l.default)("extra-color ",{"color-container":this.state.pageBanner})},r.default.createElement(w.default,{messages:[this.state.pageBanner],type:"alert"})),r.default.createElement("div",{className:"container-fluid"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("header",{className:"sidelines reports"},r.default.createElement("h1",null,"My Sales Reports")))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(u.default,{reportType:this.state.reportType,onChange:this.onReportTypeChange}))),this.state.reportType&&r.default.createElement("div",{key:e.key,className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"report-panel"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-6 drill-up"},this.state.drilldown&&r.default.createElement("a",{href:"#",onClick:this.onDrillUp},"Â« Return to ",e.parentName)),r.default.createElement("div",{className:"col-xs-6 report-export"},this.hasDataRows()&&r.default.createElement("a",{href:this.buildExportUrl()},"Export Excel Sheet Â»"),!this.hasDataRows()&&r.default.createElement("span",{className:"disabled-link"},"Export Excel Sheet Â»"))),r.default.createElement("div",{className:"blank-separator"}),r.default.createElement(h.default,{ref:"headerSelector",reportType:this.state.reportType,drilldown:this.state.drilldown,filters:this.state.filters,data:this.state.data,onFilterChange:this.onFilterChange}),t&&r.default.createElement("div",{className:"line-separator"}),t&&r.default.createElement(m.default,{ref:"filters",reportDefinition:e,filters:this.state.filters,onFilterChange:this.onFilterChange}),this.hasDataRows()&&r.default.createElement("div",{className:"blank-separator"}),!this.hasDataRows()&&r.default.createElement("div",{className:"line-separator"}),this.hasDataRows()&&r.default.createElement(b.default,{currentPage:parseInt(this.state.page),totalPages:Math.ceil(parseInt(this.state.data.numOfRecords)/e.itemsPerPage),onChange:this.onPageChange}),this.hasDataRows()&&r.default.createElement(p.default,{definition:e,reportType:this.state.reportType,drilldown:this.state.drilldown,page:this.state.page,sort:this.state.sort,descending:this.state.descending,data:this.state.data,onDrillDown:this.onDrillDown,onMergeChange:this.onMergeChange,onSortChange:this.onSortChange,filters:this.state.filters}),this.hasDataRows()&&r.default.createElement(b.default,{currentPage:parseInt(this.state.page),totalPages:Math.ceil(parseInt(this.state.data.numOfRecords)/e.itemsPerPage),onChange:this.onPageChange}),this.hasData()&&!this.hasDataRows()&&r.default.createElement(y.default,{reportDefinition:e,filters:this.state.filters}))))),1==this.state.isLoadingTab&&r.default.createElement(s.default,{top:40}))}}])&&_(t.prototype,a),n&&_(t,n),o}();t.default=M;var L=!1;function A(e,t){L&&console.log(e,t)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(6)),i=n(a(23)),s=n(a(51));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={reportTypeOptions:t.buildReportTypeOptions()},t.onReportTypeChange=t.onReportTypeChange.bind(p(p(t))),t.onSubmit=t.onSubmit.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){e.reportType!==this.refs.reportType.value()&&this.refs.reportType.setValue(e.reportType||null)}},{key:"onReportTypeChange",value:function(){this.refs.reportType.value()!==this.props.reportType&&this.props.onChange(this.refs.reportType.value())}},{key:"onSubmit",value:function(){}},{key:"buildReportTypeOptions",value:function(){return s.default.reportDefinitions.filter(function(e){return e.name}).map(function(e){return{value:e.key,label:e.name,separatorAbove:e.separatorAbove}})}},{key:"render",value:function(){return r.default.createElement("div",{className:"chooser"},r.default.createElement(l.default,{ref:"form",onSubmit:this.onSubmit},r.default.createElement("label",{className:"choose-report"},"Choose Report"),r.default.createElement(i.default,{ref:"reportType",name:"reportType",label:"Choose Report",initValue:this.props.reportType,onChange:this.onReportTypeChange,options:this.state.reportTypeOptions,disableValidationMessages:!0})))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=o(a(0)),s=o(a(1)),u=o(a(649)),c=n(a(1657)),p=o(a(1670)),r=n(a(10)),l=n(a(193)),m=o(a(51)),i=o(a(79));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?g(a):n).state={data:e.data,definition:e.definition,descending:e.descending,hovering:!1,hoverRow:null,media:i.default.getCurrentDimensions(),reportType:e.reportType,sort:e.sort},t.simpleCounter=0,t.onCouponColumnHover=t.onCouponColumnHover.bind(g(g(t))),t.onDrillDownColumnClick=t.onDrillDownColumnClick.bind(g(g(t))),t.onEndHover=t.onEndHover.bind(g(g(t))),t.onFieldSort=t.onFieldSort.bind(g(g(t))),t.onFieldMerge=t.onFieldMerge.bind(g(g(t))),t.onShowHover=t.onShowHover.bind(g(g(t))),t.onWindowResize=t.onWindowResize.bind(g(g(t))),t._isDetailReady=t._isDetailReady.bind(g(g(t))),t._renderDetailRow=t._renderDetailRow.bind(g(g(t))),t._setUniqueRowIds=t._setUniqueRowIds.bind(g(g(t))),t.detailColumnFuncs={onClick:t.onDrillDownColumnClick},t.state.data&&t._setUniqueRowIds(t.state.data.reportsRecord),t.state.definition&&t._setUniqueRowIds(t.state.definition.fields),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,f.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){m.default.addCouponColumnHoverListener(this.onShowHover),i.default.addWindowResizeListener(this.onWindowResize)}},{key:"componentWillUnmount",value:function(){m.default.removeCouponColumnHoverListener(this.onShowHover),i.default.removeWindowResizeListener(this.onWindowResize)}},{key:"componentWillReceiveProps",value:function(e){var t,a;this.state.data!==e.data&&((t=e.data)&&this._setUniqueRowIds(t.reportsRecord),this.setState({data:e.data,sort:e.sort})),this.state.definition!==e.definition&&(a=e.definition,this._setUniqueRowIds(a.fields),this.setState({definition:a,sort:e.sort}))}},{key:"onCouponColumnHover",value:function(e,t){e&&(l.showCouponColumnHover(),this.setState({hoverRow:t}))}},{key:"onDrillDownColumnClick",value:function(e){this.props.onDrillDown&&this.props.onDrillDown(e)}},{key:"onEndHover",value:function(){this.setState({hovering:!1,hoverRow:null})}},{key:"onFieldMerge",value:function(e){this.props.onMergeChange&&this.props.onMergeChange(e.field.key)}},{key:"onFieldSort",value:function(e){this.props.onSortChange&&this.props.onSortChange(e.field.key,e.direction)}},{key:"onShowHover",value:function(){this.setState({hovering:!0})}},{key:"onWindowResize",value:function(e){this.setState({media:e})}},{key:"_isDetailReady",value:function(){return this.state.data&&this.state.data.reportsRecord&&this.state.definition&&this.state.definition.fields&&0<this.state.definition.fields.length}},{key:"_setUniqueRowIds",value:function(e){if(e)for(var t=0;t<e.length;t++)e[t].id=this.simpleCounter++}},{key:"_renderDetailRow",value:function(a,e){var n=this,o=0,r="data"+e,t=[],l=function(e){return e.key in a||e.ignoreEmptyField&&"true"==e.ignoreEmptyField?c.createInstance(e,a,n.detailColumnFuncs):f.default.createElement("div",{className:"disabled"},"N/A")},i=function(e){return("royalty"===e||"salePrice"===e)&&a.projectCoupon};return a.projectCoupon&&(a.projectCoupon.promoType||(a.projectCoupon.promoType="bn_coupon")),t.push(f.default.createElement("tr",{key:r,className:"detail-row"},this._fieldsToShow().map(function(e){return f.default.createElement("td",{onMouseOver:function(){return n.onCouponColumnHover(i(e.key),r)},onMouseLeave:function(){return n.onEndHover()},className:(0,s.default)({"highlighted-cell":(t=e.key,i(t)&&n.state.hovering&&r===n.state.hoverRow)}),key:r+"_col"+o++},i(e.key)?f.default.createElement(u.default,{coupon:a.projectCoupon,tagContent:l(e)}):l(e));var t}))),"mo"===this.state.media.mode&&t.push(f.default.createElement("tr",{key:r+"MobileAction",className:"view-data-action"},f.default.createElement("td",{colSpan:this._fieldsToShow().length},f.default.createElement("a",{href:"#",onClick:function(){return n._openRowData(a)}},"See Details")))),t}},{key:"_fieldsToShow",value:function(){var t="mo"===this.state.media.mode;return this.state.definition.fields.filter(function(e){return t?e.mobileWidth:e.desktopWidth})}},{key:"_openRowData",value:function(e){r.showReportRowDetailModal(this.state.definition,e)}},{key:"render",value:function(){var o=this,r=0;if(!this._isDetailReady())return null;this.state.definition.fields;var l,i,s=this.state.definition.defaultSortKey,u=this.state.definition.defaultSortDirection,c=this.state.data.reportsRecord,d=0<c.length?Object.keys(c[0]):[];return i="dt"===this.state.media.mode?(l="","desktopWidth"):(l="mobile","mobileWidth"),f.default.createElement("div",{className:"detail"},f.default.createElement("table",{className:"table table-striped"},f.default.createElement("thead",null,f.default.createElement("tr",null,this._fieldsToShow().map(function(e){var t=(void 0===e.sortable||e.sortable)&&0<c.length,a=void 0!==e.rollup&&e.rollup,n=o.props.filters?o.props.filters.groupByTitle:null;return r++,f.default.createElement("th",{key:e.id,className:"detail-header "+l,style:{width:e[i]?e[i]+"%":"25%"}},f.default.createElement(p.default,{fieldDef:e,disabled:!d.includes(e.key),isSortable:t,isMergeable:a,defaultSortKey:s,defaultSortDirection:u,sort:o.state.sort,merged:n,descending:o.state.descending,onSort:o.onFieldSort,onMerge:o.onFieldMerge}))}))),f.default.createElement("tbody",null,0===c.length&&f.default.createElement("tr",null,f.default.createElement("td",{className:"no-data",colSpan:r},m.default.getReportNotFoundMessage(this.state.reportType))),c.map(function(e){return o._renderDetailRow(e,e.id)}))))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=v},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInstance=void 0;var o=n(a(0)),r=n(a(1658)),l=n(a(1659)),i=n(a(1660)),s=n(a(1661)),u=n(a(1662)),c=n(a(1663)),d=n(a(1664)),f=n(a(1665)),p=n(a(1666)),m=n(a(1667)),h=n(a(1668)),y=n(a(1669));function n(e){return e&&e.__esModule?e:{default:e}}t.createInstance=function(e,t,a){var n=null;switch(e.format){case"date":n=o.default.createElement(l.default,{fieldDef:e,selector:e.key,item:t});break;case"int":n=o.default.createElement(i.default,{fieldDef:e,selector:e.key,item:t});break;case"currency":n=o.default.createElement(s.default,{fieldDef:e,selector:e.key,item:t});break;case"week":n=o.default.createElement(c.default,{fieldDef:e,selector:e.key,item:t,onClick:a?a.onClick:void 0});break;case"month":n=o.default.createElement(d.default,{fieldDef:e,selector:e.key,item:t,onClick:a?a.onClick:void 0});break;case"year":n=o.default.createElement(f.default,{fieldDef:e,selector:e.key,item:t,onClick:a?a.onClick:void 0});break;case"title":n=o.default.createElement(p.default,{fieldDef:e,selector:e.key,item:t,onClick:a?a.onClick:void 0});break;case"drilldown":n=o.default.createElement(u.default,{fieldDef:e,selector:e.key,item:t,onClick:a?a.onClick:void 0});break;case"paymentMonth":n=o.default.createElement(m.default,{item:t,onClick:a?a.onClick:void 0});break;case"paymentId":n=o.default.createElement(h.default,{fieldDef:e,item:t,onClick:a?a.onClick:void 0});break;case"paymentReports":n=o.default.createElement(y.default,{fieldDef:e,item:t,onClick:a?a.onClick:void 0});break;default:n=o.default.createElement(r.default,{fieldDef:e,selector:e.key,item:t})}return n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i(this,s(a).call(this,e))).state={fieldDef:e.fieldDef,selector:e.selector,item:e.item},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,r.default.Component),t=a,(n=[{key:"render",value:function(){var e=this.state.item,t=this.state.selector;return r.default.createElement("span",null,e[t])}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i(this,s(a).call(this,e))).state={fieldDef:e.fieldDef,selector:e.selector,item:e.item},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,r.default.Component),t=a,(n=[{key:"render",value:function(){var e=this.state.item,t=this.state.selector;return r.default.createElement("span",null,e[t])}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n},l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(22));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s(this,u(a).call(this,e))).state={fieldDef:e.fieldDef,selector:e.selector,item:e.item},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,r.default.Component),t=a,(n=[{key:"render",value:function(){var e=this.state.item,t=this.state.selector;return r.default.createElement("span",null,l.formatWithCommas(e[t]))}}])&&i(t.prototype,n),o&&i(t,o),a}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=(n=a(0))&&n.__esModule?n:{default:n},i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(22));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s(this,u(a).call(this,e))).state={fieldDef:e.fieldDef,selector:e.selector,currencySelector:e.fieldDef.currencyKey,item:e.item},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,l.default.Component),t=a,(n=[{key:"render",value:function(){var e=this.state.currencySelector,t=this.state.item,a=t.projectCoupon&&t.projectCoupon.promoType,n=this.state.selector,o=parseFloat(t[n]),r=i.formatCurrency(o,t[e]);return l.default.createElement("div",null,l.default.createElement("span",null,r),"royalty"===n&&a&&l.default.createElement("img",{className:"coupon-tag",src:"img/price_tag.svg"}))}}])&&r(t.prototype,n),o&&r(t,o),a}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n},l=a(24);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={fieldDef:e.fieldDef,selector:e.selector,item:e.item},t.onClick=t.onClick.bind(d(d(t))),t.onDebounceClick=(0,l.debounce)(5e3,!0,t.onDebounceClick.bind(d(d(t)))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.default.Component),t=o,(a=[{key:"onClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.onDebounceClick()}},{key:"onDebounceClick",value:function(){this.props.onClick&&this.props.onClick(this.state.fieldDef)}},{key:"render",value:function(){var e=this.state.item,t=this.state.selector;return r.default.createElement("a",{href:"#",onClick:this.onClick},e[t])}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n},l=a(24),i=a(7);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==s(n)&&"function"!=typeof n?f(a):n).state={fieldDef:e.fieldDef,selector:e.selector,item:e.item,value:e.item[e.selector]},t._parseWeek=t._parseWeek.bind(f(f(t))),t.onClick=t.onClick.bind(f(f(t))),t.onDebounceClick=(0,l.debounce)(5e3,!0,t.onDebounceClick.bind(f(f(t)))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,r.default.Component),t=o,(a=[{key:"_parseWeek",value:function(){var e,t={};return 2===(e=this.state.value.split(" - ")).length&&(t={fromDate:(0,i.bn_moment)(e[0],"MM/DD/YYYY").format("MM-DD-YYYY"),toDate:(0,i.bn_moment)(e[1],"MM/DD/YYYY").format("MM-DD-YYYY")}),t}},{key:"onClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.onDebounceClick()}},{key:"onDebounceClick",value:function(){if(this.props.onClick){var e=this._parseWeek();this.props.onClick({fieldDef:this.state.fieldDef,filter:e})}}},{key:"render",value:function(){var e=this.state.value;return r.default.createElement("a",{href:"#",onClick:this.onClick},e)}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=a(0))&&n.__esModule?n:{default:n},u=a(24),c=a(7);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var i=function(e){function s(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),a=this,t=!(n=f(s).call(this,e))||"object"!==d(n)&&"function"!=typeof n?p(a):n;var o=e.item[e.selector].split(" - "),r=(0,c.bn_moment)(o[0],"MM/DD/YYYY"),l=(0,c.bn_moment)(o[1],"MM/DD/YYYY"),i=r.format("MMMM");return t.state={fromDate:r,toDate:l,label:i},t.onClick=t.onClick.bind(p(p(t))),t.onDebounceClick=(0,u.debounce)(5e3,!0,t.onDebounceClick.bind(p(p(t)))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,o.default.Component),t=s,(a=[{key:"onClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.onDebounceClick()}},{key:"onDebounceClick",value:function(){this.props.onClick({fieldDef:this.props.fieldDef,filter:{fromDate:this.state.fromDate.format("MM-DD-YYYY"),toDate:this.state.toDate.format("MM-DD-YYYY")}})}},{key:"render",value:function(){return o.default.createElement("a",{href:"#",onClick:this.onClick},this.state.label)}}])&&r(t.prototype,a),n&&r(t,n),s}();t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=a(0))&&n.__esModule?n:{default:n},u=a(24),c=a(7);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var i=function(e){function s(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),a=this,t=!(n=f(s).call(this,e))||"object"!==d(n)&&"function"!=typeof n?p(a):n;var o=e.item[e.selector].split(" - "),r=(0,c.bn_moment)(o[0],"MM/DD/YYYY"),l=(0,c.bn_moment)(o[1],"MM/DD/YYYY"),i=r.year().toString();return t.state={fromDate:r,toDate:l,label:i},t.onClick=t.onClick.bind(p(p(t))),t.onDebounceClick=(0,u.debounce)(5e3,!0,t.onDebounceClick.bind(p(p(t)))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,o.default.Component),t=s,(a=[{key:"onClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.onDebounceClick()}},{key:"onDebounceClick",value:function(){this.props.onClick({fieldDef:this.props.fieldDef,filter:{fromDate:this.state.fromDate.format("MM-DD-YYYY"),toDate:this.state.toDate.format("MM-DD-YYYY")}})}},{key:"render",value:function(){return o.default.createElement("a",{href:"#",onClick:this.onClick},this.state.label)}}])&&r(t.prototype,a),n&&r(t,n),s}();t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n},l=a(24);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={title:e.item[e.selector],ean:e.item.ean},t.onClick=t.onClick.bind(d(d(t))),t.onDebounceClick=(0,l.debounce)(5e3,!0,t.onDebounceClick.bind(d(d(t)))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.default.Component),t=o,(a=[{key:"onClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.onDebounceClick()}},{key:"onDebounceClick",value:function(){this.props.onClick({fieldDef:this.props.fieldDef,filter:{title:this.state.title,ean:this.state.ean}})}},{key:"render",value:function(){return r.default.createElement("a",{href:"#",onClick:this.onClick},this.state.title)}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n},l=a(7);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s(this,u(a).call(this,e))).state={item:e.item},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,r.default.Component),t=a,(n=[{key:"render",value:function(){var e=this.state.item,t=(0,l.bn_moment)(e.paymentMonth+"-"+e.paymentYear,"MM-YYYY").format("MMMM YYYY");return r.default.createElement("span",null,t)}}])&&i(t.prototype,n),o&&i(t,o),a}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n},l=a(24);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={},t.onClick=t.onClick.bind(d(d(t))),t.onDebounceClick=(0,l.debounce)(5e3,!0,t.onDebounceClick.bind(d(d(t)))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.default.Component),t=o,(a=[{key:"onClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.onDebounceClick()}},{key:"onDebounceClick",value:function(){this.props.onClick({fieldDef:this.props.fieldDef,filter:{paymentId:this.props.item.paymentId}})}},{key:"render",value:function(){return r.default.createElement("a",{href:"#",onClick:this.onClick},this.props.item.paymentId)}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n},l=a(24);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=u(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?d(a):n).state={},t.onEBookClick=t.onEBookClick.bind(d(d(t))),t.onPrintClick=t.onPrintClick.bind(d(d(t))),t.onDebounceClick=(0,l.debounce)(5e3,!0,t.onDebounceClick.bind(d(d(t)))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.default.Component),t=o,(a=[{key:"onEBookClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.onDebounceClick({fieldDef:this.props.fieldDef,filter:{paymentId:this.props.item.paymentId,format:"EBOOK"}})}},{key:"onPrintClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.onDebounceClick({fieldDef:this.props.fieldDef,filter:{paymentId:this.props.item.paymentId,format:"SPB"}})}},{key:"onDebounceClick",value:function(e){this.props.onClick&&this.props.onClick(e)}},{key:"render",value:function(){var e=this.props.item.eBookSaleDate&&0<this.props.item.eBookSaleDate.length,t=this.props.item.printSaleDate&&0<this.props.item.printSaleDate.length;return r.default.createElement("span",null,e&&r.default.createElement("a",{href:"#",onClick:this.onEBookClick},"eBook Reports"),e&&t&&r.default.createElement("br",null),t&&r.default.createElement("a",{href:"#",onClick:this.onPrintClick},"Print Reports"))}}])&&s(t.prototype,a),n&&s(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),s=n(a(1)),r=a(24);function n(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=c(o).call(this,e))||"object"!==l(n)&&"function"!=typeof n?f(a):n).state={direction:null,mergeable:t.props.isMergeable&&t.props.onMerge},t._isSortable()&&e.sort===e.fieldDef.key&&(t.state.direction=t._calibrateDirection(!0,e.descending)),t.onSort=t.onSort.bind(f(f(t))),t.onMerge=t.onMerge.bind(f(f(t))),t._isSortable=t._isSortable.bind(f(f(t))),t._calibrateDirection=t._calibrateDirection.bind(f(f(t))),t.onDebounceSort=(0,r.debounce)(500,!0,t.onSort),t.onDebounceMerge=(0,r.debounce)(500,!0,t.onMerge),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,i.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){this.state.direction&&e.sort&&e.sort!==e.fieldDef.key&&this.setState({direction:null})}},{key:"onSort",value:function(){var e;this._isSortable()&&(this.state.direction&&"desc"!==this.state.direction?"asc"===this.state.direction&&(e="desc"):e="asc",this.setState({direction:e}),this.props.onSort({field:this.props.fieldDef,direction:e}))}},{key:"onMerge",value:function(){this.state.mergeable&&this.props.onMerge({field:this.props.fieldDef})}},{key:"_isSortable",value:function(){return this.props.isSortable&&this.props.onSort&&!this.props.disabled}},{key:"_calibrateDirection",value:function(e,t){var a=null;return e&&(a=t?"desc":"asc"),a}},{key:"render",value:function(){var t=this,e=this.props.fieldDef,a=e.name,n=this._isSortable(),o=this.state.mergeable,r=this.props.disabled,l=this.state.direction?"fa-sort-"+this.state.direction:"fa-sort";return"Total Units Pre-Ordered"===a&&(a="Total Units Preâ€‘Ordered"),"Reports"===a&&"paymentReports"===e.format&&(r=!1),i.default.createElement("div",{className:(0,s.default)("detail-header-content",{sortable:n},{mergeable:o},{disabled:r}),onClick:this.onDebounceSort},i.default.createElement("span",null,a,o&&i.default.createElement("img",{src:"true"!==this.props.merged?"img/rollup_icon.png":"img/rollup_icon_selected.png",title:"true"!==this.props.merged?"Merge by "+a:"Unmerge by "+a,onClick:function(e){e.stopPropagation(),t.onDebounceMerge()},style:{marginLeft:"5px"}})),n&&i.default.createElement("div",{className:"sort-arrows"},i.default.createElement("i",{className:"fa "+l})))}}])&&u(t.prototype,a),n&&u(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),c=a(7),d=n(a(4)),l=n(a(76)),i=n(a(6)),s=n(a(12)),f=n(a(51)),u=n(a(23));function n(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=h(o).call(this,e))||"object"!==p(n)&&"function"!=typeof n?b(a):n).state={filterType:e.reportDefinition.filters.length,disabledUpdateBtn:!0},t.useFilter(O)&&(t.state.yearOptions=t.buildYearOptions()),t.ignoreChangeEvents=!1,t.onFiltersChanged=t.onFiltersChanged.bind(b(b(t))),t.onDateFiltersChanged=t.onDateFiltersChanged.bind(b(b(t))),t.onSubmit=t.onSubmit.bind(b(b(t))),t.setDatePickerBound=t.setDatePickerBound.bind(b(b(t))),t.updateDatePickerBounds=t.updateDatePickerBounds.bind(b(b(t))),t.UpdateSearch=t.UpdateSearch.bind(b(b(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){this.applyFilterValues(this.props.filters)}},{key:"componentWillReceiveProps",value:function(e){e.filters!==this.props.filters&&this.applyFilterValues(e.filters)}},{key:"toFilterMap",value:function(){var e=this.refs.form.gather(),t={};return this.useFilter(P)&&(t.fromDate=e.startDate.format("MM-DD-YYYY")),this.useFilter(w)&&(t.toDate=e.endDate.format("MM-DD-YYYY")),this.useFilter(S)&&e.format&&"ALL"!==e.format&&(t.format=e.format),this.useFilter(k)&&e.searchText&&0<e.searchText.trim().length&&(t.searchText=e.searchText.trim()),this.useFilter(O)&&(t.year=e.year),t}},{key:"onFiltersChanged",value:function(){this.ignoreChangeEvents||(this.setState({disabledUpdateBtn:!1}),1==this.state.filterType&&this.props.onFilterChange())}},{key:"UpdateSearch",value:function(){this.props.onFilterChange(),this.setState({disabledUpdateBtn:!0})}},{key:"onDateFiltersChanged",value:function(){var e=this,t=this.refs.startDate.value(),a=this.refs.endDate.value(),n=this.refs.startDate.minDate(),o=this.refs.endDate.maxDate(),r=this.reportDefinition.key,l=(0,c.bn_moment)().subtract(E,"days");if(t&&a&&!this.ignoreChangeEvents){if(t.isAfter(a))return void this.refs.endDate.setValue(t.clone());if("recentSales"!==r){if("preOrder"!==r&&"preOrderDetail"!==r){if(a.diff(t,"months",!0)>v)return void this.refs.endDate.setValue(t.clone().add(v,"months"));if(t.isAfter(l))return void this.refs.startDate.setValue(l.clone());if(a.isAfter(l))return void this.refs.endDate.setValue(l.clone());"customDate"===r&&(o=t.clone().add(v,"months").isBefore(l)?t.clone().add(v,"months"):l)}}else{if(t.isBefore(n))return void this.refs.startDate.setValue(n.clone());if(t.isAfter(o))return void this.refs.startDate.setValue(o.clone());if(a.isAfter(o))return void this.refs.endDate.setValue(o.clone())}var i=t.clone();this.setState({minEndDate:i,maxEndDate:o},function(){return e.onFiltersChanged()})}}},{key:"onSubmit",value:function(){}},{key:"applyFilterValues",value:function(e){var t=e.fromDate,a=e.format,n=this.reportDefinition.key,o=e.searchText,r=e.toDate,l=e.year;this.ignoreChangeEvents=!0,this.useFilter(P)&&(void 0===t&&"recentSales"===n&&(t=(0,c.bn_moment)().subtract(1,"day")),this.refs.startDate.setValue((0,c.bn_moment)(t,"MM-DD-YYYY","MM-DD-YYYY")),this.updateDatePickerBounds(e)&&this.setState({maxStartDate:this.setDatePickerBound(e,"max","startDate"),minStartDate:this.setDatePickerBound(e,"min","startDate")})),this.useFilter(w)&&(void 0===r&&"recentSales"===n&&(r=(0,c.bn_moment)()),this.refs.endDate.setValue((0,c.bn_moment)(r,"MM-DD-YYYY","MM-DD-YYYY")),this.updateDatePickerBounds(e)&&this.setState({maxEndDate:this.setDatePickerBound(e,"max","endDate"),minEndDate:this.setDatePickerBound(e,"min","endDate")})),this.useFilter(S)&&this.refs.format.setValue("EBOOK"===a||"SPB"===a?a:"ALL"),this.useFilter(k)&&this.refs.searchText.setValue(o?o.trim():""),this.useFilter(O)&&this.refs.year.setValue(l?l.trim():null),this.ignoreChangeEvents=!1}},{key:"useFilter",value:function(e){return this.reportDefinition.filters&&this.reportDefinition.filters.includes(e)}},{key:"buildYearOptions",value:function(){if("sales"===this.props.reportDefinition.startDateType)return f.default.getSalesYears().map(function(e){return{value:e,label:e}});if("payment"===this.props.reportDefinition.startDateType)return f.default.getPaymentYears().map(function(e){return{value:e,label:e}});throw"Report definition does not have a valid startDateType"}},{key:"setDatePickerBound",value:function(e,t,a){var n,o=(0,c.bn_moment)().subtract(E,"days"),r=f.default.firstSaleDate?f.default.firstSaleDate:(0,c.bn_moment)().subtract(2,"days"),l=(0,c.bn_moment)(e.fromDate,"MM-DD-YYYY"),i=this.reportDefinition.key,s=(0,c.bn_moment)(e.toDate,"MM-DD-YYYY"),u=d.default.getUser();return"min"===t?"salesByMonthDetail"===i||"salesByWeekDetail"===i?n=l:"customDate"===i?"startDate"===a?n=r:"endDate"===a&&(n=l):"preOrder"===i?n=u.approvalDate?u.approvalDate:(0,c.bn_moment)().subtract(2,"days"):"recentSales"===i&&(n=(0,c.bn_moment)().subtract(1,"day")):"max"===t&&(n="salesByMonthDetail"===i&&l.month()!==(0,c.bn_moment)().month()||"salesByWeekDetail"===i?s:"preOrder"===i||"recentSales"===i?(0,c.bn_moment)():o),n}},{key:"updateDatePickerBounds",value:function(e){var t=(0,c.bn_moment)(e.fromDate,"MM-DD-YYYY"),a=this.reportDefinition.key;return"salesByWeekDetail"!==a&&"salesByMonthDetail"!==a?("customDate"===a||"recentSales"===a)&&void 0===this.state.minStartDate||"preOrder"===a&&void 0===this.state.minStartDate:!(!t.isBefore(this.state.minStartDate)&&!t.isAfter(this.state.maxStartDate))||void 0}},{key:"render",value:function(){return r.default.createElement("div",{className:"filters"},r.default.createElement(i.default,{ref:"form",onSubmit:this.onSubmit},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12 report-filters"},this.useFilter(O)&&r.default.createElement("div",{className:"filter-control year"},r.default.createElement(u.default,{ref:"year",name:"year",label:"Year",options:this.state.yearOptions,disableValidationMessages:!0,onChange:this.onFiltersChanged})),this.useFilter(P)&&r.default.createElement("div",{className:"filter-control start-date"},r.default.createElement(l.default,{ref:"startDate",name:"startDate",label:"Start Date",disableValidationMessages:!0,minDate:this.state.minStartDate,maxDate:this.state.maxStartDate,onChange:this.onDateFiltersChanged,selectsStart:!0,startDate:(0,c.bn_moment)(this.props.filters.fromDate,"MM-DD-YYYY"),endDate:(0,c.bn_moment)(this.props.filters.toDate,"MM-DD-YYYY")})),this.useFilter(w)&&r.default.createElement("div",{className:"filter-control end-date"},r.default.createElement(l.default,{ref:"endDate",name:"endDate",label:"End Date",disableValidationMessages:!0,minDate:this.state.minEndDate,maxDate:this.state.maxEndDate,onChange:this.onDateFiltersChanged,selectsEnd:!0,startDate:(0,c.bn_moment)(this.props.filters.fromDate,"MM-DD-YYYY"),endDate:(0,c.bn_moment)(this.props.filters.toDate,"MM-DD-YYYY")})),this.useFilter(S)&&r.default.createElement("div",{className:"filter-control format"},r.default.createElement(u.default,{ref:"format",name:"format",label:"Format",options:g,disableValidationMessages:!0,onChange:this.onFiltersChanged})),this.useFilter(k)&&r.default.createElement("div",{className:"filter-control search-text"},r.default.createElement(s.default,{ref:"searchText",name:"searchText",label:"Filter by Title, Author, ISBN",disableOnBlur:!0,disableValidationMessages:!0,commitOnEnterKey:!0,onChange:this.onFiltersChanged,onCommit:this.onFiltersChanged})),1<this.state.filterType&&r.default.createElement("div",{className:"filter-control button-container-extra"},r.default.createElement("button",{className:"btn btn-new-contributor btn-primary update-btn",disabled:this.state.disabledUpdateBtn,"aria-disabled":this.state.disabledUpdateBtn,onClick:this.UpdateSearch},"Search"))))))}},{key:"reportDefinition",get:function(){return this.props.reportDefinition}}])&&m(t.prototype,a),n&&m(t,n),o}();t.default=o;var g=[{value:"ALL",label:"All Books"},{value:"EBOOK",label:"eBooks"},{value:"SPB",label:"Print Books"}],v=6,E=2,S="format",k="searchText",P="startDate",w="endDate",O="year"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(1673)),i=n(a(1674)),s=n(a(1675)),u=n(a(1677)),c=n(a(1678)),d=n(a(1679)),f=n(a(1680));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,h(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r.default.Component),a=t,(n=[{key:"toFilterMap",value:function(){return this.refs.header&&this.refs.header.toFilterMap?this.refs.header.toFilterMap():{}}},{key:"render",value:function(){return r.default.createElement("div",null,"salesByWeek"===this.props.reportType&&r.default.createElement(i.default,{ref:"header",reportType:this.props.reportType,drilldown:this.props.drilldown,filters:this.props.filters,data:this.props.data,onFilterChange:this.props.onFilterChange}),"salesByMonth"===this.props.reportType&&r.default.createElement(s.default,{ref:"header",reportType:this.props.reportType,drilldown:this.props.drilldown,filters:this.props.filters,data:this.props.data,onFilterChange:this.props.onFilterChange}),"salesByYear"===this.props.reportType&&r.default.createElement(u.default,{ref:"header",reportType:this.props.reportType,drilldown:this.props.drilldown,filters:this.props.filters,data:this.props.data,onFilterChange:this.props.onFilterChange}),"recentSales"===this.props.reportType&&r.default.createElement(l.default,{ref:"header",reportType:this.props.reportType,drilldown:this.props.drilldown,filters:this.props.filters,data:this.props.data,onFilterChange:this.props.onFilterChange}),"customDate"===this.props.reportType&&r.default.createElement(c.default,{ref:"header",reportType:this.props.reportType,drilldown:this.props.drilldown,filters:this.props.filters,data:this.props.data,onFilterChange:this.props.onFilterChange}),"preOrder"===this.props.reportType&&r.default.createElement(d.default,{ref:"header",reportType:this.props.reportType,drilldown:this.props.drilldown,filters:this.props.filters,data:this.props.data,onFilterChange:this.props.onFilterChange}),"payments"===this.props.reportType&&r.default.createElement(f.default,{ref:"header",reportType:this.props.reportType,drilldown:this.props.drilldown,filters:this.props.filters,data:this.props.data,onFilterChange:this.props.onFilterChange}))}}])&&p(a.prototype,n),o&&p(a,o),t}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(194));!function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(a(22));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s(this,u(a).call(this,e))).state={},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,r.default.Component),t=a,(n=[{key:"toFilterMap",value:function(){return{}}},{key:"render",value:function(){return r.default.createElement("div",{className:"report-header recent-sales"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"report-name"},"Recent Sales"))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"header-filters"},r.default.createElement("span",{className:"left-arrow"}),r.default.createElement("span",null,"TODAY AND YESTERDAY"),r.default.createElement("span",{className:"right-arrow"})))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(l.default,{data:this.props.data,includeUnitsSold:!0}))))}}])&&i(t.prototype,n),o&&i(t,o),a}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=a(7),i=n(a(1)),s=a(24),u=n(a(194)),c=n(a(51));function n(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=p(o).call(this,e))||"object"!==d(n)&&"function"!=typeof n?h(a):n).state={},t.setToDateIfCurrentWeek=t.setToDateIfCurrentWeek.bind(h(h(t))),t.onPrevious=t.onPrevious.bind(h(h(t))),t.onNext=t.onNext.bind(h(h(t))),t.onDebouncePrevious=(0,s.debounce)(500,!0,t.onDebouncePrevious.bind(h(h(t)))),t.onDebounceNext=(0,s.debounce)(500,!0,t.onDebounceNext.bind(h(h(t)))),t.props.drilldown&&(t.state.fromDate=(0,l.bn_moment)(t.props.filters.fromDate,"MM-DD-YYYY"),t.state.toDate=t.setToDateIfCurrentWeek(t.state.fromDate)),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,r.default.Component),t=o,(a=[{key:"toFilterMap",value:function(){return this.props.drilldown?{fromDate:this.state.fromDate.format("MM-DD-YYYY"),toDate:this.setToDateIfCurrentWeek(this.state.fromDate).format("MM-DD-YYYY")}:{}}},{key:"onDebouncePrevious",value:function(){var e=this;this.setState({fromDate:this.state.fromDate.clone().subtract(1,"week"),toDate:this.state.fromDate.clone().subtract(1,"day")},function(){e.props.onFilterChange()})}},{key:"onDebounceNext",value:function(){var e=this,t=this.state.fromDate.clone().add(1,"week"),a=this.setToDateIfCurrentWeek(t);this.setState({fromDate:t,toDate:a},function(){e.props.onFilterChange()})}},{key:"onPrevious",value:function(){this.onDebouncePrevious()}},{key:"onNext",value:function(){this.onDebounceNext()}},{key:"setToDateIfCurrentWeek",value:function(e){var t=e.clone().add(6,"days");return e.clone().add(6,"days").isAfter((0,l.bn_moment)())&&(t=e.clone().add(2,"days").isAfter((0,l.bn_moment)())?e:(0,l.bn_moment)().subtract(2,"days")),t}},{key:"render",value:function(){var e=!1,t=!1;return this.props.drilldown&&(e=this.state.fromDate.clone().subtract(1,"day").isBefore(c.default.firstSaleDate),t=this.state.fromDate.clone().add(9,"days").isAfter((0,l.bn_moment)())),r.default.createElement("div",{className:"report-header sales-by-week"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"report-name"},"Sales by Week"))),this.props.drilldown&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"header-filters"},r.default.createElement("span",{className:(0,i.default)("arrow glyphicon glyphicon-menu-left",{disabled:e}),onClick:e?null:this.onPrevious}),"Â ",r.default.createElement("span",null,this.state.fromDate.format("MM/DD/YYYY")+" - "+this.state.toDate.format("MM/DD/YYYY")),"Â ",r.default.createElement("span",{className:(0,i.default)("arrow glyphicon glyphicon-menu-right",{disabled:t}),onClick:t?null:this.onNext})))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(u.default,{data:this.props.data,includeUnitsSold:!0}))))}}])&&f(t.prototype,a),n&&f(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),u=a(7),l=n(a(1)),i=a(24),s=n(a(1676)),c=n(a(194)),d=n(a(51));function n(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={},e.drilldown&&(t.state.fromDate=(0,u.bn_moment)(e.filters.fromDate,"MM-DD-YYYY"),t.state.monthOptions=t.buildMonthOptions(e.filters),t.state.toDate=(0,u.bn_moment)(e.filters.toDate,"MM-DD-YYYY")),t.buildMonthOptions=t.buildMonthOptions.bind(y(y(t))),t.onDebounceNext=(0,i.debounce)(500,!0,t.onDebounceNext.bind(y(y(t)))),t.onDebouncePrevious=(0,i.debounce)(500,!0,t.onDebouncePrevious.bind(y(y(t)))),t.onNext=t.onNext.bind(y(y(t))),t.onPrevious=t.onPrevious.bind(y(y(t))),t.onSelectorChange=t.onSelectorChange.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){if(e.drilldown&&e.filters!==this.props.filters){var t=(0,u.bn_moment)(e.filters.fromDate,"MM-DD-YYYY"),a=(0,u.bn_moment)(e.filters.toDate,"MM-DD-YYYY"),n=(0,u.bn_moment)(this.props.filters.fromDate,"MM-DD-YYYY");t.format("MMMM YYYY")!==n.format("MMMM YYYY")&&this.setState({fromDate:t,monthOptions:this.buildMonthOptions(e.filters),toDate:a})}}},{key:"toFilterMap",value:function(){return this.props.drilldown?{fromDate:this.state.fromDate.format("MM-DD-YYYY"),toDate:this.state.toDate.format("MM-DD-YYYY")}:{}}},{key:"onDebounceNext",value:function(){var e=this,t=this.state.fromDate.clone().add(1,"month"),a=this.state.fromDate.clone().add(2,"months").subtract(1,"day");t.month()===(0,u.bn_moment)().month()&&(a=(0,u.bn_moment)().subtract(2,"days")).isBefore(t)&&(a=t),this.setState({fromDate:t,toDate:a},function(){e.props.onFilterChange()})}},{key:"onDebouncePrevious",value:function(){var e=this;this.setState({fromDate:this.state.fromDate.clone().subtract(1,"month"),toDate:this.state.fromDate.clone().subtract(1,"day")},function(){e.props.onFilterChange()})}},{key:"onNext",value:function(){this.onDebounceNext()}},{key:"onPrevious",value:function(){this.onDebouncePrevious()}},{key:"onSelectorChange",value:function(e,t){var a=this;this.setState({fromDate:e,toDate:t},function(){a.props.onFilterChange()})}},{key:"buildMonthOptions",value:function(e){var t,a,n=(0,u.bn_moment)(e.fromDate,"MM-DD-YYYY"),o=(0,u.bn_moment)(e.toDate,"MM-DD-YYYY"),r=d.default.firstSaleDate,l=0,i=0,s=[];if(n.format("MM-DD-YYYY")!==(0,u.bn_moment)().startOf("month").format("MM-DD-YYYY"))for(t=n.clone().add(1,"month");!t.isAfter((0,u.bn_moment)())&&6!==l;)a=t.clone().endOf("month"),t.format("MM-DD-YYYY")===(0,u.bn_moment)().startOf("month").format("MM-DD-YYYY")&&(a=(0,u.bn_moment)().subtract(2,"days")).isBefore(t)&&(a=t),s.unshift({key:t.format("MMMM YYYY").toUpperCase(),value:t.format("MMMM YYYY").toUpperCase(),fromDate:t.format("MM-DD-YYYY"),toDate:a.format("MM-DD-YYYY")}),t=t.add(1,"month"),l+=1;for(s.push({key:n.format("MMMM YYYY").toUpperCase(),value:n.format("MMMM YYYY").toUpperCase(),fromDate:n.format("MM-DD-YYYY"),toDate:o.format("MM-DD-YYYY")}),t=n.clone().subtract(1,"month");(t.isAfter(r)||t.format("MMMM YYYY")===r.format("MMMM YYYY"))&&6!==i;)a=t.clone().endOf("month"),s.push({key:t.format("MMMM YYYY").toUpperCase(),value:t.format("MMMM YYYY").toUpperCase(),fromDate:t.format("MM-DD-YYYY"),toDate:a.format("MM-DD-YYYY")}),t=t.subtract(1,"month"),i+=1;return s}},{key:"render",value:function(){var e=!1,t=!1;return this.props.drilldown&&(e=this.state.fromDate.clone().subtract(1,"day").isBefore(d.default.firstSaleDate),t=this.state.fromDate.clone().add(1,"month").isAfter((0,u.bn_moment)())),r.default.createElement("div",{className:"report-header sales-by-month"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"report-name"},"Sales by Month"))),this.props.drilldown&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"header-filters"},r.default.createElement("div",{className:"month-header-filters"},r.default.createElement("span",{className:(0,l.default)("left-arrow glyphicon glyphicon-menu-left",{disabled:e}),onClick:e?null:this.onPrevious}),"Â ",r.default.createElement(s.default,{currentMonth:this.state.fromDate.format("MMMM YYYY").toUpperCase(),monthOptions:this.state.monthOptions,onChange:this.onSelectorChange}),"Â ",r.default.createElement("span",{className:(0,l.default)("right-arrow glyphicon glyphicon-menu-right",{disabled:t}),onClick:t?null:this.onNext}))))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(c.default,{data:this.props.data,includeUnitsSold:!0}))))}}])&&p(t.prototype,a),n&&p(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=a(7),i=n(a(6)),s=n(a(23));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={currentMonth:t.props.currentMonth,monthOptions:t.props.monthOptions.map(function(e){return{label:e.key,value:e.value,fromDate:e.fromDate,toDate:e.toDate}})},t.onMonthChange=t.onMonthChange.bind(p(p(t))),t.onSubmit=t.onSubmit.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillReceiveProps",value:function(e){e!==this.props&&(this.setState({currentMonth:e.currentMonth,monthOptions:e.monthOptions.map(function(e){return{label:e.key,value:e.value,fromDate:e.fromDate,toDate:e.toDate}})}),this.refs.reportMonth.setValue(e.currentMonth))}},{key:"onMonthChange",value:function(){if(this.refs.reportMonth.value()!==this.state.currentMonth){for(var e,t,a=0;a<this.state.monthOptions.length;a++)this.refs.reportMonth.value()===this.state.monthOptions[a].value&&(e=this.state.monthOptions[a].fromDate,t=this.state.monthOptions[a].toDate);this.props.onChange((0,l.bn_moment)(e,"MM-DD-YYYY"),(0,l.bn_moment)(t,"MM-DD-YYYY"))}}},{key:"onSubmit",value:function(){}},{key:"render",value:function(){return r.default.createElement("div",{className:"month-selector"},r.default.createElement(i.default,{ref:"form",onSubmit:this.onSubmit},r.default.createElement(s.default,{ref:"reportMonth",name:"reportMonth",initValue:this.state.currentMonth,onChange:this.onMonthChange,options:this.state.monthOptions,disableValidationMessages:!0,keepValue:!0})))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,a,n){"use strict";(function(r){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=e(n(0)),i=n(7),s=e(n(1)),u=n(24),c=e(n(194)),d=e(n(51));!function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(n(22));function e(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var t=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={},e.drilldown&&(t.state.fromDate=(0,i.bn_moment)(e.filters.fromDate,"MM-DD-YYYY")),t.onPrevious=t.onPrevious.bind(y(y(t))),t.onNext=t.onNext.bind(y(y(t))),t.onDebouncePrevious=(0,u.debounce)(500,!0,t.onDebouncePrevious.bind(y(y(t)))),t.onDebounceNext=(0,u.debounce)(500,!0,t.onDebounceNext.bind(y(y(t)))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,l.default.Component),t=o,(a=[{key:"toFilterMap",value:function(){return this.props.drilldown?{fromDate:this.state.fromDate.format("MM-DD-YYYY"),toDate:this.state.fromDate.clone().add(1,"year").subtract(1,"day").format("MM-DD-YYYY")}:{}}},{key:"onPrevious",value:function(){this.onDebouncePrevious()}},{key:"onNext",value:function(){this.onDebounceNext()}},{key:"onDebouncePrevious",value:function(){var e=this;this.setState({fromDate:this.state.fromDate.clone().subtract(1,"year")},function(){e.props.onFilterChange()})}},{key:"onDebounceNext",value:function(){var e=this;this.setState({fromDate:this.state.fromDate.clone().add(1,"year")},function(){e.props.onFilterChange()})}},{key:"render",value:function(){var e=!1,t=!1;return this.props.drilldown&&(e=this.state.fromDate.clone().subtract(1,"day").isBefore(d.default.firstSaleDate),t=this.state.fromDate.clone().add(1,"year").isAfter(r())),l.default.createElement("div",{className:(0,s.default)("report-header","sales-by-year")},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-12"},l.default.createElement("div",{className:"report-name"},"Sales by Year"))),this.props.drilldown&&l.default.createElement("div",{className:"header-filters"},l.default.createElement("span",{className:(0,s.default)("arrow glyphicon glyphicon-menu-left",{disabled:e}),onClick:e?null:this.onPrevious}),"Â ",l.default.createElement("span",null,this.state.fromDate.format("YYYY")),"Â ",l.default.createElement("span",{className:(0,s.default)("arrow glyphicon glyphicon-menu-right",{disabled:t}),onClick:t?null:this.onNext})),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-12"},l.default.createElement(c.default,{data:this.props.data,includeUnitsSold:!0}))))}}])&&p(t.prototype,a),n&&p(t,n),o}();a.default=t}).call(this,n(117))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(194));!function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(a(22));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s(this,u(a).call(this,e))).state={},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,r.default.Component),t=a,(n=[{key:"toFilterMap",value:function(){return{}}},{key:"render",value:function(){return r.default.createElement("div",{className:"report-header"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"report-name"},"Custom Date"))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(l.default,{className:"less-top-margin",data:this.props.data,includeUnitsSold:!0}))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"header-filters"},r.default.createElement("span",null,"Choose dates within a six-month period")))))}}])&&i(t.prototype,n),o&&i(t,o),a}();t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=n(a(80)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(22));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=u(this,c(a).call(this,e))).state={},e.drilldown&&(t.state.title=e.filters.title,t.state.ean=e.filters.ean),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,r.default.Component),t=a,(n=[{key:"toFilterMap",value:function(){return this.props.drilldown?{title:this.state.title,ean:this.state.ean}:{}}},{key:"render",value:function(){return r.default.createElement("div",{className:"report-header pre-order"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12 clearfix"},r.default.createElement("div",{className:"report-name"},"Pre-Order",r.default.createElement(l.default,{className:"preOrder-tooltip",text:"This report lists all your pre-orders by title. Customers are not charged when they pre-order your title, but when the publication date has been reached. Please note that some pre-orders may not turn into actual sales."})),this.props.drilldown&&this.props.data&&r.default.createElement("div",{className:"report-totals"},r.default.createElement("div",{className:"report-total"},r.default.createElement("span",{className:"total-label"},"TOTAL UNITS PRE-ORDERED"),"Â Â ",r.default.createElement("span",{className:"total-value"},i.formatWithCommas(this.props.data.netUnitsSold)))))),this.props.drilldown&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"header-filters"},r.default.createElement("span",null,this.state.title.toUpperCase())))))}}])&&s(t.prototype,n),o&&s(t,o),a}();t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=a(7),i=n(a(1)),s=(a(24),n(a(194)));n(a(51)),function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}t.default=e}}(a(22));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=d(o).call(this,e))||"object"!==u(n)&&"function"!=typeof n?p(a):n).state={},e.drilldown&&(t.state.paymentId=e.filters.paymentId),t.onPrevious=t.onPrevious.bind(p(p(t))),t.onNext=t.onNext.bind(p(p(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component),t=o,(a=[{key:"toFilterMap",value:function(){return this.props.drilldown?{paymentId:this.state.paymentId,paymentYear:this.state.paymentYear?this.state.paymentYear:""}:{}}},{key:"onPrevious",value:function(){var e=this;this.setState({paymentId:this.props.data.previousPaymentId,paymentYear:(0,l.bn_moment)(this.props.data.paymentDate,"MM/DD/YYYY").subtract(1,"month").format("YYYY")},function(){e.props.onFilterChange()})}},{key:"onNext",value:function(){var e=this;this.setState({paymentId:this.props.data.nextPaymentId,paymentYear:(0,l.bn_moment)(this.props.data.paymentDate,"MM/DD/YYYY").add(1,"month").format("YYYY")},function(){e.props.onFilterChange()})}},{key:"render",value:function(){var e=!this.props.data.previousPaymentId,t=!this.props.data.nextPaymentId;return r.default.createElement("div",{className:"report-header payments"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"report-name"},"Payments"))),this.props.drilldown&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"header-filters"},r.default.createElement("span",{className:(0,i.default)("arrow glyphicon glyphicon-menu-left",{disabled:e}),onClick:e?null:this.onPrevious}),"Â ",r.default.createElement("span",null,(0,l.bn_moment)(this.props.data.paymentDate,"MM/DD/YYYY").format("MMMM YYYY").toUpperCase()),"Â ",r.default.createElement("span",{className:(0,i.default)("arrow glyphicon glyphicon-menu-right",{disabled:t}),onClick:t?null:this.onNext})))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(s.default,{data:this.props.data,includeUnitsSold:this.props.drilldown,includePaymentId:this.props.drilldown}))))}}])&&c(t.prototype,a),n&&c(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i(this,s(a).call(this,e))).state={},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,r.default.Component),t=a,(n=[{key:"renderMessage",value:function(){var e=this.props.reportDefinition;return this.props.filters.format||this.props.filters.searchText?"You don't have any sales matching the selected filter.":["salesByWeek","salesByMonth","salesByYear"].includes(e.key)?"You don't have any sales for the selected year.":["salesByWeekDetail"].includes(e.key)?"You don't have any sales for the selected week.":["salesByMonthDetail"].includes(e.key)?"You don't have any sales for the selected month.":["salesByYearDetail"].includes(e.key)?"You don't have any sales for the selected year.":["customDate"].includes(e.key)?r.default.createElement("span",null,"You don't have any sales for the selected dates.",r.default.createElement("br",null),"Please change the date fields above to see sales data."):["recentSales"].includes(e.key)?"You don't have any recent sales information in the last 2 days.":["preOrder"].includes(e.key)?"You don't have any Pre-Order reports at this time.":["payments"].includes(e.key)?r.default.createElement("span",null,"You don't have any payments for the selected year.",r.default.createElement("br",null),"Please select another year."):"No data matches your current selections."}},{key:"render",value:function(){return r.default.createElement("div",{className:"no-records"},this.renderMessage())}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(0)),s=a(2),r=n(a(34)),l=n(a(4)),u=o(a(33)),c=(o(a(11)),n(a(147)),n(a(121))),d=n(a(72)),f=n(a(248)),p=o(a(15)),m=o(a(84)),h=o(a(83)),y=o(a(60)),b=n(a(38)),g=n(a(8)),v=n(a(647)),E=n(a(645)),S=n(a(3)),k=n(a(192)),P=o(a(59)),w=n(a(56)),O=n(a(1)),C=o(a(14));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var M=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=T(o).call(this,e))||"object"!==N(n)&&"function"!=typeof n?j(a):n).state={filterOption:t.props.location.query.type?t.props.location.query.type:m.FILTER_PARAMS.default,page:null,query:t.props.location.query.q?t.props.location.query.q:"",sortOption:t.props.location.query.sort?t.props.location.query.sort:m.SORT_PARAMS.default,statusOption:t.props.location.query.status?t.props.location.query.status:m.STATUS_PARAMS.default,totalPages:null,totalCount:null,projectId:null,putOnSaleError:null,projects:[],projectsLoaded:!1,showPricingError:!1,showIsbnError:!1,pageBanner:!1},t.paginationSupport=new f.default(m.SORT_PARAMS.default,"/"+h.Base+"/"+h.Search),t.onSearchResultsChange=t.onSearchResultsChange.bind(j(j(t))),t.onDeleteResultsChange=t.onDeleteResultsChange.bind(j(j(t))),t.onPageChange=t.onPageChange.bind(j(j(t))),t.onCreateCouponClick=t.onCreateCouponClick.bind(j(j(t))),t.onSetSaleStatusError=t.onSetSaleStatusError.bind(j(j(t))),t.onSiteModuleDisplay=t.onSiteModuleDisplay.bind(j(j(t))),t.makeClick=t.makeClick.bind(j(j(t))),t.getBanners=t.getBanners.bind(j(j(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(o,i.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){P.onPageSiteModuleDisplay("LEFT_NAV_PROJECT","projects"),this.loadProjects(this.props.location.query.page,this.props.location.query.sort,this.state.filterOption,this.props.location.query.status,this.props.location.query.q),setTimeout(function(){C.getPageBanners()},1500)}},{key:"componentWillMount",value:function(){b.default.addProjectSearchResultsLoadedListener(this.onSearchResultsChange),b.default.addProjectDeletedResultsLoadedListener(this.onDeleteResultsChange),g.default.addSetSaleStatusErrorListener(this.onSetSaleStatusError),w.default.addSiteModuleDisplayListener(this.onSiteModuleDisplay),g.default.addPageBannersListener(this.getBanners)}},{key:"componentWillUnmount",value:function(){b.default.removeProjectSearchResultsLoadedListener(this.onSearchResultsChange),b.default.removeProjectDeletedResultsLoadedListener(this.onDeleteResultsChange),g.default.removeSetSaleStatusErrorListener(this.onSetSaleStatusError),w.default.removeSiteModuleDisplayListener(this.onSiteModuleDisplay),g.default.removePageBannersListener(this.getBanners)}},{key:"componentWillReceiveProps",value:function(e){this.loadProjects(e.location.query.page,e.location.query.sort,e.location.query.type,e.location.query.status,e.location.query.q)}},{key:"getBanners",value:function(){var e=g.default.banners();if(e.data&&Array.isArray(e.data.setting))if(0<e.data.setting.length){var t=i.default.createElement("span",{dangerouslySetInnerHTML:{__html:e.data.setting[0].SettingValue}});this.setState({pageBanner:t,pageBannerColor:e.data.setting[0].SettingId})}else this.setState({pageBanner:!1,pageBannerColor:null});document.documentElement.style.setProperty("--message-color",this.state.pageBannerColor)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onSiteModuleDisplay",value:function(){this.result3=w.default.getSiteModuleDisplay(),this.setState({siteModuledisplay:this.result3.result3.data})}},{key:"onPageChange",value:function(e){this.paginationSupport.onPageChange(e,this.state.page,this.state.sortOption,this.state.filterOption,this.state.statusOption,this.state.query)}},{key:"onSearchResultsChange",value:function(){var e=this,t=b.default.projects,a=Math.ceil(b.default.totalCount/10),n=this.refs.searchFilters;this.paginationSupport.updateLocation(a,this.state.page,this.state.sortOption,this.state.filterOption,this.state.statusOption,this.state.query),this.setState({projects:t,projectsLoaded:!0,totalPages:a,totalCount:b.default.totalCount},function(){n.refs.projectSearch.setValue(e.state.query),n.refs.projectFilter.setValue(e.state.filterOption),n.refs.projectSort.setValue(e.state.sortOption),window.scrollTo(0,0)})}},{key:"onDeleteResultsChange",value:function(){this.loadProjects(this.props.location.query.page,this.props.location.query.sort,this.state.filterOption,this.props.location.query.status,this.props.location.query.q)}},{key:"onCreateCouponClick",value:function(){window.location.assign(h.Coupon+"?tab=manage")}},{key:"onSetSaleStatusError",value:function(e){var t=e.response[0].projectId,a=e.response[0].code,n=b.default.findProjectById(t).title,o="/"+u.Base+"/"+t+"/"+u.Details+"/";if("21035"===e.response[0].code){var r=i.default.createElement("p",null,"There was a recent print cost change to ",i.default.createElement("i",null,n),"'s size and type. Please go to ",i.default.createElement(s.Link,{to:o+u.DetailsPricing},"Pricing")," and enter a price that meets the new minimum retail price.");window.scrollTo(0,0),this.setState({showPricingError:!0,projectId:t,putOnSaleError:r})}else if(p.ISBN_ERRORS.includes(a)){var l=i.default.createElement("p",null,"Sorry, the ISBN for ",i.default.createElement("i",null,n)," is already registered with NOOK/Barnes & Noble or another publishing platform. You will have to ",i.default.createElement(s.Link,{to:o+u.DetailsIsbn},"enter another ISBN")," that has not already been used or create a free ISBN with Barnes & Noble Press.");window.scrollTo(0,0),this.setState({showIsbnError:!0,projectId:t,isbnError:l})}else this.setState({showPricingError:!1,showIsbnError:!1,projectId:null,putOnSaleError:null})}},{key:"loadProjects",value:function(e,t,a,n,o){var r=this,l=this.paginationSupport.setPaginationOptions(e,t,m.SORT_PARAMS,a,n,o);this.setState({filterOption:a,statusOption:n,page:l.page,sortOption:l.sortOption,totalCount:null,totalPages:null,projects:[],projectsLoaded:!1,query:o},function(){var e={type:r.state.filterOption,status:r.state.statusOption,sort:r.state.sortOption,limit:10,page:r.state.page,query:r.state.query};y.loadProjectSearchResults(e)})}},{key:"render",value:function(){var e,t=0,a=l.default.getUser(),n=null,o=this.state.projects.map(function(e){return i.default.createElement(E.default,{isSearchResult:!0,project:e,key:e.id})});return 0==this.state.totalCount&&this.state.projectsLoaded&&(n=i.default.createElement("p",{className:"text-center no-results"},"We found no books matching your search criteria. Please try another search. ",i.default.createElement("br",null),i.default.createElement("br",null),"Search Term: ",i.default.createElement("strong",null,this.state.query||"None Provided"),i.default.createElement("br",null),i.default.createElement("br",null),"Book Type: ",i.default.createElement("strong",null,m.FILTER_LABELS[this.state.filterOption]),i.default.createElement("br",null),i.default.createElement("br",null),"Project Status: ",i.default.createElement("strong",null,m.STATUS_LABELS[this.state.statusOption]))),e=10*(this.state.page-1)+1,t=this.state.page===this.state.totalPages?10*(this.state.page-1)+this.state.projects.length:10*this.state.page,i.default.createElement("div",null,i.default.createElement("div",{className:"left-sidebar-wrapper"},i.default.createElement("div",{className:"left-sidebar-container projects"},this.state.pageBanner&&i.default.createElement("div",{className:(0,O.default)("extra-color ",{"color-container":this.state.pageBanner})},i.default.createElement(r.default,{messages:[this.state.pageBanner],type:"alert"})),i.default.createElement(k.default,{status:a.vendorStatus}),this.state.showPricingError&&i.default.createElement(r.default,{messages:[this.state.putOnSaleError],type:"error"}),this.state.showIsbnError&&i.default.createElement(r.default,{messages:[this.state.isbnError],type:"error"}),i.default.createElement("header",{className:"sidelines"},i.default.createElement("h1",null,"Search Results")),i.default.createElement("div",{className:"sidebar-left"},i.default.createElement(c.default,null),i.default.createElement("div",{className:"btn btn-secondary btn-block hidden-xs",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onCreateCouponClick},i.default.createElement("span",null,"Manage Promotions")),i.default.createElement("div",{className:"btn btn-secondary btn-block hidden-xs",tabIndex:"0",onKeyDown:this.makeClick,onClick:function(){return s.browserHistory.push("/"+h.Base+"/"+h.Series)}},i.default.createElement("span",null,"Manage Series")),i.default.createElement(v.default,{ref:"searchFilters",query:this.state.query,filterOption:this.state.filterOption,statusOption:this.state.statusOption,sortOption:this.state.sortOption}),i.default.createElement("div",{className:"btn btn-secondary btn-block visible-xs",onClick:this.onCreateCouponClick},i.default.createElement("span",null,"Manage Promotions")),i.default.createElement("div",{className:"btn btn-secondary btn-block visible-xs",onClick:function(){return s.browserHistory.push("/"+h.Base+"/"+h.Series)}},i.default.createElement("span",null,"Manage Series")),this.state.siteModuledisplay&&i.default.createElement("div",{className:(0,O.default)("additional marketing-content np-mkt-included-content text-block hidden-xs "),dangerouslySetInnerHTML:{__html:this.state.siteModuledisplay}})),i.default.createElement("div",{className:"content-right"},0<this.state.totalCount&&i.default.createElement("div",{className:"panel project-search-results"},"RECENTLY_DELETED"==this.state.statusOption&&i.default.createElement("p",{className:"recently-deleted-alert"},"Projects show the days remaining before deletion. After that time, projects will be permanently deleted."),i.default.createElement("div",{className:"panel-body"},i.default.createElement("div",{className:"psr-top clearfix"},i.default.createElement("div",{className:"psr-result-totals"},e," - ",t," of ",this.state.totalCount," Results"),i.default.createElement(d.default,{currentPage:this.state.page,totalPages:this.state.totalPages,onChange:this.onPageChange})),i.default.createElement("div",{className:"projects"},o),i.default.createElement("div",{className:"psr-bottom"},i.default.createElement(d.default,{currentPage:this.state.page,totalPages:this.state.totalPages,onChange:this.onPageChange})))),n),this.state.siteModuledisplay&&i.default.createElement("div",{className:(0,O.default)("additional marketing-content np-mkt-included-content text-block visible-xs "),dangerouslySetInnerHTML:{__html:this.state.siteModuledisplay}}))),!this.state.projectsLoaded&&i.default.createElement(S.default,null))}}])&&_(t.prototype,a),n&&_(t,n),o}();t.default=M},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),i=(o(a(1)),n(a(82)),o(a(34)),o(a(4)),n(a(100)),n(a(11)),n(a(17)),o(a(121)),n(a(14)),n(a(83))),s=(o(a(8)),o(a(3))),u=(n(a(31)),o(a(6))),c=(o(a(12)),o(a(46))),d=n(a(84)),f=n(a(60)),p=o(a(140)),m=o(a(38)),h=n(a(86));o(a(644));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S="project",k="series",P=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=g(o).call(this,e))||"object"!==y(n)&&"function"!=typeof n?E(a):n).state={filterOption:d.FILTER_PARAMS.default,searchingOptions:[],loading:!0},t.onSuggestionSelected=t.onSuggestionSelected.bind(E(E(t))),t.onProjectGroupsChange=t.onProjectGroupsChange.bind(E(E(t))),t.onProjectSearchesLoaded=t.onProjectSearchesLoaded.bind(E(E(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentDidMount",value:function(){f.loadProjectCoverSearches("ALL","coversOnly","-1")}},{key:"componentWillMount",value:function(){m.default.addProjectCoverSearchesLoadedListener(this.onProjectSearchesLoaded)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.equalizeImageHeights),m.default.removeProjectCoverSearchesLoadedListener(this.onProjectSearchesLoaded)}},{key:"onProjectSearchesLoaded",value:function(e,t){var a=e.map(function(e){return e.title}),n=e.map(function(e){return e.ean});n=n.filter(function(e){return void 0!==e}),a.concat(n),this.setState({projectGroups:e,totalProject:t,searchingOptions:a.concat(n),loading:!1})}},{key:"loadGroups",value:function(e,t,a,n){this.setState({page:1,query:"",sortOption:"newest",totalPages:null,projectGroups:[],projectGroupsLoaded:!1}),h.query("newest",1,150,this.layoutType()===k,null)}},{key:"onProjectGroupsChange",value:function(){var e=p.default.projectGroups;this.setState({projectGroups:e,loading:!1})}},{key:"onSuggestionSelected",value:function(e){var t=document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0],a=t.getElementsByTagName("input")[0].id,n=t.getElementsByTagName("input")[0].value;if(this.refs.projectSearchLineGraph.getValue()||n){var o=e&&e.newValue?e.newValue:this.refs.projectSearchLineGraph.getValue()?this.refs.projectSearchLineGraph.getValue():n;o=o.toLowerCase();var r=Object.values(this.state.projectGroups).find(function(e){return e.title&&e.title.toLowerCase()===o||e.ean&&e.ean.toLowerCase()===o});o&&r?(localStorage.setItem("cover_object",JSON.stringify(r)),document.body.scrollTop=document.documentElement.scrollTop=0,this.onNavigate("/projects/promote-book/design?pid="+r.id)):(document.getElementById(a).parentElement.parentElement.classList.add("error"),document.getElementById(a).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.classList.add("nomatch-active"),document.getElementById(a).parentElement.parentElement.querySelector(".message").innerHTML="Please enter a valid title or ISBN that belongs to you.")}}},{key:"layoutType",value:function(){return window.location.href.includes("series")?k:S}},{key:"onNavigate",value:function(e){document.body.scrollTop=document.documentElement.scrollTop=0,l.browserHistory.push(e)}},{key:"onSidebarNavigation",value:function(e){l.browserHistory.replace(e)}},{key:"render",value:function(){var a=this,e=null;this.state.projectGroups&&(e=this.state.projectGroups.slice(0,5).map(function(e,t){return r.default.createElement("div",{onClick:function(){localStorage.setItem("cover_object",JSON.stringify(e)),a.onNavigate("/projects/promote-book/design?pid="+e.id)},className:4==t?"project-container project-container-last":"project-container",key:e.id},r.default.createElement("img",{src:e.cover,alt:"Book Cover Image. Title: "+e.title}))}));return r.default.createElement("div",{className:"promote-layout"},r.default.createElement("div",{className:"container-fluid"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("header",{className:"sidelines reports"},r.default.createElement("h1",null,"Elevate Your Book Promotion")))),r.default.createElement("section",null,r.default.createElement("div",{className:"panel"},this.state.loading&&r.default.createElement(s.default,null),r.default.createElement("div",{className:"panel-body"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("p",{className:"top-text"},"Introducing our free tool for authors and publishers: effortlessly promote your book across social media, newsletters, and websites with perfectly sized graphic assets. Say goodbye to resizing headaches â€“ our intuitive interface generates images in popular formats with ease."),!this.state.loading&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},e&&0<e.length&&r.default.createElement("div",{className:"search-container"},r.default.createElement(u.default,null,r.default.createElement(c.default,{label:"Search by Title or ISBN",ref:"projectSearchLineGraph",searchingOptions:this.state.searchingOptions,filterOption:this.state.filterOption,onSubmit:this.onSuggestionSelected,noValue:"true"}))),r.default.createElement("div",{className:"promote-heading"},e&&0<e.length?r.default.createElement("h2",null,"Your Recent Projects"):r.default.createElement("h2",{className:"h3 heading-message"}," ",0<this.state.totalProject?"Upload a book cover to an existing project to start.":"You don't have any projects yet.")),r.default.createElement("div",{className:"project-scroll-container"},e&&0<e.length?r.default.createElement("div",{className:"project-container-main"},e):r.default.createElement("div",{className:"project-scroll-container empty-projects-wrapper"},r.default.createElement("div",{className:"project-container-main center-link  mar-contrbtr empty-projects-container"},0<this.state.totalProject?r.default.createElement("div",{tabIndex:"0",className:"btn btn-new-project btn-block hidden-xs",onClick:function(){return a.onSidebarNavigation("/"+i.Base)}},r.default.createElement("span",null,"Manage Projects")):r.default.createElement(l.Link,{to:"/build-a-book/choose-book-type",className:"btn btn-new-project btn-block hidden-xs"},r.default.createElement("span",{className:"icon-plus"})," Create a New Book")))))))))))))}}])&&b(t.prototype,a),n&&b(t,n),o}();t.default=P},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(a(0)),l=a(2),i=r(a(1)),s=r(a(6)),u=n(a(84)),c=r(a(140)),d=r(a(38)),f=n(a(60)),p=r(a(47)),m=r(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=window.domtoimage,S=[{id:"htmlContent",filename:"_1200x1200.jpg"},{id:"storiesBanner",filename:"_1080x1920.jpg"},{id:"landscapeBanner",filename:"_1300x740.jpg"},{id:"leaderboardBanner",filename:"_728x90.jpg"},{id:"mediumBanner",filename:"_300x250.jpg"},{id:"htmlContentSmall",filename:"_160x600.jpg"}],k="project",P="series",w=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=b(r).call(this,e))||"object"!==h(n)&&"function"!=typeof n?v(a):n;var o=JSON.parse(localStorage.getItem("cover_object"));return t.state={filterOption:u.FILTER_PARAMS.default,loading:!0,cover:o,noShowEbook:"",bannerSizes:[{description:"Square-Post-1200x1200",value:"Square Post - 1200 x 1200"},{description:"Stories-Post-1080x1920",value:"Stories Post - 1080 x 1920"},{description:"Landscape-Post-1300x740",value:"Landscape Post - 1300 x 740"},{description:"Leaderboard-728x90",value:"Leaderboard - 728 x 90"},{description:"Medium-Rectangle-300x250",value:"Medium Rectangle - 300 x 250"},{description:"Skyscrapper-160x600",value:"Skyscraper - 160 x 600"}],buttonOptions:[{description:"btn-theme-light",value:"Light Cover"},{description:"btn-theme-dark",value:"Dark Cover"},{description:"Bone",value:"Bone"},{description:"Yellow",value:"Yellow"},{description:"Orange",value:"Orange"},{description:"Sage",value:"Sage"},{description:"Sky",value:"Sky"},{description:"Periwinkle",value:"Periwinkle"},{description:"Charcoal",value:"Charcoal"},{description:"Gold",value:"Gold"},{description:"Flame",value:"Flame"},{description:"Pine",value:"Pine"},{description:"Sapphire",value:"Sapphire"},{description:"Midnight",value:"Midnight"}],messageOptions:[{description:"pre-order",value:"Pre-Order"},{description:"coming-soon",value:"Coming Soon"},{description:"new-release",value:"New Release"},{description:"next-in-series",value:"Next In Series"},{description:"complete-the-series",value:"Complete The Series"},{description:"special-edition",value:"Special Edition"},{description:"free-download",value:"Free Download"},{description:"special-offer",value:"Special Offer"}],themeSelected:"btn-theme-light",messageSelected:"Pre-Order",callToAction:"Order now",enableSquareBanner:!0,enableStoriesBanner:!0,enableLandscapeBanner:!0,enableLeaderboardBanner:!0,enableMediumBanner:!0,enableSkyscrapperBanner:!0,projecttCoupons:{},showOfferTxt:"",showOfferTxt2:"",backgroundPositionX:0,backgroundPositionY:0,showMessageDownload:!1,downloadButtonDisabled:!1,downloadStart:!1,blackLogo:!0,glowlightCheck:!1,tabletCheck:!1,spineCheck:!1,glowlightChecked:!1,tabletChecked:!1,projectId:new URLSearchParams(location.search).get("pid")},t.onSuggestionSelected=t.onSuggestionSelected.bind(v(v(t))),t.onProjectGroupsChange=t.onProjectGroupsChange.bind(v(v(t))),t.onProjectCouponsLoaded=t.onProjectCouponsLoaded.bind(v(v(t))),t.onCheckboxChange=t.onCheckboxChange.bind(v(v(t))),t.themeClick=t.themeClick.bind(v(v(t))),t.messageClick=t.messageClick.bind(v(v(t))),t.selectBannerSize=t.selectBannerSize.bind(v(v(t))),t.downloadAd=t.downloadAd.bind(v(v(t))),t.handleBackgroundPositionChangeY=t.handleBackgroundPositionChangeY.bind(v(v(t))),t.handleBackgroundPositionChangeX=t.handleBackgroundPositionChangeX.bind(v(v(t))),t.checkAllUnchecked=t.checkAllUnchecked.bind(v(v(t))),t.downloadAll=t.downloadAll.bind(v(v(t))),t.equalizeImageHeights=t.equalizeImageHeights.bind(v(v(t))),t.chromeSelect=t.chromeSelect.bind(v(v(t))),t.chromeSelectTab=t.chromeSelectTab.bind(v(v(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,o.default.Component),t=r,(a=[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.equalizeImageHeights);var e=new URLSearchParams(location.search).get("pid");f.loadProjectCoverCoupon("ALL","coversOnly",e),setTimeout(function(){var e=document.getElementById("thirdImageMain");.8<e.offsetWidth/e.offsetHeight&&(e.style.width="170%")},1e3);var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);this.setState({isSafari:t})}},{key:"componentWillMount",value:function(){c.default.addProjectGroupsChangedListener(this.onProjectGroupsChange),d.default.addProjectCoverCouponsLoadedListener(this.onProjectCouponsLoaded);var e=new URLSearchParams(location.search).get("pid");0!=!(!this.state.cover||this.state.cover.id!==e)&&e||(localStorage.removeItem("cover_object"),l.browserHistory.push("/projects/promote-book")),this.setState({projectId:e})}},{key:"componentWillUnmount",value:function(){c.default.removeProjectGroupsChangedListener(this.onProjectGroupsChange),d.default.removeProjectCoverCouponsLoadedListener(this.onProjectCouponsLoaded),window.removeEventListener("scroll",this.equalizeImageHeights)}},{key:"handleBackgroundPositionChangeX",value:function(e){this.setState({backgroundPositionX:e.target.value})}},{key:"handleBackgroundPositionChangeY",value:function(e){this.setState({backgroundPositionY:e.target.value})}},{key:"equalizeImageHeights",value:function(){if(768<window.innerWidth){var e=window.scrollY||window.pageYOffset,t=document.getElementById("preview-container-sticky");"EBOOK"==this.state.cover.type?(t.style.transform=340<e&&e<1250?"translateY("+(e-=200)+"px)":"translateY(136px)",1250<e&&(t.style.transform="translateY(1150px)")):(t.style.transform=340<e&&e<1150?"translateY("+(e-=200)+"px)":"translateY(136px)",1150<e&&(t.style.transform="translateY(1050px)"))}}},{key:"downloadAll",value:function(){var t=this;this.setState({downloadStart:!0});var r=[];if(this.state.enableSquareBanner&&r.push(S[0]),this.state.enableStoriesBanner&&r.push(S[1]),this.state.enableLandscapeBanner&&r.push(S[2]),this.state.enableLeaderboardBanner&&r.push(S[3]),this.state.enableMediumBanner&&r.push(S[4]),this.state.enableSkyscrapperBanner&&r.push(S[5]),0!==r.length){!function a(n){if(n>=r.length)t.setState({downloadStart:!1});else{var e=r[n],o=t.state.projectId+e.filename;t.downloadAd(e.id,o,!0).then(function(e){var t=document.createElement("a");t.href=e,t.download=o,document.body.appendChild(t),t.click(),document.body.removeChild(t),a(n+1)})}}(0)}else this.setState({downloadStart:!1})}},{key:"downloadAd",value:function(l,i){var s=this,u=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return u||this.setState({downloadStart:!0}),new Promise(function(a,e){var t=document.getElementById(l),n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),o=document.getElementById("imageContainer"),r=function(){E.toJpeg(t,{quality:1}).then(function(e){if(!u){var t=document.createElement("a");t.href=e,t.download=s.state.projectId+"_"+i+".jpg",document.body.appendChild(t),t.click(),document.body.removeChild(t)}a(e)}).catch(e).finally(function(){u||s.setState({downloadStart:!1})})};t.style.display="none",t.offsetHeight,t.style.display="",n?E.toJpeg(t,{quality:1}).then(function(e){var t=document.createElement("img");t.src=e,t.alt="Prepared Image",o.innerHTML="",o.appendChild(t),setTimeout(function(){return r()},1500)}).catch(e):setTimeout(function(){return r()},1500)})}},{key:"onProjectGroupsChange",value:function(){var e=c.default.projectGroups;this.setState({projectGroups:e,loading:!1})}},{key:"onProjectCouponsLoaded",value:function(e){if(e&&0<e.length){var t=Math.trunc(e[0].discountPercentage)+"% off",a="with coupon code "+e[0].couponCode;this.setState({projecttCoupons:e[0],couponTxt:t,couponTxt2:a,loading:!1})}else this.setState({loading:!1})}},{key:"themeClick",value:function(e){var t=document.querySelector(".btn-theme.clicked");t&&t.classList.remove("clicked"),this.setState({themeSelected:e}),"btn-theme-dark"!=e&&"Charcoal"!=e&&"Gold"!=e&&"Flame"!=e&&"Pine"!=e&&"Sapphire"!=e&&"Midnight"!=e||this.setState({blackLogo:!1}),"btn-theme-light"!=e&&"Bone"!=e&&"Yellow"!=e&&"Orange"!=e&&"Sage"!=e&&"Sky"!=e&&"Periwinkle"!=e||this.setState({blackLogo:!0});var a=document.querySelector("."+e);a&&a.classList.add("clicked")}},{key:"messageClick",value:function(e,t){"pre-order"==t&&this.setState({callToAction:"Order now"}),"coming-soon"==t&&this.setState({callToAction:"Learn more"}),"new-release"==t&&this.setState({callToAction:"Shop now"}),"next-in-series"==t&&this.setState({callToAction:"Shop now"}),"complete-the-series"==t&&this.setState({callToAction:"Shop now"}),"special-edition"==t&&this.setState({callToAction:"Shop now"}),"free-download"==t&&this.setState({callToAction:"Download now"}),"special-offer"==t&&this.setState({callToAction:"Explore now"});var a=document.querySelector(".btn-message.message-clicked");a&&a.classList.remove("message-clicked"),this.setState({messageSelected:e}),"Special Offer"!==e&&(this.setState({showOfferTxt:"",showOfferTxt2:""}),"EBOOK"==this.state.cover.type&&null!=this.refs.specialOffer&&null!=this.refs.specialOffer&&(void 0===this.refs.specialOffer._value||null===this.refs.specialOffer._value?this.refs.specialOffer._value="":this.refs.specialOffer._value=!1));var n=document.querySelector("."+t);n&&n.classList.add("message-clicked")}},{key:"selectBannerSize",value:function(e,t){var a=this;this.setState({showMessageDownload:!1,downloadButtonDisabled:!1});var n,o,r,l={"Square-Post-1200x1200":"enableSquareBanner","Stories-Post-1080x1920":"enableStoriesBanner","Landscape-Post-1300x740":"enableLandscapeBanner","Leaderboard-728x90":"enableLeaderboardBanner","Medium-Rectangle-300x250":"enableMediumBanner","Skyscrapper-160x600":"enableSkyscrapperBanner"}[t];void 0!==l&&this.setState((n={},o=l,r=e.newValue,o in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n),function(){a.checkAllUnchecked()})}},{key:"checkAllUnchecked",value:function(){var e=this.state,t=e.enableSquareBanner,a=e.enableStoriesBanner,n=e.enableLandscapeBanner,o=e.enableLeaderboardBanner,r=e.enableMediumBanner,l=e.enableSkyscrapperBanner;t||a||n||o||r||l||this.setState({showMessageDownload:!0,downloadButtonDisabled:!0}),0===[t,a,n,o,r,l].filter(function(e){return e}).length?this.setState({downloadButtonDisabled:!0}):this.setState({downloadButtonDisabled:!1})}},{key:"onSuggestionSelected",value:function(e){if(this.refs.projectSearchLineGraph.getValue())document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0].getElementsByTagName("input")[0].value}},{key:"layoutType",value:function(){return window.location.href.includes("series")?P:k}},{key:"onCheckboxChange",value:function(){this.setState({showOfferTxt:1==this.refs.specialOffer.value()?this.state.couponTxt:"",showOfferTxt2:1==this.refs.specialOffer.value()?this.state.couponTxt2:""})}},{key:"chromeSelect",value:function(e){var t=this;"glowlightcheck"==e&&(null==this.state.glowlightCheck&&null==this.state.glowlightCheck||(0==this.state.glowlightCheck?setTimeout(function(){t.setState({glowlightCheck:!0,tabletCheck:!1,spineCheck:!1})},100):1==this.state.glowlightCheck&&setTimeout(function(){t.setState({glowlightCheck:!1,tabletCheck:!1,spineCheck:!1})},100))),"spinecheck"==e&&(null==this.state.spineCheck&&null==this.state.spineCheck||(0==this.state.spineCheck?setTimeout(function(){t.setState({spineCheck:!0,glowlightCheck:!1,tabletCheck:!1})},100):1==this.state.spineCheck&&setTimeout(function(){t.setState({spineCheck:!1,glowlightCheck:!1,tabletCheck:!1})},100)))}},{key:"chromeSelectTab",value:function(e){var t=this;"tabletcheck"==e&&(null==this.state.tabletCheck&&null==this.state.tabletCheck||(0==this.state.tabletCheck?setTimeout(function(){t.setState({glowlightCheck:!1,tabletCheck:!0,spineCheck:!1})},100):1==this.state.tabletCheck&&setTimeout(function(){t.setState({glowlightCheck:!1,tabletCheck:!1})},100)))}},{key:"render",value:function(){var a=this,e=this.state.bannerSizes.map(function(t){var e;return"Square-Post-1200x1200"!=t.description&&"Stories-Post-1080x1920"!=t.description&&"Landscape-Post-1300x740"!=t.description&&"Leaderboard-728x90"!=t.description&&"Medium-Rectangle-300x250"!=t.description&&"Skyscrapper-160x600"!=t.description||(e=!0),o.default.createElement(p.default,{ref:t.value,name:t.value,label:t.value,className:"banner-checkbox",initValue:e,value:t.value?t.value:e,onChange:function(e){return a.selectBannerSize(e,t.description)}})}),t=this.state.buttonOptions.map(function(e){return o.default.createElement("div",{className:(0,i.default)({"container-outer-theme":"btn-theme-light"==e.description||"btn-theme-dark"==e.description})},("btn-theme-light"==e.description||"btn-theme-dark"==e.description)&&o.default.createElement("div",{className:(0,i.default)("absolute-background",e.description+"-parent"),style:{background:"url("+a.state.cover.cover+") no-repeat "+a.state.backgroundPositionX+"% "+a.state.backgroundPositionY+"% "}}),o.default.createElement("button",{onClick:function(){return a.themeClick(e.description)},type:"button",className:(0,i.default)("btn btn-primary btn-theme",{clicked:"btn-theme-light"==e.description},e.description)},o.default.createElement("span",null,e.value)))}),n=(this.state.cover.cover,this.state.messageOptions.filter(function(e){return"EBOOK"==a.state.cover.type||"special-offer"!==e.description&&"free-download"!==e.description}).map(function(e){return o.default.createElement("button",{onClick:function(){return a.messageClick(e.value,e.description)},type:"button",className:(0,i.default)("btn btn-primary btn-message",{"message-clicked":"pre-order"==e.description},e.description)},e.value)}));this.state.projectGroups&&this.state.projectGroups.filter(function(e){return null!==e.projects[0].coverThumbnail}).slice(0,5).map(function(e,t){return o.default.createElement("div",{className:4==t?"project-container project-container-last":"project-container",key:e.id},o.default.createElement("img",{src:e.projects[0].coverThumbnail,alt:e.title}))});return o.default.createElement("div",{className:"promote-layout assets-container"},o.default.createElement("div",{className:"container-fluid"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement("header",{className:"sidelines reports"},o.default.createElement("h1",null,"Design My Promotional Graphics")))),o.default.createElement("section",null,o.default.createElement("div",{className:"panel assets-subcontainer"},o.default.createElement("div",{className:"panel-body"},o.default.createElement("link",{rel:"preload",as:"image",href:"/images/abg-glowlight4-plus.png"}),o.default.createElement("link",{rel:"preload",as:"image",href:"/images/abg-9-lenovo-tablet.png"}),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement("div",{className:"promote-heading"},o.default.createElement("h2",null,"Book Title"),o.default.createElement("p",null,this.state.cover.title," Â Â ",o.default.createElement(l.Link,{to:"/projects/promote-book"},"Change book"))))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement("div",{className:"message-container"},o.default.createElement("h2",null,"Message"),o.default.createElement("div",null,n),o.default.createElement("div",{className:"col-xs-6"}),o.default.createElement("div",{className:"col-xs-6 banner-checkbox floatleft"},this.state.projecttCoupons&&this.state.projecttCoupons.couponCode&&o.default.createElement(s.default,{name:"offer",className:"offer-form"},o.default.createElement(p.default,{ref:"specialOffer",name:"specialOffer",label:this.state.couponTxt+" "+this.state.couponTxt2,className:"banner-checkbox",disableCustom:"Special Offer"!==this.state.messageSelected,onChange:this.onCheckboxChange})))))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement("div",{className:"theme-container"},o.default.createElement("h2",null,"Design Theme"),o.default.createElement("div",null,t)))),o.default.createElement("div",null,o.default.createElement("div",{id:"preview-container-sticky"},o.default.createElement("h2",{style:{"padding-top":"20px","padding-bottom":"10px",margin:"0","text-shadow":"none","font-family":"Poynter"}},"Design Preview"),o.default.createElement("div",{className:"outer-most-container-ad sticky-banner"},o.default.createElement("div",{className:(0,i.default)("outer-container-ad",{"additional-special-offer-0":""!=this.state.showOfferTxt})},o.default.createElement("div",{className:(0,i.default)(this.state.themeSelected,"container-ad theme-container "),style:{background:"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"url("+this.state.cover.cover+")":""}}),o.default.createElement("div",{className:(0,i.default)("container-ad-absolute",this.state.themeSelected+"-ad")},o.default.createElement("h2",{className:(0,i.default)({"additional-h2-font-0":"Complete The Series"==this.state.messageSelected})},this.state.messageSelected),this.state.showOfferTxt&&o.default.createElement("div",{className:"center-link"},o.default.createElement("span",{className:"center-link-top"},this.state.showOfferTxt),o.default.createElement("span",{className:"center-link-bottom"},this.state.showOfferTxt2)),o.default.createElement("div",{className:"container-image add-chrome"},o.default.createElement("div",{className:(0,i.default)({"add-chrome-glowlight":this.state.glowlightCheck},{"add-chrome-tablet":this.state.tabletCheck},{"add-chrome-spine":this.state.spineCheck})},o.default.createElement("div",{className:(0,i.default)({"glow-image-container":this.state.glowlightCheck},{"tab-image-container":this.state.tabletCheck},{"spine-image-container":this.state.spineCheck})},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title}))))),o.default.createElement("div",{className:"container-logo"},o.default.createElement("div",{className:"left-side"},o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-app.png":"img/logo-bn-app.png",alt:""})),o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:(0,i.default)("right-side-text",{"center-text":"EBOOK"!=this.state.cover.type})},this.state.callToAction),o.default.createElement("div",{className:"right-side-logo"},this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-black.png":"img/logo-bn-black.png",alt:""}),!this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-white.png":"img/logo-bn-white.png",alt:""}))))))))),"EBOOK"==this.state.cover.type&&o.default.createElement("div",{className:"nook-container"},o.default.createElement("h2",{style:{"padding-top":"20px","padding-bottom":"10px",margin:"0"}},"Display in a NOOK"),this.state.glowlightCheck&&o.default.createElement("a",{className:"chrome-clear-link",onClick:function(){return a.chromeSelect("glowlightcheck")}},"Clear selection"),this.state.tabletCheck&&o.default.createElement("a",{className:"chrome-clear-link",onClick:function(){return a.chromeSelectTab("tabletcheck")}},"Clear selection"),o.default.createElement("div",{onClick:function(){return a.chromeSelect("glowlightcheck")},className:(0,i.default)("nook-container-sub",{"chrome-border":this.state.glowlightCheck})},o.default.createElement("div",{className:"ref-for-glowlight",style:{margin:"20px auto",width:"60%","text-align":"center",position:"relative"}},o.default.createElement("div",{className:"add-chrome-glowlight"},o.default.createElement("div",{className:"glow-image-container"},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title,style:{width:"88%","text-align":"center"}}))))),o.default.createElement("div",{className:"chrome-label"},"NOOK GlowLightÂ® 4 Plus"),o.default.createElement("div",{className:(0,i.default)({"chrome-selected":this.state.glowlightCheck})},"Â ")),o.default.createElement("div",{onClick:function(){return a.chromeSelectTab("tabletcheck")},className:(0,i.default)("nook-container-sub","nook-container-sub-2",{"chrome-border":this.state.tabletCheck})},o.default.createElement("div",{className:"ref-for-tablet",style:{margin:"20px auto",width:"60%","text-align":"center",position:"relative"}},o.default.createElement("div",{className:"add-chrome-tablet"},o.default.createElement("div",{className:"tab-image-container"},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title,style:{width:"94%","text-align":"center"}}))))),o.default.createElement("div",{className:"chrome-label"},"NOOK 9â€ Lenovo Tablet"),o.default.createElement("div",{className:(0,i.default)({"chrome-selected":this.state.tabletCheck})},"Â "))),"EBOOK"!=this.state.cover.type&&o.default.createElement("div",{className:"nook-container"},o.default.createElement("h2",{style:{"padding-top":"20px","padding-bottom":"10px",margin:"0"}},"Add a Spine Effect"),this.state.spineCheck&&o.default.createElement("a",{className:"chrome-clear-link",onClick:function(){return a.chromeSelect("spinecheck")}},"Clear selection"),o.default.createElement("div",{onClick:function(){return a.chromeSelect("spinecheck")},className:(0,i.default)("nook-container-sub",{"chrome-border":this.state.spineCheck})},o.default.createElement("div",{style:{margin:"20px auto",width:"60%","text-align":"center",position:"relative"}},o.default.createElement("div",{className:"ref-for-spine"},o.default.createElement("div",{className:"spine-image-container"},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title,style:{width:"75%","text-align":"center"}}))))),o.default.createElement("div",{className:"chrome-label"},"Front Cover Spine"),o.default.createElement("div",{className:(0,i.default)({"chrome-selected":this.state.spineCheck})},"Â "))),o.default.createElement("div",{className:"size-container",style:{clear:"both"}},o.default.createElement("h2",{style:{"padding-top":"40px","padding-bottom":"10px",margin:"0"}},"Graphic Sizes"),o.default.createElement(s.default,{name:"Sizes"},e)),o.default.createElement("div",{className:"size-container all-view",style:{clear:"both",width:"100%"}},o.default.createElement("div",{style:{width:"97%"}},o.default.createElement("div",{style:{width:"80%",float:"left","text-align":"left","padding-bottom":"25px"}},o.default.createElement("h2",{style:{"font-family":"Poynter","padding-top":"50px","padding-bottom":"0px",margin:"0","text-shadow":"none",width:"80%",float:"left"}},"Review & Download Graphics"),o.default.createElement("p",{className:"note-ad-banner-size"},"The images in the preview below are scaled down in size. The actual size will be available upon download.")),!this.state.isSafari&&o.default.createElement("div",{style:{width:"20%",float:"left","text-align":"right","margin-top":"58px","padding-bottom":"25px"}},!this.state.downloadButtonDisabled&&o.default.createElement("button",{style:{width:"160px",height:"60px",outline:"none"},onClick:function(){return a.downloadAll()},type:"button",className:(0,i.default)("btn btn-primary btn-theme additional-color")},"Download All"))),this.state.showMessageDownload&&o.default.createElement("div",{className:"message-no-size-select",style:{margin:"100px auto",width:"362px"}},"Please select a graphic size to review and download."),this.state.enableSquareBanner&&o.default.createElement("div",{className:"outer-most-container-ad square-banner"},o.default.createElement("div",{className:(0,i.default)("outer-container-ad",{"additional-special-offer-1":""!=this.state.showOfferTxt})},o.default.createElement("div",{className:(0,i.default)(this.state.themeSelected,"container-ad"),style:{background:"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"url("+this.state.cover.cover+")":""}}),o.default.createElement("div",{onClick:function(){return a.downloadAd("htmlContent","1200x1200")},className:(0,i.default)("container-ad-absolute",this.state.themeSelected+"-ad")},o.default.createElement("h2",{className:(0,i.default)({"additional-h2-font-1":"Complete The Series"==this.state.messageSelected})},this.state.messageSelected),this.state.showOfferTxt&&o.default.createElement("div",{className:"center-link"},o.default.createElement("span",{className:"center-link-top"},this.state.showOfferTxt),o.default.createElement("span",{className:"center-link-bottom"},this.state.showOfferTxt2)),o.default.createElement("div",{className:(0,i.default)("container-image",{"add-chrome-glowlight":this.state.glowlightCheck},{"add-chrome-tablet":this.state.tabletCheck},{"add-chrome-spine":this.state.tabletCheck})},o.default.createElement("div",{className:(0,i.default)({"glow-image-container":this.state.glowlightCheck},{"tab-image-container":this.state.tabletCheck},{"spine-image-container":this.state.spineCheck})},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title})))),o.default.createElement("div",{className:"container-logo"},o.default.createElement("div",{className:"left-side"},o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-app.png":"img/logo-bn-app.png",alt:""})),o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:(0,i.default)("right-side-text",{"center-text":"EBOOK"!=this.state.cover.type})},this.state.callToAction),o.default.createElement("div",{className:"right-side-logo"},this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-black.png":"img/logo-bn-black.png",alt:""}),!this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-white.png":"img/logo-bn-white.png",alt:""})))))),o.default.createElement("div",{onClick:function(){return a.downloadAd("htmlContent","1200x1200")},className:"download-container"},"1200 x 1200 ",o.default.createElement("span",{className:"glyphicon glyphicon-download-alt"},"Â "))),o.default.createElement("div",{id:"imageContainer",style:{float:"left",width:"100%","margin-right":"2%",position:"absolute",left:"-3000px"}}),this.state.enableStoriesBanner&&o.default.createElement("div",{className:"outer-most-container-ad stories-banner"},o.default.createElement("div",{className:(0,i.default)("outer-container-ad",{"additional-special-offer-2":""!=this.state.showOfferTxt})},o.default.createElement("div",{className:(0,i.default)(this.state.themeSelected,"container-ad"),style:{background:"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"url("+this.state.cover.cover+")":""}}),o.default.createElement("div",{onClick:function(){return a.downloadAd("storiesBanner","1080x1920")},className:(0,i.default)("container-ad-absolute",this.state.themeSelected+"-ad")},o.default.createElement("h2",{className:(0,i.default)({"additional-h2-font-2":"Complete The Series"==this.state.messageSelected})},this.state.messageSelected),this.state.showOfferTxt&&o.default.createElement("div",{className:"center-link"},o.default.createElement("span",{className:"center-link-top"},this.state.showOfferTxt),o.default.createElement("span",{className:"center-link-bottom"},this.state.showOfferTxt2)),o.default.createElement("div",{className:(0,i.default)("container-image",{"add-chrome-glowlight":this.state.glowlightCheck},{"add-chrome-tablet":this.state.tabletCheck},{"add-chrome-spine":this.state.tabletCheck})},o.default.createElement("div",{className:(0,i.default)({"glow-image-container":this.state.glowlightCheck},{"tab-image-container":this.state.tabletCheck},{"spine-image-container":this.state.spineCheck})},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title})))),o.default.createElement("div",{className:"container-logo"},o.default.createElement("div",{className:"left-side"},o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-app.png":"img/logo-bn-app.png",alt:""})),o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:(0,i.default)("right-side-text",{"center-text":"EBOOK"!=this.state.cover.type})},this.state.callToAction),o.default.createElement("div",{className:"right-side-logo"},this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-black.png":"img/logo-bn-black.png",alt:""}),!this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-white.png":"img/logo-bn-white.png",alt:""})))))),o.default.createElement("div",{onClick:function(){return a.downloadAd("storiesBanner","1080x1920")},className:"download-container"},"1080 x 1920 ",o.default.createElement("span",{className:"glyphicon glyphicon-download-alt"},"Â "))),this.state.enableLandscapeBanner&&o.default.createElement("div",{className:"outer-most-container-ad landscape-banner"},o.default.createElement("div",{className:"outer-container-ad"},o.default.createElement("div",{className:(0,i.default)(this.state.themeSelected,"container-ad"),style:{background:"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"url("+this.state.cover.cover+") no-repeat "+this.state.backgroundPositionX+"% "+this.state.backgroundPositionY+"% ":""}}),o.default.createElement("div",{onClick:function(){return a.downloadAd("landscapeBanner","1300x740")},className:(0,i.default)("container-ad-absolute",this.state.themeSelected+"-ad")},o.default.createElement("div",{className:"left-part"},o.default.createElement("div",null,o.default.createElement("h2",{className:(0,i.default)({"additional-h2-3":""!=this.state.showOfferTxt})},this.state.messageSelected),this.state.showOfferTxt&&o.default.createElement("div",{className:"center-link"},o.default.createElement("span",{className:"center-link-top"},this.state.showOfferTxt),o.default.createElement("span",{className:"center-link-bottom"},this.state.showOfferTxt2))),o.default.createElement("div",{className:"container-logo"},o.default.createElement("div",{className:"left-side"},o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-app.png":"img/logo-bn-app.png",alt:""})),o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:(0,i.default)("right-side-text",{"center-text":"EBOOK"!=this.state.cover.type})},this.state.callToAction),o.default.createElement("div",{className:"right-side-logo"},this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-black.png":"img/logo-bn-black.png",alt:""}),!this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-white.png":"img/logo-bn-white.png",alt:""}))))),o.default.createElement("div",{className:(0,i.default)("container-image",{"add-chrome-glowlight":this.state.glowlightCheck},{"add-chrome-tablet":this.state.tabletCheck},{"add-chrome-spine":this.state.tabletCheck})},o.default.createElement("div",{className:(0,i.default)("extra-middle",{"glow-image-container":this.state.glowlightCheck},{"tab-image-container":this.state.tabletCheck},{"spine-image-container":this.state.spineCheck})},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title})))))),o.default.createElement("div",{onClick:function(){return a.downloadAd("landscapeBanner","1300x740")},className:"download-container"},"1300 x 740 ",o.default.createElement("span",{className:"glyphicon glyphicon-download-alt"},"Â "))),this.state.enableLeaderboardBanner&&o.default.createElement("div",{className:"outer-most-container-ad leaderboard-banner"},o.default.createElement("div",{className:"outer-container-ad"},o.default.createElement("div",{className:(0,i.default)(this.state.themeSelected,"container-ad"),style:{background:"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"url("+this.state.cover.cover+") no-repeat "+this.state.backgroundPositionX+"% "+this.state.backgroundPositionY+"% ":""}}),o.default.createElement("div",{onClick:function(){return a.downloadAd("leaderboardBanner","728x90")},className:(0,i.default)("container-ad-absolute",this.state.themeSelected+"-ad")},o.default.createElement("h2",{className:(0,i.default)({"additional-h2-4":""!=this.state.showOfferTxt},{"additional-line-height-4":"Complete The Series"==this.state.messageSelected})},this.state.messageSelected),this.state.showOfferTxt&&o.default.createElement("div",{className:"center-link"},o.default.createElement("span",{className:"center-link-top"},this.state.showOfferTxt),o.default.createElement("span",{className:"center-link-bottom"},this.state.showOfferTxt2)),o.default.createElement("div",{className:(0,i.default)("container-image",{"add-chrome-glowlight":this.state.glowlightCheck},{"add-chrome-tablet":this.state.tabletCheck},{"add-chrome-spine":this.state.tabletCheck})},o.default.createElement("div",{className:(0,i.default)({"glow-image-container":this.state.glowlightCheck},{"tab-image-container":this.state.tabletCheck},{"spine-image-container":this.state.spineCheck})},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title})))),o.default.createElement("div",{className:"container-logo"},o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:(0,i.default)("right-side-text",{"center-text":"EBOOK"!=this.state.cover.type})},this.state.callToAction),o.default.createElement("div",{className:"right-side-logo"},this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-black.png":"img/logo-bn-black.png",alt:""}),!this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-white.png":"img/logo-bn-white.png",alt:""}))),o.default.createElement("div",{className:"left-side"},o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-app.png":"img/logo-bn-app.png",alt:""}))))),o.default.createElement("div",{onClick:function(){return a.downloadAd("leaderboardBanner","728x90")},className:"download-container"},"728 x 90 ",o.default.createElement("span",{className:"glyphicon glyphicon-download-alt"},"Â "))),this.state.enableMediumBanner&&o.default.createElement("div",{className:"outer-most-container-ad medium-banner"},o.default.createElement("div",{className:(0,i.default)("outer-container-ad",{"additional-special-offer-5":""!=this.state.showOfferTxt})},o.default.createElement("div",{className:(0,i.default)(this.state.themeSelected,"container-ad"),style:{background:"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"url("+this.state.cover.cover+") no-repeat "+this.state.backgroundPositionX+"% "+this.state.backgroundPositionY+"% ":""}}),o.default.createElement("div",{onClick:function(){return a.downloadAd("mediumBanner","300x250")},className:(0,i.default)("container-ad-absolute",this.state.themeSelected+"-ad")},o.default.createElement("div",{className:"inner-left"},o.default.createElement("h2",null,this.state.messageSelected),this.state.showOfferTxt&&o.default.createElement("div",{className:"center-link"},o.default.createElement("span",{className:"center-link-top"},this.state.showOfferTxt),o.default.createElement("span",{className:"center-link-bottom"},this.state.showOfferTxt2)),o.default.createElement("div",{className:"container-logo"},o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:(0,i.default)("right-side-text",{"center-text":"EBOOK"!=this.state.cover.type})},this.state.callToAction),o.default.createElement("div",{className:"right-side-logo"},this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-black.png":"img/logo-bn-black.png",alt:""}),!this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-white.png":"img/logo-bn-white.png",alt:""}))),o.default.createElement("div",{className:"left-side"},o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-app.png":"img/logo-bn-app.png",alt:""})))),o.default.createElement("div",{className:(0,i.default)("container-image",{"add-chrome-glowlight":this.state.glowlightCheck},{"add-chrome-tablet":this.state.tabletCheck},{"add-chrome-spine":this.state.tabletCheck})},o.default.createElement("div",{className:(0,i.default)({"glow-image-container":this.state.glowlightCheck},{"tab-image-container":this.state.tabletCheck},{"spine-image-container":this.state.spineCheck})},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title})))))),o.default.createElement("div",{onClick:function(){return a.downloadAd("mediumBanner","300x250")},className:"download-container"},"300 x 250 ",o.default.createElement("span",{className:"glyphicon glyphicon-download-alt"},"Â "))),this.state.enableSkyscrapperBanner&&o.default.createElement("div",{className:"outer-most-container-ad skyscrapper-banner"},o.default.createElement("div",{className:(0,i.default)("outer-container-ad",{"additional-special-offer-6":""!=this.state.showOfferTxt})},o.default.createElement("div",{className:(0,i.default)(this.state.themeSelected,"container-ad"),style:{background:"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"url("+this.state.cover.cover+") no-repeat "+this.state.backgroundPositionX+"% "+this.state.backgroundPositionY+"% ":""}}),o.default.createElement("div",{onClick:function(){return a.downloadAd("htmlContentSmall","160x600")},className:(0,i.default)("container-ad-absolute",this.state.themeSelected+"-ad",{"add-chrome-extra-padding":"Complete The Series"==this.state.messageSelected},{"add-padding-pre-order":"Pre-Order"==this.state.messageSelected})},o.default.createElement("h2",{className:(0,i.default)({"additional-h2-font-6":"Complete The Series"==this.state.messageSelected||"Pre-Order"==this.state.messageSelected})},this.state.messageSelected),this.state.showOfferTxt&&o.default.createElement("div",{className:"center-link"},o.default.createElement("span",{className:"center-link-top"},this.state.showOfferTxt),o.default.createElement("span",{className:"center-link-bottom"},this.state.showOfferTxt2)),o.default.createElement("div",{className:(0,i.default)("container-image",{"add-chrome-glowlight":this.state.glowlightCheck},{"add-chrome-tablet":this.state.tabletCheck},{"add-chrome-spine":this.state.tabletCheck})},o.default.createElement("div",{className:(0,i.default)({"glow-image-container":this.state.glowlightCheck},{"tab-image-container":this.state.tabletCheck},{"spine-image-container":this.state.spineCheck})},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title})))),o.default.createElement("div",{className:"container-logo"},o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:(0,i.default)("right-side-text",{"center-text":"EBOOK"!=this.state.cover.type})},this.state.callToAction),o.default.createElement("div",{className:"right-side-logo"},this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-black.png":"img/logo-bn-black.png",alt:""}),!this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-white.png":"img/logo-bn-white.png",alt:""}))),o.default.createElement("div",{className:"left-side"},o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-app.png":"img/logo-bn-app.png",alt:""}))))),o.default.createElement("div",{onClick:function(){return a.downloadAd("htmlContentSmall","160x600")},className:"download-container additional-skyscrapper-download"},"160 x 600 ",o.default.createElement("span",{className:"glyphicon glyphicon-download-alt"},"Â "))),o.default.createElement("div",{style:{float:"left",position:"absolute",left:"-4000px"}},o.default.createElement("div",{id:"htmlContent",className:(0,i.default)("btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"":this.state.themeSelected),style:{width:"1200px",height:"1200px",margin:"0 auto","background-color":"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"#ffffff":""}},o.default.createElement("div",{className:(0,i.default)("outer-container-ad",{"additional-special-offer-1":""!=this.state.showOfferTxt}),style:{"z-index":"2"}},o.default.createElement("div",{className:(0,i.default)("container-ad-absolute",this.state.themeSelected+"-ad")},o.default.createElement("h2",null,this.state.messageSelected),this.state.showOfferTxt&&o.default.createElement("div",{className:"center-link"},o.default.createElement("span",{className:"center-link-top"},this.state.showOfferTxt),o.default.createElement("span",{className:"center-link-bottom"},this.state.showOfferTxt2)),o.default.createElement("div",{className:(0,i.default)("container-image",{"add-chrome-glowlight":this.state.glowlightCheck},{"add-chrome-tablet":this.state.tabletCheck})},o.default.createElement("div",{className:(0,i.default)({"glow-image-container":this.state.glowlightCheck},{"tab-image-container":this.state.tabletCheck},{"spine-image-container":this.state.spineCheck})},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title})))),o.default.createElement("div",{className:"container-logo"},o.default.createElement("div",{className:"left-side"},o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-app.png":"img/logo-bn-app.png",alt:""})),o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:(0,i.default)("right-side-text",{"center-text":"EBOOK"!=this.state.cover.type})},this.state.callToAction),o.default.createElement("div",{className:"right-side-logo"},this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-black.png":"img/logo-bn-black.png",alt:""}),!this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-white.png":"img/logo-bn-white.png",alt:""})))))),("btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected)&&o.default.createElement("div",{className:(0,i.default)(this.state.themeSelected,"container-ad"),style:{"z-index":"1",background:"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"url("+this.state.cover.cover+") #fff":""}}))),o.default.createElement("div",{style:{float:"left",position:"absolute",left:"-3000px"}},o.default.createElement("div",{id:"storiesBanner",className:(0,i.default)("btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"":this.state.themeSelected),style:{width:"1080px",height:"1920px",margin:"0 auto","background-color":"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"#ffffff":""}},o.default.createElement("div",{className:(0,i.default)("outer-container-ad",{"additional-special-offer-2":""!=this.state.showOfferTxt})},o.default.createElement("div",{className:(0,i.default)("container-ad-absolute",this.state.themeSelected+"-ad")},o.default.createElement("h2",{className:(0,i.default)({"additional-h2-font-2":"Complete The Series"==this.state.messageSelected})},this.state.messageSelected),this.state.showOfferTxt&&o.default.createElement("div",{className:"center-link"},o.default.createElement("span",{className:"center-link-top"},this.state.showOfferTxt),o.default.createElement("span",{className:"center-link-bottom"},this.state.showOfferTxt2)),o.default.createElement("div",{className:(0,i.default)("container-image",{"add-chrome-glowlight":this.state.glowlightCheck},{"add-chrome-tablet":this.state.tabletCheck},{"add-chrome-spine":this.state.tabletCheck})},o.default.createElement("div",{className:(0,i.default)({"glow-image-container":this.state.glowlightCheck},{"tab-image-container":this.state.tabletCheck},{"spine-image-container":this.state.spineCheck})},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title})))),o.default.createElement("div",{className:"container-logo"},o.default.createElement("div",{className:"left-side"},o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-app.png":"img/logo-bn-app.png",alt:""})),o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:(0,i.default)("right-side-text",{"center-text":"EBOOK"!=this.state.cover.type})},this.state.callToAction),o.default.createElement("div",{className:"right-side-logo"},this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-black.png":"img/logo-bn-black.png",alt:""}),!this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-white.png":"img/logo-bn-white.png",alt:""})))))),("btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected)&&o.default.createElement("div",{className:(0,i.default)(this.state.themeSelected,"container-ad"),style:{"z-index":"1",background:"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"url("+this.state.cover.cover+") #fff":""}}))),o.default.createElement("div",{style:{float:"left",position:"absolute",left:"-3000px"}},o.default.createElement("div",{id:"landscapeBanner",className:(0,i.default)("btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"":this.state.themeSelected),style:{width:"1300px",height:"740px",margin:"0 auto","background-color":"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"#ffffff":""}},o.default.createElement("div",{className:"outer-container-ad"},o.default.createElement("div",{className:(0,i.default)("container-ad-absolute",this.state.themeSelected+"-ad")},o.default.createElement("div",{className:"left-part"},o.default.createElement("div",null,o.default.createElement("h2",{className:(0,i.default)({"additional-h2-3":""!=this.state.showOfferTxt})},this.state.messageSelected),this.state.showOfferTxt&&o.default.createElement("div",{className:"center-link"},o.default.createElement("span",{className:"center-link-top"},this.state.showOfferTxt),o.default.createElement("span",{className:"center-link-bottom"},this.state.showOfferTxt2))),o.default.createElement("div",{className:"container-logo"},o.default.createElement("div",{className:"left-side"},o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-app.png":"img/logo-bn-app.png",alt:""})),o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:(0,i.default)("right-side-text",{"center-text":"EBOOK"!=this.state.cover.type})},this.state.callToAction),o.default.createElement("div",{className:"right-side-logo"},this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-black.png":"img/logo-bn-black.png",alt:""}),!this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-white.png":"img/logo-bn-white.png",alt:""}))))),o.default.createElement("div",{className:(0,i.default)("container-image",{"add-chrome-glowlight":this.state.glowlightCheck},{"add-chrome-tablet":this.state.tabletCheck},{"add-chrome-spine":this.state.tabletCheck})},o.default.createElement("div",{className:(0,i.default)("extra-middle",{"glow-image-container":this.state.glowlightCheck},{"tab-image-container":this.state.tabletCheck},{"spine-image-container":this.state.spineCheck})},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{id:"thirdImageMain",src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title})))))),("btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected)&&o.default.createElement("div",{className:(0,i.default)(this.state.themeSelected,"container-ad"),style:{"z-index":"1",background:"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"url("+this.state.cover.cover+") #fff":""}}))),o.default.createElement("div",{style:{float:"left",position:"absolute",left:"-3000px"}},o.default.createElement("div",{id:"leaderboardBanner",className:(0,i.default)("btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"":this.state.themeSelected),style:{width:"728px",height:"90px",margin:"0 auto","background-color":"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"#ffffff":""}},o.default.createElement("div",{className:"outer-container-ad"},o.default.createElement("div",{className:(0,i.default)("container-ad-absolute",this.state.themeSelected+"-ad")},o.default.createElement("h2",{className:(0,i.default)({"additional-h2-4":""!=this.state.showOfferTxt},{"additional-line-height-4":"Complete The Series"==this.state.messageSelected})},this.state.messageSelected),this.state.showOfferTxt&&o.default.createElement("div",{className:"center-link"},o.default.createElement("span",{className:"center-link-top"},this.state.showOfferTxt),o.default.createElement("span",{className:"center-link-bottom"},this.state.showOfferTxt2)),o.default.createElement("div",{className:(0,i.default)("container-image",{"add-chrome-glowlight":this.state.glowlightCheck},{"add-chrome-tablet":this.state.tabletCheck},{"add-chrome-spine":this.state.tabletCheck})},o.default.createElement("div",{className:(0,i.default)({"glow-image-container":this.state.glowlightCheck},{"tab-image-container":this.state.tabletCheck},{"spine-image-container":this.state.spineCheck})},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title})))),o.default.createElement("div",{className:"container-logo"},o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:(0,i.default)("right-side-text",{"center-text":"EBOOK"!=this.state.cover.type})},this.state.callToAction),o.default.createElement("div",{className:"right-side-logo"},this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-black.png":"img/logo-bn-black.png",alt:""}),!this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-white.png":"img/logo-bn-white.png",alt:""}))),o.default.createElement("div",{className:"left-side"},o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-app.png":"img/logo-bn-app.png",alt:""}))))),("btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected)&&o.default.createElement("div",{className:(0,i.default)(this.state.themeSelected,"container-ad"),style:{"z-index":"1",background:"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"url("+this.state.cover.cover+") #fff":""}}))),o.default.createElement("div",{style:{float:"left",position:"absolute",left:"-3000px"}},o.default.createElement("div",{id:"mediumBanner",className:(0,i.default)("btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"":this.state.themeSelected),style:{width:"300px",height:"250px",margin:"0 auto","background-color":"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"#ffffff":""}},o.default.createElement("div",{className:(0,i.default)("outer-container-ad",{"additional-special-offer-5":""!=this.state.showOfferTxt})},o.default.createElement("div",{className:(0,i.default)("container-ad-absolute",this.state.themeSelected+"-ad")},o.default.createElement("div",{className:"inner-left"},o.default.createElement("h2",null,this.state.messageSelected),this.state.showOfferTxt&&o.default.createElement("div",{className:"center-link"},o.default.createElement("span",{className:"center-link-top"},this.state.showOfferTxt),o.default.createElement("span",{className:"center-link-bottom"},this.state.showOfferTxt2)),o.default.createElement("div",{className:"container-logo"},o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:(0,i.default)("right-side-text",{"center-text":"EBOOK"!=this.state.cover.type})},this.state.callToAction),o.default.createElement("div",{className:"right-side-logo"},this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-black.png":"img/logo-bn-black.png",alt:""}),!this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-white.png":"img/logo-bn-white.png",alt:""}))),o.default.createElement("div",{className:"left-side"},o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-app.png":"img/logo-bn-app.png",alt:""})))),o.default.createElement("div",{className:(0,i.default)("container-image",{"add-chrome-glowlight":this.state.glowlightCheck},{"add-chrome-tablet":this.state.tabletCheck},{"add-chrome-spine":this.state.tabletCheck})},o.default.createElement("div",{className:(0,i.default)({"glow-image-container":this.state.glowlightCheck},{"tab-image-container":this.state.tabletCheck},{"spine-image-container":this.state.spineCheck})},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title})))))),("btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected)&&o.default.createElement("div",{className:(0,i.default)(this.state.themeSelected,"container-ad"),style:{"z-index":"1",background:"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"url("+this.state.cover.cover+") #fff":""}}))),o.default.createElement("div",{style:{float:"left",position:"absolute",left:"-3000px"}},o.default.createElement("div",{id:"htmlContentSmall",className:(0,i.default)("btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"":this.state.themeSelected),style:{width:"160px",height:"600px",margin:"0 auto","background-color":"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"#ffffff":""}},o.default.createElement("div",{className:(0,i.default)("outer-container-ad",{"additional-special-offer-6":""!=this.state.showOfferTxt})},o.default.createElement("div",{className:(0,i.default)("container-ad-absolute",this.state.themeSelected+"-ad",{"add-chrome-extra-padding":"Complete The Series"==this.state.messageSelected},{"add-padding-pre-order":"Pre-Order"==this.state.messageSelected})},o.default.createElement("h2",{className:(0,i.default)({"additional-h2-font-6":"Complete The Series"==this.state.messageSelected||"Pre-Order"==this.state.messageSelected})},this.state.messageSelected),this.state.showOfferTxt&&o.default.createElement("div",{className:"center-link"},o.default.createElement("span",{className:"center-link-top"},this.state.showOfferTxt),o.default.createElement("span",{className:"center-link-bottom"},this.state.showOfferTxt2)),o.default.createElement("div",{className:(0,i.default)("container-image",{"add-chrome-glowlight":this.state.glowlightCheck},{"add-chrome-tablet":this.state.tabletCheck},{"add-chrome-spine":this.state.tabletCheck})},o.default.createElement("div",{className:(0,i.default)({"glow-image-container":this.state.glowlightCheck},{"tab-image-container":this.state.tabletCheck},{"spine-image-container":this.state.spineCheck})},o.default.createElement("div",{className:"container-background"},o.default.createElement("img",{src:this.state.cover.cover,alt:"Book Cover Image. Title: "+this.state.cover.title})))),o.default.createElement("div",{className:"container-logo"},o.default.createElement("div",{className:"right-side"},o.default.createElement("div",{className:(0,i.default)("right-side-text",{"center-text":"EBOOK"!=this.state.cover.type})},this.state.callToAction),o.default.createElement("div",{className:"right-side-logo"},this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-black.png":"img/logo-bn-black.png",alt:""}),!this.state.blackLogo&&o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-white.png":"img/logo-bn-white.png",alt:""}))),o.default.createElement("div",{className:"left-side"},o.default.createElement("img",{src:"EBOOK"==this.state.cover.type?"img/logo-nook-app.png":"img/logo-bn-app.png",alt:""}))))),("btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected)&&o.default.createElement("div",{className:(0,i.default)(this.state.themeSelected,"container-ad"),style:{"z-index":"1",background:"btn-theme-light"==this.state.themeSelected||"btn-theme-dark"==this.state.themeSelected?"url("+this.state.cover.cover+") #fff":""}})))))))),this.state.downloadStart&&o.default.createElement(m.default,null))}}])&&y(t.prototype,a),n&&y(t,n),r}();t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyPageCheckoutSeo=t.EmptyPageSeo=t.PageNotFoundSeo=t.AdReadySeo=t.SummarySeo=t.VendorTaxAndBankInformationSeo=t.VendorPublisherSeo=t.DetailsIsbnSeo=t.DetailsEditorialsSeo=t.DetailsRightsSeo=t.DetailsPricingSeo=t.DetailsCategoriesSeo=t.DetailsAuthorSeo=t.DetailsAboutSeo=t.CoverReviewSeo=t.CoverSpineSeo=t.CoverUploadSeo=t.CoverFileTypeSeo=t.CoverFontsSeo=t.CoverImagesSeo=t.CoverFormattingSeo=t.CoverTypeSeo=t.InteriorSelectSampleSeo=t.InteriorReviewSampleSeo=t.InteriorUploadSampleSeo=t.InteriorSamplePreferenceSeo=t.InteriorReviewSeo=t.InteriorUploadSeo=t.InteriorFileTypeSeo=t.InteriorFontsSeo=t.InteriorImagesSeo=t.InteriorFormattingSeo=t.SizeAndTypeSeo=t.VendorRegistrationSeo=t.SelectPreorderStatusSeo=t.SelectSaleStatusSeo=t.ChooseExistingBookSeo=t.CreateBookTitleSeo=t.ChooseBookTypeSeo=t.CheckoutSeo=t.VendorAccountSeo=t.SalesReportingReportsSeo=t.SalesReportingDashboardSeo=t.OrderConfirmationSeo=t.OrderHistorySeo=t.ProjectSeriesSeo=t.ProjectAdBannerSeo=t.ProjectSearchSeo=t.ProjectCouponSeo=t.ProjectsSeo=t.ManageContributorsSeo=t.ManageAnalyticsSubscriptionSeo=t.AnalyticsSeo=t.ProfileSeo=t.HtmlCheatSheetSeo=t.CartSeo=t.TermsOfUseSeo=t.ReferralProgramTerms=t.RoyaltyPaymentTermsSeo=t.MembershipAgreementSeo=t.ContentPolicySeo=t.WhatsUnderTheCoverSeo=t.TitleSubTitleBasicsSeo=t.MetaDataBasicsSeo=t.CopyBasicsSeo=t.BNPressPathToPublicationSeo=t.AdvertisingSeo=t.AuthorPlatformBasicsSeo=t.AuthorPublishingServicesSeo=t.BaseAuthorSeo=t.WhatsNewSeo=t.SitemapSeo=t.ReachMillionsOfReadersSeo=t.PrintOnDemandSeo=t.MakeMoreMoneySeo=t.HowItWorksSeo=t.EmailPreferences=t.AboutUsSeo=t.BaseBetaSeo=t.AuthorPromotionsSeo=t.AuthorSeo=t.SignInSeo=t.ResetPasswordSeo=t.ForgotPasswordSeo=t.CreateAccountSeo=void 0;t.CreateAccountSeo={title:"Create Account | B&N Press"};t.ForgotPasswordSeo={title:"Forgot Password | B&N Press"};t.ResetPasswordSeo={title:"Reset Password | B&N Press"};t.SignInSeo={title:"Sign In | B&N Press"};t.AuthorSeo={title:"Author Page | B&N Press"};t.AuthorPromotionsSeo={title:"Author Promotions | B&N Press"};t.BaseBetaSeo={description:"Find the tools you need to design, advertise, and self-publish your eBook or Print book at Barnes & Noble Press.",keywords:"self publish book",title:"Self-Publishing for Books & eBooks | B&N Press"};t.AboutUsSeo={description:"",keywords:"",title:"About Us | B&N Press"};t.EmailPreferences={description:"",keywords:"",title:"Manage Marketing Email Preferences | B&N Press"};t.HowItWorksSeo={description:"Ever wondered about self-publishing your eBook or Print book? Find out how to self-publish your own book at Barnes & Noble Press.",keywords:"how to publish a book",title:"How to Self-Publish, Self-Publishing a Book | B&N Press"};t.MakeMoreMoneySeo={description:"Earn more when you publish direct on BN.com. Find out how to make more money when selling your book or eBook on B&N Press.",keywords:"how to make money self-publishing",title:"Make More Money by Self-Publishing | Royalty Calculator | B&N Press"};t.PrintOnDemandSeo={description:"Create high quality paperback or hardcover books for friends & family, business, fans of your book, prospective readers & reviewers, and yourself at B&N Press.",keywords:"print your own book",title:"Book Printing Services: Hardcover Book Printing & Online Book Printing | B&N Press"};t.ReachMillionsOfReadersSeo={description:"We have the arena to promote your print or eBook and reach millions of readers. Learn how to self-publish and market your book at Barnes & Noble Press.",keywords:"how to market your book,how to market your self published book",title:"Book Marketing | How to Market Your Book to B&N Readers | B&N Press"};t.SitemapSeo={title:"Sitemap | B&N Press"};t.WhatsNewSeo={title:"What's New | B&N Press"};t.BaseAuthorSeo={description:"Find author tools & tips and other self-publishing resources at B&N Press. Learn about cover design, sales copy, marketing, & more at B&N Press.",keywords:"self-publishing help,self-publishing resources,self publishing tips,self publishing tools",title:"Author Tools & Tips: Self-Publishing Resources | B&N Press"};t.AuthorPublishingServicesSeo={title:"Author Self-Publishing Services | B&N Press",description:"Self-publishing can be exhausting without the right resources. Visit B&N Press to get professional help in book editing, book cover design, and more."};t.AuthorPlatformBasicsSeo={description:"Prior to putting your book on sale, learn how to start building a platform to help create awareness about its publication at B&N Press.",keywords:"author platform building",title:"Build Your Author Platform | B&N Press"};t.AdvertisingSeo={title:"Advertising | B&N Press"};t.BNPressPathToPublicationSeo={description:"What are the steps to publishing your own book or eBook? Find out the path to publication at Barnes & Noble Press to see how easy indie publication actually is.",keywords:"steps to publish a book",title:"Steps to Self-Publishing Your Book | B&N Press"};t.CopyBasicsSeo={description:"Back cover & sales copy is important to help sell your book to potential readers. Learn sales copy basics at B&N Press.",keywords:"back cover copy,sales copy basics for books",title:"How to Write Sales Copy for Your Book | B&N Press"};t.MetaDataBasicsSeo={description:"Metadata is required by retailers and it populates the information that you see on a book detail page online. Learn book metadata basics at B&N Press.",keywords:"book metadata,book metadata standards",title:"Book Metadata Basics | B&N Press"};t.TitleSubTitleBasicsSeo={description:"One of the most enjoyable parts of finalizing your book is nailing down the title. Find tips for how to come up with your book title at B&N Press.",keywords:"book title ideas,how to come up with a book title",title:"Coming Up With a Book Title | B&N Press"};t.WhatsUnderTheCoverSeo={description:"A well-designed cover can help readers find and purchase your work. Read our book cover design tips to create the best cover for your new book at B&N Press.",keywords:"book cover designing,book cover design guide",title:"Book Cover Design Basics  | B&N Press"};t.ContentPolicySeo={title:"Content Policy | B&N Press"};t.MembershipAgreementSeo={title:"Membership Agreement | B&N Press"};t.RoyaltyPaymentTermsSeo={title:"Royalty Payment Terms | B&N Press"};t.ReferralProgramTerms={title:"Referral Program Terms | B&N Press"};t.TermsOfUseSeo={title:"Terms And Conditions | B&N Press"};t.CartSeo={title:"My Shopping Cart | B&N Press"};t.HtmlCheatSheetSeo={title:"HTML Guide | B&N Press"};t.ProfileSeo={title:"My Profile | B&N Press"};t.AnalyticsSeo={title:"My Analytics | B&N Press"};t.ManageAnalyticsSubscriptionSeo={title:"Manage Analytics Subscription | B&N Press"};t.ManageContributorsSeo={title:"ManageContributors | B&N Press"};t.ProjectsSeo={title:"My Projects | B&N Press"};t.ProjectCouponSeo={title:"Promotions | B&N Press"};t.ProjectSearchSeo={title:"Project Search Results | B&N Press"};t.ProjectAdBannerSeo={title:"Design Promotional Graphics to Promote Your Book | B&N Press"};t.ProjectSeriesSeo={title:"Series | B&N Press"};t.OrderHistorySeo={title:"My Order History | B&N Press"};t.OrderConfirmationSeo={title:"Order Confirmation | B&N Press"};t.SalesReportingDashboardSeo={title:"Sales Reports | B&N Press"};t.SalesReportingReportsSeo={title:"Sales Reports | B&N Press"};t.VendorAccountSeo={title:"My Vendor Account | B&N Press"};t.CheckoutSeo={title:"Checkout | B&N Press"};t.ChooseBookTypeSeo={title:"Choose Type Of Book | B&N Press"};t.CreateBookTitleSeo={title:"Choose Book Title | B&N Press"};t.ChooseExistingBookSeo={title:"Choose Type Of Book | B&N Press"};t.SelectSaleStatusSeo={title:"Select Sale Status | B&N Press"};t.SelectPreorderStatusSeo={title:"Is This Book a Pre-Order? | B&N Press"};t.VendorRegistrationSeo={title:"Select Vendor Registration | B&N Press"};t.SizeAndTypeSeo={title:"Choose Book Size & Type | B&N Press"};t.InteriorFormattingSeo={title:"Interior - Formatting | B&N Press"};t.InteriorImagesSeo={title:"Interior - Images | B&N Press"};t.InteriorFontsSeo={title:"Interior - Fonts | B&N Press"};t.InteriorFileTypeSeo={title:"Interior - File Types | B&N Press"};t.InteriorUploadSeo={title:"Interior - Upload Interior | B&N Press"};t.InteriorReviewSeo={title:"Interior - Review Interior | B&N Press"};t.InteriorSamplePreferenceSeo={title:"Interior - Sample Preference | B&N Press"};t.InteriorUploadSampleSeo={title:"Interior - Upload Sample | B&N Press"};t.InteriorReviewSampleSeo={title:"Interior - Review Sample | B&N Press"};t.InteriorSelectSampleSeo={title:"Interior - Select Sample | B&N Press"};t.CoverTypeSeo={title:"Cover - Select Cover Type | B&N Press"};t.CoverFormattingSeo={title:"Cover - Formatting | B&N Press"};t.CoverImagesSeo={title:"Cover - Images | B&N Press"};t.CoverFontsSeo={title:"Cover - Fonts | B&N Press"};t.CoverFileTypeSeo={title:"Cover - File Types | B&N Press"};t.CoverUploadSeo={title:"Cover - Upload Cover | B&N Press"};t.CoverSpineSeo={title:"Cover - Create Spine | B&N Press"};t.CoverReviewSeo={title:"Cover - Review Cover | B&N Press"};t.DetailsAboutSeo={title:"Book Details - About | B&N Press"};t.DetailsAuthorSeo={title:"Book Details - Author | B&N Press"};t.DetailsCategoriesSeo={title:"Book Details - Categories | B&N Press"};t.DetailsPricingSeo={title:"Book Details - Pricing | B&N Press"};t.DetailsRightsSeo={title:"Book Details - Rights | B&N Press"};t.DetailsEditorialsSeo={title:"Book Details - Editorial Reviews | B&N Press"};t.DetailsIsbnSeo={title:"Book Details - ISBN | B&N Press"};t.VendorPublisherSeo={title:"Registration - Publisher | B&N Press"};t.VendorTaxAndBankInformationSeo={title:"Registration - Tax & Banking Information | B&N Press"};t.SummarySeo={title:"Summary | B&N Press"};t.AdReadySeo={title:"ISBN Lookup | B&N Press"};t.PageNotFoundSeo={title:"Page Not Found | B&N Press"};t.EmptyPageSeo={title:"B&N Press"};t.EmptyPageCheckoutSeo={title:"B&N Press"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=a(2),h=n(a(68)),i=n(a(109)),s=(o(a(74)),o(a(4))),u=o(a(536)),c=o(a(6)),d=n(a(11)),f=n(a(84)),p=n(a(60)),y=o(a(38)),m=o(a(46)),b=o(a(1687)),g=o(a(1688)),v=(o(a(3)),o(a(135))),E=n(a(75));a(7);function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=P(o).call(this,e))||"object"!==S(n)&&"function"!=typeof n?O(a):n).state={data:"WHAT IS SITE DATA? ",definition:"This section gives you insight into how customers find your BN.com book product pages â€“ where they come from and how they get there. We'll also show you how your book converts customers on our site.",eaaSearchStatus:!0,ean:"",loadingpurchase:!1,isSearchedData:!1,filterOption:f.FILTER_PARAMS.default,eaaSubscriptionData:""},t.onClickReadingData=t.onClickReadingData.bind(O(O(t))),t.onClickSiteData=t.onClickSiteData.bind(O(O(t))),t.onClickCustomerData=t.onClickCustomerData.bind(O(O(t))),t.onSuggestionSelected=t.onSuggestionSelected.bind(O(O(t))),t.stoploader=t.stoploader.bind(O(O(t))),t.eaaSubscriptionLoaded=t.eaaSubscriptionLoaded.bind(O(O(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(o,r.default.Component),t=o,(a=[{key:"stoploader",value:function(){this.setState({loadingpurchase:!1}),this.forceUpdate()}},{key:"onSuggestionSelected",value:function(e){var t=768<=window.innerWidth?"project-list-search":"Mobile-Search",a=document.getElementsByClassName(t)[0].getElementsByClassName("input-area")[0],n=a.getElementsByTagName("input")[0].value,o=a.getElementsByTagName("input")[0].id;if(document.getElementsByClassName(o).length&&"no match"==document.getElementsByClassName(o)[0].firstElementChild.innerText.toLowerCase())return a.getElementsByTagName("input")[0].value="",document.getElementById(o).parentElement.parentElement.classList.add("error"),document.getElementById(o).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.classList.add("nomatch-active"),document.getElementById(o).parentElement.parentElement.querySelector(".message").innerHTML="Please search for your Title, ISBN or Series",setTimeout(function(){a.getElementsByTagName("input")[0].value=""},500),document.getElementsByClassName(o)[0].parentElement.parentElement.style.display="none",!0;if((null==e||""==e.newValue)&&""==n){var r={ean:"",projectType:"ALL"};h.getPreviewPurchaseDetails(r),h.getBookPageVisitorByDomain(r),h.getAllDoughnutData(r),this.setState({ean:""})}else{var l,i=e&&e.currentTarget?e.currentTarget.parentNode.firstElementChild.lastElementChild.lastElementChild.lastElementChild.firstElementChild.firstElementChild:null,s=null!==i?i.innerText:"";if(void 0===e)return;if(l=void 0===e.newValue?s:e.newValue,e&&e.currentTarget){var u=768<=window.innerWidth?0:1,c=document.getElementsByClassName("options-dropdown")[u].getElementsByTagName("UL")[0].getElementsByTagName("LI")[0],d=e.currentTarget.parentNode.firstElementChild.lastElementChild.firstElementChild.value;if(void 0!==c)c.click();else if(""!==d&&null==c)return}if(""!==l){var f=y.default.findProjectForEaa(l);if(null!=f){var p={ean:f.title,projectType:"ALL"};h.getPreviewPurchaseDetails(p),h.getBookPageVisitorByDomain(p),h.getAllDoughnutData(p),this.setState({ean:f.title})}}else{var m={ean:"",projectType:"ALL"};h.getPreviewPurchaseDetails(m),h.getBookPageVisitorByDomain(m),h.getAllDoughnutData(m),this.setState({ean:""})}}this.setState({loadingpurchase:!0,isSearchedData:!0}),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){v.default.removeEaaSubscriptionListener(this.eaaSubscriptionLoaded)}},{key:"componentWillMount",value:function(){v.default.addEaaSubscriptionListener(this.eaaSubscriptionLoaded)}},{key:"componentDidMount",value:function(){if(E.getEaaSubscription(),p.loadEaaSearches(this.state.filterOption),this.props.location.state){this.setState({ean:this.props.location.state.searchBook});var e={ean:this.props.location.state.searchBook?this.props.location.state.searchBook:"",projectType:this.props.location.state.bookType?this.props.location.state.bookType:"ALL"};h.getBookPageVisitorByDomain(e),h.getPreviewPurchaseDetails(e),h.getAllDoughnutData(e)}else{var t={ean:"",projectType:"ALL"};h.getBookPageVisitorByDomain(t),h.getPreviewPurchaseDetails(t),h.getAllDoughnutData(t)}}},{key:"onClickCustomerData",value:function(e){l.browserHistory.push(e)}},{key:"onClickReadingData",value:function(e){l.browserHistory.push(e)}},{key:"onClickSiteData",value:function(e){l.browserHistory.push(e)}},{key:"eaaSubscriptionLoaded",value:function(){var e=v.default.eaaSubscription();this.setState({eaaSubscriptionData:e})}},{key:"parseMillisecondsIntoReadableTime",value:function(e){var t=e/36e5,a=Math.floor(t),n=9<a?a:"0"+a,o=60*(t-a),r=Math.floor(o),l=9<r?r:"0"+r,i=60*(o-r);Math.floor(i);return n+"hours,  "+l+"minutes"}},{key:"render",value:function(){var e,t,a,n=this;this.state.eaaSubscriptionData&&(e=this.state.eaaSubscriptionData.result,t=new Date(e.resetDate).getTime()-(new Date).getTime()),a=!!s.default.hasEaaPermission()&&s.default.hasEaaPermission().includes(d.SITE);return r.default.createElement("div",null,a&&r.default.createElement("div",{className:"left-sidebar-wrapper analytics-layout"},r.default.createElement("div",{className:"left-sidebar-container projects"},r.default.createElement("header",{className:"sidelines"},r.default.createElement("h1",null,"My Analytics Dashboard")),r.default.createElement("div",{className:"sidebar-left"}),r.default.createElement("div",{className:"content-right"},r.default.createElement("div",{className:"desktop-Search col-sm-12 project-list-search project-sort-options search-box search-icon-eaa"},r.default.createElement(c.default,null,r.default.createElement(m.default,{label:"Search Book by Title, ISBN, Series",ref:"projectSearch",defaultDropdownSelection:!0,filterOption:this.state.filterOption,onSubmit:this.onSuggestionSelected,eaaSearch:this.state.eaaSearchStatus,initValue:this.props.location.state?this.props.location.state.searchBook:"",noValue:"true",firstRendor:!0})))),r.default.createElement("div",{className:"sidebar-left"},r.default.createElement("div",{className:"customer-display"},s.default.hasEaaPermission().includes(d.CUSTOMER)&&r.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return n.onClickCustomerData("/"+i.Base)}},r.default.createElement("span",null,"Customer Data")),s.default.hasEaaPermission().includes(d.READING)&&r.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return n.onClickReadingData("/"+i.Base+"/"+i.ReadingData)}},r.default.createElement("span",null,"Reading Data")),s.default.hasEaaPermission().includes(d.SITE)&&r.default.createElement("div",{className:"btn btn-new-project-analytics btn-block",onClick:function(){return n.onClickSiteData("/"+i.Base+"/"+i.SiteData)}},r.default.createElement("span",null,"Site Data"))),r.default.createElement("div",{className:" m-0 p-0  mobile-display"},s.default.hasEaaPermission().includes(d.CUSTOMER)&&r.default.createElement("div",{className:"col-33"},r.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return n.onClickCustomerData("/"+i.Base)}},r.default.createElement("span",null,"Customer Data"))),s.default.hasEaaPermission().includes(d.READING)&&r.default.createElement("div",{className:"col-33"},r.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return n.onClickReadingData("/"+i.Base+"/"+i.ReadingData)}},r.default.createElement("span",null,"Reading Data"))),s.default.hasEaaPermission().includes(d.SITE)&&r.default.createElement("div",{className:"col-33"},r.default.createElement("div",{className:"btn btn-new-project-analytics btn-block",onClick:function(){return n.onClickSiteData("/"+i.Base+"/"+i.SiteData)}},r.default.createElement("span",null,"Site Data")))),r.default.createElement("div",{className:"analytics-mar30 analytics-mar30-mobile"},r.default.createElement("p",{className:"analytics-data-text"},this.state.data),r.default.createElement("p",{className:"analytics-data-define"},this.state.definition," "),r.default.createElement("br",null),r.default.createElement("p",{className:"analytics-data-define"},"Please Note: This information derives from the last 2 years of data."),r.default.createElement("div",{className:"searches-remaining"},r.default.createElement("span",{className:"searches-remaining-bold"},e&&parseInt(e.dailyLimit)-parseInt(e.usageCount))," SEARCHES REMAINING",r.default.createElement("p",{className:"search-remaining-text"},"Search limit is based on incurred costs on B&N Press when processing data feeds."),r.default.createElement("p",{className:"search-reset"},"Searches Reset: ",e&&e.resetDate&&t?this.parseMillisecondsIntoReadableTime(t):"")," "))),r.default.createElement("div",{className:"Mobile-Search col-sm-4 project-list-search project-sort-options search-box search-icon-eaa"},r.default.createElement(c.default,null,r.default.createElement(m.default,{label:"Search Book by Title, ISBN, Series",ref:"projectSearch",defaultDropdownSelection:!0,filterOption:this.state.filterOption,onSubmit:this.onSuggestionSelected,eaaSearch:this.state.eaaSearchStatus,initValue:this.props.location.state?this.props.location.state.searchBook:"",noValue:"true",firstRendor:!0}))),r.default.createElement("div",{className:"content-right  container siteDataStyles"},r.default.createElement("div",{className:"row analytics-margin"},r.default.createElement("div",{className:"col-sm-12 col-xs-12 tilesBackgroundColor"},r.default.createElement(b.default,{ean:this.state.ean,loader:this.state.loadingpurchase}))),r.default.createElement("div",{className:"row analytics-margin"},r.default.createElement("div",{className:"col-sm-12 col-md-12 col-xs-12"},r.default.createElement(u.default,{ean:this.state.ean,loader:this.state.loadingpurchase}))),r.default.createElement("div",{className:"row analytics-margin site-data-table-height"},r.default.createElement("div",{className:"col-sm-12 col-md-12 col-xs-12 col-lg-12"},r.default.createElement(g.default,{ean:this.state.ean,stoploader:this.stoploader,loader:this.state.loadingpurchase})))))),!a&&r.default.createElement("div",{className:"no-permission"},"Oops you don't have permission to access this page"))}}])&&k(t.prototype,a),n&&k(t,n),o}();t.default=C},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=o(a(0)),r=(n(a(43)),n(a(1))),f=(n(a(148)),n(a(6)),n(a(12)),n(a(27)),o(a(9)),n(a(341))),l=o(a(68)),i=n(a(74)),p=(n(a(46)),o(a(57))),s=n(a(51)),m=n(a(61)),h=n(a(3)),u=o(a(75));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=b(o).call(this,e))||"object"!==c(n)&&"function"!=typeof n?v(a):n).state={pageVisit:"",sampleView:"",purchase:"",totalSales:"",renderData:"",oldData:"",bookType:p.BOOK_TYPES.ALL,bookTypeEnabled:!0,isFreeFilterEnabled:!0,hasData:"",loadingChart:!1,totalDataLabel:"",dataLabel:"",loading:!1},t.purchasePreviewResultLoaded=t.purchasePreviewResultLoaded.bind(v(v(t))),t.isEmpty=t.isEmpty.bind(v(v(t))),t.getHeaderStyles=t.getHeaderStyles.bind(v(v(t))),t.onFilterAllDonughtBooks=t.onFilterAllDonughtBooks.bind(v(v(t))),t.onFilterEBookDonughtBooks=t.onFilterEBookDonughtBooks.bind(v(v(t))),t.onFilterPrintDonughtBooks=t.onFilterPrintDonughtBooks.bind(v(v(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,d.Component),t=o,(a=[{key:"onFilterAllDonughtBooks",value:function(e){var t={ean:this.props.ean,projectType:"ALL"};l.getPreviewPurchaseDetails(t),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingChart:!0})}},{key:"onFilterEBookDonughtBooks",value:function(e){var t={ean:this.props.ean,projectType:"EBOOK"};l.getPreviewPurchaseDetails(t),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingChart:!0})}},{key:"onFilterPrintDonughtBooks",value:function(e){var t={ean:this.props.ean,projectType:"SPB"};l.getPreviewPurchaseDetails(t),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingChart:!0})}},{key:"getHeaderStyles",value:function(e,t,a,n){return n=s.default.hasUserPublishedBefore()&&n,(0,r.default)(e,{"active-selection":t===a})}},{key:"componentWillMount",value:function(){i.default.addPurchasePreviewLoadedListener(this.purchasePreviewResultLoaded),this.setState({loading:!0})}},{key:"componentWillUnmount",value:function(){i.default.removePurchasePreviewLoadedListener(this.purchasePreviewResultLoaded)}},{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"purchasePreviewResultLoaded",value:function(){var e=i.default.purchasePreviewData();u.getEaaSubscription(),this.isEmpty(e.result)||0==e.result.siteDataList[0].pageVisits&&0==e.result.siteDataList[0].totalSales&&0==e.result.siteDataList[0].sampleViews&&0==e.result.siteDataList[0].purchases?this.setState({renderData:!0,hasData:!1,pageVisit:0,sampleView:0,purchase:0,totalSales:0,totalDataLabel:0,dataLabel:0}):this.setState({oldData:e,pageVisit:e.result.siteDataList[0].pageVisits,sampleView:e.result.siteDataList[0].sampleViews,purchase:e.result.siteDataList[0].purchases,totalSales:e.result.siteDataList[0].totalSales,renderData:!0,hasData:!0,totalDataLabel:(e.result.siteDataList[0].totalSales-e.result.siteDataList[0].purchases).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),dataLabel:(e.result.siteDataList[0].pageVisits-e.result.siteDataList[0].sampleViews).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}),this.setState({loadingChart:!1,loading:!1})}},{key:"render",value:function(){var e,t,a,n,o,r,l,i,s=this,u=p.BOOK_TYPES,c=this.props.ean?this.props.ean:"None Provided";return i=this.state.bookType==p.BOOK_TYPES.EBOOK?"eBook":this.state.bookType==p.BOOK_TYPES.ALL?"All Books":"Print Book",t=!this.state.hasData||0==this.state.pageVisit&&0==this.state.totalSales&&0==this.state.sampleView&&0==this.state.purchase?(r=d.default.createElement("span",null,d.default.createElement("h1",null,"0"),d.default.createElement("p",null,"Total Visitors")),l=d.default.createElement("span",null,d.default.createElement("h1",null,"0"),d.default.createElement("p",null,"Total Purchased")),e=[{y:100,colorIndex:4}],[{y:100,colorIndex:4}]):(r=d.default.createElement("span",null,d.default.createElement("h1",null,this.state.pageVisit.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),d.default.createElement("p",null,"Total Visitors")),l=d.default.createElement("span",null,d.default.createElement("h1",null,this.state.totalSales.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),d.default.createElement("p",null,"Total Purchased")),o=100<=(a=this.state.sampleView/this.state.pageVisit*100)?100:a,n=this.state.purchase/this.state.totalSales*100,e=isNaN(o)?[{y:100,colorIndex:4}]:[{y:0<o&&o<=1?1:o,colorIndex:6},{y:0<100-o&&100-o<=1?1:100-o,colorIndex:24}],isNaN(n)?[{y:100,colorIndex:4}]:[{y:0<n&&n<=1?1:n,colorIndex:6},{y:0<100-n&&100-n<=1?1:100-n,colorIndex:24}]),d.default.createElement("div",{className:"container siteDataBookSalesChart"},d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-sm-12 analytics-margin-top"},d.default.createElement("div",null,d.default.createElement("h3",{className:"tooltip-description"},"Your Book Purchase Rate "),d.default.createElement(m.default,{info:!0,text:'This graph shows you how many customers viewed your bookâ€™s BN.com product page, how many of those customers then clicked on "See inside" to see a preview of your book, and then how many of those customers who previewed your book actually went on to purchase your book. This section provides insight on your bookâ€™s BN.com product page and preview conversion rate.',trigger:"focus"},d.default.createElement("span",{className:"Whats-This"},"What's This?")))),d.default.createElement("div",{className:"widget margin-widget col-sm-12 col-lg-5 col-xs-12"},d.default.createElement("div",{className:"widget-panel-content"},d.default.createElement("div",{className:"controls clearfix"},d.default.createElement("ul",{className:"book-type"},d.default.createElement("li",{className:this.getHeaderStyles("all-books",this.state.bookType,u.ALL,this.state.bookTypeEnabled),onClick:function(){return s.onFilterAllDonughtBooks(u.ALL)}},"All Books"),d.default.createElement("li",{className:this.getHeaderStyles("ebook",this.state.bookType,u.EBOOK,this.state.bookTypeEnabled),onClick:function(){return s.onFilterEBookDonughtBooks(u.EBOOK)}},"eBook"),d.default.createElement("li",{className:this.getHeaderStyles("print",this.state.bookType,u.PRINT,this.state.bookTypeEnabled),onClick:function(){return s.onFilterPrintDonughtBooks(u.PRINT)}},"Print")))))),d.default.createElement("div",{className:"row"},!this.props.loader&&!this.state.loadingChart&&d.default.createElement("div",null,(this.props.ean||this.state.bookType==p.BOOK_TYPES.EBOOK||this.state.bookType==p.BOOK_TYPES.PRINT)&&!this.state.loadingTable&&!this.state.hasData&&d.default.createElement("div",{className:"viewport"},d.default.createElement("div",{className:"edgeCaseMessage float-centered col-sm-12 col-md-8 col-xs-12 col-lg-6"},d.default.createElement("div",{className:"edgeCaseMessageStyle"},d.default.createElement("p",{className:"searchTermStyle"},"We found no data matching your search criteria"),d.default.createElement("p",null,"Search Term:",d.default.createElement("strong",null,c)),d.default.createElement("p",null,"Book Type:",d.default.createElement("strong",null,i)))))),this.state.renderData&&d.default.createElement("div",{className:"mobiledesign outer-width"},d.default.createElement("div",{className:"doughnut inlineDisplay border-right"},this.state.bookType==p.BOOK_TYPES.ALL&&d.default.createElement("div",{className:"bckg-color-all"},d.default.createElement("span",{className:"Visitors-to-the-Prod text-color-white "},"Visitors to the Book Page")),this.state.bookType==p.BOOK_TYPES.EBOOK&&d.default.createElement("div",{className:"bckg-color-ebook"},d.default.createElement("span",{className:"Visitors-to-the-Prod text-color-black "},"Visitors to the Book Page")),this.state.bookType==p.BOOK_TYPES.PRINT&&d.default.createElement("div",{className:"bckg-color-print"},d.default.createElement("span",{className:"Visitors-to-the-Prod text-color-white "},"Visitors to the Book Page")),d.default.createElement("div",{className:"paddingDonut1 donutreference"},d.default.createElement(f.default,{data:e,height:300,width:300,title:r,innersize:"75%"})),d.default.createElement("div",{className:"col-xs-6 text-align-centre text-color-blue"},0==this.state.sampleView?this.state.sampleView:this.state.sampleView.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),d.default.createElement("div",{className:"col-xs-6 text-align-centre text-color-saffron"},this.state.dataLabel),d.default.createElement("div",null,d.default.createElement("div",{className:"inline-Block text-align-centre col-xs-6 padding-bottom"},d.default.createElement("div",{className:"underline-text"}),d.default.createElement("div",{className:"Rectangle-Copy1"}),d.default.createElement("span",{className:"legendText"},"Did Read the Preview")),d.default.createElement("div",{className:"inline-Block text-align-centre col-xs-6 padding-bottom"},d.default.createElement("div",{className:"underline-text"}),d.default.createElement("div",{className:"Rectangle-Copy2"}),d.default.createElement("span",{className:"legendText"},"Didnâ€™t Read the Preview")))),d.default.createElement("div",{className:"border-image border-image-fixed"}),d.default.createElement("div",{className:"doughnut inlineDisplay border-left"},this.state.bookType==p.BOOK_TYPES.ALL&&d.default.createElement("div",{className:"bckg-color-all"},d.default.createElement("span",{className:"Visitors-to-the-Prod text-color-white "},"Visitors Who Went On to Purchase the Book")),this.state.bookType==p.BOOK_TYPES.EBOOK&&d.default.createElement("div",{className:"bckg-color-ebook"},d.default.createElement("span",{className:"Visitors-to-the-Prod text-color-black "},"Visitors Who Went On to Purchase the Book")),this.state.bookType==p.BOOK_TYPES.PRINT&&d.default.createElement("div",{className:"bckg-color-print"},d.default.createElement("span",{className:"Visitors-to-the-Prod text-color-white "},"Visitors Who Went On to Purchase the Book")),d.default.createElement("div",{className:"paddingDonut2 donutreference"},d.default.createElement(f.default,{data:t,height:300,width:300,title:l,innersize:"75%"})),d.default.createElement("div",{className:"col-xs-6 text-align-centre text-color-blue"},0==this.state.purchase?this.state.purchase:this.state.purchase.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),d.default.createElement("div",{className:"col-xs-6 text-align-centre text-color-saffron"},this.state.totalDataLabel),d.default.createElement("div",null,d.default.createElement("div",{className:"inline-Block text-align-centre col-xs-6 padding-bottom"},d.default.createElement("div",{className:"underline-text"}),d.default.createElement("div",{className:"Rectangle-Copy1 "}),d.default.createElement("span",{className:"legendText"},"Did Read the Preview")),d.default.createElement("div",{className:"inline-Block text-align-centre col-xs-6 padding-bottom"},d.default.createElement("div",{className:"underline-text"}),d.default.createElement("div",{className:"Rectangle-Copy2 "}),d.default.createElement("span",{className:"legendText"},"Didnâ€™t Read the Preview")))))),this.state.loadingChart&&d.default.createElement("div",{className:"spinner-area"},d.default.createElement(h.default,null)),this.state.loading&&d.default.createElement("div",{className:"spinner-area"},d.default.createElement(h.default,{top:40})),this.props.loader&&d.default.createElement("div",{className:"spinner-area"},d.default.createElement(h.default,null)))}}])&&y(t.prototype,a),n&&y(t,n),o}();t.default=E},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(a(0)),r=o(a(1)),i=a(2),s=n(a(68)),u=n(a(109)),c=o(a(74)),d=n(a(57)),f=o(a(51)),p=o(a(61)),m=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=b(o).call(this,e))||"object"!==h(n)&&"function"!=typeof n?v(a):n).state={bookPageVisitorList:"",showMore:!1,bookType:d.BOOK_TYPES.ALL,bookTypeEnabled:!0,isFreeFilterEnabled:!0,seeEntireList:!1,renderData:"",hasData:"",loadingTable:!1,loading:!1},t.isEmpty=t.isEmpty.bind(v(v(t))),t.onBookPageVistorLoaded=t.onBookPageVistorLoaded.bind(v(v(t))),t.getHeaderStyles=t.getHeaderStyles.bind(v(v(t))),t.onFilterAllDonughtBooks=t.onFilterAllDonughtBooks.bind(v(v(t))),t.onFilterEBookDonughtBooks=t.onFilterEBookDonughtBooks.bind(v(v(t))),t.onFilterPrintDonughtBooks=t.onFilterPrintDonughtBooks.bind(v(v(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,l.default.Component),t=o,(a=[{key:"onFilterAllDonughtBooks",value:function(e){var t={ean:this.props.ean,projectType:"ALL"};s.getBookPageVisitorByDomain(t),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingTable:!0})}},{key:"onFilterEBookDonughtBooks",value:function(e){var t={ean:this.props.ean,projectType:"EBOOK"};s.getBookPageVisitorByDomain(t),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingTable:!0})}},{key:"onFilterPrintDonughtBooks",value:function(e){var t={ean:this.props.ean,projectType:"SPB"};s.getBookPageVisitorByDomain(t),this.state.bookTypeEnabled&&e!==this.state.bookType&&this.setState({bookType:e,loadingTable:!0})}},{key:"getHeaderStyles",value:function(e,t,a,n){return n=f.default.hasUserPublishedBefore()&&n,(0,r.default)(e,{"active-selection":t===a})}},{key:"componentWillMount",value:function(){c.default.addBookPageVisitorListener(this.onBookPageVistorLoaded),this.setState({loading:!0})}},{key:"componentWillUnmount",value:function(){c.default.removeBookPageVisitorListener(this.onBookPageVistorLoaded)}},{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"onBookPageVistorLoaded",value:function(){var e=c.default.bookPageVisitor();(this.isEmpty(e.result)?this.setState({renderData:!1,hasData:!0,loadingTable:!1,seeEntireList:!1}):this.setState({bookPageVisitorList:e,renderData:!0,hasData:!1,loadingTable:!1}),this.state.bookPageVisitorList)&&(10<this.state.bookPageVisitorList.result.siteDataList.length&&1==this.state.renderData?this.setState({seeEntireList:!0,loadingTable:!1}):this.setState({seeEntireList:!1,loadingTable:!1}));this.props.stoploader(),this.setState({loading:!1})}},{key:"onSeeEntireList",value:function(e){i.browserHistory.push({pathname:e,state:{searchBook:this.props.ean,bookType:this.state.bookType}}),window.scrollTo(0,0)}},{key:"render",value:function(){var e,t=this,a=d.BOOK_TYPES;this.state.bookPageVisitorList&&(e=this.state.bookPageVisitorList.result.siteDataList);var n,o=this.props.ean?this.props.ean:"None Provided";n=this.state.bookType==d.BOOK_TYPES.EBOOK?"eBooks":this.state.bookType==d.BOOK_TYPES.ALL?"All Books":"Print Books";var r=e&&0<e.length&&!this.state.showMore?e.slice(0,10):e;return l.default.createElement("div",{className:"article-main",id:"on-go-back"},l.default.createElement("div",{className:"analytics-margin-top"},l.default.createElement("h3",{className:"tooltip-description"},"Your Book Detail Page Visitors by Domain"),l.default.createElement(p.default,{info:!0,text:"This graph shows you the different domains or channels by which your customers arrived at your bookâ€™s product page on BN.com as well as the corresponding number of customer views by each such domain/channel.",trigger:"focus"},l.default.createElement("span",{className:"Whats-This"},"What's This?"))),l.default.createElement("div",{className:"widget margin-widget"},l.default.createElement("div",{className:"widget-panel-content"},l.default.createElement("div",{className:"controls clearfix"},l.default.createElement("ul",{className:"book-type"},l.default.createElement("li",{className:this.getHeaderStyles("all-books",this.state.bookType,a.ALL,this.state.bookTypeEnabled),onClick:function(){return t.onFilterAllDonughtBooks(a.ALL)}},"All Books"),l.default.createElement("li",{className:this.getHeaderStyles("ebook",this.state.bookType,a.EBOOK,this.state.bookTypeEnabled),onClick:function(){return t.onFilterEBookDonughtBooks(a.EBOOK)}},"eBook"),l.default.createElement("li",{className:this.getHeaderStyles("print",this.state.bookType,a.PRINT,this.state.bookTypeEnabled),onClick:function(){return t.onFilterPrintDonughtBooks(a.PRINT)}},"Print"))))),l.default.createElement("div",{className:"table-responsive table-site"},l.default.createElement("div",{className:"table-responsive table-site analytics-mar30 "},this.state.renderData&&l.default.createElement("table",{className:"table"},l.default.createElement("tbody",null,this.state.bookType==d.BOOK_TYPES.PRINT&&l.default.createElement("tr",{className:"printBook"},l.default.createElement("th",{style:{textAlign:"left",width:"45%"}},"URL"),l.default.createElement("th",{style:{textAlign:"left"}},"CHANNEL"),l.default.createElement("th",{style:{textAlign:"right"}},"VIEWS")),this.state.bookType==d.BOOK_TYPES.EBOOK&&l.default.createElement("tr",{className:"eBook"},l.default.createElement("th",{style:{textAlign:"left",width:"45%"}},"URL"),l.default.createElement("th",{style:{textAlign:"left"}},"CHANNEL"),l.default.createElement("th",{style:{textAlign:"right"}},"VIEWS")),this.state.bookType==d.BOOK_TYPES.ALL&&l.default.createElement("tr",{className:"allBook"},l.default.createElement("th",{style:{textAlign:"left",width:"45%"}},"URL"),l.default.createElement("th",{style:{textAlign:"left"}},"CHANNEL"),l.default.createElement("th",{style:{textAlign:"right"}},"VIEWS")),r&&r.map(function(e,t){var a=e.channel,n=e.views,o=e.referringPageUrl;return l.default.createElement("tr",{key:t},l.default.createElement("td",{style:{textAlign:"left",width:"45%"}},o),l.default.createElement("td",{style:{textAlign:"left"}},a),l.default.createElement("td",{style:{textAlign:"right"}},n.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")))})))),this.state.hasData&&l.default.createElement("div",{className:"table-responsive table-site  "},l.default.createElement("table",{className:"table no-data-table"},l.default.createElement("tbody",null,this.state.bookType==d.BOOK_TYPES.PRINT&&l.default.createElement("tr",{className:"printBook"},l.default.createElement("th",{style:{textAlign:"left",width:"45%"}},"URL"),l.default.createElement("th",{style:{textAlign:"left"}},"CHANNEL"),l.default.createElement("th",{style:{textAlign:"right"}},"VIEWS")),this.state.bookType==d.BOOK_TYPES.EBOOK&&l.default.createElement("tr",{className:"eBook"},l.default.createElement("th",{style:{textAlign:"left",width:"45%"}},"URL"),l.default.createElement("th",{style:{textAlign:"left"}},"CHANNEL"),l.default.createElement("th",{style:{textAlign:"right"}},"VIEWS")),this.state.bookType==d.BOOK_TYPES.ALL&&l.default.createElement("tr",{className:"allBook"},l.default.createElement("th",{style:{textAlign:"left",width:"45%"}},"URL"),l.default.createElement("th",{style:{textAlign:"left"}},"CHANNEL"),l.default.createElement("th",{style:{textAlign:"right"}},"VIEWS")),l.default.createElement("tr",null))),l.default.createElement("div",{className:"edgeCaseText"},this.state.bookType==d.BOOK_TYPES.ALL&&!this.props.ean&&!this.state.loadingTable&&l.default.createElement("div",{className:"edgeCaseTextStyle"},l.default.createElement("p",null,"You currently don't have visitors by domain data")),(this.props.ean||this.state.bookType==d.BOOK_TYPES.EBOOK||this.state.bookType==d.BOOK_TYPES.PRINT)&&!this.state.loadingTable&&l.default.createElement("div",{className:"edgeCaseTextStyle"},l.default.createElement("p",{className:"searchTermStyle"},"We found no data matching your search criteria"),l.default.createElement("p",null,"Search Term:",l.default.createElement("strong",null,o)),l.default.createElement("p",null,"Book Type:",l.default.createElement("strong",null,n))))),this.state.seeEntireList&&l.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 site_data_text_align"},l.default.createElement("a",{className:"Whats-This",onClick:function(){return t.onSeeEntireList("/"+u.Base+"/"+u.SiteDataEntireList)}}," See entire list "))),this.state.loadingTable&&l.default.createElement("div",{className:"spinner-area"},l.default.createElement(m.default,null)),this.state.loading&&l.default.createElement("div",{className:"spinner-area"},l.default.createElement(m.default,{top:40})),this.props.loader&&l.default.createElement("div",{className:"spinner-area"},l.default.createElement(m.default,null)))}}])&&y(t.prototype,a),n&&y(t,n),o}();t.default=E},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(a(0)),r=a(2),f=n(a(68)),u=n(a(109)),c=o(a(4)),d=o(a(6)),p=n(a(11)),l=n(a(84)),i=n(a(60)),m=o(a(38)),h=o(a(46)),y=o(a(74)),b=o(a(61)),g=o(a(3)),v=o(a(51)),E=o(a(1)),S=n(a(57)),k=o(a(135)),P=n(a(75));a(7);function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var T=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=C(o).call(this,e))||"object"!==w(n)&&"function"!=typeof n?_(a):n).state={bookPageVisitorList:"",bookTypeEnabled:!0,bookType:S.BOOK_TYPES.ALL,seeEntireList:!1,ean:"",eaaSearchStatus:!0,isSearched:!1,filterOption:l.FILTER_PARAMS.default,data:"WHAT IS SITE DATA? ",loadingPage:!1,loadingTable:!1,eaaSubscriptionData:"",definition:"This section gives you insight into how customers find your BN.com book product pages â€“ where they come from and how they get there. We'll also show you how your book converts customers on our site."},t.isEmpty=t.isEmpty.bind(_(_(t))),t.getHeaderStyles=t.getHeaderStyles.bind(_(_(t))),t.onFilterAllDonughtBooks=t.onFilterAllDonughtBooks.bind(_(_(t))),t.onFilterEBookDonughtBooks=t.onFilterEBookDonughtBooks.bind(_(_(t))),t.onFilterPrintDonughtBooks=t.onFilterPrintDonughtBooks.bind(_(_(t))),t.onBookPageVistorLoaded=t.onBookPageVistorLoaded.bind(_(_(t))),t.onClickReadingData=t.onClickReadingData.bind(_(_(t))),t.onClickSiteData=t.onClickSiteData.bind(_(_(t))),t.onClickCustomerData=t.onClickCustomerData.bind(_(_(t))),t.onSuggestionSelected=t.onSuggestionSelected.bind(_(_(t))),t.eaaSubscriptionLoaded=t.eaaSubscriptionLoaded.bind(_(_(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(o,s.default.Component),t=o,(a=[{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"onFilterAllDonughtBooks",value:function(e){var t={ean:this.props.ean,projectType:"ALL"};f.getBookPageVisitorByDomain(t),this.state.bookTypeEnabled&&e!==this.state.bookType?this.setState({bookType:e,loadingTable:!0,loadingPage:!1}):this.setState({loadingTable:!1})}},{key:"onFilterEBookDonughtBooks",value:function(e){var t={ean:this.props.ean,projectType:"EBOOK"};f.getBookPageVisitorByDomain(t),this.state.bookTypeEnabled&&e!==this.state.bookType?this.setState({bookType:e,loadingTable:!0,loadingPage:!1}):this.setState({loadingTable:!1})}},{key:"onFilterPrintDonughtBooks",value:function(e){var t={ean:this.props.ean,projectType:"SPB"};f.getBookPageVisitorByDomain(t),this.state.bookTypeEnabled&&e!==this.state.bookType?this.setState({bookType:e,loadingTable:!0,loadingPage:!1}):this.setState({loadingTable:!1})}},{key:"getHeaderStyles",value:function(e,t,a,n){return n=v.default.hasUserPublishedBefore()&&n,(0,E.default)(e,{"active-selection":t===a})}},{key:"onSuggestionSelected",value:function(e){var t=this,a=document.getElementsByClassName("project-list-search")[0].getElementsByClassName("input-area")[0],n=a.getElementsByTagName("input")[0].value,o=a.getElementsByTagName("input")[0].id;if(document.getElementsByClassName(o).length&&"no match"==document.getElementsByClassName(o)[0].firstElementChild.innerText.toLowerCase())return a.getElementsByTagName("input")[0].value="",document.getElementById(o).parentElement.parentElement.classList.add("error"),document.getElementById(o).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.classList.add("nomatch-active"),document.getElementById(o).parentElement.parentElement.querySelector(".message").innerHTML="Please search for your Title, ISBN or Series",setTimeout(function(){a.getElementsByTagName("input")[0].value=""},500),document.getElementsByClassName(o)[0].parentElement.parentElement.style.display="none",!0;if((null==e||""==e.newValue)&&""==n){f.getBookPageVisitorByDomain({ean:"",projectType:"ALL"}),this.setState({ean:""})}else{var r,l=e&&e.currentTarget?e.currentTarget.parentNode.firstElementChild.lastElementChild.lastElementChild.lastElementChild.firstElementChild.firstElementChild:null,i=null!==l?l.innerText:"";if(void 0===e)return;if(r=void 0===e.newValue?i:e.newValue,e&&e.currentTarget){var s=document.getElementsByClassName("options-dropdown")[0].getElementsByTagName("UL")[0].getElementsByTagName("LI")[0],u=e.currentTarget.parentNode.firstElementChild.lastElementChild.firstElementChild.value;if(void 0!==s)s.click();else if(""!==u&&null==s)return}if(""!==r){var c=m.default.findProjectForEaa(r);if(null!=c){var d={ean:c.title,projectType:"ALL"};f.getBookPageVisitorByDomain(d),this.setState({loadingPage:!0,ean:c.title}),setTimeout(function(){t.setState({loadingPage:!1})},3e3)}}else{f.getBookPageVisitorByDomain({ean:"",projectType:"ALL"}),this.setState({ean:""})}}this.setState({isSearched:!0}),this.forceUpdate()}},{key:"componentWillMount",value:function(){var e=this;y.default.addBookPageVisitorListener(this.onBookPageVistorLoaded),k.default.addEaaSubscriptionListener(this.eaaSubscriptionLoaded),this.setState({loadingPage:!0}),setTimeout(function(){e.setState({loadingPage:!1})},3e3)}},{key:"componentDidMount",value:function(){if(P.getEaaSubscription(),i.loadEaaSearches(this.state.filterOption),this.props.location.state){var e={ean:this.props.location.state.searchBook?this.props.location.state.searchBook:"",projectType:this.props.location.state.bookType?this.props.location.state.bookType:"ALL"};f.getBookPageVisitorByDomain(e)}else{f.getBookPageVisitorByDomain({ean:"",projectType:"ALL"})}}},{key:"componentWillUnmount",value:function(){k.default.removeEaaSubscriptionListener(this.eaaSubscriptionLoaded),y.default.removeBookPageVisitorListener(this.onBookPageVistorLoaded)}},{key:"onBookPageVistorLoaded",value:function(){var e=y.default.bookPageVisitor();this.isEmpty(e.result)?this.setState({renderData:!1,hasData:!0,loadingTable:!1,seeEntireList:!1}):this.setState({bookPageVisitorList:e,renderData:!0,hasData:!1,loadingTable:!1})}},{key:"onClickCustomerData",value:function(e){r.browserHistory.push(e)}},{key:"onClickReadingData",value:function(e){r.browserHistory.push(e)}},{key:"onClickSiteData",value:function(e){r.browserHistory.push(e)}},{key:"onSeeEntireList",value:function(e){r.browserHistory.push({pathname:e,state:{searchBook:this.state.isSearched?this.state.ean:this.props.location.state.searchBook,bookType:"ALL"}}),setTimeout(function(){document.getElementById("on-go-back").scrollIntoView()},1e3)}},{key:"eaaSubscriptionLoaded",value:function(){var e=k.default.eaaSubscription();this.setState({eaaSubscriptionData:e})}},{key:"parseMillisecondsIntoReadableTime",value:function(e){var t=e/36e5,a=Math.floor(t),n=9<a?a:"0"+a,o=60*(t-a),r=Math.floor(o),l=9<r?r:"0"+r,i=60*(o-r);Math.floor(i);return n+"hours,  "+l+"minutes"}},{key:"render",value:function(){var e,t,a=this;this.state.eaaSubscriptionData&&(e=this.state.eaaSubscriptionData.result,t=new Date(e.resetDate).getTime()-(new Date).getTime());var n,o=S.BOOK_TYPES,r=this.state.ean?this.state.ean:"None Provided";n=this.state.bookType==S.BOOK_TYPES.EBOOK?"eBooks":this.state.bookType==S.BOOK_TYPES.ALL?"All Books":"Print Books";var l,i;return this.state.bookPageVisitorList&&(l=this.state.bookPageVisitorList.result.siteDataList),i=!!c.default.hasEaaPermission()&&c.default.hasEaaPermission().includes(p.SITE),s.default.createElement("div",null,i&&s.default.createElement("div",{className:"left-sidebar-wrapper analytics-layout"},s.default.createElement("div",{className:"left-sidebar-container projects"},s.default.createElement("header",{className:"sidelines"},s.default.createElement("h1",null,"My Analytics Dashboard")),s.default.createElement("div",{className:"sidebar-left"},s.default.createElement("div",{className:"customer-display"},c.default.hasEaaPermission().includes(p.CUSTOMER)&&s.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return a.onClickCustomerData("/"+u.Base)}},s.default.createElement("span",null,"Customer Data")),c.default.hasEaaPermission().includes(p.READING)&&s.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return a.onClickReadingData("/"+u.Base+"/"+u.ReadingData)}},s.default.createElement("span",null,"Reading Data")),c.default.hasEaaPermission().includes(p.SITE)&&s.default.createElement("div",{className:"btn btn-new-project-analytics btn-block",onClick:function(){return a.onClickSiteData("/"+u.Base+"/"+u.SiteData)}},s.default.createElement("span",null,"Site Data"))),s.default.createElement("div",{className:" m-0 p-0  mobile-display"},c.default.hasEaaPermission().includes(p.CUSTOMER)&&s.default.createElement("div",{className:"col-33"},s.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return a.onClickCustomerData("/"+u.Base)}},s.default.createElement("span",null,"Customer Data"))),c.default.hasEaaPermission().includes(p.READING)&&s.default.createElement("div",{className:"col-33"},s.default.createElement("div",{className:"btn btn-secondary-analytics btn-block",onClick:function(){return a.onClickReadingData("/"+u.Base+"/"+u.ReadingData)}},s.default.createElement("span",null,"Reading Data"))),c.default.hasEaaPermission().includes(p.SITE)&&s.default.createElement("div",{className:"col-33"},s.default.createElement("div",{className:"btn btn-new-project-analytics btn-block",onClick:function(){return a.onClickSiteData("/"+u.Base+"/"+u.SiteData)}},s.default.createElement("span",null,"Site Data")))),s.default.createElement("div",{className:"analytics-mar30 analytics-mar30-mobile"},s.default.createElement("p",{className:"analytics-data-text"},this.state.data),s.default.createElement("p",{className:"analytics-data-define"},this.state.definition," "),s.default.createElement("p",{className:"analytics-data-define"},"Please Note: This information derives from the last 2 years of data."),s.default.createElement("div",{className:"searches-remaining"},s.default.createElement("span",{className:"searches-remaining-bold"},e&&parseInt(e.dailyLimit)-parseInt(e.usageCount))," SEARCHES REMAINING",s.default.createElement("p",{className:"search-remaining-text"},"Search limit is based on incurred costs on B&N Press when processing data feeds."),s.default.createElement("p",{className:"search-reset"},"Searches Reset: ",e&&e.resetDate&&t?this.parseMillisecondsIntoReadableTime(t):"")," "))),s.default.createElement("div",{className:"content-right  container siteDataStyles"},s.default.createElement("div",{className:" col-sm-12 project-list-search project-sort-options search-box search-icon-eaa"},s.default.createElement(d.default,null,s.default.createElement(h.default,{label:"Search Book by Title, ISBN, Series",ref:"projectSearch",defaultDropdownSelection:!0,initValue:this.props.location.state?this.props.location.state.searchBook:"",filterOption:this.state.filterOption,onSubmit:this.onSuggestionSelected,eaaSearch:this.state.eaaSearchStatus,noValue:"true"}))),s.default.createElement("div",{className:" analytics-margin padding10"},s.default.createElement("div",{className:"article-main"},s.default.createElement("div",{className:"analytics-margin-top"},s.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12"},s.default.createElement("a",{className:"go-back",onClick:function(){return a.onSeeEntireList("/"+u.Base+"/"+u.SiteData)}},"<",s.default.createElement("span",{className:"UnderlineGoBack"},"Go Back"),"  ")),s.default.createElement("h3",{className:"tooltip-description"},"Your Book Detail Page Visitors by Domain"),s.default.createElement(b.default,{info:!0,text:"This section shows shows different URLs, channels through which customers arrived at your books and number of clicks for each such URLs.",trigger:"focus"},s.default.createElement("span",{className:"Whats-This"},"What's This?"))),s.default.createElement("div",{className:"widget margin-widget"},s.default.createElement("div",{className:"widget-panel-content"},s.default.createElement("div",{className:"controls clearfix"},s.default.createElement("ul",{className:"book-type"},s.default.createElement("li",{className:this.getHeaderStyles("all-books",this.state.bookType,o.ALL,this.state.bookTypeEnabled),onClick:function(){return a.onFilterAllDonughtBooks(o.ALL)}},"All Books"),s.default.createElement("li",{className:this.getHeaderStyles("ebook",this.state.bookType,o.EBOOK,this.state.bookTypeEnabled),onClick:function(){return a.onFilterEBookDonughtBooks(o.EBOOK)}},"eBook"),s.default.createElement("li",{className:this.getHeaderStyles("print",this.state.bookType,o.PRINT,this.state.bookTypeEnabled),onClick:function(){return a.onFilterPrintDonughtBooks(o.PRINT)}},"Print"))))),s.default.createElement("div",{className:"table-responsive table-site analytics-mar30 "},this.state.renderData&&s.default.createElement("table",{className:"table"},s.default.createElement("tbody",null,this.state.bookType==S.BOOK_TYPES.PRINT&&s.default.createElement("tr",{className:"printBook"},s.default.createElement("th",{style:{textAlign:"left",width:"45%"}},"URL"),s.default.createElement("th",{style:{textAlign:"left"}},"CHANNEL"),s.default.createElement("th",{style:{textAlign:"right"}},"VIEWS")),this.state.bookType==S.BOOK_TYPES.EBOOK&&s.default.createElement("tr",{className:"eBook"},s.default.createElement("th",{style:{textAlign:"left",width:"45%"}},"URL"),s.default.createElement("th",{style:{textAlign:"left"}},"CHANNEL"),s.default.createElement("th",{style:{textAlign:"right"}},"VIEWS")),this.state.bookType==S.BOOK_TYPES.ALL&&s.default.createElement("tr",{className:"allBook"},s.default.createElement("th",{style:{textAlign:"left",width:"45%"}},"URL"),s.default.createElement("th",{style:{textAlign:"left"}},"CHANNEL"),s.default.createElement("th",{style:{textAlign:"right"}},"VIEWS")),l&&l.map(function(e,t){var a=e.channel,n=e.views,o=e.referringPageUrl;return s.default.createElement("tr",{key:t},s.default.createElement("td",{style:{textAlign:"left",width:"45%"}},o),s.default.createElement("td",{style:{textAlign:"left"}},a),s.default.createElement("td",{style:{textAlign:"right"}},n.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")))}))),this.state.hasData&&s.default.createElement("div",{className:"table-responsive table-site sitemin"},s.default.createElement("table",{className:"table"},s.default.createElement("tbody",null,this.state.bookType==S.BOOK_TYPES.PRINT&&s.default.createElement("tr",{className:"printBook"},s.default.createElement("th",{style:{textAlign:"left",width:"45%"}},"URL"),s.default.createElement("th",{style:{textAlign:"left"}},"CHANNEL"),s.default.createElement("th",{style:{textAlign:"right"}},"VIEWS")),this.state.bookType==S.BOOK_TYPES.EBOOK&&s.default.createElement("tr",{className:"eBook"},s.default.createElement("th",{style:{textAlign:"left",width:"45%"}},"URL"),s.default.createElement("th",{style:{textAlign:"left"}},"CHANNEL"),s.default.createElement("th",{style:{textAlign:"right"}},"VIEWS")),this.state.bookType==S.BOOK_TYPES.ALL&&s.default.createElement("tr",{className:"allBook"},s.default.createElement("th",{style:{textAlign:"left",width:"45%"}},"URL"),s.default.createElement("th",{style:{textAlign:"left"}},"CHANNEL"),s.default.createElement("th",{style:{textAlign:"right"}},"VIEWS")))),s.default.createElement("div",{className:"edgeCaseText"},this.state.bookType==S.BOOK_TYPES.ALL&&!this.state.ean&&!this.state.loadingTable&&!this.state.loadingPage&&s.default.createElement("div",{className:"edgeCaseTextStyle"},s.default.createElement("p",null,"You currently don't have visitors by domain data")),(this.state.ean||this.state.bookType==S.BOOK_TYPES.EBOOK||this.state.bookType==S.BOOK_TYPES.PRINT)&&!this.state.loadingTable&&!this.state.loadingPage&&s.default.createElement("div",{className:"edgeCaseTextStyle"},s.default.createElement("p",{className:"searchTermStyle"},"We found no data matching your search criteria"),s.default.createElement("p",null,"Search Term:",s.default.createElement("strong",null,r)),s.default.createElement("p",null,"Book Type:",s.default.createElement("strong",null,n)))))))),s.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 sticky"},s.default.createElement("a",{className:"entireList ",onClick:function(){return a.onSeeEntireList("/"+u.Base+"/"+u.SiteData)}}," < ",s.default.createElement("span",{className:"UnderlineGoBack"},"Go Back")," ")))),this.state.loadingTable&&s.default.createElement("div",{className:"spinner-area"},s.default.createElement(g.default,{top:700,right:1e3})),this.state.loadingPage&&s.default.createElement("div",{className:"spinner-area"},s.default.createElement(g.default,{top:700,right:1e3}))),!i&&s.default.createElement("div",{className:"no-permission"},"Oops you don't have permission to access this page"))}}])&&O(t.prototype,a),n&&O(t,n),o}();t.default=T},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(0)),o=r(a(13)),i=(a(2),r(a(1))),s=r(a(4)),u=n(a(26)),c=r(a(121)),d=n(a(25)),f=r(a(1691)),p=r(a(638)),m=r(a(639)),h=n(a(48)),y=r(a(45)),b=r(a(34)),g=r(a(3)),v=r(a(147)),E=r(a(192)),S=n(a(31)),k=n(a(10)),P=n(a(11)),w=n(a(17)),O=n(a(14)),C=r(a(8));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,o=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function T(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var L=function(e){function r(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a=this,t=!(n=D(r).call(this,e))||"object"!==N(n)&&"function"!=typeof n?M(a):n;var o=s.default.getProfile();return t.state={loaded:!1,isSaving:!1,errorMessages:[],refreshingPublisher:!1,profile:o,refreshingPayment:!1,vendorStatus:"",errorClass:!1,pageBanner:!1},t.onProfileLoaded=t.onProfileLoaded.bind(M(M(t))),t.scrollToTop=t.scrollToTop.bind(M(M(t))),t.onVendorInfoLoaded=t.onVendorInfoLoaded.bind(M(M(t))),t.onPublisherInfoLoaded=t.onPublisherInfoLoaded.bind(M(M(t))),t.onPaymentInfoLoaded=t.onPaymentInfoLoaded.bind(M(M(t))),t.onPaymentErrorsReceived=t.onPaymentErrorsReceived.bind(M(M(t))),t.onTaxBankFormError=t.onTaxBankFormError.bind(M(M(t))),t.onErrorAlertClosed=t.onErrorAlertClosed.bind(M(M(t))),t.onSubmitPublisherForm=t.onSubmitPublisherForm.bind(M(M(t))),t.onSubmitPaymentForm=t.onSubmitPaymentForm.bind(M(M(t))),t.clearProgress=t.clearProgress.bind(M(M(t))),t.w9SpinnerOff=t.w9SpinnerOff.bind(M(M(t))),t.getBanners=t.getBanners.bind(M(M(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(r,l.default.Component),t=r,(a=[{key:"componentDidMount",value:function(){h.loadVendorInfo(),this.state.profile||u.loadProfile();var e={eventInfo:{eventName:"Page View",eventAction:"pageView",timeStamp:new Date},category:{primaryCategory:"Pages"},attributes:{page:{pageInfo:{previousPageName:null,pageName:"bn press|vendor-account",pageType:"bn press:vendor account",destinationURL:window.location.href,referringURL:null}}}};d.omnitureActionInvoked(e,"onPageView"),setTimeout(function(){O.getPageBanners()},500)}},{key:"componentWillMount",value:function(){y.default.addVendorInfoLoadedListener(this.onVendorInfoLoaded),s.default.addProfileLoadedListener(this.onProfileLoaded),y.default.addPublisherInfoLoadedListener(this.onPublisherInfoLoaded),y.default.addPaymentInfoLoadedListener(this.onPaymentInfoLoaded),y.default.addPaymentErrorsReceivedListener(this.onPaymentErrorsReceived),C.default.addPageBannersListener(this.getBanners)}},{key:"componentWillUnmount",value:function(){y.default.removeVendorInfoLoadedListener(this.onVendorInfoLoaded),s.default.removeProfileLoadedListener(this.onProfileLoaded),y.default.removePublisherInfoLoadedListener(this.onPublisherInfoLoaded),y.default.removePaymentInfoLoadedListener(this.onPaymentInfoLoaded),y.default.removePaymentErrorsReceivedListener(this.onPaymentErrorsReceived),C.default.removePageBannersListener(this.getBanners),setTimeout(function(){h.resetVendorInfo()},0),d.pageNameChanged("bn press|vendor-account")}},{key:"getBanners",value:function(){var e=C.default.banners();this.setState({pageBanner:e.data.setting[1].SettingValue,pageBannerColor:e.data.setting[1].SettingId});var t=e.data.setting[1].SettingId.split("|");if(2==t.length){var a=_(t,2),n=a[0],o=a[1];this.setState({SettingId1:n,SettingId2:"true"===o})}}},{key:"scrollToTop",value:function(){(0,o.default)(window).scrollTop(0)}},{key:"clearProgress",value:function(){this.setState({isSaving:!1})}},{key:"onProfileLoaded",value:function(){this.setState({profile:s.default.getProfile()})}},{key:"w9SpinnerOff",value:function(){this.setState({loaded:!0,isSaving:!1})}},{key:"onVendorInfoLoaded",value:function(){var e=s.default.getUser();this.setState({loaded:!0}),"Yes"==y.default.getW8Message().mismatch?this.setState({vendorStatus:"Existing",errorClass:!0}):this.setState({vendorStatus:e.vendorStatus});var t=!!y.default.vendorFormDetail.payment&&y.default.vendorFormDetail.payment;!1===t||"Not Submitted"!=t.wFileStatus&&"Update Required"!=t.wFileStatus&&"A new form with your updated personal information is required"!=t.wFileStatus?0==t&&this.setState({errorClass:!0}):this.setState({errorClass:!0})}},{key:"onPublisherInfoLoaded",value:function(){var e=this,t=this.state.isSaving;this.setState({refreshingPublisher:!0},function(){setTimeout(function(){e.setState({refreshingPublisher:!1,isSaving:!1},function(){t&&setTimeout(function(){return S.toggleToast(!0,"Changes Saved")},0)})},500)})}},{key:"onPaymentInfoLoaded",value:function(){var e=this,t=this.state.isSaving;this.setState({refreshingPayment:!0},function(){setTimeout(function(){e.setState({refreshingPayment:!1,isSaving:!1},function(){t&&setTimeout(function(){return S.toggleToast(!0,"Changes Saved")},0)})},500)})}},{key:"onSubmitPublisherForm",value:function(){this.setState({errorMessages:[],isSaving:!0})}},{key:"onSubmitPaymentForm",value:function(){this.setState({errorMessages:[],isSaving:!0})}},{key:"onTaxBankFormError",value:function(e){this.setState({errorMessages:[e],isSaving:!1}),this.scrollToTop()}},{key:"onPaymentErrorsReceived",value:function(e,t){this.setState({errorMessages:[e[0].description],isSaving:!1});var a=t.errors[0].code,n=t.paymentInfo,o=this.state.profile;n.updateType="tax and bank Information",1077!=a&&1082!=a&&1083!=a&&1084!=a||!w.hasFeatureFlag(P.TWO_F_A_AUTH)||(setTimeout(function(){k.TwoFaProfileModal(n,o,a)},0),this.setState({isSaving:!1}))}},{key:"onErrorAlertClosed",value:function(){this.setState({errorMessages:[]})}},{key:"parseHTMLString",value:function(e){for(var t,a=/<b>(.*?)<\/b>/g,n=[],o=0;null!==(t=a.exec(e));)t.index>o&&n.push(e.slice(o,t.index)),n.push(l.default.createElement("b",{key:t.index},t[1])),o=a.lastIndex;return o<e.length&&n.push(e.slice(o)),n}},{key:"render",value:function(){var e=s.default.getUser();return l.default.createElement("div",{className:"left-sidebar-wrapper overlay-parent"},!e.authorShareKey&&l.default.createElement("div",{className:"left-sidebar-container vendor-account page-scroller"},l.default.createElement("div",{className:(0,i.default)("extra-overlay ",{"overlay-container":this.state.SettingId2})},"Â "),this.state.pageBanner&&l.default.createElement("div",{className:(0,i.default)("extra-color-vendor ",{"color-container-vendor":this.state.pageBanner})},l.default.createElement(b.default,{messages:[this.parseHTMLString(this.state.pageBanner)],type:"alert"})),this.state.vendorStatus&&l.default.createElement(E.default,{status:this.state.vendorStatus}),0<this.state.errorMessages.length&&l.default.createElement(b.default,{dismissable:!0,messages:this.state.errorMessages,type:"error",onClose:this.onErrorAlertClosed}),l.default.createElement("header",{className:"sidelines"},l.default.createElement("h1",null,"My Vendor Account")),l.default.createElement("div",{className:"sidebar-left"},l.default.createElement(c.default,null),l.default.createElement(v.default,{contentIdentifier:"vendor-account"})),l.default.createElement("div",{className:(0,i.default)("content-right ",{"error-border-parent":this.state.errorClass})},(!this.state.loaded||this.state.isSaving)&&l.default.createElement(g.default,{top:100}),this.state.loaded&&l.default.createElement("div",{className:"panel"},l.default.createElement("div",{className:"panel-body"},l.default.createElement("div",{className:"vendor-section"},l.default.createElement(f.default,null)),!this.state.refreshingPublisher&&l.default.createElement("div",{className:"vendor-section"},l.default.createElement(p.default,{ref:"publisherForm",onSubmit:this.onSubmitPublisherForm,forBaB:!1})),!this.state.refreshingPayment&&l.default.createElement("div",{className:"vendor-section"},l.default.createElement(m.default,{ref:"taxAndBankForm",forBaB:!1,profile:this.state.profile,clearProgress:this.clearProgress,onSubmit:this.onSubmitPaymentForm,onError:this.onTaxBankFormError,parentMethod:this.w9SpinnerOff})))))),e.authorShareKey&&l.default.createElement("div",{className:"no-permission"},"You don't have access to this page."))}}])&&T(t.prototype,a),n&&T(t,n),r}();t.default=L},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),l=o(a(1)),i=o(a(80)),s=o(a(45)),u=o(a(56)),c=n(a(11)),d=n(a(17));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=m(o).call(this,e))||"object"!==f(n)&&"function"!=typeof n?y(a):n).state={status:s.default.loaded?s.default.toDisplayAccountStatus(s.default.accountStatus):null,vendorNum:s.default.loaded?s.default.vendorNumber:null,userInfo:s.default.loaded?s.default.vendorFormDetail:null,citizen:s.default.loaded?s.default.citizen:null,W8and9FeatureFlagValue:d.hasFeatureFlag(c.NEW_W_MANAGEMENT)},t.getAddTaxFormType=t.getAddTaxFormType.bind(y(y(t))),t.onVendorInfoChanged=t.onVendorInfoChanged.bind(y(y(t))),t.onPaymentInfoChanged=t.onPaymentInfoChanged.bind(y(y(t))),t.onCitizenChanged=t.onCitizenChanged.bind(y(y(t))),t.fileFormUploadData=t.fileFormUploadData.bind(y(y(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){s.default.addPublisherInfoLoadedListener(this.onVendorInfoChanged),s.default.addPaymentInfoLoadedListener(this.onPaymentInfoChanged),s.default.addCitizenChangedListener(this.onCitizenChanged),u.default.addFormFileUploadListener(this.fileFormUploadData)}},{key:"componentWillUnmount",value:function(){s.default.removePublisherInfoLoadedListener(this.onVendorInfoChanged),s.default.removePaymentInfoLoadedListener(this.onPaymentInfoChanged),s.default.removeCitizenChangedListener(this.onCitizenChanged),u.default.removeFormFileUploadListener(this.fileFormUploadData)}},{key:"getAddTaxFormType",value:function(){return"yes"===this.state.citizen?"W-9":"W-8"}},{key:"onVendorInfoChanged",value:function(){this.setState({status:s.default.toDisplayAccountStatus(s.default.accountStatus)})}},{key:"onPaymentInfoChanged",value:function(){this.setState({status:s.default.toDisplayAccountStatus(s.default.accountStatus)})}},{key:"fileFormUploadData",value:function(e){var t=e;t.data&&this.setState({userInfo:{payment:t.data}})}},{key:"onCitizenChanged",value:function(e){this.setState({citizen:e.citizen})}},{key:"render",value:function(){var e=s.default.statusMessage,t=this.getAddTaxFormType();return r.default.createElement("div",null,r.default.createElement("div",{className:"section-header",style:{marginTop:"36px"}},r.default.createElement("h2",null,"Vendor Status")),r.default.createElement("div",{className:"section-detail with-extra-margin-power"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},"Vendor Number: ",this.state.vendorNum)),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},"Vendor Account Status: ",r.default.createElement("span",{className:(0,l.default)("vendor-status",s.default.accountStatus?s.default.accountStatus.toLowerCase():"")},this.state.status),("In Review"==this.state.status||"Incomplete"==this.state.status)&&r.default.createElement("span",null," ",r.default.createElement("span",null," Â "),r.default.createElement(i.default,{info:!0,isHtml:!0,text:"Incomplete"==this.state.status?"Your vendor registration is incomplete. Fill out the Taxpayer and Banking Information below to start selling books.":"In Review"==this.state.status?e.message:"We are unable to approve your vendor account because of a mismatch with your tax and bank information. Please enter the information again and resubmit for verification."})))),this.state.W8and9FeatureFlagValue&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},"Taxpayer and Banking Information: ",r.default.createElement("span",{className:"vendor-bold"},"Incomplete"==this.state.status&&"Not Submitted",("Pending"==this.state.status||"In Review"==this.state.status)&&"Submitted (Pending Approval)","Active"==this.state.status&&"Approved","Rejected"==this.state.status&&"Rejected"))),this.state.W8and9FeatureFlagValue&&this.state.citizen&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},"Form ",t,": ",r.default.createElement("span",{className:"vendor-bold"},this.state.userInfo.payment&&this.state.userInfo.payment.wFileStatus?this.state.userInfo.payment.wFileStatus:"Not Submitted"))),e&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("div",{className:"status-message",dangerouslySetInnerHTML:{__html:e.message}})))))}}])&&p(t.prototype,a),n&&p(t,n),o}();t.default=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(a(0)),i=(n(a(32)),l(a(4))),r=l(a(217)),s=n(a(11)),u=n(a(10)),c=(n(a(25)),n(a(218)),l(a(29))),d=l(a(8)),f=n(a(14)),p=l(a(39)),m=l(a(3)),h=(l(a(34)),l(a(50)));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=function(e){function l(e){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a=this,t=!(n=g(l).call(this,e))||"object"!==y(n)&&"function"!=typeof n?E(a):n;var o=d.default.project(),r=i.default.getUser();return t.state={checked:null==o.sampleIds,progressModal:!1,projectLoaded:!1,saveBefore:!0,XUserId:r.customerId},t.hasFormChanged=t.hasFormChanged.bind(E(E(t))),t.onPreviewLoaded=t.onPreviewLoaded.bind(E(E(t))),t.selectSampleLoaded=t.selectSampleLoaded.bind(E(E(t))),t.showProgressModal=t.showProgressModal.bind(E(E(t))),t.onCustomNext=t.onCustomNext.bind(E(E(t))),t.onCustomBack=t.onCustomBack.bind(E(E(t))),t.onChapterSelected=t.onChapterSelected.bind(E(E(t))),t.bindEvents(),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(l,o.default.Component),t=l,(a=[{key:"bindEvents",value:function(){window.addEventListener("message",this.onChapterSelected,!1)}},{key:"onChapterSelected",value:function(e){"chapterSelected"==e.data&&this.setState({checked:!1,progressModal:!0,saveBefore:!1})}},{key:"componentWillMount",value:function(){d.default.addSampleSelectedListener(this.selectSampleLoaded)}},{key:"componentDidMount",value:function(){var e=d.default.project().id;f.loadProject(e),""!=e&&this.setState({projectLoaded:!0})}},{key:"componentWillUnmount",value:function(){d.default.removeSampleSelectedListener(this.selectSampleLoaded)}},{key:"selectSampleLoaded",value:function(){d.default.sampleSelected()}},{key:"onPreviewLoaded",value:function(){this.setState({loaded:!0})}},{key:"hasFormChanged",value:function(){return{unChanged:this.state.saveBefore?this.state.saveBefore:""}}},{key:"showProgressModal",value:function(e){u.showSelectProgressModal(e)}},{key:"onCustomNext",value:function(){var t=d.default.project();f.selectSamplePreview(t.id),setTimeout(function(){var e={id:t.id,projectType:t.type,projectElementType:"SAMPLE"};f.getPreflightStatus(e)},1e3);var e=t.interiorFile.split(".").slice(0,-1).join(".")+"_SAMPLE.epub";this.state.progressModal?this.showProgressModal(e):h.default.onSelectSampleSelection()}},{key:"onCustomBack",value:function(){h.default.onGoingSelectionBack()}},{key:"render",value:function(){var e=this,t=d.default.project();t.isEBook;return o.default.createElement("div",null,i.default.hasCustomSamplingPermission(s.BAB_CUSTOM_SAMPLE)&&o.default.createElement("div",{className:"review"},!this.state.projectLoaded&&o.default.createElement(m.default,null),o.default.createElement("header",null,o.default.createElement("h1",null,"Select Your Custom Sample Chapters"),o.default.createElement("div",null,o.default.createElement("p",null,"Follow the steps below to select and review your sample"))),o.default.createElement("section",{className:"iframe-section-padding"},o.default.createElement("div",{className:"preview ebook show"},this.renderPrintPreview())),o.default.createElement(c.default,{buttonText:"Save & Continue",disableNext:"PROCESSING_ONSALE"==t.status||this.state.checked,next:this.onCustomNext}),o.default.createElement(p.default,{data:function(){return e.hasFormChanged()}})))}},{key:"renderPrintPreview",value:function(){return o.default.createElement(r.default,{isSampleSelect:!0,XUserId:this.state.XUserId,onLoaded:this.onPreviewLoaded})}}])&&b(t.prototype,a),n&&b(t,n),l}();t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(a(0)),u=a(7),l=o(a(4)),c=n(a(11)),g=n(a(75)),r=o(a(135)),v=n(a(10)),d=a(245),i=n(a(31)),f=o(a(79)),p=o(a(3));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=y(o).call(this,e))||"object"!==m(n)&&"function"!=typeof n?E(a):n).state={tableData:"",enumDataList:"",enumValueList:[],definition:"My Contributors allows you to share work with your assistants. You control the pages and features they have access to; such as projects, sales reporting, promotions, etc. Your contributors will sign in using their own email and password credentials with your unique link, so no more sharing your sign-in information with others.",onPageloading:!1},t.onAddContributorClicked=t.onAddContributorClicked.bind(E(E(t))),t.acessEnumList=t.acessEnumList.bind(E(E(t))),t.onContributorAdded=t.onContributorAdded.bind(E(E(t))),t.onGettingContributorDetails=t.onGettingContributorDetails.bind(E(E(t))),t.buildReferralURL=t.buildReferralURL.bind(E(E(t))),t.onContributorUpdated=t.onContributorUpdated.bind(E(E(t))),t.onContributorDeleted=t.onContributorDeleted.bind(E(E(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,s.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){r.default.addAcessEnumListLoadedListener(this.acessEnumList),r.default.addContributorAddLoadedListener(this.onContributorAdded),r.default.addGetContributorAddLoadedListener(this.onGettingContributorDetails),r.default.addContributorUpdatedLoadedListener(this.onContributorUpdated),r.default.addContributorDeletedLoadedListener(this.onContributorDeleted),this.setState({onPageloading:!0})}},{key:"componentDidMount",value:function(){g.getAccessEnumValue(),g.getContributorDetails()}},{key:"componentWillUnmount",value:function(){r.default.removeAcessEnumListLoadedListener(this.acessEnumList),r.default.removeContributorAddLoadedListener(this.onContributorAdded),r.default.removeGetContributorAddLoadedListener(this.onGettingContributorDetails),r.default.removeContributorUpdatedLoadedListener(this.onContributorUpdated),r.default.removeContributorDeletedLoadedListener(this.onContributorDeleted)}},{key:"acessEnumList",value:function(){var e=r.default.accessEnumList(),t=[];e.result.enumData.map(function(e){return t.push({isChecked:!1,value:e.value,description:e.description,disable:!!e.parent})}),this.setState({enumDataList:e.result.enumData,enumValueList:t})}},{key:"onContributorAdded",value:function(){var e=r.default.contributorData();this.setState({tableData:e},function(){return setTimeout(function(){return i.toggleToast(!0,"Contributor Added")})})}},{key:"onContributorDeleted",value:function(){var e=r.default.contributorDeleted();this.setState({tableData:e},function(){return setTimeout(function(){return i.toggleToast(!0,"Contributor Deleted")})}),g.getContributorDetails(),this.setState({onPageloading:!0})}},{key:"onContributorUpdated",value:function(){var e=r.default.contributorUpdated();this.setState({tableData:e},function(){return setTimeout(function(){return i.toggleToast(!0,"Changes Saved")})})}},{key:"onCopy",value:function(){f.default.getToastStatus()||i.toggleToast(!0,"Link Copied to Clipboard")}},{key:"buildReferralURL",value:function(e){return e?location.protocol+"//"+location.hostname+"/contributor/?authorShareKey="+e:" "}},{key:"onGettingContributorDetails",value:function(){var e=r.default.contributorDetails();this.setState({tableData:e,onPageloading:!1})}},{key:"onAddContributorClicked",value:function(e,t,a,r){var n,o,l,i,s,u,c,d,f,p=this,m=this.state.enumValueList,h=!0;if(r){u=r.firstName,c=r.lastName,d=r.email,h=!1,f=r.id?r.id:"";var y=r.accessList.map(function(e){return e.access});n=!!y.includes("PROJECTS_SERIES")||"",o=!!y.includes("ORDER_COPIES")||"",l=!!y.includes("PROMOTIONS")||"",i=!!y.includes("SALES_REPORTS")||"",s=!!y.includes("AUTHOR_PAGES")||"";var b=[];m=[],this.state.enumDataList.map(function(e){var t=!1;return y.includes(e.value)&&(t=!0),b.push({isChecked:t,value:e.value,description:e.description,disable:!!e.parent})}),m=b}return v.showAddContributorModal(n,o,l,i,s,u,c,d,e,a,t,m,h,function(e,t){if(e)if(t.deleteContributor)g.deleteContributor(f);else{var a=[];d=t.email,u=t.firstName,c=t.lastName;var n,o=t.data;if(p.state.enumDataList.map(function(e){return o[e.value]&&a.push({access:e.value}),a}),d||u||c||a)f?(n={email:t.email?t.email:r.email,id:f,firstName:t.firstName?t.firstName:r.firstName,lastName:t.lastName?t.lastName:r.lastName,accessList:a},g.updateContributorAccess(n)):(n={email:t.email,firstName:t.firstName,lastName:t.lastName,accessList:a},g.provideContributorAccess(n))}}),!1}},{key:"render",value:function(){var e,i=this;this.state.tableData&&(t=this.state.tableData.result.data,e=this.state.tableData.result.authorShareKey);var t,a=this.buildReferralURL(e),n="Add Contributor",o="Add a Contributor",r="Cancel";return s.default.createElement("div",{className:"left-sidebar-wrapper analytics-layout"},l.default.hasSharedAccessPermission(c.SHARED_ACCESS)&&s.default.createElement("div",{className:"left-sidebar-container projects"},s.default.createElement("header",{className:"sidelines"},s.default.createElement("h1",null,"My Contributors")),s.default.createElement("div",{className:"sidebar-left"},s.default.createElement("div",{className:"customer-display"},s.default.createElement("div",{className:"btn btn-new-project-analytics btn-block",onClick:function(){return i.onAddContributorClicked(n,o,r)}},s.default.createElement("span",null,"+ Add a Contributor"))),s.default.createElement("div",{className:" mobile-display"},s.default.createElement("div",{className:"btn  btn-new-contributor btn-block",onClick:function(){return i.onAddContributorClicked(n,o,r)}},s.default.createElement("span",null," + Add a Contributor")))),s.default.createElement("div",{className:"content-right container-analytics container"},s.default.createElement("div",{className:"analytics-margin contributor-container"},s.default.createElement("div",{className:"contributer-section"},s.default.createElement("p",{className:"contributor-desc mar-contrbtr"},this.state.definition," ",s.default.createElement("a",{href:"https://help.barnesandnoble.com/app/answers/detail/a_id/4383",className:"underline-link",target:"_blank"},"Learn More")," "),s.default.createElement("h2",{style:{padding:"10px"}},"Your Unique URL"),s.default.createElement("p",{className:"contributor-desc"},"Your contributors can sign in to your account with this unique link. Copy and share it with your contributors."),s.default.createElement("div",{className:"main-container-contributor"},s.default.createElement("div",{className:"url-box-shared"},a),s.default.createElement("div",{className:"gap-filler"},"Â "),s.default.createElement(d.CopyToClipboard,{text:a,onCopy:this.onCopy},s.default.createElement("div",{className:"link-copy copy-link-container"},s.default.createElement("button",{className:"btn-contributor btn-s"},"Copy Link"))))),s.default.createElement("div",{className:"contributors-table"},s.default.createElement("h2",{style:{padding:"10px"}},"Contributors"),s.default.createElement("div",{className:"table-flex-contributor"},s.default.createElement("table",{className:"table"},s.default.createElement("tbody",null,s.default.createElement("tr",null,s.default.createElement("th",{className:"shared-table-left"},"Name"),s.default.createElement("th",{className:"shared-table-left"},"Date Added"),s.default.createElement("th",{className:"shared-table-left"},"Last Logged In"),s.default.createElement("th",{className:"shared-table-right"},"Access")),t&&0==t.length&&s.default.createElement("tr",null,s.default.createElement("td",{colSpan:"4",className:"contributor-edge-case"},s.default.createElement("span",null,"You can give contributors select access to your account.",s.default.createElement("a",{onClick:function(){return i.onAddContributorClicked(n,o,r)}}," Add a contributor. ")))," "),t&&0!=t.length&&t.map(function(e){e.accessList,e.authorCustomerId;var t=e.dateCreated,a=(e.authorShareKey,e.authorsVendorNumber,e.contributorCustomerId,e.email,e.firstName),n=(e.id,e.lastName),o=e.lastUpdated,r=(0,u.bn_moment)(t).format("MMM DD, YYYY"),l=(0,u.bn_moment)(o).format("MMM DD, YYYY");return s.default.createElement("tr",null,s.default.createElement("td",null,a," ",n," "),s.default.createElement("td",null,r),s.default.createElement("td",null,l),s.default.createElement("td",{className:"edit-link shared-table-right",onClick:function(){return i.onAddContributorClicked("Update Permissions","Account Permissions","Delete Contributor",e)}},"Edit"))})))))))),!l.default.hasSharedAccessPermission(c.SHARED_ACCESS)&&s.default.createElement("div",{className:"no-permission"},"Oops you don't have permission to access this page"),this.state.onPageloading&&s.default.createElement("div",{className:"spinner-area"},s.default.createElement(p.default,{top:450})))}}])&&h(t.prototype,a),n&&h(t,n),o}();t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"no-permission-height"},r.default.createElement("p",{className:"no-permission-body2"},"You don't have access to this page."))}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{className:"no-permission-height"})}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a(0)),u=(n(a(1)),a(2),a(7)),r=(n(a(61)),n(a(135))),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}}(a(75)),c=n(a(4));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,(t=!(n=f(o).call(this,e))||"object"!==i(n)&&"function"!=typeof n?m(a):n).state={eaaSubscriptionData:"",eaaSubscriptionPlanData:""},t.eaaSubscriptionLoaded=t.eaaSubscriptionLoaded.bind(m(m(t))),t.eaaSubscriptionPlanLoaded=t.eaaSubscriptionPlanLoaded.bind(m(m(t))),t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,s.default.Component),t=o,(a=[{key:"componentWillMount",value:function(){r.default.addEaaSubscriptionListener(this.eaaSubscriptionLoaded),r.default.addEaaSubscriptionPlanListener(this.eaaSubscriptionPlanLoaded)}},{key:"componentWillUnmount",value:function(){r.default.removeEaaSubscriptionListener(this.eaaSubscriptionLoaded),r.default.removeEaaSubscriptionPlanListener(this.eaaSubscriptionPlanLoaded)}},{key:"componentDidMount",value:function(){l.getEaaSubscription(),l.getEaaSubscriptionPlan()}},{key:"eaaSubscriptionLoaded",value:function(){var e=r.default.eaaSubscription();this.setState({eaaSubscriptionData:e})}},{key:"eaaSubscriptionPlanLoaded",value:function(){var e=r.default.eaaSubscriptionPlan();this.setState({eaaSubscriptionPlanData:e})}},{key:"parseMillisecondsIntoReadableTime",value:function(e){var t=e/36e5,a=Math.floor(t),n=9<a?a:"0"+a,o=60*(t-a),r=Math.floor(o),l=9<r?r:"0"+r,i=60*(o-r),s=Math.floor(i);return n+"h : "+l+"m : "+(9<s?s:"0"+s)+"s"}},{key:"render",value:function(){var e,t,a,n,o,r,l,i=!1;return(-1<c.default.getUser().permissions.indexOf("SUPER_ADMIN_PERMISSION")||-1<c.default.getUser().permissions.indexOf("ADMIN_PERMISSION"))&&(i=!0),this.state.eaaSubscriptionData&&(e=this.state.eaaSubscriptionData.result,l=new Date(e.resetDate).getTime()-(new Date).getTime()),this.state.eaaSubscriptionPlanData&&(a=(t=this.state.eaaSubscriptionPlanData.result)?(0,u.bn_moment)(t.startDate).format("MM/DD"):"",n=t?(0,u.bn_moment)(t.endDate).format("MM/DD"):"",o=(0,u.bn_moment)().format("MM/DD"),r=t&&a<=o&&o<=n?"Active":"Not Active"),s.default.createElement("div",{className:"left-sidebar-wrapper analytics-layout"},s.default.createElement("div",{className:"left-sidebar-container projects"},s.default.createElement("header",{className:"sidelines"},s.default.createElement("h1",null,"My Analytics Subscription"))),s.default.createElement("div",{className:"container-fluid"},s.default.createElement("div",{className:"widget summary-widget analytics-manage"},s.default.createElement("div",{className:"analytics-manage-header2 analytics-manage-header-desktop"},s.default.createElement("h2",{className:"analytics-manage-header1"},"Your Usage"),s.default.createElement("span",{className:"analytics-manage-header3"},"Search limit is based on incurred costs to ",s.default.createElement("br",null)," B&N Press when processing data feeds.")),s.default.createElement("div",{className:"analytics-manage-header2 analytics-manage-header-mobile"},s.default.createElement("h2",{className:"analytics-manage-header4"},"Your Usage"),s.default.createElement("div",{className:"analytics-manage-header5"},"Search limit is based on incurred costs to B&N Press when processing data feeds.")),s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-lg-3 col-md-6 sub-head-manage-analytics-padding"},s.default.createElement("span",{className:"sub-head-manage-analytics"},"SEARCHES REMAINING"),!i&&s.default.createElement("span",{className:"sub-result-manage-analytics"},e&&parseInt(e.dailyLimit)-parseInt(e.usageCount)," of ",e&&e.dailyLimit," searches"),i&&s.default.createElement("span",{className:"sub-result-manage-analytics"},"â€”")),s.default.createElement("div",{className:"col-lg-3 col-md-6 sub-head-manage-analytics-padding"},s.default.createElement("span",{className:"sub-head-manage-analytics"},"SEARCH RESET"),s.default.createElement("span",{className:"sub-result-manage-analytics"},e&&e.resetDate&&!i?(0,u.bn_moment)(e.resetDate).format("MMMM DD, hh:mm A")+"ET":"â€”")),s.default.createElement("div",{className:"col-md-6 sub-head-manage-analytics-padding"},s.default.createElement("span",{className:"sub-head-manage-analytics"},"TIME UNTIL RESET"),s.default.createElement("span",{className:"sub-result-manage-analytics"},e&&e.resetDate&&l&&!i?this.parseMillisecondsIntoReadableTime(l):"â€”"))))),s.default.createElement("div",{className:"container-fluid"},s.default.createElement("div",{className:"widget summary-widget analytics-manage"},s.default.createElement("h2",{className:"analytics-manage-header"},"Current Plan"),s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-lg-3 col-md-6 sub-head-manage-analytics-padding"},s.default.createElement("span",{className:"sub-head-manage-analytics"},"PLAN TYPE"),!i&&s.default.createElement("span",{className:"sub-result-manage-analytics"},t?t.description:"â€”"),i&&s.default.createElement("span",{className:"sub-result-manage-analytics"},"Admin Account")),s.default.createElement("div",{className:"col-lg-3 col-md-6 sub-head-manage-analytics-padding"},s.default.createElement("span",{className:"sub-head-manage-analytics"},"PLAN END DATE"),s.default.createElement("span",{className:"sub-result-manage-analytics"},t&&!i?(0,u.bn_moment)(t.endDate).format("MMMM DD, YYYY"):"â€”")),s.default.createElement("div",{className:"col-lg-3 col-md-6 sub-head-manage-analytics-padding"},s.default.createElement("span",{className:"sub-head-manage-analytics"},"PLAN RENEWAL"),!i&&s.default.createElement("div",null,s.default.createElement("input",{className:"analytics-subscription-checkbox",type:"checkbox",checked:!(!t||i)&&t.autoRenew}),s.default.createElement("span",{className:"sub-result-manage-analytics"},"Auto Renew")),i&&s.default.createElement("span",{className:"sub-result-manage-analytics"},"â€”")),s.default.createElement("div",{className:"col-lg-3 col-md-6 sub-head-manage-analytics-padding"},s.default.createElement("span",{className:"sub-head-manage-analytics"},"PLAN STATUS"),s.default.createElement("span",{className:"sub-result-manage-analytics"},t&&!i?r:"â€”"))))))}}])&&d(t.prototype,a),n&&d(t,n),o}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(0))&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",{role:"main"},r.default.createElement("h1",null,"Heading"),r.default.createElement("p",null,"some content"),r.default.createElement("h2",null,"Heading 2"))}}])&&l(a.prototype,n),o&&l(a,o),t}();t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(a(13));var r=n(a(0)),l=n(a(345));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).call(this,e))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),a=t,(n=[{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement("header",{className:"checkout-header"},r.default.createElement("a",{href:"/"},r.default.createElement("img",{alt:"NookPress",className:"logo checkout-logo",src:"img/bnpress-logo-tm.svg"}))),r.default.createElement("div",null,r.default.createElement("div",{role:"main"},r.default.createElement("h1",null,"Heading"),r.default.createElement("p",null,"some content"),r.default.createElement("h2",null,"Heading 2"))),r.default.createElement(l.default,{minimal:!0}))}}])&&i(a.prototype,n),o&&i(a,o),t}();t.default=d}]));