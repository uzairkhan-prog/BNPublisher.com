(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modalClosed=function(e,t){document.getElementById("app").classList.remove("analyticLineGraph","AdminMerchForm","AdminMerchFormView","analyticLineGraphHeight","site-module-outer"),h.default.dispatch({type:m.default.Modal.MODAL_CLOSED,handle:e,result:t})},t.showAddNewModal=function(e,t,n){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"AddNewModal",params:{subject:e,submitFunction:t},callback:n})},t.showAddContributorModal=function(e,t,n,o,a,r,i,s,l,u,c,d,f,p){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"AddContributorModal",params:{projectdashboardandManageSeries:e,orderCopy:t,managePromotion:n,mySalesReportdashboard:o,authorPages:a,firstName:r,lastName:i,email:s,leftButton:l,rightButton:u,heading:c,accessListChecked:d,editable:f},callback:p})},t.showAccountPermissionModal=function(e,t,n,o,a,r,i,s,l,u,c){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"ChangeAccountPermissionModal",params:{merchandisingChecked:e,preOrderChecked:t,coverCorrectionChecked:n,referralChecked:o,expandedDistributionAccessChecked:a,authorPagesAllowed:r,hasFreeIsbnAccess:i,analyticsAccess:s,customEbookSampling:l,authorSharedAccess:u},callback:c})},t.showMobileNumberModal=function(e,t,n,o,a){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"CollectingMobileNumberModal",params:{title:e,question:t,confirmButtonText:n,cancelButtonText:o,callback:a},callback:a})},t.emailSendModal=function(e,t){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"SendEmailModal",params:{type:e,callback:t},callback:t})},t.showEmailIdModal=function(e,t,n,o,a){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"CollectingEmailIdModal",params:{type:e,phoneno:t,confirmButtonText:n,cancelButtonText:o,callback:a},callback:a})},t.TwoFaProfileModal=function(e,t,n,o,a,r){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"TwoFaProfileModal",params:{type:e,phoneno:t,errorCode:n,confirmButtonText:o,cancelButtonText:a,callback:r},callback:r})},t.showTwofaMaxAttemptErrorModal=function(e,t,n,o,a){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"TwoFaMaxAttemptErrorModal",params:{profile:e,phoneno:t,confirmButtonText:n,cancelButtonText:o,callback:a},callback:a})},t.showAddressValidationModal=function(e,t,n,o){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"AddressValidationModal",params:{message:e,suggestions:t,address:n},callback:o})},t.showApproveMerchRequestModal=function(e){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"ApproveMerchRequestModal",params:{},callback:e})},t.showATGComparisionModal=function(e){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"ATGComparisonModal",params:{tableBody:e},callback:function(){}})},t.showBusyModal=function(e){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"BusyModal",params:{initCallback:e},callback:function(){}})},t.showCategorySearchModal=function(e,t,n,o,a,r){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"CategorySearchModal",params:{allLanguages:e,categories:t,audience:n,language:o,subjectType:a},callback:r})},t.showChangeBusinessStatusModal=function(e,t,n,o,a){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"ChangeBusinessStatusModal",params:{vendorNum:e,firstName:t,lastName:n,businessStatus:o},callback:a})},t.showAdminProjectStatusModal=function(e,t,n){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"AdminProjectStatusModal",params:{modalContent:e,projectDetails:t},callback:n})},t.showChangeUserRoleModal=function(e,t,n,o){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"ChangeUserRoleModal",params:{firstName:e,lastName:t,userRole:n},callback:o})},t.showConfirmationModal=r,t.showConfirmationModalWithContent=function(e,t,n,o,a){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"ConfirmationModal",params:{title:e,content:t,confirmButtonText:n,cancelButtonText:o},callback:a})},t.showConfirmationModalWithOptions=function(e,t){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"ConfirmationModal",params:e,callback:t})},t.showCopyTextModal=function(e,t,n,o){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"CopyTextModal",params:{text:e,formattedText:t,message:n},callback:o})},t.showUltraPremiumUpgradeModal=function(e,t,n){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"UltraPremiumUpgradeModal",params:{data:e,projectdetails:t},callback:n})},t.showOrderCancelModal=function(e,t){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"OrderCancelModal",params:{project:t},callback:e})},t.showAdminOrderCancelModal=function(e,t){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"AdminOrderCancelModal",params:{project:t},callback:e})},t.showDeactivateUserModal=function(e){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"DeactivateUserModal",callback:e})},t.showEBookPreviewRefreshModal=function(e){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"EBookPreviewRefreshModal",callback:e})},t.showEditOnSaleBookModal=function(e,t){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"EditOnSaleConfirmationModal",params:{project:t},callback:e})},t.showErrorModal2=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length?arguments[2]:void 0;h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"ErrorModal",params:{errors:e,singleModalOnly:t},callback:n})},t.showErrorModal=function(e){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"ErrorModal",params:{},callback:e})},t.showFinalFilesModal=function(e,t){r("Are these your final interior and cover files?",'Once you click "Yes", your files will be submitted for review. However, you can re-upload your interior and cover files after the review is complete, until '+(0,o.bn_moment)(e).format("MMMM D, YYYY")+'.<br /><br />If you click "No". Please ensure final files are uploaded no later than '+(0,o.bn_moment)(e).format("MMMM D, YYYY")+".","Yes","No",t)},t.showInformationModal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"InformationModal",params:{content:e,isHtml:n},callback:t})},t.showInformationModalWithTitle=function(e,t,n){var o=3<arguments.length&&void 0!==arguments[3]&&arguments[3];h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"InformationModal",params:{title:e,content:t,isHtml:o},callback:n})},t.showNotificationModal=function(e,t,n,o){var a=4<arguments.length&&void 0!==arguments[4]&&arguments[4];h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"NotificationModal",params:{message:e,title:t,buttonLabel:n,isHtml:a},callback:o})},t.showOrderCopyCompleteBookModal=function(e,t,n,o,a){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"OrderCopyCompleteBookModal",params:{title:e,format:t,size:n,coverThumbnail:o},callback:a})},t.showOrderCopyCompleteBookModalNoAccess=function(e,t,n,o,a){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"OrderCopyCompleteBookModalNoAccess",params:{title:e,format:t,size:n,coverThumbnail:o},callback:a})},t.showOrderCopyModal=function(e){r("Order Copy","In order to order a copy, you need to complete your book first.<br />Do you want to go back to your book?","Complete My Book","No Thank You",e)},t.showPutOnSaleModal=function(e){r("Put On Sale","You are about to place your book on sale! It may take up to 72 hours for your title to appear on BN.com. When your book goes on sale, your project status will update accordingly.","Put On Sale","Cancel",e)},t.showRecipientModal=function(e,t,n){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"RecipientModal",params:{message:e,title:t},callback:n})},t.showReferralWelcomeModal=function(e,t){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"ReferralWelcomeModal",params:{message:e,footerContent:t},callback:function(){}})},t.showReportRowDetailModal=function(e,t){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"ReportRowDetailModal",params:{reportDef:e,data:t},callback:function(){}})},t.showUploadErrorModal=function(e,t){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"UploadErrorModal",params:{message:e},callback:t})},t.showSelectProgressModal=function(e,t){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"SelectProgressModal",params:{fileName:e},callback:t})},t.showUploadProgressModal=function(e,t){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"UploadProgressModal",params:{fileName:e},callback:t})},t.showSearchExhaustModal=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length?arguments[2]:void 0;h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"SearchExhaustModal",params:{error:e,singleModalOnly:t},callback:n})},t.showSpineProgressModal=function(e){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"SpineProgressModal",params:{},callback:e})},t.showTakeOffSaleModal=function(e,t,n){r("Take Off Sale","EBOOK"===e?"Are you sure you want to remove this book from sale? Please allow 24 hours for this change to take effect.":'Are you sure you want to remove this book from sale? Please allow 24 hours for this change to take effect.<span class="diff-para">Please note, if you want to order a copy of the book after taking it off sale, you will need to wait 4-5 business days.</span>',"Take Off Sale","Cancel",n)},t.showTakeOffSaleWithCouponModal=function(e,t,n){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"TakeOffSaleModal",params:{projectId:e,title:"Take Off Sale",question:"<p>You have a coupon code that is scheduled or currently running for this book.</p>Are you sure you want to remove this book from sale? Please allow 24 hours for this change to take effect.",confirmButtonText:"Take Off Sale",cancelButtonText:"Cancel"},callback:n})},t.showUpdateEmailModal=function(e,t,n,o,a){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"UpdateEmailModal",params:{vendorNumber:e,emailAddress:t,confirmButtonText:n,cancelButtonText:o},callback:a})},t.showVerifyCreditCardSecurityCodeModal=function(e,t){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"VerifyCreditCardSecurityCodeModal",params:{message:e},callback:t})},t.showVerifyTinW9Modal=function(e,t,n){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"VerifyTinW9Modal",params:{message:e,textTypeW9:t},callback:n})};var m=a(n(18)),o=n(7),h=a(n(16));function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,o,a){h.default.dispatch({type:m.default.Modal.SHOW_MODAL,modalType:"ConfirmationModal",params:{title:e,question:t,confirmButtonText:n,cancelButtonText:o},callback:a})}},100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COUPON_VIEWS=t.PROMO_LABEL=t.PROMO_TYPE=t.COUPON_STATUS=t.COUPON_ERRORS=void 0;t.COUPON_ERRORS=[{id:"32000",field:"couponCode",message:"Sorry, this coupon code is already in use."},{id:"32001",field:"startDate",message:"That start date is invalid."},{id:"32002",field:"endDate",message:"That end date is invalid."},{id:"32003",field:"startDate",message:"The start date must be before the end date."},{id:"32004",field:"endDate",message:"The end date must be different than the start date."},{id:"32005",field:"eanList",message:"Please enter a valid on sale eBook EAN or one that belongs to you."},{id:"32006",field:"eanList",message:"Please enter a valid on sale eBook EAN or one that belongs to you."},{id:"32007",field:"eanList",message:"Please enter a valid on sale eBook EAN or one that belongs to you."},{id:"32011",field:"couponCode",message:"Coupon code may not contain spaces."},{id:"32012",field:"couponCode",message:"Your coupon code must be 7 to 15 alphanumeric characters."},{id:"32013",field:"eanList",message:"You have entered a duplicate EAN. Please check and resubmit."}];t.COUPON_STATUS={ACTIVE:"ACTIVE",SCHEDULED:"SCHEDULED",EXPIRED:"EXPIRED"};t.PROMO_TYPE={BOGO:"BOGO_X_PERCENT_OFF",BOGO_FREE:"BOGO",COUPON:"X_PERCENT_OFF_COUPON"};t.PROMO_LABEL={BOGO:"BOGO"};t.COUPON_VIEWS={BN_PROMO_SUMMARY:"BN_PROMO_SUMMARY",CREATE_COUPON:"CREATE_COUPON",COUPON_SUMMARY:"COUPON_SUMMARY",BN_PROMO:"BN_PROMO"}},1004:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var S=o(n(13)),r=o(n(0));o(n(1005));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).call(this,e))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),n=t,(o=[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,n=e.lang,o=e.buttons,a=e.semantic,r=e.resetCss,i=e.removeformatPasted,s=e.autogrow,l=e.data,u=e.disabled,c=e.onFocus,d=e.onBlur,f=e.onInit,p=e.onChange,m=e.onResize,h=e.onPaste,y=e.onToggle,v=e.onOpenFullScreen,b=e.onCloseFullScreen,g=e.onClose,E=(e.shouldUseSvgIcons,e.shouldInjectSvgIcons,e.svgIconsPath,{lang:n,btns:o,btnsDef:e.btnsDef,semantic:a,resetCss:r,removeformatPasted:i,autogrow:s,svgPath:"/fonts/icons.svg"}),P=(0,S.default)("#".concat(t)).trumbowyg(E);c&&P.on("tbwfocus",c),d&&P.on("tbwblur",d),f&&P.on("tbwinit",f),p&&P.on("tbwchange",p),m&&P.on("tbwresize",m),h&&P.on("tbwpaste",h),v&&P.on("tbwopenfullscreen",v),b&&P.on("tbwclosefullscreen",b),g&&P.on("tbwclose",g),y&&P.on("toggle",y),(0,S.default)("#".concat(t)).trumbowyg("html",l),(0,S.default)("#".concat(t)).trumbowyg(!0===u?"disable":"enable")}},{key:"componentWillUnmount",value:function(){(0,S.default)("#".concat(this.props.id)).trumbowyg("destroy")}},{key:"render",value:function(){return r.default.createElement("div",{id:"".concat(this.props.id),placeholder:this.props.placeholder})}}])&&i(n.prototype,o),a&&i(n,a),t}();(t.default=c).defaultProps={buttons:[["viewHTML"],["formatting"],"btnGrp-semantic",["superscript","subscript"],["link"],["insertImage"],"btnGrp-justify","btnGrp-lists",["horizontalRule"],["removeformat"],["fullscreen"]],semantic:!0,resetCss:!1,removeformatPasted:!1,autogrow:!1,disabled:!1,btnsDef:{},shouldUseSvgIcons:!0,shouldInjectSvgIcons:!0},c.propTypes={id:r.default.PropTypes.string.isRequired,data:r.default.PropTypes.string.isRequired,placeholder:r.default.PropTypes.string,buttons:r.default.PropTypes.array,semantic:r.default.PropTypes.bool,resetCss:r.default.PropTypes.bool,removeformatPasted:r.default.PropTypes.bool,autogrow:r.default.PropTypes.bool,disabled:r.default.PropTypes.bool,btnsDef:r.default.PropTypes.object,onFocus:r.default.PropTypes.func,onBlur:r.default.PropTypes.func,onInit:r.default.PropTypes.func,onChange:r.default.PropTypes.func,onResize:r.default.PropTypes.func,onPaste:r.default.PropTypes.func,onOpenFullScreen:r.default.PropTypes.func,onCloseFullScreen:r.default.PropTypes.func,onClose:r.default.PropTypes.func,shouldUseSvgIcons:r.default.PropTypes.bool.isRequired,svgIconsPath:r.default.PropTypes.string,shouldInjectSvgIcons:r.default.PropTypes.bool.isRequired}},1019:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.acknowledgePageCountChanged=function(e,t,n){l.acknowledgePageCountChanged(e,n).then(function(e){try{t(e)}catch(e){console.log(e),n(e)}})},t.approve=function(e,t,n,o){l.approve(e,t,o).then(function(e){try{n(new r.default(e))}catch(e){console.log(e)}})},t.approveSample=function(e,t,n,o){l.approveSample(e,t,o).then(function(e){try{n(new r.default(e))}catch(e){console.log(e)}})},t.deleteEbookCoupon=function(e,t,n){l.deleteEbookCoupon(e,n).then(function(e){try{t(e)}catch(e){n(e)}})},t.orderDeleteReasonComplete=function(t,e){l.orderDeleteReasonComplete().then(function(e){try{t(e)}catch(e){console.log(e)}})},t.deleteProject=function(e,t,n){l.deleteProject(e,n).then(function(){try{t(e)}catch(e){console.log(e)}})},t.deleteSearchProject=function(e,t,n,o,a){l.deleteSearchProject(e,t,n,a).then(function(){try{o(e)}catch(e){console.log(e)}})},t.tranferIsbnProject=function(e,t,n,o,a){l.tranferIsbnProject(e,t,n,a).then(function(){try{o(t)}catch(e){console.log(e)}})},t.doesProjectBookSizeExist=function(e,t,n,o){l.doesProjectBookSizeExist(e.id,t.coverFormat,t.pageSize).then(function(e){try{n(e.doProjectsExist)}catch(e){console.log(e)}})},t.getAllLanguages=function(t,e){l.getAllLanguages(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getBookPrice=function(e,t,n,o){if(e.type!==a.EBOOK)return;l.getBookPrice(e,t,o).then(function(e){try{n(e)}catch(e){o(e)}})},t.getCouponSpecs=function(t,n){l.getCouponSpecs().then(function(e){try{t(e)}catch(e){n(e)}})},t.getCoverFormattingSpecs=function(e,t,n){l.getCoverFormattingSpecs(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getEbookCoupons=function(e,t,n,o,a,r,i){l.getEbookCoupons(e,t,n,o,a,i).then(function(e){try{r(e)}catch(e){console.log(e)}})},t.getPreflightStatus=function(e,t,n){l.getPreflightStatus(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getPreviewPreflightStatus=function(e,t,n,o){l.getPreviewPreflightStatus(e,t,o).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.getPreviewSamplePreflightStatus=function(e,t,n,o){l.getPreviewSamplePreflightStatus(e,t,o).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.getPriceUpdateWindow=function(t,n){l.getPriceUpdateWindow(n).then(function(e){try{t(e)}catch(e){n(e)}})},t.getPriceQuote=function(e,t,n,o){l.getPriceQuote(e,t,o).then(function(e){try{n(e)}catch(e){o(e)}})},t.generateCover=function(e,t,n){l.generateCover(e,n).then(function(e){try{t(e)}catch(e){n(e)}})},t.loadBookSizeTypeMetaData=function(e,t,n){l.loadBookSizeTypeMetaData(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadCategories=function(e,t,n,o){l.loadExploreCategories(e,t,n).then(function(e){try{o(e.map(function(e){return{value:e.categoryId,categoryId:e.categoryId,label:e.name,categoryCrumbs:e.categoryCrumbs,hasChildren:!e.bottomLevel,bisac:e.bisac}}))}catch(e){console.log(e)}})},t.loadProject=function(e,t,n){l.loadProject(e,n).then(function(e){try{t(new r.default(e))}catch(e){console.log(e)}})},t.loadProjects=function(o,e){l.loadProjects(e).then(function(e){try{for(var t=[],n=0;n<e.projects.length;n++)t[n]=new r.default(e.projects[n]);o(t)}catch(e){console.log(e)}})},t.previewEBook=function(e,t,n){l.previewEBook(e,n).then(function(e){try{t(e.data)}catch(e){console.log(e)}})},t.selectSamplePreview=function(e,t,n){l.selectSamplePreview(e,n).then(function(e){try{t(e.data)}catch(e){console.log(e)}})},t.previewEBookSample=function(e,t,n){l.previewEBookSample(e,n).then(function(e){try{t(e.data)}catch(e){console.log(e)}})},t.saveProject=function(e,t,n){l.saveProject(e,n).then(function(e){try{t(new r.default(e))}catch(e){console.log(e)}})},t.saveSpine=function(e,t,n){l.saveSpine(e,n).then(function(e){try{t(new r.default(e))}catch(e){console.log(e)}})},t.searchCategories=function(e,t,n,o,a,r,i){l.searchCategories(e,t,n,o,a).then(function(e){try{r(e)}catch(e){console.log(e)}})},t.scheduledPriceDelete=function(e,t,n,o){l.scheduledPriceDelete(e,t,o).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.scheduledPrices=function(e,t,n){l.scheduledPrices(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.scheduledPriceSubmit=function(e,t,n,o,a,r,i,s){l.scheduledPriceSubmit(e,t,n,o,a,r,s).then(function(e){try{i(e)}catch(e){console.log(e)}})},t.setEditStatus=function(e,t){l.setEditStatus(e).then(function(e){try{t(new r.default(e))}catch(e){console.log(e)}})},t.setOrderStatus=function(e,t,n){l.setOrderStatus(e,n).then(function(e){try{t(new r.default(e))}catch(e){console.log(e)}})},t.submitCoupon=function(e,t,n){l.submitCoupon(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.uploadAttachment=function(e,t,n){l.uploadAttachment(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.uploadSampleAttachment=function(e,t,n){l.uploadSampleAttachment(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getEbookRoyaltyRates=function(t,e){l.getEbookRoyaltyRates().then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getPageBanners=function(e,t,n){l.getPageBanners(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.requestCorrection=void 0;var a=i(n(15)),l=i(n(1020)),r=o(n(64));o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}t.requestCorrection=function(e,t){l.requestCorrection(e).then(function(e){try{t(new r.default(e))}catch(e){console.log(e)}})}},1020:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.acknowledgePageCountChanged=function(e,t){return s.post("/api/project/acknowledgePageCountChanged",{projectId:e},t)},t.approve=function(e,t,n){return s.post("/api/project/approve",{projectId:e,elementType:t},n)},t.approveSample=function(e,t,n){return s.post("/api/project/approveSample",{projectId:e,elementType:t},n)},t.deleteEbookCoupon=function(e,t){return s.del("/api/project/projectCoupons/id",{params:{couponId:e}},t)},t.orderDeleteReasonComplete=function(e){return s.get("/api/project/order-cancel-reasons",{},e)},t.deleteProject=function(e,t){return s.del("/api/project/"+e.id,{},t)},t.deleteSearchProject=function(e,t,n,o){var a=e.id;return s.post("/api/project/delete_search_project",{projectId:a,updateIntent:t,customerId:n},o)},t.tranferIsbnProject=function(e,t,n,o){return s.post("/api/project/tranfer_isbn_project",{vendornumber:e,isbn:t,customerId:n},o)},t.doesProjectBookSizeExist=function(e,t,n,o){var a="/api/project/"+e+"/book-size-match?cover_format="+t+"&page_size="+n;return s.get(a,{},o)},t.getAllLanguages=function(e){return s.get("/api/project/getAllLanguages",e)},t.getBookPrice=function(e,t,n){var o=parseFloat(t.toString()).toFixed(2);return s.get("/api/project/"+e.type.toLowerCase()+"/cost?price="+o)},t.getCouponSpecs=function(e){return s.get("/api/project/coupon-specs",e)},t.getCoverFormattingSpecs=function(e,t){return s.get("/api/project/cover-specs",{params:{args:e}},t)},t.getEbookCoupons=function(e,t,n,o,a,r){return s.get("/api/project/projectCoupons",{params:{queryParameter:e,sortOrder:t,status:n,pageNumber:o,recordsPerPage:a}},r)},t.getPreflightStatus=function(e,t){return s.get("/api/project/preflightstatus",{params:{args:e}},t)},t.getPreviewPreflightStatus=function(e,t,n){var o="/api/project/"+e.id+"/ebook-preview-prefilght-status";t&&(o+="?forceRefresh=true");return s.get(o,{},n)},t.getPreviewSamplePreflightStatus=function(e,t,n){var o="/api/project/"+e.id+"/sample-preview-prefilght-status";t&&(o+="?forceRefresh=true");return s.get(o,{},n)},t.getPriceUpdateWindow=function(e){return s.get("/api/project/priceUpdateWindow",{},e)},t.getPriceQuote=function(e,t,n){return e==o.PRINT?s.get("/api/project/print/quote?"+t,void 0,n):s.get("/api/project/personal/quote?"+t,void 0,n)},t.generateCover=function(e,t){return s.get("/api/project/generateCover?"+e,void 0,t)},t.loadBookSizeTypeMetaData=function(e,t){return s.post("/api/project/load-bst-metadata",{params:e},t)},t.loadEBookCategories=function(e,t){return new s.get("/api/book/ebook-categories",{params:{parentCategoryId:e}})},t.loadExploreCategories=function(e,t,n,o){return new s.get("/api/book/explore-categories",{params:{audienceType:e,subjectType:t,parentCategory:n}},o)},t.loadPrintCategories=function(e,t,n,o,a){return new s.get("/api/book/categories",{params:{projectType:e,audienceType:t,subjectType:n,parentCategory:o}},a)},t.loadProject=function(e,t){return s.get("/api/project/"+e,{},t)},t.loadProjects=function(e){return s.get("/api/projects",{},e)},t.previewEBook=function(e,t){return s.get("/api/project/"+e.id+"/preview",{},t)},t.selectSamplePreview=function(e,t){return s.post("/api/project/"+e+"/createCustomSample",{},t)},t.previewEBookSample=function(e,t){return s.get("/api/project/"+e.id+"/preview_sample",{},t)},t.saveProject=function(e,t){return s.post("/api/project",e,t)},t.saveSpine=function(e,t){return s.post("/api/project/spine",e,t)},t.scheduledPriceDelete=function(e,t,n){return s.del("/api/project/scheduled-price-delete?id="+e+"&projectId="+t,{id:e,projectId:t},n)},t.scheduledPrices=function(e,t){return s.get("/api/project/scheduled-prices?projectId="+e,{},t)},t.scheduledPriceSubmit=function(e,t,n,o,a,r,i){return s.post("/api/project/scheduled-price-submit",{id:e,projectId:t,price:n,startDate:o,endDate:a,endDatePrice:r},i)},t.searchCategories=function(e,t,n,o,a,r){return s.get("/api/book/search-categories",{params:{query:e,audienceType:t,subjectType:n,pageNum:o,recordsPerPage:a}},r)},t.setEditStatus=function(e,t){return s.put("/api/project/setstatus",{id:e,status:"EDIT"},t)},t.setOrderStatus=function(e,t){return s.put("/api/project/setstatus",{id:e,status:"ORDER"},t)},t.submitCoupon=function(e,t){return s.post("/api/project/coupon/submitCoupon",{coupon:e,couponIdAvailable:e.id?"true":"false"},t)},t.uploadAttachment=function(e,t){return s.post("/api/project/upload",e,t)},t.uploadSampleAttachment=function(e,t){return s.post("/api/project/uploadSample",e,t)},t.getEbookRoyaltyRates=function(e){return s.get("/api/project/royalty-prices",{},e)},t.getPageBanners=function(e,t){return s.get("/api/project/page-banners/"+e,{},t)},t.requestCorrection=void 0;var s=a(n(67)),o=a(n(15));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}t.requestCorrection=function(e,t){return s.post("/api/project/requestCorrection",{id:e},t)}},1021:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(33)),a=c(n(11)),r=c(n(15)),i=(c(n(146)),u(n(50))),s=u(n(45)),l=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}var d=[{key:o.ChooseBookType,path:o.ChooseBookType,next:function(e){return e.project.isGroupConfirmed?e.project.isEBook?i.default.getShowVendorRegistrationInWelcomeFlow(e.user.vendorStatus,e.user.businessStatus)?[o.VendorRegistration]:[o.SelectPreorderStatus]:e.project.isPrintPreOrder()?[o.CreateBookTitle]:[o.SelectSaleStatus]:e.project.isEBook&&e.project.id&&e.project.groupProjectId?[o.SelectPreorderStatus]:[o.CreateBookTitle]},access:function(e){var t;return e.project.id&&(t={canView:!1,path:e.project.isSPB||e.project.isPOD?[o.SizeAndType]:[o.Interior,o.InteriorUpload],event:!0}),t},centerNext:!0},{key:o.CreateBookTitle,path:o.CreateBookTitle,next:function(e){return e.project.grouped&&!e.project.isGroupConfirmed?[o.ChooseExistingBook]:e.project.isEBook?i.default.getShowVendorRegistrationInWelcomeFlow(e.user.vendorStatus,e.user.businessStatus)?[o.VendorRegistration]:[o.SelectPreorderStatus]:[o.SelectSaleStatus]},access:function(e){return e.project.id?{canView:!e.project.id,path:e.project.isSPB||e.project.isPOD?[o.SizeAndType]:[o.Interior,o.InteriorUpload],event:!0}:{canView:e.project.type,path:[o.ChooseBookType]}},centerNext:!0},{key:o.ChooseExistingBook,path:o.ChooseExistingBook,next:function(e){return e.project.isEBook?i.default.getShowVendorRegistrationInWelcomeFlow(e.user.vendorStatus,e.user.businessStatus)?[o.VendorRegistration]:[o.SelectPreorderStatus]:[o.SelectSaleStatus]},back:[o.CreateBookTitle],access:function(e){return e.project.id?{canView:!e.project.id,path:e.project.isSPB||e.project.isPOD?[o.SizeAndType]:[o.Interior,o.InteriorUpload],event:!0}:{canView:e.project.type,path:[o.ChooseBookType]}},centerNext:!0},{key:o.SelectSaleStatus,path:o.SelectSaleStatus,next:function(e){return e.project.isPOD?[o.SizeAndType]:i.default.getShowVendorRegistrationInWelcomeFlow(e.user.vendorStatus,e.user.businessStatus)?[o.VendorRegistration]:[o.SelectPreorderStatus]},access:function(e){return e.project.id?{canView:!e.project.id,path:e.project.isSPB||e.project.isPOD?[o.SizeAndType]:[o.Interior,o.InteriorUpload],event:!0}:{canView:e.project.title,path:[o.CreateBookTitle]}},centerNext:!0},{key:o.SelectPreorderStatus,path:o.SelectPreorderStatus,next:function(e){return e.project.isEBook?[o.Interior,o.InteriorUpload]:[o.SizeAndType]},access:function(e){return e.project.id?{canView:!0,path:e.project.isSPB||e.project.isPOD?[o.SizeAndType]:[o.Interior,o.InteriorUpload],event:!0}:{canView:e.project.title,path:[o.CreateBookTitle]}},centerNext:!0},{key:o.VendorRegistration,path:o.VendorRegistration,type:[r.PRINT,r.EBOOK],next:function(e){return e.project.vendorRegistrationFirst?[o.Vendor,o.VendorPublisher]:e.project.isSPB||e.project.isPOD?[o.SizeAndType]:[o.Interior,o.InteriorUpload]},centerNext:!0},{key:o.SizeAndType,path:o.SizeAndType,section:[o.SizeAndType],title:"Book Size & type",next:[o.Interior,o.InteriorFormatting],type:[r.PRINT,r.POD],status:function(e){return e.project.getBookSizeAndTypeStatus()},access:function(e){return{canView:e.project.isSPB||e.project.isPOD,path:[o.Interior,o.InteriorUpload]}}},{key:o.Interior,path:o.Interior,section:function(e){return e.project.isSPB||e.project.isPOD?[o.Interior,o.InteriorFormatting]:[o.Interior,o.InteriorUpload]},title:"Interior",status:function(e){return l.default.hasCustomSamplingPermission(a.BAB_CUSTOM_SAMPLE)&&e.project.isEBook?e.project.isDefaultSample===r.DEFAULT_SAMPLE?e.project.getInteriorStatus():e.project.getSampleStatus():e.project.getInteriorStatus()},inactive:function(e){if(e.project.isSPB||e.project.isPOD)return!e.project.getBookSizeAndTypeStatus(!0)},access:function(e){return{canView:(e.project.isSPB||e.project.isPOD)&&e.project.getBookSizeAndTypeStatus(!0)||e.project.isEBook,path:[o.SizeAndType]}},redirect:!0,children:[{key:o.InteriorFormatting,path:o.InteriorFormatting,title:"Formatting",back:[o.SizeAndType],next:[o.Interior,o.InteriorImages],type:[r.PRINT,r.POD],access:function(e){return{canView:e.project.isSPB||e.project.isPOD,path:[o.Interior,o.InteriorUpload]}}},{key:o.InteriorImages,path:o.InteriorImages,title:"Images",back:[o.Interior,o.InteriorFormatting],next:[o.Interior,o.InteriorFonts],type:[r.PRINT,r.POD],access:function(e){return{canView:e.project.isSPB||e.project.isPOD,path:[o.Interior,o.InteriorUpload]}}},{key:o.InteriorFonts,path:o.InteriorFonts,title:"Fonts",back:[o.Interior,o.InteriorImages],next:[o.Interior,o.InteriorFileType],type:[r.PRINT,r.POD],access:function(e){return{canView:e.project.isSPB||e.project.isPOD,path:[o.Interior,o.InteriorUpload]}}},{key:o.InteriorFileType,path:o.InteriorFileType,title:"File Type",back:[o.Interior,o.InteriorFonts],next:[o.Interior,o.InteriorUpload],type:[r.PRINT,r.POD],access:function(e){return{canView:e.project.isSPB||e.project.isPOD,path:[o.Interior,o.InteriorUpload]}}},{key:o.InteriorUpload,path:o.InteriorUpload,title:"Upload",back:function(e){return e.project.isSPB||e.project.isPOD?[o.Interior,o.InteriorFileType]:e.project.vendorRegistrationFirst?[o.Vendor,o.VendorTaxAndBankInformation]:null},next:[o.Interior,o.InteriorReview]},{key:o.InteriorReview,path:o.InteriorReview,title:"Review",back:[o.Interior,o.InteriorUpload],next:function(e){return l.default.hasCustomSamplingPermission(a.BAB_CUSTOM_SAMPLE)?e.project.isSPB||e.project.isPOD?[o.Cover,o.CoverType]:[o.Interior,o.InteriorSamplePreference]:e.project.isSPB||e.project.isPOD?[o.Cover,o.CoverType]:[o.Cover,o.CoverUpload]},access:function(e){return{canView:"CONVERTED"===e.project.interiorPdfConversionStatus,path:[o.Interior,o.InteriorUpload]}},inactive:function(e){return!e.project.interiorPreFlightCheckStatus}},{key:o.InteriorUpload,path:o.InteriorUpload,title:"Upload Interior",type:[r.EBOOK],back:function(e){return e.project.isSPB||e.project.isPOD?[o.Interior,o.InteriorFileType]:e.project.vendorRegistrationFirst?[o.Vendor,o.VendorTaxAndBankInformation]:null},next:[o.Interior,o.InteriorReview]},{key:o.InteriorReview,path:o.InteriorReview,title:"Review Interior",type:[r.EBOOK],back:[o.Interior,o.InteriorUpload],next:function(e){return e.project.isSPB||e.project.isPOD?[o.Cover,o.CoverType]:[o.Interior,o.InteriorSamplePreference]},inactive:function(e){return!e.project.interiorPreFlightCheckStatus}},{key:o.InteriorSamplePreference,path:o.InteriorSamplePreference,title:"Sample Preference",type:[r.EBOOK],back:[o.Interior,o.InteriorReview],next:[o.Cover,o.CoverUpload],access:function(e){return{canView:"CONVERTED"===e.project.interiorPdfConversionStatus,path:[o.Interior,o.InteriorUpload]}},inactive:function(e){return!e.project.interiorPreFlightCheckStatus}},{key:o.InteriorUploadSample,path:o.InteriorUploadSample,title:"Upload Sample",type:[r.EBOOK],back:[o.Interior,o.InteriorSamplePreference],next:[o.Interior,o.InteriorReviewSample],inactive:function(e){return!(e.project.interiorPreFlightCheckStatus&&e.project.isDefaultSample===r.CUSTOM_SAMPLE)}},{key:o.InteriorReviewSample,path:o.InteriorReviewSample,title:"Review Sample",type:[r.EBOOK],back:function(e){return"SELECTED"==e.project.isDefaultSample?[o.Interior,o.InteriorSelectSample]:[o.Interior,o.InteriorUploadSample]},next:function(e){return e.project.isSPB||e.project.isPOD?[o.Cover,o.CoverType]:[o.Cover,o.CoverUpload]},access:function(e){return{canView:"CONVERTED"===e.project.interiorPdfConversionStatus,path:[o.Interior,o.InteriorUpload]}},inactive:function(e){return!(e.project.samplePreFlightCheckStatus&&e.project.interiorPreFlightCheckStatus&&e.project.isDefaultSample===r.CUSTOM_SAMPLE)}},{key:o.InteriorUpload,path:o.InteriorUpload,title:"Upload Interior",type:[r.EBOOK],back:function(e){return e.project.isSPB||e.project.isPOD?[o.Interior,o.InteriorFileType]:e.project.vendorRegistrationFirst?[o.Vendor,o.VendorTaxAndBankInformation]:null},next:[o.Interior,o.InteriorReview]},{key:o.InteriorReview,path:o.InteriorReview,title:"Review Interior",type:[r.EBOOK],back:[o.Interior,o.InteriorUpload],next:function(e){return e.project.isSPB||e.project.isPOD?[o.Cover,o.CoverType]:[o.Interior,o.InteriorSamplePreference]},inactive:function(e){return!e.project.interiorPreFlightCheckStatus}},{key:o.InteriorSamplePreference,path:o.InteriorSamplePreference,title:"Sample Preference",type:[r.EBOOK],back:[o.Interior,o.InteriorReview],next:[o.Cover,o.CoverUpload],access:function(e){return{canView:"CONVERTED"===e.project.interiorPdfConversionStatus,path:[o.Interior,o.InteriorUpload]}},inactive:function(e){return!e.project.interiorPreFlightCheckStatus}},{key:o.InteriorSelectSample,path:o.InteriorSelectSample,title:" Select Sample",type:[r.EBOOK],back:[o.Interior,o.InteriorSamplePreference],next:[o.Interior,o.InteriorReviewSample],inactive:function(e){return!(e.project.interiorPreFlightCheckStatus&&e.project.isDefaultSample===r.SELECTED_SAMPLE)}},{key:o.InteriorReviewSample,path:o.InteriorReviewSample,title:"Review Sample",type:[r.EBOOK],back:function(e){return"SELECTED"==e.project.isDefaultSample?[o.Interior,o.InteriorSelectSample]:[o.Interior,o.InteriorUploadSample]},next:function(e){return e.project.isSPB||e.project.isPOD?[o.Cover,o.CoverType]:[o.Cover,o.CoverUpload]},access:function(e){return{canView:"CONVERTED"===e.project.interiorPdfConversionStatus,path:[o.Interior,o.InteriorUpload]}},inactive:function(e){return!(e.project.samplePreFlightCheckStatus&&e.project.interiorPreFlightCheckStatus&&e.project.isDefaultSample===r.SELECTED_SAMPLE)}}]},{key:o.Cover,path:o.Cover,section:function(e){return e.project.isSPB||e.project.isPOD?[o.Cover,o.CoverType]:[o.Cover,o.CoverUpload]},title:"Cover",status:function(e){return e.project.getCoverStatus()},inactive:function(e){if(e.project.isSPB||e.project.isPOD)return!e.project.getBookSizeAndTypeStatus(!0)},access:function(e){return{canView:(e.project.isSPB||e.project.isPOD)&&e.project.getBookSizeAndTypeStatus(!0)||e.project.isEBook,path:[o.SizeAndType]}},redirect:!0,children:[{key:o.CoverType,path:o.CoverType,title:"Cover Type",back:function(e){return e.project.interiorPreFlightCheckStatus?[o.Interior,o.InteriorReview]:[o.Interior,o.InteriorUpload]},next:[o.Cover,o.CoverFormatting],type:[r.PRINT,r.POD],access:function(e){return{canView:e.project.isSPB||e.project.isPOD,path:[o.Cover,o.CoverUpload]}}},{key:o.CoverFormatting,path:o.CoverFormatting,title:"Formatting",back:[o.Cover,o.CoverType],next:[o.Cover,o.CoverImages],type:[r.PRINT,r.POD],access:function(e){return{canView:(e.project.isSPB||e.project.isPOD)&&e.project.coverType,path:e.project.isEBook?[o.Cover,o.CoverUpload]:[o.Cover,o.CoverType]}},inactive:function(e){return!e.project.coverType}},{key:o.CoverImages,path:o.CoverImages,title:"Images",back:[o.Cover,o.CoverFormatting],next:[o.Cover,o.CoverFonts],type:[r.PRINT,r.POD],access:function(e){return{canView:e.project.isSPB||e.project.isPOD,path:[o.Cover,o.CoverUpload]}},inactive:function(e){return!e.project.coverType}},{key:o.CoverFonts,path:o.CoverFonts,title:"Fonts",back:[o.Cover,o.CoverImages],next:[o.Cover,o.CoverFileType],type:[r.PRINT,r.POD],access:function(e){return{canView:e.project.isSPB||e.project.isPOD,path:[o.Cover,o.CoverUpload]}},inactive:function(e){return!e.project.coverType}},{key:o.CoverFileType,path:o.CoverFileType,title:"File Type",back:[o.Cover,o.CoverFonts],next:[o.Cover,o.CoverUpload],type:[r.PRINT,r.POD],access:function(e){return{canView:e.project.isSPB||e.project.isPOD,path:[o.Cover,o.CoverUpload]}},inactive:function(e){return!e.project.coverType}},{key:o.CoverUpload,path:o.CoverUpload,title:"Upload",back:function(e){return e.project.isEBook?l.default.hasCustomSamplingPermission(a.BAB_CUSTOM_SAMPLE)?e.project.interiorPreFlightCheckStatus?e.project.samplePreFlightCheckStatus?e.project.isDefaultSample===r.DEFAULT_SAMPLE?[o.Interior,o.InteriorSamplePreference]:[o.Interior,o.InteriorReviewSample]:[o.Interior,o.InteriorSamplePreference]:[o.Interior,o.InteriorUpload]:e.project.interiorPreFlightCheckStatus?[o.Interior,o.InteriorReview]:[o.Interior,o.InteriorUpload]:[o.Cover,o.CoverFileType]},next:function(e){var t=(e.project.isSPB||e.project.isPOD)&&e.project.coverType===r.COVER_TYPES.SEPARATE;return e.project.preOrder&&(e.project.coverType===r.COVER_TYPES.SEPARATE&&!e.project.coverFrontFile&&!e.project.coverBackFile||e.project.coverType===r.COVER_TYPES.FULL&&!e.project.coverFile)?[o.Details,o.DetailsAbout]:t?[o.Cover,o.CoverSpine]:[o.Cover,o.CoverReview]},inactive:function(e){return(e.project.isSPB||e.project.isPOD)&&!e.project.coverType}},{key:o.CoverSpine,path:o.CoverSpine,title:"Spine",back:[o.Cover,o.CoverUpload],next:[o.Cover,o.CoverReview],type:[r.PRINT,r.POD],access:function(e){var t=(e.project.isSPB||e.project.isPOD)&&e.project.coverType===r.COVER_TYPES.SEPARATE;return{canView:t&&e.project.interiorApproved,canViewLink:t,path:[o.Cover,o.CoverUpload]}},inactive:function(e){return e.project.isEBook||!e.project.coverType||!e.project.coverBackPreFlightCheckStatus||!e.project.coverFrontPreFlightCheckStatus||!e.project.interiorApproved}},{key:o.CoverReview,path:o.CoverReview,title:"Review",back:function(e){return(e.project.isSPB||e.project.isPOD)&&e.project.coverType===r.COVER_TYPES.SEPARATE?[o.Cover,o.CoverSpine]:[o.Cover,o.CoverUpload]},next:function(e){return e.project.isPOD?[o.Summary]:[o.Details,o.DetailsAbout]},access:function(e){return{canView:e.project.isEBook&&e.project.preOrder?e.project.coverFullPreFlightCheckStatus:e.project.coverFullPreFlightCheckStatus&&e.project.interiorApproved,path:[o.Cover,o.CoverUpload]}},inactive:function(e){var t;return t=!(!e.project.isEBook||!e.project.preOrder)||e.project.interiorApproved,!e.project.coverFullPreFlightCheckStatus||!t}}]},{key:o.Details,path:o.Details,section:[o.Details,o.DetailsAbout],title:"Book Details",type:[r.PRINT,r.EBOOK],status:function(e){return e.project.getBookDetailsStatus()},inactive:function(e){if(e.project.isSPB||e.project.isPOD)return!e.project.getBookSizeAndTypeStatus(!0)},access:function(e){return{canView:e.project.isSPB&&e.project.getBookSizeAndTypeStatus(!0)||e.project.isEBook,path:[o.SizeAndType]}},redirect:!0,children:[{key:o.DetailsAbout,path:o.DetailsAbout,title:"About",back:function(e){if(e.project.coverFullPreFlightCheckStatus)return[o.Cover,o.CoverReview];if(e.project.isSPB||e.project.isPOD){if(!e.project.coverType)return[o.Cover,o.CoverType];if(e.project.coverType===r.COVER_TYPES.SEPARATE&&e.project.coverFrontPreFlightCheckStatus&&e.project.coverBackPreFlightCheckStatus&&!e.project.spineColor)return[o.Cover,o.CoverSpine]}return[o.Cover,o.CoverUpload]},next:[o.Details,o.DetailsAuthor]},{key:o.DetailsAuthor,path:o.DetailsAuthor,title:"Author",back:[o.Details,o.DetailsAbout],next:[o.Details,o.DetailsCategories]},{key:o.DetailsCategories,path:o.DetailsCategories,title:"Categories",back:[o.Details,o.DetailsAuthor],next:[o.Details,o.DetailsPricing]},{key:o.DetailsPricing,path:o.DetailsPricing,title:"Pricing",back:[o.Details,o.DetailsCategories],next:[o.Details,o.DetailsRights]},{key:o.DetailsRights,path:o.DetailsRights,title:"Rights & Other Information",back:[o.Details,o.DetailsPricing],next:[o.Details,o.DetailsEditorials]},{key:o.DetailsEditorials,path:o.DetailsEditorials,title:"Editorial Reviews",back:[o.Details,o.DetailsRights],next:function(e){return e.project.isSPB?[o.Details,o.DetailsIsbn]:!i.default.getShowVendorSection(e.user.vendorStatus)||e.project.vendorRegistrationFirst?[o.Summary]:[o.Vendor,o.VendorPublisher]}},{key:o.DetailsIsbn,path:o.DetailsIsbn,title:"ISBN",back:[o.Details,o.DetailsEditorials],type:[r.PRINT],next:function(e){return!i.default.getShowVendorSection(e.user.vendorStatus)||e.project.vendorRegistrationFirst?[o.Summary]:[o.Vendor,o.VendorPublisher]},access:function(e){return{canView:e.project.isSPB,path:[o.Details,o.DetailsAbout]}}}]},{key:o.Vendor,path:o.Vendor,section:[o.Vendor,o.VendorPublisher],title:"Vendor Form",type:[r.PRINT,r.EBOOK],status:function(e){return s.default.getVendorAccountStatus()},redirect:!0,children:[{key:o.VendorPublisher,path:o.VendorPublisher,title:"Publisher",back:function(e){return e.project.vendorRegistrationFirst?null:e.project.isSPB?[o.Details,o.DetailsIsbn]:[o.Details,o.DetailsEditorials]},next:[o.Vendor,o.VendorTaxAndBankInformation]},{key:o.VendorTaxAndBankInformation,path:o.VendorTaxAndBankInformation,title:"Tax & Banking Information",back:[o.Vendor,o.VendorPublisher],next:function(e){return e.project.vendorRegistrationFirst?e.project.isSPB||e.project.isPOD?[o.SizeAndType]:[o.Interior,o.InteriorUpload]:[o.Summary]}}]},{key:o.Summary,path:o.Summary,section:[o.Summary],title:function(e){return e.project.isEBook||e.project.isSPB?"Review & Publish":"Review & Order"},back:function(e){return i.default.getShowVendorSection(e.user.vendorStatus)&&!e.project.vendorRegistrationFirst?[o.Vendor,o.VendorTaxAndBankInformation]:e.project.isSPB?[o.Details,o.DetailsIsbn]:e.project.isPOD?e.project.coverType?[o.Cover,o.CoverReview]:[o.Cover,o.CoverType]:[o.Details,o.DetailsEditorials]},next:[o.Summary],inactive:function(e){if(e.project.isSPB||e.project.isPOD)return!e.project.getBookSizeAndTypeStatus(!0)},access:function(e){return{canView:(e.project.isSPB||e.project.isPOD)&&e.project.getBookSizeAndTypeStatus(!0)||e.project.isEBook,path:[o.SizeAndType]}}}];t.default=d},1022:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryProjectGroups=function(e,t,n,o,a,r){var i={page:t,limit:n,isSeriesQuery:o,seriesQuery:a};e&&e.length&&(i.sortOption=e);return s.get("/api/projectgroups/query",{params:i},r)},t.queryGroupedProject=function(e){return s.get("/api/projectgroups/query-grouped-project/"+e)},t.loadExistingTitles=function(e){return s.get("/api/projectgroups/existing-titles",{},e)},t.clone=function(e,t){var n="/api/projectgroups/clone/"+e.groupProjectId+"/"+e.type+"?preOrder="+e.preOrder;return s.put(n,{},t)},t.setSaleStatus=function(e,t,n,o,a){return s.put("/api/project/setsalestatus",{id:e,onSale:t,finalContents:n,overridePromoWarning:o},a)};var s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(67))},1023:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(132)),a=r(n(64));function r(e){return e&&e.__esModule?e:{default:e}}var i={authorLastName:null,authorName:null,hasError:!(t.default=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,(0,o.default)(t||i)),this.seriesNumbers=this.seriesNumbers.map(function(e){return{title:e.title,seriesNumber:e.seriesNumber,projects:e.projects.map(function(e){return new a.default(e)})}})}),id:null,lastUpdated:null,normalizedTitle:null,seriesNumbers:[],title:null,versionCount:0,warnings:[]}},1024:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(7);function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function o(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.startTime=void 0,this.timeout=t,this.runningFunc=e,this.timeoutFunc=n,this.finish=this.finish.bind(this),this.run=this.run.bind(this)}var e,t,n;return e=o,(t=[{key:"run",value:function(){this.startTime||(this.startTime=(0,a.bn_moment)()),this._runTask()}},{key:"finish",value:function(){this.startTime=void 0}},{key:"_runTask",value:function(){(0,a.bn_moment)(this.startTime).add(this.timeout,"s").isSameOrBefore((0,a.bn_moment)())?this.timeoutFunc&&this.timeoutFunc():this.runningFunc()}}])&&r(e.prototype,t),n&&r(e,n),o}();t.default=o},1025:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterProjects=function(e,t){return t.suggestedSearch.toLowerCase().includes(e.toLowerCase().trim())},t.sortProjects=function(e,t){var n=[],o=[],a=[],r=[],i=e.toLowerCase().trim();return t.forEach(function(e){var t=e.suggestedSearch.toLowerCase();0===n.length&&t===i?n.push(e):t.startsWith(i+" ")?o.push(e):t.startsWith(i)?a.push(e):r.push(e)}),n.concat(o,a,r)}},1026:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadProjectSearches=function(e,t,n,o,a){r.loadProjectSearches(e,t,n,a).then(function(e){try{o(e)}catch(e){console.log(e)}})},t.loadProjectCoverSearches=function(e,t,n,o,a){r.loadProjectCoverSearches(e,t,n,a).then(function(e){try{o(e)}catch(e){console.log(e)}})},t.loadProjectCoverCoupon=function(e,t,n,o,a){r.loadProjectCoverCoupon(e,t,n,a).then(function(e){try{o(e)}catch(e){console.log(e)}})},t.loadProjectSearchesSingleUser=function(e,t,n,o,a){r.loadProjectSearchesSingleUser(e,t,n,a).then(function(e){try{o(e)}catch(e){console.log(e)}})},t.loadEaaSearches=function(e,t,n){r.loadEaaSearches(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadProjectSearchResults=function(e,o,t){r.loadProjectSearchResults(e,t).then(function(e){try{var t=e.totalCount,n=e.projects.map(function(e){return new a.default(e)});o({totalCount:t,projects:n})}catch(e){console.log(e)}})},t.loadAllContributors=function(t,e){r.loadAllContributors(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadSeriesNames=function(t,e){r.loadSeriesNames(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.lookupIsbn=function(e,t,n){r.lookupIsbn(e,n).then(function(e){try{t(new a.default(e))}catch(e){console.log(e)}})};var o,r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(1027)),a=(o=n(64))&&o.__esModule?o:{default:o}},1027:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAllContributors=function(e){return a.get("/api/search/contributors",{},e)},t.loadProjectSearches=function(e,t,n,o){return a.get("/api/search/project-searches/"+e+"/"+t+"/"+n,{},o)},t.loadProjectCoverSearches=function(e,t,n,o){return a.get("/api/search/project-searches/"+e+"/"+t+"/"+n,{},o)},t.loadProjectCoverCoupon=function(e,t,n,o){return a.get("/api/search/project-coupons/"+e+"/"+t+"/"+n,{},o)},t.loadProjectSearchesSingleUser=function(e,t,n,o){return a.get("/api/search/project-searches-single-user/"+e+"/"+n,{},o)},t.loadProjectSearchResults=function(e,t){return a.get("/api/search/search",{params:e},t)},t.loadSeriesNames=function(e){return a.get("/api/search/series-search",{},e)},t.lookupIsbn=function(e,t){return a.get("/api/search/isbn-lookup/"+e,{},t)},t.loadEaaSearches=function(e,t){return a.get("/api/search/eaa-searches/"+e,{},t)};var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(67))},1030:function(e,t,n){var o={"./en-au":520,"./en-au.js":520,"./en-ca":521,"./en-ca.js":521,"./en-gb":522,"./en-gb.js":522,"./en-ie":523,"./en-ie.js":523,"./en-nz":524,"./en-nz.js":524};function a(e){var t=r(e);return n(t)}function r(e){var t=o[e];if(t+1)return t;var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}a.keys=function(){return Object.keys(o)},a.resolve=r,(e.exports=a).id=1030},1035:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dismissBroadcastMessage=function(e,t,n){o.dismissBroadcastMessage(e,n).then(function(e){try{t(e)}catch(e){n(e)}})},t.getBroadcastMessages=function(t,n){o.loadBroadcastMessages(n).then(function(e){try{t(e)}catch(e){n(e)}})},t.loadFeatureModel=function(t,n){o.loadFeatureModel(n).then(function(e){try{t(e)}catch(e){n(e)}})},t.getPreviewMessage=function(t,n){o.loadPreviewMessage(n).then(function(e){try{t(e)}catch(e){n(e)}})},t.getMarketingMessages=function(t,e){o.loadMarketingMessages(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getPromotionMessages=function(t,e){o.loadPromotionMessages(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getPromotion=function(e,t,n){o.loadPromotion(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getStaticContent=function(e,t,n){o.getStaticContent(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadJWTgenerate=function(t,e){o.loadJWTgenerate(e).then(function(e){try{t(e)}catch(e){console.log(e)}})};var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(1036))},1036:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dismissBroadcastMessage=function(e,t){return o.post("/api/content/dismiss_broadcast_message",{messageId:e},t)},t.getStaticContent=function(e,t){return o.get("/api/content/static_content",{params:{url:e}},t)},t.loadBroadcastMessages=function(e){return o.get("/api/content/broadcast_messages",void 0,e)},t.loadFeatureModel=function(e){return o.get("/api/content/feature_model",void 0,e)},t.loadPreviewMessage=function(e){return o.get("/api/admin/preview-message",{},e)},t.loadPromotionMessages=function(e){return o.get("/api/content/promotion_messages?"+new Date,void 0,e)},t.loadPromotion=function(e,t){return o.get("/api/content/promotion/?id="+e,void 0,t)},t.loadMarketingMessages=function(e){return o.get("/api/content/marketing_messages?"+new Date,void 0,e)},t.loadJWTgenerate=function(e){return o.get("/api/content/promotion_messages_JWT",void 0,e)};var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(130))},1045:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=u(a).call(this,e))||"object"!==s(o)&&"function"!=typeof o?d(n):o).state={promo:e.promo,isDropdownOpen:!1},t.onDropdownToggle=t.onDropdownToggle.bind(d(d(t))),t.onStatusChange=t.onStatusChange.bind(d(d(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,r.default.Component),t=a,(n=[{key:"onDropdownToggle",value:function(){"COMPLETED"!==this.state.promo.status&&this.setState({isDropdownOpen:!this.state.isDropdownOpen})}},{key:"onStatusChange",value:function(e){var t=this;this.setState({isDropdownOpen:!1},function(){return t.props.onStatusChange(t.state.promo.id,e)})}},{key:"render",value:function(){var e=this,t=this.state,n=t.promo,o=t.isDropdownOpen;return r.default.createElement("div",{className:"approval-selector"},r.default.createElement("div",{onClick:this.onDropdownToggle,className:(0,i.default)("dropdown-overlay",{active:o})}),r.default.createElement("span",{onClick:this.onDropdownToggle,className:"approval-button "+n.status.toLowerCase()},r.default.createElement("div",{className:"status-indicator "+n.status.toLowerCase()}),r.default.createElement("span",{className:"icon-down"})),r.default.createElement("ul",{className:(0,i.default)("dropdown list-unstyled",{active:o})},r.default.createElement("li",{className:"action-pending",onClick:function(){return e.onStatusChange("PENDING")}},r.default.createElement("span",{className:"dot pending"}),"Â Pending"),r.default.createElement("li",{className:"action-approved",onClick:function(){return e.onStatusChange("APPROVED")}},r.default.createElement("span",{className:"dot approved"}),"Â Accept"),r.default.createElement("li",{className:"action-declined",onClick:function(){return e.onStatusChange("DECLINED")}},r.default.createElement("span",{className:"dot declined"}),"Â Decline")))}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=a},1046:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePromo=function(e,t){u.deletePromo(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadFilters=function(t){u.loadFilters().then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadPromoRules=function(t){u.loadMerchandisingPromoRules().then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadPromos=function(e,t,n,o,a,r,i,s,l){u.loadPromos(e,t,n,o,a,r,i,l).then(function(e){try{s(e)}catch(e){console.log(e)}})},t.submitPromo=function(e,t,n){u.submitPromo(e,n).then(function(e){try{e?t(e):n(e)}catch(e){n(e),console.log(e)}})},t.updatePromoStatus=function(e,t,n,o,a){u.updatePromoStatus(e,t,n,o).then(function(e){try{a(e)}catch(e){console.log(e)}})};var u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(1047))},1047:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePromo=function(e){return l.del("/api/merchandising/delete-promo/"+e)},t.loadFilters=function(){return l.get("/api/merchandising/promo-filters")},t.loadMerchandisingPromoRules=function(){return l.get("/api/merchandising/promo-rules")},t.loadPromos=function(e,t,n,o,a,r,i,s){return l.get("/api/merchandising/promos?status="+t+"&pageNum="+o+"&recordsPerPage="+a+"&promoType="+i+"&sortBy="+r+"&searchText="+n+(e?"&isAdmin=true":""),{},s)},t.submitPromo=function(e,t){return l.post("/api/merchandising/submit-promo",{promo:e},t)},t.updatePromoStatus=function(e,t,n,o){return l.put("/api/merchandising/update-promo-status",{ids:e,status:t,startDate:n,endDate:o})};var l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(67))},1048:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllBookDetails=function(e,t,n){o.getAllBookDetails(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getBestBook=function(t,e){o.getBestBook(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getAverageTimeToOpen=function(t,e){o.getAverageTimeToOpen(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getBookPageVisitorByDomain=function(e,t,n){o.getBookPageVisitorByDomain(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getCustomerDataForOtherAuthors=function(e,t,n){o.getCustomerDataForOtherAuthors(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getMapData=function(e,t,n){o.getMapData(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getPreviewPurchaseDetails=function(e,t,n){o.getPreviewPurchaseDetails(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getConsumptionData=function(e,t,n){o.getConsumptionData(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getBarGraphDetails=function(e,t,n){o.getBarGraphDetails(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getConsumptionBehaviorBarData=function(e,t,n){o.getConsumptionBehaviorBarData(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getReaderAverageCompletionRate=function(e,t,n){o.getReaderAverageCompletionRate(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getAllDoughnutData=function(e,t,n){o.getAllDoughnutData(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getAllLineGraphDetails=function(e,t,n){o.getAllLineGraphDetails(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})};var o=a(n(1049));a(n(15));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}},1049:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllBookDetails=function(e,t){return o.get("/api/analytics/AllResults",{params:{queryParameter:e}},t)},t.getAllLineGraphDetails=function(e,t){return o.get("/api/analytics/AllLineResults",{params:{queryParameter:e}},t)},t.getMapData=function(e,t){return o.get("/api/analytics/MapResults",{params:{queryParameter:e}},t)},t.getAllDoughnutData=function(e,t){return o.get("/api/analytics/doughnutResults",{params:{queryParameter:e}},t)},t.getPreviewPurchaseDetails=function(e,t){return o.get("/api/analytics/PurchasePreviewResult",{params:{queryParameter:e}},t)},t.getConsumptionData=function(e,t){return o.get("/api/analytics/ConsumptionResults",{params:{queryParameter:e}},t)},t.getConsumptionBehaviorBarData=function(e,t){return o.get("/api/analytics/ConsumptionBarResults",{params:{queryParameter:e}},t)},t.getBestBook=function(e,t){return o.get("/api/analytics/bestBook",{params:{queryParameter:e}},t)},t.getAverageTimeToOpen=function(e,t){return o.get("/api/analytics/averageTimeToOpen",{params:{queryParameter:e}},t)},t.getBookPageVisitorByDomain=function(e,t){return o.get("/api/analytics/bookPageVisitorByDomain",{params:{queryParameter:e}},t)},t.getReaderAverageCompletionRate=function(e,t){return o.get("/api/analytics/bookComplitionRateAverage",{params:{queryParameter:e}},t)},t.getCustomerDataForOtherAuthors=function(e,t){return o.get("/api/analytics/customerDataOtherAuthors",{params:{queryParameter:e}},t)},t.getBarGraphDetails=function(e,t){return o.get("/api/analytics/BarGraphDetails",{params:{queryParameter:e}},t)};var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(67))},1050:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=l(n(0)),c=n(7),d=n(24),r=l(n(62)),i=l(n(107)),s=l(n(6)),f=l(n(12)),a=l(n(92)),p=l(n(38)),m=o(n(91)),h=l(n(27)),y=o(n(9)),v=l(n(46)),b=l(n(3)),g=l(n(66));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C="BNPRESS_PRESENTS",k=function(e){function l(e){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),n=this,t=!(o=S(l).call(this,e))||"object"!==E(o)&&"function"!=typeof o?O(n):o;var a,r,i=e.adminInitPromo;r=i?(a=i.additionalComments,[i.ean]):(a=null,[]);var s=e.initPromo;e.promoId;return t.state={additionalComments:s?s.additionalComments:a,bookInputType:"title",eanList:s?[s.ean]:r,eansLoaded:!1,rulesList:[],rulesLoaded:!1,introduction:"",freeTitles:[],initEan:"",pubDate:null,valid:!1,fieldsItems:""},t.getRules=t.getRules.bind(O(O(t))),t.onAdditionalCommentsCommit=t.onAdditionalCommentsCommit.bind(O(O(t))),t.onBookInputTypeChange=t.onBookInputTypeChange.bind(O(O(t))),t.onDebounceSubmit=(0,d.debounce)(500,!0,t.onDebounceSubmit.bind(O(O(t)))),t.onDeleteEan=t.onDeleteEan.bind(O(O(t))),t.onEansLoaded=t.onEansLoaded.bind(O(O(t))),t.onRulesLoaded=t.onRulesLoaded.bind(O(O(t))),t.onEanCommit=t.onEanCommit.bind(O(O(t))),t.onSubmit=t.onSubmit.bind(O(O(t))),t.onCancel=t.onCancel.bind(O(O(t))),t.onTitleSelect=t.onTitleSelect.bind(O(O(t))),t.onValidationChange=t.onValidationChange.bind(O(O(t))),t.makeClick=t.makeClick.bind(O(O(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(l,u.default.Component),t=l,(n=[{key:"componentWillMount",value:function(){p.default.addProjectSearchesLoadedListener(this.onEansLoaded),a.default.addRulesListener(this.onRulesLoaded)}},{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),m.loadPromoRules()}},{key:"componentWillUnmount",value:function(){p.default.removeProjectSearchesLoadedListener(this.onEansLoaded),a.default.removeRulesListener(this.onRulesLoaded)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"getRules",value:function(){var e=[],t=this.state.rulesList,n=!0,o=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value;if(Array.isArray(s))for(var l in s)e.push(u.default.createElement("li",{className:"rules-list",key:s[l].name},u.default.createElement("a",{href:s[l].value,target:"_blank"},s[l].name)));else e.push(u.default.createElement("li",{className:"rules-list",key:s}," ",s," "))}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return e}},{key:"onAdditionalCommentsCommit",value:function(e){this.setState({additionalComments:e.newValue})}},{key:"onDeleteEan",value:function(e){this.setState({eanList:[],pubDate:null,valid:!1},this.onValidationChange)}},{key:"onEansLoaded",value:function(){var e,t,n=null;(t=this.props.initPromo?(e=this.props.initPromo.ean,p.default.findProjectByEan(e)):this.props.adminInitPromo?(e=this.props.adminInitPromo.ean,p.default.findProjectByEan(e)):p.default.findProjectByEan(this.state.eanList[0]))&&0!=this.state.eanList.length&&(n=(0,c.bn_moment)(t.publicationDate).format("MMM DD, YYYY")),this.setState({eansLoaded:!0,pubDate:n})}},{key:"onEanCommit",value:function(e){var t=this;if(""!==e.newValue){var n=[],o=this.state.eanList.slice(0),a=e.newValue.trim(),r=p.default.findProjectByEan(a),i=r?"true"==r.allowedForMerchPromo:null;this.props.isAdmin&&(i=!0),p.default.uniqueIsbns.includes(a)?!o.includes(a)&&i?(r&&r.publicationDate&&this.setState({pubDate:(0,c.bn_moment)(r.publicationDate).format("MMM DD, YYYY")}),o[0]=a,0==+r.listPrice&&this.state.freeTitles.push(r.newEans)):i||n.push(a):n.push(a),this.setState({eanList:o,valid:!0},function(){t.refs.eanList.setValue(n.join(" ")),t.onValidationChange(),0<n.length&&(i||null==i?t.refs.form.setServerSideValidationMessage("eanList","Please enter a valid on sale eBook EAN or one that belongs to you."):t.refs.form.setServerSideValidationMessage("eanList","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("eanList","Please enter an EAN.")}},{key:"onRulesLoaded",value:function(){this.setState({rulesLoaded:!0,rulesList:a.default.getMerchandisingPromoRules(C),introduction:a.default.getMerchandisingPromoIntro(C),fieldsItems:a.default.getMerchandisingPromoFormItems(C)})}},{key:"onSubmit",value:function(){this.onDebounceSubmit()}},{key:"onDebounceSubmit",value:function(){if(this.refs.form.valid()){var e={mercPromoType:C,ean:this.state.eanList[0],additionalComments:this.state.additionalComments,definitionId:this.state.fieldsItems.id};this.props.initPromo?e.id=this.props.initPromo.id:this.props.isAdmin&&(e.id=this.props.idAdminEdit,e.vendorNumber=this.props.vendorNumberAdminEdit),m.submitPromo(e)}}},{key:"onCancel",value:function(){this.setState({eanList:[],additionalComments:""}),this.refs.additionalDetailsList&&this.refs.additionalDetailsList.setValue(null),this.refs.bookInputType&&this.refs.bookInputType.setValue("title"),this.refs.bookTitle&&this.refs.bookTitle.setValue(null),this.props.onCancel()}},{key:"onBookInputTypeChange",value:function(e){this.setState({bookInputType:e.newValue})}},{key:"onTitleSelect",value:function(e){var t=this;if(""!==e.newValue){var n,o=[],a=this.state.eanList.slice(0),r=e.newValue.trim(),i=p.default.findProjectByTitle(r),s=i?i.ean:null,l=i?"true"==i.allowedForMerchPromo:null;this.props.isAdmin&&(l=!0),p.default.uniqueIsbns.includes(s)&&l?a.includes(s)?l||o.push(s):(a[0]=s,0==+i.listPrice&&this.state.freeTitles.push(i.newTitle),i&&i.publicationDate&&this.setState({pubDate:(0,c.bn_moment)(i.publicationDate).format("MMM DD, YYYY")})):o.push(s),n=s&&(l||null==l)?o.join(" "):r,this.setState({eanList:a,projectPrice:0<a.length?p.default.findProjectByEan(a[0]).listPrice:null,valid:!0},function(){t.refs.bookTitle.setValue(n),t.onValidationChange(),0<o.length&&(l||null==l?t.refs.form.setServerSideValidationMessage("bookTitle","Please enter a valid on sale eBook title or one that belongs to you."):t.refs.form.setServerSideValidationMessage("bookTitle","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("bookTitle","Please enter a Book Title.")}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()&&0<this.state.eanList.length})}},{key:"render",value:function(){var e=this.state,t=e.additionalComments,n=e.bookInputType,o=e.eanList,a=e.eansLoaded;return u.default.createElement("div",{className:"promoForm"},u.default.createElement(s.default,{ref:"form",onValidationChange:this.onValidationChange},u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"2"),u.default.createElement("h2",null,"Rules")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",null,u.default.createElement("ul",null,this.getRules())))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"3"),u.default.createElement("h2",null,"Select Book")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12 left"},"Enter a single eBook title or EAN that you would like to nominate for this promotion.",u.default.createElement("span",{className:"required-item-asterisk"},"*"))),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(h.default,{name:"bookInputType",ref:"bookInputType",onChange:this.onBookInputTypeChange,initValue:this.state.bookInputType,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"title",label:"Book Title"},{value:"ean",label:"EAN"}]}))),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-md-6 col-xs-12"},u.default.createElement("div",{className:"book-search"},"title"===n&&u.default.createElement(v.default,{name:"bookTitle",ref:"bookTitle",label:"Book Title",serverSideValidationKey:"bookTitle",hideSearchIcon:!0,titlesOnly:!0,adminEditMerchForm:this.props.isAdmin,vendorNumberAdminEdit:this.props.vendorNumberAdminEdit,filterOption:"EBOOK",onSubmit:this.onTitleSelect,onCommit:this.onTitleSelect,promoId:this.props.promoId,saleStatus:"ONSALE"}),"ean"===n&&u.default.createElement(f.default,{name:"eanList",autoComplete:"off",ref:"eanList",serverSideValidationKey:"eanList",label:"EAN",onCommit:this.onEanCommit,commitOnEnterKey:!0,rules:[y.numOnly()]}),a&&0<o.length&&u.default.createElement(i.default,{items:o,onDeleteEan:this.onDeleteEan,eansWithTitles:this.state.eansWithTitles})))))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"4"),u.default.createElement("h2",null,"Publication Date")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12"},"Titles must be published within the featured month or in the 2 weeks before or after the featured month.")),u.default.createElement("br",null),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12"},u.default.createElement("span",{className:"date-heading"},"Expected Pub Date"))),u.default.createElement("br",null),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12"},u.default.createElement("span",null,this.state.pubDate?this.state.pubDate:"--"))))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"5"),u.default.createElement("h2",null,"Additional Details")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(g.default,{name:"additionalDetails",autoComplete:"off",ref:"additionalDetailsList",label:"Please let us know...",initValue:t,onCommit:this.onAdditionalCommentsCommit,commitOnEnterKey:!1,showRemainingCharCount:!0,rules:[y.maxLength(2e3)]}))))),u.default.createElement("hr",null),u.default.createElement("div",{className:"coupon-content save-or-cancel"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(r.default,{buttonText:"Submit",ref:"submitButton",buttonModal:"modal",click:this.onSubmit,disabled:!this.state.valid}),u.default.createElement("span",{className:"cancel","data-dismiss":"modal",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onCancel},"Cancel"))))),!this.state.rulesLoaded&&u.default.createElement(b.default,null))}}])&&P(t.prototype,n),o&&P(t,o),l}();t.default=k},1051:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=s(n(0)),f=n(24),p=n(7),l=s(n(6)),a=o(n(91)),c=s(n(38)),m=s(n(27)),h=s(n(62)),y=s(n(66)),v=s(n(107)),b=o(n(9)),g=s(n(46)),E=s(n(76)),P=s(n(12)),r=s(n(92)),S=s(n(3)),i=o(n(22));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var A="UNDER_2_99",d=function(e){function d(e){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),n=this,t=!(o=C(d).call(this,e))||"object"!==_(o)&&"function"!=typeof o?T(n):o;var a,r,i,s,l,u=e.adminInitPromo;u?(a=u.additionalComments,r=[u.ean],i=u.promoPrice,u.startDate&&u.endDate&&(s=(0,p.bn_moment)(u.startDate),l=(0,p.bn_moment)(u.endDate))):(r=[],l=s=i=a=null);var c=e.initPromo;e.promoId;return t.state={additionalComments:c?c.additionalComments:a,bookInputType:"title",eanList:c?[c.ean]:r,eansLoaded:!1,endDate:c?(0,p.bn_moment)(c.endDate):l,freeTitles:[],initEan:"",introduction:"",loaded:!1,minDate:null,minEndDate:null,projectPrice:null,promoPrice:c?c.promoPrice:i,rulesList:[],rulesLoaded:!1,startDate:c?(0,p.bn_moment)(c.startDate):s,valid:!1,fieldsItems:"",isOldStartDate:!1,isOldEndDate:!1},t.getRules=t.getRules.bind(T(T(t))),t.onRulesLoaded=t.onRulesLoaded.bind(T(T(t))),t.onAdditionalCommentsCommit=t.onAdditionalCommentsCommit.bind(T(T(t))),t.onBookInputTypeChange=t.onBookInputTypeChange.bind(T(T(t))),t.onDebounceSubmit=(0,f.debounce)(500,!0,t.onDebounceSubmit.bind(T(T(t)))),t.onDeleteEan=t.onDeleteEan.bind(T(T(t))),t.onEansLoaded=t.onEansLoaded.bind(T(T(t))),t.onEanCommit=t.onEanCommit.bind(T(T(t))),t.onStartDateChanged=t.onStartDateChanged.bind(T(T(t))),t.onEndDateChanged=t.onEndDateChanged.bind(T(T(t))),t.onPromoPriceChanged=t.onPromoPriceChanged.bind(T(T(t))),t.onPromoPriceBlur=t.onPromoPriceBlur.bind(T(T(t))),t.onSubmit=t.onSubmit.bind(T(T(t))),t.onCancel=t.onCancel.bind(T(T(t))),t.onTitleSelect=t.onTitleSelect.bind(T(T(t))),t.onValidationChange=t.onValidationChange.bind(T(T(t))),t.makeClick=t.makeClick.bind(T(T(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(d,u.default.Component),t=d,(n=[{key:"componentWillMount",value:function(){c.default.addProjectSearchesLoadedListener(this.onEansLoaded),r.default.addRulesListener(this.onRulesLoaded)}},{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),a.loadPromoRules();var e=(0,p.bn_moment)().add(1,"day");this.setState({startDate:e,minDate:e,minEndDate:e.add(7,"day")})}},{key:"componentWillUnmount",value:function(){c.default.removeProjectSearchesLoadedListener(this.onEansLoaded),r.default.removeRulesListener(this.onRulesLoaded)}},{key:"getRules",value:function(){var e=[],t=this.state.rulesList,n=!0,o=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value;if(Array.isArray(s))for(var l in s)e.push(u.default.createElement("li",{className:"rules-list",key:s[l].name},u.default.createElement("a",{href:s[l].value,target:"_blank"},s[l].name)));else e.push(u.default.createElement("li",{className:"rules-list",key:s}," ",s," "))}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return e}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onAdditionalCommentsCommit",value:function(e){this.setState({additionalComments:e.newValue})}},{key:"onBookInputTypeChange",value:function(e){this.setState({bookInputType:e.newValue})}},{key:"onCancel",value:function(){this.setState({eanList:[],additionalComments:""}),this.refs.additionalDetailsList&&this.refs.additionalDetailsList.setValue(null),this.refs.bookInputType&&this.refs.bookInputType.setValue("title"),this.refs.bookTitle&&this.refs.bookTitle.setValue(null),this.props.onCancel()}},{key:"onDebounceSubmit",value:function(){var e,t;if(this.props.initPromo&&(0,p.bn_moment)(this.state.endDate).isSame((0,p.bn_moment)(this.props.initPromo.endDate))?(e=!0,t="User"):this.props.adminInitPromo&&(0,p.bn_moment)(this.state.endDate).isSame((0,p.bn_moment)(this.props.adminInitPromo.endDate))?(e=!0,t="Admin"):e=!1,e&&(this.props.initPromo&&(0,p.bn_moment)(this.props.initPromo.startDate).isBefore((0,p.bn_moment)(this.state.minEndDate))||this.props.adminInitPromo&&(0,p.bn_moment)(this.props.adminInitPromo.startDate).isBefore((0,p.bn_moment)(this.state.minEndDate)))&&this.setState({isOldStartDate:!0}),e&&(this.props.initPromo&&(0,p.bn_moment)(this.props.initPromo.endDate).isBefore((0,p.bn_moment)(this.state.minEndDate))||this.props.adminInitPromo&&(0,p.bn_moment)(this.props.adminInitPromo.endDate).isBefore((0,p.bn_moment)(this.state.minEndDate))))this.setState({isOldEndDate:!0}),i.smoothScrollToDateSection(t);else{if(!this.refs.form.valid())return;var n={mercPromoType:A,ean:this.state.eanList[0],additionalComments:this.state.additionalComments,regularPrice:this.state.projectPrice,promoPrice:this.state.promoPrice,startDate:this.state.startDate.format("MM/DD/YYYY"),endDate:this.state.endDate.format("MM/DD/YYYY"),definitionId:this.state.fieldsItems.id};this.props.initPromo?n.id=this.props.initPromo.id:this.props.isAdmin&&(n.id=this.props.idAdminEdit,n.vendorNumber=this.props.vendorNumberAdminEdit),this.setState({isOldStartDate:!1,isOldEndDate:!1}),a.submitPromo(n)}}},{key:"onDeleteEan",value:function(e){this.setState({eanList:[],projectPrice:null},this.refs.promoPrice.setValue(null),this.onValidationChange)}},{key:"onEanCommit",value:function(e){var t=this;if(""!==e.newValue){var n=[],o=this.state.eanList.slice(0),a=e.newValue.trim(),r=c.default.findProjectByEan(a),i=r?"true"==r.allowedForMerchPromo:null;this.props.isAdmin&&(i=!0),c.default.uniqueIsbns.includes(a)?!o.includes(a)&&i?(o[0]=a,this.refs.promoPrice.setValue(null),0==+r.listPrice&&this.state.freeTitles.push(r.newEans)):i||n.push(a):n.push(a),this.setState({eanList:o,projectPrice:0<o.length?c.default.findProjectByEan(o[0]).listPrice:null},function(){t.refs.eanList.setValue(n.join(" ")),t.onValidationChange(),0<n.length&&(i||null==i?t.refs.form.setServerSideValidationMessage("eanList","Please enter a valid on sale eBook EAN or one that belongs to you."):t.refs.form.setServerSideValidationMessage("eanList","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("eanList","Please enter an EAN.")}},{key:"onEansLoaded",value:function(){var e,t,n,o=this,a=null;(n=this.props.initPromo?(e=this.props.initPromo.ean,t=this.props.initPromo,c.default.findProjectByEan(e)):this.props.adminInitPromo?(e=this.props.adminInitPromo.ean,t=this.props.adminInitPromo,c.default.findProjectByEan(e)):c.default.findProjectByEan(this.state.eanList[0]))&&0!=this.state.eanList.length&&(a=n.listPrice),this.setState({eansLoaded:!0,projectPrice:a},function(){return t&&o.refs.promoPrice.setValue(Number(o.state.promoPrice).toFixed(2))})}},{key:"onEndDateChanged",value:function(e){var t=e.newValue,n=(0,p.bn_moment)(t).format("MM/DD/YYYY"),o=this.refs.startDate&&(0,p.bn_moment)(this.refs.startDate.value()).format("MM/DD/YYYY"),a=(0,p.bn_moment)(o).add(7,"days").format("MM/DD/YYYY"),r=(0,p.bn_moment)(o).add(28,"days").format("MM/DD/YYYY");t&&(this.refs.startDate&&t<=this.refs.startDate.value()&&(this.refs.endDate.setValue(null,!0),t=null),this.refs.startDate&&(new Date(n).valueOf()<new Date(a).valueOf()||new Date(n).valueOf()>new Date(r).valueOf())&&(this.refs.endDate.setValue(null,!0),t=null),(this.props.adminInitPromo||this.props.initPromo)&&((0,p.bn_moment)(e.newValue).isBefore((0,p.bn_moment)(this.state.minEndDate))&&(0,p.bn_moment)(e.newValue)==(0,p.bn_moment)(e.oldValue)?this.setState({isOldEndDate:!0}):this.setState({isOldEndDate:!1})),this.setState({endDate:t}))}},{key:"onPromoPriceChanged",value:function(e){this.setState({promoPrice:e.newValue})}},{key:"onPromoPriceBlur",value:function(){if(this.state.promoPrice){var e=Number(this.state.promoPrice).toFixed(2);this.refs.promoPrice.setValue(e)}}},{key:"onRulesLoaded",value:function(){this.setState({rulesLoaded:!0,rulesList:r.default.getMerchandisingPromoRules(A),introduction:r.default.getMerchandisingPromoIntro(A),fieldsItems:r.default.getMerchandisingPromoFormItems(A)})}},{key:"onStartDateChanged",value:function(e){var t=e.newValue;if(t){var n=t.clone().add(7,"days"),o=t.clone().add(28,"days");(this.props.adminInitPromo||this.props.initPromo)&&((0,p.bn_moment)(e.newValue).isBefore((0,p.bn_moment)(this.state.minEndDate))&&(0,p.bn_moment)(e.newValue)==(0,p.bn_moment)(e.oldValue)?this.setState({isOldStartDate:!0}):this.setState({isOldStartDate:!1})),this.setState({startDate:t,minEndDate:n,maxEndDate:o}),this.refs.endDate&&""!==this.refs.endDate.value()&&(new Date(n).valueOf()>new Date(this.refs.endDate.value()).valueOf()||new Date(this.refs.endDate.value()).valueOf()>new Date(o).valueOf())&&this.refs.endDate.setValue(null,!0)}}},{key:"onSubmit",value:function(){this.onDebounceSubmit()}},{key:"onTitleSelect",value:function(e){var t=this;if(""!==e.newValue){var n,o=[],a=this.state.eanList.slice(0),r=e.newValue.trim(),i=c.default.findProjectByTitle(r),s=i?i.ean:null,l=i?"true"==i.allowedForMerchPromo:null;this.props.isAdmin&&(l=!0),c.default.uniqueIsbns.includes(s)&&l?a.includes(s)?l||o.push(s):(a[0]=s,this.refs.promoPrice.setValue(null),0==+i.listPrice&&this.state.freeTitles.push(i.newTitle)):o.push(s),n=s&&(l||null==l)?o.join(" "):r,this.setState({eanList:a,projectPrice:0<a.length?c.default.findProjectByEan(a[0]).listPrice:null,valid:!0},function(){t.refs.bookTitle.setValue(n),t.onValidationChange(),0<o.length&&(l||null==l?t.refs.form.setServerSideValidationMessage("bookTitle","Please enter a valid on sale eBook title or one that belongs to you."):t.refs.form.setServerSideValidationMessage("bookTitle","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("bookTitle","Please enter a Book Title.")}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()&&0<this.state.eanList.length})}},{key:"render",value:function(){var e=this.state,t=e.additionalComments,n=e.bookInputType,o=e.eanList,a=e.eansLoaded,r=e.projectPrice,i=!0,s=!1;return this.props.initPromo&&(0,p.bn_moment)(this.state.endDate).isSame((0,p.bn_moment)(this.props.initPromo.endDate))?s=!0:this.props.adminInitPromo&&(0,p.bn_moment)(this.state.endDate).isSame((0,p.bn_moment)(this.props.adminInitPromo.endDate))&&(s=!0),s&&(this.props.initPromo&&(0,p.bn_moment)(this.props.initPromo.endDate).isBefore((0,p.bn_moment)(this.state.minEndDate))||this.props.adminInitPromo&&(0,p.bn_moment)(this.props.adminInitPromo.endDate).isBefore((0,p.bn_moment)(this.state.minEndDate)))&&(i=!1),u.default.createElement("div",{className:"promoForm"},u.default.createElement(l.default,{ref:"form",onSubmit:this.onSubmit,onValidationChange:this.onValidationChange},u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"2"),u.default.createElement("h2",null,"Rules")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",null,u.default.createElement("ul",null,this.getRules())))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"3"),u.default.createElement("h2",null,"Select Book")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12 left"},"Enter a single eBook title or EAN that you would like to nominate for this promotion.",u.default.createElement("span",{className:"required-item-asterisk"},"*"))),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(m.default,{name:"bookInputType",ref:"bookInputType",onChange:this.onBookInputTypeChange,initValue:this.state.bookInputType,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"title",label:"Book Title"},{value:"ean",label:"EAN"}]}))),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-md-6 col-xs-12"},u.default.createElement("div",{className:"book-search"},"title"===n&&u.default.createElement(g.default,{name:"bookTitle",ref:"bookTitle",label:"Book Title",serverSideValidationKey:"bookTitle",hideSearchIcon:!0,titlesOnly:!0,adminEditMerchForm:this.props.isAdmin,vendorNumberAdminEdit:this.props.vendorNumberAdminEdit,filterOption:"EBOOK",onSubmit:this.onTitleSelect,onCommit:this.onTitleSelect,promoId:this.props.promoId,saleStatus:"ONSALE"}),"ean"===n&&u.default.createElement(P.default,{name:"eanList",autoComplete:"off",ref:"eanList",serverSideValidationKey:"eanList",label:"EAN",onCommit:this.onEanCommit,commitOnEnterKey:!0,rules:[b.numOnly()]}),a&&0<o.length&&u.default.createElement(v.default,{items:o,onDeleteEan:this.onDeleteEan,eansWithTitles:this.state.eansWithTitles})))))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"4"),u.default.createElement("h2",null,"Price")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("p",null,"Books must be discounted $2.99 and under or set to free."),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-4 col-md-4 col-lg-2"},u.default.createElement("div",{className:"regular-price-container"},u.default.createElement("p",{className:"regular-price"},"Regular Price"),u.default.createElement("p",null,"$ ",Number(r).toFixed(2)))),u.default.createElement("div",{className:"col-xs-1 col-md-1 col-lg-1"},u.default.createElement("div",{className:"dollar-sign-label"},"$")),u.default.createElement("div",{className:"col-xs-7 col-md-7 col-lg-4"},u.default.createElement(P.default,{name:"promoPrice",ref:"promoPrice",label:"Promo Price",autoComplete:"off",onChange:this.onPromoPriceChanged,onBlur:this.onPromoPriceBlur,pattern:/^\d{0,5}(\.\d{0,2}|)$/,rules:[b.required("Promo price is missing."),b.validRanges([{min:0,max:0},{min:.99,max:2.99}],"Must be $0 or $.99 to $2.99")]}))))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"5"),u.default.createElement("h2",null,"Promotion Date")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12 left"},"Promotions must run for at least 7 days. Please select a date range from 1 to 4 weeks. The final promotional period will be up to the discretion of the B&N Press team."))),u.default.createElement("br",null),u.default.createElement("div",{className:"panel-body coupon-date-container pricePromoDate"},u.default.createElement("div",{className:this.state.isOldStartDate?"oldDate date-picker-frame":"date-picker-frame"},u.default.createElement("div",{className:"col-xs-7 date-picker-date"},this.state.isOldStartDate&&u.default.createElement("div",{className:"message error"},u.default.createElement("div",{className:"new-position"},"Please enter a future Start Date")),u.default.createElement(E.default,{name:"startDate",className:"coupon-date",serverSideValidationKey:"startDate",label:"Start Date",ref:"startDate",initValue:this.state.startDate,minDate:this.state.minDate,onChange:this.onStartDateChanged,rules:[b.required()],selectsStart:!0})),u.default.createElement("div",{className:"col-xs-5 date-picker-time-container"},u.default.createElement("span",{className:"date-picker-time"},"@ 12:00 AM ET"))),u.default.createElement("div",{className:"coupon-date-divider"},"TO"),u.default.createElement("div",{className:this.state.isOldEndDate?"oldDate date-picker-frame":"date-picker-frame"},u.default.createElement("div",{className:"col-xs-7 date-picker-date"},this.state.isOldEndDate&&u.default.createElement("div",{className:"message error"},u.default.createElement("div",{className:"new-position"},"Please enter a future End Date")),u.default.createElement(E.default,{name:"endDate",ref:"endDate",serverSideValidationKey:"endDate",label:"End Date",initValue:this.state.endDate,rules:[b.required()],selectsEnd:!0,minDate:this.state.minEndDate,maxDate:this.state.maxEndDate,onChange:this.onEndDateChanged})),u.default.createElement("div",{className:"col-xs-5 date-picker-time-container"},u.default.createElement("span",{className:"date-picker-time"},"@ 2:59 AM ET"))))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"6"),u.default.createElement("h2",null,"Additional Details")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("p",null,"Are you running any additional promotions (like BookBub) that youâ€™d like to tell us about or do you have any other comments at this time?"),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(y.default,{name:"additionalDetails",autoComplete:"off",ref:"additionalDetailsList",label:"Please let us know...",initValue:t,onCommit:this.onAdditionalCommentsCommit,commitOnEnterKey:!1,showRemainingCharCount:!0,rules:[b.maxLength(2e3)]}))))),u.default.createElement("hr",null),u.default.createElement("div",{className:"coupon-content save-or-cancel"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(h.default,{buttonText:"Submit",ref:"submitButton",buttonModal:i?"modal":"",click:this.onSubmit,disabled:!this.state.valid,shouldDisableAfterClicked:i}),u.default.createElement("span",{className:"cancel","data-dismiss":"modal",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onCancel},"Cancel"))))),!this.state.rulesLoaded&&u.default.createElement(S.default,null))}}])&&O(t.prototype,n),o&&O(t,o),d}();t.default=d},1052:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=i(n(0)),f=n(24),p=n(7),m=i(n(62)),h=i(n(76)),y=i(n(107)),v=i(n(6)),b=i(n(12)),a=i(n(92)),u=i(n(38)),r=o(n(91)),g=i(n(27)),E=o(n(9)),P=i(n(46)),S=i(n(3)),_=i(n(66));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var T="NOOK_FREE_FRIDAY",c=function(e){function c(e){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),n=this,t=!(o=C(c).call(this,e))||"object"!==O(o)&&"function"!=typeof o?k(n):o;var a,r,i,s=e.adminInitPromo;s?(a=s.additionalComments,r=[s.ean],s.startDate&&(i=(0,p.bn_moment)(s.startDate))):(r=[],i=a=null);var l=e.initPromo,u=(e.promoId,l&&"true"===l.flexDate||s&&"true"===s.flexDate||!(l||s));return t.state={blackoutDates:[],additionalComments:l?l.additionalComments:a,bookInputType:"title",eanList:l?[l.ean]:r,eansLoaded:!1,freeTitles:[],rulesList:[],rulesLoaded:!1,introduction:"",loaded:!1,valid:!1,validDate:!1,weekendChoice:u?"flexible":"specific",flexibleDate:u,startDate:l&&null!=l.startDate?(0,p.bn_moment)(l.startDate):i,minDate:null,maxDate:null,startDateNotInRange:!1,fieldsItems:""},t.getBlackoutDays=t.getBlackoutDays.bind(k(k(t))),t.getRules=t.getRules.bind(k(k(t))),t.onRulesLoaded=t.onRulesLoaded.bind(k(k(t))),t.onAdditionalCommentsCommit=t.onAdditionalCommentsCommit.bind(k(k(t))),t.onBookInputTypeChange=t.onBookInputTypeChange.bind(k(k(t))),t.onDebounceSubmit=(0,f.debounce)(500,!0,t.onDebounceSubmit.bind(k(k(t)))),t.onDeleteEan=t.onDeleteEan.bind(k(k(t))),t.onEansLoaded=t.onEansLoaded.bind(k(k(t))),t.onEanCommit=t.onEanCommit.bind(k(k(t))),t.onSubmit=t.onSubmit.bind(k(k(t))),t.onCancel=t.onCancel.bind(k(k(t))),t.onTitleSelect=t.onTitleSelect.bind(k(k(t))),t.onWeekendChoiceUpdate=t.onWeekendChoiceUpdate.bind(k(k(t))),t.onStartDateChanged=t.onStartDateChanged.bind(k(k(t))),t.onSubmissionErrorReceived=t.onSubmissionErrorReceived.bind(k(k(t))),t.onValidationChange=t.onValidationChange.bind(k(k(t))),t.makeClick=t.makeClick.bind(k(k(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(c,d.default.Component),t=c,(n=[{key:"componentWillMount",value:function(){u.default.addProjectSearchesLoadedListener(this.onEansLoaded),a.default.addRulesListener(this.onRulesLoaded),a.default.addPromoSubmissionErrorListener(this.onSubmissionErrorReceived)}},{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),r.loadPromoRules(),this.getBlackoutDays()}},{key:"componentWillUnmount",value:function(){u.default.removeProjectSearchesLoadedListener(this.onEansLoaded),a.default.removeRulesListener(this.onRulesLoaded),a.default.removePromoSubmissionErrorListener(this.onSubmissionErrorReceived)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"getBlackoutDays",value:function(){for(var e=[],t=(0,p.bn_moment)().day()<=5?5:12,n=(0,p.bn_moment)().day(t),o=n.clone().add(26,"weeks"),a=0;a<5;a++)e.push((0,p.bn_moment)().day(a).format("MM/DD/YYYY"));for(var r=t,i=0;r<365;r++,i++)i%7!=0&&0!=i&&e.push((0,p.bn_moment)().day(r).format("MM/DD/YYYY"));this.setState({blackoutDates:e,minDate:n,maxDate:o})}},{key:"getRules",value:function(){var e=[],t=this.state.rulesList,n=!0,o=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value;if(Array.isArray(s))for(var l in s)e.push(d.default.createElement("li",{className:"rules-list",key:s[l].name},d.default.createElement("a",{href:s[l].value,target:"_blank"},s[l].name)));else e.push(d.default.createElement("li",{className:"rules-list",key:s}," ",s," "))}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return e}},{key:"onAdditionalCommentsCommit",value:function(e){this.setState({additionalComments:e.newValue})}},{key:"onDeleteEan",value:function(e){this.setState({eanList:[],valid:!1},this.onValidationChange)}},{key:"onEansLoaded",value:function(){this.setState({eansLoaded:!0})}},{key:"onEanCommit",value:function(e){var t=this;if(""!==e.newValue){var n=[],o=this.state.eanList.slice(0),a=e.newValue.trim(),r=u.default.findProjectByEan(a),i=r?"true"==r.allowedForMerchPromo:null;if(this.props.isAdmin&&(i=!0),u.default.uniqueIsbns.includes(a))if(!o.includes(a)&&i){var s=u.default.findProjectByEan(a);o[0]=a,0==+s.listPrice&&this.state.freeTitles.push(s.newEans)}else i||n.push(a);else n.push(a);this.setState({eanList:o,valid:!0},function(){t.refs.eanList.setValue(n.join(" ")),t.onValidationChange(),0<n.length&&(i||null==i?t.refs.form.setServerSideValidationMessage("eanList","Please enter a valid on sale eBook EAN or one that belongs to you."):t.refs.form.setServerSideValidationMessage("eanList","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("eanList","Please enter an EAN.")}},{key:"onRulesLoaded",value:function(){this.setState({rulesLoaded:!0,rulesList:a.default.getMerchandisingPromoRules(T),introduction:a.default.getMerchandisingPromoIntro(T),fieldsItems:a.default.getMerchandisingPromoFormItems(T)})}},{key:"onSubmit",value:function(){this.onDebounceSubmit()}},{key:"onDebounceSubmit",value:function(){if(this.refs.form.valid()){var e={mercPromoType:T,ean:this.state.eanList[0],flexDate:this.state.flexibleDate,additionalComments:this.state.additionalComments,definitionId:this.state.fieldsItems.id};this.state.flexibleDate||(e.startDate=this.state.startDate.format("MM/DD/YYYY")),this.props.initPromo?e.id=this.props.initPromo.id:this.props.isAdmin&&(e.id=this.props.idAdminEdit,e.vendorNumber=this.props.vendorNumberAdminEdit),r.submitPromo(e)}}},{key:"onCancel",value:function(){this.setState({eanList:[],additionalComments:""}),this.refs.additionalDetailsList&&this.refs.additionalDetailsList.setValue(null),this.refs.bookInputType&&this.refs.bookInputType.setValue("title"),this.refs.bookTitle&&this.refs.bookTitle.setValue(null),this.props.onCancel()}},{key:"onBookInputTypeChange",value:function(e){this.setState({bookInputType:e.newValue})}},{key:"onStartDateChanged",value:function(e){var t=this,n=e.newValue,o=this.state.blackoutDates.slice(-1)[0],a=this.state.blackoutDates[0],r=null!==n&&(n.isBefore(a)||n.isAfter(o)||this.state.blackoutDates.includes(n.format("MM/DD/YYYY"))),i=!(0===this.state.eanList.length||!n||r);this.setState({startDate:i&&!r?n:null,valid:i,startDateNotInRange:r},function(){t.onValidationChange(),r&&t.refs.form.setServerSideValidationMessage("startDate","You must choose a future Friday within 6 months for this promotion.")})}},{key:"onTitleSelect",value:function(e){var t=this;if(""!==e.newValue){var n,o=[],a=this.state.eanList.slice(0),r=e.newValue.trim(),i=u.default.findProjectByTitle(r),s=i?i.ean:null,l=i?"true"==i.allowedForMerchPromo:null;this.props.isAdmin&&(l=!0),u.default.uniqueIsbns.includes(s)&&l?a.includes(s)?l||o.push(s):(a[0]=s,0==+i.listPrice&&this.state.freeTitles.push(i.newTitle)):o.push(s),n=s&&(l||null==l)?o.join(" "):r,this.setState({eanList:a,projectPrice:0<a.length?u.default.findProjectByEan(a[0]).listPrice:null,valid:!0},function(){t.refs.bookTitle.setValue(n),t.onValidationChange(),0<o.length&&(l||null==l?t.refs.form.setServerSideValidationMessage("bookTitle","Please enter a valid on sale eBook title or one that belongs to you."):t.refs.form.setServerSideValidationMessage("bookTitle","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("bookTitle","Please enter a Book Title.")}},{key:"onWeekendChoiceUpdate",value:function(e){this.setState({weekendChoice:e.newValue,flexibleDate:"flexible"===e.newValue})}},{key:"onSubmissionErrorReceived",value:function(){var e=a.default.getErrorMessage();e.includes("Day of week expected")&&(this.refs.form.setServerSideValidationMessage("startDate",e),this.setState({valid:!1}))}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()&&0<this.state.eanList.length}),this.setState({validDate:this.refs.form.valid()&&0<this.state.eanList.length&&!this.state.startDateNotInRange})}},{key:"render",value:function(){var e=this.state,t=e.additionalComments,n=e.blackoutDates,o=e.bookInputType,a=e.eanList,r=e.eansLoaded,i=e.weekendChoice,s=e.minDate,l=e.maxDate,u=e.startDate,c=d.default.createElement("div",null,d.default.createElement("p",null,"We recommend that you be flexible on your dates."),"specific"===i&&d.default.createElement("p",null,"You must choose a future Friday within 6 months for this promotion."));return d.default.createElement("div",{className:"promoForm"},d.default.createElement(v.default,{ref:"form",onSubmit:this.onSubmit,onValidationChange:this.onValidationChange},d.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},d.default.createElement("div",{className:"panel-header top-header"},d.default.createElement("div",{className:"section-number"},"2"),d.default.createElement("h2",null,"Rules")),d.default.createElement("div",{className:"panel-body"},d.default.createElement("div",null,d.default.createElement("ul",null,this.getRules())))),d.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},d.default.createElement("div",{className:"panel-header top-header"},d.default.createElement("div",{className:"section-number"},"3"),d.default.createElement("h2",null,"Select Book")),d.default.createElement("div",{className:"panel-body"},d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-xs-12 left"},"Enter a single eBook title or EAN that you would like to nominate for this promotion.",d.default.createElement("span",{className:"required-item-asterisk"},"*"))),d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-lg-12 col-xs-12"},d.default.createElement(g.default,{name:"bookInputType",ref:"bookInputType",onChange:this.onBookInputTypeChange,initValue:this.state.bookInputType,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"title",label:"Book Title"},{value:"ean",label:"EAN"}]}))),d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-md-6 col-xs-12"},d.default.createElement("div",{className:"book-search"},"title"===o&&d.default.createElement(P.default,{name:"bookTitle",ref:"bookTitle",label:"Book Title",serverSideValidationKey:"bookTitle",hideSearchIcon:!0,titlesOnly:!0,adminEditMerchForm:this.props.isAdmin,vendorNumberAdminEdit:this.props.vendorNumberAdminEdit,filterOption:"EBOOK",onSubmit:this.onTitleSelect,onCommit:this.onTitleSelect,promoId:this.props.promoId,saleStatus:"ONSALE"}),"ean"===o&&d.default.createElement(b.default,{name:"eanList",autoComplete:"off",ref:"eanList",serverSideValidationKey:"eanList",label:"EAN",onCommit:this.onEanCommit,commitOnEnterKey:!0,rules:[E.numOnly()]}),r&&0<a.length&&d.default.createElement(y.default,{items:a,onDeleteEan:this.onDeleteEan,eansWithTitles:this.state.eansWithTitles})))))),d.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},d.default.createElement("div",{className:"panel-header top-header"},d.default.createElement("div",{className:"section-number"},"4"),d.default.createElement("h2",null,"Preferred Weekend")),d.default.createElement("div",{className:"panel-body"},d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-xs-12 left"},c)),d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-lg-12 col-xs-12"},d.default.createElement(g.default,{name:"weekendChoice",ref:"weekendChoice",onChange:this.onWeekendChoiceUpdate,initValue:i,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"flexible",label:"Flexible on date"},{value:"specific",label:"Specific weekend (Fri - Sun)"}]}))),"specific"===i&&d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-md-6 col-xs-12"},d.default.createElement("div",{className:"date-picker-date"},d.default.createElement(h.default,{name:"startDate",serverSideValidationKey:"startDate",label:"Start Date",ref:"startDate",initValue:u,excludeDates:n,minDate:s,maxDate:l,onChange:this.onStartDateChanged,rules:[E.required()],selectsStart:!0})))))),d.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},d.default.createElement("div",{className:"panel-header top-header"},d.default.createElement("div",{className:"section-number"},"5"),d.default.createElement("h2",null,"Additional Details")),d.default.createElement("div",{className:"panel-body"},d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-lg-12 col-xs-12"},d.default.createElement(_.default,{name:"additionalDetails",autoComplete:"off",ref:"additionalDetailsList",label:"Please let us know...",initValue:t,onCommit:this.onAdditionalCommentsCommit,commitOnEnterKey:!1,showRemainingCharCount:!0,rules:[E.maxLength(2e3)]}))))),d.default.createElement("hr",null),d.default.createElement("div",{className:"coupon-content save-or-cancel"},d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"col-lg-12 col-xs-12"},d.default.createElement(m.default,{buttonText:"Submit",ref:"submitButton",buttonModal:"modal",click:this.onSubmit,disabled:"specific"===i?!this.state.validDate:!this.state.valid}),d.default.createElement("span",{className:"cancel","data-dismiss":"modal",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onCancel},"Cancel"))))),!this.state.rulesLoaded&&d.default.createElement(S.default,null))}}])&&s(t.prototype,n),o&&s(t,o),c}();t.default=c},1053:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=i(n(0)),p=n(24),m=n(7),l=i(n(6)),a=o(n(91)),c=i(n(38)),d=i(n(27)),h=i(n(62)),y=i(n(66)),v=i(n(107)),b=i(n(46)),r=i(n(92)),g=i(n(3)),E=o(n(9)),P=i(n(12)),S=i(n(76));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var T="NOOK_DAILY_FIND",f=function(e){function f(e){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),n=this,t=!(o=O(f).call(this,e))||"object"!==_(o)&&"function"!=typeof o?k(n):o;var a,r,i,s,l,u=e.adminInitPromo;u?(a=u.additionalComments,r=[u.ean],i=u.promoPrice,u.startDate&&u.endDate&&(s=(0,m.bn_moment)(u.startDate),l=(0,m.bn_moment)(u.endDate))):(r=[],l=s=i=a=null);var c=e.initPromo,d=(e.promoId,c&&"true"===c.flexDate||u&&"true"===u.flexDate||!(c||u));return t.state={additionalComments:c?c.additionalComments:a,bookInputType:"title",eanList:c?[c.ean]:r,eansLoaded:!1,endDate:c&&null!=c.endDate?(0,m.bn_moment)(c.endDate):l,flexibleDate:d,freeTitles:[],initEan:"",introduction:"",loaded:!1,maxDate:null,maxDayRange:90,minDate:null,minEndDate:null,projectPrice:null,promoPrice:c?c.promoPrice:i,rulesList:[],rulesLoaded:!1,startDate:c&&null!=c.startDate?(0,m.bn_moment)(c.startDate):s,valid:!1,weekendChoice:d?"flexible":"specific",fieldsItems:""},t.getRules=t.getRules.bind(k(k(t))),t.onAdditionalCommentsCommit=t.onAdditionalCommentsCommit.bind(k(k(t))),t.onBookInputTypeChange=t.onBookInputTypeChange.bind(k(k(t))),t.onCancel=t.onCancel.bind(k(k(t))),t.onDebounceSubmit=(0,p.debounce)(500,!0,t.onDebounceSubmit.bind(k(k(t)))),t.onDeleteEan=t.onDeleteEan.bind(k(k(t))),t.onEanCommit=t.onEanCommit.bind(k(k(t))),t.onEansLoaded=t.onEansLoaded.bind(k(k(t))),t.onEndDateChanged=t.onEndDateChanged.bind(k(k(t))),t.onRulesLoaded=t.onRulesLoaded.bind(k(k(t))),t.onPromoPriceChanged=t.onPromoPriceChanged.bind(k(k(t))),t.onPromoPriceBlur=t.onPromoPriceBlur.bind(k(k(t))),t.onStartDateChanged=t.onStartDateChanged.bind(k(k(t))),t.onSubmit=t.onSubmit.bind(k(k(t))),t.onTitleSelect=t.onTitleSelect.bind(k(k(t))),t.onValidationChange=t.onValidationChange.bind(k(k(t))),t.onWeekendChoiceUpdate=t.onWeekendChoiceUpdate.bind(k(k(t))),t.makeClick=t.makeClick.bind(k(k(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(f,u.default.Component),t=f,(n=[{key:"componentWillMount",value:function(){c.default.addProjectSearchesLoadedListener(this.onEansLoaded),r.default.addRulesListener(this.onRulesLoaded)}},{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),a.loadPromoRules()}},{key:"componentWillUnmount",value:function(){c.default.removeProjectSearchesLoadedListener(this.onEansLoaded),r.default.removeRulesListener(this.onRulesLoaded)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"getRules",value:function(){var e=[],t=this.state.rulesList,n=!0,o=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value;if(Array.isArray(s))for(var l in s)e.push(u.default.createElement("li",{className:"rules-list",key:s[l].name},u.default.createElement("a",{href:s[l].value,target:"_blank"},s[l].name)));else e.push(u.default.createElement("li",{className:"rules-list",key:s}," ",s," "))}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return e}},{key:"onAdditionalCommentsCommit",value:function(e){this.setState({additionalComments:e.newValue})}},{key:"onBookInputTypeChange",value:function(e){this.setState({bookInputType:e.newValue})}},{key:"onCancel",value:function(){this.setState({eanList:[],startDate:null,endDate:null,additionalComments:""}),this.refs.additionalDetailsList&&this.refs.additionalDetailsList.setValue(null),this.refs.bookInputType&&this.refs.bookInputType.setValue("title"),this.refs.bookTitle&&this.refs.bookTitle.setValue(null),this.refs.startDate&&this.refs.startDate.setValue(null,!0),this.refs.endDate&&this.refs.endDate.setValue(null,!0),this.props.onCancel()}},{key:"onDebounceSubmit",value:function(){if(this.refs.form.valid()){var e={additionalComments:this.state.additionalComments,ean:this.state.eanList[0],flexDate:this.state.flexibleDate,mercPromoType:T,promoPrice:this.state.promoPrice,regularPrice:this.state.projectPrice,definitionId:this.state.fieldsItems.id};this.state.flexibleDate||(e.startDate=this.state.startDate.format("MM/DD/YYYY"),e.endDate=this.state.endDate.format("MM/DD/YYYY")),this.props.initPromo?e.id=this.props.initPromo.id:this.props.isAdmin&&(e.id=this.props.idAdminEdit,e.vendorNumber=this.props.vendorNumberAdminEdit),a.submitPromo(e)}}},{key:"onDeleteEan",value:function(e){this.setState({eanList:[],projectPrice:null,valid:!1},this.refs.promoPrice.setValue(null),this.onValidationChange)}},{key:"onEanCommit",value:function(e){var t=this;if(""!==e.newValue){var n=[],o=this.state.eanList.slice(0),a=e.newValue.trim(),r=c.default.findProjectByEan(a),i=r?"true"==r.allowedForMerchPromo:null;if(this.props.isAdmin&&(i=!0),c.default.uniqueIsbns.includes(a))if(!o.includes(a)&&i){var s=c.default.findProjectByEan(a);o[0]=a,this.refs.promoPrice.setValue(null),0==+s.listPrice&&this.state.freeTitles.push(s.newEans)}else i||n.push(a);else n.push(a);this.setState({eanList:o,projectPrice:0<o.length?c.default.findProjectByEan(o[0]).listPrice:null,valid:!0},function(){t.refs.eanList.setValue(n.join(" ")),t.onValidationChange(),0<n.length&&(i||null==i?t.refs.form.setServerSideValidationMessage("eanList","Please enter a valid on sale eBook EAN or one that belongs to you."):t.refs.form.setServerSideValidationMessage("eanList","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("eanList","Please enter an EAN.")}},{key:"onEansLoaded",value:function(){var e,t,n,o=this,a=null;(n=this.props.initPromo?(e=this.props.initPromo.ean,t=this.props.initPromo,c.default.findProjectByEan(e)):this.props.adminInitPromo?(e=this.props.adminInitPromo.ean,t=this.props.adminInitPromo,c.default.findProjectByEan(e)):c.default.findProjectByEan(this.state.eanList[0]))&&0!=this.state.eanList.length&&(a=n.listPrice),this.setState({eansLoaded:!0,projectPrice:a},function(){return t&&o.refs.promoPrice.setValue(Number(o.state.promoPrice).toFixed(2))})}},{key:"onEndDateChanged",value:function(e){var t=e.newValue;t&&(this.refs.startDate&&t<=this.refs.startDate.value()&&(this.refs.endDate.setValue(null,!0),t=null),this.setState({endDate:t}))}},{key:"onPromoPriceChanged",value:function(e){this.setState({promoPrice:e.newValue})}},{key:"onPromoPriceBlur",value:function(){if(this.state.promoPrice){var e=Number(this.state.promoPrice).toFixed(2);this.refs.promoPrice.setValue(e)}}},{key:"onRulesLoaded",value:function(){this.setState({minDate:(0,m.bn_moment)().add(1,"day").startOf("day"),rulesLoaded:!0,rulesList:r.default.getMerchandisingPromoRules(T),introduction:r.default.getMerchandisingPromoIntro(T),fieldsItems:r.default.getMerchandisingPromoFormItems(T)})}},{key:"onStartDateChanged",value:function(e){var t=e.newValue;if(t){var n=null!==t&&t.clone().add(this.state.maxDayRange,"days");this.refs.endDate&&""!==this.refs.endDate.value()&&(t>=this.refs.endDate.value()||n<this.refs.endDate.value())&&this.refs.endDate.setValue(null,!0),this.refs.startDate&&""!==this.refs.startDate.value()&&t.isBefore(this.state.minDate)&&(this.refs.startDate.setValue(null,!0),t=null),this.setState({startDate:t,minEndDate:null!==t&&t.clone().add(1,"days"),maxDate:n})}}},{key:"onSubmit",value:function(){this.onDebounceSubmit()}},{key:"onTitleSelect",value:function(e){var t=this;if(""!==e.newValue){var n,o=[],a=this.state.eanList.slice(0),r=e.newValue.trim(),i=c.default.findProjectByTitle(r),s=i?i.ean:null,l=i?"true"==i.allowedForMerchPromo:null;this.props.isAdmin&&(l=!0),c.default.uniqueIsbns.includes(s)&&l?a.includes(s)?l||o.push(s):(a[0]=s,this.refs.promoPrice.setValue(null),0==+i.listPrice&&this.state.freeTitles.push(i.newTitle)):o.push(s),n=s&&(l||null==l)?o.join(" "):r,this.setState({eanList:a,projectPrice:0<a.length?c.default.findProjectByEan(a[0]).listPrice:null,valid:!0},function(){t.refs.bookTitle.setValue(n),t.onValidationChange(),0<o.length&&(l||null==l?t.refs.form.setServerSideValidationMessage("bookTitle","Please enter a valid on sale eBook title or one that belongs to you."):t.refs.form.setServerSideValidationMessage("bookTitle","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("bookTitle","Please enter a Book Title.")}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()&&0<this.state.eanList.length})}},{key:"onWeekendChoiceUpdate",value:function(e){this.setState({weekendChoice:e.newValue,flexibleDate:"flexible"===e.newValue})}},{key:"render",value:function(){var e=this.state,t=e.additionalComments,n=e.bookInputType,o=e.eanList,a=e.eansLoaded,r=e.projectPrice,i=(e.promoPrice,e.weekendChoice),s=u.default.createElement("div",null,u.default.createElement("p",null,"We recommend that you be flexible on your dates."),"specific"===i&&u.default.createElement("p",null,"Preferred date range from 1 day to 3 months."));return u.default.createElement("div",{className:"promoForm"},u.default.createElement(l.default,{ref:"form",onSubmit:this.onSubmit,onValidationChange:this.onValidationChange},u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"2"),u.default.createElement("h2",null,"Rules")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",null,u.default.createElement("ul",null,this.getRules())))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"3"),u.default.createElement("h2",null,"Select Book")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12 left"},"Enter a single eBook title or EAN that you would like to nominate for this promotion.",u.default.createElement("span",{className:"required-item-asterisk"},"*"))),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(d.default,{name:"bookInputType",ref:"bookInputType",onChange:this.onBookInputTypeChange,initValue:this.state.bookInputType,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"title",label:"Book Title"},{value:"ean",label:"EAN"}]}))),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-md-6 col-xs-12"},u.default.createElement("div",{className:"book-search"},"title"===n&&u.default.createElement(b.default,{name:"bookTitle",ref:"bookTitle",label:"Book Title",serverSideValidationKey:"bookTitle",hideSearchIcon:!0,titlesOnly:!0,adminEditMerchForm:this.props.isAdmin,vendorNumberAdminEdit:this.props.vendorNumberAdminEdit,filterOption:"EBOOK",onSubmit:this.onTitleSelect,onCommit:this.onTitleSelect,promoId:this.props.promoId,saleStatus:"ONSALE"}),"ean"===n&&u.default.createElement(P.default,{name:"eanList",autoComplete:"off",ref:"eanList",serverSideValidationKey:"eanList",label:"EAN",onCommit:this.onEanCommit,commitOnEnterKey:!0,rules:[E.numOnly()]}),a&&0<o.length&&u.default.createElement(v.default,{items:o,onDeleteEan:this.onDeleteEan,eansWithTitles:this.state.eansWithTitles})))))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"4"),u.default.createElement("h2",null,"Price")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("p",null,"If selected, the price will be updated by the B&N Press team for you."),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-4 col-md-4 col-lg-2"},u.default.createElement("div",{className:"regular-price-container"},u.default.createElement("p",{className:"regular-price"},"Regular Price"),u.default.createElement("p",null,"$ ",Number(r).toFixed(2)))),u.default.createElement("div",{className:"col-xs-1 col-md-1 col-lg-1"},u.default.createElement("div",{className:"dollar-sign-label"},"$")),u.default.createElement("div",{className:"col-xs-7 col-md-7 col-lg-4"},u.default.createElement(P.default,{name:"promoPrice",ref:"promoPrice",label:"Promo Price",autoComplete:"off",onChange:this.onPromoPriceChanged,onBlur:this.onPromoPriceBlur,pattern:/^\d{0,5}(\.\d{0,2}|)$/,rules:[E.required("Promo price is missing."),E.minValue(.99,"Minimum Promo Price is $.99"),E.maxValue(this.state.projectPrice/2,"Minimum 50% off Regular Price")]}))))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"5"),u.default.createElement("h2",null,"Preferred Date")),u.default.createElement("div",{className:"panel-body pricePromoDate"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12 left"},s)),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(d.default,{name:"weekendChoice",ref:"weekendChoice",onChange:this.onWeekendChoiceUpdate,initValue:i,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"flexible",label:"Flexible on date"},{value:"specific",label:"Date Range"}]}))),"specific"===i&&u.default.createElement("div",{className:"coupon-date-container"},u.default.createElement("div",{className:"date-picker-frame"},u.default.createElement("div",{className:"col-xs-7 date-picker-date"},u.default.createElement(S.default,{name:"startDate",className:"coupon-date",serverSideValidationKey:"startDate",label:"Start Date",ref:"startDate",initValue:this.state.startDate,minDate:this.state.minDate,onChange:this.onStartDateChanged,rules:[E.required()],selectsStart:!0})),u.default.createElement("div",{className:"col-xs-5 date-picker-time-container"},u.default.createElement("span",{className:"date-picker-time"},"@ 12:00 AM ET"))),u.default.createElement("div",{className:"coupon-date-divider"},"TO"),u.default.createElement("div",{className:"date-picker-frame"},u.default.createElement("div",{className:"col-xs-7 date-picker-date"},u.default.createElement(S.default,{name:"endDate",ref:"endDate",serverSideValidationKey:"endDate",label:"End Date",initValue:this.state.endDate,rules:[E.required()],selectsEnd:!0,minDate:this.state.minEndDate,maxDate:this.state.maxDate,onChange:this.onEndDateChanged})),u.default.createElement("div",{className:"col-xs-5 date-picker-time-container"},u.default.createElement("span",{className:"date-picker-time"},"@ 2:59 AM ET")))))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"6"),u.default.createElement("h2",null,"Additional Details")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(y.default,{name:"additionalDetails",autoComplete:"off",ref:"additionalDetailsList",label:"Please let us know...",onCommit:this.onAdditionalCommentsCommit,initValue:t,commitOnEnterKey:!1,showRemainingCharCount:!0,rules:[E.maxLength(2e3)]}))))),u.default.createElement("hr",null),u.default.createElement("div",{className:"coupon-content save-or-cancel"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(h.default,{buttonText:"Submit",ref:"submitButton",buttonModal:"modal",click:this.onSubmit,disabled:!this.state.valid}),u.default.createElement("span",{className:"cancel","data-dismiss":"modal",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onCancel},"Cancel"))))),!this.state.rulesLoaded&&u.default.createElement(g.default,null))}}])&&s(t.prototype,n),o&&s(t,o),f}();t.default=f},1054:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=i(n(0)),p=n(24),m=n(7),l=i(n(6)),a=o(n(91)),c=i(n(38)),d=i(n(27)),h=i(n(62)),y=i(n(66)),v=i(n(107)),b=i(n(46)),r=i(n(92)),g=i(n(3)),E=o(n(9)),P=i(n(12)),S=i(n(76));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var T="NOOK_DAILY_ROMANCE",f=function(e){function f(e){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),n=this,t=!(o=O(f).call(this,e))||"object"!==_(o)&&"function"!=typeof o?k(n):o;var a,r,i,s,l,u=e.adminInitPromo;u?(a=u.additionalComments,r=[u.ean],i=u.promoPrice,u.startDate&&u.endDate&&(s=(0,m.bn_moment)(u.startDate),l=(0,m.bn_moment)(u.endDate))):(r=[],l=s=i=a=null);var c=e.initPromo,d=c&&"true"===c.flexDate||u&&"true"===u.flexDate||!(c||u);return t.state={additionalComments:c?c.additionalComments:a,bookInputType:"title",eanList:c?[c.ean]:r,eansLoaded:!1,endDate:c&&null!=c.endDate?(0,m.bn_moment)(c.endDate):l,flexibleDate:d,freeTitles:[],initEan:"",introduction:"",loaded:!1,maxDate:null,maxDayRange:90,minDate:null,minEndDate:null,projectPrice:null,promoPrice:c?c.promoPrice:i,rulesList:[],rulesLoaded:!1,startDate:c&&null!=c.startDate?(0,m.bn_moment)(c.startDate):s,valid:!1,weekendChoice:d?"flexible":"specific",fieldsItems:""},t.getRules=t.getRules.bind(k(k(t))),t.onAdditionalCommentsCommit=t.onAdditionalCommentsCommit.bind(k(k(t))),t.onBookInputTypeChange=t.onBookInputTypeChange.bind(k(k(t))),t.onCancel=t.onCancel.bind(k(k(t))),t.onDebounceSubmit=(0,p.debounce)(500,!0,t.onDebounceSubmit.bind(k(k(t)))),t.onDeleteEan=t.onDeleteEan.bind(k(k(t))),t.onEansLoaded=t.onEansLoaded.bind(k(k(t))),t.onEanCommit=t.onEanCommit.bind(k(k(t))),t.onEndDateChanged=t.onEndDateChanged.bind(k(k(t))),t.onRulesLoaded=t.onRulesLoaded.bind(k(k(t))),t.onPromoPriceChanged=t.onPromoPriceChanged.bind(k(k(t))),t.onPromoPriceBlur=t.onPromoPriceBlur.bind(k(k(t))),t.onStartDateChanged=t.onStartDateChanged.bind(k(k(t))),t.onSubmit=t.onSubmit.bind(k(k(t))),t.onTitleSelect=t.onTitleSelect.bind(k(k(t))),t.onValidationChange=t.onValidationChange.bind(k(k(t))),t.onWeekendChoiceUpdate=t.onWeekendChoiceUpdate.bind(k(k(t))),t.makeClick=t.makeClick.bind(k(k(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(f,u.default.Component),t=f,(n=[{key:"componentWillMount",value:function(){c.default.addProjectSearchesLoadedListener(this.onEansLoaded),r.default.addRulesListener(this.onRulesLoaded)}},{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),a.loadPromoRules()}},{key:"componentWillUnmount",value:function(){c.default.removeProjectSearchesLoadedListener(this.onEansLoaded),r.default.removeRulesListener(this.onRulesLoaded)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"getRules",value:function(){var e=[],t=this.state.rulesList,n=!0,o=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value;if(Array.isArray(s))for(var l in s)e.push(u.default.createElement("li",{className:"rules-list",key:s[l].name},u.default.createElement("a",{href:s[l].value,target:"_blank"},s[l].name)));else e.push(u.default.createElement("li",{className:"rules-list",key:s}," ",s," "))}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return e}},{key:"onAdditionalCommentsCommit",value:function(e){this.setState({additionalComments:e.newValue})}},{key:"onBookInputTypeChange",value:function(e){this.setState({bookInputType:e.newValue})}},{key:"onCancel",value:function(){this.setState({eanList:[],startDate:null,endDate:null,additionalComments:""}),this.refs.additionalDetailsList&&this.refs.additionalDetailsList.setValue(null),this.refs.bookInputType&&this.refs.bookInputType.setValue("title"),this.refs.bookTitle&&this.refs.bookTitle.setValue(null),this.refs.startDate&&this.refs.startDate.setValue(null,!0),this.refs.endDate&&this.refs.endDate.setValue(null,!0),this.props.onCancel()}},{key:"onDebounceSubmit",value:function(){if(this.refs.form.valid()){var e={additionalComments:this.state.additionalComments,ean:this.state.eanList[0],flexDate:this.state.flexibleDate,mercPromoType:T,promoPrice:this.state.promoPrice,regularPrice:this.state.projectPrice,definitionId:this.state.fieldsItems.id};this.state.flexibleDate||(e.startDate=this.state.startDate.format("MM/DD/YYYY"),e.endDate=this.state.endDate.format("MM/DD/YYYY")),this.props.initPromo?e.id=this.props.initPromo.id:this.props.isAdmin&&(e.id=this.props.idAdminEdit,e.vendorNumber=this.props.vendorNumberAdminEdit),a.submitPromo(e)}}},{key:"onDeleteEan",value:function(e){this.setState({eanList:[],projectPrice:null,valid:!1},this.refs.promoPrice.setValue(null),this.onValidationChange)}},{key:"onEansLoaded",value:function(){var e,t,n,o=this,a=null;(n=this.props.initPromo?(e=this.props.initPromo.ean,t=this.props.initPromo,c.default.findProjectByEan(e)):this.props.adminInitPromo?(e=this.props.adminInitPromo.ean,t=this.props.adminInitPromo,c.default.findProjectByEan(e)):c.default.findProjectByEan(this.state.eanList[0]))&&0!=this.state.eanList.length&&(a=n.listPrice),this.setState({eansLoaded:!0,projectPrice:a},function(){return t&&o.refs.promoPrice.setValue(Number(o.state.promoPrice).toFixed(2))})}},{key:"onEanCommit",value:function(e){var t=this;if(""!==e.newValue){var n=[],o=this.state.eanList.slice(0),a=e.newValue.trim();if(c.default.uniqueIsbns.includes(a)){if(!o.includes(a)){var r=c.default.findProjectByEan(a);o[0]=a,this.refs.promoPrice.setValue(null),0==+r.listPrice&&this.state.freeTitles.push(r.newEans)}}else n.push(a);this.setState({eanList:o,projectPrice:0<o.length?c.default.findProjectByEan(o[0]).listPrice:null,valid:!0},function(){t.refs.eanList.setValue(n.join(" ")),t.onValidationChange(),0<n.length&&t.refs.form.setServerSideValidationMessage("eanList","Please enter a valid on sale eBook EAN or one that belongs to you.")})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("eanList","Please enter an EAN.")}},{key:"onEndDateChanged",value:function(e){var t=e.newValue;t&&(this.refs.startDate&&t<=this.refs.startDate.value()&&(this.refs.endDate.setValue(null,!0),t=null),this.setState({endDate:t}))}},{key:"onPromoPriceChanged",value:function(e){this.setState({promoPrice:e.newValue})}},{key:"onPromoPriceBlur",value:function(){if(this.state.promoPrice){var e=Number(this.state.promoPrice).toFixed(2);this.refs.promoPrice.setValue(e)}}},{key:"onRulesLoaded",value:function(){this.setState({minDate:(0,m.bn_moment)().add(1,"day").startOf("day"),rulesLoaded:!0,rulesList:r.default.getMerchandisingPromoRules(T),introduction:r.default.getMerchandisingPromoIntro(T),fieldsItems:r.default.getMerchandisingPromoFormItems(T)})}},{key:"onStartDateChanged",value:function(e){var t=e.newValue;if(t){var n=null!==t&&t.clone().add(this.state.maxDayRange,"days");this.refs.endDate&&""!==this.refs.endDate.value()&&(t>=this.refs.endDate.value()||n<this.refs.endDate.value())&&this.refs.endDate.setValue(null,!0),this.refs.startDate&&""!==this.refs.startDate.value()&&t.isBefore(this.state.minDate)&&(this.refs.startDate.setValue(null,!0),t=null),this.setState({startDate:t,minEndDate:null!==t&&t.clone().add(1,"days"),maxDate:n})}}},{key:"onSubmit",value:function(){this.onDebounceSubmit()}},{key:"onTitleSelect",value:function(e){var t=this;if(""!==e.newValue){var n,o=[],a=this.state.eanList.slice(0),r=e.newValue.trim(),i=c.default.findProjectByTitle(r),s=i?i.ean:null;c.default.uniqueIsbns.includes(s)?a.includes(s)||(a[0]=s,this.refs.promoPrice.setValue(null),0==+i.listPrice&&this.state.freeTitles.push(i.newTitle)):o.push(s),n=s?o.join(" "):r,this.setState({eanList:a,projectPrice:0<a.length?c.default.findProjectByEan(a[0]).listPrice:null,valid:!0},function(){t.refs.bookTitle.setValue(n),t.onValidationChange(),0<o.length&&t.refs.form.setServerSideValidationMessage("bookTitle","Please enter a valid on sale eBook title or one that belongs to you.")})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("bookTitle","Please enter a Book Title.")}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()&&0<this.state.eanList.length})}},{key:"onWeekendChoiceUpdate",value:function(e){this.setState({weekendChoice:e.newValue,flexibleDate:"flexible"===e.newValue})}},{key:"render",value:function(){var e=this.state,t=e.additionalComments,n=e.bookInputType,o=e.eanList,a=e.eansLoaded,r=e.projectPrice,i=e.weekendChoice,s=u.default.createElement("div",null,u.default.createElement("p",null,"We recommend that you be flexible on your dates."),"specific"===i&&u.default.createElement("p",null,"Preferred date range from 1 day to 3 months."));return u.default.createElement("div",{className:"promoForm"},u.default.createElement(l.default,{ref:"form",onSubmit:this.onSubmit,onValidationChange:this.onValidationChange},u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"2"),u.default.createElement("h2",null,"Rules")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",null,u.default.createElement("ul",null,this.getRules())))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"3"),u.default.createElement("h2",null,"Select Book")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12 left"},"Enter a single eBook title or EAN that you would like to nominate for this promotion.",u.default.createElement("span",{className:"required-item-asterisk"},"*"))),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(d.default,{name:"bookInputType",ref:"bookInputType",onChange:this.onBookInputTypeChange,initValue:this.state.bookInputType,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"title",label:"Book Title"},{value:"ean",label:"EAN"}]}))),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-md-6 col-xs-12"},u.default.createElement("div",{className:"book-search"},"title"===n&&u.default.createElement(b.default,{name:"bookTitle",ref:"bookTitle",label:"Book Title",serverSideValidationKey:"bookTitle",hideSearchIcon:!0,titlesOnly:!0,adminEditMerchForm:this.props.isAdmin,vendorNumberAdminEdit:this.props.vendorNumberAdminEdit,filterOption:"EBOOK",onSubmit:this.onTitleSelect,onCommit:this.onTitleSelect,saleStatus:"ONSALE"}),"ean"===n&&u.default.createElement(P.default,{name:"eanList",autoComplete:"off",ref:"eanList",serverSideValidationKey:"eanList",label:"EAN",onCommit:this.onEanCommit,commitOnEnterKey:!0,rules:[E.numOnly()]}),a&&0<o.length&&u.default.createElement(v.default,{items:o,onDeleteEan:this.onDeleteEan,eansWithTitles:this.state.eansWithTitles})))))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"4"),u.default.createElement("h2",null,"Price")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("p",null,"If selected, the price will be updated by the B&N Press team for you."),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-4 col-md-4 col-lg-2"},u.default.createElement("div",{className:"regular-price-container"},u.default.createElement("p",{className:"regular-price"},"Regular Price"),u.default.createElement("p",null,"$ ",Number(r).toFixed(2)))),u.default.createElement("div",{className:"col-xs-1 col-md-1 col-lg-1"},u.default.createElement("div",{className:"dollar-sign-label"},"$")),u.default.createElement("div",{className:"col-xs-7 col-md-7 col-lg-4"},u.default.createElement(P.default,{name:"promoPrice",ref:"promoPrice",label:"Promo Price",autoComplete:"off",onChange:this.onPromoPriceChanged,onBlur:this.onPromoPriceBlur,pattern:/^\d{0,5}(\.\d{0,2}|)$/,rules:[E.required("Promo price is missing."),E.validRanges([{min:0,max:this.state.projectPrice/2}],"Minimum 50% off Regular Price")]}))))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"5"),u.default.createElement("h2",null,"Preferred Date")),u.default.createElement("div",{className:"panel-body pricePromoDate"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-xs-12 left"},s)),u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(d.default,{name:"weekendChoice",ref:"weekendChoice",onChange:this.onWeekendChoiceUpdate,initValue:i,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"flexible",label:"Flexible on date"},{value:"specific",label:"Date Range"}]}))),"specific"===i&&u.default.createElement("div",{className:"coupon-date-container"},u.default.createElement("div",{className:"date-picker-frame"},u.default.createElement("div",{className:"col-xs-7 date-picker-date"},u.default.createElement(S.default,{name:"startDate",className:"coupon-date",serverSideValidationKey:"startDate",label:"Start Date",ref:"startDate",initValue:this.state.startDate,minDate:this.state.minDate,onChange:this.onStartDateChanged,rules:[E.required()],selectsStart:!0})),u.default.createElement("div",{className:"col-xs-5 date-picker-time-container"},u.default.createElement("span",{className:"date-picker-time"},"@ 12:00 AM ET"))),u.default.createElement("div",{className:"coupon-date-divider"},"TO"),u.default.createElement("div",{className:"date-picker-frame"},u.default.createElement("div",{className:"col-xs-7 date-picker-date"},u.default.createElement(S.default,{name:"endDate",ref:"endDate",serverSideValidationKey:"endDate",label:"End Date",initValue:this.state.endDate,rules:[E.required()],selectsEnd:!0,minDate:this.state.minEndDate,maxDate:this.state.maxDate,onChange:this.onEndDateChanged})),u.default.createElement("div",{className:"col-xs-5 date-picker-time-container"},u.default.createElement("span",{className:"date-picker-time"},"@ 2:59 AM ET")))))),u.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},u.default.createElement("div",{className:"panel-header top-header"},u.default.createElement("div",{className:"section-number"},"6"),u.default.createElement("h2",null,"Additional Details")),u.default.createElement("div",{className:"panel-body"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(y.default,{name:"additionalDetails",autoComplete:"off",ref:"additionalDetailsList",label:"Please let us know...",onCommit:this.onAdditionalCommentsCommit,initValue:t,commitOnEnterKey:!1,showRemainingCharCount:!0,rules:[E.maxLength(2e3)]}))))),u.default.createElement("hr",null),u.default.createElement("div",{className:"coupon-content save-or-cancel"},u.default.createElement("div",{className:"row"},u.default.createElement("div",{className:"col-lg-12 col-xs-12"},u.default.createElement(h.default,{buttonText:"Submit",ref:"submitButton",buttonModal:"modal",click:this.onSubmit,disabled:!this.state.valid}),u.default.createElement("span",{className:"cancel","data-dismiss":"modal",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onCancel},"Cancel"))))),!this.state.rulesLoaded&&u.default.createElement(g.default,null))}}])&&s(t.prototype,n),o&&s(t,o),f}();t.default=f},1055:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=u(n(0)),d=n(24),i=(n(7),u(n(6))),a=o(n(91)),l=u(n(38)),s=u(n(27)),f=u(n(62)),p=u(n(66)),m=u(n(107)),h=u(n(46)),r=u(n(92)),y=u(n(3)),v=o(n(9)),b=u(n(12));o(n(60));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var O="NOOK_HAUL",C=function(e){function u(e){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),n=this,t=!(o=P(u).call(this,e))||"object"!==g(o)&&"function"!=typeof o?_(n):o;var a,r,i,s=e.adminInitPromo;i=s?(a=s.additionalComments,r=[s.ean],s.promoPrice):(r=[],a=null);var l=e.initPromo;return t.state={additionalComments:l?l.additionalComments:a,bookInputType:"title",eanList:l?[l.ean]:r,eansLoaded:!1,freeTitles:[],initEan:"",introduction:"",loaded:!1,projectPrice:null,promoPrice:l?l.promoPrice:i,rulesList:[],rulesLoaded:!1,valid:!1,fieldsItems:""},t.getRules=t.getRules.bind(_(_(t))),t.onAdditionalCommentsCommit=t.onAdditionalCommentsCommit.bind(_(_(t))),t.onBookInputTypeChange=t.onBookInputTypeChange.bind(_(_(t))),t.onCancel=t.onCancel.bind(_(_(t))),t.onDebounceSubmit=(0,d.debounce)(500,!0,t.onDebounceSubmit.bind(_(_(t)))),t.onDeleteEan=t.onDeleteEan.bind(_(_(t))),t.onEanCommit=t.onEanCommit.bind(_(_(t))),t.onEansLoaded=t.onEansLoaded.bind(_(_(t))),t.onRulesLoaded=t.onRulesLoaded.bind(_(_(t))),t.onPromoPriceChanged=t.onPromoPriceChanged.bind(_(_(t))),t.onPromoPriceBlur=t.onPromoPriceBlur.bind(_(_(t))),t.onSubmit=t.onSubmit.bind(_(_(t))),t.onTitleSelect=t.onTitleSelect.bind(_(_(t))),t.onValidationChange=t.onValidationChange.bind(_(_(t))),t.makeClick=t.makeClick.bind(_(_(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(u,c.default.Component),t=u,(n=[{key:"componentWillMount",value:function(){l.default.addProjectSearchesLoadedListener(this.onEansLoaded),r.default.addRulesListener(this.onRulesLoaded)}},{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),a.loadPromoRules()}},{key:"componentWillUnmount",value:function(){l.default.removeProjectSearchesLoadedListener(this.onEansLoaded),r.default.removeRulesListener(this.onRulesLoaded)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"getRules",value:function(){var e=[],t=this.state.rulesList,n=!0,o=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value;if(Array.isArray(s))for(var l in s)e.push(c.default.createElement("li",{className:"rules-list",key:s[l].name},c.default.createElement("a",{href:s[l].value,target:"_blank"},s[l].name)));else e.push(c.default.createElement("li",{className:"rules-list",key:s}," ",s," "))}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return e}},{key:"onAdditionalCommentsCommit",value:function(e){this.setState({additionalComments:e.newValue})}},{key:"onBookInputTypeChange",value:function(e){this.setState({bookInputType:e.newValue})}},{key:"onCancel",value:function(){this.setState({eanList:[],additionalComments:""}),this.refs.additionalDetailsList&&this.refs.additionalDetailsList.setValue(null),this.refs.bookInputType&&this.refs.bookInputType.setValue("title"),this.refs.bookTitle&&this.refs.bookTitle.setValue(null),this.refs.promoPrice&&this.refs.promoPrice.setValue(null),this.props.onCancel()}},{key:"onDebounceSubmit",value:function(){if(this.refs.form.valid()){var e={additionalComments:this.state.additionalComments,ean:this.state.eanList[0],mercPromoType:O,promoPrice:this.state.promoPrice,regularPrice:this.state.projectPrice,definitionId:this.state.fieldsItems.id};this.props.initPromo?e.id=this.props.initPromo.id:this.props.isAdmin&&(e.id=this.props.idAdminEdit,e.vendorNumber=this.props.vendorNumberAdminEdit),a.submitPromo(e)}}},{key:"onDeleteEan",value:function(e){this.setState({eanList:[],projectPrice:null,valid:!1},this.refs.promoPrice.setValue(null),this.onValidationChange)}},{key:"onEanCommit",value:function(e){var t=this;if(""!==e.newValue){var n=[],o=this.state.eanList.slice(0),a=e.newValue.trim();if(l.default.uniqueIsbns.includes(a)){if(!o.includes(a)){var r=l.default.findProjectByEan(a);o[0]=a,this.refs.promoPrice.setValue(null),0==+r.listPrice&&this.state.freeTitles.push(r.newEans)}}else n.push(a);this.setState({eanList:o,projectPrice:0<o.length?l.default.findProjectByEan(o[0]).listPrice:null,valid:!0},function(){t.refs.eanList.setValue(n.join(" ")),t.onValidationChange(),0<n.length&&t.refs.form.setServerSideValidationMessage("eanList","Please enter a valid on sale eBook EAN or one that belongs to you.")})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("eanList","Please enter an EAN.")}},{key:"onEansLoaded",value:function(){var e,t,n,o=this,a=null;(t=this.props.initPromo?(e=this.props.initPromo.ean,n=this.props.initPromo,l.default.findProjectByEan(e)):this.props.adminInitPromo?(e=this.props.adminInitPromo.ean,n=this.props.adminInitPromo,l.default.findProjectByEan(e)):l.default.findProjectByEan(this.state.eanList[0]))&&0!=this.state.eanList.length&&(a=t.listPrice),this.setState({eansLoaded:!0,projectPrice:a},function(){return n&&o.refs.promoPrice.setValue(Number(o.state.promoPrice).toFixed(2))})}},{key:"onPromoPriceChanged",value:function(e){this.setState({promoPrice:e.newValue})}},{key:"onPromoPriceBlur",value:function(){if(this.state.promoPrice){var e=Number(this.state.promoPrice).toFixed(2);this.refs.promoPrice.setValue(e)}}},{key:"onRulesLoaded",value:function(){this.setState({rulesLoaded:!0,rulesList:r.default.getMerchandisingPromoRules(O),introduction:r.default.getMerchandisingPromoIntro(O),fieldsItems:r.default.getMerchandisingPromoFormItems(O)})}},{key:"onSubmit",value:function(){this.onDebounceSubmit()}},{key:"onTitleSelect",value:function(e){var t=this;if(""!==e.newValue){var n,o=[],a=this.state.eanList.slice(0),r=e.newValue.trim(),i=l.default.findProjectByTitle(r),s=i?i.ean:null;l.default.uniqueIsbns.includes(s)?a.includes(s)||(a[0]=s,this.refs.promoPrice.setValue(null),0==+i.listPrice&&this.state.freeTitles.push(i.newTitle)):o.push(s),n=s?o.join(" "):r,this.setState({eanList:a,projectPrice:0<a.length?l.default.findProjectByEan(a[0]).listPrice:null,valid:!0},function(){t.refs.bookTitle.setValue(n),t.onValidationChange(),0<o.length&&t.refs.form.setServerSideValidationMessage("bookTitle","Please enter a valid on sale eBook title or one that belongs to you.")})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("bookTitle","Please enter a Book Title.")}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()&&0<this.state.eanList.length})}},{key:"render",value:function(){var e=this.state,t=e.additionalComments,n=e.bookInputType,o=e.eanList,a=e.eansLoaded,r=e.projectPrice;e.promoPrice;return c.default.createElement("div",{className:"promoForm"},c.default.createElement(i.default,{ref:"form",onSubmit:this.onSubmit,onValidationChange:this.onValidationChange},c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"2"),c.default.createElement("h2",null,"Rules")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",null,c.default.createElement("ul",null,this.getRules())))),c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"3"),c.default.createElement("h2",null,"Select Book")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12 left"},"Enter a single eBook title or EAN that you would like to nominate for this promotion.",c.default.createElement("span",{className:"required-item-asterisk"},"*"))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12 col-xs-12"},c.default.createElement(s.default,{name:"bookInputType",ref:"bookInputType",onChange:this.onBookInputTypeChange,initValue:this.state.bookInputType,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"title",label:"Book Title"},{value:"ean",label:"EAN"}]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-md-6 col-xs-12"},c.default.createElement("div",{className:"book-search"},"title"===n&&c.default.createElement(h.default,{name:"bookTitle",ref:"bookTitle",label:"Book Title",serverSideValidationKey:"bookTitle",hideSearchIcon:!0,titlesOnly:!0,adminEditMerchForm:this.props.isAdmin,vendorNumberAdminEdit:this.props.vendorNumberAdminEdit,filterOption:"EBOOK",onSubmit:this.onTitleSelect,onCommit:this.onTitleSelect,saleStatus:"ONSALE"}),"ean"===n&&c.default.createElement(b.default,{name:"eanList",autoComplete:"off",ref:"eanList",serverSideValidationKey:"eanList",label:"EAN",onCommit:this.onEanCommit,commitOnEnterKey:!0,rules:[v.numOnly()]}),a&&0<o.length&&c.default.createElement(m.default,{items:o,onDeleteEan:this.onDeleteEan,eansWithTitles:this.state.eansWithTitles})))))),c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"4"),c.default.createElement("h2",null,"Price")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("p",null,"If selected, the price will be updated by the B&N Press team for you."),null===this.state.projectPrice||0===this.state.projectPrice||4.99<this.state.projectPrice?null:c.default.createElement("p",{className:"min-price-message"},"Nominated title must have a minimum listing price of $4.99."),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-4 col-md-4 col-lg-2"},c.default.createElement("div",{className:"regular-price-container"},c.default.createElement("p",{className:"regular-price"},"Regular Price"),c.default.createElement("p",null,"$ ",Number(r).toFixed(2)))),c.default.createElement("div",{className:"col-xs-1 col-md-1 col-lg-1"},c.default.createElement("div",{className:"dollar-sign-label"},"$")),c.default.createElement("div",{className:"col-xs-7 col-md-7 col-lg-4"},c.default.createElement(b.default,{name:"promoPrice",ref:"promoPrice",label:"Promo Price",autoComplete:"off",onChange:this.onPromoPriceChanged,onBlur:this.onPromoPriceBlur,pattern:/^\d{0,5}(\.\d{0,2}|)$/,rules:[v.required("Promo price is missing."),v.minValue(.99,"Minimum Promo Price is $.99"),v.maxValue(this.state.projectPrice/2,"Minimum 50% off Regular Price")]}))))),c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"5"),c.default.createElement("h2",null,"Additional Details")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12 col-xs-12"},c.default.createElement(p.default,{name:"additionalDetails",autoComplete:"off",ref:"additionalDetailsList",label:"Please let us know...",onCommit:this.onAdditionalCommentsCommit,initValue:t,commitOnEnterKey:!1,showRemainingCharCount:!0,rules:[v.maxLength(2e3)]}))))),c.default.createElement("hr",null),c.default.createElement("div",{className:"coupon-content save-or-cancel"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12 col-xs-12"},c.default.createElement(f.default,{buttonText:"Submit",ref:"submitButton",buttonModal:"modal",click:this.onSubmit,disabled:!this.state.valid}),c.default.createElement("span",{className:"cancel","data-dismiss":"modal",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onCancel},"Cancel"))))),!this.state.rulesLoaded&&!this.props.isAdmin&&c.default.createElement(y.default,null))}}])&&E(t.prototype,n),o&&E(t,o),u}();t.default=C},1056:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=u(n(0)),d=n(24),i=(n(7),u(n(6))),a=o(n(91)),f=u(n(38)),s=u(n(27)),l=u(n(62)),p=u(n(66)),m=u(n(107)),h=u(n(46)),r=u(n(92)),y=u(n(3)),v=o(n(9)),b=u(n(12));o(n(60));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var O="TEMPLATE_1",C=function(e){function u(e){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),n=this,t=!(o=P(u).call(this,e))||"object"!==g(o)&&"function"!=typeof o?_(n):o;var a,r,i,s=e.adminInitPromo;i=s?(a=s.additionalComments,r=[s.ean],s.promoPrice):(r=[],a=null);var l=e.initPromo;return t.state={additionalComments:l?l.additionalComments:a,bookInputType:"title",eanList:l?[l.ean]:r,eansLoaded:!1,freeTitles:[],initEan:"",introduction:"",loaded:!1,projectPrice:null,promoPrice:l?l.promoPrice:i,rulesList:[],rulesLoaded:!1,valid:!1,fieldsItems:""},t.getRules=t.getRules.bind(_(_(t))),t.onAdditionalCommentsCommit=t.onAdditionalCommentsCommit.bind(_(_(t))),t.onBookInputTypeChange=t.onBookInputTypeChange.bind(_(_(t))),t.onCancel=t.onCancel.bind(_(_(t))),t.onDebounceSubmit=(0,d.debounce)(500,!0,t.onDebounceSubmit.bind(_(_(t)))),t.onDeleteEan=t.onDeleteEan.bind(_(_(t))),t.onEanCommit=t.onEanCommit.bind(_(_(t))),t.onEansLoaded=t.onEansLoaded.bind(_(_(t))),t.onRulesLoaded=t.onRulesLoaded.bind(_(_(t))),t.onPromoPriceChanged=t.onPromoPriceChanged.bind(_(_(t))),t.onPromoPriceBlur=t.onPromoPriceBlur.bind(_(_(t))),t.onSubmit=t.onSubmit.bind(_(_(t))),t.onTitleSelect=t.onTitleSelect.bind(_(_(t))),t.onValidationChange=t.onValidationChange.bind(_(_(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(u,c.default.Component),t=u,(n=[{key:"componentWillMount",value:function(){f.default.addProjectSearchesLoadedListener(this.onEansLoaded),r.default.addRulesListener(this.onRulesLoaded)}},{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),a.loadPromoRules()}},{key:"componentWillUnmount",value:function(){f.default.removeProjectSearchesLoadedListener(this.onEansLoaded),r.default.removeRulesListener(this.onRulesLoaded)}},{key:"getRules",value:function(){var e=[],t=this.state.rulesList,n=!0,o=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value;if(Array.isArray(s))for(var l in s)e.push(c.default.createElement("li",{className:"rules-list",key:s[l].name},c.default.createElement("a",{href:s[l].value,target:"_blank"},s[l].name)));else e.push(c.default.createElement("li",{className:"rules-list",key:s}," ",s," "))}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return e}},{key:"onAdditionalCommentsCommit",value:function(e){this.setState({additionalComments:e.newValue})}},{key:"onBookInputTypeChange",value:function(e){this.setState({bookInputType:e.newValue})}},{key:"onCancel",value:function(){this.setState({eanList:[],additionalComments:""}),this.refs.additionalDetailsList&&this.refs.additionalDetailsList.setValue(null),this.refs.bookInputType&&this.refs.bookInputType.setValue("title"),this.refs.bookTitle&&this.refs.bookTitle.setValue(null),this.refs.promoPrice&&this.refs.promoPrice.setValue(null),this.props.onCancel()}},{key:"onDebounceSubmit",value:function(){if(this.refs.form.valid()){var e={additionalComments:this.state.additionalComments,ean:this.state.eanList[0],mercPromoType:O,promoPrice:this.state.promoPrice,regularPrice:this.state.projectPrice,definitionId:this.state.fieldsItems.id};this.props.initPromo?e.id=this.props.initPromo.id:this.props.isAdmin&&(e.id=this.props.idAdminEdit,e.vendorNumber=this.props.vendorNumberAdminEdit),a.submitPromo(e)}}},{key:"onDeleteEan",value:function(e){this.setState({eanList:[],projectPrice:null,valid:!1},this.refs.promoPrice.setValue(null),this.onValidationChange)}},{key:"onEanCommit",value:function(e){var t=this;if(""!==e.newValue){var n=[],o=this.state.eanList.slice(0),a=e.newValue.trim(),r=f.default.findProjectByEan(a),i=r?"true"==r.allowedForMerchPromo:null;if(this.props.isAdmin&&(i=!0),f.default.uniqueIsbns.includes(a))if(!o.includes(a)&&i){var s=f.default.findProjectByEan(a);o[0]=a,this.refs.promoPrice.setValue(null),0==+s.listPrice&&this.state.freeTitles.push(s.newEans)}else i||n.push(a);else n.push(a);this.setState({eanList:o,projectPrice:0<o.length?f.default.findProjectByEan(o[0]).listPrice:null,valid:!0},function(){t.refs.eanList.setValue(n.join(" ")),t.onValidationChange(),0<n.length&&(i||null==i?t.refs.form.setServerSideValidationMessage("eanList","Please enter a valid on sale eBook EAN or one that belongs to you."):t.refs.form.setServerSideValidationMessage("eanList","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("eanList","Please enter an EAN.")}},{key:"onEansLoaded",value:function(){var e,t,n,o=this,a=null;(t=this.props.initPromo?(e=this.props.initPromo.ean,n=this.props.initPromo,f.default.findProjectByEan(e)):this.props.adminInitPromo?(e=this.props.adminInitPromo.ean,n=this.props.adminInitPromo,f.default.findProjectByEan(e)):f.default.findProjectByEan(this.state.eanList[0]))&&0!=this.state.eanList.length&&(a=t.listPrice),this.setState({eansLoaded:!0,projectPrice:a},function(){return n&&o.refs.promoPrice.setValue(Number(o.state.promoPrice).toFixed(2))})}},{key:"onPromoPriceChanged",value:function(e){this.setState({promoPrice:e.newValue})}},{key:"onPromoPriceBlur",value:function(){if(this.state.promoPrice){var e=Number(this.state.promoPrice).toFixed(2);this.refs.promoPrice.setValue(e)}}},{key:"onRulesLoaded",value:function(){this.setState({rulesLoaded:!0,rulesList:r.default.getMerchandisingPromoRules(O),introduction:r.default.getMerchandisingPromoIntro(O),fieldsItems:r.default.getMerchandisingPromoFormItems(O)})}},{key:"onSubmit",value:function(){this.onDebounceSubmit()}},{key:"onTitleSelect",value:function(e){var t=this;if(""!==e.newValue){var n,o=[],a=this.state.eanList.slice(0),r=e.newValue.trim(),i=f.default.findProjectByTitle(r),s=i?i.ean:null,l=i?"true"==i.allowedForMerchPromo:null;this.props.isAdmin&&(l=!0),f.default.uniqueIsbns.includes(s)?a.includes(s)?l||o.push(s):(a[0]=s,this.refs.promoPrice.setValue(null),0==+i.listPrice&&this.state.freeTitles.push(i.newTitle)):o.push(s),n=s&&(l||null==l)?o.join(" "):r,this.setState({eanList:a,projectPrice:0<a.length?f.default.findProjectByEan(a[0]).listPrice:null,valid:!0},function(){t.refs.bookTitle.setValue(n),t.onValidationChange(),0<o.length&&(l||null==l?t.refs.form.setServerSideValidationMessage("bookTitle","Please enter a valid on sale eBook title or one that belongs to you."):t.refs.form.setServerSideValidationMessage("bookTitle","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("bookTitle","Please enter a Book Title.")}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()&&0<this.state.eanList.length})}},{key:"render",value:function(){var e=this.state,t=e.additionalComments,n=e.bookInputType,o=e.eanList,a=e.eansLoaded,r=e.projectPrice;e.promoPrice;return c.default.createElement("div",{className:"promoForm"},c.default.createElement(i.default,{ref:"form",onSubmit:this.onSubmit,onValidationChange:this.onValidationChange},c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"2"),c.default.createElement("h2",null,"Rules")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",null,c.default.createElement("ul",null,this.getRules())))),c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"3"),c.default.createElement("h2",null,"Select Book")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12 left"},"Enter a single eBook title or EAN that you would like to nominate for this promotion.",c.default.createElement("span",{className:"required-item-asterisk"},"*"))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12 col-xs-12"},c.default.createElement(s.default,{name:"bookInputType",ref:"bookInputType",onChange:this.onBookInputTypeChange,initValue:this.state.bookInputType,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"title",label:"Book Title"},{value:"ean",label:"EAN"}]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-md-6 col-xs-12"},c.default.createElement("div",{className:"book-search"},"title"===n&&c.default.createElement(h.default,{name:"bookTitle",ref:"bookTitle",label:"Book Title",serverSideValidationKey:"bookTitle",hideSearchIcon:!0,titlesOnly:!0,adminEditMerchForm:this.props.isAdmin,vendorNumberAdminEdit:this.props.vendorNumberAdminEdit,filterOption:"EBOOK",onSubmit:this.onTitleSelect,onCommit:this.onTitleSelect,promoId:this.props.promoId,saleStatus:"ONSALE"}),"ean"===n&&c.default.createElement(b.default,{name:"eanList",autoComplete:"off",ref:"eanList",serverSideValidationKey:"eanList",label:"EAN",onCommit:this.onEanCommit,commitOnEnterKey:!0,rules:[v.numOnly()]}),a&&0<o.length&&c.default.createElement(m.default,{items:o,onDeleteEan:this.onDeleteEan,eansWithTitles:this.state.eansWithTitles})))))),c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"4"),c.default.createElement("h2",null,"Price")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("p",null,"If selected, the price will be updated by the B&N Press team for you."),null===this.state.projectPrice||0===this.state.projectPrice||.98<this.state.projectPrice?null:c.default.createElement("p",{className:"min-price-message"},"Nominated title must have a minimum listing price of $0.99."),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-4 col-md-4 col-lg-2"},c.default.createElement("div",{className:"regular-price-container"},c.default.createElement("p",{className:"regular-price"},"Regular Price"),c.default.createElement("p",null,"$ ",Number(r).toFixed(2)))),c.default.createElement("div",{className:"col-xs-1 col-md-1 col-lg-1"},c.default.createElement("div",{className:"dollar-sign-label"},"$")),c.default.createElement("div",{className:"col-xs-7 col-md-7 col-lg-4"},c.default.createElement(b.default,{name:"promoPrice",ref:"promoPrice",label:"Promo Price",autoComplete:"off",onChange:this.onPromoPriceChanged,onBlur:this.onPromoPriceBlur,pattern:/^\d{0,5}(\.\d{0,2}|)$/,rules:[v.required("Promo price is missing."),v.validRanges([{min:.99,max:.99},{min:.99,max:4.99}],"Must be $.99 to $4.99")]}))))),c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"5"),c.default.createElement("h2",null,"Additional Details")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12 col-xs-12"},c.default.createElement(p.default,{name:"additionalDetails",autoComplete:"off",ref:"additionalDetailsList",label:"Please let us know...",onCommit:this.onAdditionalCommentsCommit,initValue:t,commitOnEnterKey:!1,showRemainingCharCount:!0,rules:[v.maxLength(2e3)]}))))),c.default.createElement("hr",null),c.default.createElement("div",{className:"coupon-content save-or-cancel"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12 col-xs-12"},c.default.createElement(l.default,{buttonText:"Submit",ref:"submitButton",buttonModal:"modal",click:this.onSubmit,disabled:!this.state.valid}),c.default.createElement("span",{className:"cancel","data-dismiss":"modal",onClick:this.onCancel},"Cancel"))))),!this.state.rulesLoaded&&!this.props.isAdmin&&c.default.createElement(y.default,null))}}])&&E(t.prototype,n),o&&E(t,o),u}();t.default=C},1057:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=u(n(0)),d=n(24),i=(n(7),u(n(6))),a=o(n(91)),f=u(n(38)),s=u(n(27)),l=u(n(62)),p=u(n(66)),m=u(n(107)),h=u(n(46)),r=u(n(92)),y=u(n(3)),v=o(n(9)),b=u(n(12));o(n(60));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var O="TEMPLATE_2",C=function(e){function u(e){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),n=this,t=!(o=P(u).call(this,e))||"object"!==g(o)&&"function"!=typeof o?_(n):o;var a,r,i,s=e.adminInitPromo;i=s?(a=s.additionalComments,r=[s.ean],s.promoPrice):(r=[],a=null);var l=e.initPromo;return t.state={additionalComments:l?l.additionalComments:a,bookInputType:"title",eanList:l?[l.ean]:r,eansLoaded:!1,freeTitles:[],initEan:"",introduction:"",loaded:!1,projectPrice:null,promoPrice:l?l.promoPrice:i,rulesList:[],rulesLoaded:!1,valid:!1,fieldsItems:""},t.getRules=t.getRules.bind(_(_(t))),t.onAdditionalCommentsCommit=t.onAdditionalCommentsCommit.bind(_(_(t))),t.onBookInputTypeChange=t.onBookInputTypeChange.bind(_(_(t))),t.onCancel=t.onCancel.bind(_(_(t))),t.onDebounceSubmit=(0,d.debounce)(500,!0,t.onDebounceSubmit.bind(_(_(t)))),t.onDeleteEan=t.onDeleteEan.bind(_(_(t))),t.onEanCommit=t.onEanCommit.bind(_(_(t))),t.onEansLoaded=t.onEansLoaded.bind(_(_(t))),t.onRulesLoaded=t.onRulesLoaded.bind(_(_(t))),t.onPromoPriceChanged=t.onPromoPriceChanged.bind(_(_(t))),t.onPromoPriceBlur=t.onPromoPriceBlur.bind(_(_(t))),t.onSubmit=t.onSubmit.bind(_(_(t))),t.onTitleSelect=t.onTitleSelect.bind(_(_(t))),t.onValidationChange=t.onValidationChange.bind(_(_(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(u,c.default.Component),t=u,(n=[{key:"componentWillMount",value:function(){f.default.addProjectSearchesLoadedListener(this.onEansLoaded),r.default.addRulesListener(this.onRulesLoaded)}},{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),a.loadPromoRules()}},{key:"componentWillUnmount",value:function(){f.default.removeProjectSearchesLoadedListener(this.onEansLoaded),r.default.removeRulesListener(this.onRulesLoaded)}},{key:"getRules",value:function(){var e=[],t=this.state.rulesList,n=!0,o=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value;if(Array.isArray(s))for(var l in s)e.push(c.default.createElement("li",{className:"rules-list",key:s[l].name},c.default.createElement("a",{href:s[l].value,target:"_blank"},s[l].name)));else e.push(c.default.createElement("li",{className:"rules-list",key:s}," ",s," "))}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return e}},{key:"onAdditionalCommentsCommit",value:function(e){this.setState({additionalComments:e.newValue})}},{key:"onBookInputTypeChange",value:function(e){this.setState({bookInputType:e.newValue})}},{key:"onCancel",value:function(){this.setState({eanList:[],additionalComments:""}),this.refs.additionalDetailsList&&this.refs.additionalDetailsList.setValue(null),this.refs.bookInputType&&this.refs.bookInputType.setValue("title"),this.refs.bookTitle&&this.refs.bookTitle.setValue(null),this.refs.promoPrice&&this.refs.promoPrice.setValue(null),this.props.onCancel()}},{key:"onDebounceSubmit",value:function(){if(this.refs.form.valid()){var e={additionalComments:this.state.additionalComments,ean:this.state.eanList[0],mercPromoType:O,promoPrice:this.state.promoPrice,regularPrice:this.state.projectPrice,definitionId:this.state.fieldsItems.id};this.props.initPromo?e.id=this.props.initPromo.id:this.props.isAdmin&&(e.id=this.props.idAdminEdit,e.vendorNumber=this.props.vendorNumberAdminEdit),a.submitPromo(e)}}},{key:"onDeleteEan",value:function(e){this.setState({eanList:[],projectPrice:null,valid:!1},this.refs.promoPrice.setValue(null),this.onValidationChange)}},{key:"onEanCommit",value:function(e){var t=this;if(""!==e.newValue){var n=[],o=this.state.eanList.slice(0),a=e.newValue.trim(),r=f.default.findProjectByEan(a),i=r?"true"==r.allowedForMerchPromo:null;if(this.props.isAdmin&&(i=!0),f.default.uniqueIsbns.includes(a))if(!o.includes(a)&&i){var s=f.default.findProjectByEan(a);o[0]=a,this.refs.promoPrice.setValue(null),0==+s.listPrice&&this.state.freeTitles.push(s.newEans)}else i||n.push(a);else n.push(a);this.setState({eanList:o,projectPrice:0<o.length?f.default.findProjectByEan(o[0]).listPrice:null,valid:!0},function(){t.refs.eanList.setValue(n.join(" ")),t.onValidationChange(),0<n.length&&(i||null==i?t.refs.form.setServerSideValidationMessage("eanList","Please enter a valid on sale eBook EAN or one that belongs to you."):t.refs.form.setServerSideValidationMessage("eanList","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("eanList","Please enter an EAN.")}},{key:"onEansLoaded",value:function(){var e,t,n,o=this,a=null;(t=this.props.initPromo?(e=this.props.initPromo.ean,n=this.props.initPromo,f.default.findProjectByEan(e)):this.props.adminInitPromo?(e=this.props.adminInitPromo.ean,n=this.props.adminInitPromo,f.default.findProjectByEan(e)):f.default.findProjectByEan(this.state.eanList[0]))&&0!=this.state.eanList.length&&(a=t.listPrice),this.setState({eansLoaded:!0,projectPrice:a},function(){return n&&o.refs.promoPrice.setValue(Number(o.state.promoPrice).toFixed(2))})}},{key:"onPromoPriceChanged",value:function(e){this.setState({promoPrice:e.newValue})}},{key:"onPromoPriceBlur",value:function(){if(this.state.promoPrice){var e=Number(this.state.promoPrice).toFixed(2);this.refs.promoPrice.setValue(e)}}},{key:"onRulesLoaded",value:function(){this.setState({rulesLoaded:!0,rulesList:r.default.getMerchandisingPromoRules(O),introduction:r.default.getMerchandisingPromoIntro(O),fieldsItems:r.default.getMerchandisingPromoFormItems(O)})}},{key:"onSubmit",value:function(){this.onDebounceSubmit()}},{key:"onTitleSelect",value:function(e){var t=this;if(""!==e.newValue){var n,o=[],a=this.state.eanList.slice(0),r=e.newValue.trim(),i=f.default.findProjectByTitle(r),s=i?i.ean:null,l=i?"true"==i.allowedForMerchPromo:null;this.props.isAdmin&&(l=!0),f.default.uniqueIsbns.includes(s)?a.includes(s)?l||o.push(s):(a[0]=s,this.refs.promoPrice.setValue(null),0==+i.listPrice&&this.state.freeTitles.push(i.newTitle)):o.push(s),n=s&&(l||null==l)?o.join(" "):r,this.setState({eanList:a,projectPrice:0<a.length?f.default.findProjectByEan(a[0]).listPrice:null,valid:!0},function(){t.refs.bookTitle.setValue(n),t.onValidationChange(),0<o.length&&(l||null==l?t.refs.form.setServerSideValidationMessage("bookTitle","Please enter a valid on sale eBook title or one that belongs to you."):t.refs.form.setServerSideValidationMessage("bookTitle","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("bookTitle","Please enter a Book Title.")}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()&&0<this.state.eanList.length})}},{key:"render",value:function(){var e=this.state,t=e.additionalComments,n=e.bookInputType,o=e.eanList,a=e.eansLoaded,r=e.projectPrice;e.promoPrice;return c.default.createElement("div",{className:"promoForm"},c.default.createElement(i.default,{ref:"form",onSubmit:this.onSubmit,onValidationChange:this.onValidationChange},c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"2"),c.default.createElement("h2",null,"Rules")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",null,c.default.createElement("ul",null,this.getRules())))),c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"3"),c.default.createElement("h2",null,"Select Book")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12 left"},"Enter a single eBook title or EAN that you would like to nominate for this promotion.",c.default.createElement("span",{className:"required-item-asterisk"},"*"))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12 col-xs-12"},c.default.createElement(s.default,{name:"bookInputType",ref:"bookInputType",onChange:this.onBookInputTypeChange,initValue:this.state.bookInputType,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"title",label:"Book Title"},{value:"ean",label:"EAN"}]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-md-6 col-xs-12"},c.default.createElement("div",{className:"book-search"},"title"===n&&c.default.createElement(h.default,{name:"bookTitle",ref:"bookTitle",label:"Book Title",serverSideValidationKey:"bookTitle",hideSearchIcon:!0,titlesOnly:!0,adminEditMerchForm:this.props.isAdmin,vendorNumberAdminEdit:this.props.vendorNumberAdminEdit,filterOption:"EBOOK",onSubmit:this.onTitleSelect,onCommit:this.onTitleSelect,promoId:this.props.promoId,saleStatus:"ONSALE"}),"ean"===n&&c.default.createElement(b.default,{name:"eanList",autoComplete:"off",ref:"eanList",serverSideValidationKey:"eanList",label:"EAN",onCommit:this.onEanCommit,commitOnEnterKey:!0,rules:[v.numOnly()]}),a&&0<o.length&&c.default.createElement(m.default,{items:o,onDeleteEan:this.onDeleteEan,eansWithTitles:this.state.eansWithTitles})))))),c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"4"),c.default.createElement("h2",null,"Price")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("p",null,"If selected, the price will be updated by the B&N Press team for you."),null===this.state.projectPrice||0===this.state.projectPrice||.98<this.state.projectPrice?null:c.default.createElement("p",{className:"min-price-message"},"Nominated title must have a minimum listing price of $0.99."),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-4 col-md-4 col-lg-2"},c.default.createElement("div",{className:"regular-price-container"},c.default.createElement("p",{className:"regular-price"},"Regular Price"),c.default.createElement("p",null,"$ ",Number(r).toFixed(2)))),c.default.createElement("div",{className:"col-xs-1 col-md-1 col-lg-1"},c.default.createElement("div",{className:"dollar-sign-label"},"$")),c.default.createElement("div",{className:"col-xs-7 col-md-7 col-lg-4"},c.default.createElement(b.default,{name:"promoPrice",ref:"promoPrice",label:"Promo Price",autoComplete:"off",onChange:this.onPromoPriceChanged,onBlur:this.onPromoPriceBlur,pattern:/^\d{0,5}(\.\d{0,2}|)$/,rules:[v.required("Promo price is missing."),v.validRanges([{min:.99,max:.99},{min:.99,max:4.99}],"Must be $.99 to $4.99")]}))))),c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"5"),c.default.createElement("h2",null,"Additional Details")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12 col-xs-12"},c.default.createElement(p.default,{name:"additionalDetails",autoComplete:"off",ref:"additionalDetailsList",label:"Please let us know...",onCommit:this.onAdditionalCommentsCommit,initValue:t,commitOnEnterKey:!1,showRemainingCharCount:!0,rules:[v.maxLength(2e3)]}))))),c.default.createElement("hr",null),c.default.createElement("div",{className:"coupon-content save-or-cancel"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12 col-xs-12"},c.default.createElement(l.default,{buttonText:"Submit",ref:"submitButton",buttonModal:"modal",click:this.onSubmit,disabled:!this.state.valid}),c.default.createElement("span",{className:"cancel","data-dismiss":"modal",onClick:this.onCancel},"Cancel"))))),!this.state.rulesLoaded&&!this.props.isAdmin&&c.default.createElement(y.default,null))}}])&&E(t.prototype,n),o&&E(t,o),u}();t.default=C},1058:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=u(n(0)),d=n(24),i=(n(7),u(n(6))),a=o(n(91)),f=u(n(38)),s=u(n(27)),l=u(n(62)),p=u(n(66)),m=u(n(107)),h=u(n(46)),r=u(n(92)),y=u(n(3)),v=o(n(9)),b=u(n(12));o(n(60));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var O="TEMPLATE_3",C=function(e){function u(e){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),n=this,t=!(o=P(u).call(this,e))||"object"!==g(o)&&"function"!=typeof o?_(n):o;var a,r,i,s=e.adminInitPromo;i=s?(a=s.additionalComments,r=[s.ean],s.promoPrice):(r=[],a=null);var l=e.initPromo;return t.state={additionalComments:l?l.additionalComments:a,bookInputType:"title",eanList:l?[l.ean]:r,eansLoaded:!1,freeTitles:[],initEan:"",introduction:"",loaded:!1,projectPrice:null,promoPrice:l?l.promoPrice:i,rulesList:[],rulesLoaded:!1,valid:!1,fieldsItems:""},t.getRules=t.getRules.bind(_(_(t))),t.onAdditionalCommentsCommit=t.onAdditionalCommentsCommit.bind(_(_(t))),t.onBookInputTypeChange=t.onBookInputTypeChange.bind(_(_(t))),t.onCancel=t.onCancel.bind(_(_(t))),t.onDebounceSubmit=(0,d.debounce)(500,!0,t.onDebounceSubmit.bind(_(_(t)))),t.onDeleteEan=t.onDeleteEan.bind(_(_(t))),t.onEanCommit=t.onEanCommit.bind(_(_(t))),t.onEansLoaded=t.onEansLoaded.bind(_(_(t))),t.onRulesLoaded=t.onRulesLoaded.bind(_(_(t))),t.onPromoPriceChanged=t.onPromoPriceChanged.bind(_(_(t))),t.onPromoPriceBlur=t.onPromoPriceBlur.bind(_(_(t))),t.onSubmit=t.onSubmit.bind(_(_(t))),t.onTitleSelect=t.onTitleSelect.bind(_(_(t))),t.onValidationChange=t.onValidationChange.bind(_(_(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(u,c.default.Component),t=u,(n=[{key:"componentWillMount",value:function(){f.default.addProjectSearchesLoadedListener(this.onEansLoaded),r.default.addRulesListener(this.onRulesLoaded)}},{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),a.loadPromoRules()}},{key:"componentWillUnmount",value:function(){f.default.removeProjectSearchesLoadedListener(this.onEansLoaded),r.default.removeRulesListener(this.onRulesLoaded)}},{key:"getRules",value:function(){var e=[],t=this.state.rulesList,n=!0,o=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value;if(Array.isArray(s))for(var l in s)e.push(c.default.createElement("li",{className:"rules-list",key:s[l].name},c.default.createElement("a",{href:s[l].value,target:"_blank"},s[l].name)));else e.push(c.default.createElement("li",{className:"rules-list",key:s}," ",s," "))}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return e}},{key:"onAdditionalCommentsCommit",value:function(e){this.setState({additionalComments:e.newValue})}},{key:"onBookInputTypeChange",value:function(e){this.setState({bookInputType:e.newValue})}},{key:"onCancel",value:function(){this.setState({eanList:[],additionalComments:""}),this.refs.additionalDetailsList&&this.refs.additionalDetailsList.setValue(null),this.refs.bookInputType&&this.refs.bookInputType.setValue("title"),this.refs.bookTitle&&this.refs.bookTitle.setValue(null),this.refs.promoPrice&&this.refs.promoPrice.setValue(null),this.props.onCancel()}},{key:"onDebounceSubmit",value:function(){if(this.refs.form.valid()){var e={additionalComments:this.state.additionalComments,ean:this.state.eanList[0],mercPromoType:O,promoPrice:this.state.promoPrice,regularPrice:this.state.projectPrice,definitionId:this.state.fieldsItems.id};this.props.initPromo?e.id=this.props.initPromo.id:this.props.isAdmin&&(e.id=this.props.idAdminEdit,e.vendorNumber=this.props.vendorNumberAdminEdit),a.submitPromo(e)}}},{key:"onDeleteEan",value:function(e){this.setState({eanList:[],projectPrice:null,valid:!1},this.refs.promoPrice.setValue(null),this.onValidationChange)}},{key:"onEanCommit",value:function(e){var t=this;if(""!==e.newValue){var n=[],o=this.state.eanList.slice(0),a=e.newValue.trim(),r=f.default.findProjectByEan(a),i=r?"true"==r.allowedForMerchPromo:null;if(this.props.isAdmin&&(i=!0),f.default.uniqueIsbns.includes(a))if(!o.includes(a)&&i){var s=f.default.findProjectByEan(a);o[0]=a,this.refs.promoPrice.setValue(null);var l=s?s.publicationDate.slice(0,4):null;if(s){if("2019"!==l)return void this.refs.form.setServerSideValidationMessage("eanList","Please enter an EAN of the title published in 2019");0==+s.listPrice&&this.state.freeTitles.push(s.newEans)}}else i||n.push(a);else n.push(a);this.setState({eanList:o,projectPrice:0<o.length?f.default.findProjectByEan(o[0]).listPrice:null,valid:!0},function(){t.refs.eanList.setValue(n.join(" ")),t.onValidationChange(),0<n.length&&(i||null==i?t.refs.form.setServerSideValidationMessage("eanList","Please enter a valid on sale eBook EAN or one that belongs to you."):t.refs.form.setServerSideValidationMessage("eanList","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("eanList","Please enter an EAN.")}},{key:"onEansLoaded",value:function(){var e,t,n,o=this,a=null;(t=this.props.initPromo?(e=this.props.initPromo.ean,n=this.props.initPromo,f.default.findProjectByEan(e)):this.props.adminInitPromo?(e=this.props.adminInitPromo.ean,n=this.props.adminInitPromo,f.default.findProjectByEan(e)):f.default.findProjectByEan(this.state.eanList[0]))&&0!=this.state.eanList.length&&(a=t.listPrice),this.setState({eansLoaded:!0,projectPrice:a},function(){return n&&100*o.refs.promoPrice.setValue(Number(o.state.promoPrice).toFixed(2))})}},{key:"onPromoPriceChanged",value:function(e){this.setState({promoPrice:e.newValue})}},{key:"onPromoPriceBlur",value:function(){if(this.state.promoPrice){var e=Number(this.state.promoPrice).toFixed(2);this.refs.promoPrice.setValue(e)}}},{key:"onRulesLoaded",value:function(){this.setState({rulesLoaded:!0,rulesList:r.default.getMerchandisingPromoRules(O),introduction:r.default.getMerchandisingPromoIntro(O),fieldsItems:r.default.getMerchandisingPromoFormItems(O)})}},{key:"onSubmit",value:function(){this.onDebounceSubmit()}},{key:"onTitleSelect",value:function(e){var t=this;if(""!==e.newValue){var n,o=[],a=this.state.eanList.slice(0),r=e.newValue.trim(),i=f.default.findProjectByTitle(r),s=i?i.ean:null,l=i?"true"==i.allowedForMerchPromo:null;this.props.isAdmin&&(l=!0);var u=i?i.publicationDate.slice(0,4):null;if(i&&i.publicationDate){if("2019"!==u)return void this.refs.form.setServerSideValidationMessage("bookTitle","Please enter a book title published in 2019.");f.default.uniqueIsbns.includes(s)?a.includes(s)?l||o.push(s):(a[0]=s,this.refs.promoPrice.setValue(null),0==+i.listPrice&&this.state.freeTitles.push(i.newTitle)):o.push(s)}n=s&&(l||null==l)?o.join(" "):r,this.setState({eanList:a,projectPrice:0<a.length?f.default.findProjectByEan(a[0]).listPrice:null,valid:!0},function(){t.refs.bookTitle.setValue(n),t.onValidationChange(),0<o.length&&(l||null==l?t.refs.form.setServerSideValidationMessage("bookTitle","Please enter a valid on sale eBook title or one that belongs to you."):t.refs.form.setServerSideValidationMessage("bookTitle","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("bookTitle","Please enter a Book Title.")}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()&&0<this.state.eanList.length})}},{key:"render",value:function(){var e=this.state,t=e.additionalComments,n=e.bookInputType,o=e.eanList,a=e.eansLoaded,r=e.projectPrice;e.promoPrice;return c.default.createElement("div",{className:"promoForm"},c.default.createElement(i.default,{ref:"form",onSubmit:this.onSubmit,onValidationChange:this.onValidationChange},c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"2"),c.default.createElement("h2",null,"Rules")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",null,c.default.createElement("ul",null,this.getRules())))),c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"3"),c.default.createElement("h2",null,"Select Book")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-12 left"},"Enter a single eBook title or EAN that you would like to nominate for this promotion.",c.default.createElement("span",{className:"required-item-asterisk"},"*"))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12 col-xs-12"},c.default.createElement(s.default,{name:"bookInputType",ref:"bookInputType",onChange:this.onBookInputTypeChange,initValue:this.state.bookInputType,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"title",label:"Book Title"},{value:"ean",label:"EAN"}]}))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-md-6 col-xs-12"},c.default.createElement("div",{className:"book-search"},"title"===n&&c.default.createElement(h.default,{name:"bookTitle",ref:"bookTitle",label:"Book Title",serverSideValidationKey:"bookTitle",hideSearchIcon:!0,titlesOnly:!0,adminEditMerchForm:this.props.isAdmin,vendorNumberAdminEdit:this.props.vendorNumberAdminEdit,filterOption:"EBOOK",onSubmit:this.onTitleSelect,onCommit:this.onTitleSelect,saleStatus:"ONSALE"}),"ean"===n&&c.default.createElement(b.default,{name:"eanList",autoComplete:"off",ref:"eanList",serverSideValidationKey:"eanList",label:"EAN",onCommit:this.onEanCommit,commitOnEnterKey:!0,rules:[v.numOnly()]}),a&&0<o.length&&c.default.createElement(m.default,{items:o,onDeleteEan:this.onDeleteEan,eansWithTitles:this.state.eansWithTitles})))))),c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"4"),c.default.createElement("h2",null,"Price")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("p",null,"If selected, the price will be updated by the B&N Press team for you."),null===this.state.projectPrice||0===this.state.projectPrice||.98<this.state.projectPrice?null:c.default.createElement("p",{className:"min-price-message"},"Nominated title must have a minimum listing price of $0.99."),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-xs-4 col-md-4 col-lg-2"},c.default.createElement("div",{className:"regular-price-container"},c.default.createElement("p",{className:"regular-price"},"Regular Price"),c.default.createElement("p",null,"$ ",Number(r).toFixed(2)))),c.default.createElement("div",{className:"col-xs-1 col-md-1 col-lg-1"},c.default.createElement("div",{className:"dollar-sign-label"},"$")),c.default.createElement("div",{className:"col-xs-7 col-md-7 col-lg-4"},c.default.createElement(b.default,{name:"promoPrice",ref:"promoPrice",label:"Promo Price",autoComplete:"off",onChange:this.onPromoPriceChanged,onBlur:this.onPromoPriceBlur,pattern:/^\d{0,5}(\.\d{0,2}|)$/,rules:[v.required("Promo price is missing."),v.minValue(.99,"Minimum Promo Price is $0.99"),v.maxValue(this.state.projectPrice/2,"Minimum 50% off Regular Price")]}))))),c.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},c.default.createElement("div",{className:"panel-header top-header"},c.default.createElement("div",{className:"section-number"},"5"),c.default.createElement("h2",null,"Additional Details")),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12 col-xs-12"},c.default.createElement(p.default,{name:"additionalDetails",autoComplete:"off",ref:"additionalDetailsList",label:"Please let us know...",onCommit:this.onAdditionalCommentsCommit,initValue:t,commitOnEnterKey:!1,showRemainingCharCount:!0,rules:[v.maxLength(2e3)]}))))),c.default.createElement("hr",null),c.default.createElement("div",{className:"coupon-content save-or-cancel"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-lg-12 col-xs-12"},c.default.createElement(l.default,{buttonText:"Submit",ref:"submitButton",buttonModal:"modal",click:this.onSubmit,disabled:!this.state.valid}),c.default.createElement("span",{className:"cancel","data-dismiss":"modal",onClick:this.onCancel},"Cancel"))))),!this.state.rulesLoaded&&!this.props.isAdmin&&c.default.createElement(y.default,null))}}])&&E(t.prototype,n),o&&E(t,o),u}();t.default=C},1067:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load1099Settings=function(t,e){a.load1099Settings(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadEBookSize=function(e,t,n){a.loadEBookSize(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadPrintBookSize=function(t,e){a.loadPrintBookSize(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadISBNOptions=function(e,t,n){a.loadISBNOptions(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadMailToAlertSettings=function(e,t,n,o){a.loadMailToAlertSettings(e,t,o).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.CreatePublisherAccount=function(e,t,n){a.CreatePublisherAccount(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadVendorInfo=function(t,e){a.loadVendorInfo(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.updatePublisherInfo=function(e,t,n){a.updatePublisherInfo(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.tinVerify=function(e,t,n,o){a.tinVerify(e,t).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.updatePaymentInfo=function(e,t,n){a.updatePaymentInfo(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadStates=function(e,t,n){a.loadStates(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.setDigital1099Enrollment=function(e,t,n,o){a.setDigital1099Enrollment(e,t).then(function(e){try{n()}catch(e){console.log(e)}})};var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(1068))},1068:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load1099Settings=function(e){return o.get("/api/vendor/1099Settings",{},e)},t.loadVendorInfo=function(e){return o.get("/api/vendor/info",{},e)},t.loadStates=function(e,t){return o.get("/api/vendor/loadStates/"+e,{},t)},t.updatePublisherInfo=function(e,t){return o.post("/api/vendor/updatePublisherInfo",e,t)},t.tinVerify=function(e,t,n){return o.post("/api/vendor/tinVerify?idType="+t,e,n)},t.updatePaymentInfo=function(e,t){return o.post("/api/vendor/updatePaymentInfo",e,t)},t.setDigital1099Enrollment=function(e,t,n){return o.post("/api/vendor/setDigital1099Enrollment",{isDigital1099:e,vendorNumber:t},n)},t.loadMailToAlertSettings=function(e,t,n){return o.post("/api/project/mailToAlertSettings",{emailPrefFooter:e,indexPageRef:t},n)},t.CreatePublisherAccount=function(e,t){return o.post("/api/project/createPublisherAccount",{publisherInfo:e},t)},t.loadEBookSize=function(e,t){return o.get("/api/project/eBookSize",{params:{args:e}},t)},t.loadPrintBookSize=function(e){return o.get("/api/project/printBookSize",{},e)},t.loadISBNOptions=function(e,t){return o.get("/api/project/ISBNOptions",{params:{args:e}},t)};var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(67))},107:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(1)),s=o(n(38)),l=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=c(this,d(n).call(this,e))).state={freeTitles:[]},t}var t,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,r.default.Component),t=n,(o=[{key:"componentDidMount",value:function(){var e=l.default.getUser().bnpToolAccess;this.setState({items:this._buildEanList(this.props.items),bnpToolAccessPermission:e})}},{key:"componentWillReceiveProps",value:function(e){e.items!==this.props.items&&this.setState({items:this._buildEanList(e.items)})}},{key:"_buildEanList",value:function(e){var n=this,o=[],t=e.map(function(e){var t=s.default.findProjectByEan(e);return 0==n.state.bnpToolAccessPermission?(t&&0==+t.listPrice&&o.push(t.title),{ean:e,title:t?t.title:n.props.eansWithTitles[e],offSale:!t}):{ean:e,title:t?t.title:"",offSale:!1}});return this.setState({freeTitles:o}),t}},{key:"renderFreeTitleMessage",value:function(){for(var e="",t=1===this.state.freeTitles.length?" is currently free. ":" are currently free. ",n=0;n<this.state.freeTitles.length;n++)e+=0===n?this.state.freeTitles[n].italics().bold():" and "+this.state.freeTitles[n].italics().bold();return r.default.createElement("span",null,r.default.createElement("span",{dangerouslySetInnerHTML:{__html:e}})," ",t)}},{key:"renderItem",value:function(e){var t=this,n=0==+e.listPrice;return r.default.createElement("tr",{className:(0,i.default)("single-ean",{"free-ean":n}),key:e.ean},r.default.createElement("td",{className:(0,i.default)("ean-cell",{offsale:e.offSale})},e.ean),r.default.createElement("td",{className:(0,i.default)("title-cell",{offsale:e.offSale})},e.title,r.default.createElement("div",{className:"close-cell"},r.default.createElement("span",{className:"icon-close-modal",onClick:function(){return t.props.onDeleteEan(e.ean)}}))))}},{key:"render",value:function(){var t=this,e=this.state.items,n=!1;if(e){for(var o in e)if(!0===e[o].offSale){n=!0;break}e.sort(function(e,t){return t.offSale-e.offSale})}return r.default.createElement("div",null,r.default.createElement("table",{className:"ean-list"},r.default.createElement("thead",null,n&&r.default.createElement("tr",null,r.default.createElement("td",{className:"offsale",colSpan:"2"},"Please remove eBooks that are off sale from this promotion before continuing."))),r.default.createElement("tbody",null,e&&e.map(function(e){return t.renderItem(e)}))),0<this.state.freeTitles.length&&r.default.createElement("div",{className:"col-xs-12 free-message"},this.renderFreeTitleMessage()," For the best customer experience, please make sure to assign a price to your book(s) before the scheduled promotion start date."))}}])&&u(t.prototype,o),a&&u(t,a),n}();t.default=p},11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EDD=t.GRW_PAPER=t.EMAIL_PREF=t.UNARCHIVE=t.EXPANDED_DIST=t.TOP_NAV=t.NEW_W_MANAGEMENT=t.RETRIEVE_USER=t.WORLDPAY_TEST=t.WORLDPAY=t.FIXED_FORMAT=t.EDIT_SPB_RETIRED=t.TWO_F_A_AUTH=t.BOOK_COVER_TEMPLATE=t.ORDER_COPIES=t.PROFILE=t.AUTHOR_PAGES=t.SALES_REPORTS=t.PROJECTS_SERIES=t.TMD_PRICE_CHNG=t.SPB_PREORDER_COPY=t.SPB_PREORDER=t.SITE=t.SHARED_ACCESS=t.SALES_REPORTING_BESTSELLERS=t.SALES_REPORTING=t.REFERRAL=t.READING=t.PROMOTIONS=t.MERCHANDISING=t.EBOOK_COUPONS=t.CUSTOMER=t.EAA_ACCESS=t.CORRECTIONS=t.BAB_CUSTOM_SAMPLE=t.AUTHOR_PROFILE=t.ADWORDS=t.AD_READY=t.AD_PORTAL=void 0;t.AD_PORTAL="AD_PORTAL";t.AD_READY="AD_PORTAL_ADMIN";t.ADWORDS="ADWORDS";t.AUTHOR_PROFILE="AUTHOR_PAGES";t.BAB_CUSTOM_SAMPLE="BAB_CUSTOM_SAMPLE";t.CORRECTIONS="CORRECTIONS";t.EAA_ACCESS="EAA_ACCESS";t.CUSTOMER="CUSTOMER";t.EBOOK_COUPONS="EBOOK_COUPONS";t.MERCHANDISING="MERCHANDISING";t.PROMOTIONS="PROMOTIONS";t.READING="READING";t.REFERRAL="REFERRAL_PROGRAM";t.SALES_REPORTING="SALESRPRT";t.SALES_REPORTING_BESTSELLERS="SALESRPRT_BS";t.SHARED_ACCESS="SHARED_ACCESS";t.SITE="SITE";t.SPB_PREORDER="SPB_PREORDER";t.SPB_PREORDER_COPY="SPB_PREORDER_COPY";t.TMD_PRICE_CHNG="TMD_PRICE_CHNG";t.PROJECTS_SERIES="PROJECTS_SERIES";t.SALES_REPORTS="SALES_REPORTS";t.AUTHOR_PAGES="AUTHOR_PAGES";t.PROFILE="PROFILE";t.ORDER_COPIES="ORDER_COPIES";t.BOOK_COVER_TEMPLATE="BOOK_COVER_TEMPLATE";t.TWO_F_A_AUTH="TWO_F_A_AUTH";t.EDIT_SPB_RETIRED="EDIT_SPB_RETIRED";t.FIXED_FORMAT="FIXED_FORMAT";t.WORLDPAY="WORLDPAY";t.WORLDPAY_TEST="WORLDPAY_TEST";t.RETRIEVE_USER="RETRIEVE_USER";t.NEW_W_MANAGEMENT="NEW_W8-9_MANAGEMENT";t.TOP_NAV="TOP_NAV";t.EXPANDED_DIST="EXPANDED_DIST";t.UNARCHIVE="UNARCHIVE";t.EMAIL_PREF="EMAIL_PREF";t.GRW_PAPER="GRW_PAPER";t.EDD="EDD"},118:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(0)),r=o(n(90));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var i=function(e){function i(e,t){var n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o=this,(n=!(a=u(i).call(this,e,t))||"object"!==s(a)&&"function"!=typeof a?d(o):a)._value=e.initValue||e.unboundValue||"",n._touched=!1,n._committed=!1,n._disabled=!!e.initDisabled,n._mounted=!1;var r=n.state=n.state||{};return r.value=n._value,r.touched=n._touched,r.committed=n._committed,r.disabled=n._disabled,r.validation=e.validation,r.message=null,r.serverSideValidationMessage=null,n.onBlur=n.onBlur.bind(d(d(n))),n}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,a.default.Component),t=i,(n=[{key:"id",value:function(){return this.props.id||this.context.namespace+"_"+this.props.name}},{key:"name",value:function(){return this.props.name}},{key:"note",value:function(){return this.props.note}},{key:"className",value:function(){return this.props.className||""}},{key:"label",value:function(){return this.props.label}},{key:"labelNote",value:function(){return this.props.labelNote}},{key:"value",value:function(){return this._value}},{key:"setValue",value:function(e,t){e=e||"",this._changeValue(e,t)}},{key:"reset",value:function(){this._changeValue("",!0)}},{key:"hasValue",value:function(){return this.value()&&(0<this.value().length||""!==this.value())}},{key:"touched",value:function(){return this._touched}},{key:"committed",value:function(){return this._committed}},{key:"validationLabel",value:function(){return this.props.validationLabel||this.label()}},{key:"serverSideValidationKey",value:function(){return this.props.serverSideValidationKey||null}},{key:"message",value:function(){return this.readOnly()?null:this.context.noValidation&&this.state.validation?!this.state.validation.onlyIfTouched||this.touched()||this.committed()?this.state.validation.message:null:this.state.message||this.state.serverSideValidationMessage}},{key:"errors",value:function(){var e=[];return this.context.noValidation||(e=this.context.errors[this.name()]),e}},{key:"setServerSideValidationMessage",value:function(e){this.setState({serverSideValidationMessage:e})}},{key:"disabled",value:function(){return this._disabled}},{key:"setDisabled",value:function(e){!!e!==this.disabled()&&(this._disabled=!!e,this.setState({disabled:this._disabled}),this.disabled()?this.context.disabled(this):this.context.enabled(this))}},{key:"readOnly",value:function(){return this.context.formIsReadOnly()||!!this.props.readOnly}},{key:"rules",value:function(){return this.props.rules||[]}},{key:"findRule",value:function(t){return this.rules().find(function(e){return e.key===t})}},{key:"disableValidationMessages",value:function(){var e=!!this.props.disableValidationMessages;return e||(e=this.areInitialValidationMessagesDisabled()),e}},{key:"areInitialValidationMessagesDisabled",value:function(){return!!this.props.disableInitialValidation&&!this.touched()}},{key:"required",value:function(){return this.rules().some(function(e){return"required"===e.key||"requiredAllTheTime"===e.key})}},{key:"valid",value:function(){var e=this.context.errors[this.name()];return e&&0===e.length}},{key:"invalid",value:function(){var e=this.context.errors[this.name()];return e&&0<e.length}},{key:"componentDidMount",value:function(){this._mounted=!0,this.context.register(this)}},{key:"componentWillUnmount",value:function(){this.context.unregister(this),this._mounted=!1}},{key:"componentWillReceiveProps",value:function(e){if(this.props.bestBook&&(this._value=this.props.bestBook),e.name!==this.props.name)throw"Form controls cannot have their names changed";this.context.noValidation&&!(0,r.default)(this.state.validation,e.validation)&&this.setState({validation:e.validation})}},{key:"validate",value:function(){var e,t=[];if(!this.disabled()||this._requiredAllTheTime()){var n=!0,o=!1,a=void 0;try{for(var r,i=this.rules()[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value;if(!s.onlyAfterCommit||this._committed){var l=s.test(this.value(),this.validationLabel(),this.context.controls);l&&(e={key:s.key,message:l},s.id&&(e.id=s.id),t.push(e))}}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}}return t}},{key:"errorsUpdated",value:function(){this.updateMessage()}},{key:"commit",value:function(){this._committed=!0,this.setState({committed:this._committed}),this.updateMessage()}},{key:"onBlur",value:function(e){e.persist(),this.props.onBlur&&this.props.onBlur()}},{key:"_changeValue",value:function(e,t){this._touched=!t,t&&(this._committed=!1),this.setState({committed:this._committed,touched:this._touched,serverSideValidationMessage:null,message:t?null:this.state.message});var n=this.value();e!==n&&(this._value=e,this.setState({value:e}),this.context.valueChanged(this),this.props.onChange&&this.props.onChange({oldValue:n,newValue:e}))}},{key:"_commitValue",value:function(e){this._touched=!0,this._committed=!0,this.setState({touched:this._touched,committed:this._committed,serverSideValidationMessage:null});var t=this.value();this._value=e,this.setState({value:e}),this.context.valueCommitted(this),t!==e&&this.props.onChange&&this.props.onChange({oldValue:t,newValue:e});var n={newValue:e,oldValue:t};this.props.onCommit&&this.props.onCommit(n)}},{key:"_requiredAllTheTime",value:function(){return this.rules().some(function(e){return"requiredAllTheTime"===e.key})}},{key:"updateMessage",value:function(){var e=this.errors(),t=null;e&&0<e.length&&(this.touched()||this.committed()||"required"!==e[0].key)&&(t=e&&0<e.length?e[0].message:null),this.state.message!==t&&this.setState({message:t})}}])&&l(t.prototype,n),o&&l(t,o),i}();i.propTypes={id:a.default.PropTypes.string,name:a.default.PropTypes.string.isRequired,note:a.default.PropTypes.any,className:a.default.PropTypes.string,label:a.default.PropTypes.string,labelNote:a.default.PropTypes.string,unboundValue:a.default.PropTypes.any,initValue:a.default.PropTypes.any,initDisabled:a.default.PropTypes.bool,readOnly:a.default.PropTypes.bool,validationLabel:a.default.PropTypes.string,validation:a.default.PropTypes.object,serverSideValidationKey:a.default.PropTypes.string,rules:a.default.PropTypes.arrayOf(a.default.PropTypes.object),disableValidationMessages:a.default.PropTypes.bool,disableInitialValidation:a.default.PropTypes.bool,onChange:a.default.PropTypes.func,onCommit:a.default.PropTypes.func,onBlur:a.default.PropTypes.func},i.contextTypes={namespace:a.default.PropTypes.string.isRequired,register:a.default.PropTypes.func.isRequired,unregister:a.default.PropTypes.func.isRequired,formIsReadOnly:a.default.PropTypes.func.isRequired,valueChanged:a.default.PropTypes.func.isRequired,valueCommitted:a.default.PropTypes.func.isRequired,enabled:a.default.PropTypes.func.isRequired,disabled:a.default.PropTypes.func.isRequired,controls:a.default.PropTypes.object.isRequired,errors:a.default.PropTypes.object.isRequired,noValidation:a.default.PropTypes.bool.isRequired};var f=i;t.default=f},119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=(o=n(0))&&o.__esModule?o:{default:o};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,l(t).call(this,e))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.tableBody,n=e.tableHeader,o=this.props.tableStyle?this.props.tableStyle:"";return r.default.createElement("div",{className:"table-container-box"},t&&r.default.createElement("table",{className:"table ".concat(o)},r.default.createElement("thead",null,n),r.default.createElement("tbody",null,t.map(function(e){return e}))))}}])&&i(n.prototype,o),a&&i(n,a),t}();t.default=c},12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(0)),r=(o(n(13)),o(n(1))),s=o(n(118)),l=o(n(329)),u=o(n(963));function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var i=function(e){function i(e,t){var n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o=this,(n=!(a=p(i).call(this,e,t))||"object"!==c(a)&&"function"!=typeof a?h(o):a)._options=[];var r=n.state=n.state||{};return r.dropdownOpen=!1,r.focusedOptionIndex=n.props.defaultDropdownSelection?0:null,r.hideNovalue=!!n.props.firstRendor,n._controlEventsDisabled=!1,n._fakedInputs=null,n._preProcessInputValue=n._preProcessInputValue.bind(h(h(n))),n._setInputValue=n._setInputValue.bind(h(h(n))),n._getAutoCompleteFakedInputs=n._getAutoCompleteFakedInputs.bind(h(h(n))),n.onKeyDown=n.onKeyDown.bind(h(h(n))),n.onPaste=n.onPaste.bind(h(h(n))),n.onChange=n.onChange.bind(h(h(n))),n.onBlur=n.onBlur.bind(h(h(n))),n.onFocus=n.onFocus.bind(h(h(n))),n.onDropdownSelection=n.onDropdownSelection.bind(h(h(n))),n.onDocumentClick=n.onDocumentClick.bind(h(h(n))),n}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,s.default),t=i,(n=[{key:"labelAsPlaceholder",value:function(){return!!this.props.labelAsPlaceholder}},{key:"trim",value:function(){return!1!==this.props.trim}},{key:"dropdownOpen",value:function(){return this.state.dropdownOpen}},{key:"options",value:function(){return this._options}},{key:"nooptions",value:function(){return"Search by Title or ISBN"==this.props.label?[]:[{label:"No match",rightLabel:"",value:{suggestedSearch:"No match"}}]}},{key:"pattern",value:function(){return this.props.pattern||/^.*$/}},{key:"showRemainingCharCount",value:function(){return!!this.props.showRemainingCharCount}},{key:"suggestions",value:function(){return this.props.suggestions&&Array.isArray(this.props.suggestions.items)?this.props.suggestions:{items:[]}}},{key:"commitOnEnterKey",value:function(){return!!this.props.commitOnEnterKey}},{key:"maxLength",value:function(){return this.props.maxLength}},{key:"focus",value:function(){this.refs.primary.focus()}},{key:"blur",value:function(){this.refs.primary.blur()}},{key:"disableControlEvents",value:function(e){this._controlEventsDisabled=!!e}},{key:"_preProcessInputValue",value:function(e){var t=e;return this.props.prefix&&(t=!t.startsWith(this.props.prefix)||t.length<3?"":t.slice(this.props.prefix.length)),t}},{key:"_setInputValue",value:function(e){e=this._preProcessInputValue(e),this._changeValue(e),0<this.suggestions().items.length&&this.updateOptions()}},{key:"_getAutoCompleteFakedInputs",value:function(){if(!this._fakedInputs){var e=Math.floor(1e3*Math.random()+1),t="f_username_"+e,n="f_password_"+e;this._fakedInputs=a.default.createElement("div",{className:"new-password-autocomplete"},a.default.createElement("input",{id:t,type:"text",name:t,tabIndex:"-1"}),a.default.createElement("label",{htmlFor:t},"new user name"),a.default.createElement("input",{id:n,type:"password",name:n,tabIndex:"-1"}),a.default.createElement("label",{htmlFor:n},"new password"))}return this._fakedInputs}},{key:"onFocus",value:function(e){this.props.onFocus&&this.props.onFocus(e)}},{key:"onKeyDown",value:function(e){if(!this._controlEventsDisabled){var t=this.id();this.props.noValue&&document.getElementById(t)&&(document.getElementById(t).parentElement.parentElement.classList.remove("error"),document.getElementById(t).parentElement.parentElement.querySelector(".message").innerHTML="",document.getElementById(t).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.classList.remove("nomatch-active"));var n=e.keyCode;if(this.commitOnEnterKey()&&13===n&&null===this.state.focusedOptionIndex){var o=this._preProcessInputValue(this.refs.primary.value);return this._commitValue(o),void this.closeDropdown()}if(this.dropdownOpen()){if(38===n){e.preventDefault();var a=null===this.state.focusedOptionIndex?0:this.state.focusedOptionIndex-1;a<0&&(a=this.options().length-1),this.setState({focusedOptionIndex:a})}else if(40===n){e.preventDefault();var r=null===this.state.focusedOptionIndex?0:this.state.focusedOptionIndex+1;r>this.options().length-1&&(r=0),this.setState({focusedOptionIndex:r})}else if(27===n)e.preventDefault(),this.closeDropdown();else if(13===n&&(e.preventDefault(),null!==this.state.focusedOptionIndex)){var i=this.options()[this.state.focusedOptionIndex];this.onDropdownSelection(i)}}else{var s=e.target.name;e.shiftKey&&9===n&&"categorySearch"===s?document.querySelector(".icon-close-modal").focus():9===n&&0<document.querySelectorAll(".category-checkbox label").length&&"categorySearch"===s&&document.querySelectorAll(".category-checkbox label")[0].focus(),13===n&&this.commit()}}}},{key:"onPaste",value:function(e){var t;this._controlEventsDisabled||(this.hasValue()?(t=this.value(),this._setInputValue(""),this._setInputValue(t)):this._setInputValue(""))}},{key:"onChange",value:function(e){if(!this._controlEventsDisabled){e.persist();var t=e.target.value;this.setState({hideNovalue:!1}),this.trim()&&(t=t.replace(/^\s+/g,"")),t.match(this.pattern())&&this._setInputValue(t)}}},{key:"onBlur",value:function(e){var t=this;if(!this._controlEventsDisabled&&!this.props.disableOnBlur){var n=e.target.value;this.trim()&&(n=n.trim()),n=this._preProcessInputValue(n),this._commitValue(n),f(p(i.prototype),"onBlur",this).call(this,e),setTimeout(function(){return t.closeDropdown()},500)}}},{key:"onDropdownSelection",value:function(e){var t=!0;this.props.onSuggestionSelected&&(t=this.props.onSuggestionSelected(e.value)),(null==t||t)&&this._changeValue(e.label),this.closeDropdown(),this.refs.primary.focus()}},{key:"onDocumentClick",value:function(e){this.closeDropdown()}},{key:"updateOptions",value:function(){var e,t,a=this;if(this._options=[],this.hasValue()){var r=this.suggestions();e=r.filter?r.filter:function(e){var t=e[r.labelKey];null==t&&(t="");var n=t.toLowerCase(),o=a.value().toLowerCase();return n.startsWith(o)&&n!==o},t=r.sort?r.sort:function(e){return e},this._options=t(r.items.filter(e)).map(function(e){return{value:e,label:e[r.labelKey],rightLabel:e[r.rightLabelKey]}})}0<this._options.length?(this.setState({focusedOptionIndex:this.props.defaultDropdownSelection?0:null}),this.openDropdown()):this.closeDropdown()}},{key:"openDropdown",value:function(){this.dropdownOpen()||(this.setState({dropdownOpen:!0,focusedOptionIndex:this.props.defaultDropdownSelection?0:null}),document.addEventListener("click",this.onDocumentClick))}},{key:"closeDropdown",value:function(){this.dropdownOpen()&&(this.setState({dropdownOpen:!1,focusedOptionIndex:null}),document.removeEventListener("click",this.onDocumentClick))}},{key:"render",value:function(){var e=null,t=this.props.upperCaseCoversion?"primary upperCaseCoversion":"primary";return this.props.autoComplete&&"new-password"===this.props.autoComplete?(e=this._getAutoCompleteFakedInputs(),"nope"):0<this.suggestions().items.length?"nope":"on"!==this.props.autoComplete&&this.props.autoComplete,a.default.createElement("div",{className:(0,r.default)("base-control","input-control","clearfix",{"has-value":this.props.prefix||this.hasValue()},{"label-mode":!this.labelAsPlaceholder()},{"placeholder-mode":this.labelAsPlaceholder()},{error:!!this.message()&&!this.disableValidationMessages()},{disabled:this.disabled()},{"read-only":this.readOnly()},this.className())},!this.disableValidationMessages()&&a.default.createElement("div",{className:"message"},!this.props.showValidationPane||this.props.showValidationPane&&0==this.value().length?this.message():""),this.areInitialValidationMessagesDisabled()&&a.default.createElement("div",{className:"message"},"Â "),a.default.createElement("div",{className:"input-area"},e,a.default.createElement("input",{ref:"primary",id:this.id(),name:this.name(),type:this.props.type,placeholder:this.props.placeholder,className:t,value:this.props.prefix?this.props.prefix+this.value():this.value(),maxLength:this.maxLength(),disabled:this.disabled(),readOnly:this.readOnly(),tabIndex:this.readOnly()?"-1":"0",autoComplete:"off",onKeyDown:this.onKeyDown,onChange:this.onChange,onFocus:this.onFocus,onPaste:this.onPaste,onBlur:this.onBlur}),a.default.createElement("label",{className:(0,r.default)("primary",{placeholder:this.labelAsPlaceholder()}),htmlFor:this.id()},this.label(),this.required()&&!this.labelAsPlaceholder()&&!this.disableValidationMessages()&&a.default.createElement("span",null,"*"),this.areInitialValidationMessagesDisabled()&&a.default.createElement("span",null,"*"),1==this.props.infoIcon&&a.default.createElement("span",{className:"icon-info-color-blue"},"Â ",a.default.createElement("a",{style:{color:"#3D6DB5",textDecoration:"none"},href:"https://wiki.barnesandnoble.com/confluence/display/NPP/Broadcast+Messages+Wiki+for+Admin+Queries",target:"_blank",className:"icon-info"}))),a.default.createElement(l.default,{open:this.dropdownOpen(),options:this.options(),focusedOptionIndex:this.state.focusedOptionIndex,onSelection:this.onDropdownSelection}),this.props.noValue&&this.options().length<1&&0<this.value().length&&!this.state.hideNovalue&&a.default.createElement(l.default,{open:!0,options:this.nooptions(),focusedOptionIndex:2,onSelection:function(){},clss:this.id()}),this.props.showValidationPane&&0<this.value().length&&a.default.createElement(u.default,{open:!0,messages:this.props.ruleList,errors:this.errors()})),this.note()&&a.default.createElement("div",{className:"note",dangerouslySetInnerHTML:{__html:this.note()}}),this.renderRemainingChars())}},{key:"renderRemainingChars",value:function(){var e=this.findRule("maxLength");if(!this.showRemainingCharCount()||!e)return null;var t=Math.max(e.maxLength-this.value().length,0);return a.default.createElement("div",{className:(0,r.default)("remaining-chars",{zero:0===t})},t," characters remaining...")}}])&&d(t.prototype,n),o&&d(t,o),i}();i.propTypes=function(a){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(e){var t,n,o;t=a,o=r[n=e],n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o})}return a}({},s.default.propTypes,{autoComplete:a.default.PropTypes.string,labelAsPlaceholder:a.default.PropTypes.bool,trim:a.default.PropTypes.bool,showRemainingCharCount:a.default.PropTypes.bool,suggestions:a.default.PropTypes.any,maxLength:a.default.PropTypes.number,onSuggestionSelected:a.default.PropTypes.func,commitOnEnterKey:a.default.PropTypes.bool,ruleList:a.default.PropTypes.arrayOf(a.default.PropTypes.object)});var y=i;t.default=y},121:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=n(2),s=a(n(1)),l=o(n(33)),u=o(n(25)),c=a(n(8)),d=o(n(14));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=m(a).call(this,e))||"object"!==f(o)&&"function"!=typeof o?y(n):o).state={clickTriggered:!1},t.onClick=t.onClick.bind(y(y(t))),t.onProjectCreated=t.onProjectCreated.bind(y(y(t))),t.makeClick=t.makeClick.bind(y(y(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,r.default.Component),t=a,(n=[{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"componentWillMount",value:function(){c.default.addProjectCreatedListener(this.onProjectCreated)}},{key:"componentWillUnmount",value:function(){c.default.removeProjectCreatedListener(this.onProjectCreated)}},{key:"onClick",value:function(e){var t={eventInfo:{eventName:"Create a New Book Click",eventAction:"createANewBookClick",timeStamp:new Date},category:{primaryCategory:"Nav Pages"}};u.omnitureActionInvoked(t,"onCreateANewBookClick"),this.setState({clickTriggered:!0},function(){return d.startNewProject()})}},{key:"onProjectCreated",value:function(){i.browserHistory.push("/"+l.Base)}},{key:"render",value:function(){var e=r.default.createElement("span",{className:"text"},r.default.createElement("span",{className:"icon-plus"})," Create a New Book");return this.props.link&&(e=r.default.createElement("span",{className:"link"},this.props.text)),r.default.createElement("div",{className:(0,s.default)({"btn btn-new-project":!this.props.link,"btn-block":!this.props.buttonBlock,"hidden-xs":!this.props.hiddenXs}),tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onClick},e)}}])&&p(t.prototype,n),o&&p(t,o),a}();t.default=v},130:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,n){return l(a.default.get(e,t),n)},t.post=function(e,t,n){return l(a.default.post(e,t),n)},t.put=function(e,t,n){return l(a.default.put(e,t),n)},t.del=function(e,t,n){return s(e,t,n)},t.remove=s,t.setHeaderInspector=void 0;var o,a=(o=n(243))&&o.__esModule?o:{default:o},r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(10));var i;function s(e,t,n){return l(a.default.delete(e,t),n)}function l(e,o){return new Promise(function(n){e.then(function(e){var t=e.data;i&&i(e.headers),"SUCCESS"===t.code?n(t.payload):o&&o(t)||u(t.errors)}).catch(function(e){var t={code:"UNEXPECTED",errors:[],payload:e};o&&o(t)||u(t.errors)})})}function u(e){r.showErrorModal2(e,!0)}t.setHeaderInspector=function(e){i=e}},133:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageType=void 0;t.MessageType={MARKETING_MESSAGE:"1",BROADCAST_MESSAGE:"2",PROMOTION_MESSAGE:"3"}},134:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=u(a).call(this,e))||"object"!==s(o)&&"function"!=typeof o?d(n):o).state={toggle:e.initValue},t.onToggle=t.onToggle.bind(d(d(t))),t.makeClick=t.makeClick.bind(d(d(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,r.default.Component),t=a,(n=[{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onToggle",value:function(){var e=this,t=!this.state.toggle;this.setState({toggle:t},function(){e.props.action&&e.props.action(t)})}},{key:"setValue",value:function(e){this.setState({toggle:e})}},{key:"render",value:function(){var e=this.props.containerStyle?this.props.containerStyle:null,t=this.props.labelStyle?this.props.labelStyle:null,n=void 0===this.props.visible||this.props.visible;return r.default.createElement("div",{className:(0,i.default)("toggle-button-container",{invisible:!n}),style:e},this.props.labelRight&&r.default.createElement("div",{className:"toggle-label pull-right",style:t},this.props.labelText),r.default.createElement("div",{tabIndex:"0",className:(0,i.default)("toggle-button",{active:this.state.toggle},{disabled:this.props.disabled}),onClick:this.props.disabled?null:this.onToggle,onKeyDown:this.makeClick},this.props.type&&"checktoggle"===this.props.type&&r.default.createElement("div",{className:"glyphicon glyphicon-ok"}),this.props.type&&"checktoggle"===this.props.type&&r.default.createElement("div",{className:"glyphicon glyphicon-remove"}),r.default.createElement("div",{className:(0,i.default)("toggle-switch",{active:this.state.toggle})})),this.props.labelLeft&&r.default.createElement("div",{className:"toggle-label pull-right",style:t},this.props.labelText))}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=a},14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.acknowledgePageCountChanged=function(e){i.acknowledgePageCountChanged(e,function(e){c.default.dispatch({type:d.default.Project.ACKNOWLEDGE_PAGECOUNT_CHANGED,args:{}})})},t.approveCover=function(e,t,n,o){i.approve(e,t,function(e){c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e,navigate:n,publish:o}})})},t.approveInterior=function(e,t,n){i.approve(e,"Book",function(e){c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e,navigate:t,publish:n}})})},t.approveSample=function(e,t,n){i.approveSample(e,"SAMPLE",function(e){c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e,navigate:t,publish:n}})})},t.bookSizeTypeComplete=function(){c.default.dispatch({type:d.default.Project.BOOK_SIZE_TYPE_COMPLETE})},t.orderDeleteReasonComplete=function(){i.orderDeleteReasonComplete(function(e){c.default.dispatch({type:d.default.Project.ORDER_DELETE_REASON_COMPLETE,args:e})})},t.bookSizeTypeReset=function(e,t){c.default.dispatch({type:d.default.Project.BOOK_SIZE_TYPE_RESET,args:{elements:e,resetPrice:t}})},t.calculateBookPrice=function(e,t,n){if(e.type!==a.EBOOK)return;setTimeout(function(){c.default.dispatch({type:d.default.Project.START_CALCULATE_BOOK_PRICE})},0),i.getBookPrice(e,t,function(e){c.default.dispatch({type:d.default.Project.COMPLETE_CALCULATE_BOOK_PRICE,args:{details:e,requestId:n}})},function(e){c.default.dispatch({type:d.default.Project.ERROR_CALCULATE_BOOK_PRICE,args:e})})},t.calculateQuotedBookPrice=function(e,t){i.getPriceQuote(e,t,function(e){c.default.dispatch({type:d.default.Project.COMPLETE_PRICE_ESTIMATE,args:{quote:e}})},function(e){c.default.dispatch({type:d.default.Project.ERROR_PRICE_ESTIMATE,args:e})})},t.generateCover=function(e){i.generateCover(e,function(e){c.default.dispatch({type:d.default.Project.COVER_GENERATED_DOWNLOAD,args:{result:e}})},function(e){c.default.dispatch({type:d.default.Project.ERROR_PRICE_ESTIMATE,args:e})})},t.createProject=function(e,t){i.saveProject(e,function(e){c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e,navigate:t}})})},t.deleteEbookCoupon=function(e){i.deleteEbookCoupon(e,function(e){c.default.dispatch({type:d.default.Project.DELETE_EBOOK_COUPONS,args:e})})},t.deleteProject=function(e){c.default.dispatch({type:d.default.Project.START_DELETE_PROJECT}),i.deleteProject(e,function(){c.default.dispatch({type:d.default.Project.DELETE_PROJECT,args:{project:e}})})},t.deleteSearchProject=function(e,t,n){c.default.dispatch({type:d.default.Project.START_DELETE_PROJECT}),i.deleteSearchProject(e,t,n,function(){c.default.dispatch({type:d.default.Project.DELETE_SEARCH_PROJECT,args:{project:e,updateIntent:t,customerId:n}})})},t.TranferIsbnProject=function(e,t,n){i.tranferIsbnProject(e,t,n,function(){c.default.dispatch({type:d.default.Project.TRANFER_ISBN_PROJECT,args:{project:t,vendornumber:e,customerId:n}})})},t.doesProjectBookSizeExist=function(e,t){c.default.dispatch({type:d.default.Project.START_PROJECT_BOOKSIZE_EXIST}),i.doesProjectBookSizeExist(e,t,function(e){c.default.dispatch({type:d.default.Project.COMPLETE_PROJECT_BOOKSIZE_EXIST,args:{doProjectsExist:e}})},function(e){c.default.dispatch({type:d.default.Project.ERROR_PROJECT_BOOKSIZE_EXIST,args:e})})},t.getAllLanguages=function(){i.getAllLanguages(function(e){c.default.dispatch({type:d.default.Project.LANGUAGES_LOADED,args:e})})},t.getCouponSpecs=function(){i.getCouponSpecs(function(e){c.default.dispatch({type:d.default.Project.COUPON_SPECS_LOADED,args:e})},function(e){console.log(e)})},t.getCoverFormattingSpecs=function(e){i.getCoverFormattingSpecs(e,function(e){c.default.dispatch({type:d.default.Project.COVER_FORMATTING_SPECS,args:{data:e}})})},t.getEbookCoupons=function(e,t,n,o,a){i.getEbookCoupons(e,t,n,o,a,function(e){c.default.dispatch({type:d.default.Project.LOAD_EBOOK_COUPONS,args:e})})},t.getPreflightStatus=u,t.getPriceUpdateWindow=function(){i.getPriceUpdateWindow(function(e){c.default.dispatch({type:d.default.Project.LOAD_PRICE_UPDATE_WINDOW,args:{data:e}})})},t.handleSubmitCouponErrors=p,t.loadBookSizeTypeMetaData=function(e){i.loadBookSizeTypeMetaData(e,function(e){c.default.dispatch({type:d.default.Project.BOOK_SIZE_TYPE_METADATA,args:{data:e}})})},t.loadCategories=function(e,t,n){i.loadCategories(e,t,n,function(e){c.default.dispatch({type:d.default.Project.LOAD_CATEGORIES,args:{categories:e}})})},t.loadProject=function(e,t,n){i.loadProject(e,function(e){c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e,navigate:t,publish:n}})})},t.loadProjectConstants=function(){i.loadBookSizeTypeMetaData(null,function(e){c.default.dispatch({type:d.default.Project.PROJECT_CONSTANTS_LOADED,args:{data:e}})})},t.loadProjects=function(){i.loadProjects(function(e){c.default.dispatch({type:d.default.Project.LOAD_EXISTING_PROJECTS,args:{projects:e}})})},t.postChanges=function(e,t){r.setSaleStatus(e,!0,!1,!1,function(e){c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e}}),t&&t()})},t.previewEBook=function(t,e){if(!t.isEBook)return;var n=!!e,o=new s.default(function(){i.getPreviewPreflightStatus(t,n,function(e){"NOT_STARTED"===e.preFlightCheckStatus||"IN_PROGRESS"===e.preFlightCheckStatus?setTimeout(function(){o.run()},2e3):"COMPLETED"===e.preFlightCheckStatus||"SUCCESSFUL"===e.preFlightCheckStatus?i.previewEBook(t,function(e){c.default.dispatch({type:d.default.Project.LOAD_EBOOK_PREVIEW,args:{url:e}})}):(e.preFlightCheckStatus,c.default.dispatch({type:d.default.Project.LOAD_EBOOK_PREVIEW_FAILED,args:{failReason:"nps",status:e.preFlightCheckStatus}}))},function(e){c.default.dispatch({type:d.default.Project.LOAD_EBOOK_PREVIEW_FAILED,args:{failReason:"web",status:e}})})},60,function(){c.default.dispatch({type:d.default.Project.LOAD_EBOOK_PREVIEW_TIMEDOUT,args:{failReason:"timeout"}})});o.run()},t.previewEBookSample=function(t,e){if(!t.isEBook)return;var n=!!e,o=new s.default(function(){i.getPreviewSamplePreflightStatus(t,n,function(e){"NOT_STARTED"===e.preFlightCheckStatus||"IN_PROGRESS"===e.preFlightCheckStatus?setTimeout(function(){o.run()},2e3):"COMPLETED"===e.preFlightCheckStatus||"SUCCESSFUL"===e.preFlightCheckStatus?i.previewEBookSample(t,function(e){c.default.dispatch({type:d.default.Project.LOAD_EBOOK_PREVIEW,args:{url:e}})}):(e.preFlightCheckStatus,c.default.dispatch({type:d.default.Project.LOAD_EBOOK_PREVIEW_FAILED,args:{failReason:"nps",status:e.preFlightCheckStatus}}))},function(e){c.default.dispatch({type:d.default.Project.LOAD_EBOOK_PREVIEW_FAILED,args:{failReason:"web",status:e}})})},60,function(){c.default.dispatch({type:d.default.Project.LOAD_EBOOK_PREVIEW_TIMEDOUT,args:{failReason:"timeout"}})});o.run()},t.removePublishAlert=function(){c.default.dispatch({type:d.default.Project.PUBLISH_ALERT_REMOVE})},t.removeUploadErrors=function(){c.default.dispatch({type:d.default.Project.REMOVE_UPLOAD_ERRORS,args:{}})},t.resetCalculatedBookPrice=function(e){setTimeout(function(){c.default.dispatch({type:d.default.Project.RESET_PRICE_ESTIMATE,args:{project:e}})},0)},t.scheduledPriceDelete=function(e,t){i.scheduledPriceDelete(e,t,function(e){c.default.dispatch({type:d.default.Project.SCHEDULED_PRICES,args:{prices:e}})})},t.selectSamplePreview=function(e){i.selectSamplePreview(e,function(e){c.default.dispatch({type:d.default.Project.SELECT_SAMPLE_PREVIEW,args:e})})},t.scheduledPrices=function(e){i.scheduledPrices(e,function(e){c.default.dispatch({type:d.default.Project.SCHEDULED_PRICES,args:{prices:e}})})},t.scheduledPriceSubmit=function(e,t,n,o,a,r){i.scheduledPriceSubmit(e,t,n,o,a,r,function(e){c.default.dispatch({type:d.default.Project.SCHEDULED_PRICES,args:{prices:e}})})},t.searchCategories=function(e,t,n,o,a){i.searchCategories(e,t,n,o,a,function(e){c.default.dispatch({type:d.default.Project.SEARCH_CATEGORIES,args:e})})},t.setBookSizeType=function(e,t,n,o){var a=e.clone();a.bookSizeType=t,i.saveProject(a,function(e){c.default.dispatch({type:d.default.Project.SET_BOOKSIZE_TYPE,args:{project:a,navigate:n}}),c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e,publish:o}})},function(e){c.default.dispatch({type:d.default.Project.ERROR_SET_BOOKSIZE_TYPE,args:e})})},t.setEditStatus=function(e){i.setEditStatus(e,function(e){c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e}})})},t.setOrderStatus=function(e){i.setOrderStatus(e,function(e){c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e}}),c.default.dispatch({type:d.default.Project.ORDER_STATUS_SET,args:{}})},function(e){c.default.dispatch({type:d.default.Project.ORDER_STATUS_ERROR,args:{response:e}});var t=e[0].code;if(a.ISBN_ERRORS.includes(t))return!0})},t.setProjectId=function(e,t,n){c.default.dispatch({type:d.default.Project.SET_PROJECT_ID,args:{id:e,isExisting:t,navigate:n}})},t.setSaleStatus=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=3<arguments.length?arguments[3]:void 0,a=4<arguments.length?arguments[4]:void 0;r.setSaleStatus(t,e,n,!1,function(e){c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e}}),c.default.dispatch({type:d.default.Project.SET_SALE_STATUS,args:{id:t}}),o&&o()},function(e){return a&&a(),c.default.dispatch({type:d.default.Project.SET_SALE_STATUS_ERROR,args:e}),!0})},t.startNewProject=function(){c.default.dispatch({type:d.default.Project.LOAD_NEW_PROJECT})},t.submitCoupon=function(e,t){i.submitCoupon(e,function(e){c.default.dispatch({type:d.default.Project.USER_COUPON_SAVED,args:{response:e}}),t&&t(e)},function(e){return p(e)})},t.updateProject=m,t.updateProjectWithoutSave=function(e){c.default.dispatch({type:d.default.Project.CHANGE_PROJECT_NOT_SAVED,args:{project:e}})},t.updateSpine=function(e,t){i.saveSpine(e,function(e){u({id:e.id,projectType:e.projectType,projectElementType:"LsiCover",fileType:2})})},t.uploadAttachment=function(e,n,o){i.uploadAttachment(e,function(e){if(n.isEBook){var t=n.clone();"interior"===o?t.interiorApproved=!1:t.coverFullApproved=!1,m(t,!1,!1,function(){c.default.dispatch({type:d.default.Project.UPLOAD_ATTACHMENT,args:{project:e,uploadType:o}})})}else c.default.dispatch({type:d.default.Project.UPLOAD_ATTACHMENT,args:{project:e}})},function(e){c.default.dispatch({type:d.default.Project.UPLOAD_ATTACHMENT_ERROR,args:e})})},t.uploadSampleAttachment=function(e,n,o){i.uploadSampleAttachment(e,function(e){if(n.isEBook){var t=n.clone();"interior"===o?t.sampleApproved=!1:t.coverFullApproved=!1,m(t,!1,!1,function(){c.default.dispatch({type:d.default.Project.UPLOAD_SAMPLE_ATTACHMENT,args:{project:e,uploadType:o}})})}else c.default.dispatch({type:d.default.Project.UPLOAD_SAMPLE_ATTACHMENT,args:{project:e}})},function(e){c.default.dispatch({type:d.default.Project.UPLOAD_ATTACHMENT_ERROR,args:e})})},t.getEbookRoyaltyRates=function(){i.getEbookRoyaltyRates(function(e){c.default.dispatch({type:d.default.ROYALTY_PRICES,args:{data:e}})})},t.getPageBanners=function(e){i.getPageBanners(e,function(e){c.default.dispatch({type:d.default.PAGE_BANNERS,args:{data:e}})})},t.requestCorrection=void 0;var c=l(n(16)),d=l(n(18)),f=o(n(100)),a=o(n(15)),i=o(n(1019)),r=(l(n(50)),o(n(518))),s=l(n(1024));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function u(t){i.getPreflightStatus(t,function(n){if("IN_PROGRESS"===n.preFlightCheckStatus||"NOT_STARTED"===n.preFlightCheckStatus||"NotStarted"===n.data){var e=!0;!e||"CONVERTED"!==n.pdfConversionStatus&&"CONVERTED_FROM_DOC"!==n.pdfConversionStatus||(e=!1,c.default.dispatch({type:d.default.Project.PDF_COVERSION_COMPLETE})),setTimeout(function(){u(t)},2e3)}else{if("ERROR"!==n.preFlightCheckStatus&&"SUCCESSFUL"!==n.preFlightCheckStatus&&"Completed"!==n.data)throw"Unknown preflight status "+n.preFlightCheckStatus;i.loadProject(t.id,function(e){c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e}}),"UNAVAILABLE"===n.pdfConversionStatus&&c.default.dispatch({type:d.default.Project.PDF_COVERSION_COMPLETE});var t="SUCCESSFUL"===n.preFlightCheckStatus||"Completed"===n.data;c.default.dispatch({type:t?d.default.Project.GET_PREFLIGHT_STATUS_SUCCESS:d.default.Project.GET_PREFLIGHT_STATUS_ERROR,args:{data:n}}),c.default.dispatch({type:d.default.BuildABookState.REFRESH_SUB_NAVIGATION,args:{}})})}})}function p(e){if(!e||!e.length)return!1;var t=[];f.COUPON_ERRORS.forEach(function(e){t.push(e.id)});var n=!1,o={fieldErrors:[]},a=!0,r=!1,i=void 0;try{for(var s,l=e[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value;-1<t.indexOf(u.code)&&(n=!0,o.fieldErrors.push(u.code))}}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return!!n&&(c.default.dispatch({type:d.default.Project.USER_COUPON_SAVED_ERROR,args:{errors:o}}),!0)}function m(e,t,n,o){e.id?i.saveProject(e,function(e){c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e,navigate:t,publish:n}}),o&&o()},function(e){return c.default.dispatch({type:d.default.Project.CHANGE_PROJECT_ERROR,args:{errors:e}}),!!a.ERRORS[e[0].code]}):(c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e,navigate:t}}),o&&o())}t.requestCorrection=function(e){i.requestCorrection(e,function(e){c.default.dispatch({type:d.default.Project.CHANGE_PROJECT,args:{project:e}})})}},146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessStatus=t.AccountStatus=void 0;t.AccountStatus={NONE:"None",NEW:"New",PENDING:"Pending",ACTIVE:"Active",IN_REVIEW:"InReview",REJECTED:"Rejected",CANCELED:"Cancelled",EXISTING:"Existing",SALES_EXISTING:"SalesExisting"};t.BusinessStatus={NONE:"None",ACTIVE:"Active",ON_HOLD:"OnHold",PRE_TERMINATION:"PreTermination",TERMINATED:"Terminated",MIGRATED:"Migrated"}},147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(1)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(28)),c=o(n(30));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=d(a).call(this))||"object"!==s(o)&&"function"!=typeof o?p(n):o).state={content:null,loading:!1},t.onAdContentLoaded=t.onAdContentLoaded.bind(p(p(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,r.default.Component),t=a,(n=[{key:"componentWillMount",value:function(){c.default.addAdContentLoadedListener(this.onAdContentLoaded)}},{key:"componentDidMount",value:function(){this.updateAdContent(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.contentIdentifier===e.contentIdentifier&&this.props.contentIdentifiers===e.contentIdentifiers||this.updateAdContent(e)}},{key:"componentWillUnmount",value:function(){c.default.removeAdContentLoadedListener(this.onAdContentLoaded)}},{key:"onAdContentLoaded",value:function(){this.setState({loading:!1}),this.updateAdContent(this.props)}},{key:"updateAdContent",value:function(e){if(c.default.isAdContentLoaded()){var t=e.contentIdentifiers||[];e.contentIdentifier&&(t=[e.contentIdentifier]);var n=!0,o=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value,l=c.default.getAdContent(s);if(l){this.setState({content:l});break}}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}}else this.state.loading||(this.setState({loading:!0}),u.loadAdContent())}},{key:"render",value:function(){if(!this.state.content)return null;var e="hidden-xs";return"true"===this.props.showOnMobile?e="":"true"===this.props.showOnlyOnMobile&&(e="visible-xs"),r.default.createElement("div",{className:(0,i.default)("marketing-content np-mkt-included-content text-block "+e),dangerouslySetInnerHTML:{__html:this.state.content}})}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=a},15:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROJECT_STATUSES=t.NODELETEREASON=t.ISBN_ERRORS=t.ERRORS=t.CORRECTION_TYPES=t.INTERIOR_PRINT_COLORS=t.COVER_TYPES=t.COVER_FORMAT=t.SPB_RETAIL_AND_DISTRIBUTION_PERCENTAGE=t.EBOOK_RETAIL_AND_DISTRIBUTION_PERCENTAGES=t.PRINT_CATEGORY_CRUMB_SUBJECTS=t.NUM_CATEGORIES_WRITTEN=t.NUM_CATEGORIES=t.NONFICTION_SUBJECT_TYPE=t.LANGUAGES=t.FORMAT_CODES=t.FICTION_SUBJECT_TYPE=t.CONTRIBUTOR_ENUMS=t.AUDIENCES=t.AGE_RANGES=t.SPB_PRE_ORDER_COVER=t.LSI_COVER=t.FRONT_COVER=t.BACK_COVER=t.SELECTED_SAMPLE=t.DEFAULT_SAMPLE=t.CUSTOM_SAMPLE=t.POD=t.PRINT=t.EBOOK=t.ALL=void 0;t.ALL="ALL";t.EBOOK="EBOOK";t.PRINT="SPB";t.POD="POD";t.CUSTOM_SAMPLE="CUSTOM";t.DEFAULT_SAMPLE="DEFAULT";t.SELECTED_SAMPLE="SELECTED";t.BACK_COVER="BACK_COVER";t.FRONT_COVER="FRONT_COVER";t.LSI_COVER="LsiCover";t.SPB_PRE_ORDER_COVER="SPB_PRE_ORDER_COVER";t.AGE_RANGES=[{value:"ZERO_TWO",label:"Age 0-2"},{value:"THREE_FIVE",label:"Age 3-5"},{value:"SIX_EIGHT",label:"Age 6-8"},{value:"NINE_TWELVE",label:"Age 9-12"}];t.AUDIENCES=[{value:"JUV",label:"Kids"},{value:"YA",label:"Young Adult (Teens)"},{value:"TRA",label:"General Adult"},{value:"MA",label:"Mature"}];t.CONTRIBUTOR_ENUMS={author:"A",editor:"E",illustrator:"I",translator:"T",photographer:"P",introductionBy:"V",compiledBy:"L",narrator:"Y",other:"at_sign"};t.FICTION_SUBJECT_TYPE="F";t.FORMAT_CODES={ENCRYPTED:"EP",UNENCRYPTED:"EF"};t.LANGUAGES=[{value:"ENG",label:"English"},{value:"AFR",label:"Afrikaans",separatorAbove:!0},{value:"ALB",label:"Albanian"},{value:"BAQ",label:"Basque"},{value:"BRE",label:"Breton"},{value:"CAT",label:"Catalan"},{value:"DAN",label:"Danish"},{value:"DUT",label:"Dutch"},{value:"EST",label:"Estonian"},{value:"FIN",label:"Finnish"},{value:"FRE",label:"French"},{value:"GER",label:"German"},{value:"HUN",label:"Hungarian"},{value:"ICE",label:"Icelandic"},{value:"IND",label:"Indonesian"},{value:"ITA",label:"Italian"},{value:"KUR",label:"Kurdish"},{value:"LAT",label:"Latin"},{value:"MAY",label:"Malay"},{value:"NOR",label:"Norwegian"},{value:"POR",label:"Portuguese"},{value:"SCO",label:"Scots"},{value:"SPA",label:"Spanish"},{value:"SWA",label:"Swahili"},{value:"SWE",label:"Swedish"},{value:"WEL",label:"Welsh"}];t.NONFICTION_SUBJECT_TYPE="NF";t.NUM_CATEGORIES=5;t.NUM_CATEGORIES_WRITTEN="five";t.PRINT_CATEGORY_CRUMB_SUBJECTS={FICTION:"Fiction",JUVENILE_FICTION:"Juvenile Fiction",JUVENILE_NONFICTION:"Juvenile Nonfiction",NONFICTION:"Nonfiction"};t.EBOOK_RETAIL_AND_DISTRIBUTION_PERCENTAGES=[{floorPrice:0,ceilingPrice:0,percentage:0},{floorPrice:.99,ceilingPrice:2.98,percentage:.6},{floorPrice:2.99,ceilingPrice:9.99,percentage:.35},{floorPrice:10,ceilingPrice:199.99,percentage:.6}];t.SPB_RETAIL_AND_DISTRIBUTION_PERCENTAGE=.45;t.COVER_FORMAT={HARDCOVER_JACKET:"HARDCOVER_DUST_JACKET",HARDCOVER_PRINTED:"HARDCOVER",PAPERBACK:"SOFTCOVER"};t.COVER_TYPES={FULL:"full",SEPARATE:"separate"};t.INTERIOR_PRINT_COLORS={BLACK_WHITE:"BLACK_WHITE",PREMIUM:"FULL_COLOR",STANDARD:"STANDARD_COLOR"};t.CORRECTION_TYPES={FREE:"FREE",NONE:"NONE",PAID:"PAID"};t.ERRORS={0:"An unknown error occurred. Please try again later.",4:"An unknown error occurred. Please try again later.",1003:"Your vendor account is not active.",1009:"Your vendor business account is not active.",20015:"Sorry, your ISBN can't be updated for on-sale or processing projects.",21006:"Please enter a valid ISBN.",21013:"PREORDER_SALE_ERROR",21025:"Sorry, this ISBN is already registered with NOOK/Barnes & Noble.",21035:"COST_CHANGE_SALE_ERROR",21040:"Please enter a valid ISBN/EAN.",21046:"Sorry, this ISBN is unavailable or already in use.",21047:"Sorry, this ISBN is already in use.",21049:"Sorry, this ISBN is already in use.",21053:"Please enter a non-B&N Press ISBN.",21054:"Sorry, this ISBN is not available.",21055:"An unknown error occurred. Please try again later.",21063:"We can't find the ISBN you have provided. Please check your number and try again."};t.ISBN_ERRORS=["21025","21047","21049"];t.NODELETEREASON={PENDING_ORDER:"PENDING_ORDER",PENDING_ORDER_STATUS_BLOCK:"PENDING_ORDER_STATUS_BLOCK",PROJECT_IN_CART:"PROJECT_IN_CART",STATUS_BLOCK:"STATUS_BLOCK"};t.PROJECT_STATUSES={DROPSHIP_READY:"DROPSHIP_READY",EDITING:"EDITING",ERROR:"ERROR",LSI_ONSALE:"LSI_ONSALE",NEW:"NEW",OFFSALE:"OFFSALE",ONSALE:"ONSALE",ORDERED:"ORDERED",PROCESSING_DROPSHIP:"PROCESSING_DROPSHIP",REQUESTED_DROPSHIP:"REQUESTED_DROPSHIP",PROCESSING_OFFSALE:"PROCESSING_OFFSALE",PROCESSING_ONSALE:"PROCESSING_ONSALE",CORRECTING:"CORRECTING",OnSale:"OnSale",OffSale:"OffSale"}},16:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(934);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=new(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.Dispatcher),n=t,(o=[{key:"dispatch",value:function(e){l(u(t.prototype),"dispatch",this).call(this,e)}}])&&i(n.prototype,o),a&&i(n,a),t}());t.default=a},167:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=u(a).call(this,e))||"object"!==s(o)&&"function"!=typeof o?d(n):o).state={menuClosed:!0},t.onToggleMenu=t.onToggleMenu.bind(d(d(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,r.default.Component),t=a,(n=[{key:"onToggleMenu",value:function(){this.setState({menuClosed:!this.state.menuClosed})}},{key:"render",value:function(){var t=this.props.items?this.props.items:[],e=this.props.className?this.props.className:"";return r.default.createElement("div",null,r.default.createElement("div",{className:(0,i.default)("glyphicon glyphicon-option-horizontal "+e),onClick:this.onToggleMenu},r.default.createElement("div",{className:(0,i.default)("common-dropdown-menu",{open:!this.state.menuClosed})},r.default.createElement("ul",null,t.map(function(e){return e?r.default.createElement("li",{key:t.length++},e):null})))),r.default.createElement("div",{className:(0,i.default)("dropdown-overlay",{active:!this.state.menuClosed}),onClick:this.onToggleMenu}))}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=a},17:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasFeatureFlag=t.invokeFeatureProtectedFunc=void 0;var o,a=(o=n(4))&&o.__esModule?o:{default:o};t.invokeFeatureProtectedFunc=function(e,t,n){a.default.getUser();r(e)?t():n()};var r=function(e){return a.default.hasPermissions(e)};t.hasFeatureFlag=r},18:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(205))&&o.__esModule?o:{default:o};var r=A({ADDRESS_VALIDATION:null},"AddressValidation"),i=A({LOAD_AUTHORS:null,UPLOAD_PHOTO:null,SAVE_AUTHOR:null,SUBMIT_AUTHOR:null,UPLOAD_PHOTO_ERRORS:null},"AuthorProfile"),s=A({USER_ACCOUNT_CREATE:null,ADD_ADDRESS_TO_ADDRESSBOOK:null,BEGIN_UPDATE_PROFILE:null,CHANGE_PAYMENT_METHODS:null,FORGOT_PASSWORD:null,FORGOT_PASSWORD_QUESTION:null,FORGOT_PASSWORD_ANSWER_CHECK:null,FORGOT_PASSWORD_TOKEN_CHECK:null,FORGOT_PASSWORD_UPDATE:null,LOAD_ADDRESSBOOK:null,LOAD_AUTHENTICATED_USER:null,LOAD_AUTHENTICATED_USER_FOR_ADMIN:null,LOAD_PAYMENT_METHODS:null,UPDATE_PAYMENT_2FA_ERRORS:null,LOAD_PROFILE:null,LOAD_SECURITY_QUESTIONS:null,LOAD_USER:null,LOAD_EMAIL:null,LOAD_EMAIL_UPDATE:null,LOAD_EMAIL_SEARCH:null,LOAD_USER_ERROR:null,LOAD_USER_UNAUTHORIZED:null,LOG_OUT_USER:null,SAVE_PREFERENCES:null,UPDATE_ADDRESS_ADDRESSBOOK:null,UPDATE_PROFILE:null,UPDATE_PROFILE_ERROR:null,UPDATE_VENDOR_STATUS:null,GET_AUTHOR_PROFILE:null,LOAD_VERIFY_OTP:null,LOAD_RESEND_CODE:null,OBJ_ENV:null,LOAD_GENERATE_CODE:null},"AuthenticatedUser"),l=A({CREATE_ACCOUNT:null,FORGOT_PASSWORD:null,SIGN_IN:null},"Authentication"),u=A({LOAD_CATEGORIES:null,LOAD_EBOOK_CATEGORIES:null},"Book"),c=A({SELECT_PAGE_SIZE:null,SELECT_PAGE_COVER_FORMAT:null,SELECT_PAGE_COUNT:null,SELECT_PAGE_PRINT_COLOR:null,SELECT_PAGE_PAPER_COLOR:null,CANCEL:null},"BookSizeType"),d=A({ENABLE_PROGRESS_BUTTONS:null,FADE_IN_COMPLETE:null,NAVIGATION_CONFIRMED:null,NAVIGATION_INITIATED:null,PROGRESS_BUTTON_ACTIVATED:null,REFRESH_SUB_NAVIGATION:null,SAVE_STATE_CHANGE:null},"BuildABookState"),f=A({CHANGE_CART:null,CHANGE_CART_ERROR:null,LOAD_SHIPPING_METHODS:null,START_CHANGE_CART:null,ADD_PROJECT:null,REMOVE_PROJECT:null,INIT_CHECKOUT:null,LOAD_TOKEN:null,LOAD_BILLING_ADDRESS_COUNTRIES:null,LOAD_BILLING_ADDRESS_STATES:null,BEGIN_EDITING_SHIPPING_ADDRESS_SECTION:null,CANCEL_EDITING_SHIPPING_ADDRESS_SECTION:null,BEGIN_EDITING_PAYMENT_SECTION:null,CANCEL_EDITING_PAYMENT_SECTION:null,UPDATE_SHIPPING_ADDRESS:null,UPDATE_SHIPPING_ADDRESS_ERROR:null,UPDATE_SHIPPING_METHOD:null,UPDATE_PAYMENT_METHOD:null,SUBMIT_ORDER:null,SUBMIT_ORDER_2FA_ERRORS:null,CVV_PROMPT_REQUIRED:null,CHECKOUT_ERROR:null,UPDATE_EPROTECT:null},"Cart"),p=A({DISMISS_BROADCAST_MESSAGE:null,LOAD_BROADCAST_MESSAGES:null,LOAD_FEATURE_MODEL:null,LOAD_BROADCAST_MESSAGES_ERROR:null,LOAD_PREVIEW_MESSAGE:null,LOAD_FOOTER_CONTENT_ERROR:null,LOAD_PROMOTION_MESSAGES:null,LOAD_PROMOTION:null,LOAD_MARKETING_MESSAGES:null,LOAD_STATIC_CONTENT:null,LOAD_STATIC_CONTENT_ERROR:null,LOAD_AD_CONTENT:null,LOAD_JWT_GENERATE:null},"Content"),m=A({GENERIC_SERVICE_ERROR:null},"Errors"),h=A({LOAD_FEATURE_FLAGS:null,LOAD_FEATURE_FLAGS_ERROR:null},"FeatureFlag"),y=A({LOCK_ISBN:null,UNLOCK_ISBN:null},"Isbn"),v=A({LOAD_STATES:null},"Location"),b=A({DELETE_MERCHANDISING_PROMO:null,LOAD_MERCHANDISING_PROMO_FILTERS:null,SUBMIT_MERCHANDISING_PROMO:null,LOAD_MERCHANDISING_PROMOS:null,LOAD_MERCHANDISING_PROMO_RULES:null,SUBMIT_MERCHANDISING_PROMO_ERRORS:null,UPDATE_MERCHANDISING_PROMO_STATUS:null},"Merchandising"),g=A({SHOW_MODAL:null,MODAL_CLOSED:null},"Modal"),E=A({SIGN_UP_COMPLETE:null,SIGN_UP_ERROR:null},"Newsletter"),P=A({LOCATION_CHANGED:null,OMNITURE_EVENT_FIRED:null,PAGE_NAME_CHANGED:null},"Omniture"),S=A({LOAD_ORDER_DETAILS:null,LOAD_ORDER_HISTORY:null,CANCEL_ORDER_HISTORY:null,ORDER_HISTORY_ERROR:null},"OrderHistory"),_=A({ACKNOWLEDGE_PAGECOUNT_CHANGED:null,BOOK_SIZE_TYPE_COMPLETE:null,ORDER_DELETE_REASON_COMPLETE:null,BOOK_SIZE_TYPE_METADATA:null,BOOK_SIZE_TYPE_RESET:null,CHANGE_PROJECT:null,CHANGE_PROJECT_ERROR:null,CHANGE_PROJECT_NOT_SAVED:null,COMPLETE_PRICE_ESTIMATE:null,COVER_GENERATED_DOWNLOAD:null,COMPLETE_CALCULATE_BOOK_PRICE:null,COUPON_SPECS_LOADED:null,COVER_FORMATTING_SPECS:null,DELETE_PROJECT:null,DELETE_SEARCH_PROJECT:null,ERROR_PRICE_ESTIMATE:null,ERROR_CALCULATE_BOOK_PRICE:null,ERROR_SET_BOOKSIZE_TYPE:null,GET_PREFLIGHT_STATUS_ERROR:null,GET_PREFLIGHT_STATUS_SUCCESS:null,LANGUAGES_LOADED:null,LOAD_CATEGORIES:null,LOAD_BAR_GRAPH:null,LOAD_EBOOK_COUPONS:null,DELETE_EBOOK_COUPONS:null,LOAD_EBOOK_PREVIEW:null,LOAD_EBOOK_PREVIEW_FAILED:null,LOAD_EBOOK_PREVIEW_TIMEDOUT:null,LOAD_EXISTING_PROJECTS:null,LOAD_NEW_PROJECT:null,LOAD_PRICE_UPDATE_WINDOW:null,ORDER_STATUS_SET:null,ORDER_STATUS_ERROR:null,PDF_COVERSION_COMPLETE:null,PROJECT_CONSTANTS_LOADED:null,PUBLISH_ALERT_REMOVE:null,REMOVE_UPLOAD_ERRORS:null,REFRESH_PROJECT:null,RESET_PRICE_ESTIMATE:null,RESET_CALCULATE_BOOK_PRICE:null,SCHEDULED_PRICES:null,ROYALTY_PRICES:null,PAGE_BANNERS:null,START_DELETE_PROJECT:null,TRANFER_ISBN_PROJECT:null,START_PRICE_ESTIMATE:null,START_CALCULATE_BOOK_PRICE:null,SEARCH_CATEGORIES:null,SET_BOOKSIZE_TYPE:null,SET_SALE_STATUS:null,SET_SALE_STATUS_ERROR:null,START_PROJECT_BOOKSIZE_EXIST:null,COMPLETE_PROJECT_BOOKSIZE_EXIST:null,ERROR_PROJECT_BOOKSIZE_EXIST:null,SET_PROJECT_ID:null,TAKE_OFFSALE_ERROR:null,UPLOAD_ATTACHMENT:null,UPLOAD_SAMPLE_ATTACHMENT:null,UPLOAD_ATTACHMENT_ERROR:null,USER_COUPON_SAVED:null,USER_COUPON_SAVED_ERROR:null,LOAD_EAA_SEARCH_RESULT:null,LOAD_EAA_RESULT:null,LOAD_EAA_LINE_RESULT:null,LOAD_EAA_DOUGHNUT_RESULT:null,LOAD_EAA_MAP_RESULT:null,LOAD_SITEDATA_PURCHASEPREVIEW:null,LOAD_EAA_CONSUMPTION_RESULT:null,AVERAGE_TIME_TO_OPEN:null,BOOK_PAGE_VISITOR_BY_DOMAIN:null,LOAD_EAA_CONSUMPTION_BAR_RESULT:null,CUSTOMER_DATA_OTHER_AUTHORS:null,BEST_BOOK:null,ADD_CONTRIBUTOR:null,GET_CONTRIBUTOR:null,CONTRIBUTOR_ACCESS_LIST:null,DELETE_CONTRIBUTOR:null,UPDATE_CONTRIBUTOR:null,SELECT_SAMPLE_PREVIEW:null,EAA_SUBSCRIPTION_PLAN:null,EAA_SUBSCRIPTION:null},"Project"),O=A({BOOK_COMPLETION_RATE_AVERAGE:null},"Analytics"),C=A({CHANGE_PROJECT_GROUPS:null,RESET_PROJECT_GROUPS:null,LOAD_EXISTING_TITLES:null,CLONE_PROJECT_IN_GROUP:null,TOGGLE_PROJECTS:null},"ProjectGroups"),k=A({HOVERING_COUPON_SALE:null,LOAD_CHART:null,LOAD_EAA_SEARCHES:null,LOAD_REPORT_METADATA:null,LOAD_REPORT_DATA:null,CLEAR_REPORT_METADATA:null},"SalesReporting"),T={AddressValidation:r,Analytics:O,AuthorProfile:i,Authentication:l,AuthenticatedUser:s,Book:u,BookSizeType:c,BuildABookState:d,Cart:f,Content:p,Errors:m,FeatureFlag:h,Isbn:y,Location:v,Merchandising:b,Modal:g,Newsletter:E,Omniture:P,OrderHistory:S,Project:_,ProjectGroups:C,ProjectsSearch:A({LOAD_ALL_CONTRIBUTORS:null,LOAD_PROJECT_SEARCHES:null,LOAD_PROJECT_COVER_SEARCHES:null,LOAD_PROJECT_COVER_COUPONS:null,LOAD_PROJECT_SEARCHES_SINGLE_USER:null,LOAD_EAA_SEARCHES:null,LOAD_PROJECT_SEARCH_RESULTS:null,LOAD_SERIES_NAMES:null,LOOKUP_ISBN:null},"ProjectsSearch"),SalesReporting:k,VendorAccount:A({LOAD_PRINTBOOK_SIZE:null,LOAD_EBOOK_SIZE:null,LOAD_MAIL_TO_ALERT:null,LOAD_1099_SETTINGS:null,LOAD_VENDOR_INFO:null,RESET_VENDOR_INFO:null,UPDATE_PUBLISHER_INFO:null,VALIDATE_TIN:null,UPDATE_PAYMENT_INFO:null,UPDATE_PAYMENT_ERRORS:null,UPDATE_DIGITAL_1099_ENROLLMENT:null,LOAD_STATES:null,SET_PUBLISHER_NAME:null,SET_PUBLISHER_WEBSITE:null,SET_CITIZEN:null,SET_TAXPAYER_TYPE:null,SET_WITHHOLDING:null,SET_FATCA:null,SET_INDIVIDUAL_OR_COMPANY:null,SET_TAXPAYER_ENTITY:null,SET_TAXPAYER_ID_TYPE:null,SET_SSN:null,SET_TAX_FIRST_NAME:null,SET_TAX_LAST_NAME:null,SET_EIN:null,SET_TAX_COMPANY_NAME:null,SET_TIN:null,SET_VAT:null,SET_ADDRESS_LINE_1:null,SET_ADDRESS_LINE_2:null,SET_CITY:null,SET_STATE:null,SET_ZIP:null,SET_TAX_COUNTRY:null,SET_PHONE:null,SET_ACCOUNT_TYPE:null,SET_BANK_COUNTRY:null,SET_BANK_NAME:null,SET_ROUTING_NUMBER:null,SET_ACCOUNT_NUMBER:null,SET_IBAN:null,SET_SWIFT:null,SET_ACCOUNT_OWNER_TYPE:null,SET_ACCOUNT_OWNER_FIRST_NAME:null,SET_ACCOUNT_OWNER_LAST_NAME:null,SET_ACCOUNT_OWNER_COMPANY_NAME:null,LOAD_ISBN_OPTIONS:null,CREATE_PUBLISHER_INFO:null},"VendorAccount"),WindowEvents:A({LAYOUT_CONTENT_CHANGED:null,MENU_LINK_CLICKED:null,MOBILE_MENU_CLOSED:null,MOBILE_MENU_LINK_CLICKED:null,MOBILE_MENU_OPENED:null,TOGGLE_TOAST:null},"WindowEvents")};function A(e,t){var n=(0,a.default)(e);for(var o in n)n[o]=t+"."+n[o];return n}t.default=T},187:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,((o=n(205))&&o.__esModule?o:{default:o}).default)({LOAD_BROADCAST_MESSAGES:null,LOAD_PROMOTION_MESSAGES:null,SCHEDULE_BROADCAST_MESSAGE:null,PREVIEW_BROADCAST_MESSAGE:null,LOAD_BROADCAST_RECIPIENTS:null,LOAD_SITEMODULE_OPTIONS:null,LOAD_SITEMODULE_IMAGE:null,UPLOAD_SITEMODULE_IMAGE:null,SCHEDULE_SITE_MODULES:null,LOAD_SITE_MODULES:null,LOAD_SITEMODULE_DISPLAY:null,LOAD_SITEMODULE_IMAGE_NEW:null,LOAD_BANNER_LOGO_LOADED:null,LOAD_BANNER_SIZE_LOADED:null,LOAD_TURN_AROUND_LOADED:null,UPLOAD_ADBANNER_IMAGE:null,UPLOAD_FORM_FILE:null,UPLOAD_FORM_ENABLE:null,RESET_ACCOUNT_LOCKOUT:null,OVERRIDE_ACCOUNT_LOCKOUT:null,LOAD_AD_BANNERS:null,LOAD_SAVE_BANNER_DATA_LOADED:null,LOAD_PROMOTIONS:null,LOAD_PUBLISHERS:null,DELETE_PUBLISHERS:null,DELETE_PROMOTION:null,EXPORT_REPORT_PUBLISHERS:null});for(var r in a)a[r]="Message."+a[r];var i=a;t.default=i},206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var v=o(n(0)),b=o(n(1)),r=o(n(246)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(10)),g=o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=l(a).call(this,e))||"object"!==i(o)&&"function"!=typeof o?d(n):o).state={isDragActive:!1,maxFilesExceeded:!1,visible:!1},t.onDragEnter=t.onDragEnter.bind(d(d(t))),t.onDragLeave=t.onDragLeave.bind(d(d(t))),t.onDrop=t.onDrop.bind(d(d(t))),t.onClick=t.onClick.bind(d(d(t))),t.makeClick=t.makeClick.bind(d(d(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,v.default.Component),t=a,(n=[{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"allFilesAccepted",value:function(e){var t=this;return e.every(function(e){return(0,r.default)(e,t.props.accept)})}},{key:"onDragEnter",value:function(e){e.preventDefault();var t=Array.prototype.slice.call(e.dataTransfer&&e.dataTransfer.items?e.dataTransfer.items:[]),n=this.allFilesAccepted(t),o=!1;!this.props.multiple&&1<t.length&&(o=!0),this.setState({isDragActive:n,isDragReject:!n,maxFilesExceeded:o}),this.props.onDragEnter&&this.props.onDragEnter(e)}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDragLeave",value:function(e){e.preventDefault(),this.setState({isDragActive:!1,isDragReject:!1,maxFilesExceeded:!1}),this.props.onDragLeave&&this.props.onDragLeave(e)}},{key:"onDrop",value:function(i){var s=this;if(i.preventDefault(),!this.props.disableClick)if("OFFSALE"!==this.props.status&&this.props.orderallowed&&!this.state.fileUploadEnable){var l=i.dataTransfer.files;document.querySelector(".centered input").setAttribute("type","button"),u.showConfirmationModal("Uploading a New File",'<div class=""><p>Upon uploading a new file, you will be able to order a copy only if the below criteria are met.</p><ul><li>The new file does not encounter an error.</li><li>You click on "Publish Changes" located in the banner at the top of the page.</li><li>The new file is approved by our review process which can take up to 5 business days.</li></ul> </div>',"Continue","Cancel",function(e){if(e){s.setState({isDragActive:!1,isDragReject:!1,maxFilesExceeded:!1,fileUploadEnable:!1});for(var t=l,n=s.props.multiple?t.length:1,o=[],a=0;a<n;a++){var r=t[a];o.push(r)}s.props.onDrop&&(s.props.onDrop(o,l),s.setState({visible:s.props.visible})),!s.props.multiple&&1<t.length?s.props.onMaxFilesExceeded&&s.props.onMaxFilesExceeded(o,l):s.allFilesAccepted(o)?s.props.onDropAccepted&&s.props.onDropAccepted(o,i):s.props.onDropRejected&&s.props.onDropRejected(o,i)}})}else{this.setState({isDragActive:!1,isDragReject:!1,maxFilesExceeded:!1});for(var e=i.dataTransfer?i.dataTransfer.files:i.target.files,t=this.props.multiple?e.length:1,n=[],o=0;o<t;o++){var a=e[o];n.push(a)}this.props.onDrop&&(this.props.onDrop(n,i),this.setState({visible:this.props.visible})),"OFFSALE"!==this.props.status&&this.props.orderallowed&&(this.setState({fileUploadEnable:!1}),document.querySelector(".centered input").setAttribute("type","button")),!this.props.multiple&&1<e.length?this.props.onMaxFilesExceeded&&this.props.onMaxFilesExceeded(n,i):this.allFilesAccepted(n)?this.props.onDropAccepted&&this.props.onDropAccepted(n,i):this.props.onDropRejected&&this.props.onDropRejected(n,i)}}},{key:"onClick",value:function(e){var t=this;this.props.disableClick?e.preventDefault():"OFFSALE"!==this.props.status&&this.props.orderallowed&&"button"==e.target.type?u.showConfirmationModal("Uploading a New File",'<div class=""><p>Upon uploading a new file, you will be able to order a copy only if the below criteria are met.</p><ul><li>The new file does not encounter an error.</li><li>You click on "Publish Changes" located in the banner at the top of the page.</li><li>The new file is approved by our review process which can take up to 5 business days.</li></ul> </div>',"Continue","Cancel",function(e){e&&(document.querySelector(".centered input").setAttribute("type","file"),document.querySelector(".centered input").click(),t.setState({fileUploadEnable:!0}),t.open())}):this.open()}},{key:"open",value:function(){this.refs.fileInput.value=null}},{key:"render",value:function(){var e,t=this.props,n=t.accept,o=t.complete,a=t.error,r=t.errorText,i=t.fileName,s=t.icon,l=t.iconActive,u=t.multiple,c=t.spinner,d=t.text,f=t.textDifferent,p=t.typeText,m=t.completeImage,h=(t.visible,(0,b.default)({sprite:!0,"upload-error":a&&!this.props.disableClick,"upload-success":o&&!a&&!this.props.disableClick,"upload-error-disabled":a&&this.props.disableClick,"upload-success-disabled":o&&!a&&this.props.disableClick}));if(null!==i)if(40<(p?p+i:i).length){var y=p?24:40;e=i.substr(0,y)+"..."}else e=i;return v.default.createElement("div",{className:(0,b.default)("drag-drop-upload",{active:this.state.isDragActive},{reject:this.state.isDragReject},{disabled:this.props.disableClick},{"max-files":this.state.maxFilesExceeded},{additional:this.state.visible}),onClick:"OFFSALE"!==this.props.status&&this.props.orderallowed?"":this.onClick,onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},c&&v.default.createElement(g.default,{top:"40%"}),m&&v.default.createElement("a",{href:m,target:"_blank"},v.default.createElement("img",{className:"preview-thumbnail img-responsive",src:m})),!m&&v.default.createElement("div",{className:(0,b.default)("upload-status",{complete:null!==i&&!a},{error:a})},null!==i&&!a&&o&&v.default.createElement("p",null,v.default.createElement("span",{title:i},v.default.createElement("span",null,v.default.createElement("strong",null,p)),e,v.default.createElement("br",null),v.default.createElement("span",{className:"uploaded-file-name"},"was uploaded successfully"))),a&&v.default.createElement("p",null,r)),!m&&v.default.createElement("div",{className:"upload-icon-container"},s&&v.default.createElement("i",{className:this.state.isDragActive&&!this.props.disableClick?l:s}),v.default.createElement("span",{className:h})),!o&&v.default.createElement("h3",null,d),o&&v.default.createElement("h3",null,f),v.default.createElement("p",null,"or"),v.default.createElement("div",{className:"centered"},v.default.createElement("label",{className:this.props.disableClick?"disabled":"",tabIndex:"0",onKeyDown:this.makeClick},v.default.createElement("input",{type:"OFFSALE"!==this.props.status&&this.props.orderallowed?"button":"file",ref:"fileInput",multiple:u,accept:n,onChange:this.onDrop,onClick:this.onClick}),"Select From My Computer")),this.props.children)}}])&&s(t.prototype,n),o&&s(t,o),a}();(t.default=a).defaultProps={disableClick:!1,multiple:!0},a.propTypes={onDrop:v.default.PropTypes.func.isRequired,onDropAccepted:v.default.PropTypes.func,onDropRejected:v.default.PropTypes.func,onDragEnter:v.default.PropTypes.func,onDragLeave:v.default.PropTypes.func,style:v.default.PropTypes.object,activeStyle:v.default.PropTypes.object,className:v.default.PropTypes.string,activeClassName:v.default.PropTypes.string,disableClick:v.default.PropTypes.bool,multiple:v.default.PropTypes.bool,accept:v.default.PropTypes.string}},21:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(43)),s=o(n(13)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(10));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=d(a).call(this,e))||"object"!==u(o)&&"function"!=typeof o?p(n):o).onHide=t.onHide.bind(p(p(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,r.default.Component),t=a,(n=[{key:"componentDidMount",value:function(){this.$root().on("hidden.bs.modal",this.onHide);var e={};this.forbidCloseByUser&&(e.backdrop="static",e.keyboard=!1),this.$root().modal(e)}},{key:"complete",value:function(e){this.finish(!0,e)}},{key:"cancel",value:function(e){this.finish(!1,e)}},{key:"finish",value:function(e,t){this.$root().off("hidden.bs.modal",this.onHide),this.$root().modal("hide"),"searchExhaustModal"==this.refs.modal.id&&window.location.reload(),l.modalClosed(this.props.handle,t),this.props.callback&&this.props.callback(e,t)}},{key:"onHide",value:function(){this.finish(!1,null)}},{key:"$root",value:function(){return(0,s.default)(i.default.findDOMNode(this.refs.modal))}}])&&c(t.prototype,n),o&&c(t,o),a}();t.default=a},22:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(o,a,r){var i,s=this,l=arguments;return function(){var e=s,t=l,n=r&&!i;clearTimeout(i),i=setTimeout(function(){i=null,r||o.apply(e,t)},a),n&&o.apply(e,t)}},t.smoothScrollToWindowTop=function(){(0,a.default)("html, body").animate({scrollTop:"0"},250,"linear")},t.smoothScrollToDateSection=function(e){"User"==e?(0,a.default)("html, body").animate({scrollTop:2e3},250,"linear"):"Admin"==e&&(0,a.default)(".modal-body").animate({scrollTop:1500},250,"linear")},t.isNullOrUndefined=i,t.formatWithCommas=s,t.formatPrice=function(e){if(i(e))return"--";if(isNaN(e))return"NaN";var t=e<0,n="$"+s((e=t?Math.abs(e):e).toFixed(2));return t?"(-"+n+")":n},t.formatCurrency=function(e,t,n){0<e&&e<1&&(n=2);var o=s(e.toFixed(void 0!==n?n:2)),a=r.FINANCIAL_SYMBOLS[t];return a?a+o:o};var o,a=(o=n(13))&&o.__esModule?o:{default:o},r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(99));function i(e){return null==e}function s(e){if(null==e||!e.toString().trim().length)return"";for(var t=e.toString().split("."),n=t[0],o=1<t.length?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(n);)n=n.replace(a,"$1,$2");return n+o}},23:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(0)),r=o(n(1)),i=o(n(118)),l=o(n(329));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var s=function(e){function s(e,t){var n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o=this;var r=(n=!(a=f(s).call(this,e,t))||"object"!==u(a)&&"function"!=typeof a?m(o):a).state=n.state||{};r.dropdownOpen=!1;var i=n.findOption(n.value());return r.displayValue=i?i.label:"",r.focusedOptionIndex=null,r.objectPosition=null,n.typeAheadChars="",n.typeAheadTimeout=null,n.onClick=n.onClick.bind(m(m(n))),n.onBlur=n.onBlur.bind(m(m(n))),n.onKeyDown=n.onKeyDown.bind(m(m(n))),n.onDropdownSelection=n.onDropdownSelection.bind(m(m(n))),n.onDocumentClick=n.onDocumentClick.bind(m(m(n))),n.objectPosition=n.objectPosition.bind(m(m(n))),n}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(s,i.default),t=s,(n=[{key:"dropdownOpen",value:function(){return this.state.dropdownOpen}},{key:"objectPosition",value:function(){return this.state.objectPosition}},{key:"displayValue",value:function(){return this.state.displayValue}},{key:"options",value:function(){return this.props.options}},{key:"setValue",value:function(e){e=e||"";var t=this.findOption(e);this.setState({displayValue:t?t.label:""}),this._changeValue(e)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.options===e.options||e.keepValue&&e.options.find(function(e){return e.value===t._value})||(this._changeValue(""),this.setState({displayValue:""}))}},{key:"onClick",value:function(){this.disabled()||this.readOnly()||(this.dropdownOpen()?this.closeDropdown():this.openDropdown())}},{key:"onKeyDown",value:function(e){if(!this.disabled()&&!this.readOnly()){var t=e.keyCode;if(9!==t){if(this.dropdownOpen()){if(38===t){e.preventDefault();var n=null===this.state.focusedOptionIndex?0:this.state.focusedOptionIndex-1;return n<0&&(n=this.options().length-1),void this.setState({focusedOptionIndex:n})}if(40===t){e.preventDefault();var o=(this.state.focusedOptionIndex||0)+1;return o>this.options().length-1&&(o=0),void this.setState({focusedOptionIndex:o})}if(27===t)return e.preventDefault(),void this.closeDropdown();if(13===t){if(e.preventDefault(),null!==this.state.focusedOptionIndex){var a=this.options()[this.state.focusedOptionIndex];a.value.key&&"addNewRow"===a.value.key?(a.value.props.onClick(),this._commitValue("addNewRow"),this.setState({displayValue:""})):(this._commitValue(a.value),this.setState({displayValue:a.label})),this.closeDropdown()}return}}else if(13===t||40===t)return e.preventDefault(),void this.openDropdown();this.isTypeAheadCharacter(t)?(e.preventDefault(),this.progressTypeAhead(t)):16!==t&&this.stopTrackingTypeAhead()}else this.closeDropdown()}}},{key:"onBlur",value:function(e){this._commitValue(this.value()),d(f(s.prototype),"onBlur",this).call(this,e)}},{key:"onDropdownSelection",value:function(e){e.value.key&&"addNewRow"===e.value.key?(this._commitValue("addNewRow"),this.setState({displayValue:""})):(this.props.forceGetValue&&"TEMPLATE"==e.value?this._commitValue(e.position):this._commitValue(e.value),this.setState({displayValue:e.label})),this.closeDropdown()}},{key:"onDocumentClick",value:function(){this.closeDropdown()}},{key:"isTypeAheadCharacter",value:function(e){return 65<=e&&e<=90||48<=e&&e<=57||32===e||188<=e&&e<=190}},{key:"progressTypeAhead",value:function(e){var t=this;this.typeAheadTimeout&&(clearTimeout(this.typeAheadTimeout),this.typeAheadTimeout=null),this.typeAheadChars+=String.fromCharCode(e).toLowerCase(),this.typeAheadTimeout=setTimeout(function(){t.stopTrackingTypeAhead()},1e3);var n=null,o=!0,a=!1,r=void 0;try{for(var i,s=this.options()[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var l=i.value;if((!l.value.key||"addNewRow"!==l.value.key)&&l.label.toLowerCase().startsWith(this.typeAheadChars)){n=l;break}}}catch(e){a=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw r}}n&&this.onDropdownSelection(n)}},{key:"stopTrackingTypeAhead",value:function(){this.typeAheadTimeout&&(clearTimeout(this.typeAheadTimeout),this.typeAheadTimeout=null),this.typeAheadChars=""}},{key:"findOption",value:function(t){var e=this.options().filter(function(e){return e.value===t});return 0<e.length?e[0]:null}},{key:"findOptionIndex",value:function(e){if(!e&&!1===this.props.autofocusDefault)return null;for(var t=0;t<this.options().length;t++)if(this.options()[t].value===e)return t;return 0}},{key:"openDropdown",value:function(){this.dropdownOpen()||(this.setState({dropdownOpen:!0,focusedOptionIndex:this.findOptionIndex(this.value())}),document.addEventListener("click",this.onDocumentClick))}},{key:"closeDropdown",value:function(){var e=this;this.dropdownOpen()&&(setTimeout(function(){e._mounted&&e.setState({dropdownOpen:!1,focusedOptionIndex:null})},250),document.removeEventListener("click",this.onDocumentClick))}},{key:"render",value:function(){this.message();return a.default.createElement("div",{className:(0,r.default)("base-control","select-control",{"has-value":this.hasValue()},{open:this.dropdownOpen()},{error:!!this.message()&&!this.disableValidationMessages()},{disabled:this.disabled()},{"read-only":this.readOnly()})},!this.disableValidationMessages()&&a.default.createElement("div",{className:"message"},this.message()),a.default.createElement("div",{className:"input-area",tabIndex:this.props.disableTabIndex||this.disabled()||this.readOnly()?"-1":"0",onBlur:this.onBlur,onKeyDown:this.onKeyDown},a.default.createElement("input",{id:this.id()+"-hidden",name:this.name()+"-hidden",type:"hidden",value:this.value()}),a.default.createElement("input",{id:this.id(),name:this.name(),className:"primary",type:"text",value:this.displayValue(),tabIndex:"-1",disabled:this.disabled(),readOnly:!0,autoComplete:"off","aria-label":this.name()}),a.default.createElement("label",{className:"primary",htmlFor:this.id()},this.label(),this.required()&&!this.disableValidationMessages()&&a.default.createElement("span",null,"*")),a.default.createElement("div",{className:"clickPane",onClick:this.onClick}),a.default.createElement(l.default,{open:this.dropdownOpen(),options:this.options(),focusedOptionIndex:this.state.focusedOptionIndex,onSelection:this.onDropdownSelection})))}}])&&c(t.prototype,n),o&&c(t,o),s}();s.propTypes=function(a){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(e){var t,n,o;t=a,o=r[n=e],n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o})}return a}({},i.default.propTypes,{options:a.default.PropTypes.arrayOf(a.default.PropTypes.object).isRequired});var h=s;t.default=h},244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(132))&&o.__esModule?o:{default:o};t.default=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,(0,a.default)(t||r))};var r={firstName:null,lastName:null,address1:null,address2:null,city:null,state:null,postalCode:null,country:null,phoneNumber:null,company:null}},247:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterTitle=function(e,t){var n=t.title;null==n&&(n="");var o=n.toLowerCase().replace(/[\W_]+/g,""),a=e.toLowerCase().replace(/[\W_]+/g,"");return o.startsWith(a)},t.filterImage=function(e,t){return t.imageFileName.toLowerCase().includes(e.toLowerCase().trim())},t.isTitleEqual=function(e,t){return e.toLowerCase().replace(/[\W_]+/g,"")==t.toLowerCase().replace(/[\W_]+/g,"")}},248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(2);function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.sortOptionDefault=e,this.url=t}var e,t,o;return e=n,(t=[{key:"onPageChange",value:function(e,t,n,o,a,r){e!==t&&this.navigate(e,n,!1,o,a,r)}},{key:"onSortChange",value:function(e,t,n,o,a){var r=e.newValue;r!==t&&this.navigate(1,r,!1,n,o,a)}},{key:"navigate",value:function(e,t,n,o,a,r){var i=[];1!==e&&i.push("page="+e),t&&t!==this.sortOptionDefault&&i.push("sort="+t),o&&i.push("type="+o),a&&i.push("status="+a),r&&i.push("q="+r);var s=this.url;i.length&&(s+="?"+i.join("&")),n?l.browserHistory.replace(s):l.browserHistory.push(s)}},{key:"setPaginationOptions",value:function(e,t,n,o,a,r){var i=this,s={page:this.validPage(e)?parseInt(e,10):1,sortOption:this.validSortOption(t,n)?t:this.sortOptionDefault};r&&(s.query=r);var l=s.page===parseInt(e,10)||1===s.page&&!e,u=s.sortOption===t||s.sortOption===this.sortOptionDefault&&!t;return l&&u||setTimeout(function(){i.navigate(s.page,s.sortOption,!0,o,a,r)},0),s}},{key:"updateLocation",value:function(e,t,n,o,a,r){var i=this;0!==e||1===t?0<e&&e<t&&setTimeout(function(){i.navigate(e,n,!0,o,a,r)},0):setTimeout(function(){i.navigate(1,n,!0,o,a,r)},0)}},{key:"updateUrl",value:function(e){this.url=e}},{key:"validPage",value:function(e){return e=parseInt(e,10),!isNaN(e)&&0<e}},{key:"validSortOption",value:function(t,n){return!!t&&(!t||!n||!!Object.keys(n).filter(function(e){return n[e]===t}).length)}}])&&a(e.prototype,t),o&&a(e,o),n}();t.default=o},249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0;t.Base="order-history"},25:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.locationChanged=function(e){setTimeout(function(){o.default.dispatch({type:a.default.Omniture.LOCATION_CHANGED,args:{data:e}})},0)},t.omnitureActionInvoked=function(e,t){setTimeout(function(){o.default.dispatch({type:a.default.Omniture.OMNITURE_EVENT_FIRED,args:{data:e,event:t}})},0)},t.pageNameChanged=function(e){setTimeout(function(){o.default.dispatch({type:a.default.Omniture.PAGE_NAME_CHANGED,args:{data:e}})},0)};var o=r(n(16)),a=r(n(18));function r(e){return e&&e.__esModule?e:{default:e}}},250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(100)).COUPON_VIEWS,a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=u(a).call(this,e))||"object"!==s(o)&&"function"!=typeof o?d(n):o).onButtonClick=t.onButtonClick.bind(d(d(t))),t.makeClick=t.makeClick.bind(d(d(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,r.default.Component),t=a,(n=[{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onButtonClick",value:function(){var e="";this.props.toSummary&&(e=this.props.currentView===f.COUPON_SUMMARY?f.COUPON_SUMMARY:f.BN_PROMO_SUMMARY),this.props.onButtonClick(e)}},{key:"render",value:function(){var e=null,t=this.props.currentView===f.BN_PROMO_SUMMARY,n=this.props.currentView===f.COUPON_SUMMARY,o=this.props.toSummary;return this.props.toSummary&&(e=this.props.currentView===f.COUPON_SUMMARY?"Coupons":"Promotions"),r.default.createElement("div",{className:this.props.couponSelected?"couponSelected":"promotionSelected"},e&&r.default.createElement("div",{className:(0,i.default)("btn","btn-s","btn-secondary-summary",{"button-in-text":o},{"bn-promo-summary":t},{"coupon-summary":n}),tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onButtonClick},r.default.createElement("span",null,e)))}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=a},26:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load=function(e){o.load(e,function(e){s.default.dispatch({type:l.default.AuthenticatedUser.LOAD_USER,args:{data:e}})})},t.emailPreferences=function(e){o.emailPreferences(e,function(e){s.default.dispatch({type:l.default.AuthenticatedUser.LOAD_EMAIL,args:{data:e}})},function(e){return u(e)})},t.getEnvPath=function(){o.getEnvPath(function(e){s.default.dispatch({type:l.default.AuthenticatedUser.OBJ_ENV,args:{data:e}})})},t.emailSearchAdmin=function(e){o.emailSearchAdmin(e,function(e){s.default.dispatch({type:l.default.AuthenticatedUser.LOAD_EMAIL_SEARCH,args:{data:e}})})},t.pubSearchAdmin=function(e){o.pubSearchAdmin(e,function(e){s.default.dispatch({type:l.default.AuthenticatedUser.LOAD_EMAIL_SEARCH,args:{data:e}})})},t.emailPreferencesChange=function(e,t){o.emailPreferencesChange(e,t,function(e){s.default.dispatch({type:l.default.AuthenticatedUser.LOAD_EMAIL_UPDATE,args:{data:e}})})},t.loadAddressBook=function(){o.loadAddressBook(function(e){s.default.dispatch({type:l.default.AuthenticatedUser.LOAD_ADDRESSBOOK,args:{addressBook:e}})})},t.addAddress=function(t){o.addAddress(t,function(e){s.default.dispatch({type:l.default.AuthenticatedUser.ADD_ADDRESS_TO_ADDRESSBOOK,args:{address:t,addressBook:e.addressList}})},function(e){return a.handleCheckoutErrors("shippingAddress",e)})},t.updateAddress=function(t){o.updateAddress(t,function(e){s.default.dispatch({type:l.default.AuthenticatedUser.UPDATE_ADDRESS_ADDRESSBOOK,args:{address:t,addressBook:e.addressList}})},function(e){return a.handleCheckoutErrors("shippingAddress",e)})},t.loadPaymentMethods=function(){o.loadPaymentMethods(function(e){if(e){var t=!0,n=!1,o=void 0;try{for(var a,r=e[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var i=a.value;i.expirationMonth&&1===i.expirationMonth.length&&(i.expirationMonth="0"+i.expirationMonth)}}catch(e){n=!0,o=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw o}}}s.default.dispatch({type:l.default.AuthenticatedUser.LOAD_PAYMENT_METHODS,args:{paymentMethods:e}})})},t.loadProfile=function(){o.loadProfile(function(e){s.default.dispatch({type:l.default.AuthenticatedUser.LOAD_PROFILE,args:{profile:e}})})},t.updateProfile=function(t,n){s.default.dispatch({type:l.default.AuthenticatedUser.BEGIN_UPDATE_PROFILE}),o.updateProfile(t,function(e){s.default.dispatch({type:l.default.AuthenticatedUser.UPDATE_PROFILE,args:{profile:e,twoRequest:n}})},function(e){return u(e,t)})},t.loadSecurityQuestions=function(){o.loadSecurityQuestions(function(e){s.default.dispatch({type:l.default.AuthenticatedUser.LOAD_SECURITY_QUESTIONS,args:{questions:e.setting}})})},t.logoutUser=function(e){e||localStorage.removeItem("authorShareKey");o.logout(function(){s.default.dispatch({type:l.default.AuthenticatedUser.LOG_OUT_USER})})},t.verifyOtp=function(e,t){o.verifyOtp(e,t,function(e){s.default.dispatch({type:l.default.AuthenticatedUser.LOAD_VERIFY_OTP,args:{data:e}})})},t.resendCode=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;o.resendCode(e,t,function(e){s.default.dispatch({type:l.default.AuthenticatedUser.LOAD_RESEND_CODE,args:{data:e}})})},t.generateCode=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;o.resendCode(e,t,function(e){s.default.dispatch({type:l.default.AuthenticatedUser.LOAD_GENERATE_CODE,args:{data:e}})})},t.savePreferences=void 0;var s=i(n(16)),o=r(n(331)),l=i(n(18)),a=(r(n(976)),r(n(55)));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=[e];return s.default.dispatch({type:l.default.AuthenticatedUser.UPDATE_PROFILE_ERROR,args:{errorMessages:n,profile:t}}),!0}t.savePreferences=function(e){o.savePreferences(e,function(e){s.default.dispatch({type:l.default.AuthenticatedUser.SAVE_PREFERENCES,args:{data:e}})})}},27:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(0)),s=o(n(1)),l=n(2),a=o(n(118));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var r=function(e){function r(e,t){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o=this,(n=!(a=d(r).call(this,e,t))||"object"!==u(a)&&"function"!=typeof a?p(o):a).state=void 0!==n.state?n.state:{},n.state.fieldLayout=e.fieldLayout||"horizontal",n.state.radioLayout=e.radioLayout||"horizontal",n.state.labelColClass=e.labelColClass||"col-md-6",n.state.radioColClass=e.radioColClass||"col-md-6",n.onBlur=n.onBlur.bind(p(p(n))),n.onChange=n.onChange.bind(p(p(n))),n}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(r,a.default),t=r,(n=[{key:"options",value:function(){return this.props.options}},{key:"showRadiosWhenReadOnly",value:function(){return this.props.showRadiosWhenReadOnly}},{key:"onBlur",value:function(e){e.persist(),this._commitValue(this.value()),this.props.onBlur&&this.props.onBlur()}},{key:"onChange",value:function(e){if(!this.disabled()){var t=e.target.value;this._commitValue(t)}}},{key:"render",value:function(){var t=this,e="radio-label"+("horizontal"===this.state.fieldLayout?" "+this.state.labelColClass:""),n="radio-options "+this.state.radioLayout+("horizontal"===this.state.fieldLayout?" "+this.state.radioColClass:""),o=i.default.createElement("div",{className:e},this.label(),!!this.label()&&this.required()&&!this.disableValidationMessages()&&i.default.createElement("span",null,"*")),a="";if(this.options()){var r=this.options().find(function(e){return e.value===t.value()});r&&(a=r.label)}return this.readOnly()&&!this.showRadiosWhenReadOnly()||(a=this.options().map(function(e){return i.default.createElement("div",{key:e.value,className:(0,s.default)("radio-option",{disabled:e.disabled})},i.default.createElement("label",null,i.default.createElement("input",{type:"radio",name:t.name(),value:e.value,onBlur:t.onBlur,onChange:t.onChange,disabled:t.readOnly()||e.disabled,checked:t.value()===e.value}),i.default.createElement("span",null,e.label)),"GROUNDWOOD"==e.value&&i.default.createElement(l.Link,{className:"padding-left-10 text-green font-bold",to:"https://press.barnesandnoble.com/bnpress-blog/why-choose-groundwood-paper",target:"_blank"},"NEW! ",i.default.createElement("div",{className:"fa fa-external-link text-green"})))})),i.default.createElement("div",{className:(0,s.default)("base-control","radio-control",{disabled:this.disabled()},this.className())},!this.disableValidationMessages()&&i.default.createElement("div",{className:"message"},this.message()),i.default.createElement("div",{className:"radio-field clearfix "+this.state.fieldLayout},o,i.default.createElement("div",{className:n},a)))}}])&&c(t.prototype,n),o&&c(t,o),r}();r.propTypes=function(a){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(e){var t,n,o;t=a,o=r[n=e],n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o})}return a}({},a.default.propTypes,{options:i.default.PropTypes.arrayOf(i.default.PropTypes.object).isRequired,showRadiosWhenReadOnly:i.default.PropTypes.bool});var m=r;t.default=m},28:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPreviewMessage=function(e){o.default.dispatch({type:r.default.Content.LOAD_BROADCAST_MESSAGES,args:[{details:e,messageId:"-1"}]})},t.dismissBroadcastMessage=function(e){a.dismissBroadcastMessage(e,function(e){o.default.dispatch({type:r.default.Content.DISMISS_BROADCAST_MESSAGE})})},t.loadBroadcastMessages=function(){a.getBroadcastMessages(function(e){o.default.dispatch({type:r.default.Content.LOAD_BROADCAST_MESSAGES,args:e})})},t.loadFeatureModel=function(){a.loadFeatureModel(function(e){o.default.dispatch({type:r.default.Content.LOAD_FEATURE_MODEL,args:e})})},t.loadPreviewMessage=function(e){a.getPreviewMessage(function(e){o.default.dispatch({type:r.default.Content.LOAD_PREVIEW_MESSAGE,args:e})})},t.loadPromotionMessages=function(){a.getPromotionMessages(function(e){o.default.dispatch({type:r.default.Content.LOAD_PROMOTION_MESSAGES,args:e})})},t.loadPromotion=function(e){a.getPromotion(e,function(e){o.default.dispatch({type:r.default.Content.LOAD_PROMOTION,args:e})})},t.loadMarketingMessages=function(){a.getMarketingMessages(function(e){o.default.dispatch({type:r.default.Content.LOAD_MARKETING_MESSAGES,args:e})})},t.loadStaticContent=function(t){a.getStaticContent(t,function(e){o.default.dispatch({type:r.default.Content.LOAD_STATIC_CONTENT,args:{identifier:t,content:e.content}})},function(e){o.default.dispatch({type:r.default.Content.LOAD_STATIC_CONTENT_ERROR,args:{identifier:t,e:e}})})},t.loadAdContent=function(){a.getStaticContent("marketing-ads",function(e){o.default.dispatch({type:r.default.Content.LOAD_AD_CONTENT,args:{file:e}})})},t.loadJWTgenerate=function(){a.loadJWTgenerate(function(e){o.default.dispatch({type:r.default.Content.LOAD_JWT_GENERATE,args:e})})};var o=i(n(16)),a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(1035)),r=i(n(18));function i(e){return e&&e.__esModule?e:{default:e}}},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=(o=n(0))&&o.__esModule?o:{default:o};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=s(this,l(n).call(this,e))).state={message:e.message},t}var t,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,r.default.Component),t=n,(o=[{key:"render",value:function(){var e={position:"fixed",top:"50%",left:"50%",marginTop:this.props.marginTop||0,marginLeft:this.props.marginLeft||-22.5,zIndex:100},t={top:this.props.containerTop||"inherit",right:0,bottom:0,left:0,position:"fixed",zIndex:99,backgroundColor:this.props.backgroundColor||"rgba(255, 255, 255, 0.7)",width:"100%",height:"100%"},n={position:"absolute",top:e.top+70,width:"100%",textAlign:"center"};return r.default.createElement("div",{onClick:function(e){return e.stopPropagation()},style:t,className:"spinner-reference"},r.default.createElement("img",{style:e,src:"img/spinner.gif",alt:"spinner"}),this.state.message&&r.default.createElement("div",{style:n},r.default.createElement("div",{style:this.props.spinnerTextStyle||{width:"40%",margin:"10px auto"}},r.default.createElement("span",{dangerouslySetInnerHTML:{__html:this.state.message}}))))}}])&&i(t.prototype,o),a&&i(t,a),n}();t.default=c},30:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(44),o=(a(n(0)),a(n(16))),i=(n(7),a(n(18)));a(n(4)),function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}t.default=e}}(n(11));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f="broadcastMessageLoaded",p="JWTLoaded",m="featureModelLoaded",h="marketingMessagesLoaded",y="promotionMessagesLoaded",v="promotionLoaded",b="previewMessageLoaded",g="staticContentLoadedEvent",E="adContentLoaded",P="mailToAlertLoaded",S=new(function(e){function o(){var e,t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=this,(e=!(n=u(o).call(this))||"object"!==s(n)&&"function"!=typeof n?d(t):n).state={check:!1,checkData:""},e._mailToAlert=null,e.broadcastMessages=null,e.JWTToken=null,e.featureModel=null,e.promotionMessages={messages:[]},e.previewMessage=null,e.marketingMessages=null,e.adContentMap=null,e.loadMailToAlertSettings=e.loadMailToAlertSettings.bind(d(d(e))),e}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.EventEmitter),t=o,(n=[{key:"addBroadcastMessagesLoadedListener",value:function(e){this.addListener(f,e)}},{key:"removeBroadcastMessagesLoadedListener",value:function(e){this.removeListener(f,e)}},{key:"addJWTLoadedListener",value:function(e){this.addListener(p,e)}},{key:"removeJWTLoadedListener",value:function(e){this.removeListener(p,e)}},{key:"addFeatureModelLoadedListener",value:function(e){this.addListener(m,e)}},{key:"removeFeatureModelLoadedListener",value:function(e){this.removeListener(m,e)}},{key:"addMailToAlertLoadedListener",value:function(e){this.addListener(P,e)}},{key:"removeMailToAlertLoadedListener",value:function(e){this.removeListener(P,e)}},{key:"addPromotionMessagesLoadedListener",value:function(e){this.addListener(y,e)}},{key:"removePromotionMessagesLoadedListener",value:function(e){this.removeListener(y,e)}},{key:"addPromotionLoadedListener",value:function(e){this.addListener(v,e)}},{key:"removePromotionLoadedListener",value:function(e){this.removeListener(v,e)}},{key:"addPreviewMessageLoadedListener",value:function(e){this.addListener(b,e)}},{key:"removePreviewMessageLoadedListener",value:function(e){this.removeListener(b,e)}},{key:"addMarketingMessagesLoadedListener",value:function(e){this.addListener(h,e)}},{key:"removeMarketingMessagesLoadedListener",value:function(e){this.removeListener(h,e)}},{key:"addStaticContentLoadedListener",value:function(e){this.addListener(g,e)}},{key:"removeStaticContentLoadedListener",value:function(e){this.removeListener(g,e)}},{key:"addAdContentLoadedListener",value:function(e){this.addListener(E,e)}},{key:"removeAdContentLoadedListener",value:function(e){this.removeListener(E,e)}},{key:"getMailToAlert",value:function(){return this._mailToAlert}},{key:"getBroadcastMessages",value:function(){return this.broadcastMessages}},{key:"getJWTToken",value:function(){return this.JWTToken}},{key:"getFeatureModel",value:function(){return this.featureModel}},{key:"getPreviewMessage",value:function(){return this.previewMessage}},{key:"getBroadcastMessage",value:function(t){return this.broadcastMessages.find(function(e){return e.messageId===t})}},{key:"getPromotionMessages",value:function(){return this.promotionMessages.length?this.promotionMessages[0]:{messages:[]}}},{key:"getMarketingMessages",value:function(){return this.marketingMessages}},{key:"getFooterContent",value:function(){var e=window.location,t=e.protocol+"//"+e.host;return{desktop:{signUp:{heading:"Sign Up Now!",text:"Get the latest news, special offers and a free publishing guide and the latest news when you sign up for our email list.",placeholder:"Your Email Address",button:"Submit"},siteLinks:{group1:{heading:"Barnes & Noble Press",links:[{label:"How It Works",href:"/how-it-works"},{label:"Reach Millions",href:"/reach-millions-of-readers"},{label:"Make Money",href:"/make-more-money"},{label:"Print Personal Books",href:"/print-on-demand"}]},group2:{heading:"*empty*",links:[{label:"Author Tools & Tips",href:"/author-tools-and-tips"},{label:"Author Self-Publishing Services",href:"/self-publishing-services"},{label:"B&N In The News",href:t+"/bnpress-blog/bn-in-the-news/",external:!0},{label:"About Us",href:"/about-us"}]},group3:{heading:"*empty*",links:[{label:"Shop Indie Books",href:"https://www.barnesandnoble.com/b/indie-books/_/N-8r8",target:"_blank",external:!0},{label:"Affiliate Program",href:"https://www.barnesandnoble.com/h/affiliates",target:"_blank",external:!0},{label:"Careers",href:"https://careers.barnesandnoble.com/corporate-jobs",target:"_blank",external:!0},{label:"Help",href:"https://help-press.barnesandnoble.com",external:!0},{label:"Beware of Scams",href:"https://help-press.barnesandnoble.com/hc/en-us/articles/25495481344539-ATTENTION-AUTHORS-Scam-Warning-In-Store-Placement-Offers",target:"_blank",external:!0}]},group4:{heading:"Connect",links:[{alt:"facebook icon",label:"Facebook",href:"https://www.facebook.com/NOOKPress/",target:"_blank",img:"img/fb_icon.png",external:!0},{alt:"blog icon",label:"Blog",href:t+"/bnpress-blog/",img:"img/blog_icon.png",external:!0}]},group6:{heading:"Connect",links:[{alt:"facebook icon",label:"Facebook",href:"https://www.facebook.com/NOOKPress/",target:"_blank",img:"img/fb_icon.png",external:!0},{alt:"blog icon",label:"Blog",href:t+"/bnpress-blog/",img:"img/blog_icon.png",external:!0}]},group5:{heading:"NOOK",links:[{label:"NOOK eReaders & Tablets",href:"https://www.barnesandnoble.com/b/nook-devices/_/N-8ri",external:!0},{label:"Free NOOK Mobile Apps",href:"https://www.barnesandnoble.com/h/apps",external:!0}]}},legalLinks:[{label:"Membership Agreement",href:"/legal/membership-agreement"},{label:"Copyright",href:"https://www.barnesandnoble.com/h/copyright-policy",external:!0},{label:"Privacy",href:"https://bn.clarip.com/privacycenter/?brand=barnesandnoble",external:!0},{label:"Your Privacy Choices",href:"javascript:void(0);"},{label:"Cookie Policy",href:"https://www.barnesandnoble.com/h/help/cookie-policy",external:!0},{label:"Sitemap",href:"/sitemap"}],copyright:"&copy; 2014 - {year} Barnes and Noble LLC<br/>33 East 17th Street, New York, NY 10003"},mobile:{signUp:{heading:"Sign Up Now!",text:"Get the latest news, special offers and a free publishing guide and the latest news when you sign up for our email list.",placeholder:"Your Email Address",button:"Submit"},siteLinks:{group1:{heading:null,links:[{label:"Sign In",href:"/sign-in",onlyIfSignedOut:!0},{label:"Sign Out",onlyIfSignedIn:!0},{label:"Help",href:"https://help-press.barnesandnoble.com",external:!0},{label:"About Us",href:"/about-us"},{label:"Shop Indie Books on BN.com",href:"https://www.barnesandnoble.com/b/indie-books/_/N-8r8",external:!0},{label:"Careers",href:"https://careers.barnesandnoble.com/corporate-jobs",target:"_blank",external:!0}]},group7:{heading:null,links:[{label:"Sign In",href:"/sign-in",onlyIfSignedOut:!0},{label:"Sign Out",onlyIfSignedIn:!0},{label:"BNPressSupport@bn.com",href:"mailto:BNPressSupport@bn.com",img:"img/mail_exclam.png",external:!0},{label:"Help",href:"https://help-press.barnesandnoble.com",external:!0},{label:"About Us",href:"/about-us"},{label:"Shop Indie Books on BN.com",href:"https://www.barnesandnoble.com/b/indie-books/_/N-8r8",external:!0},{label:"Careers",href:"https://careers.barnesandnoble.com/corporate-jobs",target:"_blank",external:!0}]}},legalLinks:[{label:"Membership Agreement",href:"/legal/membership-agreement"},{label:"Copyright",href:"https://www.barnesandnoble.com/h/copyright-policy",external:!0},{label:"Privacy",href:"https://bn.clarip.com/privacycenter/?brand=barnesandnoble",external:!0},{label:"Your Privacy Choices",href:"https://bn.clarip.com/dsr/create",external:!0},{label:"Cookie Policy",href:"https://www.barnesandnoble.com/h/help/cookie-policy",external:!0}],copyright:"&copy; 2014 - {year} Barnes and Noble LLC<br/>33 East 17th Street, New York, NY 10003"}}}},{key:"isAdContentLoaded",value:function(){return!!this.adContentMap}},{key:"getAdContent",value:function(e){return this.adContentMap&&this.adContentMap[e]?this.adContentMap[e]:null}},{key:"loadBroadcastMessages",value:function(e){this.broadcastMessages=e,this.emit(f)}},{key:"loadJWTGenerate",value:function(e){this.JWTToken=e,this.emit(p,e)}},{key:"loadFeatureModel",value:function(e){this.featureModel=e,this.emit(m)}},{key:"loadMailToAlertSettings",value:function(e){this._mailToAlert={result:e},this.emit(P)}},{key:"loadPreviewMessage",value:function(e){this.previewMessage=e,this.emit(b)}},{key:"loadPromotionMessages",value:function(e){0<e.length?this.promotionMessages=e.map(function(e){var t=e.details;return{messages:t=t.includes("<p>")?(t=(t=t.replace("<p>","")).replace(/<\/p>/g,"")).split("<p>"):[],messageId:e.messageId}}):this.promotionMessages=e,this.emit(y)}},{key:"loadMarketingMessages",value:function(e){var t=e.messages;this.marketingMessages=t,this.emit(h)}},{key:"loadAdContent",value:function(e){this.adContentMap={};var t=[],n={},o=(e.content||"").split(/\r\n|\n/),a=!1,r=!1,i=null,s=null,l=!0,u=!1,c=void 0;try{for(var d,f=o[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;if("\x3c!-- BEGIN INDEX --\x3e"===(p=(p||"").trim()))a=!0;else if("\x3c!-- END INDEX --\x3e"===p)a=!1;else if(a){var m=p.split(":");if(2===m.length){var h=m[0].trim(),y=m[1].trim();0<h.length&&0<y.length&&t.push({contentIdentifier:h,adIdentifier:y})}}else p.startsWith("\x3c!-- BEGIN CONTENT")?(r=!0,i=p.substring(p.indexOf("(")+1,p.indexOf(")")),s=[]):"\x3c!-- END CONTENT --\x3e"===p?(n[i]=s.join("\r\n"),r=!1,s=i=null):r&&s.push(p)}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}for(var v=0;v<t.length;v++){var b=t[v];this.adContentMap[b.contentIdentifier]=n[b.adIdentifier]}this.emit(E)}},{key:"handleActions",value:function(e){switch(e.type){case i.default.VendorAccount.LOAD_MAIL_TO_ALERT:this.loadMailToAlertSettings(e.args);break;case i.default.Content.LOAD_BROADCAST_MESSAGES:this.loadBroadcastMessages(e.args);break;case i.default.Content.LOAD_FEATURE_MODEL:this.loadFeatureModel(e.args);break;case i.default.Content.LOAD_PREVIEW_MESSAGE:this.loadPreviewMessage(e.args);break;case i.default.Content.LOAD_PROMOTION_MESSAGES:this.loadPromotionMessages(e.args);break;case i.default.Content.LOAD_PROMOTION:this.emit(v,e.args);break;case i.default.Content.LOAD_MARKETING_MESSAGES:this.loadMarketingMessages(e.args);break;case i.default.Content.LOAD_STATIC_CONTENT:this.emit(g,{identifier:e.args.identifier,content:e.args.content});break;case i.default.Content.LOAD_AD_CONTENT:this.loadAdContent(e.args.file);break;case i.default.Content.LOAD_JWT_GENERATE:this.loadJWTGenerate(e.args);break;case i.default.AuthenticatedUser.LOG_OUT_USER:this.loadPromotionMessages([])}}}])&&l(t.prototype,n),a&&l(t,a),o}());o.default.register(S.handleActions.bind(S));var _=S;t.default=_},31:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.layoutContentChanged=function(){o.default.dispatch({type:a.default.WindowEvents.LAYOUT_CONTENT_CHANGED})},t.menuLinkClicked=function(){o.default.dispatch({type:a.default.WindowEvents.MENU_LINK_CLICKED})},t.mobileMenuClosed=function(){o.default.dispatch({type:a.default.WindowEvents.MOBILE_MENU_CLOSED})},t.mobileMenuLinkClicked=function(){o.default.dispatch({type:a.default.WindowEvents.MOBILE_MENU_LINK_CLICKED})},t.mobileMenuOpened=function(){o.default.dispatch({type:a.default.WindowEvents.MOBILE_MENU_OPENED})},t.toggleToast=function(e,t,n){o.default.dispatch({type:a.default.WindowEvents.TOGGLE_TOAST,args:{toggle:e,content:t,duration:n}})};var o=r(n(16)),a=r(n(18));function r(e){return e&&e.__esModule?e:{default:e}}},32:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeState=function(e,t){o.default.dispatch({type:a.default.BuildABookState.SAVE_STATE_CHANGE,args:{baseRoute:e,childRoute:t}})},t.enableProgressButtons=function(){o.default.dispatch({type:a.default.BuildABookState.ENABLE_PROGRESS_BUTTONS})},t.fadeInComplete=function(e){o.default.dispatch({type:a.default.BuildABookState.FADE_IN_COMPLETE,args:e})},t.go=function(e){o.default.dispatch({type:a.default.BuildABookState.PROGRESS_BUTTON_ACTIVATED,args:e})},t.onNavigationInitiated=function(e,t){o.default.dispatch({type:a.default.BuildABookState.NAVIGATION_INITIATED,args:{url:e,component:t}})},t.onNavigationConfirmed=function(e,t,n){setTimeout(function(){o.default.dispatch({type:a.default.BuildABookState.NAVIGATION_CONFIRMED,args:{url:e,component:t,editing:n}})},0)};var o=r(n(16)),a=r(n(18));function r(e){return e&&e.__esModule?e:{default:e}}},328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeAccountPermissions=function(e,t,n,o,a,r,i,s,l,u,c,d){return f.post("/api/admin/users/set-account-permissions",{vendorNum:e,userId:t,canRefer:n,isCoverCorrectionAvailable:o,isPreOrderEnabled:a,authorAccess:r,hasMerchandising:i,hasFreeIsbnAccess:s,analyticsAccess:l,customEbookSampling:u,authorSharedAccess:c,expandedDistributionAccess:d})},t.changeBusinessStatus=function(e,t,n){return f.post("/api/admin/users/change-business-status",{vendorNum:e,status:t,reason:n})},t.changeUserRole=function(e,t){return f.post("/api/admin/users/change-user-role",{id:e,role:t})},t.enableFreeCorrection=function(e){return f.get("/api/admin/users/enable-free-correction/"+e,{})},t.generatePasswordResetToken=function(e){return f.get("/api/admin/users/generate-password-reset-token/"+e)},t.getCoupons=function(e,t,n){return f.get("/api/admin/users/projectCoupons?status="+e+"&pageNumber="+t+"&recordsPerPage="+n)},t.getUserDetails=function(e){return f.get("/api/admin/users/details/"+e)},t.getUserInfo=function(e){return f.get("/api/admin/users/account/"+e)},t.getUserProjects=function(e,t,n,o){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:30,i=6<arguments.length?arguments[6]:void 0;return f.get("/api/admin/users/projects/"+e,{params:{projectsOption:t,sortOption:n,searchText:o,pageNum:a,recordsPerPage:r,aggregate:i}})},t.loadATGComparisonData=function(e){return f.get("/api/admin/users/projectCoupons/mismatch",{params:{couponId:e}})},t.repushFiles=function(e){return f.get("/api/admin/users/repushFiles/"+e,{})},t.syncWithPM=function(e){return f.get("/api/admin/users/syncWithPM/"+e,{})},t.repushBookFiles=function(e){return f.get("/api/admin/users/repushBookFiles/"+e,{})},t.getProjectDashboardStatus=function(e){return f.get("/api/admin/users/getProjectDashboardStatus/"+e,{})},t.getUltraPremiumComparable=function(e){return f.get("/api/admin/users/getUltraPremiumCompareable/"+e,{})},t.ultraPremiumConvert=function(e){return f.post("/api/admin/users/ultraPremiumConvert/"+e,{})},t.searchPagedUsers=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"All",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"asc",o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:30;return f.post("/api/admin/users/search",{search:e,filter:t,sortDirection:n,pageNum:o,recordsPerPage:a})},t.searchUsers=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"All";return f.post("/api/admin/users/search",e,t)},t.updateUserEmailAddress=function(e,t,n,o){return f.put("/api/admin/users/update-email",{vendorNumber:e,emailAddress:t,swap:n},o)},t.loadOrderHistory=function(e,t,n,o,a,r,i){var s={page:n,limit:o};e&&e.length&&(s.dateStart=e);t&&t.length&&(s.dateEnd=t);a&&a.length&&(s.sortOption=a);r&&r.length&&(s.customerId=r);return l.get("/api/admin/orderhistory",{params:s},i)},t.loadOrderDetails=function(e,t,n){var o={};return o.customerId=t,l.get("/api/admin/orderhistory/details/"+e,{params:o},n)},t.cancelOrder=function(e,t){return l.post("/api/admin/orderhistory/cancelOrder",e,t)},t.orderDeleteReasonComplete=function(e){return l.get("/api/admin/orderhistory/order-cancel-reasons",{},e)};var f=o(n(130)),l=o(n(67));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}},329:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=o(n(0)),r=o(n(13)),c=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=s(this,l(n).call(this,e))).scrollToFocusedOption=!1,t.state=t.state||{},t}var t,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,u.default.Component),t=n,(o=[{key:"open",value:function(){return this.props.open}},{key:"options",value:function(){return this.props.options}},{key:"focusedOptionIndex",value:function(){return this.props.focusedOptionIndex}},{key:"componentWillReceiveProps",value:function(e){this.focusedOptionIndex()!==e.focusedOptionIndex&&(this.scrollToFocusedOption=!0)}},{key:"select",value:function(e){this.props.onSelection(e)}},{key:"showFocusedOption",value:function(){if(this.scrollToFocusedOption=!1,0<=this.focusedOptionIndex()&&this.focusedOptionIndex()<this.options().length){var e=(0,r.default)(this.refs.scroller),t=(0,r.default)(this.refs["option-"+this.focusedOptionIndex()]);0<t.length&&t.position().top<0&&e.scrollTop(e.scrollTop()+t.position().top),0<t.length&&t.position().top+t.outerHeight()>e.innerHeight()&&e.scrollTop(e.scrollTop()+t.position().top+t.outerHeight()-e.innerHeight())}}},{key:"renderOptions",value:function(){var t=this,n=[],o=-1,e=!0,a=!1,r=void 0;try{for(var i,s=function(){var e=i.value;o++,e.separatorAbove&&n.push(u.default.createElement("li",{key:"separator="+o,className:"separator"})),n.push(u.default.createElement("li",{ref:"option-"+o,key:o,className:(0,c.default)({focused:o===t.focusedOptionIndex()}),role:"option",onClick:function(){return t.select(e)}},e.label," ",void 0!==e.rightLabel&&u.default.createElement("div",{className:"pull-right"},e.rightLabel)))},l=this.options()[Symbol.iterator]();!(e=(i=l.next()).done);e=!0)s()}catch(e){a=!0,r=e}finally{try{e||null==l.return||l.return()}finally{if(a)throw r}}return n}},{key:"render",value:function(){var e=this,t=this.renderOptions();return this.scrollToFocusedOption&&setTimeout(function(){e.showFocusedOption()},0),u.default.createElement("div",{ref:"scroller",className:(0,c.default)("options-dropdown",{open:this.open()})},u.default.createElement("div",{className:"tray"},u.default.createElement("ul",{className:this.props.clss?this.props.clss:""},t)))}}])&&i(t.prototype,o),a&&i(t,a),n}();f.propTypes={open:u.default.PropTypes.bool.isRequired,options:u.default.PropTypes.arrayOf(u.default.PropTypes.object).isRequired,focusedOptionIndex:u.default.PropTypes.number,onSelection:u.default.PropTypes.func.isRequired};var p=f;t.default=p},33:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BookCoverTemplateGenerator=t.Summary=t.VendorTaxAndBankInformation=t.VendorPublisher=t.Vendor=t.DetailsIsbn=t.DetailsEditorials=t.DetailsRights=t.DetailsPricing=t.DetailsCategories=t.DetailsAuthor=t.DetailsAbout=t.Details=t.CoverReview=t.CoverSpine=t.CoverUpload=t.CoverFileType=t.CoverFonts=t.CoverImages=t.CoverFormatting=t.CoverType=t.Cover=t.InteriorSelectSample=t.InteriorReviewSample=t.InteriorUploadSample=t.InteriorSamplePreference=t.InteriorReview=t.InteriorUpload=t.InteriorFileType=t.InteriorFonts=t.InteriorImages=t.InteriorFormatting=t.Interior=t.SizeAndType=t.VendorRegistration=t.SelectPreorderStatus=t.SelectSaleStatus=t.ChooseExistingBook=t.CreateBookTitle=t.ChooseBookType=t.Base=void 0;t.Base="build-a-book";t.ChooseBookType="choose-book-type";t.CreateBookTitle="create-book-title";t.ChooseExistingBook="choose-existing-book";t.SelectSaleStatus="select-sale-status";t.SelectPreorderStatus="select-preorder-status";t.VendorRegistration="vendor-registration";t.SizeAndType="book-size-and-type";t.Interior="interior";t.InteriorFormatting="formatting";t.InteriorImages="images";t.InteriorFonts="fonts";t.InteriorFileType="file-type";t.InteriorUpload="upload";t.InteriorReview="review";t.InteriorSamplePreference="sample-preference";t.InteriorUploadSample="upload-sample";t.InteriorReviewSample="review-sample";t.InteriorSelectSample="select-sample";t.Cover="cover";t.CoverType="cover-type";t.CoverFormatting="formatting";t.CoverImages="images";t.CoverFonts="fonts";t.CoverFileType="file-type";t.CoverUpload="upload";t.CoverSpine="spine";t.CoverReview="review";t.Details="book-details";t.DetailsAbout="about";t.DetailsAuthor="author";t.DetailsCategories="categories";t.DetailsPricing="pricing";t.DetailsRights="rights-and-other-information";t.DetailsEditorials="editorial-reviews";t.DetailsIsbn="isbn";t.Vendor="vendor";t.VendorPublisher="publisher";t.VendorTaxAndBankInformation="tax-bank-info";t.Summary="summary";t.BookCoverTemplateGenerator="book-cover-template-generator"},330:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,((o=n(205))&&o.__esModule?o:{default:o}).default)({SEARCH_USERS:null,CHANGE_USER_ROLE:null,CHANGE_ACCOUNT_PERMISSIONS:null,CHANGE_USER_BUSINESS_STATUS:null,ENABLE_FREE_CORRECTION:null,GENERATE_PASSWORD_RESET_TOKEN:null,LOAD_ATG_COMPARISON:null,LOAD_BOOTSTRAPPED_USER:null,LOAD_BOOTSTRAPPED_USER_ERROR:null,LOAD_COUPONS:null,LOAD_USER_DETAILS:null,UNLOAD_USER_DETAILS:null,LOAD_USER_PROJECTS:null,UNLOAD_USER_PROJECTS:null,UPDATE_USER_EMAIL_ADDRESS:null,UPDATE_USER_EMAIL_ADDRESS_ERROR:null,REPUSH_FILES:null,LOOKUP_ENV:null,SYNC_WITH_PM:null,REPUSH_BOOK_FILES:null,STATUS_MODAL_ACTION:null,ULTRA_PREMIUM_MODAL:null,ULTRA_PREMIUM_CONVERT:null,UPLOAD_FORM_FILE:null,LOAD_ORDER_DETAILS:null,LOAD_ORDER_HISTORY:null,CANCEL_ORDER_HISTORY:null,ORDER_DELETE_REASON_COMPLETE:null,ORDER_HISTORY_ERROR:null});for(var r in a)a[r]="AdminUser."+a[r];a.EMAIL_ADDRESS_NOT_FOUND="15016",a.EMAIL_BELONGS_TO_DIFFERENT_ACCOUNT="15017",a.UPDATE_USER_EMAIL_ERROR_CODES={INVALID_VENDORNUM:"15014",INVALID_EMAIL_ADDRESS:"15015",EMAIL_ADDRESS_NOT_FOUND:"15016",EMAIL_BELONGS_TO_DIFFERENT_ACCOUNT:"15017"};var i=a;t.default=i},331:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAddressBook=function(o,e){a.loadAddressBook(e).then(function(e){try{var t=[];if(e&&e.addressList)for(var n=0;n<e.addressList.length;n++)t.push(new r.default(e.addressList[n]));o(t)}catch(e){console.log(e)}})},t.logout=function(e,t){a.logout(t).then(function(){try{e()}catch(e){console.log(e)}})},t.addAddress=function(e,t,n){a.addAddress(e,n).then(function(e){try{t(new r.default(e))}catch(e){console.log(e)}})},t.updateAddress=function(e,t,n){a.updateAddress(e,n).then(function(e){try{t(new r.default(e))}catch(e){console.log(e)}})},t.loadPaymentMethods=function(t,e){a.loadPaymentMethods(e).then(function(e){try{t(e.paymentList?e.paymentList:[])}catch(e){console.log(e)}})},t.emailSearchAdmin=function(e,t,n){a.emailSearchAdmin(e,t,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.pubSearchAdmin=function(e,t,n){a.pubSearchAdmin(e,t,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.emailPreferencesChange=function(e,t,n,o){a.emailPreferencesChange(e,t,n,o).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.emailPreferences=function(e,t,n){a.emailPreferences(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadProfile=function(t,e){a.loadProfile(e).then(function(e){try{t(new o.default(e))}catch(e){console.log(e)}})},t.updateProfile=function(e,t,n){a.updateProfile(e,n).then(function(e){try{e?t(new o.default(e)):n(e)}catch(e){n(e),console.log(e)}})},t.verifyOtp=function(e,t,n,o){a.verifyOtp(e,t,n).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.resendCode=function(e,t,n,o){a.resendCode(e,t,n).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.loadSecurityQuestions=function(t,e){a.loadSecurityQuestions(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getEnvPath=function(t,n){a.getEnvPath().then(function(e){try{t({users:e})}catch(e){n(e)}})},t.savePreferences=t.load=void 0;var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(974)),r=i(n(244)),o=i(n(492));function i(e){return e&&e.__esModule?e:{default:e}}t.load=function(e,t,n){a.retrieveUser(e,n).then(function(e){s(t,n,e)})};t.savePreferences=function(t,n,o){a.savePreferences(t,o).then(function(e){s(n,o,t)})};var s=function(e,t,n){try{e(n)}catch(e){console.log(e)}}},332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CART_ERRORS=t.MONTHS_LEFT_THIS_YEAR=t.MONTHS=t.YEARS=void 0;var o=n(7);var a,r=(a=Array(11).keys(),function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(a)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()).map(function(e){var t=e+(0,o.bn_moment)().year();return{label:t.toString(),value:t.toString()}});t.YEARS=r;var i=[{label:"01",value:"01"},{label:"02",value:"02"},{label:"03",value:"03"},{label:"04",value:"04"},{label:"05",value:"05"},{label:"06",value:"06"},{label:"07",value:"07"},{label:"08",value:"08"},{label:"09",value:"09"},{label:"10",value:"10"},{label:"11",value:"11"},{label:"12",value:"12"}],s=(t.MONTHS=i).slice((0,o.bn_moment)().month());t.MONTHS_LEFT_THIS_YEAR=s;t.CART_ERRORS={INVALID_CARD:{code:"31002",description:"|cardNumber|The credit card number that you entered is not valid. Please check your card and try again.|"}}},333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(a(n(43)),a(n(21))),s=a(n(13)),l=o(n(32)),u=(o(n(10)),a(n(1)));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=m(a).call(this,e))||"object"!==c(o)&&"function"!=typeof o?y(n):o).state={addingClass:!1},e.noAbort&&(t.forbidCloseByUser=!0),t.onCancel=t.onCancel.bind(y(y(t))),t.onSubmit=t.onSubmit.bind(y(y(t))),t.makeClick=t.makeClick.bind(y(y(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,i.default),t=a,(n=[{key:"componentDidMount",value:function(){var e=this;p(m(a.prototype),"componentDidMount",this).call(this),"I understand. Do not show me this message again."==this.props.confirmButtonText&&(0,s.default)(document).ready(function(){e.setState({addingClass:!0})}),"Upload This File"!=this.props.confirmButtonText&&"Initiate ISBN Transfer"!=this.props.confirmButtonText||(0,s.default)(document).ready(function(){((0,s.default)("#uploadCheckbox1").is(":checked")||(0,s.default)("#uploadCheckbox2").is(":checked"))&&(0,s.default)("#transferIsbnCheckbox").is(":checked")||(0,s.default)("button.btn-primary").prop("disabled",!0),(0,s.default)("#uploadCheckbox1, #uploadCheckbox2, #transferIsbnCheckbox").keypress(function(e){13==(e.keyCode?e.keyCode:e.which)&&e.currentTarget.click()}),(0,s.default)("#uploadCheckbox1, #uploadCheckbox2, #transferIsbnCheckbox").change(function(){(0,s.default)("#uploadCheckbox1").is(":checked")&&(0,s.default)("#uploadCheckbox2").is(":checked")||(0,s.default)("#transferIsbnCheckbox").is(":checked")?(0,s.default)("button.btn-primary:disabled").prop("disabled",!1):(0,s.default)("button.btn-primary").prop("disabled",!0)})}),"Cancel. I will complete my vendor account later"==this.props.cancelButtonText&&(0,s.default)(document).ready(function(){(0,s.default)("#w9ReviewCheckbox").is(":checked")&&(0,s.default)("#w9ConfirmCheckbox").is(":checked")&&(0,s.default)("#w9AgreeCheckbox").is(":checked")||(0,s.default)(".modal-footer button.btn-primary").prop("disabled",!0),(0,s.default)("#w9ReviewCheckbox, #w9ConfirmCheckbox, #w9AgreeCheckbox").change(function(){(0,s.default)("#w9ReviewCheckbox").is(":checked")&&(0,s.default)("#w9ConfirmCheckbox").is(":checked")&&(0,s.default)("#w9AgreeCheckbox").is(":checked")?(0,s.default)(".modal-footer button.btn-primary:disabled").prop("disabled",!1):(0,s.default)(".modal-footer button.btn-primary").prop("disabled",!0)})}),setTimeout(function(){var e='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',t=document.querySelector(".modal-container"),n=t.querySelectorAll(e)[0],o=t.querySelectorAll(e),a=o[o.length-1];document.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===n&&(a.focus(),e.preventDefault()):document.activeElement===a&&(n.focus(),e.preventDefault()))}),n.focus()},1e3)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onCancel",value:function(){l.enableProgressButtons(),this.finish(),document.getElementById("app").classList.add("removeToast"),setTimeout(function(){document.getElementById("app").classList.remove("removeToast")}.bind(this),5e3),this.setState({addingClass:!1})}},{key:"onSubmit",value:function(){if("Upload This File"==this.props.confirmButtonText){window.document.getElementsByTagName("html")[0].classList.add("confirm-grandparent-container");document.documentElement.scrollTop;var e=document.documentElement.scrollTop+800;document.getElementById("confirmation-modal").style.position="fixed",document.getElementById("confirmation-modal").style.top="35%",document.getElementById("container-modal").style.height=e+"px",this.complete()}else this.complete();this.setState({addingClass:!1})}},{key:"render",value:function(){var e;return r.default.createElement("div",{ref:"modal",className:"modal fade confirmation-modal "+(this.props.extraClass?" "+this.props.extraClass:"")+("Initiate ISBN Transfer"==this.props.confirmButtonText&&" transfer-isbn-modal"),role:"dialog","aria-hidden":"true"},r.default.createElement("div",(d(e={className:""},"className",(0,u.default)("modal-dialog ",{"hide-button-show-link":this.state.addingClass})),d(e,"style",this.props.dialogStyles||{}),e),r.default.createElement("div",{className:"modal-content"},!this.props.noAbort&&r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.onCancel,"data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",{dangerouslySetInnerHTML:{__html:this.props.title||"Confirm"}})),!!this.props.question&&r.default.createElement("div",{className:"modal-body",dangerouslySetInnerHTML:{__html:"<p>"+this.props.question+"</p>"}}),!!this.props.content&&r.default.createElement("div",{className:"modal-body"},this.props.content),r.default.createElement("div",{className:"modal-footer"},"Initiate ISBN Transfer"!==this.props.confirmButtonText&&r.default.createElement("button",{tabIndex:"0",className:"btn btn-cancel",onClick:this.onCancel},this.props.cancelButtonText||"Cancel"),r.default.createElement("button",{tabIndex:"0",className:"btn btn-primary",onClick:this.onSubmit},this.props.confirmButtonText||"Yes")),"Initiate ISBN Transfer"==this.props.confirmButtonText&&r.default.createElement("div",{className:"footnote"},r.default.createElement("p",{className:"text-align-center"}," Cannot be undone")),!!this.props.footnote&&r.default.createElement("div",{className:"footnote",dangerouslySetInnerHTML:{__html:"<p>"+this.props.footnote+"</p>"}}))))}}])&&f(t.prototype,n),o&&f(t,o),a}();t.default=v},34:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=(o=n(0))&&o.__esModule?o:{default:o};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=l(a).call(this,e))||"object"!==i(o)&&"function"!=typeof o?c(n):o).onClose=t.onClose.bind(c(c(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,r.default.Component),t=a,(n=[{key:"onClose",value:function(){this.props.onClose&&this.props.onClose()}},{key:"render",value:function(){var e=this.props.style,t=!!this.props.dismissable&&this.props.dismissable,n=t?" alert-dismissible":"",o="alert-"+this.props.type,a=this.props.messages.map(function(e){return r.default.createElement("li",{key:e},e)});return r.default.createElement("div",{className:"warning-dialogue",style:e},r.default.createElement("aside",{className:"alert "+o+n,role:"alert"},r.default.createElement("span",{className:"alert-content"},r.default.createElement("ul",{className:1===this.props.messages.length?"list-unstyled":""},a)),t&&r.default.createElement("button",{type:"button","data-dismiss":"alert","aria-label":"Close",onClick:this.onClose},r.default.createElement("span",{"aria-hidden":"true"},"Ã—"))))}}])&&s(t.prototype,n),o&&s(t,o),a}();(t.default=a).propTypes={messages:r.default.PropTypes.array.isRequired,type:r.default.PropTypes.string.isRequired}},38:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(44),i=o(n(16)),s=o(n(18)),l=o(n(8));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p="ContributorsLoaded",m="IsbnLookupLoaded",h="projectSearchResultsLoaded",y="projectDeletedResultsLoaded",v="projectIsbnResultsLoaded",b="projectSearchesLoaded",g="projectCoverSearchesLoaded",E="projectCoverCouponsLoaded",P="seriesNamesLoaded",S=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=c(this,d(t).call(this)))._allContributors=[],e._totalCount=null,e._projects=null,e._projectSearches=[],e._uniqueTitles=[],e._uniqueIsbns=[],e._uniqueAuthors=[],e._uniqueSeries=[],e._uniqueSearches=[],e._seriesNames=[],e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.EventEmitter),n=t,(o=[{key:"addAllContributorsLoadedListener",value:function(e){this.addListener(p,e)}},{key:"removeAllContributorsLoadedListener",value:function(e){this.removeListener(p,e)}},{key:"addProjectSearchesLoadedListener",value:function(e){this.addListener(b,e)}},{key:"removeProjectSearchesLoadedListener",value:function(e){this.removeListener(b,e)}},{key:"addProjectCoverSearchesLoadedListener",value:function(e){this.addListener(g,e)}},{key:"removeProjectCoverSearchesLoadedListener",value:function(e){this.removeListener(g,e)}},{key:"addProjectCoverCouponsLoadedListener",value:function(e){this.addListener(E,e)}},{key:"removeProjectCoverCouponsLoadedListener",value:function(e){this.removeListener(E,e)}},{key:"addProjectSearchResultsLoadedListener",value:function(e){this.addListener(h,e)}},{key:"removeProjectSearchResultsLoadedListener",value:function(e){this.removeListener(h,e)}},{key:"addProjectDeletedResultsLoadedListener",value:function(e){this.addListener(y,e)}},{key:"addProjectISBNLIstenerLoadedListener",value:function(e){this.addListener(v,e)}},{key:"removeProjectISBNLIstenerLoadedListener",value:function(e){this.addListener(v,e)}},{key:"removeProjectDeletedResultsLoadedListener",value:function(e){this.removeListener(y,e)}},{key:"addIsbnLookupLoadedListener",value:function(e){this.addListener(m,e)}},{key:"removeIsbnLookupLoadedListener",value:function(e){this.removeListener(m,e)}},{key:"addSeriesNamesLoadedListener",value:function(e){this.addListener(P,e)}},{key:"removeSeriesNamesLoadedListener",value:function(e){this.removeListener(P,e)}},{key:"findProjectById",value:function(t){var n=null;return this._projects.forEach(function(e){e.id===t&&(n=e)}),n}},{key:"findProjectByEan",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return this._projectSearches.find(function(e){return e.ean===t&&!n.includes(e.ean)})}},{key:"findProjectByTitle",value:function(e){1<arguments.length&&void 0!==arguments[1]&&arguments[1];var t=e.toUpperCase();return this._projectSearches.find(function(e){return e.title.toUpperCase()===t})}},{key:"findProjectForEaa",value:function(i){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(Number.isNaN(parseInt(i))){if(null==i)return;var n=i.toUpperCase(),e=this._projectSearches.find(function(e){return e.title.toUpperCase()===n});if(null==e){var o=n.split(" [");o.pop(),n=o[0],e=this._projectSearches.find(function(e){return e.title.toUpperCase()===n})}return e}var s=this._projectSearches.find(function(e){var t=!0,n=!1,o=void 0;try{for(var a,r=e.eans[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){if(a.value===i)return s=e}}catch(e){n=!0,o=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw o}}});return null==s&&(s=this._projectSearches.find(function(e){return e.ean===i&&!t.includes(e.param)})),null==s&&(s=this._projectSearches.find(function(e){return e.displayIsbn===i&&!t.includes(e.param)})),s}},{key:"handleActions",value:function(e){if(null!=e.type)switch(e.type){case s.default.ProjectsSearch.LOAD_ALL_CONTRIBUTORS:this.onLoadContributors(e.args);break;case s.default.ProjectsSearch.LOAD_PROJECT_SEARCHES:this.onLoadProjectSearches(e.args);break;case s.default.ProjectsSearch.LOAD_PROJECT_COVER_SEARCHES:this.onLoadProjectCoverSearches(e.args);break;case s.default.ProjectsSearch.LOAD_PROJECT_COVER_COUPONS:this.onLoadProjectCoverCoupons(e.args);break;case s.default.ProjectsSearch.LOAD_PROJECT_SEARCHES_SINGLE_USER:this.onLoadProjectSearches(e.args);break;case s.default.ProjectsSearch.LOAD_EAA_SEARCHES:this.onLoadProjectSearchesEaa(e.args);break;case s.default.ProjectsSearch.LOAD_PROJECT_SEARCH_RESULTS:this.onProjectSearchResultsChange(e.args);break;case s.default.ProjectsSearch.LOAD_SERIES_NAMES:this.onLoadSeriesNames(e.args);break;case s.default.Project.DELETE_PROJECT:i.default.waitFor([l.default.dispatchToken]),this.onProjectDeleted(e.args);break;case s.default.Project.DELETE_SEARCH_PROJECT:i.default.waitFor([l.default.dispatchToken]),this.onProjectSearchDeleted(e.args);break;case s.default.Project.REFRESH_PROJECT:i.default.waitFor([l.default.dispatchToken]),this.onRefreshProject(e.args);break;case s.default.Project.TRANFER_ISBN_PROJECT:i.default.waitFor([l.default.dispatchToken]),this.onIsbnTransferProject(e.args);break;case s.default.ProjectsSearch.LOOKUP_ISBN:this.onIsbnLookupLoaded(e.args);break;case s.default.AuthenticatedUser.LOG_OUT_USER:this.onLogout()}}},{key:"onIsbnLookupLoaded",value:function(e){this.emit(m,e)}},{key:"onLoadContributors",value:function(e){this._allContributors=[],0<e.length&&(this._allContributors=e),this.emit(p)}},{key:"onLoadProjectCoverSearches",value:function(e){this._projectSearches=e.searches.genericProjects,this._totalProject=e.searches.totalProjects,this.emit(g,this._projectSearches,this._totalProject)}},{key:"onLoadProjectCoverCoupons",value:function(e){this._projectCoupons=e.searches.genericProjects[0].projectCoupons,this.emit(E,this._projectCoupons)}},{key:"onLoadProjectSearchesEaa",value:function(e){var s=this;this._projectSearches=e.searches.genericProjects,this._uniqueTitles=[],this._uniqueIsbns=[],this._uniqueSeries=[],this._uniqueSearches=[],0<e.searches.genericProjects.length&&(e.searches.genericProjects.forEach(function(e){if(e.title&&""!==e.title&&!s._uniqueTitles.includes(e.title)&&(e.seriesName?s._uniqueTitles.push(e.title+" ["+e.seriesName+"]"):s._uniqueTitles.push(e.title)),0<e.eans.length){var t=!0,n=!1,o=void 0;try{for(var a,r=e.eans[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var i=a.value;i&&""!==i&&!s._uniqueIsbns.includes(i)&&s._uniqueIsbns.push(i)}}catch(e){n=!0,o=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw o}}}e.ean&&""!==e.ean&&!s._uniqueIsbns.includes(e.ean)&&s._uniqueIsbns.push(e.ean),e.displayIsbn&&""!==e.displayIsbn&&!s._uniqueIsbns.includes(e.displayIsbn)&&s._uniqueIsbns.push(e.displayIsbn)}),this._uniqueSearches=this._uniqueTitles.concat(this._uniqueIsbns.concat(this._uniqueSeries))),this.emit(b,this._uniqueSearches)}},{key:"onLoadProjectSearches",value:function(e){var t=this;this._projectSearches=e.searches.genericProjects,this._uniqueTitles=[],this._uniqueIsbns=[],this._uniqueAuthors=[],this._uniqueSeries=[],this._uniqueSearches=[],e.searches.genericProjects&&0<e.searches.genericProjects.length&&(e.searches.genericProjects.forEach(function(e){e.title&&""!==e.title&&!t._uniqueTitles.includes(e.title)&&t._uniqueTitles.push(e.title),e.ean&&""!==e.ean&&!t._uniqueIsbns.includes(e.ean)&&t._uniqueIsbns.push(e.ean),e.displayIsbn&&""!==e.displayIsbn&&!t._uniqueIsbns.includes(e.displayIsbn)&&t._uniqueIsbns.push(e.displayIsbn),e.author&&""!==e.author&&!t._uniqueAuthors.includes(e.author)&&t._uniqueAuthors.push(e.author),e.seriesName&&""!==e.seriesName&&!t._uniqueSeries.includes(e.seriesName)&&t._uniqueSeries.push(e.seriesName)}),this._uniqueSearches=this._uniqueTitles.concat(this._uniqueIsbns.concat(this._uniqueAuthors.concat(this._uniqueSeries)))),this.emit(b,this._uniqueSearches)}},{key:"onLoadSeriesNames",value:function(e){var t=this;this._seriesNames=[],0<e.length&&e.map(function(e){return t._seriesNames.push(e.seriesName)}),this.emit(P)}},{key:"onLogout",value:function(){this.onLoadContributors([]),this.onLoadSeriesNames([])}},{key:"onProjectDeleted",value:function(t){this._projects&&(this._projects=this._projects.filter(function(e){return e.id!==t.project.id}),this._totalCount=this._totalCount-1),this.emit(y)}},{key:"onIsbnTransferProject",value:function(e){this.emit(v)}},{key:"onProjectSearchDeleted",value:function(t){this._projects&&(this._projects=this._projects.filter(function(e){return e.id!==t.project.id}),this._totalCount=this._totalCount-1),this.emit(y)}},{key:"onProjectSearchResultsChange",value:function(e){this._totalCount=e.totalCount,this._projects=e.projects,this.emit(h)}},{key:"onRefreshProject",value:function(e){var t=e.project;if(this._projects&&t){var n=this._projects.findIndex(function(e){return e.id===t.id});0<=n&&(this._projects.splice(n,1,t),this.emit(h))}}},{key:"onResetProjectGroups",value:function(e){this._totalCount=null,this._projects=null}},{key:"allContributors",get:function(){return this._allContributors}},{key:"totalCount",get:function(){return this._totalCount}},{key:"projects",get:function(){return this._projects}},{key:"uniqueTitles",get:function(){return this._uniqueTitles}},{key:"uniqueIsbns",get:function(){return this._uniqueIsbns}},{key:"uniqueAuthors",get:function(){return this._uniqueAuthors}},{key:"uniqueSearches",get:function(){return this._uniqueSearches}},{key:"seriesNames",get:function(){return this._seriesNames}}])&&u(n.prototype,o),a&&u(n,a),t}());S.dispatchToken=i.default.register(S.handleActions.bind(S));var _=S;t.default=_},4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(18)),i=n(7),s=n(2),o=a(n(16)),l=n(44);a(n(492));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m="change",h="emailChange",y="emailSearch",v="onUserError",b="onforgotPasswordQuestionLoaded",g="onForgotPasswordAnswerValidated",E="forgotPasswordTokenCheck",P="forgotPasswordUpdate",S="onAddressBookLoaded",_="onAddressBookChanged",O="paymentMethodsLoaded",C="paymentMethodsChanged",k="profileLoaded",T="profileUpdateBegun",A="profileUpdated",N="profileUpdatedError",L="securityQuestionsLoaded",D="onUserAccountCreated",I="onUserUnauthorized",R="onUserLogout",w="getAuthorProfile",j="verifyotpLoaded",M="resendcodeloaded",B="generatecodeloaded",x="objEnv";function U(e){return e?e.trim():e}var V=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=d(this,f(t).call(this)))._clearUserData(),e._globalPermissions=window.global_permissions,e.setMaxListeners(0),e._authoreDetail=null,e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,l.EventEmitter),n=t,(o=[{key:"authoreDetail",value:function(){return this._authoreDetail}},{key:"addChangeListener",value:function(e){this.addListener(m,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(m,e)}},{key:"addEmailResponseListener",value:function(e){this.addListener("email",e)}},{key:"removeEmailResponseListener",value:function(e){this.removeListener("email",e)}},{key:"addEmailResponseChangeListener",value:function(e){this.addListener(h,e)}},{key:"removeEmailResponseChangeListener",value:function(e){this.removeListener(h,e)}},{key:"addEmailSearchResponseChangeListener",value:function(e){this.addListener(y,e)}},{key:"removeEmailSearchResponseChangeListener",value:function(e){this.removeListener(y,e)}},{key:"addUnauthorizedUserListener",value:function(e){this.addListener(I,e)}},{key:"removeUnauthorizedUserListener",value:function(e){this.removeListener(I,e)}},{key:"addAccountCreatedListener",value:function(e){this.addListener(D,e)}},{key:"removeAccountCreatedListener",value:function(e){this.removeListener(D,e)}},{key:"getAuthorProfileListener",value:function(e){this.addListener(w,e)}},{key:"removeAuthorProfileListener",value:function(e){this.removeListener(w,e)}},{key:"addErrorChangeListener",value:function(e){this.addListener(v,e)}},{key:"removeErrorChangeListener",value:function(e){this.removeListener(v,e)}},{key:"addForgotPasswordQuestionListener",value:function(e){this.addListener(b,e)}},{key:"removeForgotPasswordQuestionListener",value:function(e){this.removeListener(b,e)}},{key:"addForgotPasswordAnswerValidationListener",value:function(e){this.addListener(g,e)}},{key:"removeForgotPasswordAnswerValidationListener",value:function(e){this.removeListener(g,e)}},{key:"addForgotPasswordTokenCheckListener",value:function(e){this.addListener(E,e)}},{key:"removeForgotPasswordTokenCheckListener",value:function(e){this.removeListener(E,e)}},{key:"addLogoutUserListener",value:function(e){this.addListener(R,e)}},{key:"removeLogoutUserListener",value:function(e){this.removeListener(R,e)}},{key:"addForgotPasswordUpdateListener",value:function(e){this.addListener(P,e)}},{key:"removeForgotPasswordUpdateListener",value:function(e){this.removeListener(P,e)}},{key:"addAddressBookListener",value:function(e){this.addListener(S,e)}},{key:"removeAddressBookListener",value:function(e){this.removeListener(S,e)}},{key:"addAddressBookChangedListener",value:function(e){this.addListener(_,e)}},{key:"removeAddressBookChangedListener",value:function(e){this.removeListener(_,e)}},{key:"addPaymentMethodsLoadedListener",value:function(e){this.addListener(O,e)}},{key:"removePaymentMethodsLoadedListener",value:function(e){this.removeListener(O,e)}},{key:"addPaymentMethodsChangedListener",value:function(e){this.addListener(C,e)}},{key:"removePaymentMethodsChangedListener",value:function(e){this.removeListener(C,e)}},{key:"addProfileLoadedListener",value:function(e){this.addListener(k,e)}},{key:"removeProfileLoadedListener",value:function(e){this.removeListener(k,e)}},{key:"addProfileUpdateBegunListener",value:function(e){this.addListener(T,e)}},{key:"removeProfileUpdateBegunListener",value:function(e){this.removeListener(T,e)}},{key:"addProfileUpdatedListener",value:function(e){this.addListener(A,e)}},{key:"removeProfileUpdatedListener",value:function(e){this.removeListener(A,e)}},{key:"addProfileUpdatedErrorListener",value:function(e){this.addListener(N,e)}},{key:"removeProfileUpdatedErrorListener",value:function(e){this.removeListener(N,e)}},{key:"addSecurityQuestionsLoadedListener",value:function(e){this.addListener(L,e)}},{key:"removeSecurityQuestionsLoadedListener",value:function(e){this.removeListener(L,e)}},{key:"addVerifyOtpLoadedListener",value:function(e){this.addListener(j,e)}},{key:"removeVerifyOtpLoadedListener",value:function(e){this.removeListener(j,e)}},{key:"addResendCodeLoadedListener",value:function(e){this.addListener(M,e)}},{key:"removeResendCodeLoadedListener",value:function(e){this.removeListener(M,e)}},{key:"addGenerateCodeLoadedListener",value:function(e){this.addListener(B,e)}},{key:"removeGenerateCodeLoadedListener",value:function(e){this.removeListener(B,e)}},{key:"addGetEprotectListener",value:function(e){this.addListener(x,e)}},{key:"removeGetEprotectListener",value:function(e){this.removeListener(x,e)}},{key:"checkUserPermissions",value:function(e,t){return!!this.hasPermissions(e)||(t&&(s.browserHistory.push(t),s.browserHistory.goBack()),!1)}},{key:"getLoggedState",value:function(){return{loggedIn:null!==this.user,timedOutUser:null!==localStorage.getItem("userFirstName"),timedOutUserName:localStorage.getItem("userFirstName")}}},{key:"getPreSellDays",value:function(){return this.user.preSellDays}},{key:"getUser",value:function(){return this.user}},{key:"getUserId",value:function(){return this.user.customerId}},{key:"getAddressBook",value:function(){return this._addressBook}},{key:"getPaymentMethods",value:function(){return this._paymentMethods}},{key:"getBillingAddresses",value:function(){return this._billingAddresses}},{key:"getProfile",value:function(){return this._profile}},{key:"getPreferences",value:function(){return this.user.preferences}},{key:"getPreferenceType",value:function(e){return this.user.preferences[e]}},{key:"getProfileErrors",value:function(){return this._profileErrors}},{key:"getSecurityQuestions",value:function(){return this._securityQuestions}},{key:"isAddressInAddressBook",value:function(e){return void 0!==this._findAddress(e)}},{key:"isAdmin",value:function(){return this.hasPermissions("ADMIN_PERMISSION")}},{key:"isAddressEqual",value:function(e,t){return this._isAddressEqual(e,t)}},{key:"hasPermissions",value:function(e){var t,n=this._globalPermissions?this._globalPermissions:[];return null!==this.user&&(t=this.user.permissions.includes(e)),t||n.includes(e)}},{key:"hasMarchendisePermission",value:function(e){var t;return null!==this.user&&(t=this.user.permissions.includes(e)),t}},{key:"authorPagesCount",value:function(){return this.user.authorAccess}},{key:"hasEaaPermission",value:function(){var e,t,n=[],o=[];if(null!==this.user&&this.user.analyticsAccess){var a=this.user.analyticsAccess.toUpperCase().split(","),r=!0,i=!1,s=void 0;try{for(var l,u=a[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;o.push(c.trim())}}catch(e){i=!0,s=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw s}}e=["CUSTOMER","READING","SITE"];for(var d=0;d<o.length;d++){t=o[d],0<=e.indexOf(t)&&n.push(t)}}return n}},{key:"hasCustomSamplingPermission",value:function(e){var t;return null!==this.user&&(t=this.user.permissions.includes(e)),t}},{key:"hasContributorPageAccessPermission",value:function(e){return null!==this.user.accessList&&this.user.accessList.includes(e)}},{key:"hasSharedAccessPermission",value:function(e){var t;return null!==this.user&&(t=this.user.permissions.includes(e)),t}},{key:"logoutUser",value:function(){this._clearUserData(),localStorage.removeItem("userFirstName"),this.emit(R)}},{key:"onUserAccountCreated",value:function(e){var t=e.data;this.emit(D,t.user)}},{key:"getAuthorProfile",value:function(e){this._authoreDetail=e.data,this.emit(w)}},{key:"loadAuthenticatedEmail",value:function(e){this.emit("email",e)}},{key:"loadAuthenticatedEmailChange",value:function(e){this.emit(h,e)}},{key:"loadAuthenticatedEmailSearch",value:function(e){this.emit(y,e)}},{key:"loadAuthenticatedUser",value:function(e){var t=this,n=null,o=e.data;o.status&&"UNAUTHORIZED"===o.status?this.onUserUnauthorized(o):(o.errors&&null!==o.errors&&(n=o.errors),this.user=o.user,this.user&&localStorage.removeItem("referral"),null!==this.user&&this.user.approvalDate&&(this.user.approvalDate=(0,i.bn_moment)(this.user.approvalDate)),null!==this.user&&this.user.firstName&&localStorage.setItem("userFirstName",this.user.firstName),setTimeout(function(){t.emit(m,n,o)},0))}},{key:"onUserUnauthorized",value:function(e){var t=this;setTimeout(function(){t.emit(I,e.redirectTo)},0)}},{key:"updateVendorStatus",value:function(e){this.user.vendorStatus=e.vendorStatus}},{key:"raiseErrorEvent",value:function(e){this.emit(v,{error:e})}},{key:"onAddressBookLoaded",value:function(e){this._addressBook=e.addressBook,this.emit(S,this._addressBook)}},{key:"onAddressBookAdded",value:function(e){var t=e.address;this._addressBook=e.addressBook,this.emit(_,t)}},{key:"onAddressBookUpdated",value:function(e){var t=e.address;this._addressBook=e.addressBook,this.emit(_,t)}},{key:"onForgotPasswordQuestionLoaded",value:function(e){this.emit(b,e.data)}},{key:"onForgotPasswordAnswerValidated",value:function(e){this.emit(g,e.data)}},{key:"onForgotPasswordTokenCheck",value:function(e){this.emit(E,e.data)}},{key:"onForgotPasswordUpdate",value:function(e){this.emit(P,e.data)}},{key:"onPaymentMethodsLoaded",value:function(e){this._setPaymentMethods(e),this.emit(O)}},{key:"onPaymentMethodsChanged",value:function(e){this._setPaymentMethods(e),this.emit(C)}},{key:"onProfileLoaded",value:function(e){this._setBlankSecurityAnswer(e.profile),this._profile=e.profile,this.emit(k)}},{key:"onVerifyOtp",value:function(e){this.emit(j,e)}},{key:"onResendCode",value:function(e){this.emit(M,e)}},{key:"onGenerateCode",value:function(e){this.emit(B,e)}},{key:"onProfileUpdated",value:function(e){this._setBlankSecurityAnswer(e.profile),this._profile=e.profile,this.emit(A,e)}},{key:"onProfileUpdatedError",value:function(e){this._profileErrors=e.errorMessages,this.emit(N,e)}},{key:"onSecurityQuestionsLoaded",value:function(e){var t=e.questions.map(function(e){return{label:e.SettingValue,value:e.SettingValue}});this._securityQuestions=t,this.emit(L)}},{key:"onSavePreferences",value:function(e){this.user.preferences=e.data}},{key:"_clearUserData",value:function(){this.user=null,this.authorDetail=null,this._addressBook=[],this._billingAddresses=null,this._profile=null,this._securityQuestions=null,this._profileErrors=null,this._authoreDetail=null,this._verifyotpRes=null}},{key:"_setBlankSecurityAnswer",value:function(e){e.secretAnswer||(e.secretAnswer="")}},{key:"_setPaymentMethods",value:function(e){var t=e.paymentMethods,n=[];t.forEach(function(t){n.find(function(e){return e.addressId===t.billingAddress.addressId})||n.push(t.billingAddress)}),this._paymentMethods=t,this._billingAddresses=n}},{key:"_findAddress",value:function(t){var n=this;return this._addressBook?this._addressBook.find(function(e){return void 0!==t.addressId?e.addressId===t.addressId:n._isAddressEqual(e,t)}):null}},{key:"_isAddressEqual",value:function(e,t){return e.firstName.trim()===t.firstName.trim()&&e.lastName.trim()===t.lastName.trim()&&e.address1.trim()===t.address1.trim()&&(void 0===t.address2||void 0!==t.address2&&void 0!==e.address2&&e.address2.trim()===t.address2.trim())&&e.city.trim()===t.city.trim()&&e.state.trim()===t.state.trim()&&e.postalCode.trim()===t.postalCode.trim()&&U(e.phoneNumber)===U(t.phoneNumber)}},{key:"handleActions",value:function(e){switch(e.type){case r.default.AuthenticatedUser.FORGOT_PASSWORD_QUESTION:this.onForgotPasswordQuestionLoaded(e.args);break;case r.default.AuthenticatedUser.FORGOT_PASSWORD_ANSWER_CHECK:this.onForgotPasswordAnswerValidated(e.args);break;case r.default.AuthenticatedUser.FORGOT_PASSWORD_TOKEN_CHECK:this.onForgotPasswordTokenCheck(e.args);break;case r.default.AuthenticatedUser.FORGOT_PASSWORD_UPDATE:this.onForgotPasswordUpdate(e.args);break;case r.default.AuthenticatedUser.USER_ACCOUNT_CREATE:this.onUserAccountCreated(e.args),this.loadAuthenticatedUser(e.args);break;case r.default.AuthenticatedUser.FORGOT_PASSWORD:case r.default.AuthenticatedUser.LOAD_USER:this.loadAuthenticatedUser(e.args);break;case r.default.AuthenticatedUser.LOAD_EMAIL:this.loadAuthenticatedEmail(e.args);break;case r.default.AuthenticatedUser.LOAD_EMAIL_UPDATE:this.loadAuthenticatedEmailChange(e.args);break;case r.default.AuthenticatedUser.LOAD_EMAIL_SEARCH:this.loadAuthenticatedEmailSearch(e.args);break;case r.default.AuthenticatedUser.LOAD_USER_ERROR:this.raiseErrorEvent(e.args);break;case r.default.AuthenticatedUser.LOG_OUT_USER:this.logoutUser();break;case r.default.AuthenticatedUser.UPDATE_VENDOR_STATUS:this.updateVendorStatus(e.args);break;case r.default.AuthenticatedUser.LOAD_ADDRESSBOOK:this.onAddressBookLoaded(e.args);break;case r.default.AuthenticatedUser.ADD_ADDRESS_TO_ADDRESSBOOK:this.onAddressBookAdded(e.args);break;case r.default.AuthenticatedUser.UPDATE_ADDRESS_ADDRESSBOOK:this.onAddressBookUpdated(e.args);break;case r.default.AuthenticatedUser.LOAD_PAYMENT_METHODS:this.onPaymentMethodsLoaded(e.args);break;case r.default.AuthenticatedUser.CHANGE_PAYMENT_METHODS:this.onPaymentMethodsChanged(e.args);break;case r.default.AuthenticatedUser.LOAD_PROFILE:this.onProfileLoaded(e.args);break;case r.default.AuthenticatedUser.LOAD_VERIFY_OTP:this.onVerifyOtp(e.args);break;case r.default.AuthenticatedUser.LOAD_RESEND_CODE:this.onResendCode(e.args);break;case r.default.AuthenticatedUser.LOAD_GENERATE_CODE:this.onGenerateCode(e.args);break;case r.default.AuthenticatedUser.BEGIN_UPDATE_PROFILE:this.emit(T);break;case r.default.AuthenticatedUser.UPDATE_PROFILE:this.onProfileUpdated(e.args);break;case r.default.AuthenticatedUser.UPDATE_PROFILE_ERROR:this.onProfileUpdatedError(e.args);break;case r.default.AuthenticatedUser.LOAD_SECURITY_QUESTIONS:this.onSecurityQuestionsLoaded(e.args);break;case r.default.AuthenticatedUser.SAVE_PREFERENCES:this.onSavePreferences(e.args);break;case r.default.AuthenticatedUser.GET_AUTHOR_PROFILE:this.getAuthorProfile(e.args);break;case r.default.AuthenticatedUser.OBJ_ENV:this.emit(x,e.args.data)}return!0}}])&&c(n.prototype,o),a&&c(n,a),t}());V.dispatchToken=o.default.register(V.handleActions.bind(V));var F=V;t.default=F},45:function(e,z,J){"use strict";(function(r){Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var i=J(44),e=n(J(16)),s=n(J(90)),l=n(J(18)),u=(n(J(4)),t(J(11)),t(J(17)),t(J(146)));function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){a(t,e,n[e])})}return t}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h="vendorInfoLoaded",y="onVendorAccountCreated",v="onTinValidateCompleted",b="publisherInfoLoaded",g="paymentInfoLoaded",E="citizenChanged",P="usTaxpayerTypeChanged",S="individualOrCompanyChanged",_="tinChanged",O="stateOptionsChanged",C="bankCountryChanged",k="accountOwnerTypeChanged",T="paymentErrorsReceived",A="publisherInfoReceived",N="digital1099EnrollmentChanged",L="1099SettingsLoaded",D=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=f(this,p(t).call(this)))._init(),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i.EventEmitter),n=t,(o=[{key:"_init",value:function(){this._1099Settings=null,this._origData=null,this._taxwophone=null,this._snapshot=null,this._vendorNumber=null,this._accountStatus=null,this._businessStatus=null,this._approved=!1,this._citizen=null,this._address=null,this._publisher=null,this._taxInfo=null,this._bankInfo=null,this._usTaxpayerTypeOptions=null,this._usStateOptions=null,this._nonUSStateOptions=null}},{key:"add1099SettingsLoadedListener",value:function(e){this.addListener(L,e)}},{key:"remove1099SettingsLoadedListener",value:function(e){this.removeListener(L,e)}},{key:"addVendorInfoLoadedListener",value:function(e){this.addListener(h,e)}},{key:"addVendorCreatedListener",value:function(e){this.addListener(y,e)}},{key:"removeVendorCreatedListener",value:function(e){this.removeListener(y,e)}},{key:"addTinValidateListener",value:function(e){this.addListener(v,e)}},{key:"removeTinValidateListener",value:function(e){this.removeListener(v,e)}},{key:"removeVendorInfoLoadedListener",value:function(e){this.removeListener(h,e)}},{key:"addPublisherInfoLoadedListener",value:function(e){this.addListener(b,e)}},{key:"removePublisherInfoLoadedListener",value:function(e){this.removeListener(b,e)}},{key:"addPaymentInfoLoadedListener",value:function(e){this.addListener(g,e)}},{key:"removePaymentInfoLoadedListener",value:function(e){this.removeListener(g,e)}},{key:"addCitizenChangedListener",value:function(e){this.addListener(E,e)}},{key:"removeCitizenChangedListener",value:function(e){this.removeListener(E,e)}},{key:"addUSTaxpayerTypeChangedListener",value:function(e){this.addListener(P,e)}},{key:"removeUSTaxpayerTypeChangedListener",value:function(e){this.removeListener(P,e)}},{key:"addIndividualOrCompanyChangedListener",value:function(e){this.addListener(S,e)}},{key:"removeIndividualOrCompanyChangedListener",value:function(e){this.removeListener(S,e)}},{key:"addTINChangedListener",value:function(e){this.addListener(_,e)}},{key:"removeTINChangedListener",value:function(e){this.removeListener(_,e)}},{key:"addStateOptionsChangedListener",value:function(e){this.addListener(O,e)}},{key:"removeStateOptionsChangedListener",value:function(e){this.removeListener(O,e)}},{key:"addBankCountryListener",value:function(e){this.addListener(C,e)}},{key:"removeBankCountryListener",value:function(e){this.removeListener(C,e)}},{key:"addAccountOwnerTypeListener",value:function(e){this.addListener(k,e)}},{key:"removeAccountOwnerTypeListener",value:function(e){this.removeListener(k,e)}},{key:"addPaymentErrorsReceivedListener",value:function(e){this.addListener(T,e)}},{key:"removePaymentErrorsReceivedListener",value:function(e){this.removeListener(T,e)}},{key:"addPublisherInfoReceivedListener",value:function(e){this.addListener(A,e)}},{key:"removePublisherInfoReceivedListener",value:function(e){this.removeListener(A,e)}},{key:"addUpdateDigital1099Enrollment",value:function(e){this.addListener(N,e)}},{key:"removeUpdateDigital1099Enrollment",value:function(e){this.removeListener(N,e)}},{key:"onClearVendorData",value:function(){this._init()}},{key:"toDisplayAccountStatus",value:function(e){switch(e){case u.AccountStatus.CANCELED:return"Cancelled";case u.AccountStatus.REJECTED:return"Rejected";case u.AccountStatus.IN_REVIEW:return"In Review";case u.AccountStatus.ACTIVE:return"Active";case u.AccountStatus.PENDING:return"Pending";default:return"Incomplete"}}},{key:"getVendorAccountStatus",value:function(){return"empty"}},{key:"getAdditionalTaxInfoStatus",value:function(){return{expiryDate:this._taxInfo.w8ExpiryDate,exemptionRate:this._taxInfo.w8ExemptionRate,exemptionRateSet:this._taxInfo.w8ExemptionRateSet,validFrom:this._taxInfo.w8ExemptionValidFrom,verified:this._taxInfo.w8Verified}}},{key:"getW8Message",value:function(){return{verified:this._taxInfo.w8Verified,mismatch:this._taxInfo.W8Mismatch}}},{key:"getCountryFormat",value:function(e){var t=this.getCountryOption(e);return t&&t.abbr?this.getBankCountryFormat(t.abbr):this.getBankCountryFormat(e)}},{key:"getBankCountryFormat",value:function(e){return e&&H[e]?H[e]:H.DEFAULT}},{key:"getCountryOption",value:function(t){return U.find(function(e){return t&&e.value===t.toString()})}},{key:"isUSTaxpayerTypeForOther",value:function(e){return!W(e=e||this._taxInfo.usTaxpayerType)&&"Other"===e}},{key:"isUSTaxpayerTypeForIndividual",value:function(e){return!W(e=e||this._taxInfo.usTaxpayerType)&&"SoleProprietor"===e}},{key:"isUSTaxpayerTypeForCompany",value:function(e){return!W(e=e||this._taxInfo.usTaxpayerType)&&(!this.isUSTaxpayerTypeForIndividual(e)&&!this.isUSTaxpayerTypeForOther(e))}},{key:"hasPublisherDataChanged",value:function(){var e=this.gatherPublisherData();return!(0,s.default)(this._snapshot.publisherData,e,{strict:!0})}},{key:"gatherPublisherData",value:function(){return{vendorNumber:this._vendorNumber,accountType:"PubIt",publisherName:this._publisher.name,publisherWebSite:this._publisher.website}}},{key:"hasTaxInfoChanged",value:function(){var e=c({},this.gatherTaxData(),this.gatherAddressData());return!(0,s.default)(this._snapshot.taxInfo,e,{strict:!0})}},{key:"hasTaxwoPhoneChanged",value:function(){var e=c({},this.gatherTaxData(),this.gatherAddressWoPhone());return!(0,s.default)(this._taxwophone,e,{strict:!0})}},{key:"hasBankInfoChanged",value:function(){var e=this.gatherBankData();return!(0,s.default)(this._snapshot.bankInfo,e,{strict:!0})}},{key:"checkStatusChange",value:function(e){this._snapshot&&this._snapshot.status===u.AccountStatus.NEW&&e.publisher.status!==u.AccountStatus.NEW&&this.emit(y,e)}},{key:"validateTin",value:function(e){this.emit(v,e)}},{key:"gatherPaymentData",value:function(){var e=[];return this.hasTaxInfoChanged()&&e.push("TaxInfo"),this.hasBankInfoChanged()&&e.push("BankInfo"),{address:this.gatherAddressData(),payment:c({changedSections:{dataSection:e},isSubmitted:"true"},this.gatherTaxData(),this.gatherBankData())}}},{key:"gatherTaxData",value:function(){var e={};return this.isUSCitizen?(e.taxPayerTypeId=this._taxInfo.usTaxpayerType,this.isUSTaxpayerTypeForIndividual()?(e.idType="SSN",e.govtIdNumber=K(this._taxInfo.ssn),e.taxFirstName=this._taxInfo.firstName,e.taxLastName=this._taxInfo.lastName):this.isUSTaxpayerTypeForCompany()?(e.idType="EIN",e.govtIdNumber=K(this._taxInfo.ein),e.taxCompanyName=this._taxInfo.companyName,e.payeeCode=this._taxInfo.payeeCode,e.fatcaCode=this._taxInfo.fatcaCode):this.isUSTaxpayerTypeForOther()&&(e.taxPayerTypeText=this._taxInfo.taxpayerEntity,e.payeeCode=this._taxInfo.payeeCode,e.fatcaCode=this._taxInfo.fatcaCode,"SSN"===this._taxInfo.taxpayerIdType?(e.idType="SSN",e.govtIdNumber=K(this._taxInfo.ssn),e.taxFirstName=this._taxInfo.firstName,e.taxLastName=this._taxInfo.lastName):"EIN"===this._taxInfo.taxpayerIdType&&(e.idType="EIN",e.govtIdNumber=K(this._taxInfo.ein),e.taxCompanyName=this._taxInfo.companyName)),e.vats={vat:[]}):this.isNonUSCitizen&&(e.idType="None",e.govtIdNumber=K(this._taxInfo.tin),W(this._taxInfo.tin)?e.taxPayerTypeId="None":e.taxPayerTypeId=W(this._taxInfo.nonUSTaxpayerType)?"None":this._taxInfo.nonUSTaxpayerType,e.vats={vat:W(this._taxInfo.vat)?[]:[K(this._taxInfo.vat)]},"individual"===this.individualOrCompany?(e.taxFirstName=this._taxInfo.firstName,e.taxLastName=this._taxInfo.lastName):"company"===this.individualOrCompany&&(e.taxCompanyName=this._taxInfo.companyName)),e}},{key:"gatherAddressData",value:function(){var e={addressType:"Payment"};return e.addressLine1=this._address.addressLine1,e.addressLine2=this._address.addressLine2,e.city=this._address.city,e.zip=this._address.zip,e.phone=this._address.phone,this.isUSCitizen?(e.country=this._address.usCountry,e.state=this._address.usState):this.isNonUSCitizen&&(e.country=this._address.nonUSCountry,e.state=this._address.nonUSState),e}},{key:"gatherAddressWoPhone",value:function(){var e={addressType:"Payment"};return e.addressLine1=this._address.addressLine1,e.addressLine2=this._address.addressLine2,e.city=this._address.city,e.zip=this._address.zip,this.isUSCitizen?(e.country=this._address.usCountry,e.state=this._address.usState):this.isNonUSCitizen&&(e.country=this._address.nonUSCountry,e.state=this._address.nonUSState),e}},{key:"gatherBankData",value:function(){var e={};return e.bankName=this._bankInfo.bankName,e.accountNumber=this._bankInfo.accountNumber,this.isUSCitizen?(e.accountType=this._bankInfo.accountType,e.routingNumber=K(this._bankInfo.routingNumber),e.iban=null,e.swift=null,e.bankCountry=null):this.isNonUSCitizen&&"US"===this.bankCountry?(e.accountType=this._bankInfo.accountType,e.routingNumber=K(this._bankInfo.routingNumber),e.iban=null,e.swift=null,e.countryBank=this.bankCountry):this.isNonUSCitizen&&(e.accountType="None",e.routingNumber=null,e.iban=K(this._bankInfo.iban),e.swift=K(this._bankInfo.swift),e.countryBank=this._bankInfo.country),"individual"===this._bankInfo.accountOwnerType?(e.companyName=null,e.firstName=this._bankInfo.firstName,e.lastName=this._bankInfo.lastName):"company"===this._bankInfo.accountOwnerType&&(e.companyName=this._bankInfo.companyName,e.firstName=null,e.lastName=null),e}},{key:"addMessagesForMaskedFieldsInTaxInfo",value:function(e,t){var n=/^X+$/;"840"===e.address.country?"SoleProprietor"===e.payment.taxPayerTypeId||"Other"===e.payment.taxPayerTypeId&&"SSN"===e.payment.idType?n.test(e.payment.govtIdNumber)&&t.push("You must re-enter your SSN because other Taxpayer Information has been changed."):n.test(e.payment.govtIdNumber)&&t.push("You must re-enter your EIN because other Taxpayer Information has been changed."):!q(e.payment.govtIdNumber)&&n.test(e.payment.govtIdNumber)&&t.push("You must re-enter your TIN because other Taxpayer Information has been changed.")}},{key:"addMessagesForMaskedFieldsInBankInfo",value:function(e,t){e.payment.accountNumber===this.originalAccountNumber&&t.push("You must re-enter your Account Number because other Bank Information has been changed."),"840"!==e.address.country&&e.payment.iban===this.originalIBAN&&("36"===e.address.country||"554"===e.address.country?t.push("You must re-enter your BSB number because other bank information has been changed."):"124"===e.address.country?t.push("You must re-enter your routing number because other bank information has been changed."):t.push("You must re-enter your IBAN because other Bank Information has been changed."))}},{key:"handleActions",value:function(e){switch(e.type){case l.default.VendorAccount.LOAD_1099_SETTINGS:this.load1099Settings(e.args);break;case l.default.VendorAccount.LOAD_VENDOR_INFO:this._origData=e.args.vendorInfo,this.loadVendorInfo(e.args.vendorInfo,!0,!0);break;case l.default.VendorAccount.UPDATE_PUBLISHER_INFO:this._origData=e.args.vendorInfo,this.checkStatusChange(e.args.vendorInfo),e.args.forBaB?this.loadVendorInfo(e.args.vendorInfo,!0,!0):this.loadVendorInfo(e.args.vendorInfo,!0,!1);break;case l.default.VendorAccount.VALIDATE_TIN:this.validateTin(e.args);break;case l.default.VendorAccount.UPDATE_PAYMENT_INFO:this._origData=e.args.vendorInfo,this.checkStatusChange(e.args.vendorInfo),e.args.forBaB?this.loadVendorInfo(e.args.vendorInfo,!0,!0):this.loadVendorInfo(e.args.vendorInfo,!1,!0);break;case l.default.VendorAccount.UPDATE_PAYMENT_ERRORS:this.emitPaymentErrors(e.args);break;case l.default.VendorAccount.RESET_VENDOR_INFO:this.resetVendorInfo(e.args);break;case l.default.VendorAccount.CREATE_PUBLISHER_INFO:this.publisherInfo(e.args);break;case l.default.VendorAccount.LOAD_STATES:this.loadStates(e.args);break;case l.default.VendorAccount.SET_PUBLISHER_NAME:this.setPublisherName(e.args);break;case l.default.VendorAccount.SET_PUBLISHER_WEBSITE:this.setPublisherWebsite(e.args);break;case l.default.VendorAccount.SET_CITIZEN:this.setCitizen(e.args);break;case l.default.VendorAccount.SET_TAXPAYER_TYPE:this.setTaxpayerType(e.args);break;case l.default.VendorAccount.SET_WITHHOLDING:this.setWithholding(e.args);break;case l.default.VendorAccount.SET_FATCA:this.setFatca(e.args);break;case l.default.VendorAccount.SET_INDIVIDUAL_OR_COMPANY:this.setIndividualOrCompany(e.args);break;case l.default.VendorAccount.SET_TAXPAYER_ENTITY:this.setTaxpayerEntity(e.args);break;case l.default.VendorAccount.SET_TAXPAYER_ID_TYPE:this.setTaxpayerIdType(e.args);break;case l.default.VendorAccount.SET_SSN:this.setSSN(e.args);break;case l.default.VendorAccount.SET_TAX_FIRST_NAME:this.setTaxFirstName(e.args);break;case l.default.VendorAccount.SET_TAX_LAST_NAME:this.setTaxLastName(e.args);break;case l.default.VendorAccount.SET_EIN:this.setEIN(e.args);break;case l.default.VendorAccount.SET_TAX_COMPANY_NAME:this.setTaxCompanyName(e.args);break;case l.default.VendorAccount.SET_TIN:this.setTIN(e.args);break;case l.default.VendorAccount.SET_VAT:this.setVAT(e.args);break;case l.default.VendorAccount.SET_ADDRESS_LINE_1:this.setAddressLine1(e.args);break;case l.default.VendorAccount.SET_ADDRESS_LINE_2:this.setAddressLine2(e.args);break;case l.default.VendorAccount.SET_CITY:this.setCity(e.args);break;case l.default.VendorAccount.SET_STATE:this.setState(e.args);break;case l.default.VendorAccount.SET_ZIP:this.setZip(e.args);break;case l.default.VendorAccount.SET_TAX_COUNTRY:this.setTaxCountry(e.args);break;case l.default.VendorAccount.SET_PHONE:this.setPhone(e.args);break;case l.default.VendorAccount.SET_ACCOUNT_TYPE:this.setAccountType(e.args);break;case l.default.VendorAccount.SET_BANK_COUNTRY:this.setBankCountry(e.args);break;case l.default.VendorAccount.SET_BANK_NAME:this.setBankName(e.args);break;case l.default.VendorAccount.SET_ROUTING_NUMBER:this.setRoutingNumber(e.args);break;case l.default.VendorAccount.SET_ACCOUNT_NUMBER:this.setAccountNumber(e.args);break;case l.default.VendorAccount.SET_IBAN:this.setIBAN(e.args);break;case l.default.VendorAccount.SET_SWIFT:this.setSWIFT(e.args);break;case l.default.VendorAccount.SET_ACCOUNT_OWNER_TYPE:this.setAccountOwnerType(e.args);break;case l.default.VendorAccount.SET_ACCOUNT_OWNER_FIRST_NAME:this.setAccountOwnerFirstName(e.args);break;case l.default.VendorAccount.SET_ACCOUNT_OWNER_LAST_NAME:this.setAccountOwnerLastName(e.args);break;case l.default.VendorAccount.SET_ACCOUNT_OWNER_COMPANY_NAME:this.setAccountOwnerCompanyName(e.args);break;case l.default.VendorAccount.UPDATE_DIGITAL_1099_ENROLLMENT:this.setDigital1099Enrollment(e.args);break;case l.default.AuthenticatedUser.LOG_OUT_USER:this.onClearVendorData()}}},{key:"loadVendorInfo",value:function(e,t,n){if(this._vendorNumber=e.publisher.vendorNumber,this._accountStatus=e.publisher.status,this._businessStatus=e.publisher.businessStatus,this._approved="true"===e.publisher.hasBeenApproved,t&&(this._publisher={name:e.publisher.publisherName?e.publisher.publisherName.trim():e.publisher.publisherName,website:e.publisher.publisherWebSite}),n){if(U||(U=V(e.tax_countries)),G||(G=Y(e.bank_countries)),this._citizen=e.payment?"None"==e.payment.idType?"no":"yes":null,this._address={},e.address&&(this._address.addressLine1=e.address.addressLine1,this._address.addressLine2=e.address.addressLine2,this._address.city=e.address.city,this._address.zip=e.address.zip,this._address.phone=e.address.phone,this.isUSCitizen?(this._address.usCountry=e.address.country,this._address.usState=e.address.state):this.isNonUSCitizen&&(this._address.nonUSCountry=e.address.country,this._address.nonUSState=e.address.state)),this._usTaxpayerTypeOptions||(this._usTaxpayerTypeOptions=e.usTaxpayerTypes),this._taxInfo={},e.payment){var o=e.payment.taxPayerTypeId;this.isUSCitizen?("None"===o&&(o=null),this._taxInfo.usTaxpayerType=o,this._taxInfo.isDigital1099="true"===e.payment.isDigital1099,this._taxInfo.email1099=e.payment.email1099,this._taxInfo.w8ExpiryDate=e.payment.w8ExpiryDate?r(e.payment.w8ExpiryDate,["MM/DD/YYYY","MM.DD.YYYY"],!0).format("MMMM D, YYYY"):"Pending",this._taxInfo.w8ExemptionRateSet=!!e.payment.exemptionRate,this._taxInfo.w8ExemptionRate=e.payment.exemptionRate?e.payment.exemptionRate+"%":"On Payment Hold",this._taxInfo.w8ExemptionValidFrom=e.payment.exemptionValidFrom?r(e.payment.exemptionValidFrom,["MM/DD/YYYY","MM.DD.YYYY"],!0).format("MMMM D, YYYY"):"Pending",this._taxInfo.w8Verified="true"===e.payment.isW8Verified?"Yes":"No",this._taxInfo.W8Mismatch="true"===e.payment.isW8Mismatch?"Yes":"No",this._taxInfo.payeeCode=e.payment.payeeCode,this._taxInfo.fatcaCode=e.payment.fatcaCode,this.isUSTaxpayerTypeForIndividual(o)?(this._taxInfo.ssn=e.payment.govtIdNumber,this._taxInfo.originalSSN=e.payment.govtIdNumber,this._taxInfo.firstName=e.payment.taxFirstName,this._taxInfo.lastName=e.payment.taxLastName):this.isUSTaxpayerTypeForCompany(o)?(this._taxInfo.ein=e.payment.govtIdNumber,this._taxInfo.originalEIN=e.payment.govtIdNumber,this._taxInfo.companyName=e.payment.taxCompanyName):this.isUSTaxpayerTypeForOther(o)&&(this._taxInfo.taxpayerIdType=e.payment.idType,this._taxInfo.taxpayerEntity=e.payment.taxPayerTypeText,"SSN"===e.payment.idType?(this._taxInfo.ssn=e.payment.govtIdNumber,this._taxInfo.originalSSN=e.payment.govtIdNumber,this._taxInfo.firstName=e.payment.taxFirstName,this._taxInfo.lastName=e.payment.taxLastName):"EIN"===e.payment.idType&&(this._taxInfo.ein=e.payment.govtIdNumber,this._taxInfo.originalEIN=e.payment.govtIdNumber,this._taxInfo.companyName=e.payment.taxCompanyName))):this.isNonUSCitizen&&(this._taxInfo.tin=e.payment.govtIdNumber,this._taxInfo.originalTIN=e.payment.govtIdNumber,this._taxInfo.w8ExpiryDate=e.payment.w8ExpiryDate?r(e.payment.w8ExpiryDate,["MM/DD/YYYY","MM.DD.YYYY"],!0).format("D MMMM YYYY"):"Pending",this._taxInfo.w8ExemptionRate=e.payment.exemptionRate?e.payment.exemptionRate+"%":"Pending",this._taxInfo.w8ExemptionRateSet=!!e.payment.exemptionRate,this._taxInfo.w8ExemptionValidFrom=e.payment.exemptionValidFrom?r(e.payment.exemptionValidFrom,["MM/DD/YYYY","MM.DD.YYYY"],!0).format("D MMMM YYYY"):"Pending",this._taxInfo.w8Verified="true"===e.payment.isW8Verified?"Yes":"No",this._taxInfo.W8Mismatch="true"===e.payment.isW8Mismatch?"Yes":"No",W(this._taxInfo.tin)||(this._taxInfo.nonUSTaxpayerType=o),this._taxInfo.vat=null,e.payment.vats&&e.payment.vats.vat&&0<e.payment.vats.vat.length&&(this._taxInfo.vat=e.payment.vats.vat[0]),W(e.payment.taxCompanyName)?W(e.payment.taxLastName)||(this._taxInfo.individualOrCompany="individual",this._taxInfo.firstName=e.payment.taxFirstName,this._taxInfo.lastName=e.payment.taxLastName):(this._taxInfo.individualOrCompany="company",this._taxInfo.companyName=e.payment.taxCompanyName))}this._bankInfo={},e.payment&&(this._bankInfo.bankName=e.payment.bankName,this._bankInfo.accountNumber=e.payment.accountNumber,this._bankInfo.originalAccountNumber=e.payment.accountNumber,this._bankInfo.originalBankName=e.payment.bankName,this._bankInfo.country=e.payment.countryBank,this.isUSCitizen||"US"===this._bankInfo.country?(this._bankInfo.accountType=W(e.payment.accountType)?"Checking":e.payment.accountType,this._bankInfo.routingNumber=e.payment.routingNumber):this.isNonUSCitizen&&(this._bankInfo.iban=e.payment.iban,this._bankInfo.originalIBAN=e.payment.iban,this._bankInfo.swift=e.payment.swift),W(e.payment.companyName)?W(e.payment.lastName)||(this._bankInfo.accountOwnerType="individual",this._bankInfo.firstName=e.payment.firstName,this._bankInfo.lastName=e.payment.lastName):(this._bankInfo.accountOwnerType="company",this._bankInfo.companyName=e.payment.companyName)),this.isUSCitizen?this._usStateOptions=e.states:this.isNonUSCitizen&&(this._nonUSStateOptions=e.states),this._snapshot=this.takeSnapshot(),this._snapshot.status=this._accountStatus,W(this._bankInfo.accountType)&&(this._bankInfo.accountType="Checking"),W(this._bankInfo.accountOwnerType)&&(this._bankInfo.accountOwnerType="individual")}t&&n?this.emit(h):t?this.emit(b):n&&this.emit(g,e.payment)}},{key:"emitPaymentErrors",value:function(e){this.emit(T,e.errors,e)}},{key:"publisherInfo",value:function(e){this.emit(A,e)}},{key:"resetVendorInfo",value:function(e){this._origData&&(e.paymentOnly?this.loadVendorInfo(this._origData,!1,!0):this.loadVendorInfo(this._origData,!0,!0))}},{key:"takeSnapshot",value:function(){return this._taxwophone=c({},this.gatherTaxData(),this.gatherAddressWoPhone()),{publisherData:this.gatherPublisherData(),taxInfo:c({},this.gatherTaxData(),this.gatherAddressData()),bankInfo:this.gatherBankData()}}},{key:"load1099Settings",value:function(e){var t=e.settings.setting;this._1099Settings={end:t[1].SettingValue,start:t[0].SettingValue},this.emit(L)}},{key:"loadStates",value:function(e){this.isUSCitizen?(this._usStateOptions=e.states,this.emit(O)):this.isNonUSCitizen&&(this._nonUSStateOptions=e.states,this.emit(O))}},{key:"setPublisherName",value:function(e){this._publisher.name=e.publisherName}},{key:"setPublisherWebsite",value:function(e){this._publisher.website=e.publisherWebsite}},{key:"setCitizen",value:function(e){this._citizen=e.citizen,"yes"===this._citizen&&(this._address.usCountry="840"),this.emit(E,{citizen:this._citizen})}},{key:"setTaxpayerType",value:function(e){this.isUSCitizen?(this._taxInfo.usTaxpayerType=e.taxpayerType,this.emit(P)):this.isNonUSCitizen&&(this._taxInfo.nonUSTaxpayerType=e.taxpayerType,this.emit(P))}},{key:"setWithholding",value:function(e){this._taxInfo.payeeCode=e.payeeCode}},{key:"setFatca",value:function(e){this._taxInfo.fatcaCode=e.fatcaCode}},{key:"setIndividualOrCompany",value:function(e){this._taxInfo.individualOrCompany=e.individualOrCompany,this.emit(S)}},{key:"setTaxpayerEntity",value:function(e){this._taxInfo.taxpayerEntity=e.taxpayerEntity}},{key:"setTaxpayerIdType",value:function(e){this._taxInfo.taxpayerIdType=e.taxpayerIdType,this.emit(P)}},{key:"setSSN",value:function(e){this._taxInfo.ssn=e.ssn}},{key:"setTaxFirstName",value:function(e){this._taxInfo.firstName=e.taxFirstName}},{key:"setTaxLastName",value:function(e){this._taxInfo.lastName=e.taxLastName}},{key:"setEIN",value:function(e){this._taxInfo.ein=e.ein}},{key:"setTaxCompanyName",value:function(e){this._taxInfo.companyName=e.taxCompanyName}},{key:"setTIN",value:function(e){this._taxInfo.tin=e.tin,this.emit(_)}},{key:"setVAT",value:function(e){this._taxInfo.vat=e.vat}},{key:"setAddressLine1",value:function(e){this._address.addressLine1=e.addressLine1}},{key:"setAddressLine2",value:function(e){this._address.addressLine2=e.addressLine2}},{key:"setCity",value:function(e){this._address.city=e.city}},{key:"setState",value:function(e){this.isUSCitizen?this._address.usState=e.state:this.isNonUSCitizen&&(this._address.nonUSState=e.state)}},{key:"setZip",value:function(e){this._address.zip=e.zip}},{key:"setTaxCountry",value:function(e){this.isUSCitizen?(this._address.usCountry=e.taxCountry,this._usStateOptions=[],this._address.usState=null,this.emit(O)):this.isNonUSCitizen&&(this._address.nonUSCountry=e.taxCountry,this._nonUSStateOptions=[],this._address.nonUSState=null,this.emit(O))}},{key:"setPhone",value:function(e){this._address.phone=e.phone}},{key:"setAccountType",value:function(e){this._bankInfo.accountType=e.accountType}},{key:"setBankCountry",value:function(e){this._bankInfo.country=e.bankCountry,this.emit(C)}},{key:"setBankName",value:function(e){this._bankInfo.bankName=e.bankName}},{key:"setRoutingNumber",value:function(e){this._bankInfo.routingNumber=e.routingNumber}},{key:"setAccountNumber",value:function(e){this._bankInfo.accountNumber=e.accountNumber}},{key:"setIBAN",value:function(e){this._bankInfo.iban=e.iban}},{key:"setSWIFT",value:function(e){this._bankInfo.swift=e.swift}},{key:"setAccountOwnerType",value:function(e){this._bankInfo.accountOwnerType=e.accountOwnerType,this.emit(k)}},{key:"setAccountOwnerFirstName",value:function(e){this._bankInfo.firstName=e.accountOwnerFirstName}},{key:"setAccountOwnerLastName",value:function(e){this._bankInfo.lastName=e.accountOwnerLastName}},{key:"setAccountOwnerCompanyName",value:function(e){this._bankInfo.companyName=e.accountOwnerCompanyName}},{key:"setDigital1099Enrollment",value:function(e){this._taxInfo.isDigital1099=e.isDigital1099,this.emit(N,e.isDigital1099)}},{key:"loaded",get:function(){return!!this._publisher}},{key:"vendorNumber",get:function(){return this._vendorNumber}},{key:"vendorFormDetail",get:function(){return this._origData}},{key:"accountStatus",get:function(){return this._accountStatus}},{key:"displayAccountStatus",get:function(){return this.toDisplayAccountStatus(this.accountStatus)}},{key:"businessStatus",get:function(){return this._businessStatus}},{key:"approved",get:function(){return this._approved}},{key:"publisherName",get:function(){return this._publisher.name}},{key:"publisherWebSite",get:function(){return this._publisher.website}},{key:"citizen",get:function(){return this._citizen}},{key:"isUSCitizen",get:function(){return"yes"===this._citizen}},{key:"isNonUSCitizen",get:function(){return"no"===this._citizen}},{key:"isAdditionalTaxInfoVerified",get:function(){return"Yes"===this._taxInfo.w8Verified}},{key:"isDigital1099",get:function(){return this._taxInfo.isDigital1099}},{key:"taxpayerTypeOptions",get:function(){return this.isUSCitizen?this._usTaxpayerTypeOptions:this.isNonUSCitizen?w:[]}},{key:"taxpayerType",get:function(){return this.isUSCitizen?this._taxInfo.usTaxpayerType:this.isNonUSCitizen?this._taxInfo.nonUSTaxpayerType:null}},{key:"withholdingOptions",get:function(){return M}},{key:"fatcaOptions",get:function(){return B}},{key:"withholding",get:function(){return this.isUSCitizen&&"individual"!==this.individualOrCompany?this._taxInfo.payeeCode:null}},{key:"fatca",get:function(){return this.isUSCitizen&&"individual"!==this.individualOrCompany?this._taxInfo.fatcaCode:null}},{key:"individualOrCompanyOptions",get:function(){return R}},{key:"individualOrCompany",get:function(){return this._taxInfo.individualOrCompany}},{key:"taxpayerEntity",get:function(){return this._taxInfo.taxpayerEntity}},{key:"taxpayerIdTypeOptions",get:function(){return j}},{key:"taxpayerIdType",get:function(){return this._taxInfo.taxpayerIdType}},{key:"ssn",get:function(){return this._taxInfo.ssn}},{key:"taxFirstName",get:function(){return this._taxInfo.firstName}},{key:"taxLastName",get:function(){return this._taxInfo.lastName}},{key:"ein",get:function(){return this._taxInfo.ein}},{key:"taxCompanyName",get:function(){return this._taxInfo.companyName}},{key:"tin",get:function(){return this._taxInfo.tin}},{key:"vat",get:function(){return this._taxInfo.vat}},{key:"addressLine1",get:function(){return this._address.addressLine1}},{key:"addressLine2",get:function(){return this._address.addressLine2}},{key:"city",get:function(){return this._address.city}},{key:"digital1099Email",get:function(){return this._taxInfo.email1099}},{key:"digital1099Settings",get:function(){return this._1099Settings}},{key:"stateOptions",get:function(){return this.isUSCitizen?this._usStateOptions||[]:this.isNonUSCitizen&&this._nonUSStateOptions||[]}},{key:"state",get:function(){return this.isUSCitizen?this._address.usState:this.isNonUSCitizen?this._address.nonUSState:null}},{key:"statusMessage",get:function(){if(this.businessStatus===u.BusinessStatus.ON_HOLD)return{message:self.topMessage="No changes can be made because your account has been placed On Hold.",className:"yellow"};if(this.businessStatus===u.BusinessStatus.TERMINATED)return{message:self.topMessage="No changes can be made because your account has been terminated.",className:"red"};if(this.accountStatus===u.AccountStatus.PENDING)return{message:self.topMessage="No changes can be made while your vendor account status is Pending.",className:"yellow"};if(this.accountStatus===u.AccountStatus.REJECTED)return{message:self.topMessage="No changes can be made because your vendor account status is Rejected.",className:"red"};if(this.accountStatus!==u.AccountStatus.IN_REVIEW)return this.accountStatus===u.AccountStatus.CANCELED?{message:self.topMessage="No changes can be made because your account has been canceled.",className:"red"}:null;var e=this._origData.payment.w8TurnaroundDays;return"Not Submitted"==this._origData.payment.wFileStatus?{message:self.topMessage="We were unable to approve your vendor account with the information you provided. Please upload a Form W-8/W-9 to resume the review process. Please allow up to "+e+" business days for processing.",className:"yellow"}:{message:self.topMessage="Your vendor account is in review. Please allow up to "+e+" business days for processing.",className:"yellow"}}},{key:"zip",get:function(){return this._address.zip}},{key:"taxCountryOptions",get:function(){return this.isUSCitizen?x:this.isNonUSCitizen?U:[]}},{key:"taxCountry",get:function(){return this.isUSCitizen?this._address.usCountry:this.isNonUSCitizen?this._address.nonUSCountry:null}},{key:"phone",get:function(){return this._address.phone}},{key:"accountTypeOptions",get:function(){return F}},{key:"accountType",get:function(){return this._bankInfo.accountType}},{key:"bankCountryOptions",get:function(){return this.isNonUSCitizen?G:null}},{key:"bankCountryFormats",get:function(){return this.isNonUSCitizen?H:null}},{key:"bankCountry",get:function(){return this._bankInfo.country}},{key:"currency",get:function(){var t=this,e=G.find(function(e){return e.value===t.bankCountry});return e?e.currency:""}},{key:"bankName",get:function(){return this._bankInfo.bankName}},{key:"routingNumber",get:function(){return this._bankInfo.routingNumber}},{key:"accountNumber",get:function(){return this._bankInfo.accountNumber}},{key:"iban",get:function(){return this._bankInfo.iban}},{key:"swift",get:function(){return this._bankInfo.swift}},{key:"accountOwnerType",get:function(){return this._bankInfo.accountOwnerType}},{key:"accountOwnerFirstName",get:function(){return this._bankInfo.firstName}},{key:"accountOwnerLastName",get:function(){return this._bankInfo.lastName}},{key:"accountOwnerCompanyName",get:function(){return this._bankInfo.companyName}},{key:"originalSSN",get:function(){return this._taxInfo.originalSSN}},{key:"originalEIN",get:function(){return this._taxInfo.originalEIN}},{key:"originalTIN",get:function(){return this._taxInfo.originalTIN}},{key:"originalBankName",get:function(){return this._bankInfo.originalBankName}},{key:"originalAccountNumber",get:function(){return this._bankInfo.originalAccountNumber}},{key:"originalIBAN",get:function(){return this._bankInfo.originalIBAN}}])&&d(n.prototype,o),a&&d(n,a),t}());D.dispatchToken=e.default.register(D.handleActions.bind(D));var I=D;z.default=I;var R=[{value:"individual",label:"Individual"},{value:"company",label:"Company"}],w=[{value:"01",label:"Individual"},{value:"02",label:"Company"},{value:"03",label:"Partnership"},{value:"06",label:"Government"},{value:"29",label:"International organization"},{value:"07",label:"Tax exempt organization"},{value:"08",label:"Private foundation"},{value:"10",label:"Estate"},{value:"21",label:"Disregarded entity"},{value:"22",label:"Simple trust"},{value:"23",label:"Grantor trust"},{value:"24",label:"Complex trust"},{value:"25",label:"Central bank of issue"}],j=[{value:"SSN",label:"SSN"},{value:"EIN",label:"EIN"}],M=[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"},{value:"13",label:"13"}],B=[{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"E",label:"E"},{value:"F",label:"F"},{value:"G",label:"G"},{value:"H",label:"H"},{value:"I",label:"I"},{value:"J",label:"J"},{value:"K",label:"K"},{value:"L",label:"L"},{value:"M",label:"M"}],x=[{value:"840",label:"United States"},{value:"36",label:"Australia"},{value:"56",label:"Belgium"},{value:"124",label:"Canada"},{value:"250",label:"France"},{value:"276",label:"Germany"},{value:"372",label:"Ireland"},{value:"380",label:"Italy"},{value:"528",label:"Netherlands"},{value:"554",label:"New Zealand"},{value:"724",label:"Spain"},{value:"826",label:"United Kingdom"}],U=null,V=function(e){return e.sort(function(e,t){return e.label>t.label?1:t.label>e.label?-1:0})},F=[{value:"Checking",label:"Checking"},{value:"Savings",label:"Savings"}],G=null,Y=function(e){return e.sort(function(e,t){return e.label>t.label?1:t.label>e.label?-1:0})},H={AU:{tin:{label:"TIN / TFN",length:9},vat:{label:"VAT Registration Number / ABN",length:11},currency:{usdNote:!0},iban:{label:"IBAN / BSB",length:6},swift:{label:"SWIFT",length:11,validation:""}},CA:{tin:{label:"TIN",length:9},vat:{label:"VAT Registration Number / HST Number",length:15},accountNumber:{label:"Account Number",length:16},currency:{usdNote:!0},iban:{label:"Routing Number",length:9},swift:{label:"SWIFT",length:11}},IE:{tin:{label:"TIN / PPS No.",length:9},vat:{label:"VAT Registration Number",length:20},currency:{usdNote:!0},accountNumber:{label:"Account Number",length:14},iban:{label:"IBAN",length:22},swift:{label:"SWIFT",length:11}},NZ:{tin:{label:"TIN / IRD",length:9},vat:{label:"VAT Registration Number / NZ Business Number",length:13},accountNumber:{label:"Account Number",length:16},currency:{usdNote:!0},iban:{label:"BSB",length:6},swift:{label:"SWIFT",length:11}},DEFAULT:{tin:{label:"TIN",length:20},vat:{label:"VAT Registration Number",length:20},currency:{usdNote:!1},iban:{label:"IBAN",length:100},swift:{label:"SWIFT",length:11}}};function W(e){return!e||""===e}function K(e){return e?e.replace(/-|\s/g,""):null}function q(e){return!e||0===e.length}}).call(this,J(117))},46:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=a(n(1)),s=a(n(6)),l=a(n(12)),u=o(n(1025)),c=o(n(60)),d=a(n(38));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=m(a).call(this,e))||"object"!==f(o)&&"function"!=typeof o?y(n):o).state={suggestedSearches:[],updateValue:""},t.onProjectSearchesLoaded=t.onProjectSearchesLoaded.bind(y(y(t))),t.onSuggestionSelected=t.onSuggestionSelected.bind(y(y(t))),t.filterSuggestionMatches=t.filterSuggestionMatches.bind(y(y(t))),t.sortSuggestionMatches=t.sortSuggestionMatches.bind(y(y(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,r.default.Component),t=a,(n=[{key:"componentDidMount",value:function(){if(this.props.eaaSearch)return!1;this.props.adminEditMerchForm?c.loadProjectSearchesSingleUser(this.props.filterOption,this.props.saleStatus,this.props.vendorNumberAdminEdit):c.loadProjectSearches(this.props.filterOption,this.props.saleStatus,this.props.promoId?this.props.promoId:"-1")}},{key:"componentWillMount",value:function(){d.default.addProjectSearchesLoadedListener(this.onProjectSearchesLoaded)}},{key:"componentWillUnmount",value:function(){d.default.removeProjectSearchesLoadedListener(this.onProjectSearchesLoaded)}},{key:"setValue",value:function(e){this.refs.search.setValue(e)}},{key:"getValue",value:function(){return this.refs.search.value()}},{key:"onProjectSearchesLoaded",value:function(){var e=this.props.titlesOnly?d.default.uniqueTitles:d.default.uniqueSearches,t=this.props.searchingOptions&&1<this.props.searchingOptions.length?this.props.searchingOptions:[],n=1<t.length?t.map(function(e){return{suggestedSearch:e}}):e.map(function(e){return{suggestedSearch:e}});this.setState({suggestedSearches:n})}},{key:"onSuggestionSelected",value:function(e){var t={oldValue:this.refs.search.value(),newValue:e.suggestedSearch};this.refs.search.setValue(e.suggestedSearch),this.props.onSubmit(t)}},{key:"filterSuggestionMatches",value:function(e){return u.filterProjects(this.refs.search.value(),e)}},{key:"sortSuggestionMatches",value:function(e){return u.sortProjects(this.refs.search.value(),e)}},{key:"render",value:function(){var e={labelKey:"suggestedSearch",filter:this.filterSuggestionMatches,sort:this.sortSuggestionMatches,items:this.state.suggestedSearches?this.state.suggestedSearches:[]},t=r.default.createElement("div",{className:(0,i.default)("project-list-sort","project-list-search",{disabled:this.props.disabled})},r.default.createElement(l.default,{ref:"search",name:"search",bestBook:this.props.value,label:this.props.label||"Search by Title, Author, ISBN, Series",autoComplete:"off",defaultDropdownSelection:this.props.defaultDropdownSelection,placeholder:this.props.placeholder,initValue:this.props.initValue,disableValidationMessages:this.props.disableValidationMessages,suggestions:e,serverSideValidationKey:this.props.serverSideValidationKey,onChange:this.onChange,onSubmit:this.props.onSubmit,onCommit:this.props.onCommit,rules:this.props.rules,commitOnEnterKey:!0,onSuggestionSelected:this.onSuggestionSelected,noValue:this.props.noValue,firstRendor:this.props.firstRendor}),!this.props.hideSearchIcon&&r.default.createElement("div",{className:"glyphicon glyphicon-search search-icon",onClick:this.props.onSubmit}));return this.props.saleStatus?t:r.default.createElement(s.default,{ref:"searchForm",onSubmit:this.props.onSubmit},t)}}])&&p(t.prototype,n),o&&p(t,o),a}();t.default=v},47:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(0)),i=o(n(118)),s=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var r=function(e){function r(e,t){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o=this,(n=!(a=c(r).call(this,e,t))||"object"!==l(a)&&"function"!=typeof a?f(o):a).onChange=n.onChange.bind(f(f(n))),n.makeClick=n.makeClick.bind(f(f(n))),n}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(r,i.default),t=r,(n=[{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onChange",value:function(e){e.stopPropagation();var t=!this.value();this._commitValue(t)}},{key:"toggle",value:function(){this.disabled()||this.setValue(!this.value())}},{key:"render",value:function(){return a.default.createElement("div",{className:(0,s.default)("checkbox",this.className(),{disabled:this.props.disableCustom?this.props.disableCustom:this.disabled()},{"read-only":this.readOnly()})},a.default.createElement("input",{id:this.id(),type:"checkbox",name:this.name(),value:this.value(),onChange:this.onChange,disabled:this.props.disableCustom?this.props.disableCustom:this.disabled(),checked:!0===this.value(),tabIndex:"0",onKeyDown:this.makeClick}),a.default.createElement("label",{htmlFor:this.id()},this.label(),this.required()&&!this.disableValidationMessages()&&a.default.createElement("span",null,"*")))}}])&&u(t.prototype,n),o&&u(t,o),r}();r.propTypes=function(a){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(e){var t,n,o;t=a,o=r[n=e],n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o})}return a}({},i.default.propTypes);var p=r;t.default=p},48:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load1099Settings=function(){r.load1099Settings(function(e){o.default.dispatch({type:a.default.VendorAccount.LOAD_1099_SETTINGS,args:{settings:e}})})},t.loadMailToAlertSettings=function(e,t){r.loadMailToAlertSettings(e,t,function(e){o.default.dispatch({type:a.default.VendorAccount.LOAD_MAIL_TO_ALERT,args:{settings:e}})})},t.loadEBookSize=function(e){r.loadEBookSize(e,function(e){o.default.dispatch({type:a.default.VendorAccount.LOAD_EBOOK_SIZE,args:{settings:e}})})},t.loadPrintBookSize=function(){r.loadPrintBookSize(function(e){o.default.dispatch({type:a.default.VendorAccount.LOAD_PRINTBOOK_SIZE,args:{settings:e}})})},t.loadISBNOptions=function(e){r.loadISBNOptions(e,function(e){o.default.dispatch({type:a.default.VendorAccount.LOAD_ISBN_OPTIONS,args:{settings:e}})})},t.loadVendorInfo=function(){r.loadVendorInfo(function(e){o.default.dispatch({type:a.default.VendorAccount.LOAD_VENDOR_INFO,args:{vendorInfo:s(e)}})})},t.resetVendorInfo=function(e){o.default.dispatch({type:a.default.VendorAccount.RESET_VENDOR_INFO,args:{paymentOnly:!!e}})},t.updatePublisherInfo=function(e,t){r.updatePublisherInfo(e,function(e){o.default.dispatch({type:a.default.VendorAccount.UPDATE_PUBLISHER_INFO,args:{vendorInfo:s(e),forBaB:!!t}})})},t.tinVerify=function(e,t){r.tinVerify(e,t,function(e){o.default.dispatch({type:a.default.VendorAccount.VALIDATE_TIN,args:{data:e}})})},t.updatePaymentInfo=function(n,t){r.updatePaymentInfo(n,function(e){o.default.dispatch({type:a.default.AuthenticatedUser.UPDATE_VENDOR_STATUS,args:{vendorStatus:e.publisher.status}}),o.default.dispatch({type:a.default.VendorAccount.UPDATE_PAYMENT_INFO,args:{vendorInfo:s(e),forBaB:!!t}})},function(e,t){return t&&o.default.dispatch({type:a.default.VendorAccount.UPDATE_PAYMENT_ERRORS,args:{errors:e,paymentInfo:n}}),!0})},t.setPublisherName=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_PUBLISHER_NAME,args:{publisherName:e}})},t.setPublisherWebsite=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_PUBLISHER_WEBSITE,args:{publisherWebsite:e}})},t.setCitizen=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_CITIZEN,args:{citizen:e}}),"yes"===e&&r.loadStates("840",function(e){o.default.dispatch({type:a.default.VendorAccount.LOAD_STATES,args:{states:e}})})},t.setTaxpayerType=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_TAXPAYER_TYPE,args:{taxpayerType:e}})},t.setWithholding=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_WITHHOLDING,args:{payeeCode:e}})},t.setFatca=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_FATCA,args:{fatcaCode:e}})},t.setIndividualOrCompany=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_INDIVIDUAL_OR_COMPANY,args:{individualOrCompany:e}})},t.setTaxpayerEntity=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_TAXPAYER_ENTITY,args:{taxpayerEntity:e}})},t.setTaxpayerIdType=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_TAXPAYER_ID_TYPE,args:{taxpayerIdType:e}})},t.setSSN=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_SSN,args:{ssn:e}})},t.setTaxFirstName=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_TAX_FIRST_NAME,args:{taxFirstName:e}})},t.setTaxLastName=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_TAX_LAST_NAME,args:{taxLastName:e}})},t.setEIN=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_EIN,args:{ein:e}})},t.setTaxCompanyName=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_TAX_COMPANY_NAME,args:{taxCompanyName:e}})},t.setTIN=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_TIN,args:{tin:e}})},t.setVAT=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_VAT,args:{vat:e}})},t.setAddressLine1=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_ADDRESS_LINE_1,args:{addressLine1:e}})},t.setAddressLine2=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_ADDRESS_LINE_2,args:{addressLine2:e}})},t.setCity=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_CITY,args:{city:e}})},t.setState=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_STATE,args:{state:e}})},t.setZip=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_ZIP,args:{zip:e}})},t.setTaxCountry=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_TAX_COUNTRY,args:{taxCountry:e}}),e&&0<e.length&&"0"!==e?r.loadStates(e,function(e){o.default.dispatch({type:a.default.VendorAccount.LOAD_STATES,args:{states:e}})}):o.default.dispatch({type:a.default.VendorAccount.LOAD_STATES,args:{states:[]}})},t.setPhone=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_PHONE,args:{phone:e}})},t.setAccountType=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_ACCOUNT_TYPE,args:{accountType:e}})},t.setBankCountry=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_BANK_COUNTRY,args:{bankCountry:e}})},t.setBankName=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_BANK_NAME,args:{bankName:e}})},t.setRoutingNumber=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_ROUTING_NUMBER,args:{routingNumber:e}})},t.setAccountNumber=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_ACCOUNT_NUMBER,args:{accountNumber:e}})},t.setIBAN=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_IBAN,args:{iban:e}})},t.setSWIFT=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_SWIFT,args:{swift:e}})},t.setAccountOwnerType=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_ACCOUNT_OWNER_TYPE,args:{accountOwnerType:e}})},t.setAccountOwnerFirstName=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_ACCOUNT_OWNER_FIRST_NAME,args:{accountOwnerFirstName:e}})},t.setAccountOwnerLastName=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_ACCOUNT_OWNER_LAST_NAME,args:{accountOwnerLastName:e}})},t.setAccountOwnerCompanyName=function(e){o.default.dispatch({type:a.default.VendorAccount.SET_ACCOUNT_OWNER_COMPANY_NAME,args:{accountOwnerCompanyName:e}})},t.setDigital1099Enrollment=function(e,t){r.setDigital1099Enrollment(e,t,function(){o.default.dispatch({type:a.default.VendorAccount.UPDATE_DIGITAL_1099_ENROLLMENT,args:{isDigital1099:e}})})},t.CreatePublisherAccount=function(e){r.CreatePublisherAccount(e,function(e){o.default.dispatch({type:a.default.VendorAccount.CREATE_PUBLISHER_INFO,args:{info:e}})})};var o=i(n(16)),a=i(n(18)),r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(1067));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){return{address:e.address,payment:e.payment,publisher:e.publisher,usTaxpayerTypes:e.usTaxpayerTypes,states:e.states,bank_countries:e.bank_countries,tax_countries:e.tax_countries}}},492:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(132))&&o.__esModule?o:{default:o};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,(0,a.default)(e||s))}var e,n,o;return e=t,(n=[{key:"clone",value:function(){return new t(this)}}])&&r(e.prototype,n),o&&r(e,o),t}();t.default=i;var s={customerId:null,email:null,firstName:null,lastName:null,password:null,secretQuestion:null,secretAnswer:null,emailOptedIn:null}},495:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(132))&&o.__esModule?o:{default:o};t.default=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,(0,a.default)(t||r))};var r={billingAddress1:null,billingAddress2:null,billingCity:null,billingCompanyName:null,billingCountry:null,billingFirstName:null,billingLastName:null,billingPhoneNumber:null,billingPostal:null,billingPostalCode:null,billingState:null,creditCardNumber:null,creditCardType:null,creditCardExpirationMonth:null,creditCardExpirationYear:null,items:[],shippingAddress1:null,shippingAddress2:null,shippingCity:null,shippingCompanyName:null,shippingCountry:null,shippingFirstName:null,shippingLastName:null,shippingPhoneNumber:null,shippingPostal:null,shippingPostalCode:null,shippingState:null,shippingCreditCardNumber:null,shippingCreditCardType:null,shippingExpirationMonth:null,shippingMethod:null}},496:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(132))&&o.__esModule?o:{default:o};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,(0,a.default)(e||s))}var e,n,o;return e=t,(n=[{key:"_findTotalByName",value:function(t){return this.totals.find(function(e){return e.name===t})||0}},{key:"cartItemTotal",get:function(){return parseFloat(this._findTotalByName("cartItemTotal").value)}},{key:"discountTotal",get:function(){return parseFloat(this._findTotalByName("discountTotal").value)}},{key:"handlingCharge",get:function(){var e=null;return 0!==this._findTotalByName("handlingCharge")&&(e=parseFloat(this._findTotalByName("handlingCharge").value)),e}},{key:"shipping",get:function(){return parseFloat(this._findTotalByName("shipping").value)}},{key:"orderTaxTotal",get:function(){return parseFloat(this._findTotalByName("orderTaxTotal").value)}},{key:"orderTotal",get:function(){return parseFloat(this._findTotalByName("orderTotal").value)}}])&&r(e.prototype,n),o&&r(e,o),t}();t.default=i;var s={handlingCharge:null,orderDate:null,orderNumber:null,shippingDate:null,shippingInformation:null,status:null,totals:null}},497:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addProject=function(e,t,n){r.addProject(e,n).then(function(e){try{t(new a.default(e))}catch(e){console.log(e)}})},t.loadCartCheckoutPage=function(t,e){r.loadCartCheckoutPage(e).then(function(e){try{t(new a.default(e))}catch(e){console.log(e)}})},t.loadCart=function(t,e){r.loadCart(e).then(function(e){try{t(new a.default(e))}catch(e){console.log(e)}})},t.updateEprotect=function(t,e){r.updateEprotect(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadShippingMethods=function(t,e){r.loadShippingMethods(e).then(function(e){try{t(e.shipMethods)}catch(e){console.log(e)}})},t.loadBillingAddressCountries=function(t,e){r.loadBillingAddressCountries(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.loadBillingAddressStates=function(e,t,n){r.loadBillingAddressStates(e,n).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.updateProject=function(e,t,n,o){r.updateProject(e,t,o).then(function(e){try{n(new a.default(e))}catch(e){console.log(e)}})},t.updateShippingAddressNickName=function(e,t,n,o){r.updateShippingAddressNickName(e,t,o).then(function(e){try{n(new a.default(e))}catch(e){console.log(e)}})},t.updateShippingAddress=function(e,t,n){r.updateShippingAddress(e,n).then(function(e){try{t(new a.default(e))}catch(e){console.log(e)}})},t.updateShippingMethod=function(e,t,n){r.updateShippingMethod(e,n).then(function(e){try{t(new a.default(e))}catch(e){console.log(e)}})},t.updatePaymentMethod=function(e,t,n){r.updatePaymentMethod(e,n).then(function(e){try{t(new a.default(e))}catch(e){console.log(e)}})},t.submitOrder=function(e,t,n,o,a){r.submitOrder(e,t,n,a).then(function(e){try{o(e)}catch(e){console.log(e)}})},t.loadTokenCart=void 0;var o,r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(977)),a=(o=n(978))&&o.__esModule?o:{default:o};t.loadTokenCart=function(t,n){r.loadToken(n).then(function(e){return eval.call(window,e),r.loadCart(n)}).then(function(e){try{t(new a.default(e))}catch(e){console.log(e)}})}},50:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(2);var r=n(44),i=a(n(16)),s=a(n(18)),l=a(n(4)),y=a(n(1021)),v=o(n(33)),b=a(n(8)),u=o(n(15)),c=o(n(146)),d=a(n(45));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E="enableProgressButtons",P="fadeInComplete",S="onNavigationChanged",_="navigationConfirmed",O="navigationInitiated",C="refreshSubNavigation",k="showExistingProjectModal",T="stateChangedEvent",A=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=m(this,h(t).call(this))).currentPath=null,e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r.EventEmitter),n=t,(o=[{key:"addEnableProgressButtonsListener",value:function(e){this.addListener(E,e)}},{key:"removeEnableProgressButtonsListener",value:function(e){this.removeListener(E,e)}},{key:"addFadeInCompleteListener",value:function(e){this.addListener(P,e)}},{key:"removeFadeInCompleteListener",value:function(e){this.removeListener(P,e)}},{key:"addNavigationConfirmedListener",value:function(e){this.addListener(_,e)}},{key:"removeNavigationConfirmedListener",value:function(e){this.removeListener(_,e)}},{key:"addNavigationInitiatedListener",value:function(e){this.addListener(O,e)}},{key:"removeNavigationInitiatedListener",value:function(e){this.removeListener(O,e)}},{key:"addNavigationChangedListener",value:function(e){this.addListener(S,e)}},{key:"removeNavigationChangedListener",value:function(e){this.removeListener(S,e)}},{key:"addStateChangedListener",value:function(e){this.addListener(T,e)}},{key:"removeStateChangedListener",value:function(e){this.removeListener(T,e)}},{key:"addRefeshSubNavigationListener",value:function(e){this.addListener(C,e)}},{key:"removeRefeshSubNavigationListener",value:function(e){this.removeListener(C,e)}},{key:"addShowExistingProjectModalListener",value:function(e){this.addListener(k,e)}},{key:"removeShowExistingProjectModalListener",value:function(e){this.removeListener(k,e)}},{key:"getProgressButtons",value:function(){return{buttons:this._getNavNode(this.currentPath),canGoBack:!!this._getBackNextButtons("back"),canGoNext:!!this._getBackNextButtons("next")}}},{key:"getMarketingAdIdentifiers",value:function(){if(!b.default.project().type)return[];for(var e=b.default.project().type.toLowerCase(),t=this._getNavNodes(this.currentPath),n=[],o=0;o<t.length;o++)n.push("bab/"+e+"/"+t.slice(0,t.length-o).map(function(e){return e.key}).join("/"));return e&&0<e.length&&n.push("bab/"+e),n}},{key:"getSectionNavigation",value:function(){var e=this._getContext(),t=y.default.filter(function(e){return e.section&&(!e.type||e.type.includes(b.default.project().type))});if(this.getShowVendorSection(e.user.vendorStatus)||(t=this._getVendorLinks(t,!1)),this.getShowVendorSection(e.user.vendorStatus)&&e.project.vendorRegistrationFirst){var n=this._getVendorLinks(t,!1);t=this._getVendorLinks(t,!0).concat(n)}var o=!0,a=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var l=i.value,u="/"+v.Base+"/"+b.default.project().id,c="function"==typeof l.section?l.section(e):l.section,d=!0,f=!1,p=void 0;try{for(var m,h=c[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){u+="/"+m.value}}catch(e){f=!0,p=e}finally{try{d||null==h.return||h.return()}finally{if(f)throw p}}l.inactive?l.url=l.inactive(this._getContext())?null:u:l.url=u,l.state=!!l.status&&l.status(e),l.newTitle="function"==typeof l.title?l.title(e):l.title}}catch(e){a=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw r}}return t}},{key:"getSectionSubNavigation",value:function(){var n=this,e={},t=[],o=this._getNavNodes(this.currentPath)[0];if(o.children){var a=o.children.filter(function(e){if(!e.type||e.type.includes(b.default.project().type)){if(e.access){var t=e.access(n._getContext());if(t.hasOwnProperty("canViewLink"))return t.canViewLink}return!0}}),r=!0,i=!1,s=void 0;try{for(var l,u=a[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;e={form:c.form,inactive:!!c.inactive&&c.inactive(this._getContext()),path:c.path,title:c.title,url:"/"+v.Base+"/"+b.default.project().id+"/"+o.path+"/"+c.path},t.push(e)}}catch(e){i=!0,s=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw s}}}return t}},{key:"getSectionSubNavigationExists",value:function(){return this._getNavNodes(this.currentPath)}},{key:"getShowVendorRegistrationInWelcomeFlow",value:function(e,t){return!(e&&e!==c.AccountStatus.NONE&&e!==c.AccountStatus.NEW||t&&t!==c.BusinessStatus.NONE&&t!==c.BusinessStatus.ACTIVE&&t!==c.BusinessStatus.MIGRATED)}},{key:"getShowVendorSection",value:function(e){return b.default.project().type!==u.POD&&e!==c.AccountStatus.ACTIVE}},{key:"fadeInComplete",value:function(){this.emit(P)}},{key:"onCustomSampleSelection",value:function(e){var t=b.default.project(),n=e===u.SELECTED_SAMPLE?v.InteriorSelectSample:v.InteriorUploadSample,o="build-a-book/"+t.id+"/interior/"+n;this.emit(S,{direction:"next",url:o})}},{key:"onSelectSampleSelection",value:function(){var e="build-a-book/"+b.default.project().id+"/interior/review-sample";this.emit(S,{direction:"next",url:e})}},{key:"onGoingSelectionBack",value:function(){var e="build-a-book/"+b.default.project().id+"/interior/sample-preference";this.emit(S,{direction:"back",url:e})}},{key:"onGoingBack",value:function(){var e="build-a-book/"+b.default.project().id+"/interior/review";this.emit(S,{direction:"back",url:e})}},{key:"go",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"next",t=this._getBackNextButtons(e),n=this._getNavNodes(t),o=this._buildUrl(n);this.emit(S,{direction:e,url:o})}},{key:"redirect",value:function(){this._getContext();var e=y.default.filter(function(e){return e.section}),t=!0,n=!1,o=void 0;try{for(var a,r=e[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var i=a.value;if(i.redirect&&this.currentPath===i.key||null===this.currentPath)return!0}}catch(e){n=!0,o=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw o}}}},{key:"preventIllegalAccess",value:function(){for(var e,t=this._getNavNodes(this.currentPath),n=this._getContext(),o=0;o<t.length;o++)if("function"==typeof t[o].access&&(e=t[o].access(n))&&!e.canView){var a=this._getNavNodes(e.path),r=this._buildUrl(a);e.event&&this.emit(k),this.emit(S,{direction:"back",url:r});break}}},{key:"saveStateChange",value:function(e){this.currentPath=e.baseRoute,e.childRoute&&(this.currentPath+="/"+e.childRoute),this.redirect()&&this.emit(S,{direction:"next",url:v.Base}),this.emit(T)}},{key:"_buildUrl",value:function(e){var t=v.Base;e[0].section&&(t+="/"+b.default.project().id);var n=!0,o=!1,a=void 0;try{for(var r,i=e[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){t+="/"+r.value.path}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return t}},{key:"_getBackNextButtons",value:function(e){var t=this._getNavNode(this.currentPath);return"function"==typeof t[e]?t[e](this._getContext()):t[e]}},{key:"_getContext",value:function(){return{project:b.default.project(),user:l.default.getUser()}}},{key:"_getNavNode",value:function(e){var t=this._getNavNodes(e);return t[t.length-1]}},{key:"_getNavNodes",value:function(n){"string"==typeof n&&(n=n.split("/"));var o=[],e=!0,t=!1,a=void 0;try{for(var r,i=function(){var t=r.value,e=0===o.length?y.default.find(function(e){return e.key===t}):o[o.length-1].children.find(function(e){return e.key===t});if(!e)throw'No navigation node found for path part "'+t+'" of path "'+n.join("/")+'"';o.push(e)},s=n[Symbol.iterator]();!(e=(r=s.next()).done);e=!0)i()}catch(e){t=!0,a=e}finally{try{e||null==s.return||s.return()}finally{if(t)throw a}}return o}},{key:"_getVendorLinks",value:function(e,t){return e.filter(function(e){return t?e.key===v.Vendor:e.key!==v.Vendor})}},{key:"handleActions",value:function(e){switch(e.type){case s.default.BuildABookState.ENABLE_PROGRESS_BUTTONS:this.emit(E);break;case s.default.BuildABookState.NAVIGATION_CONFIRMED:this.emit(_,e.args.url,e.args.component,e.args.editing);break;case s.default.BuildABookState.NAVIGATION_INITIATED:this.emit(O,e.args.url,e.args.component);break;case s.default.BuildABookState.FADE_IN_COMPLETE:this.fadeInComplete(e.args);break;case s.default.BuildABookState.PROGRESS_BUTTON_ACTIVATED:this.go(e.args);break;case s.default.BuildABookState.SAVE_STATE_CHANGE:this.saveStateChange(e.args);break;case s.default.Project.CHANGE_PROJECT:case s.default.ProjectGroups.CLONE_PROJECT_IN_GROUP:case s.default.Project.SET_BOOKSIZE_TYPE:case s.default.Project.SET_PROJECT_ID:!0===e.args.navigate&&(i.default.waitFor([b.default.dispatchToken]),this.go());break;case s.default.VendorAccount.UPDATE_PUBLISHER_INFO:case s.default.VendorAccount.UPDATE_PAYMENT_INFO:e.args.forBaB&&(i.default.waitFor([d.default.dispatchToken]),this.go());break;case s.default.BuildABookState.REFRESH_SUB_NAVIGATION:this.emit(C)}}}])&&p(n.prototype,o),a&&p(n,a),t}());A.dispatchToken=i.default.register(A.handleActions.bind(A));var N=A;t.default=N},500:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(21));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,o=u(a).call(this,e),(t=!o||"object"!==s(o)&&"function"!=typeof o?d(n):o).forbidCloseByUser=!0,t.props.initCallback(d(d(t))),t.closeRequested=!1,t.timeout=setTimeout(function(){t.timeout=null,t.closeRequested&&t.complete()},1e3),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,i.default),t=a,(n=[{key:"close",value:function(){var e=this;this.timeout?this.closeRequested=!0:setTimeout(function(){e.complete()},0)}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade busy-modal"+(this.props.extraClass?" "+this.props.extraClass:""),role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog",style:this.props.dialogStyles||{}},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-body"},r.default.createElement("img",{src:"img/spinner.gif",alt:"spinner"}),r.default.createElement("h2",null,"Loading...")))))}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=a},501:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=n(245),s=o(n(21)),l=o(n(79)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(31));function o(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=p(a).call(this,e))||"object"!==c(o)&&"function"!=typeof o?h(n):o).onCopy=t.onCopy.bind(h(h(t))),t.makeClick=t.makeClick.bind(h(h(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,s.default),t=a,(n=[{key:"componentDidMount",value:function(){f(p(a.prototype),"componentDidMount",this).call(this),setTimeout(function(){var e='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',t=document.querySelector(".modal-container"),n=t.querySelectorAll(e)[0],o=t.querySelectorAll(e),a=o[o.length-1];document.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===n&&(a.focus(),e.preventDefault()):document.activeElement===a&&(n.focus(),e.preventDefault()))}),n.focus()},1e3)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onCopy",value:function(){l.default.getToastStatus()||u.toggleToast(!0,"Content successfully copied to clipboard."),this.complete()}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade information-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal",tabIndex:"0",onKeyDown:this.makeClick,"data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-body"},this.props.message&&r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.message}}),r.default.createElement("div",{className:"text-to-copy",dangerouslySetInnerHTML:{__html:this.props.formattedText}})),r.default.createElement("div",{className:"modal-footer"},r.default.createElement(i.CopyToClipboard,{text:this.props.text,onCopy:this.onCopy},r.default.createElement("button",{className:"btn btn-primary",type:"button"},"Copy"))))))}}])&&d(t.prototype,n),o&&d(t,o),a}();t.default=a},502:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(21)),s=o(n(47)),l=o(n(6)),u=o(n(12)),c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(9)),d=o(n(27));function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=m(a).call(this,e))||"object"!==f(o)&&"function"!=typeof o?y(n):o).state={authorAccessChecked:e.authorPagesAllowed&&0<e.authorPagesAllowed,initauthorAccessChecked:e.authorPagesAllowed&&0<e.authorPagesAllowed,analyticsAccessChecked:!(!e.analyticsAccess||!e.analyticsAccess),initAnalyticsAccessChecked:!(!e.analyticsAccess||!e.analyticsAccess),initCustomEbookSamplingChecked:null!=e.customEbookSampling&&e.customEbookSampling,initAuthorSharedAccessChecked:null!=e.authorSharedAccess&&e.authorSharedAccess,initFreeIsbnAccessSelected:e.hasFreeIsbnAccess,initCoverCorrectionChecked:e.coverCorrectionChecked,initMerchandisingChecked:e.merchandisingChecked,initPreOrderChecked:e.preOrderChecked,initReferralChecked:e.referralChecked,expandedDistributionAccessChecked:e.expandedDistributionAccessChecked,valid:!1,message:null},t.onChange=t.onChange.bind(y(y(t))),t.onSubmit=t.onSubmit.bind(y(y(t))),t.onIsbnChange=t.onIsbnChange.bind(y(y(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,i.default),t=a,(n=[{key:"componentWillReceiveProps",value:function(e){this.setState({initAnalyticsAccessChecked:null!=this.props.analyticsAllowed&&this.props.analyticsAllowed,initCustomEbookSamplingChecked:null!=this.props.customEbookSamplingAllowed&&this.props.customEbookSamplingAllowed,initAuthorSharedAccessChecked:null!=this.props.authorSharedAccessAllowed&&this.props.authorSharedAccessAllowed})}},{key:"onChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"onIsbnChange",value:function(e){this.setState({hasFreeIsbnAccess:e.newValue})}},{key:"onSubmit",value:function(){var e=this.refs.form.gather();this.complete({canRefer:e.referralChecked,isCoverCorrectionAvailable:e.coverCorrectionChecked,isMerchandisingAvailable:e.merchandisingChecked,isPreOrderAvailable:e.preOrderChecked,authorAccess:e.authorAccessChecked?e.authorPagesAllowed:0,hasFreeIsbnAccess:this.state.hasFreeIsbnAccess?this.state.hasFreeIsbnAccess:1,analyticsAccess:e.analyticsAccessChecked?e.analyticsPagesAllowed:0,customEbookSampling:e.customEbookSamplingChecked,authorSharedAccess:e.authorSharedAccessChecked,expandedDistributionAccess:e.expandedDistributionAccessChecked})}},{key:"render",value:function(){var t=this;return r.default.createElement("div",{ref:"modal",className:"modal fade change-business-status-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Account Permissions")),r.default.createElement(l.default,{ref:"form",onSubmit:this.onSubmit,onChange:this.onChange},r.default.createElement("div",{className:"modal-body additional-radio"},r.default.createElement("p",null,r.default.createElement("strong",null,"Select features you would like to approve for the vendor")),r.default.createElement(s.default,{name:"analyticsAccessChecked",label:"Analytics Dashboard",initValue:this.state.initAnalyticsAccessChecked,onChange:function(e){return t.setState({analyticsAccessChecked:e.newValue})}}),!!this.state.analyticsAccessChecked&&r.default.createElement(u.default,{name:"analyticsPagesAllowed",label:"Analytic Pages Allowed",upperCaseCoversion:!0,initValue:this.props.analyticsAccess||"CUSTOMER,READING,SITE",rules:[c.required("Please enter pages detail")]}),r.default.createElement(s.default,{name:"authorAccessChecked",label:"Author Pages",initValue:this.state.initauthorAccessChecked,onChange:function(e){return t.setState({authorAccessChecked:e.newValue})}}),!!this.state.authorAccessChecked&&r.default.createElement(u.default,{name:"authorPagesAllowed",label:"Number of Author Pages Publisher can create",initValue:this.props.authorPagesAllowed||3,pattern:/^\d*$/,rules:[c.required("Please enter a number"),c.minValue(1,"Must be 1 or more")]}),r.default.createElement(s.default,{name:"authorSharedAccessChecked",label:"Author Shared Access",initValue:this.state.initAuthorSharedAccessChecked,onChange:function(e){return t.setState({initAuthorSharedAccessChecked:e.newValue})}}),r.default.createElement(s.default,{name:"coverCorrectionChecked",label:"Cover Correction Service",initValue:this.state.initCoverCorrectionChecked}),r.default.createElement(s.default,{name:"customEbookSamplingChecked",label:"Custom eBook Sampling",initValue:this.state.initCustomEbookSamplingChecked,onChange:function(e){return t.setState({initCustomEbookSamplingChecked:e.newValue})}}),r.default.createElement(s.default,{name:"expandedDistributionAccessChecked",label:"Expanded Distribution",initValue:this.state.expandedDistributionAccessChecked,onChange:function(e){return t.setState({expandedDistributionAccessChecked:e.newValue})}}),r.default.createElement(s.default,{name:"merchandisingChecked",label:"B&N Merchandising",initValue:this.state.initMerchandisingChecked}),r.default.createElement(s.default,{name:"preOrderChecked",label:"Print Pre-Order",initValue:this.state.initPreOrderChecked}),r.default.createElement(s.default,{name:"referralChecked",label:"Referral Program",initValue:this.state.initReferralChecked}),r.default.createElement("p",{className:"heading-isbn"},r.default.createElement("strong",null,"Free Print Book ISBNs")),r.default.createElement(d.default,{name:"hasFreeIsbnAccess",ref:"hasFreeIsbnAccess",onChange:this.onIsbnChange,initValue:this.props.hasFreeIsbnAccess,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"0",label:"Unlimited (no email alerts)"},{value:"1",label:"Limit 5 per week/ 10 per month"},{value:"-1",label:"No free ISBNs"}]})),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-cancel","data-dismiss":"modal"},"Cancel"),r.default.createElement("button",{className:"btn btn-primary",disabled:!this.state.valid,onClick:this.onSubmit},"Apply"))))))}}])&&p(t.prototype,n),o&&p(t,o),a}();t.default=a},503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=o(n(26)),s=a(n(4)),l=a(n(21)),u=(a(n(47)),a(n(6))),c=a(n(12)),d=o(n(9)),f=(a(n(27)),o(n(31))),p=o(n(10));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=v(a).call(this,e))||"object"!==m(o)&&"function"!=typeof o?g(n):o).state={phoneno:"",valid:!1,message:null},t.onChange=t.onChange.bind(g(g(t))),t.onSubmit=t.onSubmit.bind(g(g(t))),t.onValidationChange=t.onValidationChange.bind(g(g(t))),t.mobileNumberChange=t.mobileNumberChange.bind(g(g(t))),t.onProfileLoaded=t.onProfileLoaded.bind(g(g(t))),t.onProfileUpdateBegun=t.onProfileUpdateBegun.bind(g(g(t))),t.onProfileUpdated=t.onProfileUpdated.bind(g(g(t))),t.onProfileUpdatedError=t.onProfileUpdatedError.bind(g(g(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,l.default),t=a,(n=[{key:"componentDidMount",value:function(){y(v(a.prototype),"componentDidMount",this).call(this),this.refs.form.validateWithoutCommitting(),i.loadProfile()}},{key:"componentWillMount",value:function(){s.default.addProfileLoadedListener(this.onProfileLoaded),s.default.addProfileUpdateBegunListener(this.onProfileUpdateBegun),s.default.addProfileUpdatedListener(this.onProfileUpdated),s.default.addProfileUpdatedErrorListener(this.onProfileUpdatedError)}},{key:"componentWillUnmount",value:function(){s.default.removeProfileLoadedListener(this.onProfileLoaded),s.default.removeProfileUpdateBegunListener(this.onProfileUpdateBegun),s.default.removeProfileUpdatedListener(this.onProfileUpdated),s.default.removeProfileUpdatedErrorListener(this.onProfileUpdatedError)}},{key:"onProfileLoaded",value:function(){this.setState({profile:s.default.getProfile()})}},{key:"onProfileUpdateBegun",value:function(){this.setState({updating:!0,errorMessages:[]})}},{key:"onProfileUpdated",value:function(){var e=this,t=this.state.updating;this.setState({updating:!1,profile:s.default.getProfile()},function(){t&&setTimeout(function(){e.complete(),f.toggleToast(!0,"Your mobile phone number has now been updated.")},0)})}},{key:"onProfileUpdatedError",value:function(e){var t=this,n=s.default.getProfileErrors()[0],o=s.default.getProfile().clone();if(1077==n)o.cellPhoneNumber=this.state.phoneno,setTimeout(function(){t.complete(),setTimeout(function(){p.showEmailIdModal("mobilePopup",o)},1e3)},0);else if(1087==n||1085==n)setTimeout(function(){t.complete(),setTimeout(function(){p.showTwofaMaxAttemptErrorModal()},1e3)},0);else if(1082==n)setTimeout(function(){t.complete(),setTimeout(function(){p.showNotificationModal("Sorry! Weâ€™re not able to verify or save your mobile phone number at this time. Please try again later.","Phone Number Not Saved","Close")},1e3)},0);else{var a=r.default.createElement("span",{dangerouslySetInnerHTML:{__html:s.default.getProfileErrors()[0]}});this.setState({updating:!1,errorMessages:[a]},function(){window.scrollTo(0,0)})}}},{key:"componentWillReceiveProps",value:function(e){}},{key:"onChange",value:function(){}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"onSubmit",value:function(){var e=this.refs.form.gather();if(this.refs.form.validate(),this.refs.form.valid()){var t=s.default.getProfile().clone();t.cellPhoneNumber=e.cellPhoneNumber,this.setState({phoneno:e.cellPhoneNumber}),i.updateProfile(t)}}},{key:"mobileNumberChange",value:function(e,t){var n=this,o=e.newValue;"cellPhoneNumber"==t?this.refs.cellPhoneNumber.setValue(d.formatUSNumber(o)):this.refs.confirmcellPhoneNumber.setValue(d.formatUSNumber(o)),setTimeout(function(){n.refs.form.validateWithoutCommitting()},0)}},{key:"render",value:function(){var t=this;return r.default.createElement("div",{ref:"modal",className:"modal fade change-business-status-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal","data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Add Mobile Phone Number")),r.default.createElement(u.default,{name:"form",ref:"form",onValidationChange:this.onValidationChange,onSubmit:this.onSubmit},r.default.createElement("div",{className:"modal-body additional-radio1"},r.default.createElement("p",{className:"diff-division"},r.default.createElement("span",{className:"icon-check"})," Â ",r.default.createElement("strong",null,"You are now signed in to your Barnes & Noble Press account.")),r.default.createElement("div",{className:"diff-division"},"For increased account security and future SMS identity verification, we recommend adding a ",r.default.createElement("strong",null,"primary mobile phone number")," to your account."),r.default.createElement("div",{className:"diff-division font_style"},"By adding a mobile phone number to your account, you agree to potentially receive SMS messages for account verification (one-time codes)."),r.default.createElement("div",{className:"diff-division1 bottom-gap"},r.default.createElement("strong",null,"Would you like to add one below? (U.S. only)")),r.default.createElement("div",{className:"diff-division1  mobilecode"},r.default.createElement("div",{className:"col-xs-10 padLeft"},r.default.createElement(c.default,{name:"cellPhoneNumber",ref:"cellPhoneNumber",label:"Mobile Phone Number",maxLength:12,onChange:function(e){return t.mobileNumberChange(e,"cellPhoneNumber")},rules:[d.required("Please enter a mobile phone number"),d.pattern(/^((1|\+1)?(\s|-|.)?)?((\(|\s\()?[2-9]{1}\d{2}|[2-9]{1}\d{2}(\)|\)\s)?)(\s|-|.)?(\d{3}(\s|-|.)?\d{4})/,"Please enter a valid mobile phone number.")]}),r.default.createElement("span",{className:"uscode"},r.default.createElement("img",{src:"img/usa-flag-icon.png",height:"15px",alt:"usa flag image"}),"+1"))),r.default.createElement("div",{className:"diff-division mobilecode"},r.default.createElement("div",{className:"col-xs-10 padLeft"},r.default.createElement(c.default,{name:"confirmcellPhoneNumber",ref:"confirmcellPhoneNumber",label:"Confirm Mobile Phone Number",maxLength:12,onChange:function(e){return t.mobileNumberChange(e,"confirmcellPhoneNumber")},rules:[d.required("Please enter a mobile phone number"),d.pattern(/^((1|\+1)?(\s|-|.)?)?((\(|\s\()?[2-9]{1}\d{2}|[2-9]{1}\d{2}(\)|\)\s)?)(\s|-|.)?(\d{3}(\s|-|.)?\d{4})/,"Please enter a valid mobile phone number."),d.matchesControl("cellPhoneNumber","Mobile phone numbers do not match.",!0)]}),r.default.createElement("span",{className:"uscode"},r.default.createElement("img",{src:"img/usa-flag-icon.png",height:"15px",alt:"usa flag image"}),"+1")))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-primary",disabled:!this.state.valid},"Save")),r.default.createElement("div",{className:"center-link","data-dismiss":"modal"},r.default.createElement("a",{href:"#"},"No, thanks."))))))}}])&&h(t.prototype,n),o&&h(t,o),a}();t.default=E},504:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=o(n(26)),s=a(n(4)),l=a(n(21)),u=a(n(47)),c=a(n(6)),d=a(n(12)),f=o(n(9)),p=(a(n(27)),o(n(10)));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=v(a).call(this,e))||"object"!==m(o)&&"function"!=typeof o?g(n):o).state={valid:!1,message:null,requestPayload:e.phoneno,type:e.type,success:!1,errorCode:null,isLoading:!1,showPhone:!1},t.onSubmit=t.onSubmit.bind(g(g(t))),t.onValidationChange=t.onValidationChange.bind(g(g(t))),t.onVerifyotpLoaded=t.onVerifyotpLoaded.bind(g(g(t))),t.onProfileUpdateBegun=t.onProfileUpdateBegun.bind(g(g(t))),t.onProfileUpdated=t.onProfileUpdated.bind(g(g(t))),t.onProfileUpdatedError=t.onProfileUpdatedError.bind(g(g(t))),t.resendCode=t.resendCode.bind(g(g(t))),t.onResendCodeLoaded=t.onResendCodeLoaded.bind(g(g(t))),t.mobileNumberChange=t.mobileNumberChange.bind(g(g(t))),t.onGenerateCodeLoaded=t.onGenerateCodeLoaded.bind(g(g(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,l.default),t=a,(n=[{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){y(v(a.prototype),"componentDidMount",this).call(this),this.refs.form.validateWithoutCommitting(),i.generateCode("EMAIL")}},{key:"componentWillMount",value:function(){s.default.addVerifyOtpLoadedListener(this.onVerifyotpLoaded),s.default.addProfileUpdateBegunListener(this.onProfileUpdateBegun),s.default.addProfileUpdatedListener(this.onProfileUpdated),s.default.addProfileUpdatedErrorListener(this.onProfileUpdatedError),s.default.addResendCodeLoadedListener(this.onResendCodeLoaded),s.default.addGenerateCodeLoadedListener(this.onGenerateCodeLoaded)}},{key:"componentWillUnmount",value:function(){s.default.removeVerifyOtpLoadedListener(this.onVerifyotpLoaded),s.default.removeProfileUpdateBegunListener(this.onProfileUpdateBegun),s.default.removeProfileUpdatedListener(this.onProfileUpdated),s.default.removeProfileUpdatedErrorListener(this.onProfileUpdatedError),s.default.removeResendCodeLoadedListener(this.onResendCodeLoaded),s.default.removeGenerateCodeLoadedListener(this.onGenerateCodeLoaded)}},{key:"onProfileUpdateBegun",value:function(){this.setState({updating:!0,errorMessages:[]})}},{key:"onProfileUpdated",value:function(){var e=this,t=this.state.updating;document.getElementById("otpInput").parentElement.parentElement.querySelector(".message").innerHTML="",this.setState({updating:!1,success:!0,profile:s.default.getProfile()},function(){t&&setTimeout(function(){e.complete()},3e3)})}},{key:"onProfileUpdatedError",value:function(){var e=this,t=s.default.getProfileErrors()[0];s.default.getProfile().clone();if(1077==t)setTimeout(function(){e.complete(),setTimeout(function(){},1e3)},0);else{var n=r.default.createElement("span",{dangerouslySetInnerHTML:{__html:s.default.getProfileErrors()[0]}});setTimeout(function(){e.complete()},0),this.setState({updating:!1,errorMessages:[n]},function(){window.scrollTo(0,0)})}}},{key:"onVerifyotpLoaded",value:function(e){var t=this;if(e&&e.data.success){var n=s.default.getProfile().clone();if(n=this.state.requestPayload,this.state.showPhone){var o=this.refs.otpCellPhoneNumber.value();n.cellPhoneNumber=o}setTimeout(function(){i.updateProfile(n)},0)}else{var a=e.data.code?e.data.code:0;1090==a?document.getElementById("otpInput").parentElement.parentElement.querySelector(".message").innerHTML="Incorrect code. Please try again":1091==a?(this.refs.otp.reset(),this.setState({errorCode:a}),document.getElementById("otpInput").parentElement.parentElement.querySelector(".message").innerHTML=""):1087!=a&&1085!=a||setTimeout(function(){t.complete(),setTimeout(function(){p.showTwofaMaxAttemptErrorModal()},1e3)},0)}}},{key:"onResendCodeLoaded",value:function(e){var t=this;e&&e.data.success?(this.setState({errorCode:"resendCode"}),this.refs.otp.reset(),document.getElementById("otpInput").parentElement.parentElement.querySelector(".message").innerHTML=""):1085==(e.data.code?e.data.code:0)&&setTimeout(function(){t.complete(),setTimeout(function(){p.showTwofaMaxAttemptErrorModal()},1e3)},0);this.setState({isLoading:!1})}},{key:"resendCode",value:function(){this.setState({isLoading:!0}),i.resendCode("EMAIL")}},{key:"onGenerateCodeLoaded",value:function(e){var t=this;e&&e.data.success?this.setState({isLoading:!1}):1085==(e.data.code?e.data.code:0)&&setTimeout(function(){t.complete(),setTimeout(function(){p.showTwofaMaxAttemptErrorModal()},1e3)},0);this.setState({isLoading:!1})}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()})}},{key:"onSubmit",value:function(){var e=this.refs.form.gather();i.verifyOtp(e.otp,"EMAIL")}},{key:"mobileNumberChange",value:function(e,t){var n=this,o=e.newValue;"otpCellPhoneNumber"==t&&this.refs.otpCellPhoneNumber.setValue(f.formatUSNumber(o)),setTimeout(function(){n.refs.form.validateWithoutCommitting()},0)}},{key:"render",value:function(){var t=this,e=s.default.getProfile().clone(),n="1091"==this.state.errorCode||"resendCode"==this.state.errorCode?"Send a New Code":"Didn't receive a one-time code?",o="mobilePopup"!=this.state.type&&!e.cellPhoneNumber&&"phone"!=this.state.type;return r.default.createElement("div",{ref:"modal",className:"modal fade two-fa-otp-modal ",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal","data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header "+(1091==this.state.errorCode?"rmMrg":"")},r.default.createElement("h3",null,"Two-Step Verification")),r.default.createElement(c.default,{name:"form",ref:"form",onSubmit:this.onSubmit,onValidationChange:this.onValidationChange},r.default.createElement("div",{className:"modal-body"},!this.state.errorCode&&r.default.createElement("div",null,r.default.createElement("p",{className:"diff-division"},"For your account security, we have sent a ",r.default.createElement("strong",null,"one-time code")," to your email address ",r.default.createElement("strong",null," ",e.email)),r.default.createElement("div",{className:"diff-division1"},"Please enter the ",r.default.createElement("strong",null,"one-time code")," below to complete this action:")),1091==this.state.errorCode&&r.default.createElement("div",{className:"base-control"},r.default.createElement("p",{className:"diff-division1 message"},r.default.createElement("strong",null,"You've reached the maximum number of attempts for this code. We have sent a new code to your email. Please try again.")),r.default.createElement("p",{className:"diff-division3"}," ",r.default.createElement("span",{className:"icon-check"})," ",r.default.createElement("strong",null,"A new  one-time code")," has been sent to your email. Please enter it below.")),"resendCode"==this.state.errorCode&&r.default.createElement("div",{className:"base-control"},r.default.createElement("p",{className:"diff-division1"}," ",r.default.createElement("span",{className:"icon-check"})," ",r.default.createElement("strong",null,"A new  one-time code")," has been sent to your email. Please enter it below.")),r.default.createElement("div",{className:"diff-division1"},r.default.createElement("div",{className:"col-xs-8 padLeft"},r.default.createElement(d.default,{name:"otp",id:"otpInput",ref:"otp",label:"6 Digit Code",maxLength:6,initValue:"",pattern:/^\d*$/,rules:[f.required("Please enter the one-time code.")]}))),r.default.createElement("div",null,r.default.createElement("a",{disabled:this.state.isLoading,onClick:this.state.isLoading?"":this.resendCode},n)),o&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement(u.default,{name:"showPhone",label:"Iâ€™d like to receive future one-time codes by text.",onChange:function(e){return t.setState({showPhone:e.newValue})}})),this.state.showPhone&&r.default.createElement("div",{className:"diff-division1  mobilecode"}," ",r.default.createElement("div",{className:"col-xs-8  mrgTop"},r.default.createElement(d.default,{name:"otpCellPhoneNumber",ref:"otpCellPhoneNumber",label:"Mobile Phone Number",maxLength:12,onChange:function(e){return t.mobileNumberChange(e,"otpCellPhoneNumber")},rules:[f.required("Please enter a mobile phone number"),f.pattern(/^((1|\+1)?(\s|-|.)?)?((\(|\s\()?[2-9]{1}\d{2}|[2-9]{1}\d{2}(\)|\)\s)?)(\s|-|.)?(\d{3}(\s|-|.)?\d{4})/,"Please enter a valid mobile phone number.")]}),r.default.createElement("span",{className:"uscode"},r.default.createElement("img",{src:"img/usa-flag-icon.png",height:"15px",alt:"usa flag image"}),"+1")))),("1091"==this.state.errorCode||"resendCode"==this.state.errorCode)&&r.default.createElement("p",{className:"diff-division"},"(For a list of reasons why you may not have received your code, ",r.default.createElement("a",{target:"_blank",href:"https://help.barnesandnoble.com/app/answers/detail/a_id/4421"}," See FAQ"),").")),r.default.createElement("div",{className:"modal-footer twofa-modal"},!this.state.success&&r.default.createElement("button",{className:"btn btn-primary",disabled:!this.state.valid||this.state.updating||this.state.isLoading},"Verify"),this.state.success&&r.default.createElement("div",{className:"mrgTop"},r.default.createElement("p",{className:"diff-division1"},r.default.createElement("span",{className:"fa fa-check-circle"})," Verification Successful! "),r.default.createElement("p",{className:"diff-division1"},"Your mobile phone number has now been updated.")))))))}}])&&h(t.prototype,n),o&&h(t,o),a}();t.default=E},505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=(o(n(43)),o(n(21)));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=u(a).call(this,e))||"object"!==s(o)&&"function"!=typeof o?d(n):o).state={reason:"",message:null},t.onReasonChange=t.onReasonChange.bind(d(d(t))),t.onReasonKeyDown=t.onReasonKeyDown.bind(d(d(t))),t.onSubmit=t.onSubmit.bind(d(d(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,i.default),t=a,(n=[{key:"onReasonChange",value:function(e){this.setState({reason:e.target.value,message:null})}},{key:"onReasonKeyDown",value:function(e){13===e.keyCode&&this.onSubmit()}},{key:"onSubmit",value:function(){var e=this.state.reason.trim();0===e.length?this.setState({message:"Please state the reason for this status to change"}):this.complete({reason:e})}},{key:"render",value:function(){var e,t="",n=this.props.businessStatus;"OnHold"===this.props.businessStatus?(e="Note: This will remove all titles from sale and send an automatic email to the publisher alerting them of this business status change.",n="On Sale Hold"):"Terminated"===this.props.businessStatus?e="Note: This will remove all titles from sale and send an automatic email to the publisher alerting them of this business status change.":"Active"==this.props.businessStatus?e="Note: This will send an automatic email to the publisher alerting them of this business status change.":"PaymentOnHold"==this.props.businessStatus&&(e="Note: This will put a payment hold on the Vendor's account. Their books will remain on sale during this time. No email will be sent to the publisher alerting them of this business status change.",n="Payment Hold"),this.state.message&&(t=r.default.createElement("div",{className:"message"},this.state.message));var o=(this.props.vendorNum?this.props.vendorNum+" - ":"")+this.props.firstName+" "+this.props.lastName+" to: "+n;return r.default.createElement("div",{ref:"modal",className:"modal fade change-business-status-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Confirm this Business Status change:")),r.default.createElement("div",{className:"modal-body"},t,r.default.createElement("p",null,r.default.createElement("strong",null,o)),r.default.createElement("div",{className:"input-area clearfix"},r.default.createElement("label",null,"Reason:"),r.default.createElement("input",{type:"text",value:this.state.reason,onChange:this.onReasonChange,onKeyDown:this.onReasonKeyDown,maxLength:"500"})),r.default.createElement("p",null,e)),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-cancel","data-dismiss":"modal"},"Cancel"),r.default.createElement("button",{className:"btn btn-primary",onClick:this.onSubmit},"Change Business Status")))))}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=a},506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=(o(n(43)),o(n(21)));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=u(a).call(this,e))||"object"!==s(o)&&"function"!=typeof o?d(n):o).state={},t.onSubmit=t.onSubmit.bind(d(d(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,i.default),t=a,(n=[{key:"onSubmit",value:function(){this.complete(null)}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade change-user-role-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Confirm this User Status change:")),r.default.createElement("div",{className:"modal-body"},r.default.createElement("p",null,r.default.createElement("strong",null,this.props.firstName," ",this.props.lastName," to: ",this.props.userRole))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-cancel","data-dismiss":"modal"},"Cancel"),r.default.createElement("button",{className:"btn btn-primary",onClick:this.onSubmit},"Change User Status")))))}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=a},507:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=(o(n(43)),o(n(13)),o(n(21)));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=u(a).call(this,e))||"object"!==s(o)&&"function"!=typeof o?d(n):o).state={reason:"",message:null},t.onReasonChange=t.onReasonChange.bind(d(d(t))),t.onSubmit=t.onSubmit.bind(d(d(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,i.default),t=a,(n=[{key:"onReasonChange",value:function(e){this.setState({reason:e.target.value,message:null})}},{key:"onSubmit",value:function(){var e=this.state.reason.trim();0===e.length?this.setState({message:"Please select the reason for deactivating this user."}):this.complete({reason:e})}},{key:"render",value:function(){var e=null;return this.state.message&&(e=r.default.createElement("div",{className:"message"},this.state.message)),r.default.createElement("div",{ref:"modal",className:"modal fade change-business-status-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Deactivate User")),r.default.createElement("div",{className:"modal-body"},r.default.createElement("p",{className:"modal-question"},"This will deactivate the user, please specify a reason for deactivating the user. ",this.props.businessStatus),e,r.default.createElement("label",null,r.default.createElement("input",{type:"radio",name:"reason",value:"tos violation",onChange:this.onReasonChange}),r.default.createElement("span",null,"This account violated the terms of service.")),r.default.createElement("label",null,r.default.createElement("input",{type:"radio",name:"reason",value:"user request",onChange:this.onReasonChange}),r.default.createElement("span",null,"Deactivate this account at the request of the user. "))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-cancel","data-dismiss":"modal"},"Cancel"),r.default.createElement("button",{className:"btn btn-primary",onClick:this.onSubmit},"Deactivate User")))))}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=a},508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=(o(n(43)),o(n(21))),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(26)),l=n(2);function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){function a(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=d(this,f(a).call(this,e))).state={},e.errors&&Array.isArray(e.errors))for(var n in e.errors)if(34007==e.errors[n].code&&-1!==e.errors[n].description.indexOf("Please contact the author for access")){var o=function(){var e=localStorage.getItem("authorContributorLink");localStorage.setItem("ContributorAccessdeleted","You do not have access to this account. Please contact the author for access."),s.logoutUser();setTimeout(function(){window.location.href="/contributor/?authorShareKey="+e},2e3);return{v:d(t)}}();if("object"===u(o))return o.v}else if(1080==e.errors[n].code){s.logoutUser();setTimeout(function(){window.location.href="/sign-in"},5e3);return d(t)}return 19004==e.errors[n].code?d(t):t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,i.default),t=a,(n=[{key:"render",value:function(){var e=this.props.errors&&Array.isArray(this.props.errors)?this.props.errors:[{code:-31e3,description:"An unknown error occurred"}],n=[],t=(6024==this.props.errors[0].code||6031==this.props.errors[0].code)&&this.props.errors[0].code;function o(e){"Enter"===e.key&&e.currentTarget.click()}return null!==document.querySelector(".icon-close-modal")&&document.querySelector(".icon-close-modal").focus(),setTimeout(function(){var e='button, [href], input, [tabindex]:not([tabindex="-1"])',t=document.querySelector(".modal-container"),n=t.querySelectorAll(e)[0],o=t.querySelectorAll(e),a=o[o.length-1];document.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===n&&(a.focus(),e.preventDefault()):document.activeElement===a&&(n.focus(),e.preventDefault()))}),n.focus()},2e3),r.default.createElement("div",{ref:"modal",className:"modal fade error-modal",role:"dialog","aria-hidden":"true"},t?r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal",tabIndex:"0",onKeyDown:function(e){o(e)},"data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},6031==t?r.default.createElement("h3",null,"Publish Changes to Order"):r.default.createElement("h3",null,"Order Issue Resolution")),r.default.createElement("div",{className:"modal-body"},6031==t?r.default.createElement("p",null,'You have unpublished changes and cannot order a copy at this time. To proceed, click "Publish Changes" located in the banner at the top of the page. Please allow up to 5 business days to review the new files. If you do not see the "Publish Changes" banner, refresh the page. For any further questions, contact B&N Press Support ',r.default.createElement("a",{href:"mailto:BNPressSupport@bn.com"},"B&N Press Support.")):r.default.createElement("div",null,r.default.createElement("p",{className:"bottom-gap"},"You cannot order a copy at this time due to one or more of the following reasons:"),r.default.createElement("ul",null,r.default.createElement("li",null,"There was an error while uploading an updated interior/cover file. Fix the file and re-upload to proceed."),r.default.createElement("li",null,'You have not reviewed and approved an updated interior/cover file. Go to the "Interior/Cover Review" page and click the "I have reviewed and approvedâ€¦" checkbox.')),r.default.createElement("p",null,'After resolving these issues, click on "Publish Changes" located in the banner at the top of the page. Please allow up to 5 business days for our printers to review the files. If you do not see the "Publish Changes" banner, refresh the page. For any further questions, contact ',r.default.createElement("a",{href:"mailto:BNPressSupport@bn.com"},"B&N Press Support.")))),r.default.createElement("div",{className:"modal-footer center-align"},r.default.createElement("button",{tabIndex:"0","data-dismiss":"modal",className:"btn btn-primary"},"OK")))):r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal",tabIndex:"0",onKeyDown:function(e){o(e)},"data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Oops!")),r.default.createElement("div",{className:"modal-body"},"We apologize. We're experiencing technical difficulties processing your request. Please try again. If the issue persists, please contact ",r.default.createElement("a",{href:"https://help-press.barnesandnoble.com/hc/en-us/requests/new?ticket_form_id=5311112596507&tf_5033671016731=barnes_noble_press_webform_topic&tf_subject=BN%20Press",target:"_blank"},"Publisher Support")," .",r.default.createElement("div",{className:"error-container"},e.map(function(e,t){return!n.includes(e.code)&&(n.push(e.code),1080==e.code?(s.logoutUser(),r.default.createElement("div",{key:t,className:"error"},r.default.createElement("div",{className:"description"},r.default.createElement("b",null,"Description:"),r.default.createElement("div",{style:{fontSize:"calc(100% - 2px)"}},"Your Session has Expired.Please ",r.default.createElement(l.Link,{to:"/sign-in"},"sign in")," again to restart your session.")))):34007==e.code?r.default.createElement("div",{key:t,className:"error"},r.default.createElement("div",{className:"description"},r.default.createElement("b",null,"Description:"),r.default.createElement("div",{style:{fontSize:"calc(100% - 2px)"}},"You do not have access to this account. Please contact the author for access."))):r.default.createElement("div",{key:t,className:"error"},r.default.createElement("div",{className:"code"},r.default.createElement("b",null,"Error Code:")," ",r.default.createElement("span",{style:{fontSize:"calc(100% - 2px)"}},e.code)),r.default.createElement("div",{className:"description"},r.default.createElement("b",null,"Description:"),r.default.createElement("div",{style:{fontSize:"calc(100% - 2px)"}},e.description))))}))),r.default.createElement("div",{className:"modal-footer"}))))}}])&&c(t.prototype,n),o&&c(t,o),a}();t.default=a},509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(21));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=c(a).call(this,e))||"object"!==s(o)&&"function"!=typeof o?f(n):o).makeClick=t.makeClick.bind(f(f(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,i.default),t=a,(n=[{key:"componentDidMount",value:function(){u(c(a.prototype),"componentDidMount",this).call(this),setTimeout(function(){var e='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',t=document.querySelector(".modal-container"),n=t.querySelectorAll(e)[0],o=t.querySelectorAll(e),a=o[o.length-1];document.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===n&&(a.focus(),e.preventDefault()):document.activeElement===a&&(n.focus(),e.preventDefault()))}),n.focus()},1e3)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade information-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal",tabIndex:"0",onKeyDown:this.makeClick,"data-dismiss":"modal"})),this.props.title&&!!this.props.title.length&&r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,this.props.title)),r.default.createElement("div",{className:"modal-body"},this.props.isHtml&&r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.content}}),!this.props.isHtml&&this.props.content))))}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=a},510:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(44),o=a(n(16)),i=a(n(18));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f="closed",p=1,m=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this)))._singleModalList={},e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.EventEmitter),n=t,(o=[{key:"addOpenListener",value:function(e){this.addListener("open",e)}},{key:"removeOpenListener",value:function(e){this.removeListener("open",e)}},{key:"addClosedListener",value:function(e){this.addListener(f,e)}},{key:"removeClosedListener",value:function(e){this.removeListener(f,e)}},{key:"_registerHandle",value:function(e,t,n){var o;return t&&t.singleModalOnly?(o=this._singleModalList[e])?o=this._merge(o,{type:e,params:t,handle:o.handle,callback:n}):(o={type:e,params:t,handle:p++,callback:n},this._singleModalList[e]=o):o={type:e,params:t,handle:p++,callback:n},o}},{key:"_destroyHandle",value:function(e){for(var t in this._singleModalList){this._singleModalList[t].handle===e&&delete this._singleModalList[t]}}},{key:"_merge",value:function(e,t){for(var n in e.params)Array.isArray(e.params[n])&&(e.params[n]=e.params[n].concat(t.params[n]));return e}},{key:"handleActions",value:function(e){switch(e.type){case i.default.Modal.SHOW_MODAL:this.showModal(e.modalType,e.params,e.callback);break;case i.default.Modal.MODAL_CLOSED:this.modalClosed(e.handle,e.result)}}},{key:"showModal",value:function(e,t,n){var o=this._registerHandle(e,t,n);this.emit("open",o)}},{key:"modalClosed",value:function(e,t){this._destroyHandle(e),this.emit(f,e)}}])&&l(n.prototype,o),a&&l(n,a),t}());o.default.register(m.handleActions.bind(m));var h=m;t.default=h},511:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=(o(n(43)),o(n(21)));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=c(a).call(this,e))||"object"!==s(o)&&"function"!=typeof o?f(n):o).state={},t.makeClick=t.makeClick.bind(f(f(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,i.default),t=a,(n=[{key:"componentDidMount",value:function(){u(c(a.prototype),"componentDidMount",this).call(this),setTimeout(function(){var e='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',t=document.querySelector(".modal-container"),n=t.querySelectorAll(e)[0],o=t.querySelectorAll(e),a=o[o.length-1];document.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===n&&(a.focus(),e.preventDefault()):document.activeElement===a&&(n.focus(),e.preventDefault()))}),n.focus()},250)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"render",value:function(){var e=this.props.title||"Notification";return r.default.createElement("div",{ref:"modal",className:"modal fade change-business-status-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal",tabIndex:"0",onKeyDown:this.makeClick,"data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,e)),r.default.createElement("div",{className:"modal-body"},this.props.isHtml&&r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.message}}),!this.props.isHtml&&this.props.message),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{ref:"closeButton",className:"btn btn-primary","data-dismiss":"modal"},this.props.buttonLabel||"Close")))))}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=a},512:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=(o(n(43)),o(n(21)));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=l(this,c(n).call(this,e))).state={},t}var t,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,i.default),t=n,(o=[{key:"componentDidMount",value:function(){var e=this;u(c(n.prototype),"componentDidMount",this).call(this),setTimeout(function(){e.refs.closeButton.focus()},250)}},{key:"render",value:function(){return r.default.createElement("div",{ref:"modal",className:"modal fade recipient-modal",role:"dialog","aria-hidden":"true"},r.default.createElement("div",{className:"modal-dialog"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-close-icon"},r.default.createElement("span",{className:"icon-close-modal","data-dismiss":"modal"})),r.default.createElement("div",{className:"modal-header"},r.default.createElement("h3",null,"Recipients")),r.default.createElement("div",{className:"modal-body"},this.props.message),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{ref:"closeButton",className:"btn btn-primary","data-dismiss":"modal"},"Close")))))}}])&&s(t.prototype,o),a&&s(t,a),n}();t.default=f},513:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setToday=void 0;var o=n(7);t.setToday=function(e){e["x-server-time"]&&(0,o.set_today)(e["x-server-time"])}},514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).call(this,e))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),n=t,(o=[{key:"render",value:function(){return r.default.createElement("div",{className:(0,i.default)("toast",{active:this.props.toast.active})},r.default.createElement("p",null,this.props.toast.content))}}])&&s(n.prototype,o),a&&s(n,a),t}();t.default=d},516:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._price=e.toFixed(2)}var e,n,o;return e=t,(n=[{key:"price",get:function(){return this._price}}])&&a(e.prototype,n),o&&a(e,o),t}();(t.default=o).ZERO=new o(0)},517:function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function s(e,t,n,o,a,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this._floorPrice=e.toFixed(2),this._retailMargin=t.toFixed(2),this._printingCost=n.toFixed(2),this._netRoyalty=o.toFixed(2),this._costPerPage=a.toFixed(4),this._pricingDescription=r,this._royaltyRate=i?i.toFixed(2):0}var e,t,n;return e=s,(t=[{key:"floorPrice",get:function(){return this._floorPrice}},{key:"retailMargin",get:function(){return this._retailMargin}},{key:"printCost",get:function(){return this._printingCost}},{key:"netRoyalty",get:function(){return this._netRoyalty}},{key:"costPerPage",get:function(){return this._costPerPage}},{key:"pricingDescription",get:function(){return this._pricingDescription}},{key:"royaltyRate",get:function(){return this._royaltyRate}}])&&o(e.prototype,t),n&&o(e,n),s}();t.default=a},518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryProjectGroups=function(e,t,n,o,a,c,r){i.queryProjectGroups(e,t,n,o,a).then(function(e){try{if(e.series){var t=e.totalCount,n=e.deletedProjectCount,o=e.totalProjectsCount,a=e.series.map(function(e){return new d.default(e)});c({totalCount:t,totalProjectsCount:o,deletedProjectCount:n,series:a})}else{var r=e.totalCount,i=e.totalProjectsCount,s=e.deletedProjectCount,l=e.projectGroups.map(function(e){return new v.default(e)}),u=e.warnings;c({totalCount:r,totalProjectsCount:i,deletedProjectCount:s,projectGroups:l,warnings:u})}}catch(e){console.log(e)}})},t.queryGroupedProject=function(h,y){i.queryGroupedProject(h).then(function(e){try{var t=e.projectGroups.map(function(e){return new v.default(e)}),n=null,o=!0,a=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var l=i.value,u=!0,c=!1,d=void 0;try{for(var f,p=l.projects[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value;if(m.id===h){n=m;break}}}catch(e){c=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}if(n)break}}catch(e){a=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw r}}y(n)}catch(e){console.log(e)}})},t.loadExistingTitles=function(t,e){i.loadExistingTitles(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.clone=function(n,o,e){i.clone(n,e).then(function(e){try{var t=new s.default(e);t.isGroupConfirmed=n.isGroupConfirmed,t.grouped=n.grouped,o(new s.default(e))}catch(e){console.log(e)}})},t.setSaleStatus=function(e,t,n,o,a,r){i.setSaleStatus(e,t,n,o,r).then(function(e){try{a(new s.default(e))}catch(e){r(e),console.log(e)}})};var i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(1022)),v=o(n(519)),s=o(n(64)),d=o(n(1023));function o(e){return e&&e.__esModule?e:{default:e}}},519:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(132)),a=r(n(64));function r(e){return e&&e.__esModule?e:{default:e}}var i={authorLastName:null,authorName:null,hasError:!(t.default=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,(0,o.default)(t||i)),this.projects=this.projects.map(function(e){return new a.default(e)})}),id:null,lastUpdated:null,normalizedTitle:null,projects:[],title:null,versionCount:0,warnings:[]}},525:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SORT_PARAMS=void 0;t.SORT_PARAMS={newest:"newest",oldest:"oldest",default:"oldest"}},526:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var y=a(n(0)),f=n(7),v=a(n(1)),p=n(2),b=a(n(47)),m=a(n(1045)),g=o(n(100)),E=a(n(6)),r=o(n(10)),i=o(n(91)),s=a(n(92)),P=a(n(72)),l=(a(n(8)),a(n(38))),S=a(n(23)),_=a(n(3)),O=a(n(250)),C=a(n(119)),k=a(n(134)),h=o(n(22)),T=a(n(46)),u=(o(n(68)),o(n(60))),A=a(n(528)),N=a(n(529));o(n(31));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){L(t,e,n[e])})}return t}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var j=[{label:"Pending",value:"PENDING"},{label:"Accepted",value:"APPROVED"},{label:"Declined",value:"DECLINED"},{label:"Completed",value:"COMPLETED"}],M=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=I(a).call(this,e))||"object"!==c(o)&&"function"!=typeof o?w(n):o).state={promosList:[],promoTypes:[],promoType:"ALL",filterOption:"ALL",currentPromo:[],hasNoPromos:!0,loading:!0,samplePromoList:[],page:1,expanded:!1,totalPages:1,totalRecords:0,sortBy:t.props.isAdmin?"oldest":"newest",activeTab:"PENDING",searchText:"",searchResult:[],isSearchClicked:!1,isPromoTypeChanged:!1,includeExpiredPromo:!0,agreeToConfirmText:"",promoId:"",undoButtonVisible:!1,buttonAccepted:!0,buttonDeclined:!0,buttonPending:!1,checkboxHide:!0,content:null},t.onFiltersLoaded=t.onFiltersLoaded.bind(w(w(t))),t.onPageChange=t.onPageChange.bind(w(w(t))),t.onPromosLoaded=t.onPromosLoaded.bind(w(w(t))),t.onPromoTypeChange=t.onPromoTypeChange.bind(w(w(t))),t.onPromoStatusChanged=t.onPromoStatusChanged.bind(w(w(t))),t.onStatusChange=t.onStatusChange.bind(w(w(t))),t.onTabChange=t.onTabChange.bind(w(w(t))),t.renderPromo=t.renderPromo.bind(w(w(t))),t.renderPromos=t.renderPromos.bind(w(w(t))),t.onSearchClick=t.onSearchClick.bind(w(w(t))),t.onFreeFilterToggleBar=t.onFreeFilterToggleBar.bind(w(w(t))),t.makeClick=t.makeClick.bind(w(w(t))),t.onSelectRow=t.onSelectRow.bind(w(w(t))),t.onShowDetail=t.onShowDetail.bind(w(w(t))),t.onHideDetail=t.onHideDetail.bind(w(w(t))),t.onSelectAll=t.onSelectAll.bind(w(w(t))),t.handleScroll=t.handleScroll.bind(w(w(t))),t.toggleStickyClass=t.toggleStickyClass.bind(w(w(t))),t.onIsbnLookupLoaded=t.onIsbnLookupLoaded.bind(w(w(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(a,y.default.Component),t=a,(n=[{key:"componentWillMount",value:function(){s.default.addFiltersListener(this.onFiltersLoaded),s.default.addMerchandisingPromosLoadedListener(this.onPromosLoaded),s.default.addMerchandisingPromoStatusChangedListener(this.onPromoStatusChanged),l.default.addIsbnLookupLoadedListener(this.onIsbnLookupLoaded)}},{key:"componentDidMount",value:function(){i.loadPromos(this.props.isAdmin,this.state.activeTab,this.state.searchText,this.state.page,20,this.state.sortBy,this.state.promoType),this.props.tabUpdate&&this.props.tabUpdate(g.COUPON_VIEWS.BN_PROMO_SUMMARY),this.props.isAdmin&&i.loadFilters(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){s.default.removeFiltersListener(this.onFiltersLoaded),s.default.removeMerchandisingPromosLoadedListener(this.onPromosLoaded),s.default.removeMerchandisingPromoStatusChangedListener(this.onPromoStatusChanged),l.default.removeIsbnLookupLoadedListener(this.onIsbnLookupLoaded),window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){this.toggleStickyClass()}},{key:"toggleStickyClass",value:function(){var e=document.getElementById("button-container-sticky"),t=!!document.querySelector(".side-preview")&&document.querySelector(".side-preview"),n=document.getElementById("content").offsetHeight-650,o=document.querySelector("table").offsetHeight,a=document.querySelector(".side-view-container"),r=window.scrollY;setTimeout(function(){385<r?e.classList.add("sticky"):e.classList.remove("sticky")},500),this.state.content&&!1!==t&&(t.style.maxHeight=o-10+"px",385<r?(a.style.top=r-336+"px",a.style.position="absolute",a.style.width="97%",a.style.overflowX="hidden",t.style.height=n<r?o+"px":r-536+window.screen.height+"px"):(a.removeAttribute("style"),t.removeAttribute("style"),t.classList.remove("sticky-side")))}},{key:"onSelectAll",value:function(e){var t,n=this,o=e.newValue,a=document.getElementsByTagName("tr"),r=document.querySelectorAll('.checkbox input[type="checkbox"] + label'),i=document.querySelectorAll('.checkbox input[type="checkbox"]'),s=this.state.promosList.map(function(e){return d({},e,{checkboxChecked:o})});for(e.newValue?(document.getElementsByClassName("coupon-list")[0].classList.remove("hide-check"),setTimeout(function(){for(t=1;t<a.length;t++)0!=i[t].checked&&0!=i[t].value||i[t].click()},500)):(document.getElementsByClassName("coupon-list")[0].classList.add("hide-check"),setTimeout(function(){for(t=1;t<a.length;t++)1!=i[t].checked&&1!=i[t].value||i[t].click()},500)),this.setState({promosList:s}),t=1;t<a.length;t++)a[t].classList.toggle("checked-all"),r[t].classList.toggle("showAfter");setTimeout(function(){0<document.getElementsByClassName("row-background").length?n.setState({buttonEnabled:!0}):n.setState({buttonEnabled:!1})},500)}},{key:"handleKeyDown",value:function(e){e.key}},{key:"handleKeyUp",value:function(e){e.key}},{key:"onShowDetail",value:function(e){u.lookupIsbn(e.ean),document.querySelectorAll(".hover-background").forEach(function(e){e.classList.remove("hover-background")}),document.getElementById(e.id).classList.add("hover-background"),this.setState({loading:!0})}},{key:"onHideDetail",value:function(){this.setState({content:null,expanded:!1}),document.querySelector(".panel-body").style.padding="",document.querySelectorAll(".hover-background").forEach(function(e){e.classList.remove("hover-background")})}},{key:"onIsbnLookupLoaded",value:function(e){e.title?(this.setState({content:e,expanded:!0}),document.querySelector(".panel-body").style.padding="10px"):this.setState({content:null,expanded:!0}),this.setState({loading:!1})}},{key:"onSelectRow",value:function(e,t,n){var o=this;this.toggleStickyClass(),1==e.newValue?this.onShowDetail(n):this.setState({content:null,expanded:!0});var a=e.newValue,r=this.state.promosList.map(function(e){return e.id===t?d({},e,{checkboxChecked:a}):e});this.setState({promosList:r,promoId:t}),setTimeout(function(){0<document.getElementsByClassName("row-background").length?o.setState({buttonEnabled:!0}):o.setState({buttonEnabled:!1})},100),this.handleScroll}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onFreeFilterToggleBar",value:function(){this.setState(function(e){return{includeExpiredPromo:!e.includeExpiredPromo}});var e=!this.state.includeExpiredPromo,t=s.default.getMerchandisingPromoFilters().map(function(e){return{label:e.label,value:e.id}}),n=s.default.getMerchandisingPromoFilters().filter(function(e){return null==e.promoEndDisplayDate||void 0!==e.promoEndDisplayDate&&(0,f.bn_moment)(e.promoEndDisplayDate).isAfter((0,f.bn_moment)())}).map(function(e){return{label:e.label,value:e.id}});e?this.setState({promoTypes:[{label:"All",value:"ALL"}].concat(t)}):this.setState({promoTypes:[{label:"All",value:"ALL"}].concat(n)})}},{key:"onDeletePromo",value:function(n){var o=this;r.showConfirmationModal("Delete Request","Are you sure you want to delete this request?","Delete","Cancel",function(e,t){e&&o.setState({loading:!0},function(){return i.deletePromo(n)})})}},{key:"onFiltersLoaded",value:function(){var e=s.default.getMerchandisingPromoFilters().map(function(e){return{label:e.label,value:e.id}});0==this.state.promoTypes.length&&this.setState({promoTypes:[{label:"All",value:"ALL"}].concat(e)})}},{key:"onHeaderClick",value:function(e){var t=this;if(this.props.isAdmin){var n="";n="dateSubmitted"===e?"newest"===this.state.sortBy?"oldest":"newest":"newestPrefDate"===this.state.sortBy?"oldestPrefDate":"newestPrefDate",this.setState({sortBy:n,loading:!0,page:1,content:null},function(){return i.loadPromos(t.props.isAdmin,t.state.activeTab,t.state.searchText,1,20,n,t.state.promoType)})}}},{key:"onPageChange",value:function(e){var t=this;this.setState({page:e,content:null});var n=document.querySelectorAll('.checkbox input[type="checkbox"]')[0];1==n.checked&&n.click(),this.setState({page:e,loading:!0},function(){return i.loadPromos(t.props.isAdmin,t.state.activeTab,t.state.searchText,e,20,t.state.sortBy,t.state.promoType)}),document.querySelector(".side-view-container").removeAttribute("style")}},{key:"onTabChange",value:function(e){var t=this;this.onHideDetail();var n="APPROVED"===e||"COMPLETED"===e?"oldestPrefDate":this.props.isAdmin?"oldest":"newest";e!==this.state.activeTab&&this.setState({activeTab:e,page:1,totalPages:1,loading:!0,promosList:[],sortBy:n},function(){return i.loadPromos(t.props.isAdmin,e,t.state.searchText,1,20,n,t.state.promoType)}),"PENDING"==e?this.setState({buttonAccepted:!0,buttonDeclined:!0,buttonPending:!1,buttonEnabled:!1,checkboxHide:!0}):"APPROVED"==e?this.setState({buttonAccepted:!1,buttonDeclined:!0,buttonPending:!0,buttonEnabled:!1,checkboxHide:!0}):"DECLINED"==e?this.setState({buttonAccepted:!0,buttonDeclined:!1,buttonPending:!0,buttonEnabled:!1,checkboxHide:!0}):"COMPLETED"==e&&this.setState({checkboxHide:!1})}},{key:"onPromosLoaded",value:function(e){var t=this,n=e.promos,o=e.promos?Math.ceil(e.numberOfRecords/20):0;this.setState({promosList:n,totalPages:o,loading:!1,totalRecords:e.numberOfRecords,undoTime:e.undoSeconds}),0<document.getElementsByClassName("row-background").length?this.setState({buttonEnabled:!0}):this.setState({buttonEnabled:!1}),this.state.undoButtonRef&&(this.setState({undoButtonVisible:!0,undoButtonRef:!1}),setTimeout(function(){t.setState({undoButtonVisible:!1})},1e3*this.state.undoTime))}},{key:"onPromoStatusChanged",value:function(){var e=this,t=1<this.state.page&&this.state.page>Math.ceil((this.state.totalRecords-1)/20)?this.state.page-1:this.state.page;setTimeout(function(){return e.setState({page:t},function(){return i.loadPromos(e.props.isAdmin,e.state.activeTab,e.state.searchText,t,20,e.state.sortBy,e.state.promoType)})})}},{key:"onPromoTypeChange",value:function(e){var t,n=this;e&&e.newValue?t=e.newValue:e&&""==e.newValue&&"ALL"!=e.oldValue&&(t=e.oldValue),this.setState({loading:!0,isSearchClicked:!1,isPromoTypeChanged:!0,page:1,promoType:t||"ALL",content:null},function(){return i.loadPromos(n.props.isAdmin,n.state.activeTab,n.state.searchText,1,20,n.state.sortBy,n.state.promoType)})}},{key:"onStatusChange",value:function(e,n){var o=this,a=this.state.promosList.filter(function(e){return e.checkboxChecked}).map(function(e){return e.id});""==a&&(a=[e]),"PENDING"===n?r.showConfirmationModal("Update Request Status","Are you sure you want to move this request to pending?","Yes","No",function(e,t){e&&(o.setState({loading:!0},function(){return i.updatePromoStatus(a,n)}),o.setState({undoButtonRef:!0,statusType:"Pending",changeNumberOfRecords:a.length,content:null,expanded:!0}))}):"APPROVED"===n?r.showApproveMerchRequestModal(function(e,t){e&&(o.setState({loading:!0},function(){return i.updatePromoStatus(a,n,t.startDate.format("MM/DD/YYYY"),t.endDate.format("MM/DD/YYYY"))}),o.setState({undoButtonRef:!0,statusType:"Accepted",changeNumberOfRecords:a.length,content:null,expanded:!0}))}):"DECLINED"===n?r.showConfirmationModal("Decline Request","Are you sure you want to decline this request?","Yes","No",function(e,t){e&&(o.setState({loading:!0},function(){return i.updatePromoStatus(a,n)}),o.setState({undoButtonRef:!0,statusType:"Declined",changeNumberOfRecords:a.length,content:null,expanded:!0}))}):"undo"===n?(this.setState({undoButtonVisible:!1,loading:!0,undoButtonRef:!1}),i.updatePromoStatus("",n)):"close"===n&&this.setState({undoButtonVisible:!1,undoButtonRef:!1})}},{key:"showInformationModal",value:function(e){document.getElementById("app").classList.add("AdminMerchForm"),r.showInformationModal(e)}},{key:"showInformationModalWithTitle",value:function(e,t){document.getElementById("app").classList.add("AdminMerchFormView"),r.showInformationModalWithTitle(e,t)}},{key:"renderPromo",value:function(t){var n=this,e=t.checkboxChecked,o=t.author,a=(0,f.bn_moment)(t.submissionDate),r=t.ean,i=t.description,s=t.additionalComments,l=t.promoPrice?h.formatPrice(+t.promoPrice):null,u=t.startDate?(0,f.bn_moment)(t.startDate):null,c=t.endDate?(0,f.bn_moment)(t.endDate):null,d=this.props.isAdmin?y.default.createElement("a",{target:"_blank",href:"/utilities/isbn-lookup?q="+t.ean},y.default.createElement("span",{className:"fa fa-external-link "})):t.title;return y.default.createElement("tr",{key:t.id,id:t.id,className:(0,v.default)("additional-check",{"row-background":e})},this.state.checkboxHide&&y.default.createElement("td",null,y.default.createElement(E.default,{name:"form2",ref:"form2"},y.default.createElement(b.default,{ref:t.id,name:t.id,label:"",className:"banner-checkbox",onChange:function(e){return n.onSelectRow(e,t.id,t)}}))),y.default.createElement("td",{className:"approval-col"},this.props.isAdmin&&y.default.createElement(m.default,{promo:t,onStatusChange:this.onStatusChange})),y.default.createElement("td",{className:"author-col"},o),y.default.createElement("td",{className:"promo-name-col"},i),y.default.createElement("td",{className:"date-submitted-col"},a.format("MM/DD/YYYY")),y.default.createElement("td",{className:"ean-col"},r),y.default.createElement("td",{className:"title-col"},y.default.createElement("div",{onClick:function(e){return n.onShowDetail(t)},className:"side-info-btn"},t.title)),y.default.createElement("td",{className:"title-col1"},d),y.default.createElement("td",{className:"promo-price-col"},l),y.default.createElement("td",{className:"preferred-date-col"},u&&u.format("MM/DD/YYYY")),y.default.createElement("td",{className:"start-end-date-col"},y.default.createElement("span",null,u&&u.format("MM/DD/YYYY")),y.default.createElement("br",null),y.default.createElement("span",null,c&&c.format("MM/DD/YYYY"))),y.default.createElement("td",{className:"notes-col"},!!s&&0<s.length&&y.default.createElement("a",{onClick:this.showInformationModalWithTitle.bind(this,"Notes",s),tabIndex:"0",onKeyDown:this.makeClick},"View")),y.default.createElement("td",{className:"action-col"},!this.props.isAdmin&&y.default.createElement(p.Link,{to:"/projects/coupon/bn-promo?id="+t.id,title:"edit icon",tabIndex:"0",onKeyDown:this.makeClick},y.default.createElement("span",{className:"promo-action fa fa-pencil"})),!this.props.isAdmin&&y.default.createElement("span",{className:"promo-action icon-close-modal",onClick:function(){return n.onDeletePromo(t.id)},tabIndex:"0",onKeyDown:this.makeClick}),this.props.isAdmin&&"PENDING"==this.state.activeTab&&y.default.createElement("span",{className:"clickable-icon fa fa-pencil",tabIndex:"0",onKeyDown:this.makeClick,onClick:this.showInformationModal.bind(this,y.default.createElement(A.default,{adminInitPromo:t,isAdmin:this.props.isAdmin,page:this.state.totalPages,sortBy:this.state.sortBy,onPageChange:this.onPageChange,promoType:this.state.promoType}))})))}},{key:"renderPromos",value:function(e){var t=[];for(var n in e)t.push(this.renderPromo(e[n]));return t}},{key:"onSearchClick",value:function(){var e=this,t=this.refs.adminMerchSearch.getValue();this.setState({loading:!1,isSearchClicked:!0,isPromoTypeChanged:!1,page:1,searchText:t,content:null},function(){return i.loadPromos(e.props.isAdmin,e.state.activeTab,e.state.searchText,1,20,e.state.sortBy,e.state.promoType)})}},{key:"render",value:function(){var t=this,e=this.state,n=e.loading,o=e.promosList,a=e.activeTab,r=e.page,i=e.sortBy,s=e.totalPages,l=e.promoTypes,u=(e.searchResult,e.isSearchClicked),c=e.isPromoTypeChanged,d=e.searchText,f=(e.promoType,this.props.isAdmin),p=(f?"There are no ":"You don't have any ")+j.find(function(e){return e.value===a}).label.toLowerCase()+" merchandising requests.",m="We found no requests matching your search criteria with this status.",h=y.default.createElement("tr",{className:!this.state.checkboxHide&&"fixTrHeight"},this.state.checkboxHide&&y.default.createElement("td",null,y.default.createElement(E.default,{name:"form3",ref:"form3"},y.default.createElement(b.default,{ref:"checkboxAll",className:"category-checkbox",name:"checkboxAll",onChange:function(e){return t.onSelectAll(e)}}))),y.default.createElement("td",{className:"approval-col"}),y.default.createElement("td",{className:"author-col"},"Author Name"),y.default.createElement("td",{className:"promo-name-col"},"Promotion Name"),y.default.createElement("td",{onClick:function(){return t.onHeaderClick("dateSubmitted")},className:"date-submitted-col"},"Submitted ",y.default.createElement("span",{className:"fa fa-sort"}),y.default.createElement("span",{className:"fa fa-sort-up"}),y.default.createElement("span",{className:"fa fa-sort-down"})),y.default.createElement("td",{className:"ean-col"},"EAN"),y.default.createElement("td",{className:"title-col"},"Title"),y.default.createElement("td",{className:"title-col1"}),y.default.createElement("td",{className:"promo-price-col"},"Promo Price"),y.default.createElement("td",{onClick:function(){return t.onHeaderClick("preferredDate")},className:"preferred-date-col"},"Preferred Date ",y.default.createElement("span",{className:"fa fa-sort"}),y.default.createElement("span",{className:"fa fa-sort-up"}),y.default.createElement("span",{className:"fa fa-sort-down"})),y.default.createElement("td",{onClick:function(){return t.onHeaderClick("startDate")},className:"start-end-date-col"},"Start / End Date ",y.default.createElement("span",{className:"fa fa-sort"}),y.default.createElement("span",{className:"fa fa-sort-up"}),y.default.createElement("span",{className:"fa fa-sort-down"})),y.default.createElement("td",{className:"notes-col"},"Notes"),y.default.createElement("td",{className:"action-col"}));return y.default.createElement("div",{className:"bn-promo-list"},!f&&y.default.createElement("div",{className:"center"},y.default.createElement(O.default,{currentView:g.COUPON_VIEWS.COUPON_SUMMARY,onButtonClick:this.props.onViewChange,toSummary:!0,couponSelected:!1}),y.default.createElement(O.default,{currentView:g.COUPON_VIEWS.BN_PROMO_SUMMARY,onButtonClick:this.props.onViewChange,toSummary:!0,couponSelected:!1})),f&&y.default.createElement("div",{className:"row"},this.state.loading&&y.default.createElement(_.default,null),y.default.createElement("div",{className:"col-md-8 col-sm-7 hidden-xs"}),y.default.createElement("div",{className:"col-md-12 col-sm-5 col-xs-12"},y.default.createElement("div",{className:"col-md-4 col-sm-5 col-xs-12"},y.default.createElement(T.default,{label:"Search by Title, Author, ISBN",ref:"adminMerchSearch",filterOption:this.state.filterOption,onSubmit:this.onSearchClick})),y.default.createElement("div",{className:"col-md-4 col-sm-5 col-xs-12"},y.default.createElement(E.default,{name:"form",ref:"form",onSubmit:this.onPromoTypeChange},0<l.length&&y.default.createElement(S.default,{name:"promoType",ref:"promoType",label:"Promotion Type",initValue:"ALL",onChange:this.onPromoTypeChange,options:l,keepValue:!0}))),y.default.createElement("div",{className:"ToggleMerchAdmin",style:{display:"block"}},y.default.createElement(k.default,{action:this.onFreeFilterToggleBar,onClick:this.onFreeFilterToggleBar,containerStyle:{marginRight:10,marginTop:50},labelText:"Include Expired Promos",labelLeft:!0,labelStyle:{color:"#999999"},initValue:!0})))),f&&y.default.createElement("div",{id:"button-container-sticky",className:(0,v.default)({"button-disabled":!this.state.buttonEnabled})},this.state.buttonDeclined&&this.state.buttonAccepted&&y.default.createElement("div",null,y.default.createElement("button",{className:"btn btn-secondary small-button1",onClick:function(){return t.onStatusChange(t.state.promoId,"APPROVED")}},y.default.createElement("span",null),"Accept")," ",y.default.createElement("button",{className:"btn btn-secondary small-button2",onClick:function(){return t.onStatusChange(t.state.promoId,"DECLINED")}},y.default.createElement("span",null),"Decline")),this.state.buttonPending&&this.state.buttonAccepted&&y.default.createElement("div",null,y.default.createElement("button",{className:"btn btn-secondary small-button3",onClick:function(){return t.onStatusChange(t.state.promoId,"PENDING")}},y.default.createElement("span",null),"Pending")," ",y.default.createElement("button",{className:"btn btn-secondary small-button1",onClick:function(){return t.onStatusChange(t.state.promoId,"APPROVED")}},y.default.createElement("span",null),"Accept")),this.state.buttonPending&&this.state.buttonDeclined&&y.default.createElement("div",null,y.default.createElement("button",{className:"btn btn-secondary small-button3",onClick:function(){return t.onStatusChange(t.state.promoId,"PENDING")}},y.default.createElement("span",null),"Pending")," ",y.default.createElement("button",{className:"btn btn-secondary small-button2",onClick:function(){return t.onStatusChange(t.state.promoId,"DECLINED")}},y.default.createElement("span",null),"Decline"))),f&&this.state.undoButtonVisible&&y.default.createElement("div",{className:"undo-container"},y.default.createElement("div",{className:(0,v.default)("undo-sub-container",{"color-type-accepted":"Accepted"==this.state.statusType,"color-type-pending":"Pending"==this.state.statusType})},y.default.createElement("span",null),this.state.changeNumberOfRecords,"Â ",this.state.statusType),y.default.createElement("div",{className:"button-container"},y.default.createElement("button",{className:"button-undo",onClick:function(){return t.onStatusChange(t.state.promoId,"undo")}},"Undo"),y.default.createElement("button",{className:"button-close",onClick:function(){return t.onStatusChange(t.state.promoId,"close")}},"X"))),y.default.createElement("ul",{className:(0,v.default)("list-inline","table-selector",{"bottom-padding":s<=1})},j.map(function(e){return y.default.createElement("li",{key:e.value,className:e.value===a&&"active",tabIndex:"0",onKeyDown:t.makeClick,onClick:function(){return t.onTabChange(e.value)}},y.default.createElement("a",null,e.label))})),y.default.createElement(P.default,{currentPage:r,totalPages:s,onChange:this.onPageChange}),y.default.createElement("div",{className:(0,v.default)("coupon-list",a.toLowerCase(),{admin:f})},0<o.length&&y.default.createElement("div",{className:"row floatright "},y.default.createElement("div",{className:1==this.state.expanded?"col-xs-9 main-table":"main-table col-xs-12"},y.default.createElement(C.default,{tableHeader:h,tableBody:this.renderPromos(o),tableStyle:"table "+i})),1==this.state.expanded&&y.default.createElement("div",{className:"col-xs-3 side-preview"},y.default.createElement("div",{className:"side-view-container"},y.default.createElement("div",{className:"icon-close-modal floatright",onClick:function(e){return t.onHideDetail()}}),this.state.content?y.default.createElement(N.default,{project:this.state.content,sidePreview:!0}):y.default.createElement("div",{className:"project-summary"},y.default.createElement("div",{className:"row panel-body-sample-preference"},"No Information Available"))))),!f&&!n&&0===o.length&&y.default.createElement("div",{className:"no-content"},p),f&&!n&&!u&&!c&&0===d.length&&0===o.length&&y.default.createElement("div",{className:"no-content"},p),f&&!n&&!u&&c&&0===d.length&&0===o.length&&y.default.createElement("div",{className:"no-content"},p),f&&!n&&u&&!c&&0===o.length&&y.default.createElement("div",{className:"no-content"},m),f&&!n&&!u&&c&&0<d.length&&0===o.length&&y.default.createElement("div",{className:"no-content"},m)),y.default.createElement(P.default,{currentPage:r,totalPages:s,onChange:this.onPageChange}))}}])&&D(t.prototype,n),o&&D(t,o),a}();t.default=M},527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var p=i(n(0)),c=n(24),m=(n(7),i(n(6))),a=o(n(91)),d=i(n(38)),h=i(n(27)),y=i(n(62)),v=i(n(66)),b=i(n(107)),g=i(n(46)),r=i(n(92)),E=i(n(3)),P=o(n(9)),S=i(n(12));o(n(60));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C="",u=function(e){function u(e){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),n=this,t=!(o=_(u).call(this,e))||"object"!==f(o)&&"function"!=typeof o?O(n):o;var a,r,i,s=e.adminInitPromo;C=e.adminInitPromo?e.adminInitPromo.position:e.test,i=s?(a=s.additionalComments,r=[s.ean],s.promoPrice):(r=[],a=null);var l=e.initPromo;return t.state={additionalComments:l?l.additionalComments:a,bookInputType:"title",eanList:l?[l.ean]:r,eansLoaded:!1,freeTitles:[],initEan:"",introduction:"",loaded:!1,projectPrice:null,promoPrice:l?l.promoPrice:i,rulesList:[],formitem:"",rulesLoaded:!1,valid:!1,fieldsItems:"",fieldsItem:"",fieldZero:"",fieldTwo:"",fieldSix:"",max:"",type:"",min:"",items1:""},t.getRules=t.getRules.bind(O(O(t))),t.onAdditionalCommentsCommit=t.onAdditionalCommentsCommit.bind(O(O(t))),t.onBookInputTypeChange=t.onBookInputTypeChange.bind(O(O(t))),t.onCancel=t.onCancel.bind(O(O(t))),t.onDebounceSubmit=(0,c.debounce)(500,!0,t.onDebounceSubmit.bind(O(O(t)))),t.onDeleteEan=t.onDeleteEan.bind(O(O(t))),t.onEanCommit=t.onEanCommit.bind(O(O(t))),t.onEansLoaded=t.onEansLoaded.bind(O(O(t))),t.onRulesLoaded=t.onRulesLoaded.bind(O(O(t))),t.onPromoPriceChanged=t.onPromoPriceChanged.bind(O(O(t))),t.onPromoPriceBlur=t.onPromoPriceBlur.bind(O(O(t))),t.onSubmit=t.onSubmit.bind(O(O(t))),t.onTitleSelect=t.onTitleSelect.bind(O(O(t))),t.onValidationChange=t.onValidationChange.bind(O(O(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,p.default.Component),t=u,(n=[{key:"componentWillMount",value:function(){d.default.addProjectSearchesLoadedListener(this.onEansLoaded),r.default.addRulesListener(this.onRulesLoaded)}},{key:"componentDidMount",value:function(){this.refs.form.validateWithoutCommitting(),a.loadPromoRules()}},{key:"componentWillUnmount",value:function(){d.default.removeProjectSearchesLoadedListener(this.onEansLoaded),r.default.removeRulesListener(this.onRulesLoaded)}},{key:"getRules2",value:function(){this.state.fieldsItems}},{key:"getRules",value:function(){var e=[],t=this.state.rulesList,n=!0,o=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value;if(Array.isArray(s))for(var l in s)e.push(p.default.createElement("li",{className:"rules-list",key:s[l].name},p.default.createElement("a",{href:s[l].value,target:"_blank"},s[l].name)));else e.push(p.default.createElement("li",{className:"rules-list",key:s}," ",s," "))}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return e}},{key:"onAdditionalCommentsCommit",value:function(e){this.setState({additionalComments:e.newValue})}},{key:"onBookInputTypeChange",value:function(e){this.setState({bookInputType:e.newValue})}},{key:"onCancel",value:function(){this.setState({eanList:[],additionalComments:""}),this.refs.additionalDetailsList&&this.refs.additionalDetailsList.setValue(null),this.refs.bookInputType&&this.refs.bookInputType.setValue("title"),this.refs.bookTitle&&this.refs.bookTitle.setValue(null),this.refs.promoPrice&&this.refs.promoPrice.setValue(null),this.props.onCancel()}},{key:"onDebounceSubmit",value:function(){if(this.refs.form.valid()){var e={additionalComments:this.state.additionalComments,ean:this.state.eanList[0],mercPromoType:this.state.fieldsItems.mercPromoType,promoPrice:this.state.promoPrice,regularPrice:this.state.projectPrice,merchPromoName:this.state.fieldsItems.merchPromoName,definitionId:this.state.fieldsItems.id};this.props.initPromo?e.id=this.props.initPromo.id:this.props.isAdmin&&(e.id=this.props.idAdminEdit,e.vendorNumber=this.props.vendorNumberAdminEdit),a.submitPromo(e)}}},{key:"onDeleteEan",value:function(e){this.setState({eanList:[],projectPrice:null,valid:!1},this.refs.promoPrice.setValue(null),this.onValidationChange)}},{key:"onEanCommit",value:function(e){var t=this;if(""!==e.newValue){var n=[],o=this.state.eanList.slice(0),a=e.newValue.trim(),r=d.default.findProjectByEan(a),i=r?"true"==r.allowedForMerchPromo:null;if(this.props.isAdmin&&(i=!0),d.default.uniqueIsbns.includes(a))if(!o.includes(a)&&i){var s=d.default.findProjectByEan(a);o[0]=a,this.refs.promoPrice.setValue(null),0==+s.listPrice&&this.state.freeTitles.push(s.newEans)}else i||n.push(a);else n.push(a);this.setState({eanList:o,projectPrice:0<o.length?d.default.findProjectByEan(o[0]).listPrice:null,valid:!0},function(){t.refs.eanList.setValue(n.join(" ")),t.onValidationChange(),0<n.length&&(i||null==i?t.refs.form.setServerSideValidationMessage("eanList","Please enter a valid on sale eBook EAN or one that belongs to you."):t.refs.form.setServerSideValidationMessage("eanList","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("eanList","Please enter an EAN.")}},{key:"onEansLoaded",value:function(){var e,t,n,o=this,a=null;(t=this.props.initPromo?(e=this.props.initPromo.ean,n=this.props.initPromo,d.default.findProjectByEan(e)):this.props.adminInitPromo?(e=this.props.adminInitPromo.ean,n=this.props.adminInitPromo,d.default.findProjectByEan(e)):d.default.findProjectByEan(this.state.eanList[0]))&&0!=this.state.eanList.length&&(a=t.listPrice),this.setState({eansLoaded:!0,projectPrice:a},function(){return n&&o.refs.promoPrice.setValue(Number(o.state.promoPrice).toFixed(2))})}},{key:"onPromoPriceChanged",value:function(e){if(this.state.fieldsItems){var t,n=new Map,o=!0,a=!1,r=void 0;try{for(var i,s=this.state.fieldsItems.fields[Symbol.iterator]();!(o=(i=s.next()).done);o=!0)t=i.value,n.set(t.name,t)}catch(e){a=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw r}}}this.setState({promoPrice:e.newValue}),(this.state.projectPrice<Number(n.get("regularPrice").min)||this.state.projectPrice>Number(n.get("regularPrice").max))&&this.setState({valid:!1})}},{key:"onPromoPriceBlur",value:function(){if(this.state.promoPrice){var e=Number(this.state.promoPrice).toFixed(2);this.refs.promoPrice.setValue(e)}}},{key:"onRulesLoaded",value:function(){this.setState({rulesLoaded:!0,rulesList:r.default.getMerchandisingPromoRules(C),introduction:r.default.getMerchandisingPromoIntro(C),fieldsItems:r.default.getMerchandisingPromoFormItems(C)})}},{key:"onSubmit",value:function(){this.onDebounceSubmit()}},{key:"onTitleSelect",value:function(e){var t=this;if(""!==e.newValue){var n,o=[],a=this.state.eanList.slice(0),r=e.newValue.trim(),i=d.default.findProjectByTitle(r),s=i?i.ean:null,l=i?"true"==i.allowedForMerchPromo:null;this.props.isAdmin&&(l=!0),d.default.uniqueIsbns.includes(s)&&l?a.includes(s)?l||o.push(s):(a[0]=s,this.refs.promoPrice.setValue(null),0==+i.listPrice&&this.state.freeTitles.push(i.newTitle)):o.push(s),n=s&&(l||null==l)?o.join(" "):r,this.setState({eanList:a,projectPrice:0<a.length?d.default.findProjectByEan(a[0]).listPrice:null,valid:!0},function(){t.refs.bookTitle.setValue(n),t.onValidationChange(),0<o.length&&(l||null==l?t.refs.form.setServerSideValidationMessage("bookTitle","Please enter a valid on sale eBook title or one that belongs to you."):t.refs.form.setServerSideValidationMessage("bookTitle","This title/EAN cannot be submitted due to an active or pending nomination"))})}else 0==this.state.eanList.slice(0).length&&this.refs.form.setServerSideValidationMessage("bookTitle","Please enter a Book Title.")}},{key:"onValidationChange",value:function(){this.setState({valid:this.refs.form.valid()&&0<this.state.eanList.length})}},{key:"render",value:function(){if(this.state.fieldsItems){var e,t=new Map,n=!0,o=!1,a=void 0;try{for(var r,i=this.state.fieldsItems.fields[Symbol.iterator]();!(n=(r=i.next()).done);n=!0)e=r.value,t.set(e.name,e)}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}}var s=this.state,l=s.additionalComments,u=s.bookInputType,c=s.eanList,d=s.eansLoaded,f=s.projectPrice;s.promoPrice;return p.default.createElement("div",{className:"promoForm"},p.default.createElement(m.default,{ref:"form",onSubmit:this.onSubmit,onValidationChange:this.onValidationChange},p.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},p.default.createElement("div",{className:"panel-header top-header"},p.default.createElement("div",{className:"section-number"},"2"),p.default.createElement("h2",null,"Rules")),p.default.createElement("div",{className:"panel-body"},p.default.createElement("div",null,p.default.createElement("ul",null,this.getRules()),p.default.createElement("p",null,this.getRules2())))),p.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},p.default.createElement("div",{className:"panel-header top-header"},p.default.createElement("div",{className:"section-number"},"3"),p.default.createElement("h2",null,"Select Book")),p.default.createElement("div",{className:"panel-body"},p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-xs-12 left"},"Enter a single eBook title or EAN that you would like to nominate for this promotion.",p.default.createElement("span",{className:"required-item-asterisk"},"*"))),p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-lg-12 col-xs-12"},p.default.createElement(h.default,{name:"bookInputType",ref:"bookInputType",onChange:this.onBookInputTypeChange,initValue:this.state.bookInputType,labelColClass:"no-label",radioColClass:"col-md-12",radioLayout:"discount-radio-radio-layout",options:[{value:"title",label:"Book Title"},{value:"ean",label:"EAN"}]}))),p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-md-6 col-xs-12"},p.default.createElement("div",{className:"book-search"},p.default.createElement("p",null,this.fieldsItems),this.state.fieldsItems&&"title"===u&&p.default.createElement(g.default,{name:"bookTitle",ref:"bookTitle",label:"Book Title",serverSideValidationKey:"bookTitle",hideSearchIcon:!0,titlesOnly:!0,adminEditMerchForm:this.props.isAdmin,vendorNumberAdminEdit:this.props.vendorNumberAdminEdit,filterOption:"EBOOK",onSubmit:this.onTitleSelect,onCommit:this.onTitleSelect,promoId:this.props.promoId,saleStatus:"ONSALE"}),"ean"===u&&p.default.createElement(S.default,{name:"eanListText",autoComplete:"off",ref:"eanList",serverSideValidationKey:"eanList",label:"EAN",onCommit:this.onEanCommit,commitOnEnterKey:!0,rules:[P.numOnly(),P.maxLength(t.get("ean").max)]}),d&&0<c.length&&p.default.createElement(b.default,{items:c,onDeleteEan:this.onDeleteEan,eansWithTitles:this.state.eansWithTitles})))))),this.state.fieldsItems&&p.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},p.default.createElement("div",{className:"panel-header top-header"},p.default.createElement("div",{className:"section-number"},"4"),p.default.createElement("h2",null,"Price")),p.default.createElement("div",{className:"panel-body"},p.default.createElement("p",null,"If selected, the price will be updated by the B&N Press team for you."),null===this.state.projectPrice||0===this.state.projectPrice||this.state.projectPrice>=Number(t.get("regularPrice").min)?null:p.default.createElement("p",{className:"min-price-message"},"Nominated title must have a minimum listing price of $",t.get("regularPrice").min,"."),null===this.state.projectPrice||0===this.state.projectPrice||this.state.projectPrice<=Number(t.get("regularPrice").max)?null:p.default.createElement("p",{className:"min-price-message"},"Nominated title must have a maximum listing price of $",t.get("regularPrice").max,"."),p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-xs-4 col-md-4 col-lg-2"},p.default.createElement("div",{className:"regular-price-container"},p.default.createElement("p",{className:"regular-price"},"Regular Price"),p.default.createElement("p",null,"$ ",Number(f).toFixed(2)))),p.default.createElement("div",{className:"col-xs-1 col-md-1 col-lg-1"},p.default.createElement("div",{className:"dollar-sign-label"},"$")),p.default.createElement("div",{className:"col-xs-7 col-md-7 col-lg-4"},p.default.createElement(S.default,{name:"promoPrice7",ref:"promoPrice",label:"Promo Price",autoComplete:"off",onChange:this.onPromoPriceChanged,onBlur:this.onPromoPriceBlur,type:t.get("promoPrice").type,pattern:/^\d{0,5}(\.\d{0,2}|)$/,rules:[P.required("Promo price is missing."),P.minValue(Number(t.get("promoPrice").min),"Minimum Promo Price is $"+Number(t.get("promoPrice").min)),P.maxValue(Number(t.get("promoPrice").max),"Maximum Promo Price is $"+Number(t.get("promoPrice").max))]}))))),this.state.fieldsItems&&p.default.createElement("div",{className:"panel-section coupon-layout coupon-content"},p.default.createElement("div",{className:"panel-header top-header"},p.default.createElement("div",{className:"section-number"},"5"),p.default.createElement("h2",null,"Additional Details")),p.default.createElement("div",{className:"panel-body"},p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-lg-12 col-xs-12"},p.default.createElement(v.default,{name:"additionalDetails",autoComplete:"off",ref:"additionalDetailsList",label:"Please let us know...",onCommit:this.onAdditionalCommentsCommit,initValue:l,commitOnEnterKey:!1,showRemainingCharCount:!0,rules:[P.maxLength(t.get("additionalComments").max)]}))))),p.default.createElement("hr",null),p.default.createElement("div",{className:"coupon-content save-or-cancel"},p.default.createElement("div",{className:"row"},p.default.createElement("div",{className:"col-lg-12 col-xs-12"},p.default.createElement(y.default,{buttonText:"Submit",ref:"submitButton",buttonModal:"modal",click:this.onSubmit,disabled:!this.state.valid}),p.default.createElement("span",{className:"cancel","data-dismiss":"modal",onClick:this.onCancel},"Cancel"))))),!this.state.rulesLoaded&&!this.props.isAdmin&&p.default.createElement(E.default,null))}}])&&s(t.prototype,n),o&&s(t,o),u}();t.default=u},528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var E=i(n(0)),l=n(2),P=i(n(1)),a=i(n(1050)),S=i(n(6)),_=o(n(11)),O=o(n(17)),r=o(n(91)),C=i(n(92)),s=i(n(1051)),u=i(n(1052)),c=i(n(1053)),d=i(n(1054)),f=i(n(1055)),p=i(n(527)),m=i(n(1056)),h=i(n(1057)),y=i(n(1058)),k=i(n(3)),v=(i(n(38)),i(n(23)),o(n(22))),T=n(7),b=o(n(31));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var I=function(e){function i(e){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,t=!(o=N(i).call(this,e))||"object"!==g(o)&&"function"!=typeof o?D(n):o;var a=e.adminInitPromo,r=e.isAdmin;return t.state={initPromo:null,promoId:null,adminInitPromo:a,merchandisingPromoTypes:[],merchandisingPromoType:r?a.mercPromoType:null,submitted:!1,adminPromoSubmitted:!1,vendorNumberAdminEdit:r?a.vendorNumber:null,idAdminEdit:r?a.id:null,loading:!1,rulesList:[],standardPromoSelected:!1,monthlyPromoSelected:!1,selectedPromoCopy:null,selectedPromoName:null,tabActive:t.props.tabActive,adminSelectedPromo:!!r,page:"newest"==t.props.sortBy?1:t.props.page},t.isLoaded=t.isLoaded.bind(D(D(t))),t.onMerchandisingPromoFiltersLoaded=t.onMerchandisingPromoFiltersLoaded.bind(D(D(t))),t.onMerchandisingPromoSubmitted=t.onMerchandisingPromoSubmitted.bind(D(D(t))),t.onMerchandisingPromoTypeChange=t.onMerchandisingPromoTypeChange.bind(D(D(t))),t.getChosenPromoForm=t.getChosenPromoForm.bind(D(D(t))),t.onCancel=t.onCancel.bind(D(D(t))),t.onPromosLoaded=t.onPromosLoaded.bind(D(D(t))),t.onTabClick=t.onTabClick.bind(D(D(t))),t.onRulesLoaded=t.onRulesLoaded.bind(D(D(t))),t.changeCreatePromoType=t.changeCreatePromoType.bind(D(D(t))),t.makeClick=t.makeClick.bind(D(D(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(i,E.default.Component),t=i,(n=[{key:"componentWillMount",value:function(){C.default.addMerchandisingPromosLoadedListener(this.onPromosLoaded),C.default.addFiltersListener(this.onMerchandisingPromoFiltersLoaded),C.default.addPromoSubmittedListener(this.onMerchandisingPromoSubmitted),C.default.addRulesListener(this.onRulesLoaded)}},{key:"componentDidMount",value:function(){this.props.id&&r.loadPromos(!1,"PENDING","",1,""),r.loadPromoRules(),r.loadFilters()}},{key:"componentWillUnmount",value:function(){C.default.removeMerchandisingPromosLoadedListener(this.onPromosLoaded),C.default.removeFiltersListener(this.onMerchandisingPromoFiltersLoaded),C.default.addPromoSubmittedListener(this.onMerchandisingPromoSubmitted),C.default.removeRulesListener(this.onRulesLoaded)}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"onRulesLoaded",value:function(){if(this.setState({adminInitPromo:this.state.adminInitPromo,rulesList:C.default.getAllMerchandisingRules()}),this.state.adminInitPromo){var e,t="TEMPLATE"==this.state.adminInitPromo.mercPromoType?this.state.adminInitPromo.position:this.state.adminInitPromo.mercPromoType,n=this.state.rulesList,o=n.filter(function(e){return void 0!==e.start&&void 0!==e.end&&e.promoEndDisplayDate&&(0,T.bn_moment)(e.promoEndDisplayDate).isAfter((0,T.bn_moment)())}),a=n.filter(function(e){return!e.start&&!e.end}),r=this.state.adminInitPromo.mercPromoType;for(var i in o)o[i].mercPromoType===r&&(e="MonthlyPromotions");for(var s in a)a[s].mercPromoType===r&&(e="StandardPromotions");this.setState({tabActive:e||this.state.tabActive,merchandisingPromoType:t})}}},{key:"onMerchandisingPromoFiltersLoaded",value:function(){this.setState({merchandisingPromoTypes:C.default.getMerchandisingPromoFilters()})}},{key:"onTabClick",value:function(e){var t=this;"CreateCoupon"===e?(this.setState({isCouponSelected:!1,standardPromoSelected:!1,monthlyPromoSelected:!1}),l.browserHistory.push({pathname:"/projects/coupon",state:{tabActive:"CreateCoupon"}})):"MonthlyPromotions"===e?this.setState({tabActive:"MonthlyPromotions",isCouponSelected:!1,standardPromoSelected:!1,monthlyPromoSelected:!1}):"StandardPromotions"===e&&this.setState({tabActive:"StandardPromotions",isCouponSelected:!1,standardPromoSelected:!1,monthlyPromoSelected:!1}),e!=this.state.tabActive&&(this.setState({loading:!0}),setTimeout(function(){t.setState({loading:!1})},5e3))}},{key:"onMerchandisingPromoSubmitted",value:function(e){this.props.adminInitPromo?(this.setState({submittedPromo:e,initPromo:null,adminPromoSubmitted:!0,adminInitPromo:null},function(){v.smoothScrollToWindowTop()}),this.props.onPageChange(this.state.page)):this.setState({submittedPromo:e,initPromo:null},function(){l.browserHistory.push("/projects/coupon/bn-promo")})}},{key:"onMerchandisingPromoTypeChange",value:function(e,t){var n,o,a=this,r=e;"standard"==t?o=!(n=!0):"monthly"==t&&(n=!(o=!0)),this.setState({standardPromoSelected:n,monthlyPromoSelected:o,merchandisingPromoType:r,submittedPromo:r?null:this.state.submittedPromo,initPromo:null,adminInitPromo:null,adminSelectedPromo:!!this.props.isAdmin,selectedPromoCopy:C.default.getMerchandisingPromoIntro(e),selectedPromoName:C.default.getMerchandisingPromoName(e),submitBy:C.default.getMerchandisingSubmitByPromoDates(e),promoStart:C.default.getMerchandisingDisplayStart(e),promoEnd:C.default.getMerchandisingDisplayEnd(e),promoId:C.default.getMerchandisingDisplayId(e)},function(){return!a.props.isAdmin&&l.browserHistory.push({pathname:"/projects/coupon/bn-promo",state:{tabActive:o?"MonthlyPromotions":"StandardPromotions"}})}),v.smoothScrollToWindowTop()}},{key:"changeCreatePromoType",value:function(){var e,t=this;if(this.state.initPromo||this.state.adminInitPromo){var n=this.state.rulesList,o=n.filter(function(e){return void 0!==e.start&&void 0!==e.end&&e.promoEndDisplayDate&&(0,T.bn_moment)(e.promoEndDisplayDate).isAfter((0,T.bn_moment)())}),a=n.filter(function(e){return!e.start&&!e.end}),r=this.props.isAdmin?this.state.adminInitPromo.mercPromoType:this.state.initPromo.mercPromoType;for(var i in o)o[i].mercPromoType===r&&(e="MonthlyPromotions");for(var s in a)a[s].mercPromoType===r&&(e="StandardPromotions")}this.setState({merchandisingPromoType:null,merchandisingPromoPosition:null,submitted:!1,standardPromoSelected:!1,monthlyPromoSelected:!1,selectedPromoCopy:null,selectedPromoName:null,submitBy:null,promoStart:null,promoEnd:null,tabActive:e||this.state.tabActive,initPromo:null,adminInitPromo:null,adminSelectedPromo:!1},function(){return!t.props.isAdmin&&l.browserHistory.push({pathname:"/projects/coupon/bn-promo",state:{tabActive:e||t.state.tabActive}})}),v.smoothScrollToWindowTop()}},{key:"onPromosLoaded",value:function(e){var t,n=this,o=e.promos.find(function(e){return e.id===n.props.id});if(this.onRulesLoaded(),o){var a;t="TEMPLATE"==o.mercPromoType?o.position:o.mercPromoType;var r=this.state.rulesList,i=r.filter(function(e){return void 0!==e.start&&void 0!==e.end&&e.promoEndDisplayDate&&(0,T.bn_moment)(e.promoEndDisplayDate).isAfter((0,T.bn_moment)())}),s=r.filter(function(e){return!e.start&&!e.end}),l=o.mercPromoType;for(var u in i)i[u].mercPromoType===l&&(a="MonthlyPromotions");for(var c in s)s[c].mercPromoType===l&&(a="StandardPromotions");this.setState({initPromo:o,tabActive:a||this.state.tabActive,merchandisingPromoType:t,selectedPromoCopy:C.default.getMerchandisingPromoIntro(t),selectedPromoName:C.default.getMerchandisingPromoName(t),selectedPromoSubmitBy:C.default.getMerchandisingSubmitByPromoDates(t),selectedPromoDisplayStart:C.default.getMerchandisingDisplayStart(t),selectedPromoDisplayEnd:C.default.getMerchandisingDisplayEnd(t),promoId:C.default.getMerchandisingDisplayId(t)})}}},{key:"isLoaded",value:function(){return 0<this.state.merchandisingPromoTypes.length&&(!this.props.id||this.props.id&&!!this.state.merchandisingPromoType)}},{key:"getChosenPromoForm",value:function(e){var t=null;switch(e){case"UNDER_2_99":t=E.default.createElement(s.default,{initPromo:this.state.initPromo,adminInitPromo:this.state.adminInitPromo,vendorNumberAdminEdit:this.state.vendorNumberAdminEdit,idAdminEdit:this.state.idAdminEdit,isAdmin:this.props.isAdmin,onCancel:this.onCancel,promoId:this.state.promoId});break;case"BNPRESS_PRESENTS":t=E.default.createElement(a.default,{initPromo:this.state.initPromo,adminInitPromo:this.state.adminInitPromo,vendorNumberAdminEdit:this.state.vendorNumberAdminEdit,idAdminEdit:this.state.idAdminEdit,isAdmin:this.props.isAdmin,onCancel:this.onCancel,promoId:this.state.promoId});break;case"NOOK_FREE_FRIDAY":t=E.default.createElement(u.default,{initPromo:this.state.initPromo,adminInitPromo:this.state.adminInitPromo,vendorNumberAdminEdit:this.state.vendorNumberAdminEdit,idAdminEdit:this.state.idAdminEdit,isAdmin:this.props.isAdmin,onCancel:this.onCancel,promoId:this.state.promoId});break;case"NOOK_DAILY_FIND":t=E.default.createElement(c.default,{initPromo:this.state.initPromo,adminInitPromo:this.state.adminInitPromo,vendorNumberAdminEdit:this.state.vendorNumberAdminEdit,idAdminEdit:this.state.idAdminEdit,isAdmin:this.props.isAdmin,onCancel:this.onCancel,promoId:this.state.promoId});break;case"NOOK_DAILY_ROMANCE":t=E.default.createElement(d.default,{initPromo:this.state.initPromo,adminInitPromo:this.state.adminInitPromo,vendorNumberAdminEdit:this.state.vendorNumberAdminEdit,idAdminEdit:this.state.idAdminEdit,isAdmin:this.props.isAdmin,onCancel:this.onCancel,promoId:this.state.promoId});break;case"NOOK_HAUL":t=E.default.createElement(f.default,{initPromo:this.state.initPromo,adminInitPromo:this.state.adminInitPromo,vendorNumberAdminEdit:this.state.vendorNumberAdminEdit,idAdminEdit:this.state.idAdminEdit,isAdmin:this.props.isAdmin,onCancel:this.onCancel});break;case"TEMPLATE_1":t=E.default.createElement(m.default,{initPromo:this.state.initPromo,adminInitPromo:this.state.adminInitPromo,vendorNumberAdminEdit:this.state.vendorNumberAdminEdit,idAdminEdit:this.state.idAdminEdit,isAdmin:this.props.isAdmin,onCancel:this.onCancel,promoId:this.state.promoId});break;case"TEMPLATE_2":t=E.default.createElement(h.default,{initPromo:this.state.initPromo,adminInitPromo:this.state.adminInitPromo,vendorNumberAdminEdit:this.state.vendorNumberAdminEdit,idAdminEdit:this.state.idAdminEdit,isAdmin:this.props.isAdmin,onCancel:this.onCancel,promoId:this.state.promoId});break;case"TEMPLATE_3":t=E.default.createElement(y.default,{initPromo:this.state.initPromo,adminInitPromo:this.state.adminInitPromo,vendorNumberAdminEdit:this.state.vendorNumberAdminEdit,idAdminEdit:this.state.idAdminEdit,isAdmin:this.props.isAdmin,onCancel:this.onCancel,promoId:this.state.promoId});break;default:t=E.default.createElement(p.default,{initPromo:this.state.initPromo,adminInitPromo:this.state.adminInitPromo,vendorNumberAdminEdit:this.state.vendorNumberAdminEdit,idAdminEdit:this.state.idAdminEdit,isAdmin:this.props.isAdmin,onCancel:this.onCancel,test:this.state.merchandisingPromoType,promoId:this.state.promoId})}return t}},{key:"onCancel",value:function(){this.props.isAdmin?this.setState({merchandisingPromoType:null,submitted:!1,standardPromoSelected:!1,monthlyPromoSelected:!1,selectedPromoCopy:null,selectedPromoName:null,initPromo:null,adminInitPromo:null,adminSelectedPromo:!1},function(){return v.smoothScrollToWindowTop()}):this.changeCreatePromoType()}},{key:"renderPromoSubmittedConfirmation",value:function(){var e=this.state,t=e.submittedPromo;e.merchandisingPromoTypes;if(!t)return null;var n=E.default.createElement("span",{className:"merchPromo"},E.default.createElement("span",{className:"customToastSpan"},"Your nomination was submitted successfully."));document.getElementById("app").classList.add("customToastPromo"),setTimeout(function(){return b.toggleToast(!0,n,9e3)},0),l.browserHistory.push("/projects/coupon/bn-promo-summary"),setTimeout(function(){document.getElementById("app").classList.remove("customToastPromo")}.bind(this),1e4),window.scrollTo(0,250)}},{key:"render",value:function(){var e,t,s=this,n=this.state,o=(n.merchandisingPromoTypes,n.merchandisingPromoType),a=(n.formCanceled,n.submittedPromo),r=(n.adminPromoSubmitted,n.adminInitPromo),i=n.initPromo;i&&(e="TEMPLATE"==i.mercPromoType?i.position:i.mercPromoType),r&&(t="TEMPLATE"==r.mercPromoType?r.position:r.mercPromoType);var l=r&&C.default.getMerchandisingPromoIntro(t),u=r&&C.default.getMerchandisingPromoName(t),c=r&&C.default.getMerchandisingSubmitByPromoDates(t),d=r&&C.default.getMerchandisingDisplayStart(t),f=r&&C.default.getMerchandisingDisplayEnd(t),p=i&&C.default.getMerchandisingPromoIntro(e),m=i&&C.default.getMerchandisingPromoName(e),h=(0,T.bn_moment)(),y=this.state.rulesList,v=y.filter(function(e){return void 0!==e.start&&void 0!==e.end&&e.promoEndDisplayDate&&(0,T.bn_moment)(e.promoEndDisplayDate).isAfter(h)}),b=y.filter(function(e){return!e.start&&!e.end}).map(function(e){var t=e.mercPromoType,n=e.merchPromoName,o=e.copy;return E.default.createElement("div",{onClick:function(){return s.onMerchandisingPromoTypeChange(t,"standard")},tabIndex:"0",onKeyDown:s.makeClick,key:n},!s.state.isCouponSelected&&!s.state.standardPromoSelected&&E.default.createElement("div",{className:"selectedDiv"},E.default.createElement("div",{className:"coupon-body coupon-content"},E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-selectType coupon-name"},E.default.createElement("span",null,E.default.createElement("strong",null,n))),E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 coupon-title coupon-standard"},E.default.createElement("span",null,o)),E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-selectType coupon-btn"},E.default.createElement("a",{className:"go-back"},E.default.createElement("span",{className:"UnderlineGoBack",tabIndex:"0",onKeyDown:s.makeClick,onClick:function(){return s.onMerchandisingPromoTypeChange(t,"standard")}},"Choose Promotion"))))))}),g=v.map(function(e){var t="TEMPLATE"==e.mercPromoType?e.position:e.mercPromoType,n=e.merchPromoName,o=e.copy,a=(0,T.bn_moment)(e.promoEndDisplayDate).format("MMM DD, YYYY"),r=(0,T.bn_moment)(e.promoStartDisplayDate).format("MMM DD, YYYY"),i=(0,T.bn_moment)(e.end).format("MMM DD, YYYY");return E.default.createElement("div",{tabIndex:"0",onKeyDown:s.makeClick,onClick:function(){return s.onMerchandisingPromoTypeChange(t,"monthly")},key:n},!s.state.isCouponSelected&&!s.state.monthlyPromoSelected&&E.default.createElement("div",{className:"selectedDiv"},E.default.createElement("div",{className:"coupon-body coupon-content"},E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-selectType coupon-name"},E.default.createElement("span",null,E.default.createElement("strong",null,n))),E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 promo-panel"},E.default.createElement("span",{className:"monthlySubmit"},"Submit by: ",i),E.default.createElement("span",{className:"monthlyDates"},"Promotion Dates: ",r,"-",a)),E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 coupon-title coupon-month"},E.default.createElement("span",{className:"monthlypromodesc"},o)),E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-selectType coupon-btn"},E.default.createElement("a",{className:"go-back"},E.default.createElement("span",{className:"UnderlineGoBack",onClick:function(){return s.onMerchandisingPromoTypeChange(t,"monthly")},tabIndex:"0",onKeyDown:s.makeClick},"Choose Promotion"))))))});return E.default.createElement("div",{className:"create-coupon-container"},!this.state.adminPromoSubmitted&&E.default.createElement(S.default,{ref:"form"},this.isLoaded&&E.default.createElement("div",{className:"panel-section coupon-content"},E.default.createElement("div",null,O.hasFeatureFlag(_.MERCHANDISING)&&E.default.createElement("div",null,E.default.createElement("div",{className:"panel-header top-header"},E.default.createElement("div",{className:"section-number"},"1"),E.default.createElement("h2",null,"Select Promotion Type")),!(this.state.initPromo||this.state.isCouponSelected||this.state.standardPromoSelected||this.state.monthlyPromoSelected)&&E.default.createElement("div",null,E.default.createElement("div",{className:(0,P.default)("coupon-create",{createCouponSelected:"CreateCoupon"==this.state.tabActive,monthlyPromotionsSelected:"MonthlyPromotions"==this.state.tabActive,standardPromotionsSelected:"StandardPromotions"==this.state.tabActive})},E.default.createElement("div",{className:"btn btn-secondary btn-create-coupon btn-s",onClick:function(){return s.onTabClick("CreateCoupon")},tabIndex:"0",onKeyDown:this.makeClick},E.default.createElement("span",null,"Create Coupons")),E.default.createElement("div",{className:"btn btn-secondary btn-month-promo btn-s",onClick:function(){return s.onTabClick("MonthlyPromotions")},tabIndex:"0",onKeyDown:this.makeClick},E.default.createElement("span",null,"Monthly Promotions")),E.default.createElement("div",{className:"btn btn-secondary btn-stan-promo btn-s",onClick:function(){return s.onTabClick("StandardPromotions")},tabIndex:"0",onKeyDown:this.makeClick},E.default.createElement("span",null,"Standard Promotions"))),"MonthlyPromotions"==this.state.tabActive&&0<v.length&&!this.state.loading&&E.default.createElement("div",{className:"create-coupon-subtitle-container btn-selectType coupon-desc"},E.default.createElement("span",{className:"coupon-nominate"},"Nominate your eBook for one of the following monthly promotional events on BN.com. If you need to make changes to a submission or withdraw a title after it has been submitted, please also email ",E.default.createElement("a",{href:"mailto:bnpresspromo@bn.com"},"bnpresspromo@bn.com"),"."),E.default.createElement("div",null,g)),"MonthlyPromotions"==this.state.tabActive&&0===v.length&&!this.state.loading&&E.default.createElement("div",{className:"create-coupon-subtitle-container btn-selectType coupon-desc"},E.default.createElement("span",{className:"coupon-nominate"},"There are no monthly promotions available at this time. Please check back later.")),"StandardPromotions"==this.state.tabActive&&E.default.createElement("div",{className:"create-coupon-subtitle-container btn-selectType coupon-desc"},E.default.createElement("span",{className:"coupon-nominate"},"Nominate your eBook for one of the following promotional events on BN.com. If you need to make changes to a submission or withdraw a title after it has been submitted, please also email ",E.default.createElement("a",{href:"mailto:bnpresspromo@bn.com"},"bnpresspromo@bn.com"),"."),E.default.createElement("div",null,b))),(this.state.initPromo||this.state.monthlyPromoSelected||this.state.standardPromoSelected)&&E.default.createElement("div",{className:"selectedDiv"},E.default.createElement("div",{className:"coupon-body coupon-content  coupon-selectedBody"},E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-selectType coupon-name"},i&&E.default.createElement("span",null,E.default.createElement("strong",null,m)),!i&&E.default.createElement("span",null,E.default.createElement("strong",null,this.state.selectedPromoName))),!i&&this.state.monthlyPromoSelected&&E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 promo-panel"},E.default.createElement("span",{className:"monthlySubmit"},"Submit by: ",(0,T.bn_moment)(this.state.submitBy).format("MMM DD, YYYY")),E.default.createElement("span",{className:"monthlyDates"},"Promotion Dates: ",(0,T.bn_moment)(this.state.promoStart).format("MMM DD, YYYY")," - ",(0,T.bn_moment)(this.state.promoEnd).format("MMM DD, YYYY"))),i&&"MonthlyPromotions"==this.state.tabActive&&E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 promo-panel"},E.default.createElement("span",{className:"monthlySubmit"},"Submit by: ",(0,T.bn_moment)(this.state.selectedPromoSubmitBy).format("MMM DD, YYYY")),E.default.createElement("span",{className:"monthlyDates"},"Promotion Dates: ",(0,T.bn_moment)(this.state.selectedPromoDisplayStart).format("MMM DD, YYYY")," - ",(0,T.bn_moment)(this.state.selectedPromoDisplayEnd).format("MMM DD, YYYY"))),E.default.createElement("div",{className:(0,P.default)("col-lg-12 col-md-12 col-sm-12 coupon-standard",{"coupon-selectedCopy":this.state.monthlyPromoSelected||i&&"MonthlyPromotions"==this.state.tabActive})},i&&E.default.createElement("span",null,p),!i&&E.default.createElement("span",null,this.state.selectedPromoCopy)),E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-selectType coupon-greyBtn"},E.default.createElement("span",null,"Selected"))),E.default.createElement("div",{className:"BtnBlueBorder"},E.default.createElement("span",{tabIndex:"0",onKeyDown:this.makeClick,onClick:function(){return s.changeCreatePromoType()}},"Change Promotion"))))))),this.props.isAdmin&&E.default.createElement(S.default,{ref:"form"},this.isLoaded&&E.default.createElement("div",{className:"panel-section coupon-content coupon-layout"},E.default.createElement("div",null,E.default.createElement("div",{className:"panel-header top-header"},E.default.createElement("div",{className:"section-number"},"1"),E.default.createElement("h2",null,"Select Promotion Type")),!this.state.adminSelectedPromo&&E.default.createElement("div",null,E.default.createElement("div",{className:(0,P.default)("coupon-create",{monthlyPromotionsSelected:"MonthlyPromotions"==this.state.tabActive,standardPromotionsSelected:"StandardPromotions"==this.state.tabActive})},E.default.createElement("div",{className:"btn btn-secondary btn-month-promo btn-s",onClick:function(){return s.onTabClick("MonthlyPromotions")}},E.default.createElement("span",null,"Monthly Promotions")),E.default.createElement("div",{className:"btn btn-secondary btn-stan-promo btn-s",onClick:function(){return s.onTabClick("StandardPromotions")}},E.default.createElement("span",null,"Standard Promotions"))),"MonthlyPromotions"==this.state.tabActive&&0<v.length&&!this.state.loading&&E.default.createElement("div",{className:"create-coupon-subtitle-container btn-selectType coupon-desc"},E.default.createElement("span",{className:"coupon-nominate"},"Nominate your eBook for one of the following monthly promotional events on BN.com. If you need to make changes to a submission or withdraw a title after it has been submitted, please also email ",E.default.createElement("a",{href:"mailto:bnpresspromo@bn.com"},"bnpresspromo@bn.com"),"."),E.default.createElement("div",null,g)),"MonthlyPromotions"==this.state.tabActive&&0===v.length&&!this.state.loading&&E.default.createElement("div",{className:"create-coupon-subtitle-container btn-selectType coupon-desc"},E.default.createElement("span",{className:"coupon-nominate"},"There are no monthly promotions available at this time. Please check back later.")),"StandardPromotions"==this.state.tabActive&&E.default.createElement("div",{className:"create-coupon-subtitle-container btn-selectType coupon-desc"},E.default.createElement("span",{className:"coupon-nominate"},"Nominate your eBook for one of the following promotional events on BN.com. If you need to make changes to a submission or withdraw a title after it has been submitted, please also email ",E.default.createElement("a",{href:"mailto:bnpresspromo@bn.com"},"bnpresspromo@bn.com"),"."),E.default.createElement("div",null,b))),this.state.adminSelectedPromo&&E.default.createElement("div",{className:"selectedDiv"},E.default.createElement("div",{className:"coupon-body coupon-content"},E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-selectType coupon-name"},r&&E.default.createElement("span",null,E.default.createElement("strong",null,u)),!r&&E.default.createElement("span",null,E.default.createElement("strong",null,this.state.selectedPromoName))),!r&&this.state.monthlyPromoSelected&&E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 promo-panel"},E.default.createElement("span",{className:"monthlySubmit"},"Submit by: ",(0,T.bn_moment)(this.state.submitBy).format("MMM DD, YYYY")),E.default.createElement("span",{className:"monthlyDates"},"Promotion Dates: ",(0,T.bn_moment)(this.state.promoStart).format("MMM DD, YYYY")," - ",(0,T.bn_moment)(this.state.promoEnd).format("MMM DD, YYYY"))),r&&"MonthlyPromotions"==this.state.tabActive&&E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 promo-panel"},E.default.createElement("span",{className:"monthlySubmit"},"Submit by: ",(0,T.bn_moment)(c).format("MMM DD, YYYY")),E.default.createElement("span",{className:"monthlyDates"},"Promotion Dates: ",(0,T.bn_moment)(d).format("MMM DD, YYYY")," - ",(0,T.bn_moment)(f).format("MMM DD, YYYY"))),E.default.createElement("div",{className:(0,P.default)("col-lg-12 col-md-12 col-sm-12 coupon-standard",{"coupon-selectedCopy":this.state.monthlyPromoSelected||r&&"MonthlyPromotions"==this.state.tabActive})},r&&E.default.createElement("span",null,l),!r&&E.default.createElement("span",null,this.state.selectedPromoCopy)),E.default.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-selectType coupon-greyBtn"},E.default.createElement("span",null,"Selected"))),E.default.createElement("div",{className:"BtnBlueBorder"},E.default.createElement("span",{tabIndex:"0",onKeyDown:this.makeClick,onClick:function(){return s.changeCreatePromoType()}},"Change Promotion")))))),!this.props.adminInitPromo&&this.renderPromoSubmittedConfirmation(),this.isLoaded()&&!!o&&!a&&(this.state.standardPromoSelected||this.state.monthlyPromoSelected||this.state.initPromo||this.state.adminInitPromo)&&E.default.createElement("div",null,this.getChosenPromoForm(o)),this.state.loading&&E.default.createElement(k.default,null),!this.isLoaded()&&E.default.createElement(k.default,null))}}])&&A(t.prototype,n),o&&A(t,o),i}();t.default=I},529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=(o=n(0))&&o.__esModule?o:{default:o},i=n(7),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(15));function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.default.Component),n=t,(o=[{key:"renderContributor",value:function(t){var e=t.lastName+(t.firstName?", "+t.firstName:""),n=Object.keys(s.CONTRIBUTOR_ENUMS).find(function(e){return s.CONTRIBUTOR_ENUMS[e]===t.role});return r.default.createElement("dd",{key:t.lastName+t.firstName+t.role},e," (",n,")")}},{key:"renderDuration",value:function(e){var t=e;return t.split(":")[0]+" hours, "+t.split(":")[1]+" minutes"}},{key:"renderOtherPrintFormatFields",value:function(){var e=this.props.project;return r.default.createElement("div",{className:"row border-top"},r.default.createElement("div",{className:"col-xs-6"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Page Size"),this.renderValue(e.pageSizeByKey?e.pageSizeByKey.label:null))),r.default.createElement("div",{className:"col-xs-6"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Page Count"),this.renderValue(e.pageCount))),r.default.createElement("div",{className:"col-xs-6"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Print Color"),this.renderValue(e.printColorByKey?e.printColorByKey.label:null))),r.default.createElement("div",{className:"col-xs-6"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Paper Color"),this.renderValue(e.paperColorByKey?e.paperColorByKey.label:null))),r.default.createElement("div",{className:"col-xs-6"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Cover Finish"),this.renderValue(e.coverFinishByKey?e.coverFinishByKey.label:null))))}},{key:"renderValue",value:function(e){return e?r.default.createElement("dd",null,e):r.default.createElement("dd",null,r.default.createElement("span",null,"N/A"))}},{key:"render",value:function(){var t=this,e=this.props.project;return r.default.createElement("div",{className:"project-summary"},r.default.createElement("div",{className:"row"},!this.props.sidePreview&&r.default.createElement("div",{className:"col-sm-3 col-xs-12"},r.default.createElement("img",{src:e.coverThumbnail,width:"192px",className:"img-responsive",alt:"cover image"})),this.props.sidePreview&&r.default.createElement("div",{className:"center-block col-xs-12 margin-bottom30 paddingLeft-thumbnail"},r.default.createElement("img",{src:e.coverThumbnail,width:"192px",className:"img-responsive",alt:"cover image"})),r.default.createElement("div",{className:this.props.sidePreview?"col-sm-12":"col-sm-9 col-xs-12"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Title"),this.renderValue(e.title)))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Product Page URL"),e.productPageUrl&&r.default.createElement("dd",null,r.default.createElement("a",{href:e.productPageUrl,target:"_blank"},e.productPageUrl)),!e.productPageUrl&&this.renderValue()))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Cover Image URL"),e.coverThumbnail&&r.default.createElement("dd",null,r.default.createElement("a",{href:e.coverThumbnail,target:"_blank"},e.coverThumbnail)),!e.coverThumbnail&&this.renderValue()))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Contributors"),e.contributors.map(function(e){return t.renderContributor(e)})))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Format"),this.renderValue(e.isEBook?"eBook":"AUDIOBOOK"==e.type?"Audiobook":"Print Book")))),"AUDIOBOOK"==e.type&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Listening Duration"),this.renderDuration(e.runtime)))),"AUDIOBOOK"!==e.type&&!e.isEBook&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-6"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Cover Format"),this.renderValue(e.coverFormatByKey?e.coverFormatByKey.label:null)))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:this.props.sidePreview?"col-sm-12":"col-xs-6"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Publication Date"),this.renderValue(e.publishedDate?(0,i.bn_moment)(e.publishedDate).format("MMMM DD, YYYY"):null))),r.default.createElement("div",{className:this.props.sidePreview?"col-sm-12":"col-xs-6"},r.default.createElement("dl",null,r.default.createElement("dt",null,"List Price"),this.renderValue(e.price?"$"+e.price:null))),e.inSeries&&r.default.createElement("div",{className:this.props.sidePreview?"col-sm-12":"col-xs-6"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Series Name"),this.renderValue(e.seriesName&&e.seriesName))),e.inSeries&&r.default.createElement("div",{className:this.props.sidePreview?"col-sm-12":"col-xs-6"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Series Number"),this.renderValue(e.seriesNumber&&e.seriesNumber))),r.default.createElement("div",{className:this.props.sidePreview?"col-sm-12":"col-xs-6"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Status"),e.status===s.PROJECT_STATUSES.ONSALE&&this.renderValue((0,i.bn_moment)(e.publishedDate).isBefore((0,i.bn_moment)())?"On Sale":"Pre-Order"),e.status!==s.PROJECT_STATUSES.ONSALE&&this.renderValue(r.default.createElement("span",null,"Off Sale")))),r.default.createElement("div",{className:this.props.sidePreview?"col-sm-12":"col-xs-6"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Mature"),e.noMerchFlag&&r.default.createElement("dd",null,r.default.createElement("span",null,"Yes")),!e.noMerchFlag&&r.default.createElement("dd",null,"No")))),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Primary Category"),this.renderValue(e.categories[0].categoryCrumbs)))),1<e.categories.length&&r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("dl",null,r.default.createElement("dt",null,"Other Categories"),e.categories.slice(1).map(function(e){return r.default.createElement("dd",{key:e.categoryId},e.categoryCrumbs)})))),"AUDIOBOOK"!==e.type&&!e.isEBook&&this.renderOtherPrintFormatFields())))}}])&&l(n.prototype,o),a&&l(n,a),t}();t.default=f},55:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addProject=function(t){r.addProject(t,function(e){m.default.dispatch({type:h.default.Cart.ADD_PROJECT,args:{projectId:t,cart:e}})})},t.loadCart=function(e){r.loadCart(function(e){m.default.dispatch({type:h.default.Cart.CHANGE_CART,args:{cart:e}})},e?function(e){return m.default.dispatch({type:h.default.Cart.CHANGE_CART_ERROR,args:{errors:e}}),!0}:void 0)},t.updateEprotect=function(){r.updateEprotect(function(e){m.default.dispatch({type:h.default.Cart.UPDATE_EPROTECT,args:{eProtectId:e}})})},t.initCheckout=function(e,t){var n=function(e){m.default.dispatch({type:h.default.Cart.INIT_CHECKOUT,args:{cart:e}})};e?r.loadTokenCart(n):t?r.loadCartCheckoutPage(n):r.loadCart(n)},t.loadShippingMethods=function(){r.loadShippingMethods(function(e){m.default.dispatch({type:h.default.Cart.LOAD_SHIPPING_METHODS,args:{shippingMethods:e}})})},t.updateProject=function(t,e){m.default.dispatch({type:h.default.Cart.START_CHANGE_CART}),r.updateProject(t,e,function(e){m.default.dispatch({type:h.default.Cart.CHANGE_CART,args:{projectId:t,cart:e}})})},t.updateShippingAddressNickName=function(e,t){l(),r.updateShippingAddressNickName(e,t,function(e){m.default.dispatch({type:h.default.Cart.UPDATE_SHIPPING_ADDRESS,args:{cart:e}})},function(e){return c("shippingAddress",e)})},t.updateShippingAddress=function(n){l(),r.updateShippingAddress(n,function(e){m.default.dispatch({type:h.default.Cart.UPDATE_SHIPPING_ADDRESS,args:{cart:e}})},function(e){var t=e[0].code;return 1077==t||1082==t||1083==t||1084==t?(m.default.dispatch({type:h.default.Cart.UPDATE_SHIPPING_ADDRESS_ERROR,args:{data:n,errors:e}}),!0):c("shippingAddress",e)})},t.updateShippingMethod=function(e){l(),r.updateShippingMethod(e,function(e){m.default.dispatch({type:h.default.Cart.UPDATE_SHIPPING_METHOD,args:{cart:e}})},function(e){return c("shippingMethod",e)})},t.updatePaymentMethod=function(n,e){if(e&&null===(n=u(n,!!n.id)))return void setTimeout(function(){return c("paymentMethod",[a.CART_ERRORS.INVALID_CARD])},0);l(),r.updatePaymentMethod(n,function(e){m.default.dispatch({type:h.default.Cart.UPDATE_PAYMENT_METHOD,args:{cart:e}}),o.loadPaymentMethods(function(e){if(e){var t=!0,n=!1,o=void 0;try{for(var a,r=e[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var i=a.value;i.expirationMonth&&1===i.expirationMonth.length&&(i.expirationMonth="0"+i.expirationMonth)}}catch(e){n=!0,o=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw o}}}m.default.dispatch({type:h.default.AuthenticatedUser.LOAD_PAYMENT_METHODS,args:{paymentMethods:e}})})},function(e){var t=e[0].code;return 1077==t||1082==t||1083==t||1084==t?(m.default.dispatch({type:h.default.Cart.UPDATE_PAYMENT_2FA_ERRORS,args:{data:n,errors:e}}),!0):c("paymentMethod",e)})},t.loadBillingAddressCountries=function(){r.loadBillingAddressCountries(function(e){m.default.dispatch({type:h.default.Cart.LOAD_BILLING_ADDRESS_COUNTRIES,args:{countries:e}})})},t.loadBillingAddressStates=function(e){r.loadBillingAddressStates(e,function(e){m.default.dispatch({type:h.default.Cart.LOAD_BILLING_ADDRESS_STATES,args:{states:e}})})},t.beginEditingShippingAddressSection=function(){m.default.dispatch({type:h.default.Cart.BEGIN_EDITING_SHIPPING_ADDRESS_SECTION,args:{}})},t.cancelEditingShippingAddressSection=function(){l(),m.default.dispatch({type:h.default.Cart.CANCEL_EDITING_SHIPPING_ADDRESS_SECTION,args:{}})},t.beginEditingPaymentSection=function(){m.default.dispatch({type:h.default.Cart.BEGIN_EDITING_PAYMENT_SECTION,args:{}})},t.cancelEditingPaymentSection=function(){l(),m.default.dispatch({type:h.default.Cart.CANCEL_EDITING_PAYMENT_SECTION,args:{}})},t.submitOrder=function(n,o,a){l(),r.submitOrder(n,o,a,function(e){m.default.dispatch({type:h.default.Cart.SUBMIT_ORDER,args:{summary:e}})},function(e){var t=e[0].code;return 1077==t||1082==t||1083==t||1084==t?(m.default.dispatch({type:h.default.Cart.SUBMIT_ORDER_2FA_ERRORS,args:{securityCode:n,eProtectId:o,recaptchaToken:a,errors:e}}),!0):c("submitOrder",e)})},t.clearCheckoutErrors=l,t.handleCheckoutErrors=c;var m=s(n(16)),h=s(n(18)),o=i(n(331)),r=i(n(497)),a=i(n(332));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}function l(){setTimeout(function(){m.default.dispatch({type:h.default.Cart.CHECKOUT_ERROR,args:{errors:{generalErrors:[],fieldErrors:{}}}})})}var u=function(e,t){var n=window.ProtectPANandCVV(e.creditCardNumber,e.cvv,!1);return null===n?n:(e.creditCardNumber=n[0],t||(e.cryptCvv=n[1]),e.integrityCheckVal=n[2],e)};function c(e,t){if(!t||!t.length)return!1;var n={contextIdentifier:e,generalErrors:[],fieldErrors:{}},o=!1,a=!1,r=!0,i=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;if("31000"===c.code||"31001"===c.code){for(var d=c.description;d.startsWith("|");)d=d.substring(1);n.generalErrors.push(d.split("|")[0]),o=!0}else if("31002"===c.code){var f=y(c.description);f.fieldName.length&&(n.fieldErrors[f.fieldName]=f.text,a=o=!0)}else if("31003"===c.code){var p=c.description.split("|")[1];return m.default.dispatch({type:h.default.Cart.CVV_PROMPT_REQUIRED,args:{message:p}}),!0}a&&n.generalErrors.push("Errors were found with the information you entered. Scroll down and correct the errors before resubmitting.")}}catch(e){i=!0,s=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw s}}return!!o&&(m.default.dispatch({type:h.default.Cart.CHECKOUT_ERROR,args:{errors:n}}),!0)}function y(e){var t={fieldName:null,text:null};if(e){e.startsWith("|")&&(e=e.substring(1));var n=e.split("|");2<=n.length&&(0<n[0].length&&(t.fieldName=n[0]),0<n[1].length&&(t.text=n[1]))}return t}},56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(44),o=a(n(16)),i=a(n(187));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this))).messages=null,e.cmsModules=null,e._getRecipient=null,e._getSiteModule=null,e._getSiteModuleImage=null,e._getSiteModuleDisplay=null,e._getSiteModuleImageUpload=null,e._getBannerImageUpload=null,e._getSiteModuleNewImage=null,e._getBannerLogo=null,e.adBanner=null,e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.EventEmitter),n=t,(o=[{key:"addGetBroadcastRecipientListener",value:function(e){this.addListener(P,e)}},{key:"removeGetBroadcastRecipientListener",value:function(e){this.removeListener(P,e)}},{key:"addGetBroadcastMessagesListener",value:function(e){this.addListener(m,e)}},{key:"removeGetBroadcastMessagesListener",value:function(e){this.removeListener(m,e)}},{key:"addGetPublishersLoadedListener",value:function(e){this.addListener(y,e)}},{key:"removeGetPublishersLoadedListener",value:function(e){this.removeListener(y,e)}},{key:"addDeletePublishersLoadedListener",value:function(e){this.addListener(v,e)}},{key:"removeDeletePublishersLoadedListener",value:function(e){this.removeListener(v,e)}},{key:"addDeletePromotionLoadedListener",value:function(e){this.addListener(b,e)}},{key:"removeDeletePromotionLoadedListener",value:function(e){this.removeListener(b,e)}},{key:"addGetPromotionsLoadedListener",value:function(e){this.addListener(h,e)}},{key:"removeGetPromotionsLoadedListener",value:function(e){this.removeListener(h,e)}},{key:"addScheduleBroadcastMessageListener",value:function(e){this.addListener(g,e)}},{key:"removeScheduleBroadcastMessageListener",value:function(e){this.removeListener(g,e)}},{key:"addPreviewBroadcastMessageListener",value:function(e){this.addListener(E,e)}},{key:"removePreviewBroadcastMessageListener",value:function(e){this.removeListener(E,e)}},{key:"addSiteModuleListener",value:function(e){this.addListener(S,e)}},{key:"removeSiteModuleListener",value:function(e){this.removeListener(S,e)}},{key:"addSiteModuleImageListener",value:function(e){this.addListener(_,e)}},{key:"removeSiteModuleImageListener",value:function(e){this.removeListener(_,e)}},{key:"addSiteModuleImageNewListener",value:function(e){this.addListener(O,e)}},{key:"removeSiteModuleImageNewListener",value:function(e){this.removeListener(O,e)}},{key:"addSiteModuleDisplayListener",value:function(e){this.addListener(C,e)}},{key:"removeSiteModuleDisplayListener",value:function(e){this.removeListener(C,e)}},{key:"addSiteModuleImageUploadListener",value:function(e){this.addListener(k,e)}},{key:"removeSiteModuleImageUploadListener",value:function(e){this.removeListener(k,e)}},{key:"addBannerImageUploadListener",value:function(e){this.addListener(T,e)}},{key:"removeBannerImageUploadListener",value:function(e){this.removeListener(T,e)}},{key:"onGetBroadcastMessages",value:function(e){this.messages=e.data,this.emit(m,this.messages)}},{key:"onGetPromotions",value:function(e){this.messages=e.data,this.emit(h,this.messages)}},{key:"onGetPublishers",value:function(e){this.messages=e.data,this.emit(y,this.messages)}},{key:"onDeletePublishers",value:function(e){this.emit(v,e.data)}},{key:"onDeletePromotions",value:function(e){this.emit(b,e.data)}},{key:"onGetPromotionMessages",value:function(e){this.messages=e.data,this.emit(m,this.messages)}},{key:"onScheduleBroadcastMessage",value:function(e){this.messages=e.data,this.emit(g,this.messages)}},{key:"onPreviewBroadcastMessage",value:function(e){this.emit(E,e.data)}},{key:"onSiteModuleoptionsLoaded",value:function(e){this._getSiteModule={result:e},this.emit(S)}},{key:"onSiteModuleImageLoaded",value:function(e){this._getSiteModuleImage={result2:e},this.emit(_)}},{key:"onSiteModuleImageNewLoaded",value:function(e){this._getSiteModuleNewImage={result4:e},this.emit(O)}},{key:"onSiteModuleDisplay",value:function(e){this._getSiteModuleDisplay={result3:e},this.emit(C)}},{key:"onImageUploadBanner",value:function(e){this._getSiteModuleImageUpload={file:e},this.emit(k)}},{key:"onBannerImageUploaded",value:function(e){this._getBannerImageUpload={file:e},this.emit(T)}},{key:"onSchedulesiteModule",value:function(e){this.cmsModules=e.data,this.emit(N,this.cmsModules)}},{key:"onGetBroadcastRecipient",value:function(e){this._getRecipient={result:e},this.emit(P)}},{key:"getMessage",value:function(t){return this.messages.data&&this.messages.data.find(function(e){return e.messageId===t})}},{key:"getBroadcastMessages",value:function(){return this.messages}},{key:"getSiteModule",value:function(){return this._getSiteModule}},{key:"getSiteModuleImage",value:function(){return this._getSiteModuleImage}},{key:"getSiteModuleNewImage",value:function(){return this._getSiteModuleNewImage}},{key:"getSiteModuleImageUpload",value:function(){return this._getSiteModuleImageUpload}},{key:"getBannerImageUpload",value:function(){return this._getBannerImageUpload}},{key:"getRecipient",value:function(){return this._getRecipient}},{key:"getSiteModuleDisplay",value:function(){return this._getSiteModuleDisplay}},{key:"addGetSiteModulesListener",value:function(e){this.addListener(A,e)}},{key:"removeGetSiteModulesListener",value:function(e){this.removeListener(A,e)}},{key:"addScheduleSiteModulesListener",value:function(e){this.addListener(N,e)}},{key:"removeScheduleSiteModulesListener",value:function(e){this.removeListener(N,e)}},{key:"addGetAdBannerListener",value:function(e){this.addListener(L,e)}},{key:"removeGetAdBannerListener",value:function(e){this.removeListener(L,e)}},{key:"addFormUploadEnableListener",value:function(e){this.addListener(M,e)}},{key:"removeFormUploadEnableListener",value:function(e){this.removeListener(M,e)}},{key:"addResetAccountLockoutListener",value:function(e){this.addListener(B,e)}},{key:"removeResetAccountLockoutListener",value:function(e){this.removeListener(B,e)}},{key:"addOverrideAccountLockoutListener",value:function(e){this.addListener(x,e)}},{key:"removeOverrideAccountLockoutListener",value:function(e){this.removeListener(x,e)}},{key:"addFormFileUploadListener",value:function(e){this.addListener(j,e)}},{key:"removeFormFileUploadListener",value:function(e){this.removeListener(j,e)}},{key:"onGetSiteModules",value:function(e){this.cmsModules=e.data,this.emit(A,this.cmsModules)}},{key:"onGetAdBanners",value:function(e){this.adBanner=e.data,this.emit(L,this.adBanner)}},{key:"getSiteModuleId",value:function(){return this.cmsModules}},{key:"getSiteModules",value:function(t){return this.cmsModules.data&&this.cmsModules.data.find(function(e){return e.id===t})}},{key:"getPageOptions",value:function(t){return U.filter(function(e){return e.type===t})}},{key:"showPageName",value:function(t){var e=U&&U.find(function(e){return e.value===t});return e?e.label:t}},{key:"getTemplateFromResult",value:function(e){var t={bannerTemplate:"",leftnavTemplate:"",leftnavDoubleTemplate:""};return 0<e.length&&e.forEach(function(e){"LEFT_NAV_PROJECT"==e.moduleType||"LEFT_NAV_BAB"==e.moduleType?(t.leftnavTemplate=e.template,t.leftnavDoubleTemplate=e.doubleTemplate):t.bannerTemplate=e.template}),t}},{key:"addBannerLogoListener",value:function(e){this.addListener(D,e)}},{key:"addBannerSizesListener",value:function(e){this.addListener(I,e)}},{key:"addTurnAroundListener",value:function(e){this.addListener(R,e)}},{key:"addSaveBannerDataListener",value:function(e){this.addListener(w,e)}},{key:"removeBannerLogoListener",value:function(e){this.removeListener(D,e)}},{key:"removeBannerSizesListener",value:function(e){this.removeListener(I,e)}},{key:"removeTurnAroundListener",value:function(e){this.removeListener(R,e)}},{key:"removeSaveBannerDataListener",value:function(e){this.removeListener(w,e)}},{key:"onBannerLogoLoaded",value:function(e){this._getBannerLogo={result:e},this.emit(D)}},{key:"getBannerLogo",value:function(){return this._getBannerLogo}},{key:"handleActions",value:function(e){switch(e.type){case i.default.LOAD_BROADCAST_MESSAGES:this.onGetBroadcastMessages(e.args);break;case i.default.LOAD_PROMOTIONS:this.onGetPromotions(e.args);break;case i.default.LOAD_PUBLISHERS:this.onGetPublishers(e.args);break;case i.default.DELETE_PUBLISHERS:this.onDeletePublishers(e.args);break;case i.default.DELETE_PROMOTION:this.onDeletePromotions(e.args);break;case i.default.LOAD_PROMOTION_MESSAGES:this.onGetPromotionMessages(e.args);break;case i.default.SCHEDULE_BROADCAST_MESSAGE:this.onScheduleBroadcastMessage(e.args);break;case i.default.PREVIEW_BROADCAST_MESSAGE:this.onPreviewBroadcastMessage(e.args);break;case i.default.LOAD_BROADCAST_RECIPIENTS:this.onGetBroadcastRecipient(e.args);break;case i.default.LOAD_SITEMODULE_OPTIONS:this.onSiteModuleoptionsLoaded(e.args);break;case i.default.LOAD_SITEMODULE_IMAGE:this.onSiteModuleImageLoaded(e.args);break;case i.default.LOAD_SITEMODULE_IMAGE_NEW:this.onSiteModuleImageNewLoaded(e.args);break;case i.default.LOAD_SITEMODULE_DISPLAY:this.onSiteModuleDisplay(e.args);break;case i.default.UPLOAD_SITEMODULE_IMAGE:this.onImageUploadBanner(e.args);break;case i.default.UPLOAD_ADBANNER_IMAGE:this.onBannerImageUploaded(e.args);break;case i.default.SCHEDULE_SITE_MODULES:this.onSchedulesiteModule(e.args);break;case i.default.LOAD_SITE_MODULES:this.onGetSiteModules(e.args);break;case i.default.LOAD_BANNER_LOGO_LOADED:this.onBannerLogoLoaded(e.args);break;case i.default.LOAD_BANNER_SIZE_LOADED:this.emit(I,e.args.data);break;case i.default.LOAD_TURN_AROUND_LOADED:this.emit(R,e.args.data);break;case i.default.LOAD_SAVE_BANNER_DATA_LOADED:this.emit(w,e.args.data);break;case i.default.LOAD_AD_BANNERS:this.onGetAdBanners(e.args);break;case i.default.UPLOAD_FORM_FILE:this.emit(j,e.args);break;case i.default.UPLOAD_FORM_ENABLE:this.emit(M,e.args);break;case i.default.RESET_ACCOUNT_LOCKOUT:this.emit(B,e.args);break;case i.default.OVERRIDE_ACCOUNT_LOCKOUT:this.emit(x,e.args)}}}])&&l(n.prototype,o),a&&l(n,a),t}());o.default.register(f.handleActions.bind(f));var p=f;t.default=p;var m="broadcastMessagesLoaded",h="getPromotionsLoaded",y="getPublishersLoaded",v="deletePublishersLoaded",b="deletePromotionLoaded",g="broadcastMessageScheduled",E="broadcastMessagePreviewed",P="broadcastRecipientLoaded",S="sitemodule",_="sitemoduleImage",O="sitemoduleImageNew",C="sitemoduleDisplay",k="sitemoduleImageUpload",T="bannerImageUpload",A="siteModulesLoaded",N="siteModulesScheduled",L="adBannersLoaded",D="bannerlogo",I="bnnersizes",R="turnaroundtime",w="bnnersave",j="formFileUploadSuccess",M="formUploadEnableSuccess",B="resetAccountLockoutSuccess",x="overrideAccountLockoutSuccess",U=[{label:"Homepage",value:"home",type:"BANNER"},{label:"Print On Demand",value:"print-on-demand",type:"BANNER"},{label:"How It Works",value:"how-it-works",type:"BANNER"},{label:"Make More Money",value:"make-more-money",type:"BANNER"},{label:"Reach Millions Of Readers",value:"reach-millions-of-readers",type:"BANNER"},{label:"Projects",value:"projects",type:"LEFT_NAV_PROJECT"},{label:"BAB Interior - EBOOK",value:"ebook-interior",type:"LEFT_NAV_BAB"},{label:"BAB Cover - EBOOK",value:"ebook-cover",type:"LEFT_NAV_BAB"},{label:"BAB Book Details - EBOOK",value:"ebook-details",type:"LEFT_NAV_BAB"},{label:"BAB Vendor Form - EBOOK",value:"ebook-vendor",type:"LEFT_NAV_BAB"},{label:"BAB Review & Publish - EBOOK",value:"ebook-review",type:"LEFT_NAV_BAB"},{label:"BAB Book Size & Type - PRINT BOOK",value:"print-size",type:"LEFT_NAV_BAB"},{label:"BAB Interior - PRINT BOOK",value:"print-interior",type:"LEFT_NAV_BAB"},{label:"BAB Cover - PRINT BOOK",value:"print-cover",type:"LEFT_NAV_BAB"},{label:"BAB Book Details - PRINT BOOK",value:"print-details",type:"LEFT_NAV_BAB"},{label:"BAB Vendor Form - PRINT BOOK",value:"print-vendor",type:"LEFT_NAV_BAB"},{label:"Review & Publish - PRINT BOOK",value:"print-review",type:"LEFT_NAV_BAB"}]},59:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBroadcastMessage=function(e,t){s.createBroadcastMessage(e,t,function(e){i.default.dispatch({type:l.default.SCHEDULE_BROADCAST_MESSAGE,args:{data:e}})})},t.updateBroadcastMessage=function(e,t,n,o){s.updateBroadcastMessage(e,t,n,o,function(e){i.default.dispatch({type:l.default.SCHEDULE_BROADCAST_MESSAGE,args:{data:e}})})},t.updatePromotionMessage=function(e){s.updatePromotionMessage(e,function(e){i.default.dispatch({type:l.default.SCHEDULE_BROADCAST_MESSAGE,args:{data:e}})})},t.deleteMessage=function(e,t,n,o){s.deleteMessage(e,t,n,o,function(e){i.default.dispatch({type:l.default.LOAD_BROADCAST_MESSAGES,args:{data:e}})})},t.getBroadcastRecipient=function(e){s.getBroadcastRecipient(e,function(e){i.default.dispatch({type:l.default.LOAD_BROADCAST_RECIPIENTS,args:{data:e}})})},t.getMessages=function(e,t,n,o){e===a.MessageType.PROMOTION_MESSAGE?s.getPromotionMessages(function(e){i.default.dispatch({type:l.default.LOAD_PROMOTION_MESSAGES,args:{data:e}})}):s.getBroadcastMessages(e,t,n,o,function(e){i.default.dispatch({type:l.default.LOAD_BROADCAST_MESSAGES,args:{data:e}})})},t.getPromotions=function(e,t,n,o,a){s.getPromotions(e,t,n,o,a,function(e){i.default.dispatch({type:l.default.LOAD_PROMOTIONS,args:{data:e}})})},t.getPublishers=function(e,t,n){s.getPublishers(e,t,n,function(e){i.default.dispatch({type:l.default.LOAD_PUBLISHERS,args:{data:e}})})},t.DeletePublishers=function(e){s.DeletePublishers(e,function(e){i.default.dispatch({type:l.default.DELETE_PUBLISHERS,args:{data:e}})})},t.exportPromotion=function(e){s.exportPromotion(e,function(e){i.default.dispatch({type:l.default.EXPORT_REPORT_PUBLISHERS,args:{data:e}})})},t.DeletePromotion=function(e,t,n,o,a,r){s.DeletePromotion(e,t,n,o,a,r,function(e){i.default.dispatch({type:l.default.DELETE_PROMOTION,args:{data:e}})})},t.onPreviewBroadcastMessage=function(e){s.getBroadcastMessagePreview(e,function(e){i.default.dispatch({type:l.default.PREVIEW_BROADCAST_MESSAGE,args:{data:e}})})},t.onSiteModuleoptionsLoaded=function(){s.onSiteModuleoptionsLoaded(function(e){i.default.dispatch({type:l.default.LOAD_SITEMODULE_OPTIONS,args:{data:e}})})},t.onSiteModuleImageLoaded=function(){s.onSiteModuleImageLoaded(function(e){i.default.dispatch({type:l.default.LOAD_SITEMODULE_IMAGE,args:{data:e}})})},t.onPageSiteModuleDisplay=function(e,t){s.onPageSiteModuleDisplay(e,t,function(e){i.default.dispatch({type:l.default.LOAD_SITEMODULE_DISPLAY,args:{data:e}})})},t.onImageUploadBanner=function(e){s.onImageUploadBanner(e,function(e){i.default.dispatch({type:l.default.UPLOAD_SITEMODULE_IMAGE,args:{data:e}})})},t.onImageUploadNew=function(e){s.onImageUploadNew(e,function(e){i.default.dispatch({type:l.default.LOAD_SITEMODULE_IMAGE_NEW,args:{data:e}})})},t.siteModuleCreate=function(e,t){s.siteModuleCreate(e,t,function(e){i.default.dispatch({type:l.default.SCHEDULE_SITE_MODULES,args:{data:e}})})},t.getSiteModules=function(e,t,n){s.getSiteModules(e,t,n,function(e){i.default.dispatch({type:l.default.LOAD_SITE_MODULES,args:{data:e}})})},t.deleteSiteModules=function(e,t,n,o){s.deleteSiteModules(e,t,n,o,function(e){i.default.dispatch({type:l.default.LOAD_SITE_MODULES,args:{data:e}})})},t.deleteAdbanners=function(e,t,n){s.deleteAdbanners(e,t,n,function(e){i.default.dispatch({type:l.default.LOAD_AD_BANNERS,args:{data:e}})})},t.getAdBanners=function(e,t){s.getAdBanners(e,t,function(e){i.default.dispatch({type:l.default.LOAD_AD_BANNERS,args:{data:e}})})},t.onBannerResourceLoaded=function(t){s.onBannerResourceLoaded(t,function(e){i.default.dispatch({type:l.default.LOAD_BANNER_LOGO_LOADED,args:{data:e,type:t}})})},t.onBannerSizesLoaded=function(){s.onBannerSizesLoaded(function(e){i.default.dispatch({type:l.default.LOAD_BANNER_SIZE_LOADED,args:{data:e}})})},t.onTurnAroundTime=function(){s.onTurnAroundTime(function(e){i.default.dispatch({type:l.default.LOAD_TURN_AROUND_LOADED,args:{data:e}})})},t.uploadAdbannerImage=function(e){s.uploadAdbannerImage(e,function(e){i.default.dispatch({type:l.default.UPLOAD_ADBANNER_IMAGE,args:{data:e}})})},t.uploadWForm=function(e,t){s.uploadWForm(e,t,function(e){i.default.dispatch({type:l.default.UPLOAD_FORM_FILE,args:{data:e}})})},t.resetAccountAdmin=function(e){s.resetAccountAdmin(e,function(e){i.default.dispatch({type:l.default.RESET_ACCOUNT_LOCKOUT,args:{data:e}})})},t.overrideAccountAdmin=function(e){s.overrideAccountAdmin(e,function(e){i.default.dispatch({type:l.default.OVERRIDE_ACCOUNT_LOCKOUT,args:{data:e}})})},t.enanleUploadWForm=function(e){s.enanleUploadWForm(e,function(e){i.default.dispatch({type:l.default.UPLOAD_FORM_ENABLE,args:{data:e}})})},t.saveAdBanner=function(e,t){s.saveAdBanner(e,t,function(e){i.default.dispatch({type:l.default.LOAD_SAVE_BANNER_DATA_LOADED,args:{data:e}})})};var i=r(n(16)),s=o(n(993)),a=o(n(133)),l=r(n(187));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}},6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(90));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n(12);var f=1,a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=u(a).call(this,e))||"object"!==s(o)&&"function"!=typeof o?d(n):o)._formIndex=f++,t._controls={},t._errors={},t._initialValues=null,t._mounted=!1,t._valid=!1,(t.state=t.state||{}).name=e.name||"form"+t._formIndex,t._register=t._register.bind(d(d(t))),t._unregister=t._unregister.bind(d(d(t))),t._formIsReadOnly=t._formIsReadOnly.bind(d(d(t))),t._valueChanged=t._valueChanged.bind(d(d(t))),t._valueCommitted=t._valueCommitted.bind(d(d(t))),t._enabled=t._enabled.bind(d(d(t))),t._disabled=t._disabled.bind(d(d(t))),t.onSubmit=t.onSubmit.bind(d(d(t))),t.validateWithoutCommitting=t.validateWithoutCommitting.bind(d(d(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,r.default.Component),t=a,(n=[{key:"name",value:function(){return this.state.name}},{key:"className",value:function(){return this.props.className||""}},{key:"readOnly",value:function(){return!0===this.props.readOnly}},{key:"noValidation",value:function(){return!!this.props.noValidation}},{key:"valid",value:function(){return this._valid}},{key:"invalid",value:function(){return!this._valid}},{key:"hasChanged",value:function(){return!(0,i.default)(this._initialValues,this.captureValues(),{strict:!0})}},{key:"gather",value:function(){var e={};for(var t in this._controls){var n=this._controls[t];n.disabled()||(e[t]=n.value())}return e}},{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,setTimeout(function(){e._initialValues=e.captureValues()},1e3)}},{key:"componentWillReceiveProps",value:function(e){this.setState({name:e.name||"form"+this._formIndex})}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"validate",value:function(){if(!this.noValidation()){for(var e in this._controls){var t=this._controls[e];this._errors[e]=t.validate(),t.errorsUpdated(),t.commit()}this.updateValid()}}},{key:"validateWithoutCommitting",value:function(){if(!this.noValidation()){for(var e in this._controls){var t=this._controls[e];this._errors[e]=t.validate(),t.errorsUpdated()}this.updateValid()}}},{key:"submit",value:function(){this.validate(),(this.valid()||this.noValidation()||this.readOnly())&&this.props.onSubmit()}},{key:"setServerSideValidationMessage",value:function(e,t){for(var n in this._controls){var o=this._controls[n];if(o.serverSideValidationKey()===e)return void o.setServerSideValidationMessage(t)}}},{key:"getChildContext",value:function(){return{namespace:this.name(),register:this._register,unregister:this._unregister,formIsReadOnly:this._formIsReadOnly,valueChanged:this._valueChanged,valueCommitted:this._valueCommitted,enabled:this._enabled,disabled:this._disabled,controls:this._controls,errors:this._errors,noValidation:this.noValidation()}}},{key:"_register",value:function(e){if(this._controls[e.name()])throw"A control with the name "+e.name()+" is already registered";this._controls[e.name()]=e,this._errors[e.name()]=[],this._mounted&&this.validateControl(e,!0)}},{key:"_unregister",value:function(e){delete this._controls[e.name()],delete this._errors[e.name()],this._mounted&&this.updateValid()}},{key:"_formIsReadOnly",value:function(){return this.readOnly()}},{key:"_valueChanged",value:function(e){this.validateControl(e)}},{key:"_valueCommitted",value:function(e){this.validateControl(e,!0)}},{key:"_enabled",value:function(e){this.validateControl(e,!0)}},{key:"_disabled",value:function(e){this.validateControl(e,!0)}},{key:"onSubmit",value:function(e){e.preventDefault(),this.props.onSubmit&&this.submit()}},{key:"captureValues",value:function(){var e={};for(var t in this._controls)e[t]=this._controls[t].value();return e}},{key:"validateControl",value:function(e,t){if(!this.noValidation()){for(var n in this._errors[e.name()]=e.validate(),e.errorsUpdated(),this._controls){var o=this._controls[n];if(o.rules()){var a=!0,r=!1,i=void 0;try{for(var s,l=o.rules()[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value,c=u.dependsOn;c&&(t||c.onEveryChange)&&u.dependsOn.controlKeys.includes(e.name())&&(this._errors[o.name()]=o.validate(),o.errorsUpdated())}}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}}}this.updateValid()}}},{key:"updateValid",value:function(){if(!this.noValidation()){var e=!0;for(var t in this._errors)if(0<this._errors[t].length){e=!1;break}this._valid!==e&&(this._valid=e,this.props.onValidationChange&&this.props.onValidationChange()),this.props.onChange&&this.props.onChange()}}},{key:"render",value:function(){var e=null;return void 0!==this.props.autoComplete&&(e=this.props.autoComplete),r.default.createElement("form",{name:this.name(),className:this.className(),autoComplete:e,onSubmit:this.onSubmit},this.props.children)}}])&&l(t.prototype,n),o&&l(t,o),a}();a.propTypes={name:r.default.PropTypes.string,className:r.default.PropTypes.string,readOnly:r.default.PropTypes.bool,noValidation:r.default.PropTypes.bool,onChange:r.default.PropTypes.func,onValidationChange:r.default.PropTypes.func,onSubmit:r.default.PropTypes.func},a.childContextTypes={namespace:r.default.PropTypes.string.isRequired,register:r.default.PropTypes.func.isRequired,unregister:r.default.PropTypes.func.isRequired,formIsReadOnly:r.default.PropTypes.func.isRequired,valueChanged:r.default.PropTypes.func.isRequired,valueCommitted:r.default.PropTypes.func.isRequired,enabled:r.default.PropTypes.func.isRequired,disabled:r.default.PropTypes.func.isRequired,controls:r.default.PropTypes.object.isRequired,errors:r.default.PropTypes.object.isRequired,noValidation:r.default.PropTypes.bool.isRequired};var p=a;t.default=p},60:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAllContributors=function(){r.loadAllContributors(function(e){o.default.dispatch({type:a.default.ProjectsSearch.LOAD_ALL_CONTRIBUTORS,args:e})})},t.loadProjectSearches=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"ALL",n=2<arguments.length?arguments[2]:void 0;r.loadProjectSearches(e,t,n,function(e){o.default.dispatch({type:a.default.ProjectsSearch.LOAD_PROJECT_SEARCHES,args:{searches:e}})})},t.loadProjectCoverSearches=function(e,t,n){r.loadProjectCoverSearches(e,t,n,function(e){o.default.dispatch({type:a.default.ProjectsSearch.LOAD_PROJECT_COVER_SEARCHES,args:{searches:e}})})},t.loadProjectCoverCoupon=function(e,t,n){r.loadProjectCoverCoupon(e,t,n,function(e){o.default.dispatch({type:a.default.ProjectsSearch.LOAD_PROJECT_COVER_COUPONS,args:{searches:e}})})},t.loadProjectSearchesSingleUser=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"ALL",n=2<arguments.length?arguments[2]:void 0;r.loadProjectSearchesSingleUser(e,t,n,function(e){o.default.dispatch({type:a.default.ProjectsSearch.LOAD_PROJECT_SEARCHES_SINGLE_USER,args:{searches:e}})})},t.loadEaaSearches=function(e){r.loadEaaSearches(e,function(e){o.default.dispatch({type:a.default.ProjectsSearch.LOAD_EAA_SEARCHES,args:{searches:e}})})},t.loadProjectSearchResults=function(e){r.loadProjectSearchResults(e,function(e){o.default.dispatch({type:a.default.ProjectsSearch.LOAD_PROJECT_SEARCH_RESULTS,args:{totalCount:e.totalCount,projects:e.projects}})})},t.loadSeriesNames=function(){r.loadSeriesNames(function(e){o.default.dispatch({type:a.default.ProjectsSearch.LOAD_SERIES_NAMES,args:e})})},t.lookupIsbn=function(e){r.lookupIsbn(e,function(e){o.default.dispatch({type:a.default.ProjectsSearch.LOOKUP_ISBN,args:e})})};var o=i(n(16)),a=i(n(18)),r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(1026));function i(e){return e&&e.__esModule?e:{default:e}}},61:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(13)),l=o(n(0)),u=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,c(t).call(this,e))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,l.default.Component),n=t,(o=[{key:"componentDidMount",value:function(){(0,r.default)('[data-toggle="popover"]').popover()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.container,o=(e.info,e.isHtml),a=e.placement,r=e.text,i=(e.toggle,e.trigger),s=e.width;return l.default.createElement("a",{style:{width:s},"aria-hidden":"true",className:(0,u.default)("tooltip-component-text fullarea",t),"data-container":n||"body","data-content":r,"data-html":o||!1,"data-placement":a||"top","data-toggle":"popover","data-trigger":i,role:"button",tabIndex:"0"},this.props.children)}}])&&i(n.prototype,o),a&&i(n,a),t}();(t.default=f).propTypes={text:l.default.PropTypes.string.isRequired}},62:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),i=o(n(79));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=u(a).call(this,e))||"object"!==s(o)&&"function"!=typeof o?d(n):o).state={buttonText:e.buttonText,disabled:e.disabled||e.actionTaken,disableClick:!1,shouldDisableAfterClicked:void 0===e.shouldDisableAfterClicked||e.shouldDisableAfterClicked,actionTaken:e.actionTaken,click:e.click,type:e.type,isModal:e.buttonModal},t.enableButton=t.enableButton.bind(d(d(t))),t.onClick=t.onClick.bind(d(d(t))),t.onError=t.onError.bind(d(d(t))),t.makeClick=t.makeClick.bind(d(d(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,r.default.Component),t=a,(n=[{key:"componentWillMount",value:function(){i.default.addGlobalErrorListener(this.onError)}},{key:"componentWillUnmount",value:function(){i.default.removeGlobalErrorListener(this.onError)}},{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({buttonText:e.buttonText,disabled:e.disabled||e.actionTaken,actionTaken:e.actionTaken,click:e.click,shouldDisableAfterClicked:!e.shouldDisableAfterClicked||e.shouldDisableAfterClicked})}},{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"enableButton",value:function(){this.setState({disableClick:!1,disabled:!1})}},{key:"onClick",value:function(){var e=this;this.props.click&&this.setState({disableClick:this.state.shouldDisableAfterClicked},function(){return e.props.click()})}},{key:"onError",value:function(e){this.enableButton()}},{key:"render",value:function(){var e=this.state.buttonText?this.state.buttonText:"Save",t="link"===this.state.type?"btn btn-info":"btn btn-progress",n=this.props.autoSubmit?null:"button",o=this.props.buttonModal?"modal":"",a=r.default.createElement("button",{className:t,type:n,disabled:!!this.props.disabled||this.state.disableClick,onClick:this.onClick,tabIndex:"0","data-sitekey":this.props.datasitekey&&this.props.datasitekey,"data-callback":"onClick","data-action":"submit",onKeyDown:this.makeClick,"data-dismiss":o},e);return r.default.createElement("div",{className:"command-button-container"},r.default.createElement("div",{className:"command-button"},r.default.createElement("span",null,a)))}}])&&l(t.prototype,n),o&&l(t,o),a}();t.default=a},64:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n(4)),r=l(n(132)),i=o(n(15)),s=l(n(8));o(n(11));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var c=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,(0,r.default)(e||d))}var e,n,o;return e=t,(n=[{key:"clone",value:function(){return new t(this)}},{key:"isPrintPreOrder",value:function(){return this.isSPB&&this.preOrder}},{key:"areAssetsComplete",value:function(){return this.getCoverStatus(!0)&&this.getInteriorStatus(!0)}},{key:"resetBookSizeType",value:function(e){var t=!0,n=!1,o=void 0;try{for(var a,r=e[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){this[a.value+"Initial"]=null}}catch(e){n=!0,o=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw o}}}},{key:"setBookSizeTypeFields",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.getBookSizeTypeFields(e),n=!0,o=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value;this[e?s.key:s.key+"Initial"]=s.value}}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}}},{key:"getBookSizeTypeFields",value:function(e){return[{key:"pageCount",value:e?this.pageCountInitial:this.pageCount},{key:"coverFinish",value:e?this.coverFinishInitial:this.coverFinish},{key:"coverFormat",value:e?this.coverFormatInitial:this.coverFormat},{key:"pageSize",value:e?this.pageSizeInitial:this.pageSize},{key:"printColor",value:e?this.printColorInitial:this.printColor},{key:"paperColor",value:e?this.paperColorInitial:this.paperColor}]}},{key:"getBookSizeTypeParams",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.getBookSizeTypeFields(t),o=[];e&&(o.push("type="+this.type),o.push("price="+this.price));var a=!0,r=!1,i=void 0;try{for(var s,l=n[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value;null!==u.value&&o.push(u.key+"="+encodeURI(u.value))}}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return o.join("&")}},{key:"getInitialBookSizeAndTypeStatus",value:function(){return null!==this.pageCountInitial&&null!==this.coverFinishInitial&&null!==this.coverFormatInitial&&null!==this.pageSizeInitial&&null!==this.printColorInitial&&null!==this.paperColorInitial}},{key:"getBookSizeAndTypeStatus",value:function(e){var t=null!==this.pageCount&&null!==this.coverFinish&&null!==this.coverFormat&&null!==this.pageSize&&null!==this.printColor&&null!==this.paperColor;return e?t:this._checkStatus(t)}},{key:"getBookDetailsStatus",value:function(e){var t=this._checkAudience()&&this._checkSeries()&&null!==this.shortDescription&&null!==this.languageCode&&null!==this.publisherName&&null!==this.price&&null!==this.publishedDate&&null!==this.title&&0<this.categories.length&&0<this.contributors.length,n=null!==this.formatCode,o=null!==this.isbn;return this.isEBook&&(t=t&&n),this.isPOD?e?null!==this.title:null!==this.title?"sprite success-xs":"empty":(this.isSPB&&(t=t&&o),e?t:this._checkStatus(t))}},{key:"getBookDimensions",value:function(){var e=this.pageSizeByKey.dimensions;return{width:72*+e.width.slice(0,e.width.length-1),height:72*+e.height.slice(0,e.height.length-1)}}},{key:"getCoverFormattingSpecs",value:function(){return null!==this.formattingBleedZone&&null!==this.formattingCoverWidth&&null!==this.formattingFlapWidth&&null!==this.formattingMargin&&null!==this.formattingSpineWidth&&null!==this.formattingTotalHeight&&null!==this.formattingTotalWidth&&null!==this.formattingWrap}},{key:"getCoverStatus",value:function(e){var t=null!==this.coverFile&&!0===this.coverFullApproved,n=null!==this.coverType;return this.isEBook||(t=t&&n),this.isPOD&&(t=t&&(this.hasCopyRightFull||this.hasCopyRightFront||this.hasCopyRightBack)),e?t:this._checkStatus(t)}},{key:"getInteriorStatus",value:function(e){var t=null!==this.interiorFile&&!0===this.interiorApproved;return this.isPOD&&(t=t&&this.hasCopyRight),e?t:this._checkStatus(t)}},{key:"getSampleStatus",value:function(){var e;return e=(this.status,null!==this.interiorFile&&null!==this.sampleFilePath&&!0===this.sampleApproved&&!0===this.interiorApproved),status?e:this._checkStatus(e)}},{key:"getSampleSummaryStatus",value:function(){return"NEW"!=this.status||null!==this.sampleFilePath&&!0===this.sampleApproved&&null!==this.interiorFile&&!0===this.interiorApproved}},{key:"_checkAudience",value:function(){return null!==this.audience&&("JUV"===this.audience&&this.ageRange,!0)}},{key:"_checkSeries",value:function(){return!this.inSeries||null!==this.seriesName}},{key:"_checkStatus",value:function(e){return e?"sprite success-xs":"empty"}},{key:"isEBook",get:function(){return this.type===i.EBOOK}},{key:"isSPB",get:function(){return this.type===i.PRINT}},{key:"isPOD",get:function(){return this.type===i.POD}},{key:"inErrorStatus",get:function(){return"ERROR"===this.status}},{key:"isProcessingDropshipStatus",get:function(){return"PROCESSING_DROPSHIP"===this.status}},{key:"interiorContainsCover",get:function(){return!this.coverStitching||"NONE"===this.coverStitching||"COMPLETED_NOT_STITCHED"===this.coverStitching}},{key:"authorFullName",get:function(){if(!this._model.contributors)return"";var e=this._model.contributors.find(function(e){return e.role===i.CONTRIBUTOR_ENUMS.author});return e?((e.firstName||"")+" "+(e.lastName||"")).trim():""}},{key:"cleanCategories",get:function(){var n=this,e=this.categories.map(function(e){var t=e.categoryCrumbs;a.default.getUser();return n.isEBook?t=t.trim().split("|").join(" / "):(t=t.trim().split(" > ").join(" / ")).startsWith(i.PRINT_CATEGORY_CRUMB_SUBJECTS.FICTION)||(t.startsWith(i.PRINT_CATEGORY_CRUMB_SUBJECTS.JUVENILE_FICTION)?t=t.replace(i.PRINT_CATEGORY_CRUMB_SUBJECTS.JUVENILE_FICTION,i.PRINT_CATEGORY_CRUMB_SUBJECTS.FICTION):t.startsWith(i.PRINT_CATEGORY_CRUMB_SUBJECTS.NONFICTION)||(t=t.startsWith(i.PRINT_CATEGORY_CRUMB_SUBJECTS.JUVENILE_NONFICTION)?t.replace(i.PRINT_CATEGORY_CRUMB_SUBJECTS.JUVENILE_NONFICTION,i.PRINT_CATEGORY_CRUMB_SUBJECTS.NONFICTION):i.PRINT_CATEGORY_CRUMB_SUBJECTS.NONFICTION+" / "+t)),{id:e.categoryId?e.categoryId.toString():e.categoryCrumbs.toString(),bisac:e.bisac,categoryCrumbs:e.categoryCrumbs,categoryId:e.categoryId,breadcrumbs:t}});if(!this.isEBook)for(var t=1;t<e.length;t++){var o=e[t];o.breadcrumbs=o.breadcrumbs.substring(o.breadcrumbs.indexOf(" / ")+3)}return e}},{key:"quotedPrice",get:function(){return this._quotedPrice},set:function(e){this._quotedPrice=e}},{key:"coverFinishByKey",get:function(){return null!==this.coverFinish?s.default.projectConstants("coverFinish",this.coverFinish):null}},{key:"coverFormatByKey",get:function(){return null!==this.coverFormat?s.default.projectConstants("coverFormat",this.coverFormat):null}},{key:"pageSizeByKey",get:function(){var e=null!==this.pageSize?s.default.projectConstants("pageSize",this.pageSize):null;return e&&(e.label=e.label.replace(/\\/g,""),e.dimensions.width=e.dimensions.width.replace(/\\/g,""),e.dimensions.height=e.dimensions.height.replace(/\\/g,"")),e}},{key:"printColorByKey",get:function(){return null!==this.printColor?s.default.projectConstants("printColor",this.printColor):null}},{key:"paperColorByKey",get:function(){return null!==this.paperColor?s.default.projectConstants("paperColor",this.paperColor):null}}])&&u(e.prototype,n),o&&u(e,o),t}();t.default=c;var d={ageRange:null,allowedToDelete:null,allowedToEdit:!0,allowedToOrder:!1,allowedToPostChanges:!1,allowedToPutOnSale:!1,allowedToTakeOffSale:!1,allowedVerification:!1,allowedToSwitchPreOrder:!1,audience:null,authorInfo:null,bnid:null,categories:[],contributors:[],coverFinish:null,coverFinishInitial:null,coverFormat:null,coverFormatInitial:null,coverThumbnail:null,coverType:null,coverBackApproved:!1,coverBackFile:null,coverBackPdfConversionStatus:null,coverBackPreFlightCheckStatus:!1,coverFile:null,coverFrontApproved:!1,coverFrontFile:null,coverFrontPdfConversionStatus:null,coverFrontPreFlightCheckStatus:!1,coverFullApproved:!1,coverFullPdfConversionStatus:null,coverFullPreFlightCheckStatus:!1,coverTempApproved:!1,coverTempFile:null,coverTempPdfConversionStatus:null,coverTempPreFlightCheckStatus:!1,coverStitching:null,description:null,displayIsbn:null,dropShipStatus:null,editionNumber:null,editionDescription:null,errorMessage:null,errorMessageComment:null,everOnSale:!1,formatCode:null,formattingBleedZone:null,formattingCoverWidth:null,formattingFlapWidth:null,formattingGutter:null,formattingMargin:null,formattingSpineWidth:null,formattingTotalHeight:null,formattingTotalWidth:null,formattingWrap:null,hasPageCountChanged:!1,id:null,interiorApproved:!1,interiorFile:null,interiorPdfConversionStatus:null,interiorPreFlightCheckStatus:!1,samplePreFlightCheckStatus:!1,inSeries:!1,isbn:null,isbnIssue:null,isbnType:null,isGroupConfirmed:!1,isPublicDomain:null,grouped:!1,groupProjectId:null,searchKeyWords:null,languageCode:null,lastPath:null,noDeleteReason:null,noMerchFlag:null,nonNpIsbn:null,nookEan:null,onSaleDate:null,pageCount:null,pageCountInitial:null,pageSize:null,pageSizeInitial:null,paperColor:null,paperColorInitial:null,preOrder:!1,preOrderIssue:!1,price:null,printColor:null,printColorInitial:null,productPageUrl:null,projectCompleted:!1,publisherName:null,publishedDate:null,reviews:[],sampleApproved:!1,samplePath:null,sampleFilePath:null,sampleConversionStatus:null,seriesName:null,seriesNumber:null,shortDescription:null,showEditModal:!1,showPublishAlert:!1,showPutOnSaleAlert:!1,spineAuthor:null,spineColor:null,spineTitle:null,status:null,subtitle:null,submissionStatusId:null,title:null,tempCover:null,type:null,uploadByDate:null,vendorRegistrationFirst:null,versions:null,warningMessage:null,isDefaultSample:null,preflightWarningSample:null,preflightWarningInterior:null,sampleIds:null,hasCopyRight:null,hasCopyRightBack:null,hasCopyRightFront:null,hasCopyRightFull:null,reasonCode:null,isbnTransferred:null}},66:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(0)),i=o(n(1)),s=o(n(118));o(n(329)),o(n(1004));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=[{tags:["p"],useIcon:!0,iconClass:"fa fa-paragraph"},{tags:["br"],useIcon:!1,text:"br"},{tags:["b"],useIcon:!0,iconClass:"fa fa-bold"},{tags:["i"],useIcon:!0,iconClass:"fa fa-italic"},{tags:["u"],useIcon:!0,iconClass:"fa fa-underline"},{tags:["ol","li"],useIcon:!0,iconClass:"fa fa-list-ol"},{tags:["ul","li"],useIcon:!0,iconClass:"fa fa-list-ul"}],r=function(e){function r(e,t){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o=this,(n=!(a=d(r).call(this,e,t))||"object"!==l(a)&&"function"!=typeof a?p(o):a).state={focus:!1,editing:!0},n.active=!1,n.onChange=n.onChange.bind(p(p(n))),n.onBlur=n.onBlur.bind(p(p(n))),n.onFocus=n.onFocus.bind(p(p(n))),n.onKeyDown=n.onKeyDown.bind(p(p(n))),n.onToggleView=n.onToggleView.bind(p(p(n))),n.onAddHtmlTag=n.onAddHtmlTag.bind(p(p(n))),n.makeClick=n.makeClick.bind(p(p(n))),n}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(r,s.default),t=r,(n=[{key:"makeClick",value:function(e){"Enter"===e.key&&e.currentTarget.click()}},{key:"trim",value:function(){return!1!==this.props.trim}},{key:"showRemainingCharCount",value:function(){return!!this.props.showRemainingCharCount}},{key:"commitOnEnterKey",value:function(){return!!this.props.commitOnEnterKey}},{key:"onChange",value:function(e){var t,n,o=this.findRule("maxLength");this.props.wysiwyg?(t=e.target.innerText,n=e.target.innerHTML,0===t.length&&0<n.length&&(n="")):(e.persist(),n=e.target.value),(!o||n.length<=o.maxLength)&&(this.trim()&&(n=n.replace(/^\s+/g,"")),this._changeValue(n))}},{key:"onBlur",value:function(e){var t;t=this.props.wysiwyg?e.target.innerHTML:e.target.value,this.setState({focus:!1}),this.trim()&&(t=t.trim()),this._commitValue(t),this.props.wysiwyg||this.htmlGuideButtonFocus||c(d(r.prototype),"onBlur",this).call(this,e)}},{key:"onFocus",value:function(){this.setState({focus:!0})}},{key:"onKeyDown",value:function(e){if(!this._controlEventsDisabled){var t=e.keyCode;return this.commitOnEnterKey()&&13===t?(e.preventDefault(),void this._commitValue(this.refs.primary.value)):void 0}}},{key:"onAddHtmlTag",value:function(e){var t=this.refs.primary.value||"",n=this.refs.primary.selectionStart||0,o=this.refs.primary.selectionEnd||t.length;e.forEach(function(e){"br"!==e&&(t=t.substring(0,o)+"</"+e+">"+t.substring(o))}),e.reverse().forEach(function(e){t="br"===e?t.substring(0,n)+"<"+e+" />"+t.substring(n):t.substring(0,n)+"<"+e+">"+t.substring(n)}),this._commitValue(t)}},{key:"onToggleView",value:function(){this.setState({editing:!this.state.editing})}},{key:"renderHtmlControls",value:function(){var t=this,e=(this.state.editing,m);return a.default.createElement("div",{className:(0,i.default)("html-controls","edit-tab",{focus:this.state.focus,error:!!this.message()&&!this.disableValidationMessages(),active:this.state.editing,inactive:!this.state.editing})},a.default.createElement("a",{onClick:this.onToggleView,tabIndex:"0",onKeyDown:this.makeClick,disabled:this.state.editing,className:this.state.editing&&"disabled"},"HTML"),e.map(function(e){return a.default.createElement("button",{key:e.tags[0],className:(0,i.default)({disabled:!t.state.editing}),disabled:!t.state.editing,type:"button",onClick:function(){return t.onAddHtmlTag(e.tags)},tabIndex:"0","aria-disabled":!t.state.editing,"aria-label":"textarea-button"},e.useIcon?a.default.createElement("span",{className:e.iconClass}):a.default.createElement("b",null,e.text))}),a.default.createElement("div",{className:"html-bottom-border"}))}},{key:"renderPreviewTab",value:function(){return a.default.createElement("div",{className:(0,i.default)("html-controls","preview-tab",{focus:this.state.focus,error:!!this.message()&&!this.disableValidationMessages(),active:!this.state.editing,inactive:this.state.editing})},a.default.createElement("a",{onClick:this.onToggleView,tabIndex:"0",onKeyDown:this.makeClick,disabled:!this.state.editing,className:!this.state.editing&&"disabled"},"PREVIEW"),a.default.createElement("div",{className:"html-bottom-border"}))}},{key:"render",value:function(){var e=this;return a.default.createElement("div",{className:(0,i.default)("base-control","text-control","label-mode","clearfix",{"has-value":this.hasValue()},{error:!!this.message()&&!this.disableValidationMessages()},{disabled:this.disabled()},{"read-only":this.readOnly()},this.className())},!this.disableValidationMessages()&&a.default.createElement("div",{className:"message"},this.message()),this.props.allowHtml&&this.renderHtmlControls(),this.props.allowHtml&&this.renderPreviewTab(),a.default.createElement("div",{className:(0,i.default)("input-area",{wysiwyg:this.props.wysiwyg},{active:this.state.focus}),onMouseOver:function(){return e.setState({showHtmlGuideButton:e.state.focus})},onMouseOut:function(){return e.setState({showHtmlGuideButton:!1})}},a.default.createElement("div",{className:(0,i.default)("preview pre-style",{hidden:this.state.editing}),dangerouslySetInnerHTML:{__html:this.value()}}),a.default.createElement("textarea",{id:this.id(),name:this.name(),className:(0,i.default)("primary",{hidden:!this.state.editing,"html-editor":this.props.allowHtml,"back-grey":this.props.queryRecipients}),ref:"primary",type:"text",value:this.props.queryRecipients?this.props.query:this.value(),disabled:this.disabled(),readOnly:this.readOnly(),tabIndex:this.readOnly()?"-1":"0",onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus}),a.default.createElement("div",{className:(0,i.default)("top-shield",{wysiwyg:this.props.wysiwyg})}),a.default.createElement("label",{className:(0,i.default)("primary",{wysiwyg:this.props.wysiwyg}),htmlFor:this.id()},this.label(),this.required()&&!this.disableValidationMessages()&&a.default.createElement("span",null,"*"),a.default.createElement("span",{className:"label-note"},this.labelNote())),this.props.allowHtml&&a.default.createElement("button",{className:"html-button",tabIndex:"0",type:"button",onClick:function(){return window.open("/html-guide","new-window","width=640, height=850")}},a.default.createElement("span",{className:"text"},"HTML Guide"),a.default.createElement("span",{className:"fa fa-info"}))),this.note()&&a.default.createElement("div",{className:"note"},this.note()),this.renderRemainingChars())}},{key:"renderRemainingChars",value:function(){var e=this.findRule("maxLength");if(!this.showRemainingCharCount()||!e)return null;var t=this.props.allowHtml?"characters (including HTML) remaining ":"characters remaining ",n=Math.max(e.maxLength-this.value().length,0);return a.default.createElement("div",{className:(0,i.default)("remaining-chars",{zero:0===n},{wysiwyg:this.props.wysiwyg})},n," ",t," ...")}}])&&u(t.prototype,n),o&&u(t,o),r}();r.propTypes=function(a){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(e){var t,n,o;t=a,o=r[n=e],n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o})}return a}({},s.default.propTypes,{trim:a.default.PropTypes.bool,showRemainingCharCount:a.default.PropTypes.bool});var h=r;t.default=h},67:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setErrorHandler=function(e){i=e},t.get=function(e,t,n){return u(a.default.get(e,t),n)},t.post=function(e,t,n){return u(a.default.post(e,t),n)},t.put=function(e,t,n){return u(a.default.put(e,t),n)},t.del=function(e,t,n){return l(e,t,n)},t.remove=l,t.setHeaderInspector=void 0;var o,a=(o=n(243))&&o.__esModule?o:{default:o},r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(10));var i,s;function l(e,t,n){return u(a.default.delete(e,t),n)}function u(e,o){return new Promise(function(n){e.then(function(e){var t=e.data;s&&s(e.headers),t.errors&&0!==t.errors.length?(i&&i(t.errors,t.data),o&&o(t.errors,t.data)||c(t.errors)):n("string"==typeof t?t:t.data)}).catch(function(e){if(e.response){var t={errors:[{code:"UNEXPECTED",description:"Unexpected error"}],data:e};i&&i(t.errors,t.data),o&&o(t.errors)||c(t.errors)}})})}function c(e){if("34007"==e[0].code)return null;"23007"==e[0].code||"23008"==e[0].code?r.showSearchExhaustModal(e,!0):r.showErrorModal2(e,!0)}t.setHeaderInspector=function(e){s=e}},68:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllBookDetails=function(e){a.getAllBookDetails(e,function(e){r.default.dispatch({type:o.default.Project.LOAD_EAA_RESULT,args:e})})},t.getConsumptionData=function(e){a.getConsumptionData(e,function(e){r.default.dispatch({type:o.default.Project.LOAD_EAA_CONSUMPTION_RESULT,args:e})})},t.getConsumptionBehaviorBarData=function(e){a.getConsumptionBehaviorBarData(e,function(e){r.default.dispatch({type:o.default.Project.LOAD_EAA_CONSUMPTION_BAR_RESULT,args:e})})},t.getMapData=function(e){a.getMapData(e,function(e){r.default.dispatch({type:o.default.Project.LOAD_EAA_MAP_RESULT,args:e})})},t.getAllDoughnutData=function(e){a.getAllDoughnutData(e,function(e){r.default.dispatch({type:o.default.Project.LOAD_EAA_DOUGHNUT_RESULT,args:e})})},t.getPreviewPurchaseDetails=function(e){a.getPreviewPurchaseDetails(e,function(e){r.default.dispatch({type:o.default.Project.LOAD_SITEDATA_PURCHASEPREVIEW,args:e})})},t.getBestBook=function(){a.getBestBook(function(e){r.default.dispatch({type:o.default.Project.BEST_BOOK,args:e})})},t.getAverageTimeToOpen=function(){a.getAverageTimeToOpen(function(e){r.default.dispatch({type:o.default.Project.AVERAGE_TIME_TO_OPEN,args:e})})},t.getBookPageVisitorByDomain=function(e){a.getBookPageVisitorByDomain(e,function(e){r.default.dispatch({type:o.default.Project.BOOK_PAGE_VISITOR_BY_DOMAIN,args:e})})},t.getCustomerDataForOtherAuthors=function(e){a.getCustomerDataForOtherAuthors(e,function(e){r.default.dispatch({type:o.default.Project.CUSTOMER_DATA_OTHER_AUTHORS,args:e})})},t.getReaderAverageCompletionRate=function(e){a.getReaderAverageCompletionRate(e,function(e){r.default.dispatch({type:o.default.Analytics.BOOK_COMPLETION_RATE_AVERAGE,args:e})})},t.getAllLineGraphDetails=function(e){a.getAllLineGraphDetails(e,function(e){r.default.dispatch({type:o.default.Project.LOAD_EAA_LINE_RESULT,args:e})})},t.getBarGraphDetails=function(e){a.getBarGraphDetails(e,function(e){r.default.dispatch({type:o.default.Project.LOAD_BAR_GRAPH,args:e})})};var o=i(n(18)),a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(1048)),r=i(n(16));function i(e){return e&&e.__esModule?e:{default:e}}},7:function(e,t,n){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.set_today=t.bn_moment=void 0;var a,r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(99));t.bn_moment=function(e,t,n){return void 0===e&&a?o(a,"YYYY-MM-DD HH:mm:ss"):void 0!==e?o(e,t,n):o(e,t,n).tz(r.TIMEZONES.AMERICA_NEW_YORK)};t.set_today=function(e){a=e},o.fn.toJSON=function(){return this.format("YYYY-MM-DD")}}).call(this,n(117))},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(13)),c=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=s(this,l(n).call(this,e))).state={currentPage:t.props.currentPage,totalPages:t.props.totalPages,maxSpan:t.props.maxSpan||9},t}var t,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,c.default.Component),t=n,(o=[{key:"componentWillReceiveProps",value:function(e){this.state.currentPage===e.currentPage&&this.state.totalPages===e.totalPages||this.setState({currentPage:e.currentPage,totalPages:e.totalPages})}},{key:"onClick",value:function(e){e.preventDefault(),this.props.onChange(parseInt((0,r.default)(e.target).attr("data-page")))}},{key:"buildPageLinks",value:function(){for(var e=[],t=this.state.currentPage,n=this.state.totalPages,o=this.state.maxSpan,a=t,r=t,i=!1;!i;){var s=r,l=a;r-a<o&&r<n&&(r+=1),r-a<o&&1<a&&(a-=1),s===r&&l===a&&(i=!0)}1<t?e.push(c.default.createElement("li",{key:"prev"},c.default.createElement("a",{href:"","data-page":t-1,onClick:this.onClick.bind(this)},"< Prev"))):e.push(c.default.createElement("li",{key:"prev",className:"disabled","aria-disabled":"true"},c.default.createElement("span",null,"< Prev"))),1<a&&e.push(c.default.createElement("li",{key:"first"},c.default.createElement("a",{href:"","data-page":1,onClick:this.onClick.bind(this)},"1"))),2<a&&e.push(c.default.createElement("li",{key:"firstSep",className:"ellipsis"},c.default.createElement("span",null,"...")));for(var u=a;u<=r;u++)e.push(c.default.createElement("li",{key:u,className:u===t?"active":""},c.default.createElement("a",{href:"","data-page":u,onClick:this.onClick.bind(this)},u)));return r<n-1&&e.push(c.default.createElement("li",{key:"lastSep",className:"ellipsis"},c.default.createElement("span",null,"..."))),r<n&&e.push(c.default.createElement("li",{key:"last"},c.default.createElement("a",{href:"","data-page":n,onClick:this.onClick.bind(this)},n))),t<n?e.push(c.default.createElement("li",{key:"next"},c.default.createElement("a",{href:"","data-page":t+1,onClick:this.onClick.bind(this)},"Next >"))):e.push(c.default.createElement("li",{key:"next",className:"disabled","aria-disabled":"true"},c.default.createElement("span",null,"Next >"))),e}},{key:"render",value:function(){var e=c.default.createElement("div",{className:"custom-pagination clearfix"},c.default.createElement("ul",{className:"pagination"},this.buildPageLinks()));return c.default.createElement("div",null,1<this.state.totalPages?e:null)}}])&&i(t.prototype,o),a&&i(t,a),n}();t.default=d},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(44),o=a(n(16)),i=a(n(330));!function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}t.default=e}}(n(328));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f="bootsrappedUserLoaded",p="change",m="filesRepushed",h="syncwithpm",y="filesBookRepushed",v="freeCorrectionEnabled",b="passwordResetTokenGenerated",g="userRoleChanged",E="userATGComparisonLoaded",P="userCouponsLoaded",S="userDetailsLoaded:",_="userDetailsUnloaded:",O="emailAddressUpdated:",C="emailAddressUpdateErrorReceived",k="userProjectsLoaded",T="statusModalSuccess",A="ultraPremiumSuccess",N="ultraPremiumConvertSuccess",L="loadOrders",D="loadOrderDetails",I="cancelOrderHistory",R="orderDeleteReseonComplete",w="orderHistoryError",j=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this))).user=null,e.users=[],e.userCoupons=[],e.userDetails={},e.userProjects=[],e.emailUpdateErrorCode=null,e._orderGroups=null,e.setMaxListeners(0),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.EventEmitter),n=t,(o=[{key:"addBootstrapUserListener",value:function(e){this.addListener(f,e)}},{key:"removeBootstrapUserListener",value:function(e){this.removeListener(f,e)}},{key:"addChangeListener",value:function(e){this.addListener(p,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(p,e)}},{key:"addFilesRepushedListener",value:function(e){this.addListener(m,e)}},{key:"removeFilesRepushedListener",value:function(e){this.removeListener(m,e)}},{key:"addStatusModalListener",value:function(e){this.addListener(T,e)}},{key:"removeStatusModalListener",value:function(e){this.removeListener(T,e)}},{key:"addUltraPremiumListener",value:function(e){this.addListener(A,e)}},{key:"removeUltraPremiumListener",value:function(e){this.removeListener(A,e)}},{key:"addUltraPremiumConvertListener",value:function(e){this.addListener(N,e)}},{key:"removeUltraPremiumConvertListener",value:function(e){this.removeListener(N,e)}},{key:"addSyncPMListener",value:function(e){this.addListener(h,e)}},{key:"removeSyncPMListener",value:function(e){this.removeListener(h,e)}},{key:"addFilesBookRepushedListener",value:function(e){this.addListener(y,e)}},{key:"removeFilesBookRepushedListener",value:function(e){this.removeListener(y,e)}},{key:"addFreeCorrectionEnabledListener",value:function(e){this.addListener(v,e)}},{key:"removeFreeCorrectionEnabledListener",value:function(e){this.removeListener(v,e)}},{key:"addUserATGComparisonLoadedListener",value:function(e){this.addListener(E,e)}},{key:"removeUserATGComparisonLoadedListener",value:function(e){this.removeListener(E,e)}},{key:"addUserCouponsLoadedListener",value:function(e){this.addListener(P,e)}},{key:"removeUserCouponsLoadedListener",value:function(e){this.removeListener(P,e)}},{key:"addUserDetailsLoadedListener",value:function(e,t){this.addListener(S+e,t)}},{key:"removeUserDetailsLoadedListener",value:function(e,t){this.removeListener(S+e,t)}},{key:"addUserChangeRoleListener",value:function(e){this.addListener(g,e)}},{key:"removeUserChangeRoleListener",value:function(e){this.removeListener(g,e)}},{key:"addUserEmailAddressUpdatedListener",value:function(e){this.addListener(O,e)}},{key:"removeUserEmailAddressUpdatedListener",value:function(e){this.removeListener(O,e)}},{key:"addEmailAddressUpdateErrorResponseListener",value:function(e){this.addListener(C,e)}},{key:"removeEmailAddressUpdateErrorResponseListener",value:function(e){this.removeListener(C,e)}},{key:"addUserDetailsUnloadedListener",value:function(e,t){this.addListener(_+e,t)}},{key:"removeUserDetailsUnloadedListener",value:function(e,t){this.removeListener(_+e,t)}},{key:"addPasswordResetTokenGeneratedListener",value:function(e,t){this.addListener(b+e,t)}},{key:"removePasswordResetTokenGeneratedListener",value:function(e,t){this.removeListener(b+e,t)}},{key:"addUserProjectsChangedListener",value:function(e){this.addListener(k,e)}},{key:"removeUserProjectsChangedListener",value:function(e){this.removeListener(k,e)}},{key:"addOrdersLoadedListener",value:function(e){this.addListener(L,e)}},{key:"removeOrdersLoadedListener",value:function(e){this.removeListener(L,e)}},{key:"addOrderDetailsLoadedListener",value:function(e,t){this.addListener(D+e,t)}},{key:"removeOrderDetailsLoadedListener",value:function(e,t){this.removeListener(D+e,t)}},{key:"addCancelOrderDetailsLoadedListener",value:function(e){this.addListener(I,e)}},{key:"removeCancelOrderDetailsLoadedListener",value:function(e){this.removeListener(I,e)}},{key:"addDeleteReasonCompleteListener",value:function(e){this.addListener(R,e)}},{key:"removeDeleteReasonCompleteListener",value:function(e){this.removeListener(R,e)}},{key:"addOrderDetailsErrorLoadedListener",value:function(e){this.addListener(w,e)}},{key:"removeOrderDetailsErrorLoadedListener",value:function(e){this.removeListener(w,e)}},{key:"getAll",value:function(){return this.users}},{key:"getUserDetails",value:function(e){return this.userDetails[e.toString()]}},{key:"getDisplayBankCountry",value:function(e){return"AU"===e?"Australia":"BE"===e?"Belgium":"CA"===e?"Canada":"DE"===e?"Germany":"ES"===e?"Spain":"FR"===e?"France":"GB"===e?"United Kingdom":"IT"===e?"Italy":"NL"===e?"Netherlands":"NZ"===e?"New Zealand":""}},{key:"getDisplayCurrencyOfPayment",value:function(e){return"AU"===e?"US Dollar ($)":"BE"===e?"Euro (â‚¬)":"CA"===e?"US Dollar ($)":"DE"===e?"Euro (â‚¬)":"ES"===e?"Euro (â‚¬)":"FR"===e?"Euro (â‚¬)":"GB"===e?"GB Pound (Â£)":"IT"===e?"Euro (â‚¬)":"NL"===e?"Euro (â‚¬)":"NZ"===e?"US Dollar ($)":""}},{key:"getDisplayTaxpayerType",value:function(e){return"01"===e?"Individual":"02"===e?"Company":"03"===e?"Partnership":"06"===e?"Government":"29"===e?"International organization":"07"===e?"Tax exempt organization":"08"===e?"Private foundation":"10"===e?"Estate":"21"===e?"Disregarded entity":"22"===e?"Simple trust":"23"===e?"Grantor trust":"24"===e?"Complex trust":"25"===e?"Central bank of issue":""}},{key:"getDisplayProjectType",value:function(e){return"EBOOK"===e?"eBook":"BOOK"===e?"Book":"PERSONAL_USE"===e?"Personal Use":"Unknown"}},{key:"getUserCoupons",value:function(){return this.userCoupons}},{key:"getUserProjects",value:function(){return this.userProjects}},{key:"getEmailUpdateError",value:function(){return this.emailUpdateErrorCode}},{key:"isAdmin",value:function(){return this.hasPermissions("ADMIN_PERMISSION")}},{key:"hasPermissions",value:function(e){return null!==this.user&&this.user.permissions.includes(e)}},{key:"loadAuthenticatedUser",value:function(e){null!==(this.user=e)&&e.firstName&&localStorage.setItem("userFirstName",e.firstName),this.emit(f)}},{key:"onChangeUserRole",value:function(e){this._findByCustomerId(e.id);this.emit(g)}},{key:"onChangeAccountPermissions",value:function(e){var t=this._findByCustomerId(e.user.customerId);void 0===t&&(t=e.user,this.users.push(t)),t.vendor.canRefer=e.canRefer,t.vendor.isPreOrderAvailable=e.isPreOrderAvailable,this.emit("accountPermissionsChanged")}},{key:"onDeleteReason",value:function(e){var n=[];e.data.setting.map(function(e,t){return n.push({value:e.SettingId,label:e.SettingId,key:t})}),this.emit(R,n)}},{key:"onChangeUserBusinessStatus",value:function(e){var t=this._findByVendor(e.vendorNum);void 0!==t&&(t.businessStatus=e.status),this.emit("businessStatusChanged")}},{key:"onLoadATGComparison",value:function(e){this.emit(E,e.comparedFields)}},{key:"onLoadUserCoupons",value:function(e){this.userCoupons=e,this.emit(P,this.userCoupons)}},{key:"onLoadUserDetails",value:function(e){this.userDetails[e.user.vendorNumber]=e.user,this.emit(S+e.user.vendorNumber)}},{key:"onPasswordResetTokenGenerated",value:function(e){this.emit(b+e.userId,e.url)}},{key:"onSearchUsers",value:function(e){this.users=e.users,this.emit(p,{numRecs:e.numRecs})}},{key:"onUnloadUserDetails",value:function(e){delete this.userDetails[e.userId.toString()],this.emit(_+e.userId)}},{key:"onLoadUserProjects",value:function(e){this.userProjects=e.projects,this.emit(k)}},{key:"onUnloadUserProjects",value:function(){this.userProjects=[],this.emit(k)}},{key:"onUpdateUserEmailAddress",value:function(e){this.emit(O)}},{key:"onUserEmailUpdateErrorReturned",value:function(e){this.emailUpdateErrorCode=e.errorCode,this.emit(C)}},{key:"_findByVendor",value:function(t){return this.getAll().find(function(e){return e.vendorNumber==t})}},{key:"_findByCustomerId",value:function(t){return this.getAll().find(function(e){return e.customerId==t})}},{key:"removeUnderscoreAndCapitalize",value:function(e){var t=e.replace(/_/g," ");return(/sale/i.test(t)?t.toLowerCase().replace(/sale/g," sale"):t).toLowerCase().replace(/(^|\s)\S/g,function(e){return e.toUpperCase()})}},{key:"onChangeOrderHistory",value:function(e){this._totalCount=e.totalCount,this._orderGroups=e.orderGroups,this.emit(L)}},{key:"onOrderHistoryError",value:function(e){this.emit(w,e)}},{key:"onCancelOrderHistory",value:function(e){this.emit(I)}},{key:"onLoadOrderDetails",value:function(e){this.emit(D+e.data.orderNumber,e)}},{key:"handleActions",value:function(e){switch(e.type){case i.default.LOAD_BOOTSTRAPPED_USER:this.loadAuthenticatedUser(e.args.user);break;case i.default.CHANGE_USER_ROLE:this.onChangeUserRole(e.args);break;case i.default.CHANGE_ACCOUNT_PERMISSIONS:this.onChangeAccountPermissions(e.args);break;case i.default.CHANGE_USER_BUSINESS_STATUS:this.onChangeUserBusinessStatus(e.args);break;case i.default.ENABLE_FREE_CORRECTION:this.emit(v);break;case i.default.GENERATE_PASSWORD_RESET_TOKEN:this.onPasswordResetTokenGenerated(e.args);break;case i.default.LOAD_ATG_COMPARISON:this.onLoadATGComparison(e.args);break;case i.default.LOAD_COUPONS:this.onLoadUserCoupons(e.args);break;case i.default.LOAD_USER_DETAILS:this.onLoadUserDetails(e.args);break;case i.default.SEARCH_USERS:this.onSearchUsers(e.args);break;case i.default.UNLOAD_USER_DETAILS:this.onUnloadUserDetails(e.args);break;case i.default.LOAD_USER_PROJECTS:this.onLoadUserProjects(e.args);break;case i.default.UNLOAD_USER_PROJECTS:this.onUnloadUserProjects();break;case i.default.UPDATE_USER_EMAIL_ADDRESS:this.onUpdateUserEmailAddress(e.args.data);break;case i.default.UPDATE_USER_EMAIL_ADDRESS_ERROR:this.onUserEmailUpdateErrorReturned(e.args);break;case i.default.REPUSH_FILES:this.emit(m);break;case i.default.SYNC_WITH_PM:this.emit(h);break;case i.default.REPUSH_BOOK_FILES:this.emit(y);break;case i.default.STATUS_MODAL_ACTION:this.emit(T,e.args);break;case i.default.ULTRA_PREMIUM_MODAL:this.emit(A,e.args);break;case i.default.ULTRA_PREMIUM_CONVERT:this.emit(N,e.args);break;case i.default.LOAD_ORDER_DETAILS:this.onLoadOrderDetails(e.args);break;case i.default.LOAD_ORDER_HISTORY:this.onChangeOrderHistory(e.args.data);break;case i.default.CANCEL_ORDER_HISTORY:this.onCancelOrderHistory(e.args);break;case i.default.ORDER_DELETE_REASON_COMPLETE:this.onDeleteReason(e.args);break;case i.default.ORDER_HISTORY_ERROR:this.onOrderHistoryError(e.args)}}},{key:"orderGroups",get:function(){return this._orderGroups}},{key:"totalCount",get:function(){return this._totalCount}}])&&l(n.prototype,o),a&&l(n,a),t}());o.default.register(j.handleActions.bind(j));var M=j;t.default=M},76:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(0)),i=n(7),s=o(n(1)),l=o(n(483)),u=o(n(118)),c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(9));function o(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var r=function(e){function r(e,t){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o=this,(n=!(a=m(r).call(this,e,t))||"object"!==d(a)&&"function"!=typeof a?y(o):a).state={date:n.value()?(0,i.bn_moment)(n.value()):null,endDate:n.props.endDate||null,minDate:n.props.minDate,maxDate:n.props.maxDate,selectsEnd:n.props.selectsEnd||!1,selectsStart:n.props.selectsStart||!1,startDate:n.props.startDate||null,utc:n.props.utc||0},n.onChange=n.onChange.bind(y(y(n))),n.onBlur=n.onBlur.bind(y(y(n))),n}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,u.default),t=r,(n=[{key:"componentWillReceiveProps",value:function(e){p(m(r.prototype),"componentWillReceiveProps",this).call(this,e),e!==this.props&&this.setState({endDate:e.endDate,minDate:e.minDate,maxDate:e.maxDate,selectsEnd:e.selectsEnd,selectsStart:e.selectsStart,startDate:e.startDate,utc:e.utc||0})}},{key:"rules",value:function(){var e=p(m(r.prototype),"rules",this).call(this);return this.minDate()&&(e=e.concat(c.minDate(this.minDate()))),this.maxDate()&&(e=e.concat(c.maxDate(this.maxDate()))),e}},{key:"minDate",value:function(){return this.state.minDate||null}},{key:"maxDate",value:function(){return this.state.maxDate||null}},{key:"setValue",value:function(e,t){this.onChange(e,t)}},{key:"onChange",value:function(e,t){this.setState({date:e}),this._changeValue(e||null,t)}},{key:"onBlur",value:function(e){if(!this._controlEventsDisabled&&!this.props.disableOnBlur){var t=e.target.value,n=(0,i.bn_moment)(t),o=t&&n.isValid()?(0,i.bn_moment)(n.format("MM/DD/YYYY")):null;this.onChange(o),this._commitValue(o),this.refs.picker.refs.input.refs.input.blur(),p(m(r.prototype),"onBlur",this).call(this,e)}}},{key:"render",value:function(){return setTimeout(function(){"sales"==location.pathname.split("/")[1].toLowerCase()?document.body.classList.add("datepicker_zindex"):document.body.classList.remove("datepicker_zindex")},1500),a.default.createElement("div",{className:(0,s.default)("base-control","input-control","date-control","label-mode",{"has-value":this.hasValue()},{error:!!this.message()&&!this.disableValidationMessages()},{"read-only":this.readOnly()},this.className())},!this.disableValidationMessages()&&a.default.createElement("div",{className:"message"},a.default.createElement("div",{className:"new-position"},this.message())),a.default.createElement("div",{className:"input-area"},a.default.createElement(l.default,{ref:"picker",id:this.id(),name:this.name(),className:"primary",openToDate:this.state.minDate,selected:this.state.date,disabled:this.readOnly(),excludeDates:this.props.excludeDates,utcOffset:this.state.utc,onChange:this.onChange,onBlur:this.onBlur,minDate:this.state.minDate,maxDate:this.state.maxDate,selectsEnd:this.state.selectsEnd,selectsStart:this.state.selectsStart,endDate:this.state.endDate,startDate:this.state.startDate,autoComplete:"off",disabledKeyboardNavigation:!0}),a.default.createElement("div",{className:"glyphicon glyphicon-calendar"}),a.default.createElement("label",{className:"primary",htmlFor:this.id()},this.label(),this.required()&&!this.disableValidationMessages()&&a.default.createElement("span",null,"*"))),this.props.children,this.note()&&a.default.createElement("div",{className:"note",dangerouslySetInnerHTML:{__html:this.note()}}))}}])&&f(t.prototype,n),o&&f(t,o),r}();r.propType=function(a){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.forEach(function(e){var t,n,o;t=a,o=r[n=e],n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o})}return a}({},u.default.propTypes,{minDate:a.default.PropTypes.object,maxDate:a.default.PropTypes.object});var v=r;t.default=v},79:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(44),o=a(n(16)),i=a(n(18));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f="closeMenu",p="closeMobileMenu",m="layoutChanged",h="mobileMenuChanged",y="windowSizeChanged",v="onGlobalErrorHandled",b="toggleToast",g=new(function(e){function o(){var e,t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=this,(e=!(n=u(o).call(this))||"object"!==s(n)&&"function"!=typeof n?d(t):n).mobileMenuState="closed",e.toastStatus=!1,e.onWindowResize=e.onWindowResize.bind(d(d(e))),window.addEventListener("resize",e.onWindowResize),e}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r.EventEmitter),t=o,(n=[{key:"addLayoutChangeListener",value:function(e){this.addListener(m,e)}},{key:"removeLayoutChangeListener",value:function(e){this.removeListener(m,e)}},{key:"addMenuLinkClickedListener",value:function(e){this.addListener(f,e)}},{key:"removeMenuLinkClickedListener",value:function(e){this.removeListener(f,e)}},{key:"addMobileMenuChangeListener",value:function(e){this.addListener(h,e)}},{key:"removeMobileMenuChangeListener",value:function(e){this.removeListener(h,e)}},{key:"addMobileMenuLinkClickedListener",value:function(e){this.addListener(p,e)}},{key:"removeMobileMenuLinkClickedListener",value:function(e){this.removeListener(p,e)}},{key:"addWindowResizeListener",value:function(e){this.addListener(y,e)}},{key:"removeWindowResizeListener",value:function(e){this.removeListener(y,e)}},{key:"addGlobalErrorListener",value:function(e){this.addListener(v,e)}},{key:"removeGlobalErrorListener",value:function(e){this.removeListener(v,e)}},{key:"addToggleToastListener",value:function(e){this.addListener(b,e)}},{key:"removeToggleToastListener",value:function(e){this.removeListener(b,e)}},{key:"getMobileMenuState",value:function(){return this.mobileMenuState}},{key:"getCurrentDimensions",value:function(){return this._createDimensions(window.innerWidth,window.innerHeight)}},{key:"getToastStatus",value:function(){return this.toastStatus}},{key:"onMobileMenuClosed",value:function(){this.mobileMenuState="closed",this.emit(h)}},{key:"onMobileMenuOpened",value:function(){this.mobileMenuState="opened",this.emit(h)}},{key:"onToggleToast",value:function(e,t,n){this.toastStatus=e,this.emit(b,e,t,n)}},{key:"onWindowResize",value:function(e){this.emit(y,this._createDimensions(e.currentTarget.innerWidth,e.currentTarget.innerHeight))}},{key:"_createDimensions",value:function(e,t){return{width:e,height:t,mode:this._isWindowMobile(e)?"mo":"dt"}}},{key:"_isWindowMobile",value:function(e){return e<=768}},{key:"handleActions",value:function(e){switch(e.type){case i.default.WindowEvents.LAYOUT_CONTENT_CHANGED:this.emit(m);break;case i.default.WindowEvents.MENU_LINK_CLICKED:this.emit(f);break;case i.default.WindowEvents.MOBILE_MENU_CLOSED:this.onMobileMenuClosed();break;case i.default.WindowEvents.MOBILE_MENU_LINK_CLICKED:this.emit(p);break;case i.default.WindowEvents.MOBILE_MENU_OPENED:this.onMobileMenuOpened();break;case i.default.Errors.GENERIC_SERVICE_ERROR:this.emit(v,e.args);break;case i.default.WindowEvents.TOGGLE_TOAST:this.onToggleToast(e.args.toggle,e.args.content,e.args.duration)}}}])&&l(t.prototype,n),a&&l(t,a),o}());o.default.register(g.handleActions.bind(g));var E=g;t.default=E},8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(44),o=d(n(16)),i=d(n(18)),s=(a(n(11)),a(n(17)),d(n(64))),l=a(n(15)),u=d(n(516)),c=d(n(517));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=m(this,h(t).call(this)))._allLanguages=null,e._coupons=null,e._couponsDelete=null,e._errors=[],e._priceUpdateWindow=null,e._project=new s.default,e._projectConstants={},e._printBookSize=null,e._ISBNOptions=null,e._eBookSize=null,e._sampleSelected=null,e._onRoyaltyPrice=null,e._onPageBanners=null,e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r.EventEmitter),n=t,(o=[{key:"addAttachmentReadyForPolling",value:function(e){this.addListener(E,e)}},{key:"removeAttachmentReadyForPolling",value:function(e){this.removeListener(E,e)}},{key:"addCategoriesSearchedListener",value:function(e){this.addListener(j,e)}},{key:"removeCategoriesSearchedListener",value:function(e){this.removeListener(j,e)}},{key:"addCategoriesLoadedListener",value:function(e){this.addListener(w,e)}},{key:"removeCategoriesLoadedListener",value:function(e){this.removeListener(w,e)}},{key:"addCouponSpecsListener",value:function(e){this.addListener(C,e)}},{key:"removeCouponSpecsListener",value:function(e){this.removeListener(C,e)}},{key:"addLanguageListener",value:function(e){this.addListener(k,e)}},{key:"removeLanguageListener",value:function(e){this.removeListener(k,e)}},{key:"addCoverFormattingSpecsLoadedListener",value:function(e){this.addListener(M,e)}},{key:"removeCoverFormattingSpecsLoadedListener",value:function(e){this.removeListener(M,e)}},{key:"addEbookCouponsLoadedListener",value:function(e){this.addListener(T,e)}},{key:"removeEbookCouponsLoadedListener",value:function(e){this.removeListener(T,e)}},{key:"addEbookCouponsDeleteListener",value:function(e){this.addListener(A,e)}},{key:"removeEbookCouponsDeleteListener",value:function(e){this.removeListener(A,e)}},{key:"addPDFConversionCompleteListener",value:function(e){this.addListener(N,e)}},{key:"removePDFConversionCompleteListener",value:function(e){this.removeListener(N,e)}},{key:"addPollingAttachmentError",value:function(e){this.addListener(L,e)}},{key:"removePollingAttachmentError",value:function(e){this.removeListener(L,e)}},{key:"addPollingAttachmentSuccess",value:function(e){this.addListener(D,e)}},{key:"removePollingAttachmentSuccess",value:function(e){this.removeListener(D,e)}},{key:"addProjectCreatedListener",value:function(e){this.addListener(x,e)}},{key:"removeProjectCreatedListener",value:function(e){this.removeListener(x,e)}},{key:"addPreviewReadyListener",value:function(e){this.addListener(Z,e)}},{key:"removePreviewReadyListener",value:function(e){this.removeListener(Z,e)}},{key:"addPreviewFailedListener",value:function(e){this.addListener(X,e)}},{key:"removePreviewFailedListener",value:function(e){this.removeListener(X,e)}},{key:"addPriceUpdateWindowListener",value:function(e){this.addListener(B,e)}},{key:"removePriceUpdateWindowListener",value:function(e){this.removeListener(B,e)}},{key:"addProjectChangedListener",value:function(e){this.addListener(I,e)}},{key:"removeProjectChangedListener",value:function(e){this.removeListener(I,e)}},{key:"addProjectChangedNotSavedListener",value:function(e){this.addListener(R,e)}},{key:"removeProjectChangedNotSavedListener",value:function(e){this.removeListener(R,e)}},{key:"addProjectChangedHasErrorsListener",value:function(e){this.addListener(q,e)}},{key:"removeProjectChangedHasErrorsListener",value:function(e){this.removeListener(q,e)}},{key:"addProjectQuoteStartedListener",value:function(e){this.addListener(V,e)}},{key:"removeProjectQuoteStartedListener",value:function(e){this.removeListener(V,e)}},{key:"addProjectQuoteListener",value:function(e){this.addListener(F,e)}},{key:"addCoverGenerateListener",value:function(e){this.addListener(me,e)}},{key:"addProjectCalculateBookPriceStartedListener",value:function(e){this.addListener(Y,e)}},{key:"removeProjectCalculateBookPriceStartedListener",value:function(e){this.removeListener(Y,e)}},{key:"addProjectCalculateBookPriceErrorListener",value:function(e){this.addListener(G,e)}},{key:"removeProjectCalculateBookPriceErrorListener",value:function(e){this.removeListener(G,e)}},{key:"addProjectCalculateBookPriceListener",value:function(e){this.addListener(H,e)}},{key:"removeProjectCalculateBookPriceListener",value:function(e){this.removeListener(H,e)}},{key:"removeProjectQuoteListener",value:function(e){this.removeListener(F,e)}},{key:"removeCoverGenerateListener",value:function(e){this.removeListener(me,e)}},{key:"addProjectBookSizeExistsStartedListener",value:function(e){this.addListener(W,e)}},{key:"removeProjectBookSizeExistsStartedListener",value:function(e){this.removeListener(W,e)}},{key:"addProjectBookSizeExistsCompletedListener",value:function(e){this.addListener(K,e)}},{key:"removeProjectBookSizeExistsCompletedListener",value:function(e){this.removeListener(K,e)}},{key:"addRemoveUploadError",value:function(e){this.addListener(Q,e)}},{key:"removeRemoveUploadError",value:function(e){this.removeListener(Q,e)}},{key:"addUploadAttachmentError",value:function(e){this.addListener(z,e)}},{key:"removeUploadAttachmentError",value:function(e){this.removeListener(z,e)}},{key:"addOrderStatusErrorListener",value:function(e){this.addListener(J,e)}},{key:"removeOrderStatusErrorListener",value:function(e){this.removeListener(J,e)}},{key:"addOrderStatusSetListener",value:function(e){this.addListener($,e)}},{key:"removeOrderStatusSetListener",value:function(e){this.removeListener($,e)}},{key:"addPublishAlertRemoveListener",value:function(e){this.addListener(te,e)}},{key:"removePublishAlertRemoveListener",value:function(e){this.removeListener(te,e)}},{key:"addPublishAlertShowListener",value:function(e){this.addListener(ne,e)}},{key:"removePublishAlertShowListener",value:function(e){this.removeListener(ne,e)}},{key:"addSetSaleStatusListener",value:function(e){this.addListener(se,e)}},{key:"removeSetSaleStatusListener",value:function(e){this.removeListener(se,e)}},{key:"addSetSaleStatusErrorListener",value:function(e){this.addListener(le,e)}},{key:"removeSetSaleStatusErrorListener",value:function(e){this.removeListener(le,e)}},{key:"addStartDeleteListener",value:function(e){this.addListener(ie,e)}},{key:"removeStartDeleteListener",value:function(e){this.removeListener(ie,e)}},{key:"addBookSizeTypeCompleteListener",value:function(e){this.addListener(P,e)}},{key:"removeBookSizeTypeCompleteListener",value:function(e){this.removeListener(P,e)}},{key:"addDeleteReasonCompleteListener",value:function(e){this.addListener(S,e)}},{key:"removeDeleteReasonCompleteListener",value:function(e){this.removeListener(S,e)}},{key:"addBookSizeTypeMetaDataListener",value:function(e){this.addListener(_,e)}},{key:"removeBookSizeTypeMetaDataListener",value:function(e){this.removeListener(_,e)}},{key:"addBookSizeTypeResetListener",value:function(e){this.addListener(O,e)}},{key:"removeBookSizeTypeResetListener",value:function(e){this.removeListener(O,e)}},{key:"addProjectConstantsLoadedListener",value:function(e){this.addListener(ee,e)}},{key:"removeProjectConstantsLoadedListener",value:function(e){this.removeListener(ee,e)}},{key:"addScheduledPricesListener",value:function(e){this.addListener(oe,e)}},{key:"removeScheduledPricesListener",value:function(e){this.removeListener(oe,e)}},{key:"addRoyaltyPricesListener",value:function(e){this.addListener(ae,e)}},{key:"removeRoyaltyPricesListener",value:function(e){this.removeListener(ae,e)}},{key:"addPageBannersListener",value:function(e){this.addListener(re,e)}},{key:"removePageBannersListener",value:function(e){this.removeListener(re,e)}},{key:"addUserCouponSavedListener",value:function(e){this.addListener(ue,e)}},{key:"removeUserCouponSavedListener",value:function(e){this.removeListener(ue,e)}},{key:"addUserCouponSavedErrorListener",value:function(e){this.addListener(ce,e)}},{key:"removeUserCouponSavedErrorListener",value:function(e){this.removeListener(ce,e)}},{key:"addPrintSizeListener",value:function(e){this.addListener(de,e)}},{key:"removePrintSizeListener",value:function(e){this.removeListener(de,e)}},{key:"addISBNOptionsListener",value:function(e){this.addListener(fe,e)}},{key:"removeISBNOptionsListener",value:function(e){this.removeListener(fe,e)}},{key:"addEBookSizeListener",value:function(e){this.addListener(pe,e)}},{key:"removeEBookSizeListener",value:function(e){this.removeListener(pe,e)}},{key:"addSampleSelectedListener",value:function(e){this.addListener(g,e)}},{key:"removeSampleSelectedListener",value:function(e){this.removeListener(g,e)}},{key:"sampleSelected",value:function(){return this._sampleSelected}},{key:"printBookSize",value:function(){return this._printBookSize}},{key:"ISBNOptions",value:function(){return this._ISBNOptions}},{key:"eBookSize",value:function(){return this._eBookSize}},{key:"coupons",value:function(){return this._coupons}},{key:"couponsDelete",value:function(){return this._couponsDelete}},{key:"couponSpecs",value:function(){return this._couponSpecs}},{key:"allLanguages",value:function(){return this._allLanguages}},{key:"errors",value:function(){return this._errors}},{key:"project",value:function(){return this._project}},{key:"royalty",value:function(){return this._onRoyaltyPrice}},{key:"banners",value:function(){return this._onPageBanners}},{key:"projectConstants",value:function(e,t){return this._projectConstants[e].values.find(function(e){return t===e.key})}},{key:"isValidProjectType",value:function(e){return e===l.EBOOK||e===l.PRINT||e===l.POD}},{key:"priceUpdateWindow",value:function(){return this._priceUpdateWindow}},{key:"retailAndDistributionPercentage",value:function(t){if(this._project.isSPB)return l.SPB_RETAIL_AND_DISTRIBUTION_PERCENTAGE;var n=0;return l.EBOOK_RETAIL_AND_DISTRIBUTION_PERCENTAGES.map(function(e){e.floorPrice<=t&&t<=e.ceilingPrice&&(n=e.percentage)}),n}},{key:"eBookRetailAndDistributionPercentage",value:function(t){var n=0;return l.EBOOK_RETAIL_AND_DISTRIBUTION_PERCENTAGES.map(function(e){e.floorPrice<=t&&t<=e.ceilingPrice&&(n=e.percentage)}),n}},{key:"warning",value:function(){return this._project.warningMessage}},{key:"onAcknowledgePageCountChanged",value:function(){this._project.hasPageCountChanged=!1}},{key:"onDeleteReason",value:function(e){var n=[];e.data.setting.map(function(e,t){return n.push({value:e.SettingId,label:e.SettingId,key:t})}),this.emit(S,n)}},{key:"onBookSizeTypeReset",value:function(e){this._project.resetBookSizeType(e.elements),e.resetPrice&&(this._project.price=0,this._project._quotedPrice=new c.default(0,0,0,0,0)),this.emit(O,!1)}},{key:"onChangeProject",value:function(e){this._project=e.project,this._errors=[],!0===e.publish&&(this._project.showPublishAlert||this._project.showPutOnSaleAlert)&&this.emit(ne),this._project.showPublishAlert||this._project.showPutOnSaleAlert||this.emit(te),this.emit(I)}},{key:"onChangeProjectNotSaved",value:function(e){this._project=e.project,this._errors=[],this.emit(R)}},{key:"onRoyaltyPrice",value:function(e){this._onRoyaltyPrice=e,this.emit(ae)}},{key:"onPageBanners",value:function(e){this._onPageBanners=e,this.emit(re)}},{key:"onChangeProjectHasErrors",value:function(e){this._errors=e,this.emit(q)}},{key:"onCouponSpecsLoaded",value:function(e){this._couponSpecs=e,this.emit(C)}},{key:"onLanguageLoaded",value:function(e){this._allLanguages=e,this.emit(k)}},{key:"onStartDeleteProject",value:function(){this.emit(ie)}},{key:"onDeleteProject",value:function(){this._project=new s.default}},{key:"onEbookCouponsLoaded",value:function(e){var t=[],n=[],o=[],a="",r=e.data;r&&0<r.length&&(t=r.filter(function(e){return"ACTIVE"===e.status}),n=r.filter(function(e){return"EXPIRED"===e.status}),o=r.filter(function(e){return"SCHEDULED"===e.status}),a=e.numberOfRecords),this._coupons={activeCoupons:t,expiredCoupons:n,scheduledCoupons:o,noOfRecords:a},this.emit(T)}},{key:"onEbookCouponsDelete",value:function(e){var t=e;this._couponsDelete={couponsDelete:t},this.emit(A)}},{key:"onCoverFormattingSpecsLoaded",value:function(e){var t=this.project();t.formattingBleedZone=e.bleedZone,t.formattingCoverWidth=e.coverWidth,t.formattingFlapWidth=e.flapWidth,t.formattingGutter=e.gutter,t.formattingMargin=e.margin,t.formattingSpineWidth=e.spineWidth,t.formattingTotalHeight=e.totalHeight,t.formattingTotalWidth=e.totalWidth,t.formattingWrap=e.wrap,this.emit(M)}},{key:"onLoadCategories",value:function(e){this.emit(w,e.categories)}},{key:"onLoadPriceUpdateWindow",value:function(e){this._priceUpdateWindow=e.data,this.emit(B,e.data)}},{key:"onSearchCategories",value:function(e){this.emit(j,e)}},{key:"onProjectQuoteCompleted",value:function(e){var t=this.project();void 0!==t&&(t.quotedPrice=this._setQuotedPrice(e),this.emit(F,e.floor_price))}},{key:"onCoverRedayToDownload",value:function(e){this.emit(me,e)}},{key:"OnLoadPrintSize",value:function(e){this._printBookSize={data:e},this.emit(de)}},{key:"OnLoadISBNOptions",value:function(e){this._ISBNOptions={data:e},this.emit(fe)}},{key:"onLoadEBookSize",value:function(e){this._eBookSize={data:e},this.emit(pe)}},{key:"onLoadSelectSamplePreview",value:function(e){this._sampleSelected={data:e},this.emit(g)}},{key:"onProjectCalculateBookPriceStarted",value:function(){this.emit(Y)}},{key:"onProjectCalculateBookPriceCompleted",value:function(e){this.emit(H,e)}},{key:"onProjectCalculateBookPriceError",value:function(e){this.emit(G,e)}},{key:"onProjectBookSizeExistsStarted",value:function(){void 0!==this.project()&&this.emit(W)}},{key:"onProjectBookSizeExistsCompleted",value:function(e){void 0!==this.project()&&this.emit(K,e.doProjectsExist)}},{key:"onProjectPreflightSuccess",value:function(e){this.emit(D,e.data)}},{key:"onStartNewProject",value:function(){this._project=new s.default,this.emit(x)}},{key:"onSetProjectId",value:function(e){this._project.id=e.id,this._project.grouped=e.isExisting,this.emit(U)}},{key:"onPreviewReady",value:function(e){this.emit(Z,e)}},{key:"onPreviewFailed",value:function(e){this.emit(X,e)}},{key:"onProjectConstantsLoaded",value:function(e){var t=!0,n=!1,o=void 0;try{for(var a,r=e.fields[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var i=a.value;this._projectConstants[i.key]=i}}catch(e){n=!0,o=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw o}}this.emit(ee)}},{key:"_setQuotedPrice",value:function(e){return this.project().type===l.PRINT?new c.default(e.floor_price,e.retail_margin,e.printing_cost,e.net_royalty,e.cost_per_page,e.pricing_description,e.royalty_rate):new u.default(e.price)}},{key:"handleActions",value:function(e){switch(e.type){case i.default.Project.ACKNOWLEDGE_PAGECOUNT_CHANGED:this.onAcknowledgePageCountChanged();break;case i.default.Project.BOOK_SIZE_TYPE_COMPLETE:this.emit(P,!0);break;case i.default.Project.ORDER_DELETE_REASON_COMPLETE:this.onDeleteReason(e.args);break;case i.default.Project.BOOK_SIZE_TYPE_METADATA:this.emit(_,e.args.data);break;case i.default.Project.BOOK_SIZE_TYPE_RESET:this.onBookSizeTypeReset(e.args);break;case i.default.Project.CHANGE_PROJECT:case i.default.ProjectGroups.CLONE_PROJECT_IN_GROUP:this.onChangeProject(e.args);break;case i.default.Project.CHANGE_PROJECT_NOT_SAVED:this.onChangeProjectNotSaved(e.args);break;case i.default.Project.CHANGE_PROJECT_ERROR:this.onChangeProjectHasErrors(e.args.errors);break;case i.default.Project.COUPON_SPECS_LOADED:this.onCouponSpecsLoaded(e.args);break;case i.default.Project.LANGUAGES_LOADED:this.onLanguageLoaded(e.args);break;case i.default.Project.SET_PROJECT_ID:this.onSetProjectId(e.args);break;case i.default.Project.LOAD_EBOOK_COUPONS:this.onEbookCouponsLoaded(e.args);break;case i.default.Project.DELETE_EBOOK_COUPONS:this.onEbookCouponsDelete(e.args);break;case i.default.Project.LOAD_EBOOK_PREVIEW:this.onPreviewReady(e.args);break;case i.default.Project.LOAD_EBOOK_PREVIEW_FAILED:case i.default.Project.LOAD_EBOOK_PREVIEW_TIMEDOUT:this.onPreviewFailed(e.args);break;case i.default.Project.LOAD_PRICE_UPDATE_WINDOW:this.onLoadPriceUpdateWindow(e.args);break;case i.default.Project.GET_PREFLIGHT_STATUS_ERROR:this.emit(L,e.args.data);break;case i.default.Project.GET_PREFLIGHT_STATUS_SUCCESS:this.onProjectPreflightSuccess(e.args);break;case i.default.Project.LOAD_CATEGORIES:this.onLoadCategories(e.args);break;case i.default.Project.SEARCH_CATEGORIES:this.onSearchCategories(e.args);break;case i.default.Project.COVER_FORMATTING_SPECS:this.onCoverFormattingSpecsLoaded(e.args.data.coverSpecsDetail[0]);break;case i.default.Project.LOAD_NEW_PROJECT:this.onStartNewProject();break;case i.default.Project.DELETE_PROJECT:this.onDeleteProject();break;case i.default.Project.PROJECT_CONSTANTS_LOADED:this.onProjectConstantsLoaded(e.args.data);break;case i.default.Project.START_DELETE_PROJECT:this.onStartDeleteProject();break;case i.default.Project.START_PRICE_ESTIMATE:this.onProjectQuoteStarted();break;case i.default.Project.COMPLETE_PRICE_ESTIMATE:this.onProjectQuoteCompleted(e.args.quote);break;case i.default.Project.COVER_GENERATED_DOWNLOAD:this.onCoverRedayToDownload(e.args);break;case i.default.Project.PDF_COVERSION_COMPLETE:this.emit(N);break;case i.default.Project.RESET_PRICE_ESTIMATE:this.onProjectQuoteReset(e.args.project);break;case i.default.Project.START_CALCULATE_BOOK_PRICE:this.onProjectCalculateBookPriceStarted();break;case i.default.Project.COMPLETE_CALCULATE_BOOK_PRICE:this.onProjectCalculateBookPriceCompleted(e.args);break;case i.default.Project.ERROR_CALCULATE_BOOK_PRICE:this.onProjectCalculateBookPriceError(e.args);break;case i.default.Project.START_PROJECT_BOOKSIZE_EXIST:this.onProjectBookSizeExistsStarted();break;case i.default.Project.COMPLETE_PROJECT_BOOKSIZE_EXIST:this.onProjectBookSizeExistsCompleted(e.args);break;case i.default.Project.REMOVE_UPLOAD_ERRORS:this.emit(Q);break;case i.default.Project.UPLOAD_ATTACHMENT:this.emit(E,e.args.project);break;case i.default.Project.UPLOAD_ATTACHMENT_ERROR:this.emit(z);break;case i.default.Project.ORDER_STATUS_ERROR:this.emit(J,e.args.response);break;case i.default.Project.ORDER_STATUS_SET:this.emit($);break;case i.default.Project.PUBLISH_ALERT_REMOVE:this.emit(te);break;case i.default.Project.SCHEDULED_PRICES:this.emit(oe,e.args.prices);break;case i.default.ProjectGroups.ROYALTY_PRICES:this.onRoyaltyPrice(e.args);break;case i.default.ProjectGroups.PAGE_BANNERS:this.onPageBanners(e.args);break;case i.default.Project.SET_SALE_STATUS:this.emit(se,e.args.id);break;case i.default.Project.SET_SALE_STATUS_ERROR:this.emit(le,e.args);break;case i.default.Project.USER_COUPON_SAVED:this.emit(ue);break;case i.default.Project.USER_COUPON_SAVED_ERROR:this.emit(ce,e.args.errors);break;case i.default.VendorAccount.LOAD_PRINTBOOK_SIZE:this.OnLoadPrintSize(e.args);break;case i.default.VendorAccount.LOAD_ISBN_OPTIONS:this.OnLoadISBNOptions(e.args);break;case i.default.VendorAccount.LOAD_EBOOK_SIZE:this.onLoadEBookSize(e.args);break;case i.default.Project.SELECT_SAMPLE_PREVIEW:this.onLoadSelectSamplePreview(e.args)}}}])&&p(n.prototype,o),a&&p(n,a),t}());v.setMaxListeners(0),v.dispatchToken=o.default.register(v.handleActions.bind(v));var b=v;t.default=b;var g="sampleSelectedLoaded",E="attachmentReadyForPolling",P="bookSizeTypeComplete",S="orderDeleteReseonComplete",_="bookSizeTypeMetaData",O="bookSizeTypeReset",C="couponSpecsLoaded",k="languageLoaded",T="ebookCouponsLoaded",A="ebookCouponsDelete",N="pdfConversionComplete",L="pollingAttachmentError",D="pollingAttachmentSuccess",I="projectChanged",R="projectChangedNotSaved",w="categoriesLoaded",j="categoriesSearched",M="coverFormattingSpecsLoaded",B="priceUpdateWindowLoaded",x="projectCreated",U="onProjectIdSet",V="onProjectQuoteStarted",F="onProjectQuoted",G="onProjectBookPriceSetError",Y="onProjectBookPriceSetStarted",H="onProjectBookPriceSet",W="onProjectBookSizeExistsStarted",K="onProjectBookSizeExists",q="onProjectChangedError",z="onUploadAttachmentError",J="orderStatusError",$="orderStatusSet",Z="onPreviewReady",X="onPreviewFailed",Q="removeUploadErrors",ee="projectConstantsLoaded",te="publishAlertRemove",ne="publishAlertShow",oe="scheduledPrices",ae="royaltyPrices",re="pageBanners",ie="startDeleteProject",se="setSaleStatus",le="setSaleStatusError",ue="userCouponSaved",ce="userCouponSavedError",de="printBookSize",fe="ISBNOptions",pe="eBookSize",me="onCoverGenerated"},9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInstance=o,t.duplicateEmail=function(r){return{key:"duplicateEmail",test:function(e,t,n){for(var o=[],a=0;a<r.length;a++)r[a].email==e&&o.push(1);return 0<o.length?"A contributor already exists with this email address":null}}},t.required=a,t.requiredAllTheTime=function(o){return{key:"requiredAllTheTime",test:function(e,t,n){return u(o,e,t,n)}}},t.minValue=function(o,a){return{key:"minValue",minValue:o,test:function(e,t,n){return!e||0===e.length||o<=e?null:a||t+" must be "+o+" or more"}}},t.maxValue=function(o,a){return{key:"maxValue",maxValue:o,test:function(e,t,n){return!e||0===e.length||e<=o?null:a||t+" must be "+o+" or more"}}},t.minLength=i,t.maxLength=function(o,a){return{key:"maxLength",maxLength:o,test:function(e,t,n){return!e||e.length<=o?null:a||t+" Max Length "+o}}},t.pattern=function(o,a){return{key:"pattern",onlyAfterCommit:2<arguments.length&&void 0!==arguments[2]&&arguments[2],test:function(e,t,n){return!e||0===e.length||o.test(e)?null:a||t+" Invalid"}}},t.contains=s,t.not=l,t.maxDate=function(o,a){return{key:"maxDate",onlyAfterCommit:!0,test:function(e,t,n){return o&&e&&e.isSameOrBefore((0,r.bn_moment)(o.format("MM/DD/YYYY")))?null:a||"Please enter "+o.format("MM/DD/YYYY")+" or earlier."}}},t.minDate=function(o,a){return{key:"minDate",onlyAfterCommit:!0,test:function(e,t,n){return o&&e&&e.isSameOrAfter((0,r.bn_moment)(o.format("MM/DD/YYYY")))?null:a||"Please enter "+o.format("MM/DD/YYYY")+" or later."}}},t.matchesControl=function(o,a,e){return{key:"matchField",onlyAfterCommit:e,test:function(e,t,n){return e===n[o].value()?null:a||t+" Does Not Match "+n[o].label()}}},t.numOnly=function(o){return{key:"numOnly",test:function(e,t,n){return!e||/^[[0-9]+]*?(?= *$)/.test(e)?null:o||"Please enter numbers only in this field."}}},t.floatOnly=function(o){return{key:"floatOnly",test:function(e,t,n){return!e||/^\d+(\.\d{1,2})?$/.test(e)?null:o||"Please enter numbers only in this field."}}},t.validRanges=function(a,r){return{key:"validRanges",test:function(t,e,n){var o=!1;return a.map(function(e){e.min<=t&&t<=e.max&&(o=!0)}),o?null:r||"Not within valid ranges"}}},t.serverSide=function(){return{key:"serverSide",setInvalid:function(e,t){this.invalidValue=e,this.message=t},test:function(e){return e===this.invalidValue?this.message:(this.invalidValue=null,this.message=null)}}},t.noFlag=function(o,a){return{key:"temp",test:function(e,t,n){return o?a||"This value is invalid.":null}}},t.evenNumOnly=function(o){return{key:"evenNumOnly",onlyAfterCommit:!0,test:function(e,t,n){return e&&/^[[0-9]+]*?(?= *$)/.test(e)&&e%2==0&&17<e&&e<801?null:o||"Please enter numbers only in this field."}}},t.formatUSNumber=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(!(e=e.replace(/\D+/g,"").replace(/^1/,"")))return"";var t=e.match(/([^\d]*\d[^\d]*){1,10}$/)[0],n=2<t.length?"".concat(t.substring(0,3)):t,o=3<t.length?"-".concat(t.substring(3,6)):"",a=6<t.length?"-".concat(t.substring(6,10)):"";return"".concat(n).concat(o).concat(a)},t.getPasswordRules=t.getPasswordRuleList=void 0;var r=n(7);t.getPasswordRuleList=function(){return[{id:1,text:"Be between 8-15 characters"},{id:2,text:"Contain at least one capital letter"},{id:3,text:"Contain at least one number"},{id:4,text:"Be different from your username"}]};function o(e,t){return t.id=e,t}function a(o){return{key:"required",test:function(e,t,n){return u(o,e,t,n)}}}function i(o,a){var e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return{key:"minLength",minLength:o,onlyAfterCommit:e,test:function(e,t,n){return!e||0===e.length||e.length>=o?null:a||t+" Min Length "+o}}}function s(a,r){return{key:"regexArray",onlyAfterCommit:2<arguments.length&&void 0!==arguments[2]&&arguments[2],test:function(t,e,n){var o=!0;return a.map(function(e){o=o&&!!t.match(e)}),o?null:r||e+" Doesn't meet requirements"}}}function l(r,i){var e=2<arguments.length&&void 0!==arguments[2]&&arguments[2],s=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],l=!(4<arguments.length&&void 0!==arguments[4])||arguments[4];return{key:"not",onlyAfterCommit:e,test:function(e,t,n){var o=s?e:e.toLowerCase(),a=l?n[r].value():r;return s||(a=a.toLowerCase()),o!==a?null:i||t+" can't be "+r}}}function u(e,t,n,o){return t&&(0<t.length||""!==t)?null:e||"Please enter the "+n+"."}t.getPasswordRules=function(e){return[o(0,a("Please enter a password.")),o(1,i(8,"Your password must be 8-15 characters and contain at least one uppercase letter and at least one number.",!1)),o(2,s([/[A-Z]/],"Your password must contain at least one upper case letter")),o(3,s([/[0-9]/],"Your password must contain at least one number.",!1)),o(4,l(e,"Your password can't be the same as your username.",!1,!1,!1))]}},91:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePromo=function(t){u.deletePromo(t,function(e){return l.default.dispatch({type:s.default.Merchandising.DELETE_MERCHANDISING_PROMO,args:{id:t}})})},t.loadFilters=function(){u.loadFilters(function(e){return l.default.dispatch({type:s.default.Merchandising.LOAD_MERCHANDISING_PROMO_FILTERS,args:e})})},t.loadPromoRules=function(){u.loadPromoRules(function(e){return l.default.dispatch({type:s.default.Merchandising.LOAD_MERCHANDISING_PROMO_RULES,args:e})})},t.loadPromos=function(e,t,n,o){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20,r=5<arguments.length?arguments[5]:void 0,i=6<arguments.length?arguments[6]:void 0;u.loadPromos(e,t,n,o,a,r,i,function(e){l.default.dispatch({type:s.default.Merchandising.LOAD_MERCHANDISING_PROMOS,args:{data:e}})})},t.submitPromo=function(t,n){u.submitPromo(t,function(e){l.default.dispatch({type:s.default.Merchandising.SUBMIT_MERCHANDISING_PROMO,args:{promo:t,response:e}}),n&&n(e)},function(e){return l.default.dispatch({type:s.default.Merchandising.SUBMIT_MERCHANDISING_PROMO_ERRORS,args:e}),!0})},t.updatePromoStatus=function(e,t,n,o){u.updatePromoStatus(e,t,n,o,function(e){return l.default.dispatch({type:s.default.Merchandising.UPDATE_MERCHANDISING_PROMO_STATUS,args:e})})};var s=o(n(18)),l=o(n(16)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(1046));function o(e){return e&&e.__esModule?e:{default:e}}},92:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(18)),i=n(44),o=a(n(16));a(n(527));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f="merchandisingPromoFiltersLoaded",p="merchandisingPromoRulesLoaded",m="merchandisingPromosLoaded",h="merchandisingPromoStatusChanged",y="merchandisingPromoSubmitted",v="merchandisingPromoSubmittedErrors",b=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this)))._promoFilters=[],e._promoRules=[],e._promoFormItems=null,e._promos=null,e._numberOfRecords=0,e._submissionError=null,e._searchResult=null,e.setMaxListeners(0),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.EventEmitter),n=t,(o=[{key:"addFiltersListener",value:function(e){this.addListener(f,e)}},{key:"removeFiltersListener",value:function(e){this.removeListener(f,e)}},{key:"addRulesListener",value:function(e){this.addListener(p,e)}},{key:"removeRulesListener",value:function(e){this.removeListener(p,e)}},{key:"addMerchandisingPromosLoadedListener",value:function(e){this.addListener(m,e)}},{key:"removeMerchandisingPromosLoadedListener",value:function(e){this.removeListener(m,e)}},{key:"addMerchandisingPromoStatusChangedListener",value:function(e){this.addListener(h,e)}},{key:"removeMerchandisingPromoStatusChangedListener",value:function(e){this.removeListener(h,e)}},{key:"addPromoSubmittedListener",value:function(e){this.addListener(y,e)}},{key:"removePromoSubmittedListener",value:function(e){this.removeListener(y,e)}},{key:"addPromoSubmissionErrorListener",value:function(e){this.addListener(v,e)}},{key:"removePromoSubmissionErrorListener",value:function(e){this.removeListener(v,e)}},{key:"getMerchandisingPromoFilters",value:function(){return this._promoFilters}},{key:"getAllMerchandisingRules",value:function(){return this._promoRules}},{key:"getMerchandisingPromoRules",value:function(e){var t=this._promoRules,n=[];for(var o in t)if(t[o].position===e){var a=t[o].rules.split("|");for(var r in a)n.push(a[r]);n.push(t[o].links)}else if(t[o].mercPromoType===e){var i=t[o].rules.split("|");for(var s in i)n.push(i[s]);n.push(t[o].links)}return n}},{key:"getMerchandisingPromoFormItems",value:function(e){var t=this._promoRules,n="";for(var o in t)t[o].position===e?n=t[o]:t[o].mercPromoType===e&&(n=t[o]);return n}},{key:"getMerchandisingPromoIntro",value:function(e){var t=this._promoRules,n="";for(var o in t)t[o].position===e?n=t[o].copy:t[o].mercPromoType==e&&(n=t[o].copy);return n}},{key:"getMerchandisingPromoName",value:function(e){var t=this._promoRules,n="";for(var o in t)t[o].position===e?n=t[o].merchPromoName:t[o].mercPromoType==e&&(n=t[o].merchPromoName);return n}},{key:"getMerchandisingSubmitByPromoDates",value:function(e){var t=this._promoRules,n="";for(var o in t)t[o].mercPromoType==e?n=t[o].end:t[o].position===e&&(n=t[o].end);return n}},{key:"getMerchandisingDisplayStart",value:function(e){var t=this._promoRules,n="";for(var o in t)t[o].mercPromoType==e?n=t[o].promoStartDisplayDate:t[o].position===e&&(n=t[o].promoStartDisplayDate);return n}},{key:"getMerchandisingDisplayEnd",value:function(e){var t=this._promoRules,n="";for(var o in t)t[o].mercPromoType==e?n=t[o].promoEndDisplayDate:t[o].position===e&&(n=t[o].promoEndDisplayDate);return n}},{key:"getMerchandisingDisplayId",value:function(e){var t=this._promoRules,n="";for(var o in t)t[o].mercPromoType==e?n=t[o].id:t[o].position===e&&(n=t[o].id);return n}},{key:"getPromos",value:function(){return this._promos}},{key:"getErrorMessage",value:function(){return this._submissionError}},{key:"onMerchandisingPromoDeleted",value:function(e){this.emit(h)}},{key:"onMerchandisingPromoFiltersLoaded",value:function(e){this._promoFilters=this.cleanFilterData(e),this.emit(f)}},{key:"onMerchandisingPromoRulesLoaded",value:function(e){this._promoRules=e,this.emit(p)}},{key:"onMerchandisingPromoStatusUpdated",value:function(e){this.emit(h)}},{key:"onMerchandisingPromosLoaded",value:function(e){this._promos=e.promos,this._numberOfRecords=e.numberOfRecords,this.emit(m,e)}},{key:"onMerchandisingPromoSubmitted",value:function(e){this._promos=e.response,this.emit(y,e.promo)}},{key:"onSubmittedPromoErrorsReceived",value:function(e){var t=e[0].description.split("|")[1];this._submissionError=t,this.emit(v,t)}},{key:"cleanFilterData",value:function(e){var t=e;for(var n in t)t[n].value=t[n].mercPromoType,delete e[n].mercPromoType,t[n].label=t[n].description,delete t[n].description;return t}},{key:"handleActions",value:function(e){switch(e.type){case r.default.Merchandising.DELETE_MERCHANDISING_PROMO:this.onMerchandisingPromoDeleted(e.args.id);break;case r.default.Merchandising.LOAD_MERCHANDISING_PROMO_FILTERS:this.onMerchandisingPromoFiltersLoaded(e.args);break;case r.default.Merchandising.LOAD_MERCHANDISING_PROMO_RULES:this.onMerchandisingPromoRulesLoaded(e.args);break;case r.default.Merchandising.LOAD_MERCHANDISING_PROMOS:this.onMerchandisingPromosLoaded(e.args.data);break;case r.default.Merchandising.SUBMIT_MERCHANDISING_PROMO:this.onMerchandisingPromoSubmitted(e.args);break;case r.default.Merchandising.SUBMIT_MERCHANDISING_PROMO_ERRORS:this.onSubmittedPromoErrorsReceived(e.args);break;case r.default.Merchandising.UPDATE_MERCHANDISING_PROMO_STATUS:this.onMerchandisingPromoStatusUpdated(e.args.id)}}}])&&l(n.prototype,o),a&&l(n,a),t}());o.default.register(b.handleActions.bind(b));var g=b;t.default=g},957:function(e,t,n){var o={"./en-au":477,"./en-au.js":477,"./en-ca":478,"./en-ca.js":478,"./en-gb":479,"./en-gb.js":479,"./en-ie":480,"./en-ie.js":480,"./en-il":481,"./en-il.js":481,"./en-nz":482,"./en-nz.js":482};function a(e){var t=r(e);return n(t)}function r(e){var t=o[e];if(t+1)return t;var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}a.keys=function(){return Object.keys(o)},a.resolve=r,(e.exports=a).id=957},960:function(e,t,n){var o={"./en-au":484,"./en-au.js":484,"./en-ca":485,"./en-ca.js":485,"./en-gb":486,"./en-gb.js":486,"./en-ie":487,"./en-ie.js":487,"./en-il":488,"./en-il.js":488,"./en-nz":489,"./en-nz.js":489};function a(e){var t=r(e);return n(t)}function r(e){var t=o[e];if(t+1)return t;var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}a.keys=function(){return Object.keys(o)},a.resolve=r,(e.exports=a).id=960},963:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=o(n(0)),d=(o(n(13)),o(n(1)));n(15);function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(e){function a(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=this,(t=!(o=s(a).call(this,e))||"object"!==r(o)&&"function"!=typeof o?u(n):o).state={},t._findErrorPos=t._findErrorPos.bind(u(u(t))),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(a,c.default.Component),t=a,(n=[{key:"open",value:function(){return this.props.open}},{key:"messages",value:function(){return this.props.messages}},{key:"_findErrorPos",value:function(e,t){return e.findIndex(function(e){return e.id===t})}},{key:"renderOptions",value:function(){var e=this.props.errors?this.props.errors:[],t=[],n=-1,o=!1,a=!0,r=!1,i=void 0;try{for(var s,l=this.messages()[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value;n++,o=-1===this._findErrorPos(e,u.id),t.push(c.default.createElement("li",{ref:"option-"+n,key:n,role:"option"},c.default.createElement("span",{className:(0,d.default)("glyphicon","glyphicon-ok",{"rule-passed":o},{"rule-failed":!o})},"Â ")," ",u.text," ",void 0!==u.rightLabel&&c.default.createElement("div",{className:"pull-right"},u.rightLabel)))}}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return t}},{key:"render",value:function(){var e=this.renderOptions();return c.default.createElement("div",{className:(0,d.default)("validation-message-pane",{open:this.open()})},c.default.createElement("div",{className:"tray"},c.default.createElement("div",{className:"intro"},"Your password must:"),c.default.createElement("ul",null,e)))}}])&&i(t.prototype,n),o&&i(t,o),a}();a.propTypes={open:c.default.PropTypes.bool.isRequired,messages:c.default.PropTypes.arrayOf(c.default.PropTypes.object).isRequired};var f=a;t.default=f},974:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveUser=function(e,t){return o.get("/api/authentication/retrieve_user/"+e,void 0,t)},t.emailPreferences=function(e,t){return a.get("/api/authentication/retrieve_email/"+e,{},t)},t.emailSearchAdmin=function(e,t){return a.post("/api/authentication/search_email",e,t)},t.pubSearchAdmin=function(e,t){return a.get("/api/authentication/pubid_email/"+e,{},t)},t.emailPreferencesChange=function(e,t,n){return a.post("/api/authentication/retrieve_email_preferences/"+e,t,n)},t.retrieveUserForAdmin=function(e,t){return o.get("/api/admin/authentication/retrieve_user"+e,void 0,t)},t.loadAddressBook=function(e){return a.get("/api/account/addressbook?filter=Mailing",{},e)},t.addAddress=function(e,t){return a.put("/api/account/addressbook",e,t)},t.updateAddress=function(e,t){return a.post("/api/account/addressbook",e,t)},t.loadPaymentMethods=function(e){return a.get("/api/account/payment-methods",{},e)},t.loadProfile=function(e){return a.get("/api/account/profile",{},e)},t.logout=function(e){return a.get("/api/authentication/logout",{},e)},t.updateProfile=function(e,t){return a.put("/api/account/profile",e,t)},t.loadSecurityQuestions=function(e){return a.get("/api/account/security_questions",{},e)},t.getEnvPath=function(){return o.get("/api/account/getenv",{})},t.verifyOtp=function(e,t,n){return a.post("/api/account/verifyotp?otp="+e+"&type="+t,{},n)},t.resendCode=function(e,t,n){var o="type="+e;t&&(o=o+"&mobileNumber="+t);return a.post("/api/account/resendCode?"+o,{},n)},t.loadPreferences=t.savePreferences=void 0;var o=r(n(130)),a=r(n(67));n(975);function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}t.savePreferences=function(e,t){return a.post("/api/authentication/save-prefs",e,t)};t.loadPreferences=function(e){return a.get("/api/account/preferences",{},e)}},976:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERRORS_BY_ATG=t.ERRORS_BY_NPS=void 0;t.ERRORS_BY_NPS={2:"Your security answer does not meet the requirements. Please try again.",30004:"Your password is not correct for this account.",30006:"An account with this email address already exists"};t.ERRORS_BY_ATG={1240:"This password is too common for our security requirements. Please enter a new password.",1241:"Your password can't be the same as your username."}},977:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addProject=function(e,t){return r.post("/api/cart/add",{projectId:e,quantity:1},t)},t.loadCart=function(e){return r.get("/api/cart",{},e)},t.loadCartCheckoutPage=function(e){return r.get("/api/cart/checkoutPage",{},e)},t.updateEprotect=function(e){return r.get("/api/cart/eProtectId",{},e)},t.loadShippingMethods=function(e){return r.get("/api/cart/shipping-methods",{},e)},t.loadBillingAddressCountries=function(e){return r.get("/api/cart/billing-address-countries",{},e)},t.loadBillingAddressStates=function(e,t){return r.get("/api/cart/billing-address-states/"+e,{},t)},t.updateProject=function(e,t,n){return r.put("/api/cart/update",{projectId:e,quantity:t},n)},t.updateShippingAddressNickName=function(e,t,n){return r.post("/api/cart/shipping-address-nickname",e,n)},t.updateShippingAddress=function(e,t){return r.post("/api/cart/shipping-address",e,t)},t.updateShippingMethod=function(e,t){return r.post("/api/cart/shipping-method",e,t)},t.updatePaymentMethod=function(e,t){return r.put("/api/cart/payment-method",e,t)},t.submitOrder=function(e,t,n,o){var a=e?{cvv:e}:{};return a.eProtectId=t,a.recaptchaToken=n,r.post("/api/cart/submit-order",a,o)},t.loadToken=void 0;var r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(67));t.loadToken=function(e){return r.get("/api/cart/token",{},e)}},978:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(132))&&o.__esModule?o:{default:o};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,(0,a.default)(e||s))}var e,n,o;return e=t,(n=[{key:"_findTotalByName",value:function(t){return this.totals.find(function(e){return e.name===t})||0}},{key:"cartItemTotal",get:function(){return parseFloat(this._findTotalByName("cartItemTotal").value)}},{key:"cartItemTotalMinusDiscount",get:function(){return parseFloat(this._findTotalByName("cartItemTotalMinusDiscount").value)}},{key:"discountTotal",get:function(){return parseFloat(this._findTotalByName("discountTotal").value)}},{key:"handling",get:function(){return parseFloat(this._findTotalByName("handlingCharge").value)}},{key:"orderTaxTotal",get:function(){return parseFloat(this._findTotalByName("orderTaxTotal").value)}},{key:"orderTotal",get:function(){return parseFloat(this._findTotalByName("orderTotal").value)}},{key:"orderTotalMinusTax",get:function(){return parseFloat(this._findTotalByName("orderTotalMinusTax").value)}},{key:"promotions",get:function(){var e=this.totals.find(function(e){return"discountTotal"===e.name});return e&&e.bnPressPromos?e.bnPressPromos[0]:null}},{key:"shipping",get:function(){return parseFloat(this._findTotalByName("shipping").value)}},{key:"shippingMethodId",get:function(){return this.shippingGroups&&0<this.shippingGroups.length&&this.shippingGroups[0].shippingMethod?this.shippingGroups[0].shippingMethod:null}}])&&r(e.prototype,n),o&&r(e,o),t}();t.default=i;var s={atgSessionId:null,completeness:null,customerId:null,maxProofs:null,paymentGroups:[],projects:[],shippingMethodSet:!1,shippingGroups:[],totals:null}},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROTATE_MESSAGES=t.TIMEZONES=t.FINANCIAL_SYMBOLS=t.ASSET_BASE_URL=void 0;var o=window.applicationConfig.assetBaseUrl;t.ASSET_BASE_URL=o;t.FINANCIAL_SYMBOLS={USD:"$",GBP:"Â£",EUR:"â‚¬"};t.TIMEZONES={AMERICA_NEW_YORK:"America/New_York",UTC_OFFSET_EST:-5,UTC_OFFSET_EDT:-4};t.ROTATE_MESSAGES=8e3},993:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBroadcastMessage=function(e,t,n,o){l.createBroadcastMessage(e,t).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.updateBroadcastMessage=function(e,t,n,o,a,r){l.updateBroadcastMessage(e,t,n,o).then(function(e){try{a(e)}catch(e){console.log(e)}})},t.updatePromotionMessage=function(e,t,n){l.updatePromotionMessage(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.deleteMessage=function(e,t,n,o,a,r){l.deleteBroadcastMessage(e,t,n,o).then(function(e){try{a(e)}catch(e){console.log(e)}})},t.getBroadcastRecipient=function(e,t,n){l.getBroadcastRecipient(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getPromotions=function(e,t,n,o,a,r,i){l.getPromotions(e,t,n,o,a).then(function(e){try{r(e)}catch(e){console.log(e)}})},t.getBroadcastMessages=function(e,t,n,o,a,r){l.getBroadcastMessages(e,t,n,o).then(function(e){try{a(e)}catch(e){console.log(e)}})},t.getPublishers=function(e,t,n,o,a){l.getPublishers(e,t,n).then(function(e){try{o(e)}catch(e){console.log(e)}})},t.getBroadcastMessagePreview=function(e,t,n){l.getBroadcastMessagePreview(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.getPromotionMessages=function(t,e){l.getPromotionMessages().then(function(e){try{t(e)}catch(e){console.log(e)}})},t.onSiteModuleoptionsLoaded=function(t,e){l.onSiteModuleoptionsLoaded().then(function(e){try{t(e)}catch(e){console.log(e)}})},t.onSiteModuleImageLoaded=function(t,e){l.onSiteModuleImageLoaded().then(function(e){try{t(e)}catch(e){console.log(e)}})},t.onPageSiteModuleDisplay=function(e,t,n,o){l.onPageSiteModuleDisplay(e,t).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.onImageUploadBanner=function(e,t,n){l.onImageUploadBanner(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.onImageUploadNew=function(e,t,n){l.onImageUploadNew(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.siteModuleCreate=function(e,t,n,o){l.siteModuleCreate(e,t).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.getSiteModules=function(e,t,n,o,a){l.getSiteModules(e,t,n).then(function(e){try{o(e)}catch(e){console.log(e)}})},t.deleteSiteModules=function(e,t,n,o,a,r){l.deleteSiteModules(e,t,n,o).then(function(e){try{a(e)}catch(e){console.log(e)}})},t.DeletePromotion=function(e,t,n,o,a,r,i,s){l.DeletePromotion(e,t,n,o,a,r).then(function(e){try{i(e)}catch(e){console.log(e)}})},t.DeletePublishers=function(e,t,n){l.DeletePublishers(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.exportPromotion=function(e,t,n){l.exportPromotion(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.deleteAdbanners=function(e,t,n,o,a){l.deleteAdbanners(e,t,n).then(function(e){try{o(e)}catch(e){console.log(e)}})},t.getAdBanners=function(e,t,n,o){l.getAdBanners(e,t).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.onBannerResourceLoaded=function(e,t,n){l.onBannerResourceLoaded(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.onBannerSizesLoaded=function(t,e){l.onBannerSizesLoaded().then(function(e){try{t(e)}catch(e){console.log(e)}})},t.onTurnAroundTime=function(t,e){l.onTurnAroundTime().then(function(e){try{t(e)}catch(e){console.log(e)}})},t.uploadAdbannerImage=function(e,t,n){l.uploadAdbannerImage(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.uploadWForm=function(e,t,n,o){l.uploadWForm(e,t).then(function(e){try{n(e)}catch(e){console.log(e)}})},t.enanleUploadWForm=function(e,t,n){l.enanleUploadWForm(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.resetAccountAdmin=function(e,t,n){l.resetAccountAdmin(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.overrideAccountAdmin=function(e,t,n){l.overrideAccountAdmin(e).then(function(e){try{t(e)}catch(e){console.log(e)}})},t.saveAdBanner=function(e,t,n,o){l.saveAdBanner(e,t).then(function(e){try{n(e)}catch(e){console.log(e)}})};var l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(994))},994:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBroadcastMessage=function(e,t,n){return s.post("/api/admin/broadcast-message-create?recordsPerPage="+t,{message:e},n)},t.updateBroadcastMessage=function(e,t,n,o,a){return s.put("/api/admin/broadcast-message-create?status="+t+"&pageNumber="+n+"&recordsPerPage="+o,{message:e},a)},t.updatePromotionMessage=function(e,t){return s.put("/api/admin/promotion-update",{message:e},t)},t.deleteBroadcastMessage=function(e,t,n,o,a){return s.del("/api/admin/broadcast-message-delete?id="+e+"&status="+t+"&pageNumber="+n+"&recordsPerPage="+o,{},a)},t.getBroadcastMessages=function(e,t,n,o){return s.get("/api/admin/broadcast-messages?typeId="+e+"&status="+t+"&pageNumber="+n+"&recordsPerPage="+o)},t.getPromotions=function(e,t,n,o,a){return s.get("/api/admin/get-promotions?pageNum="+e+"&status="+t+"&recordsPerPage="+n+"&sortBy="+o+"&searchText="+a)},t.getPublishers=function(e,t,n){return s.get("/api/admin/get-publishers?pageNum="+e+"&recordsPerPage="+t+"&searchText="+n)},t.DeletePublishers=function(e,t){return s.del("/api/admin/publishers-delete?vendorNumber="+e,{},t)},t.DeletePromotion=function(e,t,n,o,a,r,i){return s.del("/api/admin/promotions-delete?definitionId="+e+"&pageNum="+t+"&status="+n+"&recordsPerPage="+o+"&sortBy="+a+"&searchText="+r,{},i)},t.getBroadcastMessagePreview=function(e,t){return s.post("/api/admin/broadcast-message-preview",{message:e},t)},t.exportPromotion=function(e,t){return s.get("/api/admin/export-report-promotion?promoDefinitionId="+e,{},t)},t.getPromotionMessages=function(){return s.get("/api/admin/promotion-messages")},t.getBroadcastRecipient=function(e){return s.get("/api/admin/broadcast-recipient?query="+e)},t.onSiteModuleoptionsLoaded=function(e){return s.get("/api/admin/site-module",{},e)},t.onSiteModuleImageLoaded=function(e){return s.get("/api/admin/site-module-image",{},e)},t.onPageSiteModuleDisplay=function(e,t,n){return s.get("/api/admin/site-module-display?moduleType="+e+"&pageUrl="+t)},t.onImageUploadBanner=function(e,t){return s.post("/api/admin/site-module-image-upload",e,t)},t.onImageUploadNew=function(e,t){return s.get("/api/admin/site-module-image-upload-new?filePath="+e,{},t)},t.siteModuleCreate=function(e,t,n){return s.post("/api/admin/site-module-create?recordsPerPage="+t,{message:e},n)},t.getSiteModules=function(e,t,n){return s.get("/api/admin/site-modules?status="+e+"&pageNumber="+t+"&recordsPerPage="+n)},t.deleteSiteModules=function(e,t,n,o,a){return s.del("/api/admin/site-modules-delete?id="+e+"&status="+t+"&pageNumber="+n+"&recordsPerPage="+o,{},a)},t.deleteAdbanners=function(e,t,n,o){return s.del("/api/admin/ad-banners-delete?id="+e+"&page="+t+"&recordsPerPage="+n,{},o)},t.getAdBanners=function(e,t){return s.get("/api/admin/ad-banners?recordsPerPage="+t+"&page="+e+"&id=")},t.onBannerResourceLoaded=function(e,t){return s.get("/api/admin/banner-resource-type?type="+e,{},t)},t.onBannerSizesLoaded=function(e){return s.get("/api/admin/banner-sizes",{},e)},t.uploadAdbannerImage=function(e,t){return s.post("/api/admin/banner-image-upload",e,t)},t.uploadWForm=function(e,t,n){return s.post("/api/admin/file-upload?vendorNumber="+t,e,n)},t.enanleUploadWForm=function(e,t){return s.post("/api/admin/file-upload-enable?vendorNumber="+e,t)},t.resetAccountAdmin=function(e,t){return s.del("/api/admin/account-reset-lockout?vendorNumber="+e,t)},t.overrideAccountAdmin=function(e,t){return s.get("/api/admin/override-reset-lockout?vendorNumber="+e,t)},t.saveAdBanner=function(e,t,n){return s.post("/api/admin/ad-banner-save?recordsPerPage="+t,{message:e},n)},t.onTurnAroundTime=function(e){return s.get("/api/admin/turn-around-time",{},e)};var s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}}(n(130))}}]);